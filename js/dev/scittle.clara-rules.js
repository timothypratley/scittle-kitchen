(function(){
'use strict';
var cljs$cst$3108$matches = new $APP.cljs.core.Symbol(null, "matches", "matches", -2018937771, null), cljs$cst$3190$query_nodes = new $APP.cljs.core.Symbol(null, "query-nodes", "query-nodes", -1637689203, null), cljs$cst$3145$binding_keys = new $APP.cljs.core.Symbol(null, "binding-keys", "binding-keys", -1577975074, null), cljs$cst$3102$initial_value = new $APP.cljs.core.Symbol(null, "initial-value", "initial-value", 2111150908, null), cljs$cst$3219$clara_DOT_rules_SLASH_insert_BANG_ = new $APP.cljs.core.Symbol("clara.rules", 
"insert!", "clara.rules/insert!", -60206236, null), cljs$cst$3150$clara_DOT_rules_DOT_engine_SLASH_not_reduced = new $APP.cljs.core.Keyword("clara.rules.engine", "not-reduced", "clara.rules.engine/not-reduced", 1509916903), cljs$cst$3182$productions = new $APP.cljs.core.Keyword(null, "productions", "productions", -1986385529), cljs$cst$3110$fact = new $APP.cljs.core.Symbol(null, "fact", "fact", 840714996, null), cljs$cst$3112$ancestor_bindings = new $APP.cljs.core.Keyword(null, "ancestor-bindings", 
"ancestor-bindings", 1005990547), cljs$cst$3144$condition = new $APP.cljs.core.Symbol(null, "condition", "condition", -985998117, null), cljs$cst$3196$clara_DOT_rules = new $APP.cljs.core.Symbol(null, "clara.rules", "clara.rules", -1519275947, null), cljs$cst$3200$insert_unconditional_BANG_ = new $APP.cljs.core.Symbol(null, "insert-unconditional!", "insert-unconditional!", 564648706, null), cljs$cst$3194$ancestors_fn = new $APP.cljs.core.Keyword(null, "ancestors-fn", "ancestors-fn", 1984556654), 
cljs$cst$3211$assemble_session = new $APP.cljs.core.Symbol(null, "assemble-session", "assemble-session", -1156840236, null), cljs$cst$3175$get_alphas_fn = new $APP.cljs.core.Symbol(null, "get-alphas-fn", "get-alphas-fn", -2030015124, null), cljs$cst$3095$retract = new $APP.cljs.core.Keyword(null, "retract", "retract", -1549826125), cljs$cst$3135$conditions_and_rules = new $APP.cljs.core.Keyword(null, "conditions-and-rules", "conditions-and-rules", 1671946271), cljs$cst$3213$insert_all_unconditional_BANG_ = 
new $APP.cljs.core.Symbol(null, "insert-all-unconditional!", "insert-all-unconditional!", 1318734433, null), cljs$cst$3215$clara_DOT_rules_SLASH_accumulate = new $APP.cljs.core.Symbol("clara.rules", "accumulate", "clara.rules/accumulate", -1600067400, null), cljs$cst$3204$fact_seq = new $APP.cljs.core.Symbol(null, "fact-seq", "fact-seq", -1644776226, null), cljs$cst$3081$activation_map = new $APP.cljs.core.Symbol(null, "activation-map", "activation-map", 2002631041, null), cljs$cst$3143$constraints = 
new $APP.cljs.core.Keyword(null, "constraints", "constraints", 422775616), cljs$cst$3205$insert_BANG_ = new $APP.cljs.core.Symbol(null, "insert!", "insert!", 1078968596, null), cljs$cst$3098$retract_fn = new $APP.cljs.core.Keyword(null, "retract-fn", "retract-fn", -44922239), cljs$cst$3115$clara_DOT_rules_DOT_engine_SLASH_system_type = new $APP.cljs.core.Keyword("clara.rules.engine", "system-type", "clara.rules.engine/system-type", -1621072668), cljs$cst$3129$no_loop = new $APP.cljs.core.Keyword(null, 
"no-loop", "no-loop", 908836126), cljs$cst$3073$rulebase = new $APP.cljs.core.Symbol(null, "rulebase", "rulebase", 729857576, null), cljs$cst$3122$pending_updates = new $APP.cljs.core.Keyword(null, "pending-updates", "pending-updates", -942903722), cljs$cst$3106$convert_return_fn = new $APP.cljs.core.Symbol(null, "convert-return-fn", "convert-return-fn", 1913096936, null), cljs$cst$3131$production = new $APP.cljs.core.Symbol(null, "production", "production", -873019530, null), cljs$cst$3086$alpha_memory = 
new $APP.cljs.core.Keyword(null, "alpha-memory", "alpha-memory", -1791813218), cljs$cst$3221$clara_DOT_rules_SLASH_insert = new $APP.cljs.core.Symbol("clara.rules", "insert", "clara.rules/insert", 581904730, null), cljs$cst$3207$insert = new $APP.cljs.core.Symbol(null, "insert", "insert", -1367960374, null), cljs$cst$3227$clara_DOT_rules_SLASH_insert_all_unconditional_BANG_ = new $APP.cljs.core.Symbol("clara.rules", "insert-all-unconditional!", "clara.rules/insert-all-unconditional!", -625935119, 
null), cljs$cst$3139$activation = new $APP.cljs.core.Symbol(null, "activation", "activation", -525914697, null), cljs$cst$3078$beta_memory = new $APP.cljs.core.Symbol(null, "beta-memory", "beta-memory", 1705892745, null), cljs$cst$3082$rulebase = new $APP.cljs.core.Keyword(null, "rulebase", "rulebase", -910673951), cljs$cst$3117$transient_memory = new $APP.cljs.core.Keyword(null, "transient-memory", "transient-memory", -1404165721), cljs$cst$3089$production_memory = new $APP.cljs.core.Keyword(null, 
"production-memory", "production-memory", -580735407), cljs$cst$3184$id_to_node = new $APP.cljs.core.Keyword(null, "id-to-node", "id-to-node", -1734332932), cljs$cst$3218$clara_DOT_rules_SLASH_insert_all = new $APP.cljs.core.Symbol("clara.rules", "insert-all", "clara.rules/insert-all", -1244166128, null), cljs$cst$3094$insert = new $APP.cljs.core.Keyword(null, "insert", "insert", 1286475395), cljs$cst$3189$production_nodes = new $APP.cljs.core.Symbol(null, "production-nodes", "production-nodes", 
718323119, null), cljs$cst$3103$retract_fn = new $APP.cljs.core.Symbol(null, "retract-fn", "retract-fn", 1595609288, null), cljs$cst$3128$props = new $APP.cljs.core.Keyword(null, "props", "props", 453281727), cljs$cst$3161$new_bindings = new $APP.cljs.core.Symbol(null, "new-bindings", "new-bindings", 432523312, null), cljs$cst$3137$fact_type = new $APP.cljs.core.Keyword(null, "fact-type", "fact-type", 1233801992), cljs$cst$3155$new_bindings = new $APP.cljs.core.Keyword(null, "new-bindings", "new-bindings", 
-1208008215), cljs$cst$3195$scittle_DOT_clara_rules_SLASH_clara_rules = new $APP.cljs.core.Keyword("scittle.clara-rules", "clara-rules", "scittle.clara-rules/clara-rules", 1339368772), cljs$cst$3202$session = new $APP.cljs.core.Symbol(null, "session", "session", -1646156666, null), cljs$cst$3087$beta_memory = new $APP.cljs.core.Keyword(null, "beta-memory", "beta-memory", 65361218), cljs$cst$3157$_LT__ = new $APP.cljs.core.Symbol(null, "\x3c-", "\x3c-", -1894022771, null), cljs$cst$3126$production = 
new $APP.cljs.core.Keyword(null, "production", "production", 1781416239), cljs$cst$3107$matches = new $APP.cljs.core.Keyword(null, "matches", "matches", 635497998), cljs$cst$3147$original_constraints = new $APP.cljs.core.Keyword(null, "original-constraints", "original-constraints", 611382542), cljs$cst$3198$G__36913 = new $APP.cljs.core.Symbol(null, "G__36913", "G__36913", 49622182, null), cljs$cst$3199$accumulate = new $APP.cljs.core.Symbol(null, "accumulate", "accumulate", 752787240, null), cljs$cst$3159$accumulator = 
new $APP.cljs.core.Symbol(null, "accumulator", "accumulator", -1108250268, null), cljs$cst$3118$transport = new $APP.cljs.core.Keyword(null, "transport", "transport", -649001056), cljs$cst$3083$activation_group_sort_fn = new $APP.cljs.core.Keyword(null, "activation-group-sort-fn", "activation-group-sort-fn", -1031438635), cljs$cst$3154$result_binding = new $APP.cljs.core.Keyword(null, "result-binding", "result-binding", -1705495081), cljs$cst$3133$param_keys = new $APP.cljs.core.Keyword(null, "param-keys", 
"param-keys", -2066082581), cljs$cst$3169$production_nodes = new $APP.cljs.core.Keyword(null, "production-nodes", "production-nodes", -922208408), cljs$cst$3075$activation_group_fn = new $APP.cljs.core.Symbol(null, "activation-group-fn", "activation-group-fn", -1138181291, null), cljs$cst$3153$accumulator = new $APP.cljs.core.Keyword(null, "accumulator", "accumulator", 1546185501), cljs$cst$3099$reduce_fn = new $APP.cljs.core.Keyword(null, "reduce-fn", "reduce-fn", 1170414925), cljs$cst$3109$fact = 
new $APP.cljs.core.Keyword(null, "fact", "fact", -799816531), cljs$cst$3220$clara_DOT_rules_SLASH_fire_rules = new $APP.cljs.core.Symbol("clara.rules", "fire-rules", "clara.rules/fire-rules", 1547752633, null), cljs$cst$3141$condition = new $APP.cljs.core.Keyword(null, "condition", "condition", 1668437652), cljs$cst$3164$logical_insertions = new $APP.cljs.core.Keyword(null, "logical-insertions", "logical-insertions", -657637995), cljs$cst$3165$rhs_retractions = new $APP.cljs.core.Keyword(null, "rhs-retractions", 
"rhs-retractions", 141653921), cljs$cst$3148$join_filter_fn = new $APP.cljs.core.Symbol(null, "join-filter-fn", "join-filter-fn", -1689849867, null), cljs$cst$3104$reduce_fn = new $APP.cljs.core.Symbol(null, "reduce-fn", "reduce-fn", -1484020844, null), cljs$cst$3072$clara_DOT_rules_DOT_memory_SLASH_no_accum_reduced = new $APP.cljs.core.Keyword("clara.rules.memory", "no-accum-reduced", "clara.rules.memory/no-accum-reduced", -1199078257), cljs$cst$3130$tokens = new $APP.cljs.core.Keyword(null, "tokens", 
"tokens", -818939304), cljs$cst$3127$rhs = new $APP.cljs.core.Keyword(null, "rhs", "rhs", -229356739), cljs$cst$3186$beta_roots = new $APP.cljs.core.Symbol(null, "beta-roots", "beta-roots", 427431210, null), cljs$cst$3070$join_bindings = new $APP.cljs.core.Keyword(null, "join-bindings", "join-bindings", 470938864), cljs$cst$3090$activation_map = new $APP.cljs.core.Keyword(null, "activation-map", "activation-map", 362099514), cljs$cst$3192$alpha_fn = new $APP.cljs.core.Keyword(null, "alpha-fn", "alpha-fn", 
-1273719097), cljs$cst$3092$facts = new $APP.cljs.core.Keyword(null, "facts", "facts", -1734543718), cljs$cst$3123$batched_unconditional_insertions = new $APP.cljs.core.Keyword(null, "batched-unconditional-insertions", "batched-unconditional-insertions", -1018796916), cljs$cst$3142$binding_keys = new $APP.cljs.core.Keyword(null, "binding-keys", "binding-keys", 1076460695), cljs$cst$3178$extracted_negation = new $APP.cljs.core.Keyword(null, "extracted-negation", "extracted-negation", 2066250815), 
cljs$cst$3124$batched_logical_insertions = new $APP.cljs.core.Keyword(null, "batched-logical-insertions", "batched-logical-insertions", 1988559902), cljs$cst$3209$retract_BANG_ = new $APP.cljs.core.Symbol(null, "retract!", "retract!", 1317221746, null), cljs$cst$3101$convert_return_fn = new $APP.cljs.core.Keyword(null, "convert-return-fn", "convert-return-fn", 272565409), cljs$cst$3193$fact_type_fn = new $APP.cljs.core.Keyword(null, "fact-type-fn", "fact-type-fn", 1401601723), cljs$cst$3222$clara_DOT_rules_SLASH___GT_Rulebase = 
new $APP.cljs.core.Symbol("clara.rules", "-\x3eRulebase", "clara.rules/-\x3eRulebase", 55574413, null), cljs$cst$3120$get_alphas_fn = new $APP.cljs.core.Keyword(null, "get-alphas-fn", "get-alphas-fn", 624420645), cljs$cst$3197$map__GT_Rulebase = new $APP.cljs.core.Symbol(null, "map-\x3eRulebase", "map-\x3eRulebase", -1439488013, null), cljs$cst$3208$__GT_Rulebase = new $APP.cljs.core.Symbol(null, "-\x3eRulebase", "-\x3eRulebase", 1990291741, null), cljs$cst$3121$listener = new $APP.cljs.core.Keyword(null, 
"listener", "listener", 882147248), cljs$cst$3191$id_to_node = new $APP.cljs.core.Symbol(null, "id-to-node", "id-to-node", -93801405, null), cljs$cst$3224$clara_DOT_rules_SLASH_insert_all_BANG_ = new $APP.cljs.core.Symbol("clara.rules", "insert-all!", "clara.rules/insert-all!", 1683657118, null), cljs$cst$3080$production_memory = new $APP.cljs.core.Symbol(null, "production-memory", "production-memory", 1059796120, null), cljs$cst$3210$insert_all_BANG_ = new $APP.cljs.core.Symbol(null, "insert-all!", 
"insert-all!", -399187410, null), cljs$cst$3088$accum_memory = new $APP.cljs.core.Keyword(null, "accum-memory", "accum-memory", -312887066), cljs$cst$3183$queries = new $APP.cljs.core.Keyword(null, "queries", "queries", 1446291995), cljs$cst$3188$queries = new $APP.cljs.core.Symbol(null, "queries", "queries", -1208143774, null), cljs$cst$3084$activation_group_fn = new $APP.cljs.core.Keyword(null, "activation-group-fn", "activation-group-fn", 1516254478), cljs$cst$3171$query_nodes = new $APP.cljs.core.Keyword(null, 
"query-nodes", "query-nodes", 1016746566), cljs$cst$3167$retraction = new $APP.cljs.core.Keyword(null, "retraction", "retraction", -317713819), cljs$cst$3097$initial_value = new $APP.cljs.core.Keyword(null, "initial-value", "initial-value", 470619381), cljs$cst$3216$clara_DOT_rules_SLASH_insert_unconditional_BANG_ = new $APP.cljs.core.Symbol("clara.rules", "insert-unconditional!", "clara.rules/insert-unconditional!", -1119794798, null), cljs$cst$3085$alphas_fn = new $APP.cljs.core.Keyword(null, "alphas-fn", 
"alphas-fn", 1360431200), cljs$cst$3113$gen_rule_name = new $APP.cljs.core.Symbol(null, "gen-rule-name", "gen-rule-name", -1524415331, null), cljs$cst$3071$fact_bindings = new $APP.cljs.core.Keyword(null, "fact-bindings", "fact-bindings", 1746797949), cljs$cst$3172$memory = new $APP.cljs.core.Symbol(null, "memory", "memory", 191130097, null), cljs$cst$3162$clara_DOT_rules_DOT_engine_SLASH_no_previous_value = new $APP.cljs.core.Keyword("clara.rules.engine", "no-previous-value", "clara.rules.engine/no-previous-value", 
668219061), cljs$cst$3114$ancestor_bindings = new $APP.cljs.core.Symbol(null, "ancestor-bindings", "ancestor-bindings", -1648445222, null), cljs$cst$3225$clara_DOT_rules_SLASH_query = new $APP.cljs.core.Symbol("clara.rules", "query", "clara.rules/query", 1623326097, null), cljs$cst$3217$clara_DOT_rules_SLASH_retract = new $APP.cljs.core.Symbol("clara.rules", "retract", "clara.rules/retract", -1850306454, null), cljs$cst$3100$combine_fn = new $APP.cljs.core.Keyword(null, "combine-fn", "combine-fn", 
-333945895), cljs$cst$3158$accum_condition = new $APP.cljs.core.Symbol(null, "accum-condition", "accum-condition", 396198188, null), cljs$cst$3074$activation_group_sort_fn = new $APP.cljs.core.Symbol(null, "activation-group-sort-fn", "activation-group-sort-fn", 609092892, null), cljs$cst$3179$salience = new $APP.cljs.core.Keyword(null, "salience", "salience", 1001218760), cljs$cst$3125$batched_rhs_retractions = new $APP.cljs.core.Keyword(null, "batched-rhs-retractions", "batched-rhs-retractions", 
486751121), cljs$cst$3134$param_keys = new $APP.cljs.core.Symbol(null, "param-keys", "param-keys", -425551054, null), cljs$cst$3136$activation = new $APP.cljs.core.Keyword(null, "activation", "activation", 2128521072), cljs$cst$3140$fact_type = new $APP.cljs.core.Symbol(null, "fact-type", "fact-type", -1420633777, null), cljs$cst$3173$transport = new $APP.cljs.core.Symbol(null, "transport", "transport", 991530471, null), cljs$cst$3149$clara_DOT_rules_DOT_engine_SLASH_no_previous_result = new $APP.cljs.core.Keyword("clara.rules.engine", 
"no-previous-result", "clara.rules.engine/no-previous-result", 1152095609), cljs$cst$3180$clara_rules_SLASH_internal_salience = new $APP.cljs.core.Keyword("clara-rules", "internal-salience", "clara-rules/internal-salience", 2063309195), cljs$cst$3076$alphas_fn = new $APP.cljs.core.Symbol(null, "alphas-fn", "alphas-fn", -1294004569, null), cljs$cst$3146$join_filter_fn = new $APP.cljs.core.Keyword(null, "join-filter-fn", "join-filter-fn", 964585902), cljs$cst$3176$pending_operations = new $APP.cljs.core.Symbol(null, 
"pending-operations", "pending-operations", 327112310, null), cljs$cst$3201$retract = new $APP.cljs.core.Symbol(null, "retract", "retract", 90705402, null), cljs$cst$3079$accum_memory = new $APP.cljs.core.Symbol(null, "accum-memory", "accum-memory", 1327644461, null), cljs$cst$3096$updates = new $APP.cljs.core.Symbol(null, "updates", "updates", -640452317, null), cljs$cst$3163$unconditional_insertions = new $APP.cljs.core.Keyword(null, "unconditional-insertions", "unconditional-insertions", -405660998), 
cljs$cst$3166$insertion = new $APP.cljs.core.Keyword(null, "insertion", "insertion", -1713918452), cljs$cst$3105$combine_fn = new $APP.cljs.core.Symbol(null, "combine-fn", "combine-fn", 1306585632, null), cljs$cst$3203$insert_all = new $APP.cljs.core.Symbol(null, "insert-all", "insert-all", 26090368, null), cljs$cst$3138$env = new $APP.cljs.core.Symbol(null, "env", "env", -175281708, null), cljs$cst$3223$clara_DOT_rules_SLASH_retract_BANG_ = new $APP.cljs.core.Symbol("clara.rules", "retract!", "clara.rules/retract!", 
-1033336062, null), cljs$cst$3151$clara_DOT_rules_DOT_engine_SLASH_accum_node = new $APP.cljs.core.Keyword("clara.rules.engine", "accum-node", "clara.rules.engine/accum-node", -1366531457), cljs$cst$3181$alpha_roots = new $APP.cljs.core.Keyword(null, "alpha-roots", "alpha-roots", -371246654), cljs$cst$3177$beta_roots = new $APP.cljs.core.Keyword(null, "beta-roots", "beta-roots", -1213100317), cljs$cst$3152$accum_condition = new $APP.cljs.core.Keyword(null, "accum-condition", "accum-condition", -1244333339), 
cljs$cst$3187$productions = new $APP.cljs.core.Symbol(null, "productions", "productions", -345854002, null), cljs$cst$3174$listener = new $APP.cljs.core.Symbol(null, "listener", "listener", -1772288521, null), cljs$cst$3093$facts = new $APP.cljs.core.Symbol(null, "facts", "facts", -94012191, null), cljs$cst$3206$fire_rules = new $APP.cljs.core.Symbol(null, "fire-rules", "fire-rules", -1468447223, null), cljs$cst$3226$clara_DOT_rules_SLASH_assemble_session = new $APP.cljs.core.Symbol("clara.rules", 
"assemble-session", "clara.rules/assemble-session", 668316228, null), cljs$cst$3077$alpha_memory = new $APP.cljs.core.Symbol(null, "alpha-memory", "alpha-memory", -151281691, null), cljs$cst$3160$result_binding = new $APP.cljs.core.Symbol(null, "result-binding", "result-binding", -64963554, null), cljs$cst$3168$cancelling = new $APP.cljs.core.Keyword(null, "cancelling", "cancelling", -1399260262), cljs$cst$3212$alpha_fns = new $APP.cljs.core.Symbol(null, "alpha-fns", "alpha-fns", -544635527, null), 
cljs$cst$3185$alpha_roots = new $APP.cljs.core.Symbol(null, "alpha-roots", "alpha-roots", 1269284873, null), cljs$cst$3214$clara_DOT_rules_SLASH_map__GT_Rulebase = new $APP.cljs.core.Symbol("clara.rules", "map-\x3eRulebase", "clara.rules/map-\x3eRulebase", 370518371, null), cljs$cst$3111$gen_rule_name = new $APP.cljs.core.Keyword(null, "gen-rule-name", "gen-rule-name", 1130020438);
$APP.clojure.browser = {};
$APP.clojure.browser.event = {};
$APP.clojure.browser.event.IEventType = function() {
};
var clojure$browser$event$IEventType$event_types$dyn_47935 = function($this$$$) {
  var $m__5372__auto__$jscomp$274_m__5374__auto__$$ = $APP.clojure.browser.event.event_types[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
  if ($m__5372__auto__$jscomp$274_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$274_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$274_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$274_m__5374__auto__$$.call(null, $this$$$);
  }
  $m__5372__auto__$jscomp$274_m__5374__auto__$$ = $APP.clojure.browser.event.event_types._;
  if ($m__5372__auto__$jscomp$274_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$274_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$274_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$274_m__5374__auto__$$.call(null, $this$$$);
  }
  throw $APP.cljs.core.missing_protocol("IEventType.event-types", $this$$$);
};
$APP.clojure.browser.event.event_types = function($this$$$) {
  return $this$$$ != null && $this$$$.clojure$browser$event$IEventType$event_types$arity$1 != null ? $this$$$.clojure$browser$event$IEventType$event_types$arity$1($this$$$) : clojure$browser$event$IEventType$event_types$dyn_47935($this$$$);
};
$APP.goog.events.EventTarget.prototype.clojure$browser$event$IEventType$ = $APP.cljs.core.PROTOCOL_SENTINEL;
$APP.goog.events.EventTarget.prototype.clojure$browser$event$IEventType$event_types$arity$1 = function($this$$$) {
  return $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(function($p__47921_v$$) {
    var $k$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__47921_v$$, 0, null);
    $p__47921_v$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__47921_v$$, 1, null);
    return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.keyword.cljs$core$IFn$_invoke$arity$1($k$$.toLowerCase()), $p__47921_v$$], null);
  }, $APP.cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.js__GT_clj.cljs$core$IFn$_invoke$arity$1($APP.goog.events.EventType)], 0))));
};
typeof Element !== "undefined" && (Element.prototype.clojure$browser$event$IEventType$ = $APP.cljs.core.PROTOCOL_SENTINEL, Element.prototype.clojure$browser$event$IEventType$event_types$arity$1 = function($this$$$) {
  return $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(function($p__47925_v$$) {
    var $k$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__47925_v$$, 0, null);
    $p__47925_v$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__47925_v$$, 1, null);
    return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.keyword.cljs$core$IFn$_invoke$arity$1($k$$.toLowerCase()), $p__47925_v$$], null);
  }, $APP.cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.js__GT_clj.cljs$core$IFn$_invoke$arity$1($APP.goog.events.EventType)], 0))));
});
$APP.clojure.browser.event.listen = function($var_args$$) {
  switch(arguments.length) {
    case 3:
      return $APP.clojure.browser.event.listen.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    case 4:
      return $APP.clojure.browser.event.listen.cljs$core$IFn$_invoke$arity$4(arguments[0], arguments[1], arguments[2], arguments[3]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
$APP.clojure.browser.event.listen.cljs$core$IFn$_invoke$arity$3 = function($src$$, $type$$, $fn$$) {
  return $APP.clojure.browser.event.listen.cljs$core$IFn$_invoke$arity$4($src$$, $type$$, $fn$$, !1);
};
$APP.clojure.browser.event.listen.cljs$core$IFn$_invoke$arity$4 = function($src$$, $type$$, $fn$$, $capture_QMARK_$$) {
  return $APP.goog.events.listen($src$$, $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3($APP.clojure.browser.event.event_types($src$$), $type$$, $type$$), $fn$$, $capture_QMARK_$$);
};
$APP.clojure.browser.event.listen.cljs$lang$maxFixedArity = 4;
$APP.clojure.browser.event.listen_once = function($var_args$$) {
  switch(arguments.length) {
    case 3:
      return $APP.clojure.browser.event.listen_once.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    case 4:
      return $APP.clojure.browser.event.listen_once.cljs$core$IFn$_invoke$arity$4(arguments[0], arguments[1], arguments[2], arguments[3]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
$APP.clojure.browser.event.listen_once.cljs$core$IFn$_invoke$arity$3 = function($src$$, $type$$, $fn$$) {
  return $APP.clojure.browser.event.listen_once.cljs$core$IFn$_invoke$arity$4($src$$, $type$$, $fn$$, !1);
};
$APP.clojure.browser.event.listen_once.cljs$core$IFn$_invoke$arity$4 = function($src$$, $type$$, $fn$$, $capture_QMARK_$$) {
  return $APP.goog.events.listenOnce($src$$, $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3($APP.clojure.browser.event.event_types($src$$), $type$$, $type$$), $fn$$, $capture_QMARK_$$);
};
$APP.clojure.browser.event.listen_once.cljs$lang$maxFixedArity = 4;
$APP.clojure.browser.event.unlisten = function($var_args$$) {
  switch(arguments.length) {
    case 3:
      return $APP.clojure.browser.event.unlisten.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    case 4:
      return $APP.clojure.browser.event.unlisten.cljs$core$IFn$_invoke$arity$4(arguments[0], arguments[1], arguments[2], arguments[3]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
$APP.clojure.browser.event.unlisten.cljs$core$IFn$_invoke$arity$3 = function($src$$, $type$$, $fn$$) {
  return $APP.clojure.browser.event.unlisten.cljs$core$IFn$_invoke$arity$4($src$$, $type$$, $fn$$, !1);
};
$APP.clojure.browser.event.unlisten.cljs$core$IFn$_invoke$arity$4 = function($src$$, $type$$, $fn$$, $capture_QMARK_$$) {
  return $APP.goog.events.unlisten($src$$, $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3($APP.clojure.browser.event.event_types($src$$), $type$$, $type$$), $fn$$, $capture_QMARK_$$);
};
$APP.clojure.browser.event.unlisten.cljs$lang$maxFixedArity = 4;
$APP.clojure.browser.event.unlisten_by_key = function($key$$) {
  return $APP.goog.events.unlistenByKey($key$$);
};
$APP.clojure.browser.event.dispatch_event = function($src$$, $event$$) {
  return $APP.goog.events.dispatchEvent($src$$, $event$$);
};
$APP.clojure.browser.event.expose = function($e$$) {
  return $APP.goog.events.expose($e$$);
};
$APP.clojure.browser.event.fire_listeners = function($obj$$, $type$$, $capture$$, $event$$) {
  return null;
};
$APP.clojure.browser.event.total_listener_count = function() {
  return $APP.goog.events.getTotalListenerCount();
};
$APP.clojure.browser.event.get_listener = function($src$$, $type$$, $listener$$, $opt_capt$$, $opt_handler$$) {
  return null;
};
$APP.clojure.browser.event.all_listeners = function($obj$$, $type$$, $capture$$) {
  return null;
};
$APP.clojure.browser.event.unique_event_id = function($event_type$$) {
  return null;
};
$APP.clojure.browser.event.has_listener = function($obj$$, $opt_type$$, $opt_capture$$) {
  return null;
};
$APP.clojure.browser.event.remove_all = function($opt_obj$$, $opt_type$$, $opt_capt$$) {
  return null;
};
/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
$APP.goog.net.WebSocket = function($opt_params$$) {
  $APP.goog.events.EventTarget.call(this);
  $opt_params$$ || ($opt_params$$ = {});
  this.autoReconnect_ = $opt_params$$.autoReconnect != 0;
  this.getNextReconnect_ = $opt_params$$.getNextReconnect || $APP.goog.net.WebSocket.EXPONENTIAL_BACKOFF_;
  this.binaryType_ = $opt_params$$.binaryType || $APP.goog.net.WebSocket.BinaryType.BLOB;
  this.nextReconnect_ = this.getNextReconnect_(this.reconnectAttempt_);
};
$APP.goog.inherits($APP.goog.net.WebSocket, $APP.goog.events.EventTarget);
$APP.goog.net.WebSocket.BinaryType = {ARRAY_BUFFER:"arraybuffer", BLOB:"blob"};
$APP.goog.net.WebSocket.Options = function() {
};
$APP.goog.net.WebSocket.prototype.webSocket_ = null;
$APP.goog.net.WebSocket.prototype.url_ = null;
$APP.goog.net.WebSocket.prototype.protocol_ = void 0;
$APP.goog.net.WebSocket.prototype.closeExpected_ = !1;
$APP.goog.net.WebSocket.prototype.reconnectAttempt_ = 0;
$APP.goog.net.WebSocket.prototype.reconnectTimer_ = null;
$APP.goog.net.WebSocket.prototype.logger_ = $APP.goog.log.getLogger("goog.net.WebSocket");
$APP.goog.net.WebSocket.EventType = {CLOSED:$APP.goog.events.getUniqueId("closed"), ERROR:$APP.goog.events.getUniqueId("error"), MESSAGE:$APP.goog.events.getUniqueId("message"), OPENED:$APP.goog.events.getUniqueId("opened")};
$APP.goog.net.WebSocket.ReadyState_ = {CONNECTING:0, OPEN:1, CLOSING:2, CLOSED:3};
$APP.goog.net.WebSocket.EXPONENTIAL_BACKOFF_CEILING_ = 6E4;
$APP.goog.net.WebSocket.EXPONENTIAL_BACKOFF_ = function($attempt$$) {
  return Math.min(Math.pow(2, $attempt$$) * 1000, $APP.goog.net.WebSocket.EXPONENTIAL_BACKOFF_CEILING_);
};
$APP.goog.net.WebSocket.protectEntryPoints = function($errorHandler$$) {
  $APP.goog.net.WebSocket.prototype.onOpen_ = $errorHandler$$.protectEntryPoint($APP.goog.net.WebSocket.prototype.onOpen_);
  $APP.goog.net.WebSocket.prototype.onClose_ = $errorHandler$$.protectEntryPoint($APP.goog.net.WebSocket.prototype.onClose_);
  $APP.goog.net.WebSocket.prototype.onMessage_ = $errorHandler$$.protectEntryPoint($APP.goog.net.WebSocket.prototype.onMessage_);
  $APP.goog.net.WebSocket.prototype.onError_ = $errorHandler$$.protectEntryPoint($APP.goog.net.WebSocket.prototype.onError_);
};
$APP.goog.net.WebSocket.prototype.open = function($url$$, $opt_protocol$$) {
  $APP.goog.asserts.assert($APP.goog.global.WebSocket, "This browser does not support WebSocket");
  $APP.goog.asserts.assert(!this.isOpen(), "The WebSocket is already open");
  this.clearReconnectTimer_();
  this.url_ = $url$$;
  (this.protocol_ = $opt_protocol$$) ? ($APP.goog.log.info(this.logger_, "Opening the WebSocket on " + this.url_ + " with protocol " + this.protocol_), this.webSocket_ = new WebSocket(this.url_, this.protocol_)) : ($APP.goog.log.info(this.logger_, "Opening the WebSocket on " + this.url_), this.webSocket_ = new WebSocket(this.url_));
  this.webSocket_.binaryType = this.binaryType_;
  this.webSocket_.onopen = $APP.goog.bind(this.onOpen_, this);
  this.webSocket_.onclose = $APP.goog.bind(this.onClose_, this);
  this.webSocket_.onmessage = $APP.goog.bind(this.onMessage_, this);
  this.webSocket_.onerror = $APP.goog.bind(this.onError_, this);
};
$APP.goog.net.WebSocket.prototype.close = function() {
  this.clearReconnectTimer_();
  this.webSocket_ && ($APP.goog.log.info(this.logger_, "Closing the WebSocket."), this.closeExpected_ = !0, this.webSocket_.close(), this.webSocket_ = null);
};
$APP.goog.net.WebSocket.prototype.send = function($message$$) {
  $APP.goog.asserts.assert(this.isOpen(), "Cannot send without an open socket");
  this.webSocket_.send($message$$);
};
$APP.goog.net.WebSocket.prototype.isOpen = function() {
  return !!this.webSocket_ && this.webSocket_.readyState == $APP.goog.net.WebSocket.ReadyState_.OPEN;
};
$APP.goog.net.WebSocket.prototype.getBufferedAmount = function() {
  return this.webSocket_.bufferedAmount;
};
$APP.goog.net.WebSocket.prototype.onOpen_ = function() {
  $APP.goog.log.info(this.logger_, "WebSocket opened on " + this.url_);
  this.dispatchEvent($APP.goog.net.WebSocket.EventType.OPENED);
  this.reconnectAttempt_ = 0;
  this.nextReconnect_ = this.getNextReconnect_(this.reconnectAttempt_);
};
$APP.goog.net.WebSocket.prototype.onClose_ = function($event$$) {
  $APP.goog.log.info(this.logger_, "The WebSocket on " + this.url_ + " closed.");
  this.dispatchEvent(new $APP.goog.net.WebSocket.ClosedEvent($event$$.code, $event$$.reason, $event$$.wasClean));
  this.webSocket_ = null;
  this.closeExpected_ ? ($APP.goog.log.info(this.logger_, "The WebSocket closed normally."), this.url_ = null, this.protocol_ = void 0) : ($APP.goog.log.error(this.logger_, "The WebSocket disconnected unexpectedly: " + $event$$.data), this.autoReconnect_ && ($APP.goog.log.info(this.logger_, "Seconds until next reconnect attempt: " + Math.floor(this.nextReconnect_ / 1000)), this.reconnectTimer_ = $APP.goog.Timer.callOnce($APP.goog.bind(this.open, this, this.url_, this.protocol_), this.nextReconnect_, 
  this), this.reconnectAttempt_++, this.nextReconnect_ = this.getNextReconnect_(this.reconnectAttempt_)));
  this.closeExpected_ = !1;
};
$APP.goog.net.WebSocket.prototype.onMessage_ = function($event$$) {
  this.dispatchEvent(new $APP.goog.net.WebSocket.MessageEvent($event$$.data));
};
$APP.goog.net.WebSocket.prototype.onError_ = function($data$jscomp$134_event$$) {
  $data$jscomp$134_event$$ = $data$jscomp$134_event$$.data;
  $APP.goog.log.error(this.logger_, "An error occurred: " + $data$jscomp$134_event$$);
  this.dispatchEvent(new $APP.goog.net.WebSocket.ErrorEvent($data$jscomp$134_event$$));
};
$APP.goog.net.WebSocket.prototype.clearReconnectTimer_ = function() {
  this.reconnectTimer_ != null && $APP.goog.Timer.clear(this.reconnectTimer_);
  this.reconnectTimer_ = null;
};
$APP.goog.net.WebSocket.prototype.disposeInternal = function() {
  $APP.goog.net.WebSocket.superClass_.disposeInternal.call(this);
  this.close();
};
$APP.goog.net.WebSocket.ClosedEvent = function($code$$, $reason$$, $wasClean$$) {
  $APP.goog.events.Event.call(this, $APP.goog.net.WebSocket.EventType.CLOSED);
  this.code = $code$$;
  this.reason = $reason$$;
  this.wasClean = $wasClean$$;
};
$APP.goog.inherits($APP.goog.net.WebSocket.ClosedEvent, $APP.goog.events.Event);
$APP.goog.net.WebSocket.MessageEvent = function($message$$) {
  $APP.goog.events.Event.call(this, $APP.goog.net.WebSocket.EventType.MESSAGE);
  this.message = $message$$;
};
$APP.goog.inherits($APP.goog.net.WebSocket.MessageEvent, $APP.goog.events.Event);
$APP.goog.net.WebSocket.ErrorEvent = function($data$$) {
  $APP.goog.events.Event.call(this, $APP.goog.net.WebSocket.EventType.ERROR);
  this.data = $data$$;
};
$APP.goog.inherits($APP.goog.net.WebSocket.ErrorEvent, $APP.goog.events.Event);
$APP.goog.debug.entryPointRegistry.register(function($transformer$$) {
  $APP.goog.net.WebSocket.prototype.onOpen_ = $transformer$$($APP.goog.net.WebSocket.prototype.onOpen_);
  $APP.goog.net.WebSocket.prototype.onClose_ = $transformer$$($APP.goog.net.WebSocket.prototype.onClose_);
  $APP.goog.net.WebSocket.prototype.onMessage_ = $transformer$$($APP.goog.net.WebSocket.prototype.onMessage_);
  $APP.goog.net.WebSocket.prototype.onError_ = $transformer$$($APP.goog.net.WebSocket.prototype.onError_);
});
$APP.goog.net.xpc = {};
$APP.goog.net.xpc.TransportTypes = {UNDEFINED:0, NATIVE_MESSAGING:1};
$APP.goog.net.xpc.TransportNames = {1:"NativeMessagingTransport"};
$APP.goog.net.xpc.CfgFields = {CHANNEL_NAME:"cn", AUTH_TOKEN:"at", REMOTE_AUTH_TOKEN:"rat", PEER_URI:"pu", IFRAME_ID:"ifrid", TRANSPORT:"tp", LOCAL_RELAY_URI:"lru", PEER_RELAY_URI:"pru", LOCAL_POLL_URI:"lpu", PEER_POLL_URI:"ppu", PEER_HOSTNAME:"ph", ONE_SIDED_HANDSHAKE:"osh", ROLE:"role", NATIVE_TRANSPORT_PROTOCOL_VERSION:"nativeProtocolVersion"};
$APP.goog.net.xpc.UriCfgFields = [$APP.goog.net.xpc.CfgFields.PEER_URI, $APP.goog.net.xpc.CfgFields.LOCAL_RELAY_URI, $APP.goog.net.xpc.CfgFields.PEER_RELAY_URI, $APP.goog.net.xpc.CfgFields.LOCAL_POLL_URI, $APP.goog.net.xpc.CfgFields.PEER_POLL_URI];
$APP.goog.net.xpc.ChannelStates = {NOT_CONNECTED:1, CONNECTED:2, CLOSED:3};
$APP.goog.net.xpc.TRANSPORT_SERVICE = "tp";
$APP.goog.net.xpc.SETUP = "SETUP";
$APP.goog.net.xpc.SETUP_NTPV2 = "SETUP_NTPV2";
$APP.goog.net.xpc.SETUP_ACK = "SETUP_ACK";
$APP.goog.net.xpc.SETUP_ACK_NTPV2 = "SETUP_ACK_NTPV2";
$APP.goog.net.xpc.getRandomString = function($length$$, $chars$$) {
  $chars$$ = $chars$$ || $APP.goog.net.xpc.randomStringCharacters_;
  const $charsLength$$ = $chars$$.length;
  let $s$$ = "";
  for (; $length$$-- > 0;) {
    $s$$ += $chars$$.charAt(Math.floor(Math.random() * $charsLength$$));
  }
  return $s$$;
};
$APP.goog.net.xpc.randomStringCharacters_ = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
$APP.goog.net.xpc.logger = $APP.goog.log.getLogger("goog.net.xpc");
/*

 Copyright 2005, 2007 Bob Ippolito. All Rights Reserved.
 Copyright The Closure Library Authors.
 SPDX-License-Identifier: MIT
*/
$APP.goog.async.Deferred = function($opt_onCancelFunction_target$$, $opt_defaultScope$$) {
  this.sequence_ = [];
  this.onCancelFunction_ = $opt_onCancelFunction_target$$;
  this.defaultScope_ = $opt_defaultScope$$ || null;
  this.hadError_ = this.fired_ = !1;
  this.result_ = void 0;
  this.silentlyCanceled_ = this.blocking_ = this.blocked_ = !1;
  this.unhandledErrorId_ = 0;
  this.parent_ = null;
  this.branches_ = 0;
  $APP.goog.async.Deferred.LONG_STACK_TRACES && (this.constructorStack_ = null, Error.captureStackTrace && ($opt_onCancelFunction_target$$ = {stack:""}, Error.captureStackTrace($opt_onCancelFunction_target$$, $APP.goog.async.Deferred), typeof $opt_onCancelFunction_target$$.stack == "string" && (this.constructorStack_ = $opt_onCancelFunction_target$$.stack.replace(/^[^\n]*\n/, ""))));
};
$APP.goog.async.Deferred.STRICT_ERRORS = !1;
$APP.goog.async.Deferred.LONG_STACK_TRACES = !1;
$APP.goog.async.Deferred.prototype.cancel = function($opt_deepCancel$$) {
  if (this.hasFired()) {
    this.result_ instanceof $APP.goog.async.Deferred && this.result_.cancel();
  } else {
    if (this.parent_) {
      const $parent$$ = this.parent_;
      delete this.parent_;
      $opt_deepCancel$$ ? $parent$$.cancel($opt_deepCancel$$) : $parent$$.branchCancel_();
    }
    this.onCancelFunction_ ? this.onCancelFunction_.call(this.defaultScope_, this) : this.silentlyCanceled_ = !0;
    this.hasFired() || this.errback(new $APP.goog.async.Deferred.CanceledError(this));
  }
};
$APP.goog.async.Deferred.prototype.branchCancel_ = function() {
  this.branches_--;
  this.branches_ <= 0 && this.cancel();
};
$APP.goog.async.Deferred.prototype.continue_ = function($isSuccess$$, $res$$) {
  this.blocked_ = !1;
  this.updateResult_($isSuccess$$, $res$$);
};
$APP.goog.async.Deferred.prototype.updateResult_ = function($isSuccess$$, $res$$) {
  this.fired_ = !0;
  this.result_ = $res$$;
  this.hadError_ = !$isSuccess$$;
  this.fire_();
};
$APP.goog.async.Deferred.prototype.check_ = function() {
  if (this.hasFired()) {
    if (!this.silentlyCanceled_) {
      throw new $APP.goog.async.Deferred.AlreadyCalledError(this);
    }
    this.silentlyCanceled_ = !1;
  }
};
$APP.goog.async.Deferred.prototype.callback = function($opt_result$$) {
  this.check_();
  this.assertNotDeferred_($opt_result$$);
  this.updateResult_(!0, $opt_result$$);
};
$APP.goog.async.Deferred.prototype.errback = function($opt_result$$) {
  this.check_();
  this.assertNotDeferred_($opt_result$$);
  this.makeStackTraceLong_($opt_result$$);
  this.updateResult_(!1, $opt_result$$);
};
$APP.goog.async.Deferred.unhandledErrorHandler_ = $e$$ => {
  throw $e$$;
};
$APP.goog.async.Deferred.setUnhandledErrorHandler = function($handler$$) {
  $APP.goog.async.Deferred.unhandledErrorHandler_ = $handler$$;
};
$APP.goog.async.Deferred.prototype.makeStackTraceLong_ = function($error$$) {
  $APP.goog.async.Deferred.LONG_STACK_TRACES && this.constructorStack_ && $APP.goog.isObject($error$$) && $error$$.stack && /^[^\n]+(\n   [^\n]+)+/.test($error$$.stack) && ($error$$.stack = $error$$.stack + "\nDEFERRED OPERATION:\n" + this.constructorStack_);
};
$APP.goog.async.Deferred.prototype.assertNotDeferred_ = function($obj$$) {
  $APP.goog.asserts.assert(!($obj$$ instanceof $APP.goog.async.Deferred), "An execution sequence may not be initiated with a blocking Deferred.");
};
$APP.goog.async.Deferred.prototype.addCallback = function($cb$$, $opt_scope$$) {
  return this.addCallbacks($cb$$, null, $opt_scope$$);
};
$APP.goog.async.Deferred.prototype.addErrback = function($eb$$, $opt_scope$$) {
  return this.addCallbacks(null, $eb$$, $opt_scope$$);
};
$APP.goog.async.Deferred.prototype.addBoth = function($f$$, $opt_scope$$) {
  return this.addCallbacks($f$$, $f$$, $opt_scope$$);
};
$APP.goog.async.Deferred.prototype.addFinally = function($f$$, $opt_scope$$) {
  return this.addCallbacks($f$$, function($err$$) {
    const $result$$ = $f$$.call(this, $err$$);
    if ($result$$ === void 0) {
      throw $err$$;
    }
    return $result$$;
  }, $opt_scope$$);
};
$APP.goog.async.Deferred.prototype.addCallbacks = function($cb$$, $eb$$, $opt_scope$$) {
  $APP.goog.asserts.assert(!this.blocking_, "Blocking Deferreds can not be re-used");
  this.sequence_.push([$cb$$, $eb$$, $opt_scope$$]);
  this.hasFired() && this.fire_();
  return this;
};
$APP.goog.async.Deferred.prototype.then = function($opt_onFulfilled$$, $opt_onRejected$$, $opt_context$$) {
  let $reject$$, $resolve$$;
  const $promise$$ = new $APP.goog.Promise(function($res$$, $rej$$) {
    $resolve$$ = $res$$;
    $reject$$ = $rej$$;
  });
  this.addCallbacks($resolve$$, function($reason$$) {
    $reason$$ instanceof $APP.goog.async.Deferred.CanceledError ? $promise$$.cancel() : $reject$$($reason$$);
    return $APP.goog.async.Deferred.CONVERTED_TO_PROMISE_;
  }, this);
  return $promise$$.then($opt_onFulfilled$$, $opt_onRejected$$, $opt_context$$);
};
$APP.module$contents$goog$Thenable_Thenable.addImplementation($APP.goog.async.Deferred);
$APP.goog.async.Deferred.prototype.chainDeferred = function($otherDeferred$$) {
  this.addCallbacks($otherDeferred$$.callback, $otherDeferred$$.errback, $otherDeferred$$);
  return this;
};
$APP.goog.async.Deferred.prototype.awaitDeferred = function($otherDeferred$$) {
  return $otherDeferred$$ instanceof $APP.goog.async.Deferred ? this.addCallback($APP.goog.bind($otherDeferred$$.branch, $otherDeferred$$)) : this.addCallback(function() {
    return $otherDeferred$$;
  });
};
$APP.goog.async.Deferred.prototype.branch = function($opt_propagateCancel$$) {
  const $d$$ = new $APP.goog.async.Deferred();
  this.chainDeferred($d$$);
  $opt_propagateCancel$$ && ($d$$.parent_ = this, this.branches_++);
  return $d$$;
};
$APP.goog.async.Deferred.prototype.hasFired = function() {
  return this.fired_;
};
$APP.goog.async.Deferred.prototype.isError = function($res$$) {
  return $res$$ instanceof Error;
};
$APP.goog.async.Deferred.prototype.hasErrback_ = function() {
  return $APP.goog.array.some(this.sequence_, function($sequenceRow$$) {
    return typeof $sequenceRow$$[1] === "function";
  });
};
$APP.goog.async.Deferred.prototype.getLastValueForMigration = function() {
  return this.hasFired() && !this.hadError_ ? this.result_ : void 0;
};
$APP.goog.async.Deferred.CONVERTED_TO_PROMISE_ = {};
$APP.goog.async.Deferred.prototype.fire_ = function() {
  this.unhandledErrorId_ && this.hasFired() && this.hasErrback_() && ($APP.goog.async.Deferred.unscheduleError_(this.unhandledErrorId_), this.unhandledErrorId_ = 0);
  this.parent_ && (this.parent_.branches_--, delete this.parent_);
  let $res$$ = this.result_, $unhandledException$$ = !1;
  for (var $isNewlyBlocked_onCallback$$ = !1, $onErrback_wasConvertedToPromise$$ = !1; this.sequence_.length && !this.blocked_;) {
    $onErrback_wasConvertedToPromise$$ = !1;
    var $scope$$ = this.sequence_.shift(), $callback$jscomp$78_f$$ = $scope$$[0];
    const $errback$$ = $scope$$[1];
    $scope$$ = $scope$$[2];
    if ($callback$jscomp$78_f$$ = this.hadError_ ? $errback$$ : $callback$jscomp$78_f$$) {
      try {
        let $ret$$ = $callback$jscomp$78_f$$.call($scope$$ || this.defaultScope_, $res$$);
        $ret$$ === $APP.goog.async.Deferred.CONVERTED_TO_PROMISE_ && ($onErrback_wasConvertedToPromise$$ = !0, $ret$$ = void 0);
        $ret$$ !== void 0 && (this.hadError_ = this.hadError_ && ($ret$$ == $res$$ || this.isError($ret$$)), this.result_ = $res$$ = $ret$$);
        if ($APP.module$contents$goog$Thenable_Thenable.isImplementedBy($res$$) || typeof $APP.goog.global.Promise === "function" && $res$$ instanceof $APP.goog.global.Promise) {
          this.blocked_ = $isNewlyBlocked_onCallback$$ = !0;
        }
      } catch ($ex$$) {
        $res$$ = $ex$$, this.hadError_ = !0, this.makeStackTraceLong_($res$$), this.hasErrback_() || ($unhandledException$$ = !0);
      }
    }
  }
  this.result_ = $res$$;
  $isNewlyBlocked_onCallback$$ ? ($isNewlyBlocked_onCallback$$ = $APP.goog.bind(this.continue_, this, !0), $onErrback_wasConvertedToPromise$$ = $APP.goog.bind(this.continue_, this, !1), $res$$ instanceof $APP.goog.async.Deferred ? ($res$$.addCallbacks($isNewlyBlocked_onCallback$$, $onErrback_wasConvertedToPromise$$), $res$$.blocking_ = !0) : $res$$.then($isNewlyBlocked_onCallback$$, $onErrback_wasConvertedToPromise$$)) : !$APP.goog.async.Deferred.STRICT_ERRORS || $onErrback_wasConvertedToPromise$$ || 
  !this.isError($res$$) || $res$$ instanceof $APP.goog.async.Deferred.CanceledError || ($unhandledException$$ = this.hadError_ = !0);
  $unhandledException$$ && (this.unhandledErrorId_ = $APP.goog.async.Deferred.scheduleError_($res$$));
};
$APP.goog.async.Deferred.succeed = function($opt_result$$) {
  const $d$$ = new $APP.goog.async.Deferred();
  $d$$.callback($opt_result$$);
  return $d$$;
};
$APP.goog.async.Deferred.fromPromise = function($promise$$) {
  const $d$$ = new $APP.goog.async.Deferred();
  $promise$$.then(function($value$$) {
    $d$$.callback($value$$);
  }, function($error$$) {
    $d$$.errback($error$$);
  });
  return $d$$;
};
$APP.goog.async.Deferred.fail = function($res$$) {
  const $d$$ = new $APP.goog.async.Deferred();
  $d$$.errback($res$$);
  return $d$$;
};
$APP.goog.async.Deferred.canceled = function() {
  const $d$$ = new $APP.goog.async.Deferred();
  $d$$.cancel();
  return $d$$;
};
$APP.goog.async.Deferred.when = function($value$$, $callback$$, $opt_scope$$) {
  return $value$$ instanceof $APP.goog.async.Deferred ? $value$$.branch(!0).addCallback($callback$$, $opt_scope$$) : $APP.goog.async.Deferred.succeed($value$$).addCallback($callback$$, $opt_scope$$);
};
$APP.goog.async.Deferred.AlreadyCalledError = function($deferred$$) {
  $APP.module$contents$goog$debug$Error_DebugError.call(this);
  this.deferred = $deferred$$;
};
$APP.goog.inherits($APP.goog.async.Deferred.AlreadyCalledError, $APP.module$contents$goog$debug$Error_DebugError);
$APP.goog.async.Deferred.AlreadyCalledError.prototype.message = "Deferred has already fired";
$APP.goog.async.Deferred.AlreadyCalledError.prototype.name = "AlreadyCalledError";
$APP.goog.async.Deferred.CanceledError = function($deferred$$) {
  $APP.module$contents$goog$debug$Error_DebugError.call(this);
  this.deferred = $deferred$$;
};
$APP.goog.inherits($APP.goog.async.Deferred.CanceledError, $APP.module$contents$goog$debug$Error_DebugError);
$APP.goog.async.Deferred.CanceledError.prototype.message = "Deferred was canceled";
$APP.goog.async.Deferred.CanceledError.prototype.name = "CanceledError";
$APP.goog.async.Deferred.Error_ = function($error$$) {
  this.id_ = $APP.goog.global.setTimeout($APP.goog.bind(this.throwError, this), 0);
  this.error_ = $error$$;
};
$APP.goog.async.Deferred.Error_.prototype.throwError = function() {
  $APP.goog.asserts.assert($APP.goog.async.Deferred.errorMap_[this.id_], "Cannot throw an error that is not scheduled.");
  delete $APP.goog.async.Deferred.errorMap_[this.id_];
  $APP.goog.async.Deferred.unhandledErrorHandler_(this.error_);
};
$APP.goog.async.Deferred.Error_.prototype.resetTimer = function() {
  $APP.goog.global.clearTimeout(this.id_);
};
$APP.goog.async.Deferred.errorMap_ = {};
$APP.goog.async.Deferred.scheduleError_ = function($deferredError_error$$) {
  $deferredError_error$$ = new $APP.goog.async.Deferred.Error_($deferredError_error$$);
  $APP.goog.async.Deferred.errorMap_[$deferredError_error$$.id_] = $deferredError_error$$;
  return $deferredError_error$$.id_;
};
$APP.goog.async.Deferred.unscheduleError_ = function($id$$) {
  const $error$$ = $APP.goog.async.Deferred.errorMap_[$id$$];
  $error$$ && ($error$$.resetTimer(), delete $APP.goog.async.Deferred.errorMap_[$id$$]);
};
$APP.goog.async.Deferred.assertNoErrors = function() {
  const $map$$ = $APP.goog.async.Deferred.errorMap_;
  for (let $key$$ in $map$$) {
    const $error$$ = $map$$[$key$$];
    $error$$.resetTimer();
    $error$$.throwError();
  }
};
$APP.goog.async.Delay = function($listener$$, $opt_interval$$, $opt_handler$$) {
  $APP.goog.Disposable.call(this);
  this.listener_ = $listener$$;
  this.interval_ = $opt_interval$$ || 0;
  this.handler_ = $opt_handler$$;
  this.callback_ = $APP.goog.bind(this.doAction_, this);
};
$APP.goog.inherits($APP.goog.async.Delay, $APP.goog.Disposable);
$APP.goog.async.Delay.prototype.id_ = 0;
$APP.goog.async.Delay.prototype.disposeInternal = function() {
  $APP.goog.async.Delay.superClass_.disposeInternal.call(this);
  this.stop();
  delete this.listener_;
  delete this.handler_;
};
$APP.goog.async.Delay.prototype.start = function($opt_interval$$) {
  this.stop();
  this.id_ = $APP.goog.Timer.callOnce(this.callback_, $opt_interval$$ !== void 0 ? $opt_interval$$ : this.interval_);
};
$APP.goog.async.Delay.prototype.startIfNotActive = function($opt_interval$$) {
  this.isActive() || this.start($opt_interval$$);
};
$APP.goog.async.Delay.prototype.stop = function() {
  this.isActive() && $APP.goog.Timer.clear(this.id_);
  this.id_ = 0;
};
$APP.goog.async.Delay.prototype.fire = function() {
  this.stop();
  this.doAction_();
};
$APP.goog.async.Delay.prototype.fireIfActive = function() {
  this.isActive() && this.fire();
};
$APP.goog.async.Delay.prototype.isActive = function() {
  return this.id_ != 0;
};
$APP.goog.async.Delay.prototype.doAction_ = function() {
  this.id_ = 0;
  this.listener_ && this.listener_.call(this.handler_);
};
$APP.goog.html.legacyconversions = {};
$APP.goog.html.legacyconversions.safeHtmlFromString = function($html$$) {
  $APP.goog.html.legacyconversions.reportCallback_();
  return $APP.module$contents$goog$html$SafeHtml_SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse($html$$);
};
$APP.goog.html.legacyconversions.safeScriptFromString = function($script$$) {
  $APP.goog.html.legacyconversions.reportCallback_();
  return $APP.module$contents$goog$html$SafeScript_SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse($script$$);
};
$APP.goog.html.legacyconversions.safeStyleFromString = function($style$$) {
  $APP.goog.html.legacyconversions.reportCallback_();
  return $APP.module$contents$goog$html$SafeStyle_SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse($style$$);
};
$APP.goog.html.legacyconversions.safeStyleSheetFromString = function($styleSheet$$) {
  $APP.goog.html.legacyconversions.reportCallback_();
  return $APP.module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse($styleSheet$$);
};
$APP.goog.html.legacyconversions.safeUrlFromString = function($url$$) {
  $APP.goog.html.legacyconversions.reportCallback_();
  return $APP.goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse($url$$);
};
$APP.goog.html.legacyconversions.trustedResourceUrlFromString = function($url$$) {
  $APP.goog.html.legacyconversions.reportCallback_();
  return $APP.goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse($url$$);
};
$APP.goog.html.legacyconversions.reportCallback_ = function() {
};
$APP.goog.html.legacyconversions.setReportCallback = function($callback$$) {
  $APP.goog.html.legacyconversions.reportCallback_ = $callback$$;
};
$APP.goog.messaging = {};
$APP.goog.messaging.MessageChannel = function() {
};
$APP.goog.messaging.MessageChannel.prototype.connect = function($opt_connectCb$$) {
};
$APP.goog.messaging.MessageChannel.prototype.isConnected = function() {
};
$APP.goog.messaging.MessageChannel.prototype.registerService = function($serviceName$$, $callback$$, $opt_objectPayload$$) {
};
$APP.goog.messaging.MessageChannel.prototype.registerDefaultService = function($callback$$) {
};
$APP.goog.messaging.MessageChannel.prototype.send = function($serviceName$$, $payload$$) {
};
$APP.goog.messaging.AbstractChannel = function() {
  $APP.goog.Disposable.call(this);
  this.services_ = {};
};
$APP.goog.inherits($APP.goog.messaging.AbstractChannel, $APP.goog.Disposable);
$APP.goog.messaging.AbstractChannel.prototype.logger = $APP.goog.log.getLogger("goog.messaging.AbstractChannel");
$APP.goog.messaging.AbstractChannel.prototype.connect = function($opt_connectCb$$) {
  $opt_connectCb$$ && $opt_connectCb$$();
};
$APP.goog.messaging.AbstractChannel.prototype.isConnected = function() {
  return !0;
};
$APP.goog.messaging.AbstractChannel.prototype.registerService = function($serviceName$$, $callback$$, $opt_objectPayload$$) {
  this.services_[$serviceName$$] = {callback:$callback$$, objectPayload:!!$opt_objectPayload$$};
};
$APP.goog.messaging.AbstractChannel.prototype.registerDefaultService = function($callback$$) {
  this.defaultService_ = $callback$$;
};
$APP.goog.messaging.AbstractChannel.prototype.send = $APP.goog.abstractMethod;
$APP.goog.messaging.AbstractChannel.prototype.deliver = function($decodedPayload_serviceName$$, $payload$$) {
  const $service$$ = this.getService($decodedPayload_serviceName$$, $payload$$);
  $service$$ && ($decodedPayload_serviceName$$ = this.decodePayload($decodedPayload_serviceName$$, $payload$$, $service$$.objectPayload), $decodedPayload_serviceName$$ != null && $service$$.callback($decodedPayload_serviceName$$));
};
$APP.goog.messaging.AbstractChannel.prototype.getService = function($callback$jscomp$85_serviceName$$, $objectPayload_payload$$) {
  const $service$$ = this.services_[$callback$jscomp$85_serviceName$$];
  if ($service$$) {
    return $service$$;
  }
  if (this.defaultService_) {
    return $callback$jscomp$85_serviceName$$ = $APP.goog.partial(this.defaultService_, $callback$jscomp$85_serviceName$$), $objectPayload_payload$$ = $APP.goog.isObject($objectPayload_payload$$), {callback:$callback$jscomp$85_serviceName$$, objectPayload:$objectPayload_payload$$};
  }
  $APP.goog.log.warning(this.logger, 'Unknown service name "' + $callback$jscomp$85_serviceName$$ + '"');
  return null;
};
$APP.goog.messaging.AbstractChannel.prototype.decodePayload = function($serviceName$$, $payload$$, $objectPayload$$) {
  if ($objectPayload$$ && typeof $payload$$ === "string") {
    try {
      return JSON.parse($payload$$);
    } catch ($err$$) {
      return $APP.goog.log.warning(this.logger, "Expected JSON payload for " + $serviceName$$ + ', was "' + $payload$$ + '"'), null;
    }
  } else if (!$objectPayload$$ && typeof $payload$$ !== "string") {
    return $APP.goog.json.serialize($payload$$);
  }
  return $payload$$;
};
$APP.goog.messaging.AbstractChannel.prototype.disposeInternal = function() {
  $APP.goog.messaging.AbstractChannel.superClass_.disposeInternal.call(this);
  delete this.services_;
  delete this.defaultService_;
};
$APP.goog.net.xpc.CrossPageChannelRole = {OUTER:0, INNER:1};
$APP.goog.net.xpc.Transport = function($opt_domHelper$$) {
  $APP.goog.Disposable.call(this);
  this.domHelper_ = $opt_domHelper$$ || $APP.goog.dom.getDomHelper();
};
$APP.goog.inherits($APP.goog.net.xpc.Transport, $APP.goog.Disposable);
$APP.goog.net.xpc.Transport.prototype.transportType = 0;
$APP.goog.net.xpc.Transport.prototype.getType = function() {
  return this.transportType;
};
$APP.goog.net.xpc.Transport.prototype.getWindow = function() {
  return this.domHelper_.getWindow();
};
$APP.goog.net.xpc.Transport.prototype.getName = function() {
  return $APP.goog.net.xpc.TransportNames[String(this.transportType)] || "";
};
$APP.goog.net.xpc.Transport.prototype.transportServiceHandler = $APP.goog.abstractMethod;
$APP.goog.net.xpc.Transport.prototype.connect = $APP.goog.abstractMethod;
$APP.goog.net.xpc.Transport.prototype.send = $APP.goog.abstractMethod;
$APP.goog.net.xpc.NativeMessagingTransport = function($channel$$, $peerHostname$$, $opt_domHelper$$, $opt_oneSidedHandshake$$, $opt_protocolVersion$$) {
  $APP.goog.net.xpc.Transport.call(this, $opt_domHelper$$);
  this.channel_ = $channel$$;
  this.protocolVersion_ = $opt_protocolVersion$$ || 2;
  $APP.goog.asserts.assert(this.protocolVersion_ >= 1);
  $APP.goog.asserts.assert(this.protocolVersion_ <= 2);
  this.peerHostname_ = $peerHostname$$ || "*";
  this.eventHandler_ = new $APP.goog.events.EventHandler(this);
  this.maybeAttemptToConnectTimer_ = new $APP.goog.Timer(100, this.getWindow());
  this.oneSidedHandshake_ = !!$opt_oneSidedHandshake$$;
  this.setupAckReceived_ = new $APP.goog.async.Deferred();
  this.setupAckSent_ = new $APP.goog.async.Deferred();
  this.connected_ = new $APP.goog.async.Deferred();
  this.endpointId_ = $APP.goog.net.xpc.getRandomString(10);
  this.peerEndpointId_ = null;
  this.oneSidedHandshake_ ? this.channel_.getRole() == $APP.goog.net.xpc.CrossPageChannelRole.INNER ? this.connected_.awaitDeferred(this.setupAckReceived_) : this.connected_.awaitDeferred(this.setupAckSent_) : (this.connected_.awaitDeferred(this.setupAckReceived_), this.protocolVersion_ == 2 && this.connected_.awaitDeferred(this.setupAckSent_));
  this.connected_.addCallback(this.notifyConnected_, this);
  this.connected_.callback(!0);
  this.eventHandler_.listen(this.maybeAttemptToConnectTimer_, $APP.goog.Timer.TICK, this.maybeAttemptToConnect_);
  $APP.goog.log.info($APP.goog.net.xpc.logger, "NativeMessagingTransport created.  protocolVersion\x3d" + this.protocolVersion_ + ", oneSidedHandshake\x3d" + this.oneSidedHandshake_ + ", role\x3d" + this.channel_.getRole());
};
$APP.goog.inherits($APP.goog.net.xpc.NativeMessagingTransport, $APP.goog.net.xpc.Transport);
$APP.goog.net.xpc.NativeMessagingTransport.CONNECTION_DELAY_MS_ = 200;
$APP.goog.net.xpc.NativeMessagingTransport.prototype.peerProtocolVersion_ = null;
$APP.goog.net.xpc.NativeMessagingTransport.prototype.initialized_ = !1;
$APP.goog.net.xpc.NativeMessagingTransport.prototype.transportType = $APP.goog.net.xpc.TransportTypes.NATIVE_MESSAGING;
$APP.goog.net.xpc.NativeMessagingTransport.MESSAGE_DELIMITER_ = ",";
$APP.goog.net.xpc.NativeMessagingTransport.activeCount_ = {};
$APP.goog.net.xpc.NativeMessagingTransport.prototype.sendTimerId_ = 0;
$APP.goog.net.xpc.NativeMessagingTransport.prototype.couldPeerVersionBe_ = function($version$$) {
  return this.peerProtocolVersion_ == null || this.peerProtocolVersion_ == $version$$;
};
$APP.goog.net.xpc.NativeMessagingTransport.initialize_ = function($listenWindow$$) {
  const $uid$$ = $APP.goog.getUid($listenWindow$$);
  let $value$$ = $APP.goog.net.xpc.NativeMessagingTransport.activeCount_[$uid$$];
  typeof $value$$ !== "number" && ($value$$ = 0);
  $value$$ == 0 && $APP.goog.events.listen($listenWindow$$.postMessage ? $listenWindow$$ : $listenWindow$$.document, "message", $APP.goog.net.xpc.NativeMessagingTransport.messageReceived_, !1, $APP.goog.net.xpc.NativeMessagingTransport);
  $APP.goog.net.xpc.NativeMessagingTransport.activeCount_[$uid$$] = $value$$ + 1;
};
$APP.goog.net.xpc.NativeMessagingTransport.messageReceived_ = function($msgEvt$$) {
  var $data$jscomp$136_payload$$ = $msgEvt$$.getBrowserEvent().data;
  if (typeof $data$jscomp$136_payload$$ !== "string") {
    return !1;
  }
  var $headDelim_service$$ = $data$jscomp$136_payload$$.indexOf("|"), $allChannels_serviceDelim$$ = $data$jscomp$136_payload$$.indexOf(":");
  if ($headDelim_service$$ == -1 || $allChannels_serviceDelim$$ == -1) {
    return !1;
  }
  const $channelName$$ = $data$jscomp$136_payload$$.substring(0, $headDelim_service$$);
  $headDelim_service$$ = $data$jscomp$136_payload$$.substring($headDelim_service$$ + 1, $allChannels_serviceDelim$$);
  $data$jscomp$136_payload$$ = $data$jscomp$136_payload$$.substring($allChannels_serviceDelim$$ + 1);
  $APP.goog.log.fine($APP.goog.net.xpc.logger, "messageReceived: channel\x3d" + $channelName$$ + ", service\x3d" + $headDelim_service$$ + ", payload\x3d" + $data$jscomp$136_payload$$);
  $allChannels_serviceDelim$$ = $APP.goog.net.xpc.CrossPageChannel.channels;
  var $channel$$ = $allChannels_serviceDelim$$[$channelName$$];
  if ($channel$$) {
    return $channel$$.xpcDeliver($headDelim_service$$, $data$jscomp$136_payload$$, $msgEvt$$.getBrowserEvent().origin), !0;
  }
  $channel$$ = $APP.goog.net.xpc.NativeMessagingTransport.parseTransportPayload_($data$jscomp$136_payload$$)[0];
  for (let $staleChannelName$$ in $allChannels_serviceDelim$$) {
    const $staleChannel$$ = $allChannels_serviceDelim$$[$staleChannelName$$];
    if ($staleChannel$$.getRole() == $APP.goog.net.xpc.CrossPageChannelRole.INNER && !$staleChannel$$.isConnected() && $headDelim_service$$ == $APP.goog.net.xpc.TRANSPORT_SERVICE && ($channel$$ == $APP.goog.net.xpc.SETUP || $channel$$ == $APP.goog.net.xpc.SETUP_NTPV2) && $staleChannel$$.isMessageOriginAcceptable($msgEvt$$.getBrowserEvent().origin)) {
      return $staleChannel$$.updateChannelNameAndCatalog($channelName$$), $staleChannel$$.xpcDeliver($headDelim_service$$, $data$jscomp$136_payload$$), !0;
    }
  }
  $APP.goog.log.info($APP.goog.net.xpc.logger, 'channel name mismatch; message ignored"');
  return !1;
};
$APP.goog.net.xpc.NativeMessagingTransport.prototype.transportServiceHandler = function($payload$$) {
  var $prevPeerProtocolVersion_transportParts$$ = $APP.goog.net.xpc.NativeMessagingTransport.parseTransportPayload_($payload$$);
  $payload$$ = $prevPeerProtocolVersion_transportParts$$[1];
  switch($prevPeerProtocolVersion_transportParts$$[0]) {
    case $APP.goog.net.xpc.SETUP_ACK:
      this.setPeerProtocolVersion_(1);
      this.setupAckReceived_.hasFired() || this.setupAckReceived_.callback(!0);
      break;
    case $APP.goog.net.xpc.SETUP_ACK_NTPV2:
      this.protocolVersion_ == 2 && (this.setPeerProtocolVersion_(2), this.setupAckReceived_.hasFired() || this.setupAckReceived_.callback(!0));
      break;
    case $APP.goog.net.xpc.SETUP:
      this.setPeerProtocolVersion_(1);
      this.sendSetupAckMessage_(1);
      break;
    case $APP.goog.net.xpc.SETUP_NTPV2:
      this.protocolVersion_ == 2 && ($prevPeerProtocolVersion_transportParts$$ = this.peerProtocolVersion_, this.setPeerProtocolVersion_(2), this.sendSetupAckMessage_(2), $prevPeerProtocolVersion_transportParts$$ != 1 && this.peerEndpointId_ == null || this.peerEndpointId_ == $payload$$ || ($APP.goog.log.info($APP.goog.net.xpc.logger, "Sending SETUP and changing peer ID to: " + $payload$$), this.sendSetupMessage_()), this.peerEndpointId_ = $payload$$);
  }
};
$APP.goog.net.xpc.NativeMessagingTransport.prototype.sendSetupMessage_ = function() {
  $APP.goog.asserts.assert(!(this.protocolVersion_ == 1 && this.peerProtocolVersion_ == 2));
  if (this.protocolVersion_ == 2 && this.couldPeerVersionBe_(2)) {
    let $payload$$ = $APP.goog.net.xpc.SETUP_NTPV2;
    $payload$$ += $APP.goog.net.xpc.NativeMessagingTransport.MESSAGE_DELIMITER_;
    $payload$$ += this.endpointId_;
    this.send($APP.goog.net.xpc.TRANSPORT_SERVICE, $payload$$);
  }
  this.couldPeerVersionBe_(1) && this.send($APP.goog.net.xpc.TRANSPORT_SERVICE, $APP.goog.net.xpc.SETUP);
};
$APP.goog.net.xpc.NativeMessagingTransport.prototype.sendSetupAckMessage_ = function($protocolVersion$$) {
  $APP.goog.asserts.assert(this.protocolVersion_ != 1 || $protocolVersion$$ != 2, "Shouldn't try to send a v2 setup ack in v1 mode.");
  if (this.protocolVersion_ == 2 && this.couldPeerVersionBe_(2) && $protocolVersion$$ == 2) {
    this.send($APP.goog.net.xpc.TRANSPORT_SERVICE, $APP.goog.net.xpc.SETUP_ACK_NTPV2);
  } else if (this.couldPeerVersionBe_(1) && $protocolVersion$$ == 1) {
    this.send($APP.goog.net.xpc.TRANSPORT_SERVICE, $APP.goog.net.xpc.SETUP_ACK);
  } else {
    return;
  }
  this.setupAckSent_.hasFired() || this.setupAckSent_.callback(!0);
};
$APP.goog.net.xpc.NativeMessagingTransport.prototype.setPeerProtocolVersion_ = function($version$$) {
  $version$$ > this.peerProtocolVersion_ && (this.peerProtocolVersion_ = $version$$);
  this.peerProtocolVersion_ == 1 && (this.setupAckSent_.hasFired() || this.oneSidedHandshake_ || this.setupAckSent_.callback(!0), this.peerEndpointId_ = null);
};
$APP.goog.net.xpc.NativeMessagingTransport.prototype.connect = function() {
  $APP.goog.net.xpc.NativeMessagingTransport.initialize_(this.getWindow());
  this.initialized_ = !0;
  this.maybeAttemptToConnect_();
};
$APP.goog.net.xpc.NativeMessagingTransport.prototype.maybeAttemptToConnect_ = function() {
  const $outerFrame$$ = this.channel_.getRole() == $APP.goog.net.xpc.CrossPageChannelRole.OUTER;
  this.oneSidedHandshake_ && $outerFrame$$ || this.channel_.isConnected() || this.isDisposed() ? this.maybeAttemptToConnectTimer_.stop() : (this.maybeAttemptToConnectTimer_.start(), this.sendSetupMessage_());
};
$APP.goog.net.xpc.NativeMessagingTransport.prototype.send = function($service$$, $payload$$) {
  const $win$$ = this.channel_.getPeerWindowObject();
  $win$$ ? (this.send = function($service$$, $payload$$) {
    const $transport$$ = this, $channelName$$ = this.channel_.name;
    this.sendTimerId_ = $APP.goog.Timer.callOnce(function() {
      $transport$$.sendTimerId_ = 0;
      try {
        const $obj$$ = $win$$.postMessage ? $win$$ : $win$$.document;
        $obj$$.postMessage ? ($obj$$.postMessage($channelName$$ + "|" + $service$$ + ":" + $payload$$, $transport$$.peerHostname_), $APP.goog.log.fine($APP.goog.net.xpc.logger, "send(): service\x3d" + $service$$ + " payload\x3d" + $payload$$ + " to hostname\x3d" + $transport$$.peerHostname_)) : $APP.goog.log.warning($APP.goog.net.xpc.logger, "Peer window had no postMessage function.");
      } catch ($error$$) {
        $APP.goog.log.warning($APP.goog.net.xpc.logger, "Error performing postMessage, ignoring.", $error$$);
      }
    }, 0);
  }, this.send($service$$, $payload$$)) : $APP.goog.log.fine($APP.goog.net.xpc.logger, "send(): window not ready");
};
$APP.goog.net.xpc.NativeMessagingTransport.prototype.notifyConnected_ = function() {
  this.channel_.notifyConnected(this.protocolVersion_ == 1 || this.peerProtocolVersion_ == 1 ? $APP.goog.net.xpc.NativeMessagingTransport.CONNECTION_DELAY_MS_ : void 0);
};
$APP.goog.net.xpc.NativeMessagingTransport.prototype.disposeInternal = function() {
  if (this.initialized_) {
    const $listenWindow$$ = this.getWindow(), $uid$$ = $APP.goog.getUid($listenWindow$$), $value$$ = $APP.goog.net.xpc.NativeMessagingTransport.activeCount_[$uid$$];
    $APP.goog.net.xpc.NativeMessagingTransport.activeCount_[$uid$$] = $value$$ - 1;
    $value$$ == 1 && $APP.goog.events.unlisten($listenWindow$$.postMessage ? $listenWindow$$ : $listenWindow$$.document, "message", $APP.goog.net.xpc.NativeMessagingTransport.messageReceived_, !1, $APP.goog.net.xpc.NativeMessagingTransport);
  }
  this.sendTimerId_ && ($APP.goog.Timer.clear(this.sendTimerId_), this.sendTimerId_ = 0);
  $APP.module$contents$goog$dispose_dispose(this.eventHandler_);
  delete this.eventHandler_;
  $APP.module$contents$goog$dispose_dispose(this.maybeAttemptToConnectTimer_);
  delete this.maybeAttemptToConnectTimer_;
  this.setupAckReceived_.cancel();
  delete this.setupAckReceived_;
  this.setupAckSent_.cancel();
  delete this.setupAckSent_;
  this.connected_.cancel();
  delete this.connected_;
  delete this.send;
  $APP.goog.net.xpc.NativeMessagingTransport.superClass_.disposeInternal.call(this);
};
$APP.goog.net.xpc.NativeMessagingTransport.parseTransportPayload_ = function($payload$jscomp$10_transportParts$$) {
  $payload$jscomp$10_transportParts$$ = $payload$jscomp$10_transportParts$$.split($APP.goog.net.xpc.NativeMessagingTransport.MESSAGE_DELIMITER_);
  $payload$jscomp$10_transportParts$$[1] = $payload$jscomp$10_transportParts$$[1] || null;
  return $payload$jscomp$10_transportParts$$;
};
$APP.goog.net.xpc.CrossPageChannel = function($cfg$$, $opt_domHelper$$) {
  $APP.goog.messaging.AbstractChannel.call(this);
  for (let $i$$ = 0, $uriField$$; $uriField$$ = $APP.goog.net.xpc.UriCfgFields[$i$$]; $i$$++) {
    if ($uriField$$ in $cfg$$ && !/^https?:\/\//.test($cfg$$[$uriField$$])) {
      throw Error("URI " + $cfg$$[$uriField$$] + " is invalid for field " + $uriField$$);
    }
  }
  this.cfg_ = $cfg$$;
  this.name = this.cfg_[$APP.goog.net.xpc.CfgFields.CHANNEL_NAME] || $APP.goog.net.xpc.getRandomString(10);
  this.domHelper_ = $opt_domHelper$$ || $APP.goog.dom.getDomHelper();
  this.deferredDeliveries_ = [];
  this.peerLoadHandler_ = new $APP.goog.events.EventHandler(this);
  $cfg$$[$APP.goog.net.xpc.CfgFields.LOCAL_POLL_URI] = $cfg$$[$APP.goog.net.xpc.CfgFields.LOCAL_POLL_URI] || $APP.goog.uri.utils.getHost(this.domHelper_.getWindow().location.href) + "/robots.txt";
  $cfg$$[$APP.goog.net.xpc.CfgFields.PEER_POLL_URI] = $cfg$$[$APP.goog.net.xpc.CfgFields.PEER_POLL_URI] || $APP.goog.uri.utils.getHost($cfg$$[$APP.goog.net.xpc.CfgFields.PEER_URI] || "") + "/robots.txt";
  $APP.goog.net.xpc.CrossPageChannel.channels[this.name] = this;
  $APP.goog.events.getListener(window, $APP.goog.events.EventType.UNLOAD, $APP.goog.net.xpc.CrossPageChannel.disposeAll_) || $APP.goog.events.listenOnce(window, $APP.goog.events.EventType.UNLOAD, $APP.goog.net.xpc.CrossPageChannel.disposeAll_);
  $APP.goog.log.info($APP.goog.net.xpc.logger, "CrossPageChannel created: " + this.name);
};
$APP.goog.inherits($APP.goog.net.xpc.CrossPageChannel, $APP.goog.messaging.AbstractChannel);
$APP.goog.net.xpc.CrossPageChannel.TRANSPORT_SERVICE_ESCAPE_RE_ = new RegExp("^%*" + $APP.goog.net.xpc.TRANSPORT_SERVICE + "$");
$APP.goog.net.xpc.CrossPageChannel.TRANSPORT_SERVICE_UNESCAPE_RE_ = new RegExp("^%+" + $APP.goog.net.xpc.TRANSPORT_SERVICE + "$");
$APP.goog.net.xpc.CrossPageChannel.prototype.connectionDelay_ = null;
$APP.goog.net.xpc.CrossPageChannel.prototype.peerWindowDeferred_ = null;
$APP.goog.net.xpc.CrossPageChannel.prototype.transport_ = null;
$APP.goog.net.xpc.CrossPageChannel.prototype.state_ = $APP.goog.net.xpc.ChannelStates.NOT_CONNECTED;
$APP.goog.net.xpc.CrossPageChannel.prototype.isConnected = function() {
  return this.state_ == $APP.goog.net.xpc.ChannelStates.CONNECTED;
};
$APP.goog.net.xpc.CrossPageChannel.prototype.peerWindowObject_ = null;
$APP.goog.net.xpc.CrossPageChannel.prototype.iframeElement_ = null;
$APP.goog.net.xpc.CrossPageChannel.prototype.getConfig = function() {
  return this.cfg_;
};
$APP.goog.net.xpc.CrossPageChannel.prototype.getIframeElement = function() {
  return this.iframeElement_;
};
$APP.goog.net.xpc.CrossPageChannel.prototype.setPeerWindowObject = function($peerWindowObject$$) {
  this.peerWindowObject_ = $peerWindowObject$$;
};
$APP.goog.net.xpc.CrossPageChannel.prototype.getPeerWindowObject = function() {
  return this.peerWindowObject_;
};
$APP.goog.net.xpc.CrossPageChannel.prototype.isPeerAvailable = function() {
  try {
    return !!this.peerWindowObject_ && !this.peerWindowObject_.closed;
  } catch ($e$$) {
    return !1;
  }
};
$APP.goog.net.xpc.CrossPageChannel.prototype.determineTransportType_ = function() {
  return typeof document.postMessage === "function" || typeof window.postMessage === "function" || $APP.goog.userAgent.IE && window.postMessage ? $APP.goog.net.xpc.TransportTypes.NATIVE_MESSAGING : $APP.goog.net.xpc.TransportTypes.UNDEFINED;
};
$APP.goog.net.xpc.CrossPageChannel.prototype.createTransport_ = function() {
  if (!this.transport_) {
    var $CfgFields$$ = $APP.goog.net.xpc.CfgFields;
    this.cfg_[$CfgFields$$.TRANSPORT] || (this.cfg_[$CfgFields$$.TRANSPORT] = this.determineTransportType_());
    if (typeof this.cfg_[$CfgFields$$.TRANSPORT] === "function") {
      this.transport_ = new this.cfg_[$CfgFields$$.TRANSPORT](this, this.domHelper_);
    } else {
      switch(this.cfg_[$CfgFields$$.TRANSPORT]) {
        case $APP.goog.net.xpc.TransportTypes.NATIVE_MESSAGING:
          this.transport_ = new $APP.goog.net.xpc.NativeMessagingTransport(this, this.cfg_[$CfgFields$$.PEER_HOSTNAME], this.domHelper_, !!this.cfg_[$CfgFields$$.ONE_SIDED_HANDSHAKE], this.cfg_[$CfgFields$$.NATIVE_TRANSPORT_PROTOCOL_VERSION] || 2);
      }
    }
    if (this.transport_) {
      $APP.goog.log.info($APP.goog.net.xpc.logger, "Transport created: " + this.transport_.getName());
    } else {
      throw Error("CrossPageChannel: No suitable transport found! You may try injecting a Transport constructor directly via the channel config object.");
    }
  }
};
$APP.goog.net.xpc.CrossPageChannel.prototype.getTransportType = function() {
  return this.transport_.getType();
};
$APP.goog.net.xpc.CrossPageChannel.prototype.getTransportName = function() {
  return this.transport_.getName();
};
$APP.goog.net.xpc.CrossPageChannel.prototype.getPeerConfiguration = function() {
  const $peerCfg$$ = {};
  $peerCfg$$[$APP.goog.net.xpc.CfgFields.CHANNEL_NAME] = this.name;
  $peerCfg$$[$APP.goog.net.xpc.CfgFields.TRANSPORT] = this.cfg_[$APP.goog.net.xpc.CfgFields.TRANSPORT];
  $peerCfg$$[$APP.goog.net.xpc.CfgFields.ONE_SIDED_HANDSHAKE] = this.cfg_[$APP.goog.net.xpc.CfgFields.ONE_SIDED_HANDSHAKE];
  this.cfg_[$APP.goog.net.xpc.CfgFields.LOCAL_RELAY_URI] && ($peerCfg$$[$APP.goog.net.xpc.CfgFields.PEER_RELAY_URI] = this.cfg_[$APP.goog.net.xpc.CfgFields.LOCAL_RELAY_URI]);
  this.cfg_[$APP.goog.net.xpc.CfgFields.LOCAL_POLL_URI] && ($peerCfg$$[$APP.goog.net.xpc.CfgFields.PEER_POLL_URI] = this.cfg_[$APP.goog.net.xpc.CfgFields.LOCAL_POLL_URI]);
  this.cfg_[$APP.goog.net.xpc.CfgFields.PEER_POLL_URI] && ($peerCfg$$[$APP.goog.net.xpc.CfgFields.LOCAL_POLL_URI] = this.cfg_[$APP.goog.net.xpc.CfgFields.PEER_POLL_URI]);
  const $role$$ = this.cfg_[$APP.goog.net.xpc.CfgFields.ROLE];
  $role$$ && ($peerCfg$$[$APP.goog.net.xpc.CfgFields.ROLE] = $role$$ == $APP.goog.net.xpc.CrossPageChannelRole.INNER ? $APP.goog.net.xpc.CrossPageChannelRole.OUTER : $APP.goog.net.xpc.CrossPageChannelRole.INNER);
  return $peerCfg$$;
};
$APP.goog.net.xpc.CrossPageChannel.prototype.createPeerIframe = function($parentElm$$, $opt_configureIframeCb$$, $opt_addCfgParam$$) {
  $APP.goog.log.info($APP.goog.net.xpc.logger, "createPeerIframe()");
  let $iframeId$$ = this.cfg_[$APP.goog.net.xpc.CfgFields.IFRAME_ID];
  $iframeId$$ || ($iframeId$$ = this.cfg_[$APP.goog.net.xpc.CfgFields.IFRAME_ID] = "xpcpeer" + $APP.goog.net.xpc.getRandomString(4));
  const $iframeElm$$ = $APP.goog.dom.getDomHelper($parentElm$$).createElement($APP.goog.dom.TagName.IFRAME);
  $iframeElm$$.id = $iframeElm$$.name = $iframeId$$;
  $opt_configureIframeCb$$ ? $opt_configureIframeCb$$($iframeElm$$) : $iframeElm$$.style.width = $iframeElm$$.style.height = "100%";
  this.cleanUpIncompleteConnection_();
  this.peerWindowDeferred_ = new $APP.goog.async.Deferred(void 0, this);
  const $peerUri$$ = this.getPeerUri($opt_addCfgParam$$);
  this.peerLoadHandler_.listenOnceWithScope($iframeElm$$, "load", this.peerWindowDeferred_.callback, !1, this.peerWindowDeferred_);
  $APP.goog.userAgent.GECKO || $APP.goog.userAgent.WEBKIT ? window.setTimeout($APP.goog.bind(function() {
    $parentElm$$.appendChild($iframeElm$$);
    $APP.goog.dom.safe.setIframeSrc($iframeElm$$, $APP.goog.html.legacyconversions.trustedResourceUrlFromString($peerUri$$.toString()));
    $APP.goog.log.info($APP.goog.net.xpc.logger, "peer iframe created (" + $iframeId$$ + ")");
  }, this), 1) : ($APP.goog.dom.safe.setIframeSrc($iframeElm$$, $APP.goog.html.legacyconversions.trustedResourceUrlFromString($peerUri$$.toString())), $parentElm$$.appendChild($iframeElm$$), $APP.goog.log.info($APP.goog.net.xpc.logger, "peer iframe created (" + $iframeId$$ + ")"));
  return $iframeElm$$;
};
$APP.goog.net.xpc.CrossPageChannel.prototype.cleanUpIncompleteConnection_ = function() {
  this.peerWindowDeferred_ && (this.peerWindowDeferred_.cancel(), this.peerWindowDeferred_ = null);
  this.deferredDeliveries_.length = 0;
  this.peerLoadHandler_.removeAll();
};
$APP.goog.net.xpc.CrossPageChannel.prototype.getPeerUri = function($opt_addCfgParam$$) {
  let $peerUri$$ = this.cfg_[$APP.goog.net.xpc.CfgFields.PEER_URI];
  typeof $peerUri$$ === "string" && ($peerUri$$ = this.cfg_[$APP.goog.net.xpc.CfgFields.PEER_URI] = new $APP.goog.Uri($peerUri$$));
  $opt_addCfgParam$$ !== !1 && $peerUri$$.setParameterValue("xpc", $APP.goog.json.serialize(this.getPeerConfiguration()));
  return $peerUri$$;
};
$APP.goog.net.xpc.CrossPageChannel.prototype.connect = function($opt_connectCb$$) {
  this.connectCb_ = $opt_connectCb$$ || $APP.goog.functions.UNDEFINED;
  this.state_ == $APP.goog.net.xpc.ChannelStates.CLOSED && (this.state_ = $APP.goog.net.xpc.ChannelStates.NOT_CONNECTED);
  this.peerWindowDeferred_ ? this.peerWindowDeferred_.addCallback(this.continueConnection_) : this.continueConnection_();
};
$APP.goog.net.xpc.CrossPageChannel.prototype.continueConnection_ = function() {
  $APP.goog.log.info($APP.goog.net.xpc.logger, "continueConnection_()");
  this.peerWindowDeferred_ = null;
  this.cfg_[$APP.goog.net.xpc.CfgFields.IFRAME_ID] && (this.iframeElement_ = this.domHelper_.getElement(this.cfg_[$APP.goog.net.xpc.CfgFields.IFRAME_ID]));
  if (this.iframeElement_) {
    let $winObj$$ = this.iframeElement_.contentWindow;
    $winObj$$ || ($winObj$$ = window.frames[this.cfg_[$APP.goog.net.xpc.CfgFields.IFRAME_ID]]);
    this.setPeerWindowObject($winObj$$);
  }
  if (!this.peerWindowObject_) {
    if (window == window.top) {
      throw Error("CrossPageChannel: Can't connect, peer window-object not set.");
    }
    this.setPeerWindowObject(window.parent);
  }
  this.createTransport_();
  for (this.transport_.connect(); this.deferredDeliveries_.length > 0;) {
    this.deferredDeliveries_.shift()();
  }
};
$APP.goog.net.xpc.CrossPageChannel.prototype.close = function() {
  this.cleanUpIncompleteConnection_();
  this.state_ = $APP.goog.net.xpc.ChannelStates.CLOSED;
  $APP.module$contents$goog$dispose_dispose(this.transport_);
  this.connectCb_ = this.transport_ = null;
  $APP.module$contents$goog$dispose_dispose(this.connectionDelay_);
  this.connectionDelay_ = null;
  $APP.goog.log.info($APP.goog.net.xpc.logger, 'Channel "' + this.name + '" closed');
};
$APP.goog.net.xpc.CrossPageChannel.prototype.notifyConnected = function($opt_delay$$) {
  this.isConnected() || this.connectionDelay_ && this.connectionDelay_.isActive() || (this.state_ = $APP.goog.net.xpc.ChannelStates.CONNECTED, $APP.goog.log.info($APP.goog.net.xpc.logger, 'Channel "' + this.name + '" connected'), $APP.module$contents$goog$dispose_dispose(this.connectionDelay_), $opt_delay$$ !== void 0 ? (this.connectionDelay_ = new $APP.goog.async.Delay(this.connectCb_, $opt_delay$$), this.connectionDelay_.start()) : (this.connectionDelay_ = null, this.connectCb_()));
};
$APP.goog.net.xpc.CrossPageChannel.prototype.notifyTransportError = function() {
  $APP.goog.log.info($APP.goog.net.xpc.logger, "Transport Error");
  this.close();
};
$APP.goog.net.xpc.CrossPageChannel.prototype.send = function($serviceName$$, $payload$$) {
  this.isConnected() ? this.isPeerAvailable() ? ($APP.goog.isObject($payload$$) && ($payload$$ = $APP.goog.json.serialize($payload$$)), this.transport_.send(this.escapeServiceName_($serviceName$$), $payload$$)) : ($APP.goog.log.error($APP.goog.net.xpc.logger, "Peer has disappeared."), this.close()) : $APP.goog.log.error($APP.goog.net.xpc.logger, "Can't send. Channel not connected.");
};
$APP.goog.net.xpc.CrossPageChannel.prototype.xpcDeliver = function($serviceName$$, $payload$$, $opt_origin$$) {
  this.peerWindowDeferred_ ? this.deferredDeliveries_.push($APP.goog.bind(this.xpcDeliver, this, $serviceName$$, $payload$$, $opt_origin$$)) : this.isMessageOriginAcceptable($opt_origin$$) ? this.isDisposed() || this.state_ == $APP.goog.net.xpc.ChannelStates.CLOSED ? $APP.goog.log.warning($APP.goog.net.xpc.logger, "CrossPageChannel::xpcDeliver(): Channel closed.") : $serviceName$$ && $serviceName$$ != $APP.goog.net.xpc.TRANSPORT_SERVICE ? this.isConnected() ? this.deliver(this.unescapeServiceName_($serviceName$$), 
  $payload$$) : $APP.goog.log.info($APP.goog.net.xpc.logger, "CrossPageChannel::xpcDeliver(): Not connected.") : this.transport_.transportServiceHandler($payload$$) : $APP.goog.log.warning($APP.goog.net.xpc.logger, 'Message received from unapproved origin "' + $opt_origin$$ + '" - rejected.');
};
$APP.goog.net.xpc.CrossPageChannel.prototype.escapeServiceName_ = function($name$$) {
  $APP.goog.net.xpc.CrossPageChannel.TRANSPORT_SERVICE_ESCAPE_RE_.test($name$$) && ($name$$ = "%" + $name$$);
  return $name$$.replace(/[%:|]/g, encodeURIComponent);
};
$APP.goog.net.xpc.CrossPageChannel.prototype.unescapeServiceName_ = function($name$$) {
  $name$$ = $name$$.replace(/%[0-9a-f]{2}/gi, decodeURIComponent);
  return $APP.goog.net.xpc.CrossPageChannel.TRANSPORT_SERVICE_UNESCAPE_RE_.test($name$$) ? $name$$.substring(1) : $name$$;
};
$APP.goog.net.xpc.CrossPageChannel.prototype.getRole = function() {
  const $role$$ = this.cfg_[$APP.goog.net.xpc.CfgFields.ROLE];
  return typeof $role$$ === "number" ? $role$$ : window.parent == this.peerWindowObject_ ? $APP.goog.net.xpc.CrossPageChannelRole.INNER : $APP.goog.net.xpc.CrossPageChannelRole.OUTER;
};
$APP.goog.net.xpc.CrossPageChannel.prototype.updateChannelNameAndCatalog = function($name$$) {
  $APP.goog.log.fine($APP.goog.net.xpc.logger, "changing channel name to " + $name$$);
  delete $APP.goog.net.xpc.CrossPageChannel.channels[this.name];
  this.name = $name$$;
  $APP.goog.net.xpc.CrossPageChannel.channels[$name$$] = this;
};
$APP.goog.net.xpc.CrossPageChannel.prototype.isMessageOriginAcceptable = function($opt_origin$$) {
  const $peerHostname$$ = this.cfg_[$APP.goog.net.xpc.CfgFields.PEER_HOSTNAME];
  return $APP.goog.string.isEmptyOrWhitespace($APP.goog.string.makeSafe($opt_origin$$)) || $APP.goog.string.isEmptyOrWhitespace($APP.goog.string.makeSafe($peerHostname$$)) || $opt_origin$$ == this.cfg_[$APP.goog.net.xpc.CfgFields.PEER_HOSTNAME];
};
$APP.goog.net.xpc.CrossPageChannel.prototype.disposeInternal = function() {
  this.close();
  this.iframeElement_ = this.peerWindowObject_ = null;
  delete $APP.goog.net.xpc.CrossPageChannel.channels[this.name];
  $APP.module$contents$goog$dispose_dispose(this.peerLoadHandler_);
  delete this.peerLoadHandler_;
  $APP.goog.net.xpc.CrossPageChannel.superClass_.disposeInternal.call(this);
};
$APP.goog.net.xpc.CrossPageChannel.disposeAll_ = function() {
  for (let $name$$ in $APP.goog.net.xpc.CrossPageChannel.channels) {
    $APP.module$contents$goog$dispose_dispose($APP.goog.net.xpc.CrossPageChannel.channels[$name$$]);
  }
};
$APP.goog.net.xpc.CrossPageChannel.channels = {};
$APP.clojure.browser.net = {};
$APP.clojure.browser.net.goog$module$goog$object = $APP.goog.object;
$APP.clojure.browser.net._STAR_timeout_STAR_ = 10000;
$APP.clojure.browser.net.event_types = $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(function($p__47939_v$$) {
  var $k$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__47939_v$$, 0, null);
  $p__47939_v$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__47939_v$$, 1, null);
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.keyword.cljs$core$IFn$_invoke$arity$1($k$$.toLowerCase()), $p__47939_v$$], null);
}, $APP.cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.js__GT_clj.cljs$core$IFn$_invoke$arity$1($APP.goog.net.EventType)], 0))));
$APP.clojure.browser.net.IConnection = function() {
};
var clojure$browser$net$IConnection$connect$dyn_47987 = function() {
  var $G__47988$$ = null, $G__47988__1$$ = function($this$$$) {
    var $m__5372__auto__$jscomp$275_m__5374__auto__$$ = $APP.clojure.browser.net.connect[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
    if ($m__5372__auto__$jscomp$275_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$275_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$275_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$275_m__5374__auto__$$.call(null, $this$$$);
    }
    $m__5372__auto__$jscomp$275_m__5374__auto__$$ = $APP.clojure.browser.net.connect._;
    if ($m__5372__auto__$jscomp$275_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$275_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$275_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$275_m__5374__auto__$$.call(null, $this$$$);
    }
    throw $APP.cljs.core.missing_protocol("IConnection.connect", $this$$$);
  }, $G__47988__2$$ = function($this$$$, $opt1$$) {
    var $m__5372__auto__$jscomp$276_m__5374__auto__$$ = $APP.clojure.browser.net.connect[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
    if ($m__5372__auto__$jscomp$276_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$276_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$276_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($this$$$, $opt1$$) : $m__5372__auto__$jscomp$276_m__5374__auto__$$.call(null, $this$$$, $opt1$$);
    }
    $m__5372__auto__$jscomp$276_m__5374__auto__$$ = $APP.clojure.browser.net.connect._;
    if ($m__5372__auto__$jscomp$276_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$276_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$276_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($this$$$, $opt1$$) : $m__5372__auto__$jscomp$276_m__5374__auto__$$.call(null, $this$$$, $opt1$$);
    }
    throw $APP.cljs.core.missing_protocol("IConnection.connect", $this$$$);
  }, $G__47988__3$$ = function($this$$$, $opt1$$, $opt2$$) {
    var $m__5372__auto__$jscomp$277_m__5374__auto__$$ = $APP.clojure.browser.net.connect[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
    if ($m__5372__auto__$jscomp$277_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$277_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$277_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($this$$$, $opt1$$, $opt2$$) : $m__5372__auto__$jscomp$277_m__5374__auto__$$.call(null, $this$$$, $opt1$$, $opt2$$);
    }
    $m__5372__auto__$jscomp$277_m__5374__auto__$$ = $APP.clojure.browser.net.connect._;
    if ($m__5372__auto__$jscomp$277_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$277_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$277_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($this$$$, $opt1$$, $opt2$$) : $m__5372__auto__$jscomp$277_m__5374__auto__$$.call(null, $this$$$, $opt1$$, $opt2$$);
    }
    throw $APP.cljs.core.missing_protocol("IConnection.connect", $this$$$);
  }, $G__47988__4$$ = function($this$$$, $opt1$$, $opt2$$, $opt3$$) {
    var $m__5372__auto__$jscomp$278_m__5374__auto__$$ = $APP.clojure.browser.net.connect[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
    if ($m__5372__auto__$jscomp$278_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$278_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$278_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($this$$$, $opt1$$, $opt2$$, $opt3$$) : $m__5372__auto__$jscomp$278_m__5374__auto__$$.call(null, $this$$$, $opt1$$, $opt2$$, $opt3$$);
    }
    $m__5372__auto__$jscomp$278_m__5374__auto__$$ = $APP.clojure.browser.net.connect._;
    if ($m__5372__auto__$jscomp$278_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$278_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$278_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($this$$$, $opt1$$, $opt2$$, $opt3$$) : $m__5372__auto__$jscomp$278_m__5374__auto__$$.call(null, $this$$$, $opt1$$, $opt2$$, $opt3$$);
    }
    throw $APP.cljs.core.missing_protocol("IConnection.connect", $this$$$);
  };
  $G__47988$$ = function($this$$$, $opt1$$, $opt2$$, $opt3$$) {
    switch(arguments.length) {
      case 1:
        return $G__47988__1$$.call(this, $this$$$);
      case 2:
        return $G__47988__2$$.call(this, $this$$$, $opt1$$);
      case 3:
        return $G__47988__3$$.call(this, $this$$$, $opt1$$, $opt2$$);
      case 4:
        return $G__47988__4$$.call(this, $this$$$, $opt1$$, $opt2$$, $opt3$$);
    }
    throw Error("Invalid arity: " + arguments.length);
  };
  $G__47988$$.cljs$core$IFn$_invoke$arity$1 = $G__47988__1$$;
  $G__47988$$.cljs$core$IFn$_invoke$arity$2 = $G__47988__2$$;
  $G__47988$$.cljs$core$IFn$_invoke$arity$3 = $G__47988__3$$;
  $G__47988$$.cljs$core$IFn$_invoke$arity$4 = $G__47988__4$$;
  return $G__47988$$;
}();
$APP.clojure.browser.net.connect = function($var_args$$) {
  switch(arguments.length) {
    case 1:
      return $APP.clojure.browser.net.connect.cljs$core$IFn$_invoke$arity$1(arguments[0]);
    case 2:
      return $APP.clojure.browser.net.connect.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return $APP.clojure.browser.net.connect.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    case 4:
      return $APP.clojure.browser.net.connect.cljs$core$IFn$_invoke$arity$4(arguments[0], arguments[1], arguments[2], arguments[3]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
$APP.clojure.browser.net.connect.cljs$core$IFn$_invoke$arity$1 = function($this$$$) {
  return $this$$$ != null && $this$$$.clojure$browser$net$IConnection$connect$arity$1 != null ? $this$$$.clojure$browser$net$IConnection$connect$arity$1($this$$$) : clojure$browser$net$IConnection$connect$dyn_47987($this$$$);
};
$APP.clojure.browser.net.connect.cljs$core$IFn$_invoke$arity$2 = function($this$$$, $opt1$$) {
  return $this$$$ != null && $this$$$.clojure$browser$net$IConnection$connect$arity$2 != null ? $this$$$.clojure$browser$net$IConnection$connect$arity$2($this$$$, $opt1$$) : clojure$browser$net$IConnection$connect$dyn_47987($this$$$, $opt1$$);
};
$APP.clojure.browser.net.connect.cljs$core$IFn$_invoke$arity$3 = function($this$$$, $opt1$$, $opt2$$) {
  return $this$$$ != null && $this$$$.clojure$browser$net$IConnection$connect$arity$3 != null ? $this$$$.clojure$browser$net$IConnection$connect$arity$3($this$$$, $opt1$$, $opt2$$) : clojure$browser$net$IConnection$connect$dyn_47987($this$$$, $opt1$$, $opt2$$);
};
$APP.clojure.browser.net.connect.cljs$core$IFn$_invoke$arity$4 = function($this$$$, $opt1$$, $opt2$$, $opt3$$) {
  return $this$$$ != null && $this$$$.clojure$browser$net$IConnection$connect$arity$4 != null ? $this$$$.clojure$browser$net$IConnection$connect$arity$4($this$$$, $opt1$$, $opt2$$, $opt3$$) : clojure$browser$net$IConnection$connect$dyn_47987($this$$$, $opt1$$, $opt2$$, $opt3$$);
};
$APP.clojure.browser.net.connect.cljs$lang$maxFixedArity = 4;
var clojure$browser$net$IConnection$transmit$dyn_47990 = function() {
  var $G__47991$$ = null, $G__47991__2$$ = function($this$$$, $opt$$) {
    var $m__5372__auto__$jscomp$279_m__5374__auto__$$ = $APP.clojure.browser.net.transmit[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
    if ($m__5372__auto__$jscomp$279_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$279_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$279_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($this$$$, $opt$$) : $m__5372__auto__$jscomp$279_m__5374__auto__$$.call(null, $this$$$, $opt$$);
    }
    $m__5372__auto__$jscomp$279_m__5374__auto__$$ = $APP.clojure.browser.net.transmit._;
    if ($m__5372__auto__$jscomp$279_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$279_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$279_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($this$$$, $opt$$) : $m__5372__auto__$jscomp$279_m__5374__auto__$$.call(null, $this$$$, $opt$$);
    }
    throw $APP.cljs.core.missing_protocol("IConnection.transmit", $this$$$);
  }, $G__47991__3$$ = function($this$$$, $opt$$, $opt2$$) {
    var $m__5372__auto__$jscomp$280_m__5374__auto__$$ = $APP.clojure.browser.net.transmit[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
    if ($m__5372__auto__$jscomp$280_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$280_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$280_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($this$$$, $opt$$, $opt2$$) : $m__5372__auto__$jscomp$280_m__5374__auto__$$.call(null, $this$$$, $opt$$, $opt2$$);
    }
    $m__5372__auto__$jscomp$280_m__5374__auto__$$ = $APP.clojure.browser.net.transmit._;
    if ($m__5372__auto__$jscomp$280_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$280_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$280_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($this$$$, $opt$$, $opt2$$) : $m__5372__auto__$jscomp$280_m__5374__auto__$$.call(null, $this$$$, $opt$$, $opt2$$);
    }
    throw $APP.cljs.core.missing_protocol("IConnection.transmit", $this$$$);
  }, $G__47991__4$$ = function($this$$$, $opt$$, $opt2$$, $opt3$$) {
    var $m__5372__auto__$jscomp$281_m__5374__auto__$$ = $APP.clojure.browser.net.transmit[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
    if ($m__5372__auto__$jscomp$281_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$281_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$281_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($this$$$, $opt$$, $opt2$$, $opt3$$) : $m__5372__auto__$jscomp$281_m__5374__auto__$$.call(null, $this$$$, $opt$$, $opt2$$, $opt3$$);
    }
    $m__5372__auto__$jscomp$281_m__5374__auto__$$ = $APP.clojure.browser.net.transmit._;
    if ($m__5372__auto__$jscomp$281_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$281_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$281_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($this$$$, $opt$$, $opt2$$, $opt3$$) : $m__5372__auto__$jscomp$281_m__5374__auto__$$.call(null, $this$$$, $opt$$, $opt2$$, $opt3$$);
    }
    throw $APP.cljs.core.missing_protocol("IConnection.transmit", $this$$$);
  }, $G__47991__5$$ = function($this$$$, $opt$$, $opt2$$, $opt3$$, $opt4$$) {
    var $m__5372__auto__$jscomp$282_m__5374__auto__$$ = $APP.clojure.browser.net.transmit[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
    if ($m__5372__auto__$jscomp$282_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$282_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5 ? $m__5372__auto__$jscomp$282_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5($this$$$, $opt$$, $opt2$$, $opt3$$, $opt4$$) : $m__5372__auto__$jscomp$282_m__5374__auto__$$.call(null, $this$$$, $opt$$, $opt2$$, $opt3$$, $opt4$$);
    }
    $m__5372__auto__$jscomp$282_m__5374__auto__$$ = $APP.clojure.browser.net.transmit._;
    if ($m__5372__auto__$jscomp$282_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$282_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5 ? $m__5372__auto__$jscomp$282_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5($this$$$, $opt$$, $opt2$$, $opt3$$, $opt4$$) : $m__5372__auto__$jscomp$282_m__5374__auto__$$.call(null, $this$$$, $opt$$, $opt2$$, $opt3$$, $opt4$$);
    }
    throw $APP.cljs.core.missing_protocol("IConnection.transmit", $this$$$);
  }, $G__47991__6$$ = function($this$$$, $opt$$, $opt2$$, $opt3$$, $opt4$$, $opt5$$) {
    var $m__5372__auto__$jscomp$283_m__5374__auto__$$ = $APP.clojure.browser.net.transmit[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
    if ($m__5372__auto__$jscomp$283_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$283_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6 ? $m__5372__auto__$jscomp$283_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6($this$$$, $opt$$, $opt2$$, $opt3$$, $opt4$$, $opt5$$) : $m__5372__auto__$jscomp$283_m__5374__auto__$$.call(null, $this$$$, $opt$$, $opt2$$, $opt3$$, $opt4$$, $opt5$$);
    }
    $m__5372__auto__$jscomp$283_m__5374__auto__$$ = $APP.clojure.browser.net.transmit._;
    if ($m__5372__auto__$jscomp$283_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$283_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6 ? $m__5372__auto__$jscomp$283_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6($this$$$, $opt$$, $opt2$$, $opt3$$, $opt4$$, $opt5$$) : $m__5372__auto__$jscomp$283_m__5374__auto__$$.call(null, $this$$$, $opt$$, $opt2$$, $opt3$$, $opt4$$, $opt5$$);
    }
    throw $APP.cljs.core.missing_protocol("IConnection.transmit", $this$$$);
  };
  $G__47991$$ = function($this$$$, $opt$$, $opt2$$, $opt3$$, $opt4$$, $opt5$$) {
    switch(arguments.length) {
      case 2:
        return $G__47991__2$$.call(this, $this$$$, $opt$$);
      case 3:
        return $G__47991__3$$.call(this, $this$$$, $opt$$, $opt2$$);
      case 4:
        return $G__47991__4$$.call(this, $this$$$, $opt$$, $opt2$$, $opt3$$);
      case 5:
        return $G__47991__5$$.call(this, $this$$$, $opt$$, $opt2$$, $opt3$$, $opt4$$);
      case 6:
        return $G__47991__6$$.call(this, $this$$$, $opt$$, $opt2$$, $opt3$$, $opt4$$, $opt5$$);
    }
    throw Error("Invalid arity: " + arguments.length);
  };
  $G__47991$$.cljs$core$IFn$_invoke$arity$2 = $G__47991__2$$;
  $G__47991$$.cljs$core$IFn$_invoke$arity$3 = $G__47991__3$$;
  $G__47991$$.cljs$core$IFn$_invoke$arity$4 = $G__47991__4$$;
  $G__47991$$.cljs$core$IFn$_invoke$arity$5 = $G__47991__5$$;
  $G__47991$$.cljs$core$IFn$_invoke$arity$6 = $G__47991__6$$;
  return $G__47991$$;
}();
$APP.clojure.browser.net.transmit = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return $APP.clojure.browser.net.transmit.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return $APP.clojure.browser.net.transmit.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    case 4:
      return $APP.clojure.browser.net.transmit.cljs$core$IFn$_invoke$arity$4(arguments[0], arguments[1], arguments[2], arguments[3]);
    case 5:
      return $APP.clojure.browser.net.transmit.cljs$core$IFn$_invoke$arity$5(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4]);
    case 6:
      return $APP.clojure.browser.net.transmit.cljs$core$IFn$_invoke$arity$6(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
$APP.clojure.browser.net.transmit.cljs$core$IFn$_invoke$arity$2 = function($this$$$, $opt$$) {
  return $this$$$ != null && $this$$$.clojure$browser$net$IConnection$transmit$arity$2 != null ? $this$$$.clojure$browser$net$IConnection$transmit$arity$2($this$$$, $opt$$) : clojure$browser$net$IConnection$transmit$dyn_47990($this$$$, $opt$$);
};
$APP.clojure.browser.net.transmit.cljs$core$IFn$_invoke$arity$3 = function($this$$$, $opt$$, $opt2$$) {
  return $this$$$ != null && $this$$$.clojure$browser$net$IConnection$transmit$arity$3 != null ? $this$$$.clojure$browser$net$IConnection$transmit$arity$3($this$$$, $opt$$, $opt2$$) : clojure$browser$net$IConnection$transmit$dyn_47990($this$$$, $opt$$, $opt2$$);
};
$APP.clojure.browser.net.transmit.cljs$core$IFn$_invoke$arity$4 = function($this$$$, $opt$$, $opt2$$, $opt3$$) {
  return $this$$$ != null && $this$$$.clojure$browser$net$IConnection$transmit$arity$4 != null ? $this$$$.clojure$browser$net$IConnection$transmit$arity$4($this$$$, $opt$$, $opt2$$, $opt3$$) : clojure$browser$net$IConnection$transmit$dyn_47990($this$$$, $opt$$, $opt2$$, $opt3$$);
};
$APP.clojure.browser.net.transmit.cljs$core$IFn$_invoke$arity$5 = function($this$$$, $opt$$, $opt2$$, $opt3$$, $opt4$$) {
  return $this$$$ != null && $this$$$.clojure$browser$net$IConnection$transmit$arity$5 != null ? $this$$$.clojure$browser$net$IConnection$transmit$arity$5($this$$$, $opt$$, $opt2$$, $opt3$$, $opt4$$) : clojure$browser$net$IConnection$transmit$dyn_47990($this$$$, $opt$$, $opt2$$, $opt3$$, $opt4$$);
};
$APP.clojure.browser.net.transmit.cljs$core$IFn$_invoke$arity$6 = function($this$$$, $opt$$, $opt2$$, $opt3$$, $opt4$$, $opt5$$) {
  return $this$$$ != null && $this$$$.clojure$browser$net$IConnection$transmit$arity$6 != null ? $this$$$.clojure$browser$net$IConnection$transmit$arity$6($this$$$, $opt$$, $opt2$$, $opt3$$, $opt4$$, $opt5$$) : clojure$browser$net$IConnection$transmit$dyn_47990($this$$$, $opt$$, $opt2$$, $opt3$$, $opt4$$, $opt5$$);
};
$APP.clojure.browser.net.transmit.cljs$lang$maxFixedArity = 6;
var clojure$browser$net$IConnection$close$dyn_47994 = function($this$$$) {
  var $m__5372__auto__$jscomp$284_m__5374__auto__$$ = $APP.clojure.browser.net.close[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
  if ($m__5372__auto__$jscomp$284_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$284_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$284_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$284_m__5374__auto__$$.call(null, $this$$$);
  }
  $m__5372__auto__$jscomp$284_m__5374__auto__$$ = $APP.clojure.browser.net.close._;
  if ($m__5372__auto__$jscomp$284_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$284_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$284_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$284_m__5374__auto__$$.call(null, $this$$$);
  }
  throw $APP.cljs.core.missing_protocol("IConnection.close", $this$$$);
};
$APP.clojure.browser.net.close = function($this$$$) {
  return $this$$$ != null && $this$$$.clojure$browser$net$IConnection$close$arity$1 != null ? $this$$$.clojure$browser$net$IConnection$close$arity$1($this$$$) : clojure$browser$net$IConnection$close$dyn_47994($this$$$);
};
$APP.goog.net.XhrIo.prototype.clojure$browser$net$IConnection$ = $APP.cljs.core.PROTOCOL_SENTINEL;
$APP.goog.net.XhrIo.prototype.clojure$browser$net$IConnection$transmit$arity$2 = function($this$$$, $uri$$) {
  return $APP.clojure.browser.net.transmit(this, $uri$$, "GET", null, null, $APP.clojure.browser.net._STAR_timeout_STAR_);
};
$APP.goog.net.XhrIo.prototype.clojure$browser$net$IConnection$transmit$arity$3 = function($this$$$, $uri$$, $method$$) {
  return $APP.clojure.browser.net.transmit(this, $uri$$, $method$$, null, null, $APP.clojure.browser.net._STAR_timeout_STAR_);
};
$APP.goog.net.XhrIo.prototype.clojure$browser$net$IConnection$transmit$arity$4 = function($this$$$, $uri$$, $method$$, $content$$) {
  return $APP.clojure.browser.net.transmit(this, $uri$$, $method$$, $content$$, null, $APP.clojure.browser.net._STAR_timeout_STAR_);
};
$APP.goog.net.XhrIo.prototype.clojure$browser$net$IConnection$transmit$arity$5 = function($this$$$, $uri$$, $method$$, $content$$, $headers$$) {
  return $APP.clojure.browser.net.transmit(this, $uri$$, $method$$, $content$$, $headers$$, $APP.clojure.browser.net._STAR_timeout_STAR_);
};
$APP.goog.net.XhrIo.prototype.clojure$browser$net$IConnection$transmit$arity$6 = function($this$$$, $uri$$, $method$$, $content$$, $headers$$, $timeout$$) {
  this.setTimeoutInterval($timeout$$);
  return this.send($uri$$, $method$$, $content$$, $headers$$);
};
$APP.goog.net.XhrIo.prototype.clojure$browser$event$IEventType$ = $APP.cljs.core.PROTOCOL_SENTINEL;
$APP.goog.net.XhrIo.prototype.clojure$browser$event$IEventType$event_types$arity$1 = function($this$$$) {
  return $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(function($p__47952_v$$) {
    var $k$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__47952_v$$, 0, null);
    $p__47952_v$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__47952_v$$, 1, null);
    return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.keyword.cljs$core$IFn$_invoke$arity$1($k$$.toLowerCase()), $p__47952_v$$], null);
  }, $APP.cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.js__GT_clj.cljs$core$IFn$_invoke$arity$1($APP.goog.net.EventType)], 0))));
};
$APP.clojure.browser.net.xpc_config_fields = $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(function($p__47956_v$$) {
  var $k$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__47956_v$$, 0, null);
  $p__47956_v$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__47956_v$$, 1, null);
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.keyword.cljs$core$IFn$_invoke$arity$1($k$$.toLowerCase()), $p__47956_v$$], null);
}, $APP.cljs.core.js__GT_clj.cljs$core$IFn$_invoke$arity$1($APP.goog.net.xpc.CfgFields)));
$APP.clojure.browser.net.xhr_connection = function() {
  return new $APP.goog.net.XhrIo();
};
$APP.clojure.browser.net.ICrossPageChannel = function() {
};
var clojure$browser$net$ICrossPageChannel$register_service$dyn_47999 = function() {
  var $G__48000$$ = null, $G__48000__3$$ = function($this$$$, $service_name$$, $fn$$) {
    var $m__5372__auto__$jscomp$285_m__5374__auto__$$ = $APP.clojure.browser.net.register_service[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
    if ($m__5372__auto__$jscomp$285_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$285_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$285_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($this$$$, $service_name$$, $fn$$) : $m__5372__auto__$jscomp$285_m__5374__auto__$$.call(null, $this$$$, $service_name$$, $fn$$);
    }
    $m__5372__auto__$jscomp$285_m__5374__auto__$$ = $APP.clojure.browser.net.register_service._;
    if ($m__5372__auto__$jscomp$285_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$285_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$285_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($this$$$, $service_name$$, $fn$$) : $m__5372__auto__$jscomp$285_m__5374__auto__$$.call(null, $this$$$, $service_name$$, $fn$$);
    }
    throw $APP.cljs.core.missing_protocol("ICrossPageChannel.register-service", $this$$$);
  }, $G__48000__4$$ = function($this$$$, $service_name$$, $fn$$, $encode_json_QMARK_$$) {
    var $m__5372__auto__$jscomp$286_m__5374__auto__$$ = $APP.clojure.browser.net.register_service[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
    if ($m__5372__auto__$jscomp$286_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$286_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$286_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($this$$$, $service_name$$, $fn$$, $encode_json_QMARK_$$) : $m__5372__auto__$jscomp$286_m__5374__auto__$$.call(null, $this$$$, $service_name$$, $fn$$, $encode_json_QMARK_$$);
    }
    $m__5372__auto__$jscomp$286_m__5374__auto__$$ = $APP.clojure.browser.net.register_service._;
    if ($m__5372__auto__$jscomp$286_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$286_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$286_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($this$$$, $service_name$$, $fn$$, $encode_json_QMARK_$$) : $m__5372__auto__$jscomp$286_m__5374__auto__$$.call(null, $this$$$, $service_name$$, $fn$$, $encode_json_QMARK_$$);
    }
    throw $APP.cljs.core.missing_protocol("ICrossPageChannel.register-service", $this$$$);
  };
  $G__48000$$ = function($this$$$, $service_name$$, $fn$$, $encode_json_QMARK_$$) {
    switch(arguments.length) {
      case 3:
        return $G__48000__3$$.call(this, $this$$$, $service_name$$, $fn$$);
      case 4:
        return $G__48000__4$$.call(this, $this$$$, $service_name$$, $fn$$, $encode_json_QMARK_$$);
    }
    throw Error("Invalid arity: " + arguments.length);
  };
  $G__48000$$.cljs$core$IFn$_invoke$arity$3 = $G__48000__3$$;
  $G__48000$$.cljs$core$IFn$_invoke$arity$4 = $G__48000__4$$;
  return $G__48000$$;
}();
$APP.clojure.browser.net.register_service = function($var_args$$) {
  switch(arguments.length) {
    case 3:
      return $APP.clojure.browser.net.register_service.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    case 4:
      return $APP.clojure.browser.net.register_service.cljs$core$IFn$_invoke$arity$4(arguments[0], arguments[1], arguments[2], arguments[3]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
$APP.clojure.browser.net.register_service.cljs$core$IFn$_invoke$arity$3 = function($this$$$, $service_name$$, $fn$$) {
  return $this$$$ != null && $this$$$.clojure$browser$net$ICrossPageChannel$register_service$arity$3 != null ? $this$$$.clojure$browser$net$ICrossPageChannel$register_service$arity$3($this$$$, $service_name$$, $fn$$) : clojure$browser$net$ICrossPageChannel$register_service$dyn_47999($this$$$, $service_name$$, $fn$$);
};
$APP.clojure.browser.net.register_service.cljs$core$IFn$_invoke$arity$4 = function($this$$$, $service_name$$, $fn$$, $encode_json_QMARK_$$) {
  return $this$$$ != null && $this$$$.clojure$browser$net$ICrossPageChannel$register_service$arity$4 != null ? $this$$$.clojure$browser$net$ICrossPageChannel$register_service$arity$4($this$$$, $service_name$$, $fn$$, $encode_json_QMARK_$$) : clojure$browser$net$ICrossPageChannel$register_service$dyn_47999($this$$$, $service_name$$, $fn$$, $encode_json_QMARK_$$);
};
$APP.clojure.browser.net.register_service.cljs$lang$maxFixedArity = 4;
$APP.goog.net.xpc.CrossPageChannel.prototype.clojure$browser$net$ICrossPageChannel$ = $APP.cljs.core.PROTOCOL_SENTINEL;
$APP.goog.net.xpc.CrossPageChannel.prototype.clojure$browser$net$ICrossPageChannel$register_service$arity$3 = function($this$$$, $service_name$$, $fn$$) {
  return $APP.clojure.browser.net.register_service(this, $service_name$$, $fn$$, !1);
};
$APP.goog.net.xpc.CrossPageChannel.prototype.clojure$browser$net$ICrossPageChannel$register_service$arity$4 = function($this$$$, $service_name$$, $fn$$, $encode_json_QMARK_$$) {
  return this.registerService($APP.cljs.core.name($service_name$$), $fn$$, $encode_json_QMARK_$$);
};
$APP.goog.net.xpc.CrossPageChannel.prototype.clojure$browser$net$IConnection$ = $APP.cljs.core.PROTOCOL_SENTINEL;
$APP.goog.net.xpc.CrossPageChannel.prototype.clojure$browser$net$IConnection$connect$arity$1 = function($this$$$) {
  return $APP.clojure.browser.net.connect(this, null);
};
$APP.goog.net.xpc.CrossPageChannel.prototype.clojure$browser$net$IConnection$connect$arity$2 = function($this$$$, $on_connect_fn$$) {
  return this.connect($on_connect_fn$$);
};
$APP.goog.net.xpc.CrossPageChannel.prototype.clojure$browser$net$IConnection$connect$arity$3 = function($this$$$, $on_connect_fn$$, $config_iframe_fn$$) {
  return $APP.clojure.browser.net.connect(this, $on_connect_fn$$, $config_iframe_fn$$, document.body);
};
$APP.goog.net.xpc.CrossPageChannel.prototype.clojure$browser$net$IConnection$connect$arity$4 = function($this$$$, $on_connect_fn$$, $config_iframe_fn$$, $iframe_parent$$) {
  this.createPeerIframe($iframe_parent$$, $config_iframe_fn$$);
  return this.connect($on_connect_fn$$);
};
$APP.goog.net.xpc.CrossPageChannel.prototype.clojure$browser$net$IConnection$transmit$arity$3 = function($this$$$, $service_name$$, $payload$$) {
  return this.send($APP.cljs.core.name($service_name$$), $payload$$);
};
$APP.goog.net.xpc.CrossPageChannel.prototype.clojure$browser$net$IConnection$close$arity$1 = function($this$$$) {
  return this.close();
};
$APP.clojure.browser.net.xpc_connection = function($var_args$$) {
  switch(arguments.length) {
    case 0:
      return $APP.clojure.browser.net.xpc_connection.cljs$core$IFn$_invoke$arity$0();
    case 1:
      return $APP.clojure.browser.net.xpc_connection.cljs$core$IFn$_invoke$arity$1(arguments[0]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
$APP.clojure.browser.net.xpc_connection.cljs$core$IFn$_invoke$arity$0 = function() {
  var $temp__5825__auto__$$ = (new $APP.goog.Uri(window.location.href)).getParameterValue("xpc");
  return $APP.cljs.core.truth_($temp__5825__auto__$$) ? new $APP.goog.net.xpc.CrossPageChannel($APP.goog.json.parse($temp__5825__auto__$$)) : null;
};
$APP.clojure.browser.net.xpc_connection.cljs$core$IFn$_invoke$arity$1 = function($config$$) {
  return new $APP.goog.net.xpc.CrossPageChannel($APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($sum$$, $p__47973_v$$) {
    var $k$jscomp$541_temp__5823__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__47973_v$$, 0, null);
    $p__47973_v$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__47973_v$$, 1, null);
    $k$jscomp$541_temp__5823__auto__$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($APP.clojure.browser.net.xpc_config_fields, $k$jscomp$541_temp__5823__auto__$$);
    $APP.cljs.core.truth_($k$jscomp$541_temp__5823__auto__$$) && $APP.clojure.browser.net.goog$module$goog$object.set($sum$$, $k$jscomp$541_temp__5823__auto__$$, $p__47973_v$$);
    return $sum$$;
  }, {}, $config$$));
};
$APP.clojure.browser.net.xpc_connection.cljs$lang$maxFixedArity = 1;
$APP.clojure.browser.net.IWebSocket = function() {
};
var clojure$browser$net$IWebSocket$open_QMARK_$dyn_48003 = function($this$$$) {
  var $m__5372__auto__$jscomp$287_m__5374__auto__$$ = $APP.clojure.browser.net.open_QMARK_[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
  if ($m__5372__auto__$jscomp$287_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$287_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$287_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$287_m__5374__auto__$$.call(null, $this$$$);
  }
  $m__5372__auto__$jscomp$287_m__5374__auto__$$ = $APP.clojure.browser.net.open_QMARK_._;
  if ($m__5372__auto__$jscomp$287_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$287_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$287_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$287_m__5374__auto__$$.call(null, $this$$$);
  }
  throw $APP.cljs.core.missing_protocol("IWebSocket.open?", $this$$$);
};
$APP.clojure.browser.net.open_QMARK_ = function($this$$$) {
  return $this$$$ != null && $this$$$.clojure$browser$net$IWebSocket$open_QMARK_$arity$1 != null ? $this$$$.clojure$browser$net$IWebSocket$open_QMARK_$arity$1($this$$$) : clojure$browser$net$IWebSocket$open_QMARK_$dyn_48003($this$$$);
};
$APP.goog.net.WebSocket.prototype.clojure$browser$net$IWebSocket$ = $APP.cljs.core.PROTOCOL_SENTINEL;
$APP.goog.net.WebSocket.prototype.clojure$browser$net$IWebSocket$open_QMARK_$arity$1 = function($this$$$) {
  return this.isOpen($APP.cljs.core.List.EMPTY);
};
$APP.goog.net.WebSocket.prototype.clojure$browser$net$IConnection$ = $APP.cljs.core.PROTOCOL_SENTINEL;
$APP.goog.net.WebSocket.prototype.clojure$browser$net$IConnection$connect$arity$2 = function($this$$$, $url$$) {
  return $APP.clojure.browser.net.connect(this, $url$$, null);
};
$APP.goog.net.WebSocket.prototype.clojure$browser$net$IConnection$connect$arity$3 = function($this$$$, $url$$, $protocol$$) {
  return this.open($url$$, $protocol$$);
};
$APP.goog.net.WebSocket.prototype.clojure$browser$net$IConnection$transmit$arity$2 = function($this$$$, $message$$) {
  return this.send($message$$);
};
$APP.goog.net.WebSocket.prototype.clojure$browser$net$IConnection$close$arity$1 = function($this$$$) {
  return this.close($APP.cljs.core.List.EMPTY);
};
$APP.goog.net.WebSocket.prototype.clojure$browser$event$IEventType$ = $APP.cljs.core.PROTOCOL_SENTINEL;
$APP.goog.net.WebSocket.prototype.clojure$browser$event$IEventType$event_types$arity$1 = function($this$$$) {
  return $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(function($p__47981_v$$) {
    var $k$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__47981_v$$, 0, null);
    $p__47981_v$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__47981_v$$, 1, null);
    return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.keyword.cljs$core$IFn$_invoke$arity$1($k$$.toLowerCase()), $p__47981_v$$], null);
  }, $APP.cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.js__GT_clj.cljs$core$IFn$_invoke$arity$1($APP.goog.net.WebSocket.EventType)], 0))));
};
$APP.clojure.browser.net.websocket_connection = function($var_args$$) {
  switch(arguments.length) {
    case 0:
      return $APP.clojure.browser.net.websocket_connection.cljs$core$IFn$_invoke$arity$0();
    case 1:
      return $APP.clojure.browser.net.websocket_connection.cljs$core$IFn$_invoke$arity$1(arguments[0]);
    case 2:
      return $APP.clojure.browser.net.websocket_connection.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
$APP.clojure.browser.net.websocket_connection.cljs$core$IFn$_invoke$arity$0 = function() {
  return $APP.clojure.browser.net.websocket_connection.cljs$core$IFn$_invoke$arity$2(null, null);
};
$APP.clojure.browser.net.websocket_connection.cljs$core$IFn$_invoke$arity$1 = function($auto_reconnect_QMARK_$$) {
  return $APP.clojure.browser.net.websocket_connection.cljs$core$IFn$_invoke$arity$2($auto_reconnect_QMARK_$$, null);
};
$APP.clojure.browser.net.websocket_connection.cljs$core$IFn$_invoke$arity$2 = function($auto_reconnect_QMARK_$$, $next_reconnect_fn$$) {
  return new $APP.goog.net.WebSocket($auto_reconnect_QMARK_$$, $next_reconnect_fn$$);
};
$APP.clojure.browser.net.websocket_connection.cljs$lang$maxFixedArity = 2;
$APP.clojure.reflect = {};
$APP.clojure.reflect.evaluate_javascript = function($block$$) {
  return function() {
    try {
      return eval($block$$);
    } catch ($e47992$$) {
      return console.log($e47992$$);
    }
  }();
};
$APP.clojure.reflect.query_reflection = function($query_param_url$$, $cb$$) {
  var $conn$$ = $APP.clojure.browser.net.xhr_connection();
  $query_param_url$$ = ["/reflect?", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($query_param_url$$)].join("");
  $APP.clojure.browser.event.listen.cljs$core$IFn$_invoke$arity$3($conn$$, $APP.cljs$cst$2024$success, function($e$$) {
    $e$$ = $e$$.currentTarget.getResponseText($APP.cljs.core.List.EMPTY);
    return $cb$$.cljs$core$IFn$_invoke$arity$1 ? $cb$$.cljs$core$IFn$_invoke$arity$1($e$$) : $cb$$.call(null, $e$$);
  });
  $APP.clojure.browser.event.listen.cljs$core$IFn$_invoke$arity$3($conn$$, $APP.cljs$cst$1404$error, function() {
    return $APP.cljs.core.println.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["Reflection query failed."], 0));
  });
  return $APP.clojure.browser.net.transmit($conn$$, $query_param_url$$);
};
$APP.clojure.reflect.meta = function($sym$$, $cb$$) {
  return $APP.clojure.reflect.query_reflection(["var\x3d", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(encodeURIComponent($APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($sym$$)))].join(""), function($G__47996_p1__47995_SHARP_$$) {
    $G__47996_p1__47995_SHARP_$$ = $APP.clojure.reflect.evaluate_javascript($G__47996_p1__47995_SHARP_$$);
    return $cb$$.cljs$core$IFn$_invoke$arity$1 ? $cb$$.cljs$core$IFn$_invoke$arity$1($G__47996_p1__47995_SHARP_$$) : $cb$$.call(null, $G__47996_p1__47995_SHARP_$$);
  });
};
$APP.clojure.reflect.macroexpand = function($form$$) {
  return $APP.clojure.reflect.query_reflection(["macroform\x3d", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(encodeURIComponent($APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($form$$)))].join(""), $APP.cljs.core.println);
};
$APP.clojure.reflect.print_doc = function($name$$) {
  var $doc$$ = $APP.cljs.core.__destructure_map($name$$);
  $name$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($doc$$, $APP.cljs$cst$272$name);
  var $method_params$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($doc$$, $APP.cljs$cst$1380$method_params);
  $doc$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($doc$$, $APP.cljs$cst$256$doc);
  if ($APP.cljs.core.empty_QMARK_($name$$)) {
    return null;
  }
  $APP.cljs.core.println.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$name$$], 0));
  $APP.cljs.core.println.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$method_params$$], 0));
  return $APP.cljs.core.println.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$doc$$], 0));
};
$APP.clojure.reflect.doc = function($sym$$) {
  return $APP.clojure.reflect.meta($sym$$, $APP.clojure.reflect.print_doc);
};
var clara = {rules:{}};
clara.rules.memory = {};
clara.rules.memory.Activation = function($node$$, $token$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.node = $node$$;
  this.token = $token$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
clara.rules.memory.Activation.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
clara.rules.memory.Activation.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k47948$$, $else__5326__auto__$$) {
  switch($k47948$$ instanceof $APP.cljs.core.Keyword ? $k47948$$.fqn : null) {
    case "node":
      return this.node;
    case "token":
      return this.token;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k47948$$, $else__5326__auto__$$);
  }
};
clara.rules.memory.Activation.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__47961_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__47961_v__5348__auto__$$, 0, null);
    $p__47961_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__47961_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__47961_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__47961_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
clara.rules.memory.Activation.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#clara.rules.memory.Activation{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$3067$node, this.node], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$3068$token, this.token], null)], null), 
  this.__extmap));
};
clara.rules.memory.Activation.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__47947$$) {
  return new $APP.cljs.core.RecordIter(0, this, 2, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$3067$node, $APP.cljs$cst$3068$token], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
clara.rules.memory.Activation.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
clara.rules.memory.Activation.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new clara.rules.memory.Activation(this.node, this.token, this.__meta, this.__extmap, this.__hash);
};
clara.rules.memory.Activation.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 2 + $APP.cljs.core.count(this.__extmap);
};
clara.rules.memory.Activation.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$90_h__5134__auto____$1$jscomp$90_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$90_h__5134__auto____$1$jscomp$90_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$90_h__5134__auto____$1$jscomp$90_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$90_h__5134__auto____$1$jscomp$90_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$90_h__5134__auto____$1$jscomp$90_this__5319__auto__$$ = -1078244818 ^ $APP.cljs.core.hash_unordered_coll(this);
};
clara.rules.memory.Activation.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this47949$$, $other47950$$) {
  return $other47950$$ != null && this.constructor === $other47950$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.node, $other47950$$.node) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.token, $other47950$$.token) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other47950$$.__extmap);
};
clara.rules.memory.Activation.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$3067$node, null, $APP.cljs$cst$3068$token, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new clara.rules.memory.Activation(this.node, this.token, this.__meta, 
  $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
clara.rules.memory.Activation.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k47948$$) {
  switch($k47948$$ instanceof $APP.cljs.core.Keyword ? $k47948$$.fqn : null) {
    case "node":
    case "token":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k47948$$);
  }
};
clara.rules.memory.Activation.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__47968_this__5331__auto__$$, $k__5332__auto__$$, $G__47947$$) {
  $pred__47968_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__47968_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__47968_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$3067$node, $k__5332__auto__$$) : $pred__47968_this__5331__auto__$$.call(null, $APP.cljs$cst$3067$node, $k__5332__auto__$$)) ? new clara.rules.memory.Activation($G__47947$$, this.token, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__47968_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__47968_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$3068$token, 
  $k__5332__auto__$$) : $pred__47968_this__5331__auto__$$.call(null, $APP.cljs$cst$3068$token, $k__5332__auto__$$)) ? new clara.rules.memory.Activation(this.node, $G__47947$$, this.__meta, this.__extmap, null) : new clara.rules.memory.Activation(this.node, this.token, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__47947$$), null);
};
clara.rules.memory.Activation.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$3067$node, this.node, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$3068$token, this.token, null)], null), this.__extmap));
};
clara.rules.memory.Activation.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__47947$$) {
  return new clara.rules.memory.Activation(this.node, this.token, $G__47947$$, this.__extmap, this.__hash);
};
clara.rules.memory.Activation.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
clara.rules.memory.Activation.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$64$node, $APP.cljs$cst$3069$token], null);
};
clara.rules.memory.Activation.cljs$lang$type = !0;
clara.rules.memory.Activation.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "clara.rules.memory/Activation", null, 1, null);
};
clara.rules.memory.Activation.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "clara.rules.memory/Activation");
};
clara.rules.memory.__GT_Activation = function($node$$, $token$$) {
  return new clara.rules.memory.Activation($node$$, $token$$, null, null, null);
};
clara.rules.memory.map__GT_Activation = function($G__47951$$) {
  var $G__47980$jscomp$inline_5257_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__47951$$, $APP.cljs$cst$3067$node, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$3068$token], 0));
  $G__47980$jscomp$inline_5257_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__47951$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__47980$jscomp$inline_5257_extmap__5365__auto__$$) : $G__47980$jscomp$inline_5257_extmap__5365__auto__$$;
  return new clara.rules.memory.Activation($APP.cljs$cst$3067$node.cljs$core$IFn$_invoke$arity$1($G__47951$$), $APP.cljs$cst$3068$token.cljs$core$IFn$_invoke$arity$1($G__47951$$), null, $APP.cljs.core.not_empty($G__47980$jscomp$inline_5257_extmap__5365__auto__$$), null);
};
clara.rules.memory.IPersistentMemory = function() {
};
var clara$rules$memory$IPersistentMemory$to_transient$dyn_48159 = function($memory$$) {
  var $m__5372__auto__$jscomp$288_m__5374__auto__$$ = clara.rules.memory.to_transient[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$288_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$288_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$288_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($memory$$) : $m__5372__auto__$jscomp$288_m__5374__auto__$$.call(null, $memory$$);
  }
  $m__5372__auto__$jscomp$288_m__5374__auto__$$ = clara.rules.memory.to_transient._;
  if ($m__5372__auto__$jscomp$288_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$288_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$288_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($memory$$) : $m__5372__auto__$jscomp$288_m__5374__auto__$$.call(null, $memory$$);
  }
  throw $APP.cljs.core.missing_protocol("IPersistentMemory.to-transient", $memory$$);
};
clara.rules.memory.to_transient = function($memory$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$IPersistentMemory$to_transient$arity$1 != null ? $memory$$.clara$rules$memory$IPersistentMemory$to_transient$arity$1($memory$$) : clara$rules$memory$IPersistentMemory$to_transient$dyn_48159($memory$$);
};
clara.rules.memory.IMemoryReader = function() {
};
var clara$rules$memory$IMemoryReader$get_rulebase$dyn_48160 = function($memory$$) {
  var $m__5372__auto__$jscomp$289_m__5374__auto__$$ = clara.rules.memory.get_rulebase[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$289_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$289_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$289_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($memory$$) : $m__5372__auto__$jscomp$289_m__5374__auto__$$.call(null, $memory$$);
  }
  $m__5372__auto__$jscomp$289_m__5374__auto__$$ = clara.rules.memory.get_rulebase._;
  if ($m__5372__auto__$jscomp$289_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$289_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$289_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($memory$$) : $m__5372__auto__$jscomp$289_m__5374__auto__$$.call(null, $memory$$);
  }
  throw $APP.cljs.core.missing_protocol("IMemoryReader.get-rulebase", $memory$$);
};
clara.rules.memory.get_rulebase = function($memory$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$IMemoryReader$get_rulebase$arity$1 != null ? $memory$$.clara$rules$memory$IMemoryReader$get_rulebase$arity$1($memory$$) : clara$rules$memory$IMemoryReader$get_rulebase$dyn_48160($memory$$);
};
var clara$rules$memory$IMemoryReader$get_alphas_fn$dyn_48161 = function($memory$$) {
  var $m__5372__auto__$jscomp$290_m__5374__auto__$$ = clara.rules.memory.get_alphas_fn[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$290_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$290_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$290_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($memory$$) : $m__5372__auto__$jscomp$290_m__5374__auto__$$.call(null, $memory$$);
  }
  $m__5372__auto__$jscomp$290_m__5374__auto__$$ = clara.rules.memory.get_alphas_fn._;
  if ($m__5372__auto__$jscomp$290_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$290_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$290_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($memory$$) : $m__5372__auto__$jscomp$290_m__5374__auto__$$.call(null, $memory$$);
  }
  throw $APP.cljs.core.missing_protocol("IMemoryReader.get-alphas-fn", $memory$$);
};
clara.rules.memory.get_alphas_fn = function($memory$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$IMemoryReader$get_alphas_fn$arity$1 != null ? $memory$$.clara$rules$memory$IMemoryReader$get_alphas_fn$arity$1($memory$$) : clara$rules$memory$IMemoryReader$get_alphas_fn$dyn_48161($memory$$);
};
var clara$rules$memory$IMemoryReader$get_elements$dyn_48166 = function($memory$$, $node$$, $bindings$$) {
  var $m__5372__auto__$jscomp$291_m__5374__auto__$$ = clara.rules.memory.get_elements[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$291_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$291_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$291_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($memory$$, $node$$, $bindings$$) : $m__5372__auto__$jscomp$291_m__5374__auto__$$.call(null, $memory$$, $node$$, $bindings$$);
  }
  $m__5372__auto__$jscomp$291_m__5374__auto__$$ = clara.rules.memory.get_elements._;
  if ($m__5372__auto__$jscomp$291_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$291_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$291_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($memory$$, $node$$, $bindings$$) : $m__5372__auto__$jscomp$291_m__5374__auto__$$.call(null, $memory$$, $node$$, $bindings$$);
  }
  throw $APP.cljs.core.missing_protocol("IMemoryReader.get-elements", $memory$$);
};
clara.rules.memory.get_elements = function($memory$$, $node$$, $bindings$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$IMemoryReader$get_elements$arity$3 != null ? $memory$$.clara$rules$memory$IMemoryReader$get_elements$arity$3($memory$$, $node$$, $bindings$$) : clara$rules$memory$IMemoryReader$get_elements$dyn_48166($memory$$, $node$$, $bindings$$);
};
var clara$rules$memory$IMemoryReader$get_elements_all$dyn_48167 = function($memory$$, $node$$) {
  var $m__5372__auto__$jscomp$292_m__5374__auto__$$ = clara.rules.memory.get_elements_all[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$292_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$292_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$292_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($memory$$, $node$$) : $m__5372__auto__$jscomp$292_m__5374__auto__$$.call(null, $memory$$, $node$$);
  }
  $m__5372__auto__$jscomp$292_m__5374__auto__$$ = clara.rules.memory.get_elements_all._;
  if ($m__5372__auto__$jscomp$292_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$292_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$292_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($memory$$, $node$$) : $m__5372__auto__$jscomp$292_m__5374__auto__$$.call(null, $memory$$, $node$$);
  }
  throw $APP.cljs.core.missing_protocol("IMemoryReader.get-elements-all", $memory$$);
};
clara.rules.memory.get_elements_all = function($memory$$, $node$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$IMemoryReader$get_elements_all$arity$2 != null ? $memory$$.clara$rules$memory$IMemoryReader$get_elements_all$arity$2($memory$$, $node$$) : clara$rules$memory$IMemoryReader$get_elements_all$dyn_48167($memory$$, $node$$);
};
var clara$rules$memory$IMemoryReader$get_tokens$dyn_48168 = function($memory$$, $node$$, $bindings$$) {
  var $m__5372__auto__$jscomp$293_m__5374__auto__$$ = clara.rules.memory.get_tokens[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$293_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$293_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$293_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($memory$$, $node$$, $bindings$$) : $m__5372__auto__$jscomp$293_m__5374__auto__$$.call(null, $memory$$, $node$$, $bindings$$);
  }
  $m__5372__auto__$jscomp$293_m__5374__auto__$$ = clara.rules.memory.get_tokens._;
  if ($m__5372__auto__$jscomp$293_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$293_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$293_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($memory$$, $node$$, $bindings$$) : $m__5372__auto__$jscomp$293_m__5374__auto__$$.call(null, $memory$$, $node$$, $bindings$$);
  }
  throw $APP.cljs.core.missing_protocol("IMemoryReader.get-tokens", $memory$$);
};
clara.rules.memory.get_tokens = function($memory$$, $node$$, $bindings$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$IMemoryReader$get_tokens$arity$3 != null ? $memory$$.clara$rules$memory$IMemoryReader$get_tokens$arity$3($memory$$, $node$$, $bindings$$) : clara$rules$memory$IMemoryReader$get_tokens$dyn_48168($memory$$, $node$$, $bindings$$);
};
var clara$rules$memory$IMemoryReader$get_tokens_all$dyn_48169 = function($memory$$, $node$$) {
  var $m__5372__auto__$jscomp$294_m__5374__auto__$$ = clara.rules.memory.get_tokens_all[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$294_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$294_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$294_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($memory$$, $node$$) : $m__5372__auto__$jscomp$294_m__5374__auto__$$.call(null, $memory$$, $node$$);
  }
  $m__5372__auto__$jscomp$294_m__5374__auto__$$ = clara.rules.memory.get_tokens_all._;
  if ($m__5372__auto__$jscomp$294_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$294_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$294_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($memory$$, $node$$) : $m__5372__auto__$jscomp$294_m__5374__auto__$$.call(null, $memory$$, $node$$);
  }
  throw $APP.cljs.core.missing_protocol("IMemoryReader.get-tokens-all", $memory$$);
};
clara.rules.memory.get_tokens_all = function($memory$$, $node$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$IMemoryReader$get_tokens_all$arity$2 != null ? $memory$$.clara$rules$memory$IMemoryReader$get_tokens_all$arity$2($memory$$, $node$$) : clara$rules$memory$IMemoryReader$get_tokens_all$dyn_48169($memory$$, $node$$);
};
var clara$rules$memory$IMemoryReader$get_accum_reduced$dyn_48174 = function($memory$$, $node$$, $join_bindings$$, $fact_bindings$$) {
  var $m__5372__auto__$jscomp$295_m__5374__auto__$$ = clara.rules.memory.get_accum_reduced[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$295_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$295_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$295_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($memory$$, $node$$, $join_bindings$$, $fact_bindings$$) : $m__5372__auto__$jscomp$295_m__5374__auto__$$.call(null, $memory$$, $node$$, $join_bindings$$, $fact_bindings$$);
  }
  $m__5372__auto__$jscomp$295_m__5374__auto__$$ = clara.rules.memory.get_accum_reduced._;
  if ($m__5372__auto__$jscomp$295_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$295_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$295_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($memory$$, $node$$, $join_bindings$$, $fact_bindings$$) : $m__5372__auto__$jscomp$295_m__5374__auto__$$.call(null, $memory$$, $node$$, $join_bindings$$, $fact_bindings$$);
  }
  throw $APP.cljs.core.missing_protocol("IMemoryReader.get-accum-reduced", $memory$$);
};
clara.rules.memory.get_accum_reduced = function($memory$$, $node$$, $join_bindings$$, $fact_bindings$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$IMemoryReader$get_accum_reduced$arity$4 != null ? $memory$$.clara$rules$memory$IMemoryReader$get_accum_reduced$arity$4($memory$$, $node$$, $join_bindings$$, $fact_bindings$$) : clara$rules$memory$IMemoryReader$get_accum_reduced$dyn_48174($memory$$, $node$$, $join_bindings$$, $fact_bindings$$);
};
var clara$rules$memory$IMemoryReader$get_accum_reduced_all$dyn_48175 = function($memory$$, $node$$, $join_bindings$$) {
  var $m__5372__auto__$jscomp$296_m__5374__auto__$$ = clara.rules.memory.get_accum_reduced_all[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$296_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$296_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$296_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($memory$$, $node$$, $join_bindings$$) : $m__5372__auto__$jscomp$296_m__5374__auto__$$.call(null, $memory$$, $node$$, $join_bindings$$);
  }
  $m__5372__auto__$jscomp$296_m__5374__auto__$$ = clara.rules.memory.get_accum_reduced_all._;
  if ($m__5372__auto__$jscomp$296_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$296_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$296_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($memory$$, $node$$, $join_bindings$$) : $m__5372__auto__$jscomp$296_m__5374__auto__$$.call(null, $memory$$, $node$$, $join_bindings$$);
  }
  throw $APP.cljs.core.missing_protocol("IMemoryReader.get-accum-reduced-all", $memory$$);
};
clara.rules.memory.get_accum_reduced_all = function($memory$$, $node$$, $join_bindings$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$IMemoryReader$get_accum_reduced_all$arity$3 != null ? $memory$$.clara$rules$memory$IMemoryReader$get_accum_reduced_all$arity$3($memory$$, $node$$, $join_bindings$$) : clara$rules$memory$IMemoryReader$get_accum_reduced_all$dyn_48175($memory$$, $node$$, $join_bindings$$);
};
var clara$rules$memory$IMemoryReader$get_accum_reduced_complete$dyn_48176 = function($memory$$, $node$$) {
  var $m__5372__auto__$jscomp$297_m__5374__auto__$$ = clara.rules.memory.get_accum_reduced_complete[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$297_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$297_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$297_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($memory$$, $node$$) : $m__5372__auto__$jscomp$297_m__5374__auto__$$.call(null, $memory$$, $node$$);
  }
  $m__5372__auto__$jscomp$297_m__5374__auto__$$ = clara.rules.memory.get_accum_reduced_complete._;
  if ($m__5372__auto__$jscomp$297_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$297_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$297_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($memory$$, $node$$) : $m__5372__auto__$jscomp$297_m__5374__auto__$$.call(null, $memory$$, $node$$);
  }
  throw $APP.cljs.core.missing_protocol("IMemoryReader.get-accum-reduced-complete", $memory$$);
};
clara.rules.memory.get_accum_reduced_complete = function($memory$$, $node$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$IMemoryReader$get_accum_reduced_complete$arity$2 != null ? $memory$$.clara$rules$memory$IMemoryReader$get_accum_reduced_complete$arity$2($memory$$, $node$$) : clara$rules$memory$IMemoryReader$get_accum_reduced_complete$dyn_48176($memory$$, $node$$);
};
var clara$rules$memory$IMemoryReader$get_insertions$dyn_48177 = function($memory$$, $node$$, $token$$) {
  var $m__5372__auto__$jscomp$298_m__5374__auto__$$ = clara.rules.memory.get_insertions[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$298_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$298_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$298_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($memory$$, $node$$, $token$$) : $m__5372__auto__$jscomp$298_m__5374__auto__$$.call(null, $memory$$, $node$$, $token$$);
  }
  $m__5372__auto__$jscomp$298_m__5374__auto__$$ = clara.rules.memory.get_insertions._;
  if ($m__5372__auto__$jscomp$298_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$298_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$298_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($memory$$, $node$$, $token$$) : $m__5372__auto__$jscomp$298_m__5374__auto__$$.call(null, $memory$$, $node$$, $token$$);
  }
  throw $APP.cljs.core.missing_protocol("IMemoryReader.get-insertions", $memory$$);
};
clara.rules.memory.get_insertions = function($memory$$, $node$$, $token$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$IMemoryReader$get_insertions$arity$3 != null ? $memory$$.clara$rules$memory$IMemoryReader$get_insertions$arity$3($memory$$, $node$$, $token$$) : clara$rules$memory$IMemoryReader$get_insertions$dyn_48177($memory$$, $node$$, $token$$);
};
var clara$rules$memory$IMemoryReader$get_insertions_all$dyn_48182 = function($memory$$, $node$$) {
  var $m__5372__auto__$jscomp$299_m__5374__auto__$$ = clara.rules.memory.get_insertions_all[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$299_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$299_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$299_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($memory$$, $node$$) : $m__5372__auto__$jscomp$299_m__5374__auto__$$.call(null, $memory$$, $node$$);
  }
  $m__5372__auto__$jscomp$299_m__5374__auto__$$ = clara.rules.memory.get_insertions_all._;
  if ($m__5372__auto__$jscomp$299_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$299_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$299_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($memory$$, $node$$) : $m__5372__auto__$jscomp$299_m__5374__auto__$$.call(null, $memory$$, $node$$);
  }
  throw $APP.cljs.core.missing_protocol("IMemoryReader.get-insertions-all", $memory$$);
};
clara.rules.memory.get_insertions_all = function($memory$$, $node$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$IMemoryReader$get_insertions_all$arity$2 != null ? $memory$$.clara$rules$memory$IMemoryReader$get_insertions_all$arity$2($memory$$, $node$$) : clara$rules$memory$IMemoryReader$get_insertions_all$dyn_48182($memory$$, $node$$);
};
var clara$rules$memory$IMemoryReader$get_activations$dyn_48183 = function($memory$$) {
  var $m__5372__auto__$jscomp$300_m__5374__auto__$$ = clara.rules.memory.get_activations[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$300_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$300_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$300_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($memory$$) : $m__5372__auto__$jscomp$300_m__5374__auto__$$.call(null, $memory$$);
  }
  $m__5372__auto__$jscomp$300_m__5374__auto__$$ = clara.rules.memory.get_activations._;
  if ($m__5372__auto__$jscomp$300_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$300_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$300_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($memory$$) : $m__5372__auto__$jscomp$300_m__5374__auto__$$.call(null, $memory$$);
  }
  throw $APP.cljs.core.missing_protocol("IMemoryReader.get-activations", $memory$$);
};
clara.rules.memory.get_activations = function($memory$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$IMemoryReader$get_activations$arity$1 != null ? $memory$$.clara$rules$memory$IMemoryReader$get_activations$arity$1($memory$$) : clara$rules$memory$IMemoryReader$get_activations$dyn_48183($memory$$);
};
clara.rules.memory.ITransientMemory = function() {
};
var clara$rules$memory$ITransientMemory$add_elements_BANG_$dyn_48184 = function($memory$$, $node$$, $join_bindings$$, $elements$$) {
  var $m__5372__auto__$jscomp$301_m__5374__auto__$$ = clara.rules.memory.add_elements_BANG_[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$301_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$301_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$301_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($memory$$, $node$$, $join_bindings$$, $elements$$) : $m__5372__auto__$jscomp$301_m__5374__auto__$$.call(null, $memory$$, $node$$, $join_bindings$$, $elements$$);
  }
  $m__5372__auto__$jscomp$301_m__5374__auto__$$ = clara.rules.memory.add_elements_BANG_._;
  if ($m__5372__auto__$jscomp$301_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$301_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$301_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($memory$$, $node$$, $join_bindings$$, $elements$$) : $m__5372__auto__$jscomp$301_m__5374__auto__$$.call(null, $memory$$, $node$$, $join_bindings$$, $elements$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientMemory.add-elements!", $memory$$);
};
clara.rules.memory.add_elements_BANG_ = function($memory$$, $node$$, $join_bindings$$, $elements$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$ITransientMemory$add_elements_BANG_$arity$4 != null ? $memory$$.clara$rules$memory$ITransientMemory$add_elements_BANG_$arity$4($memory$$, $node$$, $join_bindings$$, $elements$$) : clara$rules$memory$ITransientMemory$add_elements_BANG_$dyn_48184($memory$$, $node$$, $join_bindings$$, $elements$$);
};
var clara$rules$memory$ITransientMemory$remove_elements_BANG_$dyn_48189 = function($memory$$, $node$$, $elements$$, $join_bindings$$) {
  var $m__5372__auto__$jscomp$302_m__5374__auto__$$ = clara.rules.memory.remove_elements_BANG_[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$302_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$302_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$302_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($memory$$, $node$$, $elements$$, $join_bindings$$) : $m__5372__auto__$jscomp$302_m__5374__auto__$$.call(null, $memory$$, $node$$, $elements$$, $join_bindings$$);
  }
  $m__5372__auto__$jscomp$302_m__5374__auto__$$ = clara.rules.memory.remove_elements_BANG_._;
  if ($m__5372__auto__$jscomp$302_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$302_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$302_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($memory$$, $node$$, $elements$$, $join_bindings$$) : $m__5372__auto__$jscomp$302_m__5374__auto__$$.call(null, $memory$$, $node$$, $elements$$, $join_bindings$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientMemory.remove-elements!", $memory$$);
};
clara.rules.memory.remove_elements_BANG_ = function($memory$$, $node$$, $elements$$, $join_bindings$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$ITransientMemory$remove_elements_BANG_$arity$4 != null ? $memory$$.clara$rules$memory$ITransientMemory$remove_elements_BANG_$arity$4($memory$$, $node$$, $elements$$, $join_bindings$$) : clara$rules$memory$ITransientMemory$remove_elements_BANG_$dyn_48189($memory$$, $node$$, $elements$$, $join_bindings$$);
};
var clara$rules$memory$ITransientMemory$add_tokens_BANG_$dyn_48190 = function($memory$$, $node$$, $join_bindings$$, $tokens$$) {
  var $m__5372__auto__$jscomp$303_m__5374__auto__$$ = clara.rules.memory.add_tokens_BANG_[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$303_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$303_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$303_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($memory$$, $node$$, $join_bindings$$, $tokens$$) : $m__5372__auto__$jscomp$303_m__5374__auto__$$.call(null, $memory$$, $node$$, $join_bindings$$, $tokens$$);
  }
  $m__5372__auto__$jscomp$303_m__5374__auto__$$ = clara.rules.memory.add_tokens_BANG_._;
  if ($m__5372__auto__$jscomp$303_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$303_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$303_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($memory$$, $node$$, $join_bindings$$, $tokens$$) : $m__5372__auto__$jscomp$303_m__5374__auto__$$.call(null, $memory$$, $node$$, $join_bindings$$, $tokens$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientMemory.add-tokens!", $memory$$);
};
clara.rules.memory.add_tokens_BANG_ = function($memory$$, $node$$, $join_bindings$$, $tokens$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$ITransientMemory$add_tokens_BANG_$arity$4 != null ? $memory$$.clara$rules$memory$ITransientMemory$add_tokens_BANG_$arity$4($memory$$, $node$$, $join_bindings$$, $tokens$$) : clara$rules$memory$ITransientMemory$add_tokens_BANG_$dyn_48190($memory$$, $node$$, $join_bindings$$, $tokens$$);
};
var clara$rules$memory$ITransientMemory$remove_tokens_BANG_$dyn_48191 = function($memory$$, $node$$, $join_bindings$$, $tokens$$) {
  var $m__5372__auto__$jscomp$304_m__5374__auto__$$ = clara.rules.memory.remove_tokens_BANG_[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$304_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$304_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$304_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($memory$$, $node$$, $join_bindings$$, $tokens$$) : $m__5372__auto__$jscomp$304_m__5374__auto__$$.call(null, $memory$$, $node$$, $join_bindings$$, $tokens$$);
  }
  $m__5372__auto__$jscomp$304_m__5374__auto__$$ = clara.rules.memory.remove_tokens_BANG_._;
  if ($m__5372__auto__$jscomp$304_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$304_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$304_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($memory$$, $node$$, $join_bindings$$, $tokens$$) : $m__5372__auto__$jscomp$304_m__5374__auto__$$.call(null, $memory$$, $node$$, $join_bindings$$, $tokens$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientMemory.remove-tokens!", $memory$$);
};
clara.rules.memory.remove_tokens_BANG_ = function($memory$$, $node$$, $join_bindings$$, $tokens$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$ITransientMemory$remove_tokens_BANG_$arity$4 != null ? $memory$$.clara$rules$memory$ITransientMemory$remove_tokens_BANG_$arity$4($memory$$, $node$$, $join_bindings$$, $tokens$$) : clara$rules$memory$ITransientMemory$remove_tokens_BANG_$dyn_48191($memory$$, $node$$, $join_bindings$$, $tokens$$);
};
var clara$rules$memory$ITransientMemory$add_accum_reduced_BANG_$dyn_48196 = function($memory$$, $node$$, $join_bindings$$, $accum_result$$, $fact_bindings$$) {
  var $m__5372__auto__$jscomp$305_m__5374__auto__$$ = clara.rules.memory.add_accum_reduced_BANG_[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$305_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$305_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5 ? $m__5372__auto__$jscomp$305_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5($memory$$, $node$$, $join_bindings$$, $accum_result$$, $fact_bindings$$) : $m__5372__auto__$jscomp$305_m__5374__auto__$$.call(null, $memory$$, $node$$, $join_bindings$$, $accum_result$$, $fact_bindings$$);
  }
  $m__5372__auto__$jscomp$305_m__5374__auto__$$ = clara.rules.memory.add_accum_reduced_BANG_._;
  if ($m__5372__auto__$jscomp$305_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$305_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5 ? $m__5372__auto__$jscomp$305_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5($memory$$, $node$$, $join_bindings$$, $accum_result$$, $fact_bindings$$) : $m__5372__auto__$jscomp$305_m__5374__auto__$$.call(null, $memory$$, $node$$, $join_bindings$$, $accum_result$$, $fact_bindings$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientMemory.add-accum-reduced!", $memory$$);
};
clara.rules.memory.add_accum_reduced_BANG_ = function($memory$$, $node$$, $join_bindings$$, $accum_result$$, $fact_bindings$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$ITransientMemory$add_accum_reduced_BANG_$arity$5 != null ? $memory$$.clara$rules$memory$ITransientMemory$add_accum_reduced_BANG_$arity$5($memory$$, $node$$, $join_bindings$$, $accum_result$$, $fact_bindings$$) : clara$rules$memory$ITransientMemory$add_accum_reduced_BANG_$dyn_48196($memory$$, $node$$, $join_bindings$$, $accum_result$$, $fact_bindings$$);
};
var clara$rules$memory$ITransientMemory$remove_accum_reduced_BANG_$dyn_48197 = function($memory$$, $node$$, $join_bindings$$, $fact_bindings$$) {
  var $m__5372__auto__$jscomp$306_m__5374__auto__$$ = clara.rules.memory.remove_accum_reduced_BANG_[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$306_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$306_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$306_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($memory$$, $node$$, $join_bindings$$, $fact_bindings$$) : $m__5372__auto__$jscomp$306_m__5374__auto__$$.call(null, $memory$$, $node$$, $join_bindings$$, $fact_bindings$$);
  }
  $m__5372__auto__$jscomp$306_m__5374__auto__$$ = clara.rules.memory.remove_accum_reduced_BANG_._;
  if ($m__5372__auto__$jscomp$306_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$306_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$306_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($memory$$, $node$$, $join_bindings$$, $fact_bindings$$) : $m__5372__auto__$jscomp$306_m__5374__auto__$$.call(null, $memory$$, $node$$, $join_bindings$$, $fact_bindings$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientMemory.remove-accum-reduced!", $memory$$);
};
clara.rules.memory.remove_accum_reduced_BANG_ = function($memory$$, $node$$, $join_bindings$$, $fact_bindings$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$ITransientMemory$remove_accum_reduced_BANG_$arity$4 != null ? $memory$$.clara$rules$memory$ITransientMemory$remove_accum_reduced_BANG_$arity$4($memory$$, $node$$, $join_bindings$$, $fact_bindings$$) : clara$rules$memory$ITransientMemory$remove_accum_reduced_BANG_$dyn_48197($memory$$, $node$$, $join_bindings$$, $fact_bindings$$);
};
var clara$rules$memory$ITransientMemory$add_insertions_BANG_$dyn_48198 = function($memory$$, $node$$, $token$$, $facts$$) {
  var $m__5372__auto__$jscomp$307_m__5374__auto__$$ = clara.rules.memory.add_insertions_BANG_[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$307_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$307_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$307_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($memory$$, $node$$, $token$$, $facts$$) : $m__5372__auto__$jscomp$307_m__5374__auto__$$.call(null, $memory$$, $node$$, $token$$, $facts$$);
  }
  $m__5372__auto__$jscomp$307_m__5374__auto__$$ = clara.rules.memory.add_insertions_BANG_._;
  if ($m__5372__auto__$jscomp$307_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$307_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$307_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($memory$$, $node$$, $token$$, $facts$$) : $m__5372__auto__$jscomp$307_m__5374__auto__$$.call(null, $memory$$, $node$$, $token$$, $facts$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientMemory.add-insertions!", $memory$$);
};
clara.rules.memory.add_insertions_BANG_ = function($memory$$, $node$$, $token$$, $facts$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$ITransientMemory$add_insertions_BANG_$arity$4 != null ? $memory$$.clara$rules$memory$ITransientMemory$add_insertions_BANG_$arity$4($memory$$, $node$$, $token$$, $facts$$) : clara$rules$memory$ITransientMemory$add_insertions_BANG_$dyn_48198($memory$$, $node$$, $token$$, $facts$$);
};
var clara$rules$memory$ITransientMemory$remove_insertions_BANG_$dyn_48203 = function($memory$$, $node$$, $token$$) {
  var $m__5372__auto__$jscomp$308_m__5374__auto__$$ = clara.rules.memory.remove_insertions_BANG_[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$308_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$308_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$308_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($memory$$, $node$$, $token$$) : $m__5372__auto__$jscomp$308_m__5374__auto__$$.call(null, $memory$$, $node$$, $token$$);
  }
  $m__5372__auto__$jscomp$308_m__5374__auto__$$ = clara.rules.memory.remove_insertions_BANG_._;
  if ($m__5372__auto__$jscomp$308_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$308_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$308_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($memory$$, $node$$, $token$$) : $m__5372__auto__$jscomp$308_m__5374__auto__$$.call(null, $memory$$, $node$$, $token$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientMemory.remove-insertions!", $memory$$);
};
clara.rules.memory.remove_insertions_BANG_ = function($memory$$, $node$$, $token$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$ITransientMemory$remove_insertions_BANG_$arity$3 != null ? $memory$$.clara$rules$memory$ITransientMemory$remove_insertions_BANG_$arity$3($memory$$, $node$$, $token$$) : clara$rules$memory$ITransientMemory$remove_insertions_BANG_$dyn_48203($memory$$, $node$$, $token$$);
};
var clara$rules$memory$ITransientMemory$add_activations_BANG_$dyn_48204 = function($memory$$, $production$$, $activations$$) {
  var $m__5372__auto__$jscomp$309_m__5374__auto__$$ = clara.rules.memory.add_activations_BANG_[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$309_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$309_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$309_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($memory$$, $production$$, $activations$$) : $m__5372__auto__$jscomp$309_m__5374__auto__$$.call(null, $memory$$, $production$$, $activations$$);
  }
  $m__5372__auto__$jscomp$309_m__5374__auto__$$ = clara.rules.memory.add_activations_BANG_._;
  if ($m__5372__auto__$jscomp$309_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$309_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$309_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($memory$$, $production$$, $activations$$) : $m__5372__auto__$jscomp$309_m__5374__auto__$$.call(null, $memory$$, $production$$, $activations$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientMemory.add-activations!", $memory$$);
};
clara.rules.memory.add_activations_BANG_ = function($memory$$, $production$$, $activations$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$ITransientMemory$add_activations_BANG_$arity$3 != null ? $memory$$.clara$rules$memory$ITransientMemory$add_activations_BANG_$arity$3($memory$$, $production$$, $activations$$) : clara$rules$memory$ITransientMemory$add_activations_BANG_$dyn_48204($memory$$, $production$$, $activations$$);
};
var clara$rules$memory$ITransientMemory$pop_activation_BANG_$dyn_48205 = function($memory$$) {
  var $m__5372__auto__$jscomp$310_m__5374__auto__$$ = clara.rules.memory.pop_activation_BANG_[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$310_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$310_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$310_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($memory$$) : $m__5372__auto__$jscomp$310_m__5374__auto__$$.call(null, $memory$$);
  }
  $m__5372__auto__$jscomp$310_m__5374__auto__$$ = clara.rules.memory.pop_activation_BANG_._;
  if ($m__5372__auto__$jscomp$310_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$310_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$310_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($memory$$) : $m__5372__auto__$jscomp$310_m__5374__auto__$$.call(null, $memory$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientMemory.pop-activation!", $memory$$);
};
clara.rules.memory.pop_activation_BANG_ = function($memory$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$ITransientMemory$pop_activation_BANG_$arity$1 != null ? $memory$$.clara$rules$memory$ITransientMemory$pop_activation_BANG_$arity$1($memory$$) : clara$rules$memory$ITransientMemory$pop_activation_BANG_$dyn_48205($memory$$);
};
var clara$rules$memory$ITransientMemory$next_activation_group$dyn_48206 = function($memory$$) {
  var $m__5372__auto__$jscomp$311_m__5374__auto__$$ = clara.rules.memory.next_activation_group[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$311_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$311_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$311_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($memory$$) : $m__5372__auto__$jscomp$311_m__5374__auto__$$.call(null, $memory$$);
  }
  $m__5372__auto__$jscomp$311_m__5374__auto__$$ = clara.rules.memory.next_activation_group._;
  if ($m__5372__auto__$jscomp$311_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$311_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$311_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($memory$$) : $m__5372__auto__$jscomp$311_m__5374__auto__$$.call(null, $memory$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientMemory.next-activation-group", $memory$$);
};
clara.rules.memory.next_activation_group = function($memory$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$ITransientMemory$next_activation_group$arity$1 != null ? $memory$$.clara$rules$memory$ITransientMemory$next_activation_group$arity$1($memory$$) : clara$rules$memory$ITransientMemory$next_activation_group$dyn_48206($memory$$);
};
var clara$rules$memory$ITransientMemory$remove_activations_BANG_$dyn_48211 = function($memory$$, $production$$, $activations$$) {
  var $m__5372__auto__$jscomp$312_m__5374__auto__$$ = clara.rules.memory.remove_activations_BANG_[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$312_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$312_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$312_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($memory$$, $production$$, $activations$$) : $m__5372__auto__$jscomp$312_m__5374__auto__$$.call(null, $memory$$, $production$$, $activations$$);
  }
  $m__5372__auto__$jscomp$312_m__5374__auto__$$ = clara.rules.memory.remove_activations_BANG_._;
  if ($m__5372__auto__$jscomp$312_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$312_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$312_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($memory$$, $production$$, $activations$$) : $m__5372__auto__$jscomp$312_m__5374__auto__$$.call(null, $memory$$, $production$$, $activations$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientMemory.remove-activations!", $memory$$);
};
clara.rules.memory.remove_activations_BANG_ = function($memory$$, $production$$, $activations$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$ITransientMemory$remove_activations_BANG_$arity$3 != null ? $memory$$.clara$rules$memory$ITransientMemory$remove_activations_BANG_$arity$3($memory$$, $production$$, $activations$$) : clara$rules$memory$ITransientMemory$remove_activations_BANG_$dyn_48211($memory$$, $production$$, $activations$$);
};
var clara$rules$memory$ITransientMemory$clear_activations_BANG_$dyn_48212 = function($memory$$) {
  var $m__5372__auto__$jscomp$313_m__5374__auto__$$ = clara.rules.memory.clear_activations_BANG_[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$313_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$313_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$313_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($memory$$) : $m__5372__auto__$jscomp$313_m__5374__auto__$$.call(null, $memory$$);
  }
  $m__5372__auto__$jscomp$313_m__5374__auto__$$ = clara.rules.memory.clear_activations_BANG_._;
  if ($m__5372__auto__$jscomp$313_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$313_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$313_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($memory$$) : $m__5372__auto__$jscomp$313_m__5374__auto__$$.call(null, $memory$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientMemory.clear-activations!", $memory$$);
};
clara.rules.memory.clear_activations_BANG_ = function($memory$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$ITransientMemory$clear_activations_BANG_$arity$1 != null ? $memory$$.clara$rules$memory$ITransientMemory$clear_activations_BANG_$arity$1($memory$$) : clara$rules$memory$ITransientMemory$clear_activations_BANG_$dyn_48212($memory$$);
};
var clara$rules$memory$ITransientMemory$to_persistent_BANG_$dyn_48213 = function($memory$$) {
  var $m__5372__auto__$jscomp$314_m__5374__auto__$$ = clara.rules.memory.to_persistent_BANG_[$APP.goog.typeOf($memory$$ == null ? null : $memory$$)];
  if ($m__5372__auto__$jscomp$314_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$314_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$314_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($memory$$) : $m__5372__auto__$jscomp$314_m__5374__auto__$$.call(null, $memory$$);
  }
  $m__5372__auto__$jscomp$314_m__5374__auto__$$ = clara.rules.memory.to_persistent_BANG_._;
  if ($m__5372__auto__$jscomp$314_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$314_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$314_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($memory$$) : $m__5372__auto__$jscomp$314_m__5374__auto__$$.call(null, $memory$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientMemory.to-persistent!", $memory$$);
};
clara.rules.memory.to_persistent_BANG_ = function($memory$$) {
  return $memory$$ != null && $memory$$.clara$rules$memory$ITransientMemory$to_persistent_BANG_$arity$1 != null ? $memory$$.clara$rules$memory$ITransientMemory$to_persistent_BANG_$arity$1($memory$$) : clara$rules$memory$ITransientMemory$to_persistent_BANG_$dyn_48213($memory$$);
};
clara.rules.memory.remove_first_of_each = function($G__48008_G__48008__$1_G__48218_remove_seq_vec__48015$$, $coll$jscomp$887_items_removed__$1_r$jscomp$75_r__$1$$) {
  if ($APP.cljs.core.empty_QMARK_($G__48008_G__48008__$1_G__48218_remove_seq_vec__48015$$)) {
    return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.PersistentVector.EMPTY, $coll$jscomp$887_items_removed__$1_r$jscomp$75_r__$1$$], null);
  }
  var $f$jscomp$546_f__$1$jscomp$9_f__$2$$ = $APP.cljs.core.first($coll$jscomp$887_items_removed__$1_r$jscomp$75_r__$1$$);
  $coll$jscomp$887_items_removed__$1_r$jscomp$75_r__$1$$ = $APP.cljs.core.rest($coll$jscomp$887_items_removed__$1_r$jscomp$75_r__$1$$);
  $G__48008_G__48008__$1_G__48218_remove_seq_vec__48015$$ = new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$G__48008_G__48008__$1_G__48218_remove_seq_vec__48015$$, $APP.cljs.core.transient$($APP.cljs.core.PersistentVector.EMPTY), $APP.cljs.core.transient$($APP.cljs.core.PersistentVector.EMPTY)], null);
  $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__48008_G__48008__$1_G__48218_remove_seq_vec__48015$$, 0, null);
  $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__48008_G__48008__$1_G__48218_remove_seq_vec__48015$$, 1, null);
  for ($APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__48008_G__48008__$1_G__48218_remove_seq_vec__48015$$, 2, null);;) {
    var $G__48219_r__$2$$ = $coll$jscomp$887_items_removed__$1_r$jscomp$75_r__$1$$, $G__48221$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__48008_G__48008__$1_G__48218_remove_seq_vec__48015$$, 0, null);
    $coll$jscomp$887_items_removed__$1_r$jscomp$75_r__$1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__48008_G__48008__$1_G__48218_remove_seq_vec__48015$$, 1, null);
    var $G__48220_result__$1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__48008_G__48008__$1_G__48218_remove_seq_vec__48015$$, 2, null);
    if ($APP.cljs.core.truth_($f$jscomp$546_f__$1$jscomp$9_f__$2$$)) {
      $G__48008_G__48008__$1_G__48218_remove_seq_vec__48015$$ = $APP.cljs.core.first($G__48219_r__$2$$);
      $G__48219_r__$2$$ = $APP.cljs.core.rest($G__48219_r__$2$$);
      a: {
        for (var $to_remove$$ = $APP.cljs.core.first($G__48221$$), $G__48222$jscomp$inline_5263_remove_seq__$3$$ = $APP.cljs.core.rest($G__48221$$), $G__48223$jscomp$inline_5264_left_to_remove$$ = $APP.cljs.core.transient$($APP.cljs.core.PersistentVector.EMPTY);;) {
          if ($APP.cljs.core.truth_($to_remove$$)) {
            if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($to_remove$$, $f$jscomp$546_f__$1$jscomp$9_f__$2$$)) {
              $G__48220_result__$1$$ = new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.persistent_BANG_($APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.conj_BANG_, $G__48223$jscomp$inline_5264_left_to_remove$$, $G__48222$jscomp$inline_5263_remove_seq__$3$$)), $APP.cljs.core.conj_BANG_.cljs$core$IFn$_invoke$arity$2($coll$jscomp$887_items_removed__$1_r$jscomp$75_r__$1$$, $to_remove$$), $G__48220_result__$1$$], null);
              break a;
            } else {
              $G__48221$$ = $APP.cljs.core.first($G__48222$jscomp$inline_5263_remove_seq__$3$$);
              $G__48222$jscomp$inline_5263_remove_seq__$3$$ = $APP.cljs.core.rest($G__48222$jscomp$inline_5263_remove_seq__$3$$);
              $G__48223$jscomp$inline_5264_left_to_remove$$ = $APP.cljs.core.conj_BANG_.cljs$core$IFn$_invoke$arity$2($G__48223$jscomp$inline_5264_left_to_remove$$, $to_remove$$);
              $to_remove$$ = $G__48221$$;
              continue;
            }
          } else {
            $G__48220_result__$1$$ = new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.persistent_BANG_($G__48223$jscomp$inline_5264_left_to_remove$$), $coll$jscomp$887_items_removed__$1_r$jscomp$75_r__$1$$, $APP.cljs.core.conj_BANG_.cljs$core$IFn$_invoke$arity$2($G__48220_result__$1$$, $f$jscomp$546_f__$1$jscomp$9_f__$2$$)], null);
            break a;
          }
          break;
        }
        $G__48220_result__$1$$ = void 0;
      }
      $f$jscomp$546_f__$1$jscomp$9_f__$2$$ = $G__48008_G__48008__$1_G__48218_remove_seq_vec__48015$$;
      $coll$jscomp$887_items_removed__$1_r$jscomp$75_r__$1$$ = $G__48219_r__$2$$;
      $G__48008_G__48008__$1_G__48218_remove_seq_vec__48015$$ = $G__48220_result__$1$$;
    } else {
      return new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.persistent_BANG_($coll$jscomp$887_items_removed__$1_r$jscomp$75_r__$1$$), $APP.cljs.core.persistent_BANG_($G__48220_result__$1$$), $G__48221$$], null);
    }
  }
};
clara.rules.memory.TransientLocalMemory = function($rulebase$$, $activation_group_sort_fn$$, $activation_group_fn$$, $alphas_fn$$, $alpha_memory$$, $beta_memory$$, $accum_memory$$, $production_memory$$, $activation_map$$) {
  this.rulebase = $rulebase$$;
  this.activation_group_sort_fn = $activation_group_sort_fn$$;
  this.activation_group_fn = $activation_group_fn$$;
  this.alphas_fn = $alphas_fn$$;
  this.alpha_memory = $alpha_memory$$;
  this.beta_memory = $beta_memory$$;
  this.accum_memory = $accum_memory$$;
  this.production_memory = $production_memory$$;
  this.activation_map = $activation_map$$;
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$IMemoryReader$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$IMemoryReader$get_tokens_all$arity$2 = function($memory$$, $node$$) {
  return $APP.cljs.core.sequence.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.cat, $APP.cljs.core.vals($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.beta_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.PersistentArrayMap.EMPTY)));
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$IMemoryReader$get_tokens$arity$3 = function($memory$$, $node$$, $bindings$$) {
  return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.beta_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.PersistentArrayMap.EMPTY), $bindings$$, $APP.cljs.core.PersistentVector.EMPTY);
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$IMemoryReader$get_activations$arity$1 = function($memory$$) {
  return $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.PersistentVector.EMPTY, $APP.cljs.core.comp.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.cat, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$1(function($a$$) {
    return $a$$.activation();
  })), $APP.cljs.core.vals(this.activation_map));
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$IMemoryReader$get_alphas_fn$arity$1 = function($memory$$) {
  return this.alphas_fn;
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$IMemoryReader$get_accum_reduced_complete$arity$2 = function($memory$$, $node$$) {
  var $memory__$1$$ = this;
  return function $clara$rules$memory$iter__48020$$($s__48021$$) {
    return new $APP.cljs.core.LazySeq(null, function() {
      for (var $s__48021__$1$$ = $s__48021$$;;) {
        var $iterys__5499__auto__$jscomp$46_temp__5825__auto__$$ = $APP.cljs.core.seq($s__48021__$1$$);
        if ($iterys__5499__auto__$jscomp$46_temp__5825__auto__$$) {
          var $xs__6385__auto__$$ = $iterys__5499__auto__$jscomp$46_temp__5825__auto__$$, $vec__48026$$ = $APP.cljs.core.first($xs__6385__auto__$$), $join_binding$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__48026$$, 0, null), $fs__5500__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__48026$$, 1, null);
          $iterys__5499__auto__$jscomp$46_temp__5825__auto__$$ = function($s__48021__$1$$, $vec__48026$$, $join_binding$$, $joins$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $memory__$1$$) {
            return function $clara$rules$memory$iter__48020_$_iter__48022$$($s__48023$$) {
              return new $APP.cljs.core.LazySeq(null, function($s__48021__$1$$, $vec__48026$$, $join_binding$$, $joins$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $memory__$1$$) {
                return function() {
                  for (;;) {
                    var $s__48023__$2_temp__5825__auto____$1$$ = $APP.cljs.core.seq($s__48023$$);
                    if ($s__48023__$2_temp__5825__auto____$1$$) {
                      if ($APP.cljs.core.chunked_seq_QMARK_($s__48023__$2_temp__5825__auto____$1$$)) {
                        var $JSCompiler_inline_result$jscomp$1002_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__48023__$2_temp__5825__auto____$1$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1002_c__5501__auto__$$), $b__48025_fact_binding$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
                        a: {
                          for (var $i__48024$$ = 0;;) {
                            if ($i__48024$$ < $size__5502__auto__$$) {
                              var $reduced$jscomp$inline_5269_vec__48029$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1002_c__5501__auto__$$, $i__48024$$), $fact_binding$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($reduced$jscomp$inline_5269_vec__48029$$, 0, null);
                              $reduced$jscomp$inline_5269_vec__48029$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($reduced$jscomp$inline_5269_vec__48029$$, 1, null);
                              $APP.cljs.core.chunk_append($b__48025_fact_binding$$, new $APP.cljs.core.PersistentArrayMap(null, 3, [cljs$cst$3070$join_bindings, $join_binding$$, cljs$cst$3071$fact_bindings, $fact_binding$$, $APP.cljs$cst$2039$result, $reduced$jscomp$inline_5269_vec__48029$$], null));
                              $i__48024$$ += 1;
                            } else {
                              $JSCompiler_inline_result$jscomp$1002_c__5501__auto__$$ = !0;
                              break a;
                            }
                          }
                          $JSCompiler_inline_result$jscomp$1002_c__5501__auto__$$ = void 0;
                        }
                        return $JSCompiler_inline_result$jscomp$1002_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__48025_fact_binding$$), $clara$rules$memory$iter__48020_$_iter__48022$$($APP.cljs.core.chunk_rest($s__48023__$2_temp__5825__auto____$1$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__48025_fact_binding$$), null);
                      }
                      $JSCompiler_inline_result$jscomp$1002_c__5501__auto__$$ = $APP.cljs.core.first($s__48023__$2_temp__5825__auto____$1$$);
                      $b__48025_fact_binding$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_inline_result$jscomp$1002_c__5501__auto__$$, 0, null);
                      $JSCompiler_inline_result$jscomp$1002_c__5501__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_inline_result$jscomp$1002_c__5501__auto__$$, 1, null);
                      return $APP.cljs.core.cons(new $APP.cljs.core.PersistentArrayMap(null, 3, [cljs$cst$3070$join_bindings, $join_binding$$, cljs$cst$3071$fact_bindings, $b__48025_fact_binding$$, $APP.cljs$cst$2039$result, $JSCompiler_inline_result$jscomp$1002_c__5501__auto__$$], null), $clara$rules$memory$iter__48020_$_iter__48022$$($APP.cljs.core.rest($s__48023__$2_temp__5825__auto____$1$$)));
                    }
                    return null;
                  }
                };
              }($s__48021__$1$$, $vec__48026$$, $join_binding$$, $joins$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $memory__$1$$), null, null);
            };
          }($s__48021__$1$$, $vec__48026$$, $join_binding$$, $fs__5500__auto__$$, $xs__6385__auto__$$, $iterys__5499__auto__$jscomp$46_temp__5825__auto__$$, $memory__$1$$);
          if ($fs__5500__auto__$$ = $APP.cljs.core.seq($iterys__5499__auto__$jscomp$46_temp__5825__auto__$$($fs__5500__auto__$$))) {
            return $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($fs__5500__auto__$$, $clara$rules$memory$iter__48020$$($APP.cljs.core.rest($s__48021__$1$$)));
          }
          $s__48021__$1$$ = $APP.cljs.core.rest($s__48021__$1$$);
        } else {
          return null;
        }
      }
    }, null, null);
  }($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.accum_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.PersistentArrayMap.EMPTY));
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$IMemoryReader$get_elements$arity$3 = function($memory$$, $node$$, $bindings$$) {
  return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.alpha_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.PersistentArrayMap.EMPTY), $bindings$$, $APP.cljs.core.PersistentVector.EMPTY);
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$IMemoryReader$get_rulebase$arity$1 = function($memory$$) {
  return this.rulebase;
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$IMemoryReader$get_accum_reduced_all$arity$3 = function($memory$$, $node$$, $join_bindings$$) {
  return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.accum_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.PersistentArrayMap.EMPTY), $join_bindings$$);
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$IMemoryReader$get_accum_reduced$arity$4 = function($memory$$, $node$$, $join_bindings$$, $fact_bindings$$) {
  return $APP.cljs.core.get_in.cljs$core$IFn$_invoke$arity$3(this.accum_memory, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $join_bindings$$, $fact_bindings$$], null), cljs$cst$3072$clara_DOT_rules_DOT_memory_SLASH_no_accum_reduced);
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$IMemoryReader$get_insertions_all$arity$2 = function($memory$$, $node$$) {
  return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.production_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.PersistentArrayMap.EMPTY);
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$IMemoryReader$get_insertions$arity$3 = function($memory$$, $node$$, $token$$) {
  return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.production_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.PersistentArrayMap.EMPTY), $token$$, $APP.cljs.core.PersistentVector.EMPTY);
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$IMemoryReader$get_elements_all$arity$2 = function($memory$$, $node$$) {
  return $APP.cljs.core.sequence.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.cat, $APP.cljs.core.vals($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.alpha_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.PersistentArrayMap.EMPTY)));
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$ITransientMemory$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$ITransientMemory$to_persistent_BANG_$arity$1 = function($G__48035_memory$$) {
  var $self__$$ = this;
  $G__48035_memory$$ = $self__$$.rulebase;
  var $G__48036$$ = $self__$$.activation_group_sort_fn, $G__48037$$ = $self__$$.activation_group_fn, $G__48038$$ = $self__$$.alphas_fn, $G__48039$$ = $APP.cljs.core.persistent_BANG_($self__$$.alpha_memory), $G__48040$$ = $APP.cljs.core.persistent_BANG_($self__$$.beta_memory), $G__48041$$ = $APP.cljs.core.persistent_BANG_($self__$$.accum_memory), $G__48042$$ = $APP.cljs.core.persistent_BANG_($self__$$.production_memory), $G__48043$$ = $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, 
  function() {
    return function $clara$rules$memory$iter__48044$$($s__48045$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (;;) {
          var $s__48045__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__48045$$);
          if ($s__48045__$2_temp__5825__auto__$$) {
            if ($APP.cljs.core.chunked_seq_QMARK_($s__48045__$2_temp__5825__auto__$$)) {
              var $JSCompiler_inline_result$jscomp$1003_c__5501__auto__$jscomp$90_val$$ = $APP.cljs.core.chunk_first($s__48045__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1003_c__5501__auto__$jscomp$90_val$$), $b__48047_key$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
              a: {
                for (var $i__48046$$ = 0;;) {
                  if ($i__48046$$ < $size__5502__auto__$$) {
                    var $val$jscomp$inline_5275_vec__48048$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1003_c__5501__auto__$jscomp$90_val$$, $i__48046$$), $key$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($val$jscomp$inline_5275_vec__48048$$, 0, null);
                    $val$jscomp$inline_5275_vec__48048$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($val$jscomp$inline_5275_vec__48048$$, 1, null);
                    $APP.cljs.core.chunk_append($b__48047_key$$, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$key$$, $val$jscomp$inline_5275_vec__48048$$], null));
                    $i__48046$$ += 1;
                  } else {
                    $JSCompiler_inline_result$jscomp$1003_c__5501__auto__$jscomp$90_val$$ = !0;
                    break a;
                  }
                }
                $JSCompiler_inline_result$jscomp$1003_c__5501__auto__$jscomp$90_val$$ = void 0;
              }
              return $JSCompiler_inline_result$jscomp$1003_c__5501__auto__$jscomp$90_val$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__48047_key$$), $clara$rules$memory$iter__48044$$($APP.cljs.core.chunk_rest($s__48045__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__48047_key$$), null);
            }
            $JSCompiler_inline_result$jscomp$1003_c__5501__auto__$jscomp$90_val$$ = $APP.cljs.core.first($s__48045__$2_temp__5825__auto__$$);
            $b__48047_key$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_inline_result$jscomp$1003_c__5501__auto__$jscomp$90_val$$, 0, null);
            $JSCompiler_inline_result$jscomp$1003_c__5501__auto__$jscomp$90_val$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_inline_result$jscomp$1003_c__5501__auto__$jscomp$90_val$$, 1, null);
            return $APP.cljs.core.cons(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$b__48047_key$$, $JSCompiler_inline_result$jscomp$1003_c__5501__auto__$jscomp$90_val$$], null), $clara$rules$memory$iter__48044$$($APP.cljs.core.rest($s__48045__$2_temp__5825__auto__$$)));
          }
          return null;
        }
      }, null, null);
    }($self__$$.activation_map);
  }());
  return clara.rules.memory.__GT_PersistentLocalMemory.cljs$core$IFn$_invoke$arity$9 ? clara.rules.memory.__GT_PersistentLocalMemory.cljs$core$IFn$_invoke$arity$9($G__48035_memory$$, $G__48036$$, $G__48037$$, $G__48038$$, $G__48039$$, $G__48040$$, $G__48041$$, $G__48042$$, $G__48043$$) : clara.rules.memory.__GT_PersistentLocalMemory.call(null, $G__48035_memory$$, $G__48036$$, $G__48037$$, $G__48038$$, $G__48039$$, $G__48040$$, $G__48041$$, $G__48042$$, $G__48043$$);
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$ITransientMemory$remove_tokens_BANG_$arity$4 = function($binding_token_map_memory$$, $node$$, $join_bindings$$, $removed_tokens_tokens$$) {
  $binding_token_map_memory$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.beta_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.PersistentArrayMap.EMPTY);
  var $filtered_tokens_previous_tokens_vec__48054$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3($binding_token_map_memory$$, $join_bindings$$, $APP.cljs.core.PersistentVector.EMPTY);
  $filtered_tokens_previous_tokens_vec__48054$$ = clara.rules.memory.remove_first_of_each($removed_tokens_tokens$$, $filtered_tokens_previous_tokens_vec__48054$$);
  $removed_tokens_tokens$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($filtered_tokens_previous_tokens_vec__48054$$, 0, null);
  $filtered_tokens_previous_tokens_vec__48054$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($filtered_tokens_previous_tokens_vec__48054$$, 1, null);
  $join_bindings$$ = $APP.cljs.core.seq($filtered_tokens_previous_tokens_vec__48054$$) ? $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($binding_token_map_memory$$, $join_bindings$$, $filtered_tokens_previous_tokens_vec__48054$$) : $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($binding_token_map_memory$$, $join_bindings$$);
  this.beta_memory = $APP.cljs.core.assoc_BANG_.cljs$core$IFn$_invoke$arity$3(this.beta_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $join_bindings$$);
  return $removed_tokens_tokens$$;
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$ITransientMemory$add_elements_BANG_$arity$4 = function($binding_element_map_memory$$, $node$$, $join_bindings$$, $elements$$) {
  $binding_element_map_memory$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.alpha_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.PersistentArrayMap.EMPTY);
  var $previous_elements$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3($binding_element_map_memory$$, $join_bindings$$, $APP.cljs.core.PersistentVector.EMPTY);
  return this.alpha_memory = $APP.cljs.core.assoc_BANG_.cljs$core$IFn$_invoke$arity$3(this.alpha_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($binding_element_map_memory$$, $join_bindings$$, $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($previous_elements$$, $elements$$)));
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$ITransientMemory$remove_elements_BANG_$arity$4 = function($binding_element_map$jscomp$1_memory$$, $node$$, $join_bindings$$, $elements$$) {
  $binding_element_map$jscomp$1_memory$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.alpha_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.PersistentArrayMap.EMPTY);
  var $filtered_elements_previous_elements$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3($binding_element_map$jscomp$1_memory$$, $join_bindings$$, $APP.cljs.core.PersistentVector.EMPTY);
  $filtered_elements_previous_elements$$ = clara.rules.memory.remove_first_of_each($elements$$, $filtered_elements_previous_elements$$);
  $elements$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($filtered_elements_previous_elements$$, 0, null);
  $filtered_elements_previous_elements$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($filtered_elements_previous_elements$$, 1, null);
  $join_bindings$$ = $APP.cljs.core.seq($filtered_elements_previous_elements$$) ? $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($binding_element_map$jscomp$1_memory$$, $join_bindings$$, $filtered_elements_previous_elements$$) : $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($binding_element_map$jscomp$1_memory$$, $join_bindings$$);
  this.alpha_memory = $APP.cljs.core.assoc_BANG_.cljs$core$IFn$_invoke$arity$3(this.alpha_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $join_bindings$$);
  return $elements$$;
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$ITransientMemory$remove_activations_BANG_$arity$3 = function($activation_group_memory$$, $current_activations_production$$, $removed_activations_to_remove$$) {
  $activation_group_memory$$ = this.activation_group_fn.cljs$core$IFn$_invoke$arity$1 ? this.activation_group_fn.cljs$core$IFn$_invoke$arity$1($current_activations_production$$) : this.activation_group_fn.call(null, $current_activations_production$$);
  $current_activations_production$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2(this.activation_map, $activation_group_memory$$);
  var $unremoved_activations_vec__48064$$ = clara.rules.memory.remove_first_of_each($removed_activations_to_remove$$, $current_activations_production$$);
  $removed_activations_to_remove$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($unremoved_activations_vec__48064$$, 0, null);
  $current_activations_production$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($unremoved_activations_vec__48064$$, 1, null);
  $unremoved_activations_vec__48064$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($unremoved_activations_vec__48064$$, 2, null);
  this.activation_map = $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.activation_map, $activation_group_memory$$, $current_activations_production$$);
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$removed_activations_to_remove$$, $unremoved_activations_vec__48064$$], null);
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$ITransientMemory$add_activations_BANG_$arity$3 = function($activation_group$jscomp$1_memory$$, $previous$jscomp$1_production$$, $new_activations$$) {
  $activation_group$jscomp$1_memory$$ = this.activation_group_fn.cljs$core$IFn$_invoke$arity$1 ? this.activation_group_fn.cljs$core$IFn$_invoke$arity$1($previous$jscomp$1_production$$) : this.activation_group_fn.call(null, $previous$jscomp$1_production$$);
  $previous$jscomp$1_production$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2(this.activation_map, $activation_group$jscomp$1_memory$$);
  return this.activation_map = $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.activation_map, $activation_group$jscomp$1_memory$$, $APP.cljs.core.truth_($previous$jscomp$1_production$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($previous$jscomp$1_production$$, $new_activations$$) : $new_activations$$);
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$ITransientMemory$add_tokens_BANG_$arity$4 = function($binding_token_map$jscomp$1_memory$$, $node$$, $join_bindings$$, $tokens$$) {
  $binding_token_map$jscomp$1_memory$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.beta_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.PersistentArrayMap.EMPTY);
  var $previous_tokens$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3($binding_token_map$jscomp$1_memory$$, $join_bindings$$, $APP.cljs.core.PersistentVector.EMPTY);
  return this.beta_memory = $APP.cljs.core.assoc_BANG_.cljs$core$IFn$_invoke$arity$3(this.beta_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($binding_token_map$jscomp$1_memory$$, $join_bindings$$, $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($previous_tokens$$, $tokens$$)));
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$ITransientMemory$clear_activations_BANG_$arity$1 = function($memory$$) {
  return this.activation_map = $APP.cljs.core.sorted_map_by(this.activation_group_sort_fn);
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$ITransientMemory$add_insertions_BANG_$arity$4 = function($memory$$, $node$$, $token$$, $facts$$) {
  $memory$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.production_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.PersistentArrayMap.EMPTY);
  return this.production_memory = $APP.cljs.core.assoc_BANG_.cljs$core$IFn$_invoke$arity$3(this.production_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$4($memory$$, $token$$, $APP.cljs.core.conj, $facts$$));
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$ITransientMemory$remove_accum_reduced_BANG_$arity$4 = function($memory$$, $node$$, $join_bindings$$, $fact_bindings$$) {
  $memory$$ = $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$);
  $node$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.accum_memory, $memory$$, $APP.cljs.core.PersistentArrayMap.EMPTY);
  $fact_bindings$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($node$$, $join_bindings$$), $fact_bindings$$);
  $join_bindings$$ = $APP.cljs.core.empty_QMARK_($fact_bindings$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($node$$, $join_bindings$$) : $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($node$$, $join_bindings$$, $fact_bindings$$);
  return this.accum_memory = $APP.cljs.core.empty_QMARK_($join_bindings$$) ? $APP.cljs.core.dissoc_BANG_.cljs$core$IFn$_invoke$arity$2(this.accum_memory, $memory$$) : $APP.cljs.core.assoc_BANG_.cljs$core$IFn$_invoke$arity$3(this.accum_memory, $memory$$, $join_bindings$$);
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$ITransientMemory$add_accum_reduced_BANG_$arity$5 = function($memory$$, $node$$, $join_bindings$$, $accum_result$$, $fact_bindings$$) {
  return this.accum_memory = $APP.cljs.core.assoc_BANG_.cljs$core$IFn$_invoke$arity$3(this.accum_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.assoc_in($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.accum_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.PersistentArrayMap.EMPTY), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$join_bindings$$, $fact_bindings$$], null), $accum_result$$));
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$ITransientMemory$remove_insertions_BANG_$arity$3 = function($G__48243$jscomp$inline_5293_G__48246$jscomp$inline_5296_memory$jscomp$80_results$jscomp$6_results$$, $node$$, $G__48245$jscomp$inline_5295_G__48248$jscomp$inline_5298_new_token_facts_map_to_remove$jscomp$inline_5280_tokens$$) {
  var $G__48244$jscomp$inline_5294_G__48247$jscomp$inline_5297_removed_insertion_map$jscomp$inline_5291_token_facts_map$jscomp$1_token_map$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.production_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.PersistentArrayMap.EMPTY);
  a: {
    $G__48243$jscomp$inline_5293_G__48246$jscomp$inline_5296_memory$jscomp$80_results$jscomp$6_results$$ = $APP.cljs.core.transient$($APP.cljs.core.PersistentArrayMap.EMPTY);
    for ($G__48244$jscomp$inline_5294_G__48247$jscomp$inline_5297_removed_insertion_map$jscomp$inline_5291_token_facts_map$jscomp$1_token_map$$ = $APP.cljs.core.transient$($G__48244$jscomp$inline_5294_G__48247$jscomp$inline_5297_removed_insertion_map$jscomp$inline_5291_token_facts_map$jscomp$1_token_map$$);;) {
      var $head_token$jscomp$inline_5282_temp__5823__auto__$$ = $APP.cljs.core.first($G__48245$jscomp$inline_5295_G__48248$jscomp$inline_5298_new_token_facts_map_to_remove$jscomp$inline_5280_tokens$$);
      if ($APP.cljs.core.truth_($head_token$jscomp$inline_5282_temp__5823__auto__$$)) {
        var $first__48081$jscomp$inline_5287_removed_facts$jscomp$inline_5289_temp__5823__auto____$1$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($G__48244$jscomp$inline_5294_G__48247$jscomp$inline_5297_removed_insertion_map$jscomp$inline_5291_token_facts_map$jscomp$1_token_map$$, $head_token$jscomp$inline_5282_temp__5823__auto__$$);
        if ($APP.cljs.core.truth_($first__48081$jscomp$inline_5287_removed_facts$jscomp$inline_5289_temp__5823__auto____$1$$)) {
          var $prev_token_result$jscomp$inline_5292_remaining_facts$jscomp$inline_5290_seq__48080$jscomp$inline_5286_seq__48080__$1$$ = $APP.cljs.core.seq($first__48081$jscomp$inline_5287_removed_facts$jscomp$inline_5289_temp__5823__auto____$1$$);
          $first__48081$jscomp$inline_5287_removed_facts$jscomp$inline_5289_temp__5823__auto____$1$$ = $APP.cljs.core.first($prev_token_result$jscomp$inline_5292_remaining_facts$jscomp$inline_5290_seq__48080$jscomp$inline_5286_seq__48080__$1$$);
          $prev_token_result$jscomp$inline_5292_remaining_facts$jscomp$inline_5290_seq__48080$jscomp$inline_5286_seq__48080__$1$$ = $APP.cljs.core.next($prev_token_result$jscomp$inline_5292_remaining_facts$jscomp$inline_5290_seq__48080$jscomp$inline_5286_seq__48080__$1$$);
          $G__48244$jscomp$inline_5294_G__48247$jscomp$inline_5297_removed_insertion_map$jscomp$inline_5291_token_facts_map$jscomp$1_token_map$$ = $APP.cljs.core.truth_($APP.cljs.core.not_empty($prev_token_result$jscomp$inline_5292_remaining_facts$jscomp$inline_5290_seq__48080$jscomp$inline_5286_seq__48080__$1$$)) ? $APP.cljs.core.assoc_BANG_.cljs$core$IFn$_invoke$arity$3($G__48244$jscomp$inline_5294_G__48247$jscomp$inline_5297_removed_insertion_map$jscomp$inline_5291_token_facts_map$jscomp$1_token_map$$, 
          $head_token$jscomp$inline_5282_temp__5823__auto__$$, $prev_token_result$jscomp$inline_5292_remaining_facts$jscomp$inline_5290_seq__48080$jscomp$inline_5286_seq__48080__$1$$) : $APP.cljs.core.dissoc_BANG_.cljs$core$IFn$_invoke$arity$2($G__48244$jscomp$inline_5294_G__48247$jscomp$inline_5297_removed_insertion_map$jscomp$inline_5291_token_facts_map$jscomp$1_token_map$$, $head_token$jscomp$inline_5282_temp__5823__auto__$$);
          $prev_token_result$jscomp$inline_5292_remaining_facts$jscomp$inline_5290_seq__48080$jscomp$inline_5286_seq__48080__$1$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3($G__48243$jscomp$inline_5293_G__48246$jscomp$inline_5296_memory$jscomp$80_results$jscomp$6_results$$, $head_token$jscomp$inline_5282_temp__5823__auto__$$, $APP.cljs.core.PersistentVector.EMPTY);
          $G__48243$jscomp$inline_5293_G__48246$jscomp$inline_5296_memory$jscomp$80_results$jscomp$6_results$$ = $APP.cljs.core.assoc_BANG_.cljs$core$IFn$_invoke$arity$3($G__48243$jscomp$inline_5293_G__48246$jscomp$inline_5296_memory$jscomp$80_results$jscomp$6_results$$, $head_token$jscomp$inline_5282_temp__5823__auto__$$, $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($prev_token_result$jscomp$inline_5292_remaining_facts$jscomp$inline_5290_seq__48080$jscomp$inline_5286_seq__48080__$1$$, $first__48081$jscomp$inline_5287_removed_facts$jscomp$inline_5289_temp__5823__auto____$1$$));
          $G__48245$jscomp$inline_5295_G__48248$jscomp$inline_5298_new_token_facts_map_to_remove$jscomp$inline_5280_tokens$$ = $APP.cljs.core.rest($G__48245$jscomp$inline_5295_G__48248$jscomp$inline_5298_new_token_facts_map_to_remove$jscomp$inline_5280_tokens$$);
        } else {
          $G__48245$jscomp$inline_5295_G__48248$jscomp$inline_5298_new_token_facts_map_to_remove$jscomp$inline_5280_tokens$$ = $APP.cljs.core.rest($G__48245$jscomp$inline_5295_G__48248$jscomp$inline_5298_new_token_facts_map_to_remove$jscomp$inline_5280_tokens$$);
        }
      } else {
        $G__48245$jscomp$inline_5295_G__48248$jscomp$inline_5298_new_token_facts_map_to_remove$jscomp$inline_5280_tokens$$ = new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.persistent_BANG_($G__48243$jscomp$inline_5293_G__48246$jscomp$inline_5296_memory$jscomp$80_results$jscomp$6_results$$), $APP.cljs.core.persistent_BANG_($G__48244$jscomp$inline_5294_G__48247$jscomp$inline_5297_removed_insertion_map$jscomp$inline_5291_token_facts_map$jscomp$1_token_map$$)], 
        null);
        break a;
      }
    }
    $G__48245$jscomp$inline_5295_G__48248$jscomp$inline_5298_new_token_facts_map_to_remove$jscomp$inline_5280_tokens$$ = void 0;
  }
  $G__48243$jscomp$inline_5293_G__48246$jscomp$inline_5296_memory$jscomp$80_results$jscomp$6_results$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__48245$jscomp$inline_5295_G__48248$jscomp$inline_5298_new_token_facts_map_to_remove$jscomp$inline_5280_tokens$$, 0, null);
  $G__48245$jscomp$inline_5295_G__48248$jscomp$inline_5298_new_token_facts_map_to_remove$jscomp$inline_5280_tokens$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__48245$jscomp$inline_5295_G__48248$jscomp$inline_5298_new_token_facts_map_to_remove$jscomp$inline_5280_tokens$$, 1, null);
  this.production_memory = $APP.cljs.core.truth_($APP.cljs.core.not_empty($G__48245$jscomp$inline_5295_G__48248$jscomp$inline_5298_new_token_facts_map_to_remove$jscomp$inline_5280_tokens$$)) ? $APP.cljs.core.assoc_BANG_.cljs$core$IFn$_invoke$arity$3(this.production_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $G__48245$jscomp$inline_5295_G__48248$jscomp$inline_5298_new_token_facts_map_to_remove$jscomp$inline_5280_tokens$$) : $APP.cljs.core.dissoc_BANG_.cljs$core$IFn$_invoke$arity$2(this.production_memory, 
  $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$));
  return $G__48243$jscomp$inline_5293_G__48246$jscomp$inline_5296_memory$jscomp$80_results$jscomp$6_results$$;
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$ITransientMemory$next_activation_group$arity$1 = function($memory$$) {
  $memory$$ = $APP.cljs.core.first(this.activation_map);
  var $key$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($memory$$, 0, null);
  $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($memory$$, 1, null);
  return $key$$;
};
clara.rules.memory.TransientLocalMemory.prototype.clara$rules$memory$ITransientMemory$pop_activation_BANG_$arity$1 = function($key$jscomp$238_memory$$) {
  if ($APP.cljs.core.empty_QMARK_(this.activation_map)) {
    return null;
  }
  var $value$$ = $APP.cljs.core.first(this.activation_map);
  $key$jscomp$238_memory$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($value$$, 0, null);
  $value$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($value$$, 1, null);
  var $remaining$$ = $APP.cljs.core.rest($value$$);
  this.activation_map = $APP.cljs.core.empty_QMARK_($remaining$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.activation_map, $key$jscomp$238_memory$$) : $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.activation_map, $key$jscomp$238_memory$$, $remaining$$);
  return $APP.cljs.core.first($value$$);
};
clara.rules.memory.TransientLocalMemory.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 9, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3073$rulebase, cljs$cst$3074$activation_group_sort_fn, cljs$cst$3075$activation_group_fn, cljs$cst$3076$alphas_fn, $APP.cljs.core.with_meta(cljs$cst$3077$alpha_memory, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$1981$unsynchronized_mutable, !0], null)), $APP.cljs.core.with_meta(cljs$cst$3078$beta_memory, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$1981$unsynchronized_mutable, 
  !0], null)), $APP.cljs.core.with_meta(cljs$cst$3079$accum_memory, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$1981$unsynchronized_mutable, !0], null)), $APP.cljs.core.with_meta(cljs$cst$3080$production_memory, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$1981$unsynchronized_mutable, !0], null)), $APP.cljs.core.with_meta(cljs$cst$3081$activation_map, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$1981$unsynchronized_mutable, !0], null))], null);
};
clara.rules.memory.TransientLocalMemory.cljs$lang$type = !0;
clara.rules.memory.TransientLocalMemory.cljs$lang$ctorStr = "clara.rules.memory/TransientLocalMemory";
clara.rules.memory.TransientLocalMemory.cljs$lang$ctorPrWriter = function($this__5310__auto__$$, $writer__5311__auto__$$, $opt__5312__auto__$$) {
  return $APP.cljs.core._write($writer__5311__auto__$$, "clara.rules.memory/TransientLocalMemory");
};
clara.rules.memory.__GT_TransientLocalMemory = function($rulebase$$, $activation_group_sort_fn$$, $activation_group_fn$$, $alphas_fn$$, $alpha_memory$$, $beta_memory$$, $accum_memory$$, $production_memory$$, $activation_map$$) {
  return new clara.rules.memory.TransientLocalMemory($rulebase$$, $activation_group_sort_fn$$, $activation_group_fn$$, $alphas_fn$$, $alpha_memory$$, $beta_memory$$, $accum_memory$$, $production_memory$$, $activation_map$$);
};
clara.rules.memory.PersistentLocalMemory = function($rulebase$$, $activation_group_sort_fn$$, $activation_group_fn$$, $alphas_fn$$, $alpha_memory$$, $beta_memory$$, $accum_memory$$, $production_memory$$, $activation_map$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.rulebase = $rulebase$$;
  this.activation_group_sort_fn = $activation_group_sort_fn$$;
  this.activation_group_fn = $activation_group_fn$$;
  this.alphas_fn = $alphas_fn$$;
  this.alpha_memory = $alpha_memory$$;
  this.beta_memory = $beta_memory$$;
  this.accum_memory = $accum_memory$$;
  this.production_memory = $production_memory$$;
  this.activation_map = $activation_map$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
clara.rules.memory.PersistentLocalMemory.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
clara.rules.memory.PersistentLocalMemory.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k48093$$, $else__5326__auto__$$) {
  switch($k48093$$ instanceof $APP.cljs.core.Keyword ? $k48093$$.fqn : null) {
    case "rulebase":
      return this.rulebase;
    case "activation-group-sort-fn":
      return this.activation_group_sort_fn;
    case "activation-group-fn":
      return this.activation_group_fn;
    case "alphas-fn":
      return this.alphas_fn;
    case "alpha-memory":
      return this.alpha_memory;
    case "beta-memory":
      return this.beta_memory;
    case "accum-memory":
      return this.accum_memory;
    case "production-memory":
      return this.production_memory;
    case "activation-map":
      return this.activation_map;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k48093$$, $else__5326__auto__$$);
  }
};
clara.rules.memory.PersistentLocalMemory.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__48099_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__48099_v__5348__auto__$$, 0, null);
    $p__48099_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__48099_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__48099_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__48099_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
clara.rules.memory.PersistentLocalMemory.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#clara.rules.memory.PersistentLocalMemory{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 9, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3082$rulebase, this.rulebase], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3083$activation_group_sort_fn, 
  this.activation_group_sort_fn], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3084$activation_group_fn, this.activation_group_fn], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3085$alphas_fn, this.alphas_fn], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3086$alpha_memory, this.alpha_memory], null), new $APP.cljs.core.PersistentVector(null, 
  2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3087$beta_memory, this.beta_memory], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3088$accum_memory, this.accum_memory], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3089$production_memory, this.production_memory], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
  [cljs$cst$3090$activation_map, this.activation_map], null)], null), this.__extmap));
};
clara.rules.memory.PersistentLocalMemory.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__48092$$) {
  return new $APP.cljs.core.RecordIter(0, this, 9, new $APP.cljs.core.PersistentVector(null, 9, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3082$rulebase, cljs$cst$3083$activation_group_sort_fn, cljs$cst$3084$activation_group_fn, cljs$cst$3085$alphas_fn, cljs$cst$3086$alpha_memory, cljs$cst$3087$beta_memory, cljs$cst$3088$accum_memory, cljs$cst$3089$production_memory, cljs$cst$3090$activation_map], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : 
  $APP.cljs.core.nil_iter());
};
clara.rules.memory.PersistentLocalMemory.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
clara.rules.memory.PersistentLocalMemory.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new clara.rules.memory.PersistentLocalMemory(this.rulebase, this.activation_group_sort_fn, this.activation_group_fn, this.alphas_fn, this.alpha_memory, this.beta_memory, this.accum_memory, this.production_memory, this.activation_map, this.__meta, this.__extmap, this.__hash);
};
clara.rules.memory.PersistentLocalMemory.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 9 + $APP.cljs.core.count(this.__extmap);
};
clara.rules.memory.PersistentLocalMemory.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$91_h__5134__auto____$1$jscomp$91_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$91_h__5134__auto____$1$jscomp$91_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$91_h__5134__auto____$1$jscomp$91_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$91_h__5134__auto____$1$jscomp$91_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$91_h__5134__auto____$1$jscomp$91_this__5319__auto__$$ = -1418154411 ^ $APP.cljs.core.hash_unordered_coll(this);
};
clara.rules.memory.PersistentLocalMemory.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this48094$$, $other48095$$) {
  return $other48095$$ != null && this.constructor === $other48095$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.rulebase, $other48095$$.rulebase) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.activation_group_sort_fn, $other48095$$.activation_group_sort_fn) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.activation_group_fn, $other48095$$.activation_group_fn) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.alphas_fn, $other48095$$.alphas_fn) && 
  $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.alpha_memory, $other48095$$.alpha_memory) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.beta_memory, $other48095$$.beta_memory) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.accum_memory, $other48095$$.accum_memory) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.production_memory, $other48095$$.production_memory) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.activation_map, $other48095$$.activation_map) && 
  $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other48095$$.__extmap);
};
clara.rules.memory.PersistentLocalMemory.prototype.clara$rules$memory$IPersistentMemory$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.memory.PersistentLocalMemory.prototype.clara$rules$memory$IPersistentMemory$to_transient$arity$1 = function($activation_map__$1_memory$$) {
  $activation_map__$1_memory$$ = $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($treemap$$, $activations$$) {
    var $activation_group$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($activations$$, 0, null);
    $activations$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($activations$$, 1, null);
    var $previous$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($treemap$$, $activation_group$$);
    return $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($treemap$$, $activation_group$$, $APP.cljs.core.truth_($previous$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($previous$$, $activations$$) : $activations$$);
  }, $APP.cljs.core.sorted_map_by(this.activation_group_sort_fn), this.activation_map);
  return new clara.rules.memory.TransientLocalMemory(this.rulebase, this.activation_group_sort_fn, this.activation_group_fn, this.alphas_fn, $APP.cljs.core.transient$(this.alpha_memory), $APP.cljs.core.transient$(this.beta_memory), $APP.cljs.core.transient$(this.accum_memory), $APP.cljs.core.transient$(this.production_memory), $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($treemap$$, $activations$$) {
    var $activation_group$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($activations$$, 0, null);
    $activations$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($activations$$, 1, null);
    var $previous$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($treemap$$, $activation_group$$);
    return $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($treemap$$, $activation_group$$, $APP.cljs.core.truth_($previous$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($previous$$, $activations$$) : $activations$$);
  }, $APP.cljs.core.sorted_map_by(this.activation_group_sort_fn), $activation_map__$1_memory$$));
};
clara.rules.memory.PersistentLocalMemory.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 9, [cljs$cst$3085$alphas_fn, null, cljs$cst$3082$rulebase, null, cljs$cst$3087$beta_memory, null, cljs$cst$3088$accum_memory, null, cljs$cst$3084$activation_group_fn, null, cljs$cst$3089$production_memory, null, cljs$cst$3083$activation_group_sort_fn, null, cljs$cst$3090$activation_map, null, cljs$cst$3086$alpha_memory, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, 
  this), this.__meta), $k__5334__auto__$$) : new clara.rules.memory.PersistentLocalMemory(this.rulebase, this.activation_group_sort_fn, this.activation_group_fn, this.alphas_fn, this.alpha_memory, this.beta_memory, this.accum_memory, this.production_memory, this.activation_map, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
clara.rules.memory.PersistentLocalMemory.prototype.clara$rules$memory$IMemoryReader$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.memory.PersistentLocalMemory.prototype.clara$rules$memory$IMemoryReader$get_tokens_all$arity$2 = function($memory$$, $node$$) {
  return $APP.cljs.core.sequence.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.cat, $APP.cljs.core.vals($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.beta_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.PersistentArrayMap.EMPTY)));
};
clara.rules.memory.PersistentLocalMemory.prototype.clara$rules$memory$IMemoryReader$get_tokens$arity$3 = function($memory$$, $node$$, $bindings$$) {
  return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.beta_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.PersistentArrayMap.EMPTY), $bindings$$, $APP.cljs.core.PersistentVector.EMPTY);
};
clara.rules.memory.PersistentLocalMemory.prototype.clara$rules$memory$IMemoryReader$get_activations$arity$1 = function($memory$$) {
  return $APP.cljs.core.apply.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.concat, $APP.cljs.core.vals(this.activation_map));
};
clara.rules.memory.PersistentLocalMemory.prototype.clara$rules$memory$IMemoryReader$get_alphas_fn$arity$1 = function($memory$$) {
  return this.alphas_fn;
};
clara.rules.memory.PersistentLocalMemory.prototype.clara$rules$memory$IMemoryReader$get_accum_reduced_complete$arity$2 = function($memory$$, $node$$) {
  var $memory__$1$$ = this;
  return function $clara$rules$memory$iter__48116$$($s__48117$$) {
    return new $APP.cljs.core.LazySeq(null, function() {
      for (var $s__48117__$1$$ = $s__48117$$;;) {
        var $iterys__5499__auto__$jscomp$47_temp__5825__auto__$$ = $APP.cljs.core.seq($s__48117__$1$$);
        if ($iterys__5499__auto__$jscomp$47_temp__5825__auto__$$) {
          var $xs__6385__auto__$$ = $iterys__5499__auto__$jscomp$47_temp__5825__auto__$$, $vec__48122$$ = $APP.cljs.core.first($xs__6385__auto__$$), $join_binding$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__48122$$, 0, null), $fs__5500__auto__$jscomp$47_joins$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__48122$$, 1, null);
          $iterys__5499__auto__$jscomp$47_temp__5825__auto__$$ = function($s__48117__$1$$, $vec__48122$$, $join_binding$$, $joins$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $memory__$1$$) {
            return function $clara$rules$memory$iter__48116_$_iter__48118$$($s__48119$$) {
              return new $APP.cljs.core.LazySeq(null, function($s__48117__$1$$, $vec__48122$$, $join_binding$$, $joins$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $memory__$1$$) {
                return function() {
                  for (;;) {
                    var $s__48119__$2_temp__5825__auto____$1$$ = $APP.cljs.core.seq($s__48119$$);
                    if ($s__48119__$2_temp__5825__auto____$1$$) {
                      if ($APP.cljs.core.chunked_seq_QMARK_($s__48119__$2_temp__5825__auto____$1$$)) {
                        var $JSCompiler_inline_result$jscomp$1004_c__5501__auto__$jscomp$91_reduced$$ = $APP.cljs.core.chunk_first($s__48119__$2_temp__5825__auto____$1$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1004_c__5501__auto__$jscomp$91_reduced$$), $b__48121_fact_binding$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
                        a: {
                          for (var $i__48120$$ = 0;;) {
                            if ($i__48120$$ < $size__5502__auto__$$) {
                              var $reduced$jscomp$inline_5303_vec__48125$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1004_c__5501__auto__$jscomp$91_reduced$$, $i__48120$$), $fact_binding$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($reduced$jscomp$inline_5303_vec__48125$$, 0, null);
                              $reduced$jscomp$inline_5303_vec__48125$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($reduced$jscomp$inline_5303_vec__48125$$, 1, null);
                              $APP.cljs.core.chunk_append($b__48121_fact_binding$$, new $APP.cljs.core.PersistentArrayMap(null, 3, [cljs$cst$3070$join_bindings, $join_binding$$, cljs$cst$3071$fact_bindings, $fact_binding$$, $APP.cljs$cst$2039$result, $reduced$jscomp$inline_5303_vec__48125$$], null));
                              $i__48120$$ += 1;
                            } else {
                              $JSCompiler_inline_result$jscomp$1004_c__5501__auto__$jscomp$91_reduced$$ = !0;
                              break a;
                            }
                          }
                          $JSCompiler_inline_result$jscomp$1004_c__5501__auto__$jscomp$91_reduced$$ = void 0;
                        }
                        return $JSCompiler_inline_result$jscomp$1004_c__5501__auto__$jscomp$91_reduced$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__48121_fact_binding$$), $clara$rules$memory$iter__48116_$_iter__48118$$($APP.cljs.core.chunk_rest($s__48119__$2_temp__5825__auto____$1$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__48121_fact_binding$$), null);
                      }
                      $JSCompiler_inline_result$jscomp$1004_c__5501__auto__$jscomp$91_reduced$$ = $APP.cljs.core.first($s__48119__$2_temp__5825__auto____$1$$);
                      $b__48121_fact_binding$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_inline_result$jscomp$1004_c__5501__auto__$jscomp$91_reduced$$, 0, null);
                      $JSCompiler_inline_result$jscomp$1004_c__5501__auto__$jscomp$91_reduced$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_inline_result$jscomp$1004_c__5501__auto__$jscomp$91_reduced$$, 1, null);
                      return $APP.cljs.core.cons(new $APP.cljs.core.PersistentArrayMap(null, 3, [cljs$cst$3070$join_bindings, $join_binding$$, cljs$cst$3071$fact_bindings, $b__48121_fact_binding$$, $APP.cljs$cst$2039$result, $JSCompiler_inline_result$jscomp$1004_c__5501__auto__$jscomp$91_reduced$$], null), $clara$rules$memory$iter__48116_$_iter__48118$$($APP.cljs.core.rest($s__48119__$2_temp__5825__auto____$1$$)));
                    }
                    return null;
                  }
                };
              }($s__48117__$1$$, $vec__48122$$, $join_binding$$, $joins$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $memory__$1$$), null, null);
            };
          }($s__48117__$1$$, $vec__48122$$, $join_binding$$, $fs__5500__auto__$jscomp$47_joins$$, $xs__6385__auto__$$, $iterys__5499__auto__$jscomp$47_temp__5825__auto__$$, $memory__$1$$);
          if ($fs__5500__auto__$jscomp$47_joins$$ = $APP.cljs.core.seq($iterys__5499__auto__$jscomp$47_temp__5825__auto__$$($fs__5500__auto__$jscomp$47_joins$$))) {
            return $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($fs__5500__auto__$jscomp$47_joins$$, $clara$rules$memory$iter__48116$$($APP.cljs.core.rest($s__48117__$1$$)));
          }
          $s__48117__$1$$ = $APP.cljs.core.rest($s__48117__$1$$);
        } else {
          return null;
        }
      }
    }, null, null);
  }($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.accum_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.PersistentArrayMap.EMPTY));
};
clara.rules.memory.PersistentLocalMemory.prototype.clara$rules$memory$IMemoryReader$get_elements$arity$3 = function($memory$$, $node$$, $bindings$$) {
  return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.alpha_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.PersistentArrayMap.EMPTY), $bindings$$, $APP.cljs.core.PersistentVector.EMPTY);
};
clara.rules.memory.PersistentLocalMemory.prototype.clara$rules$memory$IMemoryReader$get_rulebase$arity$1 = function($memory$$) {
  return this.rulebase;
};
clara.rules.memory.PersistentLocalMemory.prototype.clara$rules$memory$IMemoryReader$get_accum_reduced_all$arity$3 = function($memory$$, $node$$, $join_bindings$$) {
  return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.accum_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.PersistentArrayMap.EMPTY), $join_bindings$$);
};
clara.rules.memory.PersistentLocalMemory.prototype.clara$rules$memory$IMemoryReader$get_accum_reduced$arity$4 = function($memory$$, $node$$, $join_bindings$$, $fact_bindings$$) {
  return $APP.cljs.core.get_in.cljs$core$IFn$_invoke$arity$3(this.accum_memory, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $join_bindings$$, $fact_bindings$$], null), cljs$cst$3072$clara_DOT_rules_DOT_memory_SLASH_no_accum_reduced);
};
clara.rules.memory.PersistentLocalMemory.prototype.clara$rules$memory$IMemoryReader$get_insertions_all$arity$2 = function($memory$$, $node$$) {
  return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.production_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.PersistentArrayMap.EMPTY);
};
clara.rules.memory.PersistentLocalMemory.prototype.clara$rules$memory$IMemoryReader$get_insertions$arity$3 = function($memory$$, $node$$, $token$$) {
  return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.production_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.PersistentArrayMap.EMPTY), $token$$, $APP.cljs.core.PersistentVector.EMPTY);
};
clara.rules.memory.PersistentLocalMemory.prototype.clara$rules$memory$IMemoryReader$get_elements_all$arity$2 = function($memory$$, $node$$) {
  return $APP.cljs.core.sequence.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.cat, $APP.cljs.core.vals($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.alpha_memory, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $APP.cljs.core.PersistentArrayMap.EMPTY)));
};
clara.rules.memory.PersistentLocalMemory.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k48093$$) {
  switch($k48093$$ instanceof $APP.cljs.core.Keyword ? $k48093$$.fqn : null) {
    case "rulebase":
    case "activation-group-sort-fn":
    case "activation-group-fn":
    case "alphas-fn":
    case "alpha-memory":
    case "beta-memory":
    case "accum-memory":
    case "production-memory":
    case "activation-map":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k48093$$);
  }
};
clara.rules.memory.PersistentLocalMemory.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__48132_this__5331__auto__$$, $k__5332__auto__$$, $G__48092$$) {
  $pred__48132_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__48132_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__48132_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3082$rulebase, $k__5332__auto__$$) : $pred__48132_this__5331__auto__$$.call(null, cljs$cst$3082$rulebase, $k__5332__auto__$$)) ? new clara.rules.memory.PersistentLocalMemory($G__48092$$, this.activation_group_sort_fn, this.activation_group_fn, this.alphas_fn, this.alpha_memory, this.beta_memory, this.accum_memory, this.production_memory, 
  this.activation_map, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__48132_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__48132_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3083$activation_group_sort_fn, $k__5332__auto__$$) : $pred__48132_this__5331__auto__$$.call(null, cljs$cst$3083$activation_group_sort_fn, $k__5332__auto__$$)) ? new clara.rules.memory.PersistentLocalMemory(this.rulebase, $G__48092$$, this.activation_group_fn, this.alphas_fn, this.alpha_memory, 
  this.beta_memory, this.accum_memory, this.production_memory, this.activation_map, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__48132_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__48132_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3084$activation_group_fn, $k__5332__auto__$$) : $pred__48132_this__5331__auto__$$.call(null, cljs$cst$3084$activation_group_fn, $k__5332__auto__$$)) ? new clara.rules.memory.PersistentLocalMemory(this.rulebase, this.activation_group_sort_fn, 
  $G__48092$$, this.alphas_fn, this.alpha_memory, this.beta_memory, this.accum_memory, this.production_memory, this.activation_map, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__48132_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__48132_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3085$alphas_fn, $k__5332__auto__$$) : $pred__48132_this__5331__auto__$$.call(null, cljs$cst$3085$alphas_fn, $k__5332__auto__$$)) ? new clara.rules.memory.PersistentLocalMemory(this.rulebase, 
  this.activation_group_sort_fn, this.activation_group_fn, $G__48092$$, this.alpha_memory, this.beta_memory, this.accum_memory, this.production_memory, this.activation_map, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__48132_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__48132_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3086$alpha_memory, $k__5332__auto__$$) : $pred__48132_this__5331__auto__$$.call(null, cljs$cst$3086$alpha_memory, $k__5332__auto__$$)) ? 
  new clara.rules.memory.PersistentLocalMemory(this.rulebase, this.activation_group_sort_fn, this.activation_group_fn, this.alphas_fn, $G__48092$$, this.beta_memory, this.accum_memory, this.production_memory, this.activation_map, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__48132_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__48132_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3087$beta_memory, $k__5332__auto__$$) : $pred__48132_this__5331__auto__$$.call(null, 
  cljs$cst$3087$beta_memory, $k__5332__auto__$$)) ? new clara.rules.memory.PersistentLocalMemory(this.rulebase, this.activation_group_sort_fn, this.activation_group_fn, this.alphas_fn, this.alpha_memory, $G__48092$$, this.accum_memory, this.production_memory, this.activation_map, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__48132_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__48132_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3088$accum_memory, $k__5332__auto__$$) : 
  $pred__48132_this__5331__auto__$$.call(null, cljs$cst$3088$accum_memory, $k__5332__auto__$$)) ? new clara.rules.memory.PersistentLocalMemory(this.rulebase, this.activation_group_sort_fn, this.activation_group_fn, this.alphas_fn, this.alpha_memory, this.beta_memory, $G__48092$$, this.production_memory, this.activation_map, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__48132_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__48132_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3089$production_memory, 
  $k__5332__auto__$$) : $pred__48132_this__5331__auto__$$.call(null, cljs$cst$3089$production_memory, $k__5332__auto__$$)) ? new clara.rules.memory.PersistentLocalMemory(this.rulebase, this.activation_group_sort_fn, this.activation_group_fn, this.alphas_fn, this.alpha_memory, this.beta_memory, this.accum_memory, $G__48092$$, this.activation_map, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__48132_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__48132_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3090$activation_map, 
  $k__5332__auto__$$) : $pred__48132_this__5331__auto__$$.call(null, cljs$cst$3090$activation_map, $k__5332__auto__$$)) ? new clara.rules.memory.PersistentLocalMemory(this.rulebase, this.activation_group_sort_fn, this.activation_group_fn, this.alphas_fn, this.alpha_memory, this.beta_memory, this.accum_memory, this.production_memory, $G__48092$$, this.__meta, this.__extmap, null) : new clara.rules.memory.PersistentLocalMemory(this.rulebase, this.activation_group_sort_fn, this.activation_group_fn, 
  this.alphas_fn, this.alpha_memory, this.beta_memory, this.accum_memory, this.production_memory, this.activation_map, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__48092$$), null);
};
clara.rules.memory.PersistentLocalMemory.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 9, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry(cljs$cst$3082$rulebase, this.rulebase, null), new $APP.cljs.core.MapEntry(cljs$cst$3083$activation_group_sort_fn, this.activation_group_sort_fn, null), new $APP.cljs.core.MapEntry(cljs$cst$3084$activation_group_fn, this.activation_group_fn, null), new $APP.cljs.core.MapEntry(cljs$cst$3085$alphas_fn, 
  this.alphas_fn, null), new $APP.cljs.core.MapEntry(cljs$cst$3086$alpha_memory, this.alpha_memory, null), new $APP.cljs.core.MapEntry(cljs$cst$3087$beta_memory, this.beta_memory, null), new $APP.cljs.core.MapEntry(cljs$cst$3088$accum_memory, this.accum_memory, null), new $APP.cljs.core.MapEntry(cljs$cst$3089$production_memory, this.production_memory, null), new $APP.cljs.core.MapEntry(cljs$cst$3090$activation_map, this.activation_map, null)], null), this.__extmap));
};
clara.rules.memory.PersistentLocalMemory.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__48092$$) {
  return new clara.rules.memory.PersistentLocalMemory(this.rulebase, this.activation_group_sort_fn, this.activation_group_fn, this.alphas_fn, this.alpha_memory, this.beta_memory, this.accum_memory, this.production_memory, this.activation_map, $G__48092$$, this.__extmap, this.__hash);
};
clara.rules.memory.PersistentLocalMemory.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
clara.rules.memory.PersistentLocalMemory.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 9, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3073$rulebase, cljs$cst$3074$activation_group_sort_fn, cljs$cst$3075$activation_group_fn, cljs$cst$3076$alphas_fn, cljs$cst$3077$alpha_memory, cljs$cst$3078$beta_memory, cljs$cst$3079$accum_memory, cljs$cst$3080$production_memory, cljs$cst$3081$activation_map], null);
};
clara.rules.memory.PersistentLocalMemory.cljs$lang$type = !0;
clara.rules.memory.PersistentLocalMemory.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "clara.rules.memory/PersistentLocalMemory", null, 1, null);
};
clara.rules.memory.PersistentLocalMemory.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "clara.rules.memory/PersistentLocalMemory");
};
clara.rules.memory.__GT_PersistentLocalMemory = function($rulebase$$, $activation_group_sort_fn$$, $activation_group_fn$$, $alphas_fn$$, $alpha_memory$$, $beta_memory$$, $accum_memory$$, $production_memory$$, $activation_map$$) {
  return new clara.rules.memory.PersistentLocalMemory($rulebase$$, $activation_group_sort_fn$$, $activation_group_fn$$, $alphas_fn$$, $alpha_memory$$, $beta_memory$$, $accum_memory$$, $production_memory$$, $activation_map$$, null, null, null);
};
clara.rules.memory.map__GT_PersistentLocalMemory = function($G__48096$$) {
  var $G__48139$jscomp$inline_5306_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__48096$$, cljs$cst$3082$rulebase, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$3083$activation_group_sort_fn, cljs$cst$3084$activation_group_fn, cljs$cst$3085$alphas_fn, cljs$cst$3086$alpha_memory, cljs$cst$3087$beta_memory, cljs$cst$3088$accum_memory, cljs$cst$3089$production_memory, cljs$cst$3090$activation_map], 0));
  $G__48139$jscomp$inline_5306_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__48096$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__48139$jscomp$inline_5306_extmap__5365__auto__$$) : $G__48139$jscomp$inline_5306_extmap__5365__auto__$$;
  return new clara.rules.memory.PersistentLocalMemory(cljs$cst$3082$rulebase.cljs$core$IFn$_invoke$arity$1($G__48096$$), cljs$cst$3083$activation_group_sort_fn.cljs$core$IFn$_invoke$arity$1($G__48096$$), cljs$cst$3084$activation_group_fn.cljs$core$IFn$_invoke$arity$1($G__48096$$), cljs$cst$3085$alphas_fn.cljs$core$IFn$_invoke$arity$1($G__48096$$), cljs$cst$3086$alpha_memory.cljs$core$IFn$_invoke$arity$1($G__48096$$), cljs$cst$3087$beta_memory.cljs$core$IFn$_invoke$arity$1($G__48096$$), cljs$cst$3088$accum_memory.cljs$core$IFn$_invoke$arity$1($G__48096$$), 
  cljs$cst$3089$production_memory.cljs$core$IFn$_invoke$arity$1($G__48096$$), cljs$cst$3090$activation_map.cljs$core$IFn$_invoke$arity$1($G__48096$$), null, $APP.cljs.core.not_empty($G__48139$jscomp$inline_5306_extmap__5365__auto__$$), null);
};
clara.rules.memory.local_memory = function($rulebase$$, $activation_group_sort_fn$$, $activation_group_fn$$, $alphas_fn$$) {
  return clara.rules.memory.__GT_PersistentLocalMemory($rulebase$$, $activation_group_sort_fn$$, $activation_group_fn$$, $alphas_fn$$, $APP.cljs.core.PersistentArrayMap.EMPTY, $APP.cljs.core.PersistentArrayMap.EMPTY, $APP.cljs.core.PersistentArrayMap.EMPTY, $APP.cljs.core.PersistentArrayMap.EMPTY, $APP.cljs.core.PersistentArrayMap.EMPTY);
};
clara.rules.listener = {};
clara.rules.listener.IPersistentEventListener = function() {
};
var clara$rules$listener$IPersistentEventListener$to_transient$dyn_48250 = function($listener$$) {
  var $m__5372__auto__$jscomp$315_m__5374__auto__$$ = clara.rules.listener.to_transient[$APP.goog.typeOf($listener$$ == null ? null : $listener$$)];
  if ($m__5372__auto__$jscomp$315_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$315_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$315_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($listener$$) : $m__5372__auto__$jscomp$315_m__5374__auto__$$.call(null, $listener$$);
  }
  $m__5372__auto__$jscomp$315_m__5374__auto__$$ = clara.rules.listener.to_transient._;
  if ($m__5372__auto__$jscomp$315_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$315_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$315_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($listener$$) : $m__5372__auto__$jscomp$315_m__5374__auto__$$.call(null, $listener$$);
  }
  throw $APP.cljs.core.missing_protocol("IPersistentEventListener.to-transient", $listener$$);
};
clara.rules.listener.to_transient = function($listener$$) {
  return $listener$$ != null && $listener$$.clara$rules$listener$IPersistentEventListener$to_transient$arity$1 != null ? $listener$$.clara$rules$listener$IPersistentEventListener$to_transient$arity$1($listener$$) : clara$rules$listener$IPersistentEventListener$to_transient$dyn_48250($listener$$);
};
clara.rules.listener.ITransientEventListener = function() {
};
var clara$rules$listener$ITransientEventListener$left_activate_BANG_$dyn_48251 = function($listener$$, $node$$, $tokens$$) {
  var $m__5372__auto__$jscomp$316_m__5374__auto__$$ = clara.rules.listener.left_activate_BANG_[$APP.goog.typeOf($listener$$ == null ? null : $listener$$)];
  if ($m__5372__auto__$jscomp$316_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$316_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$316_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($listener$$, $node$$, $tokens$$) : $m__5372__auto__$jscomp$316_m__5374__auto__$$.call(null, $listener$$, $node$$, $tokens$$);
  }
  $m__5372__auto__$jscomp$316_m__5374__auto__$$ = clara.rules.listener.left_activate_BANG_._;
  if ($m__5372__auto__$jscomp$316_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$316_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$316_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($listener$$, $node$$, $tokens$$) : $m__5372__auto__$jscomp$316_m__5374__auto__$$.call(null, $listener$$, $node$$, $tokens$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientEventListener.left-activate!", $listener$$);
};
clara.rules.listener.left_activate_BANG_ = function($listener$$, $node$$, $tokens$$) {
  return $listener$$ != null && $listener$$.clara$rules$listener$ITransientEventListener$left_activate_BANG_$arity$3 != null ? $listener$$.clara$rules$listener$ITransientEventListener$left_activate_BANG_$arity$3($listener$$, $node$$, $tokens$$) : clara$rules$listener$ITransientEventListener$left_activate_BANG_$dyn_48251($listener$$, $node$$, $tokens$$);
};
var clara$rules$listener$ITransientEventListener$left_retract_BANG_$dyn_48252 = function($listener$$, $node$$, $tokens$$) {
  var $m__5372__auto__$jscomp$317_m__5374__auto__$$ = clara.rules.listener.left_retract_BANG_[$APP.goog.typeOf($listener$$ == null ? null : $listener$$)];
  if ($m__5372__auto__$jscomp$317_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$317_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$317_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($listener$$, $node$$, $tokens$$) : $m__5372__auto__$jscomp$317_m__5374__auto__$$.call(null, $listener$$, $node$$, $tokens$$);
  }
  $m__5372__auto__$jscomp$317_m__5374__auto__$$ = clara.rules.listener.left_retract_BANG_._;
  if ($m__5372__auto__$jscomp$317_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$317_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$317_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($listener$$, $node$$, $tokens$$) : $m__5372__auto__$jscomp$317_m__5374__auto__$$.call(null, $listener$$, $node$$, $tokens$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientEventListener.left-retract!", $listener$$);
};
clara.rules.listener.left_retract_BANG_ = function($listener$$, $node$$, $tokens$$) {
  return $listener$$ != null && $listener$$.clara$rules$listener$ITransientEventListener$left_retract_BANG_$arity$3 != null ? $listener$$.clara$rules$listener$ITransientEventListener$left_retract_BANG_$arity$3($listener$$, $node$$, $tokens$$) : clara$rules$listener$ITransientEventListener$left_retract_BANG_$dyn_48252($listener$$, $node$$, $tokens$$);
};
var clara$rules$listener$ITransientEventListener$right_activate_BANG_$dyn_48253 = function($listener$$, $node$$, $elements$$) {
  var $m__5372__auto__$jscomp$318_m__5374__auto__$$ = clara.rules.listener.right_activate_BANG_[$APP.goog.typeOf($listener$$ == null ? null : $listener$$)];
  if ($m__5372__auto__$jscomp$318_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$318_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$318_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($listener$$, $node$$, $elements$$) : $m__5372__auto__$jscomp$318_m__5374__auto__$$.call(null, $listener$$, $node$$, $elements$$);
  }
  $m__5372__auto__$jscomp$318_m__5374__auto__$$ = clara.rules.listener.right_activate_BANG_._;
  if ($m__5372__auto__$jscomp$318_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$318_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$318_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($listener$$, $node$$, $elements$$) : $m__5372__auto__$jscomp$318_m__5374__auto__$$.call(null, $listener$$, $node$$, $elements$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientEventListener.right-activate!", $listener$$);
};
clara.rules.listener.right_activate_BANG_ = function($listener$$, $node$$, $elements$$) {
  return $listener$$ != null && $listener$$.clara$rules$listener$ITransientEventListener$right_activate_BANG_$arity$3 != null ? $listener$$.clara$rules$listener$ITransientEventListener$right_activate_BANG_$arity$3($listener$$, $node$$, $elements$$) : clara$rules$listener$ITransientEventListener$right_activate_BANG_$dyn_48253($listener$$, $node$$, $elements$$);
};
var clara$rules$listener$ITransientEventListener$right_retract_BANG_$dyn_48254 = function($listener$$, $node$$, $elements$$) {
  var $m__5372__auto__$jscomp$319_m__5374__auto__$$ = clara.rules.listener.right_retract_BANG_[$APP.goog.typeOf($listener$$ == null ? null : $listener$$)];
  if ($m__5372__auto__$jscomp$319_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$319_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$319_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($listener$$, $node$$, $elements$$) : $m__5372__auto__$jscomp$319_m__5374__auto__$$.call(null, $listener$$, $node$$, $elements$$);
  }
  $m__5372__auto__$jscomp$319_m__5374__auto__$$ = clara.rules.listener.right_retract_BANG_._;
  if ($m__5372__auto__$jscomp$319_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$319_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$319_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($listener$$, $node$$, $elements$$) : $m__5372__auto__$jscomp$319_m__5374__auto__$$.call(null, $listener$$, $node$$, $elements$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientEventListener.right-retract!", $listener$$);
};
clara.rules.listener.right_retract_BANG_ = function($listener$$, $node$$, $elements$$) {
  return $listener$$ != null && $listener$$.clara$rules$listener$ITransientEventListener$right_retract_BANG_$arity$3 != null ? $listener$$.clara$rules$listener$ITransientEventListener$right_retract_BANG_$arity$3($listener$$, $node$$, $elements$$) : clara$rules$listener$ITransientEventListener$right_retract_BANG_$dyn_48254($listener$$, $node$$, $elements$$);
};
var clara$rules$listener$ITransientEventListener$insert_facts_BANG_$dyn_48255 = function($listener$$, $node$$, $token$$, $facts$$) {
  var $m__5372__auto__$jscomp$320_m__5374__auto__$$ = clara.rules.listener.insert_facts_BANG_[$APP.goog.typeOf($listener$$ == null ? null : $listener$$)];
  if ($m__5372__auto__$jscomp$320_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$320_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$320_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($listener$$, $node$$, $token$$, $facts$$) : $m__5372__auto__$jscomp$320_m__5374__auto__$$.call(null, $listener$$, $node$$, $token$$, $facts$$);
  }
  $m__5372__auto__$jscomp$320_m__5374__auto__$$ = clara.rules.listener.insert_facts_BANG_._;
  if ($m__5372__auto__$jscomp$320_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$320_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$320_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($listener$$, $node$$, $token$$, $facts$$) : $m__5372__auto__$jscomp$320_m__5374__auto__$$.call(null, $listener$$, $node$$, $token$$, $facts$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientEventListener.insert-facts!", $listener$$);
};
clara.rules.listener.insert_facts_BANG_ = function($listener$$, $node$$, $token$$, $facts$$) {
  return $listener$$ != null && $listener$$.clara$rules$listener$ITransientEventListener$insert_facts_BANG_$arity$4 != null ? $listener$$.clara$rules$listener$ITransientEventListener$insert_facts_BANG_$arity$4($listener$$, $node$$, $token$$, $facts$$) : clara$rules$listener$ITransientEventListener$insert_facts_BANG_$dyn_48255($listener$$, $node$$, $token$$, $facts$$);
};
var clara$rules$listener$ITransientEventListener$alpha_activate_BANG_$dyn_48256 = function($listener$$, $node$$, $facts$$) {
  var $m__5372__auto__$jscomp$321_m__5374__auto__$$ = clara.rules.listener.alpha_activate_BANG_[$APP.goog.typeOf($listener$$ == null ? null : $listener$$)];
  if ($m__5372__auto__$jscomp$321_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$321_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$321_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($listener$$, $node$$, $facts$$) : $m__5372__auto__$jscomp$321_m__5374__auto__$$.call(null, $listener$$, $node$$, $facts$$);
  }
  $m__5372__auto__$jscomp$321_m__5374__auto__$$ = clara.rules.listener.alpha_activate_BANG_._;
  if ($m__5372__auto__$jscomp$321_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$321_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$321_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($listener$$, $node$$, $facts$$) : $m__5372__auto__$jscomp$321_m__5374__auto__$$.call(null, $listener$$, $node$$, $facts$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientEventListener.alpha-activate!", $listener$$);
};
clara.rules.listener.alpha_activate_BANG_ = function($listener$$, $node$$, $facts$$) {
  return $listener$$ != null && $listener$$.clara$rules$listener$ITransientEventListener$alpha_activate_BANG_$arity$3 != null ? $listener$$.clara$rules$listener$ITransientEventListener$alpha_activate_BANG_$arity$3($listener$$, $node$$, $facts$$) : clara$rules$listener$ITransientEventListener$alpha_activate_BANG_$dyn_48256($listener$$, $node$$, $facts$$);
};
var clara$rules$listener$ITransientEventListener$insert_facts_logical_BANG_$dyn_48257 = function($listener$$, $node$$, $token$$, $facts$$) {
  var $m__5372__auto__$jscomp$322_m__5374__auto__$$ = clara.rules.listener.insert_facts_logical_BANG_[$APP.goog.typeOf($listener$$ == null ? null : $listener$$)];
  if ($m__5372__auto__$jscomp$322_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$322_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$322_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($listener$$, $node$$, $token$$, $facts$$) : $m__5372__auto__$jscomp$322_m__5374__auto__$$.call(null, $listener$$, $node$$, $token$$, $facts$$);
  }
  $m__5372__auto__$jscomp$322_m__5374__auto__$$ = clara.rules.listener.insert_facts_logical_BANG_._;
  if ($m__5372__auto__$jscomp$322_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$322_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$322_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($listener$$, $node$$, $token$$, $facts$$) : $m__5372__auto__$jscomp$322_m__5374__auto__$$.call(null, $listener$$, $node$$, $token$$, $facts$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientEventListener.insert-facts-logical!", $listener$$);
};
clara.rules.listener.insert_facts_logical_BANG_ = function($listener$$, $node$$, $token$$, $facts$$) {
  return $listener$$ != null && $listener$$.clara$rules$listener$ITransientEventListener$insert_facts_logical_BANG_$arity$4 != null ? $listener$$.clara$rules$listener$ITransientEventListener$insert_facts_logical_BANG_$arity$4($listener$$, $node$$, $token$$, $facts$$) : clara$rules$listener$ITransientEventListener$insert_facts_logical_BANG_$dyn_48257($listener$$, $node$$, $token$$, $facts$$);
};
var clara$rules$listener$ITransientEventListener$retract_facts_BANG_$dyn_48258 = function($listener$$, $node$$, $token$$, $facts$$) {
  var $m__5372__auto__$jscomp$323_m__5374__auto__$$ = clara.rules.listener.retract_facts_BANG_[$APP.goog.typeOf($listener$$ == null ? null : $listener$$)];
  if ($m__5372__auto__$jscomp$323_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$323_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$323_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($listener$$, $node$$, $token$$, $facts$$) : $m__5372__auto__$jscomp$323_m__5374__auto__$$.call(null, $listener$$, $node$$, $token$$, $facts$$);
  }
  $m__5372__auto__$jscomp$323_m__5374__auto__$$ = clara.rules.listener.retract_facts_BANG_._;
  if ($m__5372__auto__$jscomp$323_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$323_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$323_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($listener$$, $node$$, $token$$, $facts$$) : $m__5372__auto__$jscomp$323_m__5374__auto__$$.call(null, $listener$$, $node$$, $token$$, $facts$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientEventListener.retract-facts!", $listener$$);
};
clara.rules.listener.retract_facts_BANG_ = function($listener$$, $node$$, $token$$, $facts$$) {
  return $listener$$ != null && $listener$$.clara$rules$listener$ITransientEventListener$retract_facts_BANG_$arity$4 != null ? $listener$$.clara$rules$listener$ITransientEventListener$retract_facts_BANG_$arity$4($listener$$, $node$$, $token$$, $facts$$) : clara$rules$listener$ITransientEventListener$retract_facts_BANG_$dyn_48258($listener$$, $node$$, $token$$, $facts$$);
};
var clara$rules$listener$ITransientEventListener$alpha_retract_BANG_$dyn_48260 = function($listener$$, $node$$, $facts$$) {
  var $m__5372__auto__$jscomp$324_m__5374__auto__$$ = clara.rules.listener.alpha_retract_BANG_[$APP.goog.typeOf($listener$$ == null ? null : $listener$$)];
  if ($m__5372__auto__$jscomp$324_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$324_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$324_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($listener$$, $node$$, $facts$$) : $m__5372__auto__$jscomp$324_m__5374__auto__$$.call(null, $listener$$, $node$$, $facts$$);
  }
  $m__5372__auto__$jscomp$324_m__5374__auto__$$ = clara.rules.listener.alpha_retract_BANG_._;
  if ($m__5372__auto__$jscomp$324_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$324_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$324_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($listener$$, $node$$, $facts$$) : $m__5372__auto__$jscomp$324_m__5374__auto__$$.call(null, $listener$$, $node$$, $facts$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientEventListener.alpha-retract!", $listener$$);
};
clara.rules.listener.alpha_retract_BANG_ = function($listener$$, $node$$, $facts$$) {
  return $listener$$ != null && $listener$$.clara$rules$listener$ITransientEventListener$alpha_retract_BANG_$arity$3 != null ? $listener$$.clara$rules$listener$ITransientEventListener$alpha_retract_BANG_$arity$3($listener$$, $node$$, $facts$$) : clara$rules$listener$ITransientEventListener$alpha_retract_BANG_$dyn_48260($listener$$, $node$$, $facts$$);
};
var clara$rules$listener$ITransientEventListener$retract_facts_logical_BANG_$dyn_48262 = function($listener$$, $node$$, $token$$, $facts$$) {
  var $m__5372__auto__$jscomp$325_m__5374__auto__$$ = clara.rules.listener.retract_facts_logical_BANG_[$APP.goog.typeOf($listener$$ == null ? null : $listener$$)];
  if ($m__5372__auto__$jscomp$325_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$325_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$325_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($listener$$, $node$$, $token$$, $facts$$) : $m__5372__auto__$jscomp$325_m__5374__auto__$$.call(null, $listener$$, $node$$, $token$$, $facts$$);
  }
  $m__5372__auto__$jscomp$325_m__5374__auto__$$ = clara.rules.listener.retract_facts_logical_BANG_._;
  if ($m__5372__auto__$jscomp$325_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$325_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$325_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($listener$$, $node$$, $token$$, $facts$$) : $m__5372__auto__$jscomp$325_m__5374__auto__$$.call(null, $listener$$, $node$$, $token$$, $facts$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientEventListener.retract-facts-logical!", $listener$$);
};
clara.rules.listener.retract_facts_logical_BANG_ = function($listener$$, $node$$, $token$$, $facts$$) {
  return $listener$$ != null && $listener$$.clara$rules$listener$ITransientEventListener$retract_facts_logical_BANG_$arity$4 != null ? $listener$$.clara$rules$listener$ITransientEventListener$retract_facts_logical_BANG_$arity$4($listener$$, $node$$, $token$$, $facts$$) : clara$rules$listener$ITransientEventListener$retract_facts_logical_BANG_$dyn_48262($listener$$, $node$$, $token$$, $facts$$);
};
var clara$rules$listener$ITransientEventListener$add_accum_reduced_BANG_$dyn_48265 = function($listener$$, $node$$, $join_bindings$$, $result$$, $fact_bindings$$) {
  var $m__5372__auto__$jscomp$326_m__5374__auto__$$ = clara.rules.listener.add_accum_reduced_BANG_[$APP.goog.typeOf($listener$$ == null ? null : $listener$$)];
  if ($m__5372__auto__$jscomp$326_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$326_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5 ? $m__5372__auto__$jscomp$326_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5($listener$$, $node$$, $join_bindings$$, $result$$, $fact_bindings$$) : $m__5372__auto__$jscomp$326_m__5374__auto__$$.call(null, $listener$$, $node$$, $join_bindings$$, $result$$, $fact_bindings$$);
  }
  $m__5372__auto__$jscomp$326_m__5374__auto__$$ = clara.rules.listener.add_accum_reduced_BANG_._;
  if ($m__5372__auto__$jscomp$326_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$326_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5 ? $m__5372__auto__$jscomp$326_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5($listener$$, $node$$, $join_bindings$$, $result$$, $fact_bindings$$) : $m__5372__auto__$jscomp$326_m__5374__auto__$$.call(null, $listener$$, $node$$, $join_bindings$$, $result$$, $fact_bindings$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientEventListener.add-accum-reduced!", $listener$$);
};
clara.rules.listener.add_accum_reduced_BANG_ = function($listener$$, $node$$, $join_bindings$$, $result$$, $fact_bindings$$) {
  return $listener$$ != null && $listener$$.clara$rules$listener$ITransientEventListener$add_accum_reduced_BANG_$arity$5 != null ? $listener$$.clara$rules$listener$ITransientEventListener$add_accum_reduced_BANG_$arity$5($listener$$, $node$$, $join_bindings$$, $result$$, $fact_bindings$$) : clara$rules$listener$ITransientEventListener$add_accum_reduced_BANG_$dyn_48265($listener$$, $node$$, $join_bindings$$, $result$$, $fact_bindings$$);
};
var clara$rules$listener$ITransientEventListener$remove_accum_reduced_BANG_$dyn_48269 = function($listener$$, $node$$, $join_bindings$$, $fact_bindings$$) {
  var $m__5372__auto__$jscomp$327_m__5374__auto__$$ = clara.rules.listener.remove_accum_reduced_BANG_[$APP.goog.typeOf($listener$$ == null ? null : $listener$$)];
  if ($m__5372__auto__$jscomp$327_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$327_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$327_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($listener$$, $node$$, $join_bindings$$, $fact_bindings$$) : $m__5372__auto__$jscomp$327_m__5374__auto__$$.call(null, $listener$$, $node$$, $join_bindings$$, $fact_bindings$$);
  }
  $m__5372__auto__$jscomp$327_m__5374__auto__$$ = clara.rules.listener.remove_accum_reduced_BANG_._;
  if ($m__5372__auto__$jscomp$327_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$327_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$327_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($listener$$, $node$$, $join_bindings$$, $fact_bindings$$) : $m__5372__auto__$jscomp$327_m__5374__auto__$$.call(null, $listener$$, $node$$, $join_bindings$$, $fact_bindings$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientEventListener.remove-accum-reduced!", $listener$$);
};
clara.rules.listener.remove_accum_reduced_BANG_ = function($listener$$, $node$$, $join_bindings$$, $fact_bindings$$) {
  return $listener$$ != null && $listener$$.clara$rules$listener$ITransientEventListener$remove_accum_reduced_BANG_$arity$4 != null ? $listener$$.clara$rules$listener$ITransientEventListener$remove_accum_reduced_BANG_$arity$4($listener$$, $node$$, $join_bindings$$, $fact_bindings$$) : clara$rules$listener$ITransientEventListener$remove_accum_reduced_BANG_$dyn_48269($listener$$, $node$$, $join_bindings$$, $fact_bindings$$);
};
var clara$rules$listener$ITransientEventListener$add_activations_BANG_$dyn_48273 = function($listener$$, $node$$, $activations$$) {
  var $m__5372__auto__$jscomp$328_m__5374__auto__$$ = clara.rules.listener.add_activations_BANG_[$APP.goog.typeOf($listener$$ == null ? null : $listener$$)];
  if ($m__5372__auto__$jscomp$328_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$328_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$328_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($listener$$, $node$$, $activations$$) : $m__5372__auto__$jscomp$328_m__5374__auto__$$.call(null, $listener$$, $node$$, $activations$$);
  }
  $m__5372__auto__$jscomp$328_m__5374__auto__$$ = clara.rules.listener.add_activations_BANG_._;
  if ($m__5372__auto__$jscomp$328_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$328_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$328_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($listener$$, $node$$, $activations$$) : $m__5372__auto__$jscomp$328_m__5374__auto__$$.call(null, $listener$$, $node$$, $activations$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientEventListener.add-activations!", $listener$$);
};
clara.rules.listener.add_activations_BANG_ = function($listener$$, $node$$, $activations$$) {
  return $listener$$ != null && $listener$$.clara$rules$listener$ITransientEventListener$add_activations_BANG_$arity$3 != null ? $listener$$.clara$rules$listener$ITransientEventListener$add_activations_BANG_$arity$3($listener$$, $node$$, $activations$$) : clara$rules$listener$ITransientEventListener$add_activations_BANG_$dyn_48273($listener$$, $node$$, $activations$$);
};
var clara$rules$listener$ITransientEventListener$remove_activations_BANG_$dyn_48275 = function($listener$$, $node$$, $activations$$) {
  var $m__5372__auto__$jscomp$329_m__5374__auto__$$ = clara.rules.listener.remove_activations_BANG_[$APP.goog.typeOf($listener$$ == null ? null : $listener$$)];
  if ($m__5372__auto__$jscomp$329_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$329_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$329_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($listener$$, $node$$, $activations$$) : $m__5372__auto__$jscomp$329_m__5374__auto__$$.call(null, $listener$$, $node$$, $activations$$);
  }
  $m__5372__auto__$jscomp$329_m__5374__auto__$$ = clara.rules.listener.remove_activations_BANG_._;
  if ($m__5372__auto__$jscomp$329_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$329_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$329_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($listener$$, $node$$, $activations$$) : $m__5372__auto__$jscomp$329_m__5374__auto__$$.call(null, $listener$$, $node$$, $activations$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientEventListener.remove-activations!", $listener$$);
};
clara.rules.listener.remove_activations_BANG_ = function($listener$$, $node$$, $activations$$) {
  return $listener$$ != null && $listener$$.clara$rules$listener$ITransientEventListener$remove_activations_BANG_$arity$3 != null ? $listener$$.clara$rules$listener$ITransientEventListener$remove_activations_BANG_$arity$3($listener$$, $node$$, $activations$$) : clara$rules$listener$ITransientEventListener$remove_activations_BANG_$dyn_48275($listener$$, $node$$, $activations$$);
};
var clara$rules$listener$ITransientEventListener$fire_activation_BANG_$dyn_48276 = function($listener$$, $activation$$, $resulting_operations$$) {
  var $m__5372__auto__$jscomp$330_m__5374__auto__$$ = clara.rules.listener.fire_activation_BANG_[$APP.goog.typeOf($listener$$ == null ? null : $listener$$)];
  if ($m__5372__auto__$jscomp$330_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$330_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$330_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($listener$$, $activation$$, $resulting_operations$$) : $m__5372__auto__$jscomp$330_m__5374__auto__$$.call(null, $listener$$, $activation$$, $resulting_operations$$);
  }
  $m__5372__auto__$jscomp$330_m__5374__auto__$$ = clara.rules.listener.fire_activation_BANG_._;
  if ($m__5372__auto__$jscomp$330_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$330_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$330_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($listener$$, $activation$$, $resulting_operations$$) : $m__5372__auto__$jscomp$330_m__5374__auto__$$.call(null, $listener$$, $activation$$, $resulting_operations$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientEventListener.fire-activation!", $listener$$);
};
clara.rules.listener.fire_activation_BANG_ = function($listener$$, $activation$$, $resulting_operations$$) {
  return $listener$$ != null && $listener$$.clara$rules$listener$ITransientEventListener$fire_activation_BANG_$arity$3 != null ? $listener$$.clara$rules$listener$ITransientEventListener$fire_activation_BANG_$arity$3($listener$$, $activation$$, $resulting_operations$$) : clara$rules$listener$ITransientEventListener$fire_activation_BANG_$dyn_48276($listener$$, $activation$$, $resulting_operations$$);
};
var clara$rules$listener$ITransientEventListener$fire_rules_BANG_$dyn_48277 = function($listener$$, $node$$) {
  var $m__5372__auto__$jscomp$331_m__5374__auto__$$ = clara.rules.listener.fire_rules_BANG_[$APP.goog.typeOf($listener$$ == null ? null : $listener$$)];
  if ($m__5372__auto__$jscomp$331_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$331_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$331_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($listener$$, $node$$) : $m__5372__auto__$jscomp$331_m__5374__auto__$$.call(null, $listener$$, $node$$);
  }
  $m__5372__auto__$jscomp$331_m__5374__auto__$$ = clara.rules.listener.fire_rules_BANG_._;
  if ($m__5372__auto__$jscomp$331_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$331_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$331_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($listener$$, $node$$) : $m__5372__auto__$jscomp$331_m__5374__auto__$$.call(null, $listener$$, $node$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientEventListener.fire-rules!", $listener$$);
};
clara.rules.listener.fire_rules_BANG_ = function($listener$$, $node$$) {
  return $listener$$ != null && $listener$$.clara$rules$listener$ITransientEventListener$fire_rules_BANG_$arity$2 != null ? $listener$$.clara$rules$listener$ITransientEventListener$fire_rules_BANG_$arity$2($listener$$, $node$$) : clara$rules$listener$ITransientEventListener$fire_rules_BANG_$dyn_48277($listener$$, $node$$);
};
var clara$rules$listener$ITransientEventListener$activation_group_transition_BANG_$dyn_48279 = function($listener$$, $original_group$$, $new_group$$) {
  var $m__5372__auto__$jscomp$332_m__5374__auto__$$ = clara.rules.listener.activation_group_transition_BANG_[$APP.goog.typeOf($listener$$ == null ? null : $listener$$)];
  if ($m__5372__auto__$jscomp$332_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$332_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$332_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($listener$$, $original_group$$, $new_group$$) : $m__5372__auto__$jscomp$332_m__5374__auto__$$.call(null, $listener$$, $original_group$$, $new_group$$);
  }
  $m__5372__auto__$jscomp$332_m__5374__auto__$$ = clara.rules.listener.activation_group_transition_BANG_._;
  if ($m__5372__auto__$jscomp$332_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$332_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$332_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($listener$$, $original_group$$, $new_group$$) : $m__5372__auto__$jscomp$332_m__5374__auto__$$.call(null, $listener$$, $original_group$$, $new_group$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientEventListener.activation-group-transition!", $listener$$);
};
clara.rules.listener.activation_group_transition_BANG_ = function($listener$$, $original_group$$, $new_group$$) {
  return $listener$$ != null && $listener$$.clara$rules$listener$ITransientEventListener$activation_group_transition_BANG_$arity$3 != null ? $listener$$.clara$rules$listener$ITransientEventListener$activation_group_transition_BANG_$arity$3($listener$$, $original_group$$, $new_group$$) : clara$rules$listener$ITransientEventListener$activation_group_transition_BANG_$dyn_48279($listener$$, $original_group$$, $new_group$$);
};
var clara$rules$listener$ITransientEventListener$to_persistent_BANG_$dyn_48283 = function($listener$$) {
  var $m__5372__auto__$jscomp$333_m__5374__auto__$$ = clara.rules.listener.to_persistent_BANG_[$APP.goog.typeOf($listener$$ == null ? null : $listener$$)];
  if ($m__5372__auto__$jscomp$333_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$333_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$333_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($listener$$) : $m__5372__auto__$jscomp$333_m__5374__auto__$$.call(null, $listener$$);
  }
  $m__5372__auto__$jscomp$333_m__5374__auto__$$ = clara.rules.listener.to_persistent_BANG_._;
  if ($m__5372__auto__$jscomp$333_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$333_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$333_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($listener$$) : $m__5372__auto__$jscomp$333_m__5374__auto__$$.call(null, $listener$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransientEventListener.to-persistent!", $listener$$);
};
clara.rules.listener.to_persistent_BANG_ = function($listener$$) {
  return $listener$$ != null && $listener$$.clara$rules$listener$ITransientEventListener$to_persistent_BANG_$arity$1 != null ? $listener$$.clara$rules$listener$ITransientEventListener$to_persistent_BANG_$arity$1($listener$$) : clara$rules$listener$ITransientEventListener$to_persistent_BANG_$dyn_48283($listener$$);
};
clara.rules.listener.NullListener = function() {
};
clara.rules.listener.NullListener.prototype.clara$rules$listener$ITransientEventListener$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.listener.NullListener.prototype.clara$rules$listener$ITransientEventListener$fire_rules_BANG_$arity$2 = function($listener$$, $node$$) {
  return this;
};
clara.rules.listener.NullListener.prototype.clara$rules$listener$ITransientEventListener$right_retract_BANG_$arity$3 = function($listener$$, $node$$, $elements$$) {
  return this;
};
clara.rules.listener.NullListener.prototype.clara$rules$listener$ITransientEventListener$to_persistent_BANG_$arity$1 = function($listener$$) {
  return this;
};
clara.rules.listener.NullListener.prototype.clara$rules$listener$ITransientEventListener$remove_activations_BANG_$arity$3 = function($listener$$, $node$$, $activations$$) {
  return this;
};
clara.rules.listener.NullListener.prototype.clara$rules$listener$ITransientEventListener$add_activations_BANG_$arity$3 = function($listener$$, $node$$, $activations$$) {
  return this;
};
clara.rules.listener.NullListener.prototype.clara$rules$listener$ITransientEventListener$alpha_retract_BANG_$arity$3 = function($listener$$, $node$$, $facts$$) {
  return this;
};
clara.rules.listener.NullListener.prototype.clara$rules$listener$ITransientEventListener$right_activate_BANG_$arity$3 = function($listener$$, $node$$, $elements$$) {
  return this;
};
clara.rules.listener.NullListener.prototype.clara$rules$listener$ITransientEventListener$activation_group_transition_BANG_$arity$3 = function($listener$$, $original_group$$, $new_group$$) {
  return this;
};
clara.rules.listener.NullListener.prototype.clara$rules$listener$ITransientEventListener$left_activate_BANG_$arity$3 = function($listener$$, $node$$, $tokens$$) {
  return this;
};
clara.rules.listener.NullListener.prototype.clara$rules$listener$ITransientEventListener$retract_facts_BANG_$arity$4 = function($listener$$, $node$$, $token$$, $facts$$) {
  return this;
};
clara.rules.listener.NullListener.prototype.clara$rules$listener$ITransientEventListener$retract_facts_logical_BANG_$arity$4 = function($listener$$, $node$$, $token$$, $facts$$) {
  return this;
};
clara.rules.listener.NullListener.prototype.clara$rules$listener$ITransientEventListener$alpha_activate_BANG_$arity$3 = function($listener$$, $node$$, $facts$$) {
  return this;
};
clara.rules.listener.NullListener.prototype.clara$rules$listener$ITransientEventListener$left_retract_BANG_$arity$3 = function($listener$$, $node$$, $tokens$$) {
  return this;
};
clara.rules.listener.NullListener.prototype.clara$rules$listener$ITransientEventListener$remove_accum_reduced_BANG_$arity$4 = function($listener$$, $node$$, $join_bindings$$, $fact_bindings$$) {
  return this;
};
clara.rules.listener.NullListener.prototype.clara$rules$listener$ITransientEventListener$add_accum_reduced_BANG_$arity$5 = function($listener$$, $node$$, $join_bindings$$, $result$$, $fact_bindings$$) {
  return this;
};
clara.rules.listener.NullListener.prototype.clara$rules$listener$ITransientEventListener$insert_facts_logical_BANG_$arity$4 = function($listener$$, $node$$, $token$$, $facts$$) {
  return this;
};
clara.rules.listener.NullListener.prototype.clara$rules$listener$ITransientEventListener$fire_activation_BANG_$arity$3 = function($listener$$, $activation$$, $resulting_operations$$) {
  return this;
};
clara.rules.listener.NullListener.prototype.clara$rules$listener$ITransientEventListener$insert_facts_BANG_$arity$4 = function($listener$$, $node$$, $token$$, $facts$$) {
  return this;
};
clara.rules.listener.NullListener.prototype.clara$rules$listener$IPersistentEventListener$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.listener.NullListener.prototype.clara$rules$listener$IPersistentEventListener$to_transient$arity$1 = function($listener$$) {
  return this;
};
clara.rules.listener.NullListener.getBasis = function() {
  return $APP.cljs.core.PersistentVector.EMPTY;
};
clara.rules.listener.NullListener.cljs$lang$type = !0;
clara.rules.listener.NullListener.cljs$lang$ctorStr = "clara.rules.listener/NullListener";
clara.rules.listener.NullListener.cljs$lang$ctorPrWriter = function($this__5310__auto__$$, $writer__5311__auto__$$, $opt__5312__auto__$$) {
  return $APP.cljs.core._write($writer__5311__auto__$$, "clara.rules.listener/NullListener");
};
clara.rules.listener.__GT_NullListener = function() {
  return new clara.rules.listener.NullListener();
};
clara.rules.listener.DelegatingListener = function($children$$) {
  this.children = $children$$;
};
clara.rules.listener.DelegatingListener.prototype.clara$rules$listener$ITransientEventListener$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.listener.DelegatingListener.prototype.clara$rules$listener$ITransientEventListener$fire_rules_BANG_$arity$2 = function($c__5548__auto__$jscomp$22_listener$jscomp$169_seq__48135_temp__5825__auto__$$, $node$$) {
  $c__5548__auto__$jscomp$22_listener$jscomp$169_seq__48135_temp__5825__auto__$$ = $APP.cljs.core.seq(this.children);
  for (var $G__48291_chunk__48136_seq__48135__$1$$ = null, $G__48290_count__48137$$ = 0, $i__48138$$ = 0;;) {
    if ($i__48138$$ < $G__48290_count__48137$$) {
      var $G__48292_child$$ = $G__48291_chunk__48136_seq__48135__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $i__48138$$);
      clara.rules.listener.fire_rules_BANG_($G__48292_child$$, $node$$);
      $i__48138$$ += 1;
    } else {
      if ($c__5548__auto__$jscomp$22_listener$jscomp$169_seq__48135_temp__5825__auto__$$ = $APP.cljs.core.seq($c__5548__auto__$jscomp$22_listener$jscomp$169_seq__48135_temp__5825__auto__$$)) {
        $G__48291_chunk__48136_seq__48135__$1$$ = $c__5548__auto__$jscomp$22_listener$jscomp$169_seq__48135_temp__5825__auto__$$, $APP.cljs.core.chunked_seq_QMARK_($G__48291_chunk__48136_seq__48135__$1$$) ? ($c__5548__auto__$jscomp$22_listener$jscomp$169_seq__48135_temp__5825__auto__$$ = $APP.cljs.core.chunk_first($G__48291_chunk__48136_seq__48135__$1$$), $G__48290_count__48137$$ = $APP.cljs.core.chunk_rest($G__48291_chunk__48136_seq__48135__$1$$), $G__48291_chunk__48136_seq__48135__$1$$ = $c__5548__auto__$jscomp$22_listener$jscomp$169_seq__48135_temp__5825__auto__$$, 
        $G__48292_child$$ = $APP.cljs.core.count($c__5548__auto__$jscomp$22_listener$jscomp$169_seq__48135_temp__5825__auto__$$), $c__5548__auto__$jscomp$22_listener$jscomp$169_seq__48135_temp__5825__auto__$$ = $G__48290_count__48137$$, $G__48290_count__48137$$ = $G__48292_child$$) : ($G__48292_child$$ = $APP.cljs.core.first($G__48291_chunk__48136_seq__48135__$1$$), clara.rules.listener.fire_rules_BANG_($G__48292_child$$, $node$$), $c__5548__auto__$jscomp$22_listener$jscomp$169_seq__48135_temp__5825__auto__$$ = 
        $APP.cljs.core.next($G__48291_chunk__48136_seq__48135__$1$$), $G__48291_chunk__48136_seq__48135__$1$$ = null, $G__48290_count__48137$$ = 0), $i__48138$$ = 0;
      } else {
        return null;
      }
    }
  }
};
clara.rules.listener.DelegatingListener.prototype.clara$rules$listener$ITransientEventListener$right_retract_BANG_$arity$3 = function($c__5548__auto__$jscomp$23_listener$jscomp$170_seq__48140_temp__5825__auto__$$, $node$$, $elements$$) {
  $c__5548__auto__$jscomp$23_listener$jscomp$170_seq__48140_temp__5825__auto__$$ = $APP.cljs.core.seq(this.children);
  for (var $G__48304_chunk__48141_seq__48140__$1$$ = null, $G__48303_count__48142$$ = 0, $i__48143$$ = 0;;) {
    if ($i__48143$$ < $G__48303_count__48142$$) {
      var $G__48305_child$$ = $G__48304_chunk__48141_seq__48140__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $i__48143$$);
      clara.rules.listener.right_retract_BANG_($G__48305_child$$, $node$$, $elements$$);
      $i__48143$$ += 1;
    } else {
      if ($c__5548__auto__$jscomp$23_listener$jscomp$170_seq__48140_temp__5825__auto__$$ = $APP.cljs.core.seq($c__5548__auto__$jscomp$23_listener$jscomp$170_seq__48140_temp__5825__auto__$$)) {
        $G__48304_chunk__48141_seq__48140__$1$$ = $c__5548__auto__$jscomp$23_listener$jscomp$170_seq__48140_temp__5825__auto__$$, $APP.cljs.core.chunked_seq_QMARK_($G__48304_chunk__48141_seq__48140__$1$$) ? ($c__5548__auto__$jscomp$23_listener$jscomp$170_seq__48140_temp__5825__auto__$$ = $APP.cljs.core.chunk_first($G__48304_chunk__48141_seq__48140__$1$$), $G__48303_count__48142$$ = $APP.cljs.core.chunk_rest($G__48304_chunk__48141_seq__48140__$1$$), $G__48304_chunk__48141_seq__48140__$1$$ = $c__5548__auto__$jscomp$23_listener$jscomp$170_seq__48140_temp__5825__auto__$$, 
        $G__48305_child$$ = $APP.cljs.core.count($c__5548__auto__$jscomp$23_listener$jscomp$170_seq__48140_temp__5825__auto__$$), $c__5548__auto__$jscomp$23_listener$jscomp$170_seq__48140_temp__5825__auto__$$ = $G__48303_count__48142$$, $G__48303_count__48142$$ = $G__48305_child$$) : ($G__48305_child$$ = $APP.cljs.core.first($G__48304_chunk__48141_seq__48140__$1$$), clara.rules.listener.right_retract_BANG_($G__48305_child$$, $node$$, $elements$$), $c__5548__auto__$jscomp$23_listener$jscomp$170_seq__48140_temp__5825__auto__$$ = 
        $APP.cljs.core.next($G__48304_chunk__48141_seq__48140__$1$$), $G__48304_chunk__48141_seq__48140__$1$$ = null, $G__48303_count__48142$$ = 0), $i__48143$$ = 0;
      } else {
        return null;
      }
    }
  }
};
clara.rules.listener.DelegatingListener.prototype.clara$rules$listener$ITransientEventListener$to_persistent_BANG_$arity$1 = function($G__48144_listener$$) {
  $G__48144_listener$$ = $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(clara.rules.listener.to_persistent_BANG_, this.children);
  return clara.rules.listener.delegating_listener.cljs$core$IFn$_invoke$arity$1 ? clara.rules.listener.delegating_listener.cljs$core$IFn$_invoke$arity$1($G__48144_listener$$) : clara.rules.listener.delegating_listener.call(null, $G__48144_listener$$);
};
clara.rules.listener.DelegatingListener.prototype.clara$rules$listener$ITransientEventListener$remove_activations_BANG_$arity$3 = function($c__5548__auto__$jscomp$24_listener$jscomp$172_seq__48145_temp__5825__auto__$$, $node$$, $activations$$) {
  $c__5548__auto__$jscomp$24_listener$jscomp$172_seq__48145_temp__5825__auto__$$ = $APP.cljs.core.seq(this.children);
  for (var $G__48317_chunk__48146_seq__48145__$1$$ = null, $G__48316_count__48147$$ = 0, $i__48148$$ = 0;;) {
    if ($i__48148$$ < $G__48316_count__48147$$) {
      var $G__48318_child$$ = $G__48317_chunk__48146_seq__48145__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $i__48148$$);
      clara.rules.listener.remove_activations_BANG_($G__48318_child$$, $node$$, $activations$$);
      $i__48148$$ += 1;
    } else {
      if ($c__5548__auto__$jscomp$24_listener$jscomp$172_seq__48145_temp__5825__auto__$$ = $APP.cljs.core.seq($c__5548__auto__$jscomp$24_listener$jscomp$172_seq__48145_temp__5825__auto__$$)) {
        $G__48317_chunk__48146_seq__48145__$1$$ = $c__5548__auto__$jscomp$24_listener$jscomp$172_seq__48145_temp__5825__auto__$$, $APP.cljs.core.chunked_seq_QMARK_($G__48317_chunk__48146_seq__48145__$1$$) ? ($c__5548__auto__$jscomp$24_listener$jscomp$172_seq__48145_temp__5825__auto__$$ = $APP.cljs.core.chunk_first($G__48317_chunk__48146_seq__48145__$1$$), $G__48316_count__48147$$ = $APP.cljs.core.chunk_rest($G__48317_chunk__48146_seq__48145__$1$$), $G__48317_chunk__48146_seq__48145__$1$$ = $c__5548__auto__$jscomp$24_listener$jscomp$172_seq__48145_temp__5825__auto__$$, 
        $G__48318_child$$ = $APP.cljs.core.count($c__5548__auto__$jscomp$24_listener$jscomp$172_seq__48145_temp__5825__auto__$$), $c__5548__auto__$jscomp$24_listener$jscomp$172_seq__48145_temp__5825__auto__$$ = $G__48316_count__48147$$, $G__48316_count__48147$$ = $G__48318_child$$) : ($G__48318_child$$ = $APP.cljs.core.first($G__48317_chunk__48146_seq__48145__$1$$), clara.rules.listener.remove_activations_BANG_($G__48318_child$$, $node$$, $activations$$), $c__5548__auto__$jscomp$24_listener$jscomp$172_seq__48145_temp__5825__auto__$$ = 
        $APP.cljs.core.next($G__48317_chunk__48146_seq__48145__$1$$), $G__48317_chunk__48146_seq__48145__$1$$ = null, $G__48316_count__48147$$ = 0), $i__48148$$ = 0;
      } else {
        return null;
      }
    }
  }
};
clara.rules.listener.DelegatingListener.prototype.clara$rules$listener$ITransientEventListener$add_activations_BANG_$arity$3 = function($c__5548__auto__$jscomp$25_listener$jscomp$173_seq__48150_temp__5825__auto__$$, $node$$, $activations$$) {
  $c__5548__auto__$jscomp$25_listener$jscomp$173_seq__48150_temp__5825__auto__$$ = $APP.cljs.core.seq(this.children);
  for (var $G__48330_chunk__48151_seq__48150__$1$$ = null, $G__48329_count__48152$$ = 0, $i__48153$$ = 0;;) {
    if ($i__48153$$ < $G__48329_count__48152$$) {
      var $G__48331_child$$ = $G__48330_chunk__48151_seq__48150__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $i__48153$$);
      clara.rules.listener.add_activations_BANG_($G__48331_child$$, $node$$, $activations$$);
      $i__48153$$ += 1;
    } else {
      if ($c__5548__auto__$jscomp$25_listener$jscomp$173_seq__48150_temp__5825__auto__$$ = $APP.cljs.core.seq($c__5548__auto__$jscomp$25_listener$jscomp$173_seq__48150_temp__5825__auto__$$)) {
        $G__48330_chunk__48151_seq__48150__$1$$ = $c__5548__auto__$jscomp$25_listener$jscomp$173_seq__48150_temp__5825__auto__$$, $APP.cljs.core.chunked_seq_QMARK_($G__48330_chunk__48151_seq__48150__$1$$) ? ($c__5548__auto__$jscomp$25_listener$jscomp$173_seq__48150_temp__5825__auto__$$ = $APP.cljs.core.chunk_first($G__48330_chunk__48151_seq__48150__$1$$), $G__48329_count__48152$$ = $APP.cljs.core.chunk_rest($G__48330_chunk__48151_seq__48150__$1$$), $G__48330_chunk__48151_seq__48150__$1$$ = $c__5548__auto__$jscomp$25_listener$jscomp$173_seq__48150_temp__5825__auto__$$, 
        $G__48331_child$$ = $APP.cljs.core.count($c__5548__auto__$jscomp$25_listener$jscomp$173_seq__48150_temp__5825__auto__$$), $c__5548__auto__$jscomp$25_listener$jscomp$173_seq__48150_temp__5825__auto__$$ = $G__48329_count__48152$$, $G__48329_count__48152$$ = $G__48331_child$$) : ($G__48331_child$$ = $APP.cljs.core.first($G__48330_chunk__48151_seq__48150__$1$$), clara.rules.listener.add_activations_BANG_($G__48331_child$$, $node$$, $activations$$), $c__5548__auto__$jscomp$25_listener$jscomp$173_seq__48150_temp__5825__auto__$$ = 
        $APP.cljs.core.next($G__48330_chunk__48151_seq__48150__$1$$), $G__48330_chunk__48151_seq__48150__$1$$ = null, $G__48329_count__48152$$ = 0), $i__48153$$ = 0;
      } else {
        return null;
      }
    }
  }
};
clara.rules.listener.DelegatingListener.prototype.clara$rules$listener$ITransientEventListener$alpha_retract_BANG_$arity$3 = function($c__5548__auto__$jscomp$26_listener$jscomp$174_seq__48155_temp__5825__auto__$$, $node$$, $facts$$) {
  $c__5548__auto__$jscomp$26_listener$jscomp$174_seq__48155_temp__5825__auto__$$ = $APP.cljs.core.seq(this.children);
  for (var $G__48344_chunk__48156_seq__48155__$1$$ = null, $G__48343_count__48157$$ = 0, $i__48158$$ = 0;;) {
    if ($i__48158$$ < $G__48343_count__48157$$) {
      var $G__48345_child$$ = $G__48344_chunk__48156_seq__48155__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $i__48158$$);
      clara.rules.listener.alpha_retract_BANG_($G__48345_child$$, $node$$, $facts$$);
      $i__48158$$ += 1;
    } else {
      if ($c__5548__auto__$jscomp$26_listener$jscomp$174_seq__48155_temp__5825__auto__$$ = $APP.cljs.core.seq($c__5548__auto__$jscomp$26_listener$jscomp$174_seq__48155_temp__5825__auto__$$)) {
        $G__48344_chunk__48156_seq__48155__$1$$ = $c__5548__auto__$jscomp$26_listener$jscomp$174_seq__48155_temp__5825__auto__$$, $APP.cljs.core.chunked_seq_QMARK_($G__48344_chunk__48156_seq__48155__$1$$) ? ($c__5548__auto__$jscomp$26_listener$jscomp$174_seq__48155_temp__5825__auto__$$ = $APP.cljs.core.chunk_first($G__48344_chunk__48156_seq__48155__$1$$), $G__48343_count__48157$$ = $APP.cljs.core.chunk_rest($G__48344_chunk__48156_seq__48155__$1$$), $G__48344_chunk__48156_seq__48155__$1$$ = $c__5548__auto__$jscomp$26_listener$jscomp$174_seq__48155_temp__5825__auto__$$, 
        $G__48345_child$$ = $APP.cljs.core.count($c__5548__auto__$jscomp$26_listener$jscomp$174_seq__48155_temp__5825__auto__$$), $c__5548__auto__$jscomp$26_listener$jscomp$174_seq__48155_temp__5825__auto__$$ = $G__48343_count__48157$$, $G__48343_count__48157$$ = $G__48345_child$$) : ($G__48345_child$$ = $APP.cljs.core.first($G__48344_chunk__48156_seq__48155__$1$$), clara.rules.listener.alpha_retract_BANG_($G__48345_child$$, $node$$, $facts$$), $c__5548__auto__$jscomp$26_listener$jscomp$174_seq__48155_temp__5825__auto__$$ = 
        $APP.cljs.core.next($G__48344_chunk__48156_seq__48155__$1$$), $G__48344_chunk__48156_seq__48155__$1$$ = null, $G__48343_count__48157$$ = 0), $i__48158$$ = 0;
      } else {
        return null;
      }
    }
  }
};
clara.rules.listener.DelegatingListener.prototype.clara$rules$listener$ITransientEventListener$right_activate_BANG_$arity$3 = function($c__5548__auto__$jscomp$27_listener$jscomp$175_seq__48162_temp__5825__auto__$$, $node$$, $elements$$) {
  $c__5548__auto__$jscomp$27_listener$jscomp$175_seq__48162_temp__5825__auto__$$ = $APP.cljs.core.seq(this.children);
  for (var $G__48357_chunk__48163_seq__48162__$1$$ = null, $G__48356_count__48164$$ = 0, $i__48165$$ = 0;;) {
    if ($i__48165$$ < $G__48356_count__48164$$) {
      var $G__48358_child$$ = $G__48357_chunk__48163_seq__48162__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $i__48165$$);
      clara.rules.listener.right_activate_BANG_($G__48358_child$$, $node$$, $elements$$);
      $i__48165$$ += 1;
    } else {
      if ($c__5548__auto__$jscomp$27_listener$jscomp$175_seq__48162_temp__5825__auto__$$ = $APP.cljs.core.seq($c__5548__auto__$jscomp$27_listener$jscomp$175_seq__48162_temp__5825__auto__$$)) {
        $G__48357_chunk__48163_seq__48162__$1$$ = $c__5548__auto__$jscomp$27_listener$jscomp$175_seq__48162_temp__5825__auto__$$, $APP.cljs.core.chunked_seq_QMARK_($G__48357_chunk__48163_seq__48162__$1$$) ? ($c__5548__auto__$jscomp$27_listener$jscomp$175_seq__48162_temp__5825__auto__$$ = $APP.cljs.core.chunk_first($G__48357_chunk__48163_seq__48162__$1$$), $G__48356_count__48164$$ = $APP.cljs.core.chunk_rest($G__48357_chunk__48163_seq__48162__$1$$), $G__48357_chunk__48163_seq__48162__$1$$ = $c__5548__auto__$jscomp$27_listener$jscomp$175_seq__48162_temp__5825__auto__$$, 
        $G__48358_child$$ = $APP.cljs.core.count($c__5548__auto__$jscomp$27_listener$jscomp$175_seq__48162_temp__5825__auto__$$), $c__5548__auto__$jscomp$27_listener$jscomp$175_seq__48162_temp__5825__auto__$$ = $G__48356_count__48164$$, $G__48356_count__48164$$ = $G__48358_child$$) : ($G__48358_child$$ = $APP.cljs.core.first($G__48357_chunk__48163_seq__48162__$1$$), clara.rules.listener.right_activate_BANG_($G__48358_child$$, $node$$, $elements$$), $c__5548__auto__$jscomp$27_listener$jscomp$175_seq__48162_temp__5825__auto__$$ = 
        $APP.cljs.core.next($G__48357_chunk__48163_seq__48162__$1$$), $G__48357_chunk__48163_seq__48162__$1$$ = null, $G__48356_count__48164$$ = 0), $i__48165$$ = 0;
      } else {
        return null;
      }
    }
  }
};
clara.rules.listener.DelegatingListener.prototype.clara$rules$listener$ITransientEventListener$activation_group_transition_BANG_$arity$3 = function($c__5548__auto__$jscomp$28_listener$jscomp$176_seq__48170_temp__5825__auto__$$, $original_group$$, $new_group$$) {
  $c__5548__auto__$jscomp$28_listener$jscomp$176_seq__48170_temp__5825__auto__$$ = $APP.cljs.core.seq(this.children);
  for (var $G__48369_chunk__48171_seq__48170__$1$$ = null, $G__48368_count__48172$$ = 0, $i__48173$$ = 0;;) {
    if ($i__48173$$ < $G__48368_count__48172$$) {
      var $G__48370_child$$ = $G__48369_chunk__48171_seq__48170__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $i__48173$$);
      clara.rules.listener.activation_group_transition_BANG_($G__48370_child$$, $original_group$$, $new_group$$);
      $i__48173$$ += 1;
    } else {
      if ($c__5548__auto__$jscomp$28_listener$jscomp$176_seq__48170_temp__5825__auto__$$ = $APP.cljs.core.seq($c__5548__auto__$jscomp$28_listener$jscomp$176_seq__48170_temp__5825__auto__$$)) {
        $G__48369_chunk__48171_seq__48170__$1$$ = $c__5548__auto__$jscomp$28_listener$jscomp$176_seq__48170_temp__5825__auto__$$, $APP.cljs.core.chunked_seq_QMARK_($G__48369_chunk__48171_seq__48170__$1$$) ? ($c__5548__auto__$jscomp$28_listener$jscomp$176_seq__48170_temp__5825__auto__$$ = $APP.cljs.core.chunk_first($G__48369_chunk__48171_seq__48170__$1$$), $G__48368_count__48172$$ = $APP.cljs.core.chunk_rest($G__48369_chunk__48171_seq__48170__$1$$), $G__48369_chunk__48171_seq__48170__$1$$ = $c__5548__auto__$jscomp$28_listener$jscomp$176_seq__48170_temp__5825__auto__$$, 
        $G__48370_child$$ = $APP.cljs.core.count($c__5548__auto__$jscomp$28_listener$jscomp$176_seq__48170_temp__5825__auto__$$), $c__5548__auto__$jscomp$28_listener$jscomp$176_seq__48170_temp__5825__auto__$$ = $G__48368_count__48172$$, $G__48368_count__48172$$ = $G__48370_child$$) : ($G__48370_child$$ = $APP.cljs.core.first($G__48369_chunk__48171_seq__48170__$1$$), clara.rules.listener.activation_group_transition_BANG_($G__48370_child$$, $original_group$$, $new_group$$), $c__5548__auto__$jscomp$28_listener$jscomp$176_seq__48170_temp__5825__auto__$$ = 
        $APP.cljs.core.next($G__48369_chunk__48171_seq__48170__$1$$), $G__48369_chunk__48171_seq__48170__$1$$ = null, $G__48368_count__48172$$ = 0), $i__48173$$ = 0;
      } else {
        return null;
      }
    }
  }
};
clara.rules.listener.DelegatingListener.prototype.clara$rules$listener$ITransientEventListener$left_activate_BANG_$arity$3 = function($c__5548__auto__$jscomp$29_listener$jscomp$177_seq__48178_temp__5825__auto__$$, $node$$, $tokens$$) {
  $c__5548__auto__$jscomp$29_listener$jscomp$177_seq__48178_temp__5825__auto__$$ = $APP.cljs.core.seq(this.children);
  for (var $G__48381_chunk__48179_seq__48178__$1$$ = null, $G__48380_count__48180$$ = 0, $i__48181$$ = 0;;) {
    if ($i__48181$$ < $G__48380_count__48180$$) {
      var $G__48382_child$$ = $G__48381_chunk__48179_seq__48178__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $i__48181$$);
      clara.rules.listener.left_activate_BANG_($G__48382_child$$, $node$$, $tokens$$);
      $i__48181$$ += 1;
    } else {
      if ($c__5548__auto__$jscomp$29_listener$jscomp$177_seq__48178_temp__5825__auto__$$ = $APP.cljs.core.seq($c__5548__auto__$jscomp$29_listener$jscomp$177_seq__48178_temp__5825__auto__$$)) {
        $G__48381_chunk__48179_seq__48178__$1$$ = $c__5548__auto__$jscomp$29_listener$jscomp$177_seq__48178_temp__5825__auto__$$, $APP.cljs.core.chunked_seq_QMARK_($G__48381_chunk__48179_seq__48178__$1$$) ? ($c__5548__auto__$jscomp$29_listener$jscomp$177_seq__48178_temp__5825__auto__$$ = $APP.cljs.core.chunk_first($G__48381_chunk__48179_seq__48178__$1$$), $G__48380_count__48180$$ = $APP.cljs.core.chunk_rest($G__48381_chunk__48179_seq__48178__$1$$), $G__48381_chunk__48179_seq__48178__$1$$ = $c__5548__auto__$jscomp$29_listener$jscomp$177_seq__48178_temp__5825__auto__$$, 
        $G__48382_child$$ = $APP.cljs.core.count($c__5548__auto__$jscomp$29_listener$jscomp$177_seq__48178_temp__5825__auto__$$), $c__5548__auto__$jscomp$29_listener$jscomp$177_seq__48178_temp__5825__auto__$$ = $G__48380_count__48180$$, $G__48380_count__48180$$ = $G__48382_child$$) : ($G__48382_child$$ = $APP.cljs.core.first($G__48381_chunk__48179_seq__48178__$1$$), clara.rules.listener.left_activate_BANG_($G__48382_child$$, $node$$, $tokens$$), $c__5548__auto__$jscomp$29_listener$jscomp$177_seq__48178_temp__5825__auto__$$ = 
        $APP.cljs.core.next($G__48381_chunk__48179_seq__48178__$1$$), $G__48381_chunk__48179_seq__48178__$1$$ = null, $G__48380_count__48180$$ = 0), $i__48181$$ = 0;
      } else {
        return null;
      }
    }
  }
};
clara.rules.listener.DelegatingListener.prototype.clara$rules$listener$ITransientEventListener$retract_facts_BANG_$arity$4 = function($c__5548__auto__$jscomp$30_listener$jscomp$178_seq__48185_temp__5825__auto__$$, $node$$, $token$$, $facts$$) {
  $c__5548__auto__$jscomp$30_listener$jscomp$178_seq__48185_temp__5825__auto__$$ = $APP.cljs.core.seq(this.children);
  for (var $G__48395_chunk__48186_seq__48185__$1$$ = null, $G__48394_count__48187$$ = 0, $i__48188$$ = 0;;) {
    if ($i__48188$$ < $G__48394_count__48187$$) {
      var $G__48396_child$$ = $G__48395_chunk__48186_seq__48185__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $i__48188$$);
      clara.rules.listener.retract_facts_BANG_($G__48396_child$$, $node$$, $token$$, $facts$$);
      $i__48188$$ += 1;
    } else {
      if ($c__5548__auto__$jscomp$30_listener$jscomp$178_seq__48185_temp__5825__auto__$$ = $APP.cljs.core.seq($c__5548__auto__$jscomp$30_listener$jscomp$178_seq__48185_temp__5825__auto__$$)) {
        $G__48395_chunk__48186_seq__48185__$1$$ = $c__5548__auto__$jscomp$30_listener$jscomp$178_seq__48185_temp__5825__auto__$$, $APP.cljs.core.chunked_seq_QMARK_($G__48395_chunk__48186_seq__48185__$1$$) ? ($c__5548__auto__$jscomp$30_listener$jscomp$178_seq__48185_temp__5825__auto__$$ = $APP.cljs.core.chunk_first($G__48395_chunk__48186_seq__48185__$1$$), $G__48394_count__48187$$ = $APP.cljs.core.chunk_rest($G__48395_chunk__48186_seq__48185__$1$$), $G__48395_chunk__48186_seq__48185__$1$$ = $c__5548__auto__$jscomp$30_listener$jscomp$178_seq__48185_temp__5825__auto__$$, 
        $G__48396_child$$ = $APP.cljs.core.count($c__5548__auto__$jscomp$30_listener$jscomp$178_seq__48185_temp__5825__auto__$$), $c__5548__auto__$jscomp$30_listener$jscomp$178_seq__48185_temp__5825__auto__$$ = $G__48394_count__48187$$, $G__48394_count__48187$$ = $G__48396_child$$) : ($G__48396_child$$ = $APP.cljs.core.first($G__48395_chunk__48186_seq__48185__$1$$), clara.rules.listener.retract_facts_BANG_($G__48396_child$$, $node$$, $token$$, $facts$$), $c__5548__auto__$jscomp$30_listener$jscomp$178_seq__48185_temp__5825__auto__$$ = 
        $APP.cljs.core.next($G__48395_chunk__48186_seq__48185__$1$$), $G__48395_chunk__48186_seq__48185__$1$$ = null, $G__48394_count__48187$$ = 0), $i__48188$$ = 0;
      } else {
        return null;
      }
    }
  }
};
clara.rules.listener.DelegatingListener.prototype.clara$rules$listener$ITransientEventListener$retract_facts_logical_BANG_$arity$4 = function($c__5548__auto__$jscomp$31_listener$jscomp$179_seq__48192_temp__5825__auto__$$, $node$$, $token$$, $facts$$) {
  $c__5548__auto__$jscomp$31_listener$jscomp$179_seq__48192_temp__5825__auto__$$ = $APP.cljs.core.seq(this.children);
  for (var $G__48408_chunk__48193_seq__48192__$1$$ = null, $G__48407_count__48194$$ = 0, $i__48195$$ = 0;;) {
    if ($i__48195$$ < $G__48407_count__48194$$) {
      var $G__48409_child$$ = $G__48408_chunk__48193_seq__48192__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $i__48195$$);
      clara.rules.listener.retract_facts_logical_BANG_($G__48409_child$$, $node$$, $token$$, $facts$$);
      $i__48195$$ += 1;
    } else {
      if ($c__5548__auto__$jscomp$31_listener$jscomp$179_seq__48192_temp__5825__auto__$$ = $APP.cljs.core.seq($c__5548__auto__$jscomp$31_listener$jscomp$179_seq__48192_temp__5825__auto__$$)) {
        $G__48408_chunk__48193_seq__48192__$1$$ = $c__5548__auto__$jscomp$31_listener$jscomp$179_seq__48192_temp__5825__auto__$$, $APP.cljs.core.chunked_seq_QMARK_($G__48408_chunk__48193_seq__48192__$1$$) ? ($c__5548__auto__$jscomp$31_listener$jscomp$179_seq__48192_temp__5825__auto__$$ = $APP.cljs.core.chunk_first($G__48408_chunk__48193_seq__48192__$1$$), $G__48407_count__48194$$ = $APP.cljs.core.chunk_rest($G__48408_chunk__48193_seq__48192__$1$$), $G__48408_chunk__48193_seq__48192__$1$$ = $c__5548__auto__$jscomp$31_listener$jscomp$179_seq__48192_temp__5825__auto__$$, 
        $G__48409_child$$ = $APP.cljs.core.count($c__5548__auto__$jscomp$31_listener$jscomp$179_seq__48192_temp__5825__auto__$$), $c__5548__auto__$jscomp$31_listener$jscomp$179_seq__48192_temp__5825__auto__$$ = $G__48407_count__48194$$, $G__48407_count__48194$$ = $G__48409_child$$) : ($G__48409_child$$ = $APP.cljs.core.first($G__48408_chunk__48193_seq__48192__$1$$), clara.rules.listener.retract_facts_logical_BANG_($G__48409_child$$, $node$$, $token$$, $facts$$), $c__5548__auto__$jscomp$31_listener$jscomp$179_seq__48192_temp__5825__auto__$$ = 
        $APP.cljs.core.next($G__48408_chunk__48193_seq__48192__$1$$), $G__48408_chunk__48193_seq__48192__$1$$ = null, $G__48407_count__48194$$ = 0), $i__48195$$ = 0;
      } else {
        return null;
      }
    }
  }
};
clara.rules.listener.DelegatingListener.prototype.clara$rules$listener$ITransientEventListener$alpha_activate_BANG_$arity$3 = function($c__5548__auto__$jscomp$32_listener$jscomp$180_seq__48199_temp__5825__auto__$$, $node$$, $facts$$) {
  $c__5548__auto__$jscomp$32_listener$jscomp$180_seq__48199_temp__5825__auto__$$ = $APP.cljs.core.seq(this.children);
  for (var $G__48421_chunk__48200_seq__48199__$1$$ = null, $G__48420_count__48201$$ = 0, $i__48202$$ = 0;;) {
    if ($i__48202$$ < $G__48420_count__48201$$) {
      var $G__48422_child$$ = $G__48421_chunk__48200_seq__48199__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $i__48202$$);
      clara.rules.listener.alpha_activate_BANG_($G__48422_child$$, $node$$, $facts$$);
      $i__48202$$ += 1;
    } else {
      if ($c__5548__auto__$jscomp$32_listener$jscomp$180_seq__48199_temp__5825__auto__$$ = $APP.cljs.core.seq($c__5548__auto__$jscomp$32_listener$jscomp$180_seq__48199_temp__5825__auto__$$)) {
        $G__48421_chunk__48200_seq__48199__$1$$ = $c__5548__auto__$jscomp$32_listener$jscomp$180_seq__48199_temp__5825__auto__$$, $APP.cljs.core.chunked_seq_QMARK_($G__48421_chunk__48200_seq__48199__$1$$) ? ($c__5548__auto__$jscomp$32_listener$jscomp$180_seq__48199_temp__5825__auto__$$ = $APP.cljs.core.chunk_first($G__48421_chunk__48200_seq__48199__$1$$), $G__48420_count__48201$$ = $APP.cljs.core.chunk_rest($G__48421_chunk__48200_seq__48199__$1$$), $G__48421_chunk__48200_seq__48199__$1$$ = $c__5548__auto__$jscomp$32_listener$jscomp$180_seq__48199_temp__5825__auto__$$, 
        $G__48422_child$$ = $APP.cljs.core.count($c__5548__auto__$jscomp$32_listener$jscomp$180_seq__48199_temp__5825__auto__$$), $c__5548__auto__$jscomp$32_listener$jscomp$180_seq__48199_temp__5825__auto__$$ = $G__48420_count__48201$$, $G__48420_count__48201$$ = $G__48422_child$$) : ($G__48422_child$$ = $APP.cljs.core.first($G__48421_chunk__48200_seq__48199__$1$$), clara.rules.listener.alpha_activate_BANG_($G__48422_child$$, $node$$, $facts$$), $c__5548__auto__$jscomp$32_listener$jscomp$180_seq__48199_temp__5825__auto__$$ = 
        $APP.cljs.core.next($G__48421_chunk__48200_seq__48199__$1$$), $G__48421_chunk__48200_seq__48199__$1$$ = null, $G__48420_count__48201$$ = 0), $i__48202$$ = 0;
      } else {
        return null;
      }
    }
  }
};
clara.rules.listener.DelegatingListener.prototype.clara$rules$listener$ITransientEventListener$left_retract_BANG_$arity$3 = function($c__5548__auto__$jscomp$33_listener$jscomp$181_seq__48207_temp__5825__auto__$$, $node$$, $tokens$$) {
  $c__5548__auto__$jscomp$33_listener$jscomp$181_seq__48207_temp__5825__auto__$$ = $APP.cljs.core.seq(this.children);
  for (var $G__48433_chunk__48208_seq__48207__$1$$ = null, $G__48432_count__48209$$ = 0, $i__48210$$ = 0;;) {
    if ($i__48210$$ < $G__48432_count__48209$$) {
      var $G__48434_child$$ = $G__48433_chunk__48208_seq__48207__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $i__48210$$);
      clara.rules.listener.left_retract_BANG_($G__48434_child$$, $node$$, $tokens$$);
      $i__48210$$ += 1;
    } else {
      if ($c__5548__auto__$jscomp$33_listener$jscomp$181_seq__48207_temp__5825__auto__$$ = $APP.cljs.core.seq($c__5548__auto__$jscomp$33_listener$jscomp$181_seq__48207_temp__5825__auto__$$)) {
        $G__48433_chunk__48208_seq__48207__$1$$ = $c__5548__auto__$jscomp$33_listener$jscomp$181_seq__48207_temp__5825__auto__$$, $APP.cljs.core.chunked_seq_QMARK_($G__48433_chunk__48208_seq__48207__$1$$) ? ($c__5548__auto__$jscomp$33_listener$jscomp$181_seq__48207_temp__5825__auto__$$ = $APP.cljs.core.chunk_first($G__48433_chunk__48208_seq__48207__$1$$), $G__48432_count__48209$$ = $APP.cljs.core.chunk_rest($G__48433_chunk__48208_seq__48207__$1$$), $G__48433_chunk__48208_seq__48207__$1$$ = $c__5548__auto__$jscomp$33_listener$jscomp$181_seq__48207_temp__5825__auto__$$, 
        $G__48434_child$$ = $APP.cljs.core.count($c__5548__auto__$jscomp$33_listener$jscomp$181_seq__48207_temp__5825__auto__$$), $c__5548__auto__$jscomp$33_listener$jscomp$181_seq__48207_temp__5825__auto__$$ = $G__48432_count__48209$$, $G__48432_count__48209$$ = $G__48434_child$$) : ($G__48434_child$$ = $APP.cljs.core.first($G__48433_chunk__48208_seq__48207__$1$$), clara.rules.listener.left_retract_BANG_($G__48434_child$$, $node$$, $tokens$$), $c__5548__auto__$jscomp$33_listener$jscomp$181_seq__48207_temp__5825__auto__$$ = 
        $APP.cljs.core.next($G__48433_chunk__48208_seq__48207__$1$$), $G__48433_chunk__48208_seq__48207__$1$$ = null, $G__48432_count__48209$$ = 0), $i__48210$$ = 0;
      } else {
        return null;
      }
    }
  }
};
clara.rules.listener.DelegatingListener.prototype.clara$rules$listener$ITransientEventListener$remove_accum_reduced_BANG_$arity$4 = function($c__5548__auto__$jscomp$34_listener$jscomp$182_seq__48214_temp__5825__auto__$$, $node$$, $join_bindings$$, $fact_bindings$$) {
  $c__5548__auto__$jscomp$34_listener$jscomp$182_seq__48214_temp__5825__auto__$$ = $APP.cljs.core.seq(this.children);
  for (var $G__48450_chunk__48215_seq__48214__$1$$ = null, $G__48449_count__48216$$ = 0, $i__48217$$ = 0;;) {
    if ($i__48217$$ < $G__48449_count__48216$$) {
      var $G__48451_child$$ = $G__48450_chunk__48215_seq__48214__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $i__48217$$);
      clara.rules.listener.remove_accum_reduced_BANG_($G__48451_child$$, $node$$, $join_bindings$$, $fact_bindings$$);
      $i__48217$$ += 1;
    } else {
      if ($c__5548__auto__$jscomp$34_listener$jscomp$182_seq__48214_temp__5825__auto__$$ = $APP.cljs.core.seq($c__5548__auto__$jscomp$34_listener$jscomp$182_seq__48214_temp__5825__auto__$$)) {
        $G__48450_chunk__48215_seq__48214__$1$$ = $c__5548__auto__$jscomp$34_listener$jscomp$182_seq__48214_temp__5825__auto__$$, $APP.cljs.core.chunked_seq_QMARK_($G__48450_chunk__48215_seq__48214__$1$$) ? ($c__5548__auto__$jscomp$34_listener$jscomp$182_seq__48214_temp__5825__auto__$$ = $APP.cljs.core.chunk_first($G__48450_chunk__48215_seq__48214__$1$$), $G__48449_count__48216$$ = $APP.cljs.core.chunk_rest($G__48450_chunk__48215_seq__48214__$1$$), $G__48450_chunk__48215_seq__48214__$1$$ = $c__5548__auto__$jscomp$34_listener$jscomp$182_seq__48214_temp__5825__auto__$$, 
        $G__48451_child$$ = $APP.cljs.core.count($c__5548__auto__$jscomp$34_listener$jscomp$182_seq__48214_temp__5825__auto__$$), $c__5548__auto__$jscomp$34_listener$jscomp$182_seq__48214_temp__5825__auto__$$ = $G__48449_count__48216$$, $G__48449_count__48216$$ = $G__48451_child$$) : ($G__48451_child$$ = $APP.cljs.core.first($G__48450_chunk__48215_seq__48214__$1$$), clara.rules.listener.remove_accum_reduced_BANG_($G__48451_child$$, $node$$, $join_bindings$$, $fact_bindings$$), $c__5548__auto__$jscomp$34_listener$jscomp$182_seq__48214_temp__5825__auto__$$ = 
        $APP.cljs.core.next($G__48450_chunk__48215_seq__48214__$1$$), $G__48450_chunk__48215_seq__48214__$1$$ = null, $G__48449_count__48216$$ = 0), $i__48217$$ = 0;
      } else {
        return null;
      }
    }
  }
};
clara.rules.listener.DelegatingListener.prototype.clara$rules$listener$ITransientEventListener$add_accum_reduced_BANG_$arity$5 = function($c__5548__auto__$jscomp$35_listener$jscomp$183_seq__48224_temp__5825__auto__$$, $node$$, $join_bindings$$, $result$$, $fact_bindings$$) {
  $c__5548__auto__$jscomp$35_listener$jscomp$183_seq__48224_temp__5825__auto__$$ = $APP.cljs.core.seq(this.children);
  for (var $G__48464_chunk__48225_seq__48224__$1$$ = null, $G__48463_count__48226$$ = 0, $i__48227$$ = 0;;) {
    if ($i__48227$$ < $G__48463_count__48226$$) {
      var $G__48465_child$$ = $G__48464_chunk__48225_seq__48224__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $i__48227$$);
      clara.rules.listener.add_accum_reduced_BANG_($G__48465_child$$, $node$$, $join_bindings$$, $result$$, $fact_bindings$$);
      $i__48227$$ += 1;
    } else {
      if ($c__5548__auto__$jscomp$35_listener$jscomp$183_seq__48224_temp__5825__auto__$$ = $APP.cljs.core.seq($c__5548__auto__$jscomp$35_listener$jscomp$183_seq__48224_temp__5825__auto__$$)) {
        $G__48464_chunk__48225_seq__48224__$1$$ = $c__5548__auto__$jscomp$35_listener$jscomp$183_seq__48224_temp__5825__auto__$$, $APP.cljs.core.chunked_seq_QMARK_($G__48464_chunk__48225_seq__48224__$1$$) ? ($c__5548__auto__$jscomp$35_listener$jscomp$183_seq__48224_temp__5825__auto__$$ = $APP.cljs.core.chunk_first($G__48464_chunk__48225_seq__48224__$1$$), $G__48463_count__48226$$ = $APP.cljs.core.chunk_rest($G__48464_chunk__48225_seq__48224__$1$$), $G__48464_chunk__48225_seq__48224__$1$$ = $c__5548__auto__$jscomp$35_listener$jscomp$183_seq__48224_temp__5825__auto__$$, 
        $G__48465_child$$ = $APP.cljs.core.count($c__5548__auto__$jscomp$35_listener$jscomp$183_seq__48224_temp__5825__auto__$$), $c__5548__auto__$jscomp$35_listener$jscomp$183_seq__48224_temp__5825__auto__$$ = $G__48463_count__48226$$, $G__48463_count__48226$$ = $G__48465_child$$) : ($G__48465_child$$ = $APP.cljs.core.first($G__48464_chunk__48225_seq__48224__$1$$), clara.rules.listener.add_accum_reduced_BANG_($G__48465_child$$, $node$$, $join_bindings$$, $result$$, $fact_bindings$$), $c__5548__auto__$jscomp$35_listener$jscomp$183_seq__48224_temp__5825__auto__$$ = 
        $APP.cljs.core.next($G__48464_chunk__48225_seq__48224__$1$$), $G__48464_chunk__48225_seq__48224__$1$$ = null, $G__48463_count__48226$$ = 0), $i__48227$$ = 0;
      } else {
        return null;
      }
    }
  }
};
clara.rules.listener.DelegatingListener.prototype.clara$rules$listener$ITransientEventListener$insert_facts_logical_BANG_$arity$4 = function($c__5548__auto__$jscomp$36_listener$jscomp$184_seq__48229_temp__5825__auto__$$, $node$$, $token$$, $facts$$) {
  $c__5548__auto__$jscomp$36_listener$jscomp$184_seq__48229_temp__5825__auto__$$ = $APP.cljs.core.seq(this.children);
  for (var $G__48479_chunk__48230_seq__48229__$1$$ = null, $G__48478_count__48231$$ = 0, $i__48232$$ = 0;;) {
    if ($i__48232$$ < $G__48478_count__48231$$) {
      var $G__48480_child$$ = $G__48479_chunk__48230_seq__48229__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $i__48232$$);
      clara.rules.listener.insert_facts_logical_BANG_($G__48480_child$$, $node$$, $token$$, $facts$$);
      $i__48232$$ += 1;
    } else {
      if ($c__5548__auto__$jscomp$36_listener$jscomp$184_seq__48229_temp__5825__auto__$$ = $APP.cljs.core.seq($c__5548__auto__$jscomp$36_listener$jscomp$184_seq__48229_temp__5825__auto__$$)) {
        $G__48479_chunk__48230_seq__48229__$1$$ = $c__5548__auto__$jscomp$36_listener$jscomp$184_seq__48229_temp__5825__auto__$$, $APP.cljs.core.chunked_seq_QMARK_($G__48479_chunk__48230_seq__48229__$1$$) ? ($c__5548__auto__$jscomp$36_listener$jscomp$184_seq__48229_temp__5825__auto__$$ = $APP.cljs.core.chunk_first($G__48479_chunk__48230_seq__48229__$1$$), $G__48478_count__48231$$ = $APP.cljs.core.chunk_rest($G__48479_chunk__48230_seq__48229__$1$$), $G__48479_chunk__48230_seq__48229__$1$$ = $c__5548__auto__$jscomp$36_listener$jscomp$184_seq__48229_temp__5825__auto__$$, 
        $G__48480_child$$ = $APP.cljs.core.count($c__5548__auto__$jscomp$36_listener$jscomp$184_seq__48229_temp__5825__auto__$$), $c__5548__auto__$jscomp$36_listener$jscomp$184_seq__48229_temp__5825__auto__$$ = $G__48478_count__48231$$, $G__48478_count__48231$$ = $G__48480_child$$) : ($G__48480_child$$ = $APP.cljs.core.first($G__48479_chunk__48230_seq__48229__$1$$), clara.rules.listener.insert_facts_logical_BANG_($G__48480_child$$, $node$$, $token$$, $facts$$), $c__5548__auto__$jscomp$36_listener$jscomp$184_seq__48229_temp__5825__auto__$$ = 
        $APP.cljs.core.next($G__48479_chunk__48230_seq__48229__$1$$), $G__48479_chunk__48230_seq__48229__$1$$ = null, $G__48478_count__48231$$ = 0), $i__48232$$ = 0;
      } else {
        return null;
      }
    }
  }
};
clara.rules.listener.DelegatingListener.prototype.clara$rules$listener$ITransientEventListener$fire_activation_BANG_$arity$3 = function($c__5548__auto__$jscomp$37_listener$jscomp$185_seq__48234_temp__5825__auto__$$, $activation$$, $resulting_operations$$) {
  $c__5548__auto__$jscomp$37_listener$jscomp$185_seq__48234_temp__5825__auto__$$ = $APP.cljs.core.seq(this.children);
  for (var $G__48491_chunk__48235_seq__48234__$1$$ = null, $G__48490_count__48236$$ = 0, $i__48237$$ = 0;;) {
    if ($i__48237$$ < $G__48490_count__48236$$) {
      var $G__48492_child$$ = $G__48491_chunk__48235_seq__48234__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $i__48237$$);
      clara.rules.listener.fire_activation_BANG_($G__48492_child$$, $activation$$, $resulting_operations$$);
      $i__48237$$ += 1;
    } else {
      if ($c__5548__auto__$jscomp$37_listener$jscomp$185_seq__48234_temp__5825__auto__$$ = $APP.cljs.core.seq($c__5548__auto__$jscomp$37_listener$jscomp$185_seq__48234_temp__5825__auto__$$)) {
        $G__48491_chunk__48235_seq__48234__$1$$ = $c__5548__auto__$jscomp$37_listener$jscomp$185_seq__48234_temp__5825__auto__$$, $APP.cljs.core.chunked_seq_QMARK_($G__48491_chunk__48235_seq__48234__$1$$) ? ($c__5548__auto__$jscomp$37_listener$jscomp$185_seq__48234_temp__5825__auto__$$ = $APP.cljs.core.chunk_first($G__48491_chunk__48235_seq__48234__$1$$), $G__48490_count__48236$$ = $APP.cljs.core.chunk_rest($G__48491_chunk__48235_seq__48234__$1$$), $G__48491_chunk__48235_seq__48234__$1$$ = $c__5548__auto__$jscomp$37_listener$jscomp$185_seq__48234_temp__5825__auto__$$, 
        $G__48492_child$$ = $APP.cljs.core.count($c__5548__auto__$jscomp$37_listener$jscomp$185_seq__48234_temp__5825__auto__$$), $c__5548__auto__$jscomp$37_listener$jscomp$185_seq__48234_temp__5825__auto__$$ = $G__48490_count__48236$$, $G__48490_count__48236$$ = $G__48492_child$$) : ($G__48492_child$$ = $APP.cljs.core.first($G__48491_chunk__48235_seq__48234__$1$$), clara.rules.listener.fire_activation_BANG_($G__48492_child$$, $activation$$, $resulting_operations$$), $c__5548__auto__$jscomp$37_listener$jscomp$185_seq__48234_temp__5825__auto__$$ = 
        $APP.cljs.core.next($G__48491_chunk__48235_seq__48234__$1$$), $G__48491_chunk__48235_seq__48234__$1$$ = null, $G__48490_count__48236$$ = 0), $i__48237$$ = 0;
      } else {
        return null;
      }
    }
  }
};
clara.rules.listener.DelegatingListener.prototype.clara$rules$listener$ITransientEventListener$insert_facts_BANG_$arity$4 = function($c__5548__auto__$jscomp$38_listener$jscomp$186_seq__48239_temp__5825__auto__$$, $node$$, $token$$, $facts$$) {
  $c__5548__auto__$jscomp$38_listener$jscomp$186_seq__48239_temp__5825__auto__$$ = $APP.cljs.core.seq(this.children);
  for (var $G__48503_chunk__48240_seq__48239__$1$$ = null, $G__48502_count__48241$$ = 0, $i__48242$$ = 0;;) {
    if ($i__48242$$ < $G__48502_count__48241$$) {
      var $G__48504_child$$ = $G__48503_chunk__48240_seq__48239__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $i__48242$$);
      clara.rules.listener.insert_facts_BANG_($G__48504_child$$, $node$$, $token$$, $facts$$);
      $i__48242$$ += 1;
    } else {
      if ($c__5548__auto__$jscomp$38_listener$jscomp$186_seq__48239_temp__5825__auto__$$ = $APP.cljs.core.seq($c__5548__auto__$jscomp$38_listener$jscomp$186_seq__48239_temp__5825__auto__$$)) {
        $G__48503_chunk__48240_seq__48239__$1$$ = $c__5548__auto__$jscomp$38_listener$jscomp$186_seq__48239_temp__5825__auto__$$, $APP.cljs.core.chunked_seq_QMARK_($G__48503_chunk__48240_seq__48239__$1$$) ? ($c__5548__auto__$jscomp$38_listener$jscomp$186_seq__48239_temp__5825__auto__$$ = $APP.cljs.core.chunk_first($G__48503_chunk__48240_seq__48239__$1$$), $G__48502_count__48241$$ = $APP.cljs.core.chunk_rest($G__48503_chunk__48240_seq__48239__$1$$), $G__48503_chunk__48240_seq__48239__$1$$ = $c__5548__auto__$jscomp$38_listener$jscomp$186_seq__48239_temp__5825__auto__$$, 
        $G__48504_child$$ = $APP.cljs.core.count($c__5548__auto__$jscomp$38_listener$jscomp$186_seq__48239_temp__5825__auto__$$), $c__5548__auto__$jscomp$38_listener$jscomp$186_seq__48239_temp__5825__auto__$$ = $G__48502_count__48241$$, $G__48502_count__48241$$ = $G__48504_child$$) : ($G__48504_child$$ = $APP.cljs.core.first($G__48503_chunk__48240_seq__48239__$1$$), clara.rules.listener.insert_facts_BANG_($G__48504_child$$, $node$$, $token$$, $facts$$), $c__5548__auto__$jscomp$38_listener$jscomp$186_seq__48239_temp__5825__auto__$$ = 
        $APP.cljs.core.next($G__48503_chunk__48240_seq__48239__$1$$), $G__48503_chunk__48240_seq__48239__$1$$ = null, $G__48502_count__48241$$ = 0), $i__48242$$ = 0;
      } else {
        return null;
      }
    }
  }
};
clara.rules.listener.DelegatingListener.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$3091$children], null);
};
clara.rules.listener.DelegatingListener.cljs$lang$type = !0;
clara.rules.listener.DelegatingListener.cljs$lang$ctorStr = "clara.rules.listener/DelegatingListener";
clara.rules.listener.DelegatingListener.cljs$lang$ctorPrWriter = function($this__5310__auto__$$, $writer__5311__auto__$$, $opt__5312__auto__$$) {
  return $APP.cljs.core._write($writer__5311__auto__$$, "clara.rules.listener/DelegatingListener");
};
clara.rules.listener.__GT_DelegatingListener = function($children$$) {
  return new clara.rules.listener.DelegatingListener($children$$);
};
clara.rules.listener.PersistentDelegatingListener = function($children$$) {
  this.children = $children$$;
};
clara.rules.listener.PersistentDelegatingListener.prototype.clara$rules$listener$IPersistentEventListener$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.listener.PersistentDelegatingListener.prototype.clara$rules$listener$IPersistentEventListener$to_transient$arity$1 = function($listener$$) {
  return new clara.rules.listener.DelegatingListener($APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(clara.rules.listener.to_transient, this.children));
};
clara.rules.listener.PersistentDelegatingListener.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$3091$children], null);
};
clara.rules.listener.PersistentDelegatingListener.cljs$lang$type = !0;
clara.rules.listener.PersistentDelegatingListener.cljs$lang$ctorStr = "clara.rules.listener/PersistentDelegatingListener";
clara.rules.listener.PersistentDelegatingListener.cljs$lang$ctorPrWriter = function($this__5310__auto__$$, $writer__5311__auto__$$, $opt__5312__auto__$$) {
  return $APP.cljs.core._write($writer__5311__auto__$$, "clara.rules.listener/PersistentDelegatingListener");
};
clara.rules.listener.__GT_PersistentDelegatingListener = function($children$$) {
  return new clara.rules.listener.PersistentDelegatingListener($children$$);
};
clara.rules.listener.delegating_listener = function($children$$) {
  return new clara.rules.listener.PersistentDelegatingListener($children$$);
};
clara.rules.listener.null_listener_QMARK_ = function($listener$$) {
  return $listener$$ instanceof clara.rules.listener.NullListener;
};
clara.rules.listener.get_children = function($listener$$) {
  return $listener$$.children;
};
clara.rules.listener.default_listener = new clara.rules.listener.NullListener();
clara.rules.listener.flatten_listener = function($listener$$) {
  return clara.rules.listener.null_listener_QMARK_($listener$$) ? $APP.cljs.core.PersistentVector.EMPTY : clara.rules.listener.get_children($listener$$);
};
clara.rules.platform = {};
clara.rules.platform.throw_error = function($description$$) {
  throw Error($description$$);
};
clara.rules.platform.query_param = function($p$$) {
  return $p$$ instanceof $APP.cljs.core.Keyword ? $p$$ : $p$$ instanceof $APP.cljs.core.Symbol ? $APP.cljs.core.keyword.cljs$core$IFn$_invoke$arity$1($p$$) : clara.rules.platform.throw_error(["Query bindings must be specified as a keyword or symbol: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($p$$)].join(""));
};
clara.rules.platform.group_by_seq = $APP.cljs.core.comp.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.seq, $APP.cljs.core.group_by);
clara.rules.platform.tuned_group_by = $APP.cljs.core.group_by;
clara.rules.update_cache = {};
clara.rules.update_cache.core = {};
clara.rules.update_cache.core.PendingUpdate = function($type$$, $facts$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.type = $type$$;
  this.facts = $facts$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
clara.rules.update_cache.core.PendingUpdate.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
clara.rules.update_cache.core.PendingUpdate.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k48061$$, $else__5326__auto__$$) {
  switch($k48061$$ instanceof $APP.cljs.core.Keyword ? $k48061$$.fqn : null) {
    case "type":
      return this.type;
    case "facts":
      return this.facts;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k48061$$, $else__5326__auto__$$);
  }
};
clara.rules.update_cache.core.PendingUpdate.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__48069_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__48069_v__5348__auto__$$, 0, null);
    $p__48069_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__48069_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__48069_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__48069_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
clara.rules.update_cache.core.PendingUpdate.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#clara.rules.update-cache.core.PendingUpdate{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$139$type, this.type], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3092$facts, this.facts], null)], 
  null), this.__extmap));
};
clara.rules.update_cache.core.PendingUpdate.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__48060$$) {
  return new $APP.cljs.core.RecordIter(0, this, 2, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$139$type, cljs$cst$3092$facts], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
clara.rules.update_cache.core.PendingUpdate.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
clara.rules.update_cache.core.PendingUpdate.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new clara.rules.update_cache.core.PendingUpdate(this.type, this.facts, this.__meta, this.__extmap, this.__hash);
};
clara.rules.update_cache.core.PendingUpdate.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 2 + $APP.cljs.core.count(this.__extmap);
};
clara.rules.update_cache.core.PendingUpdate.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$92_h__5134__auto____$1$jscomp$92_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$92_h__5134__auto____$1$jscomp$92_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$92_h__5134__auto____$1$jscomp$92_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$92_h__5134__auto____$1$jscomp$92_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$92_h__5134__auto____$1$jscomp$92_this__5319__auto__$$ = -1762937131 ^ $APP.cljs.core.hash_unordered_coll(this);
};
clara.rules.update_cache.core.PendingUpdate.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this48062$$, $other48063$$) {
  return $other48063$$ != null && this.constructor === $other48063$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.type, $other48063$$.type) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.facts, $other48063$$.facts) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other48063$$.__extmap);
};
clara.rules.update_cache.core.PendingUpdate.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$139$type, null, cljs$cst$3092$facts, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new clara.rules.update_cache.core.PendingUpdate(this.type, this.facts, 
  this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
clara.rules.update_cache.core.PendingUpdate.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k48061$$) {
  switch($k48061$$ instanceof $APP.cljs.core.Keyword ? $k48061$$.fqn : null) {
    case "type":
    case "facts":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k48061$$);
  }
};
clara.rules.update_cache.core.PendingUpdate.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__48089_this__5331__auto__$$, $k__5332__auto__$$, $G__48060$$) {
  $pred__48089_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__48089_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__48089_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$139$type, $k__5332__auto__$$) : $pred__48089_this__5331__auto__$$.call(null, $APP.cljs$cst$139$type, $k__5332__auto__$$)) ? new clara.rules.update_cache.core.PendingUpdate($G__48060$$, this.facts, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__48089_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__48089_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3092$facts, 
  $k__5332__auto__$$) : $pred__48089_this__5331__auto__$$.call(null, cljs$cst$3092$facts, $k__5332__auto__$$)) ? new clara.rules.update_cache.core.PendingUpdate(this.type, $G__48060$$, this.__meta, this.__extmap, null) : new clara.rules.update_cache.core.PendingUpdate(this.type, this.facts, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__48060$$), null);
};
clara.rules.update_cache.core.PendingUpdate.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$139$type, this.type, null), new $APP.cljs.core.MapEntry(cljs$cst$3092$facts, this.facts, null)], null), this.__extmap));
};
clara.rules.update_cache.core.PendingUpdate.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__48060$$) {
  return new clara.rules.update_cache.core.PendingUpdate(this.type, this.facts, $G__48060$$, this.__extmap, this.__hash);
};
clara.rules.update_cache.core.PendingUpdate.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
clara.rules.update_cache.core.PendingUpdate.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$420$type, cljs$cst$3093$facts], null);
};
clara.rules.update_cache.core.PendingUpdate.cljs$lang$type = !0;
clara.rules.update_cache.core.PendingUpdate.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "clara.rules.update-cache.core/PendingUpdate", null, 1, null);
};
clara.rules.update_cache.core.PendingUpdate.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "clara.rules.update-cache.core/PendingUpdate");
};
clara.rules.update_cache.core.__GT_PendingUpdate = function($type$$, $facts$$) {
  return new clara.rules.update_cache.core.PendingUpdate($type$$, $facts$$, null, null, null);
};
clara.rules.update_cache.core.map__GT_PendingUpdate = function($G__48067$$) {
  var $G__48097$jscomp$inline_5308_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__48067$$, $APP.cljs$cst$139$type, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$3092$facts], 0));
  $G__48097$jscomp$inline_5308_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__48067$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__48097$jscomp$inline_5308_extmap__5365__auto__$$) : $G__48097$jscomp$inline_5308_extmap__5365__auto__$$;
  return new clara.rules.update_cache.core.PendingUpdate($APP.cljs$cst$139$type.cljs$core$IFn$_invoke$arity$1($G__48067$$), cljs$cst$3092$facts.cljs$core$IFn$_invoke$arity$1($G__48067$$), null, $APP.cljs.core.not_empty($G__48097$jscomp$inline_5308_extmap__5365__auto__$$), null);
};
clara.rules.update_cache.core.UpdateCache = function() {
};
var clara$rules$update_cache$core$UpdateCache$add_insertions_BANG_$dyn_48105 = function($this$$$, $facts$$) {
  var $m__5372__auto__$jscomp$334_m__5374__auto__$$ = clara.rules.update_cache.core.add_insertions_BANG_[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
  if ($m__5372__auto__$jscomp$334_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$334_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$334_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($this$$$, $facts$$) : $m__5372__auto__$jscomp$334_m__5374__auto__$$.call(null, $this$$$, $facts$$);
  }
  $m__5372__auto__$jscomp$334_m__5374__auto__$$ = clara.rules.update_cache.core.add_insertions_BANG_._;
  if ($m__5372__auto__$jscomp$334_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$334_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$334_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($this$$$, $facts$$) : $m__5372__auto__$jscomp$334_m__5374__auto__$$.call(null, $this$$$, $facts$$);
  }
  throw $APP.cljs.core.missing_protocol("UpdateCache.add-insertions!", $this$$$);
};
clara.rules.update_cache.core.add_insertions_BANG_ = function($this$$$, $facts$$) {
  return $this$$$ != null && $this$$$.clara$rules$update_cache$core$UpdateCache$add_insertions_BANG_$arity$2 != null ? $this$$$.clara$rules$update_cache$core$UpdateCache$add_insertions_BANG_$arity$2($this$$$, $facts$$) : clara$rules$update_cache$core$UpdateCache$add_insertions_BANG_$dyn_48105($this$$$, $facts$$);
};
var clara$rules$update_cache$core$UpdateCache$add_retractions_BANG_$dyn_48106 = function($this$$$, $facts$$) {
  var $m__5372__auto__$jscomp$335_m__5374__auto__$$ = clara.rules.update_cache.core.add_retractions_BANG_[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
  if ($m__5372__auto__$jscomp$335_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$335_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$335_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($this$$$, $facts$$) : $m__5372__auto__$jscomp$335_m__5374__auto__$$.call(null, $this$$$, $facts$$);
  }
  $m__5372__auto__$jscomp$335_m__5374__auto__$$ = clara.rules.update_cache.core.add_retractions_BANG_._;
  if ($m__5372__auto__$jscomp$335_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$335_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$335_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($this$$$, $facts$$) : $m__5372__auto__$jscomp$335_m__5374__auto__$$.call(null, $this$$$, $facts$$);
  }
  throw $APP.cljs.core.missing_protocol("UpdateCache.add-retractions!", $this$$$);
};
clara.rules.update_cache.core.add_retractions_BANG_ = function($this$$$, $facts$$) {
  return $this$$$ != null && $this$$$.clara$rules$update_cache$core$UpdateCache$add_retractions_BANG_$arity$2 != null ? $this$$$.clara$rules$update_cache$core$UpdateCache$add_retractions_BANG_$arity$2($this$$$, $facts$$) : clara$rules$update_cache$core$UpdateCache$add_retractions_BANG_$dyn_48106($this$$$, $facts$$);
};
var clara$rules$update_cache$core$UpdateCache$get_updates_and_reset_BANG_$dyn_48107 = function($this$$$) {
  var $m__5372__auto__$jscomp$336_m__5374__auto__$$ = clara.rules.update_cache.core.get_updates_and_reset_BANG_[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
  if ($m__5372__auto__$jscomp$336_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$336_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$336_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$336_m__5374__auto__$$.call(null, $this$$$);
  }
  $m__5372__auto__$jscomp$336_m__5374__auto__$$ = clara.rules.update_cache.core.get_updates_and_reset_BANG_._;
  if ($m__5372__auto__$jscomp$336_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$336_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$336_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$336_m__5374__auto__$$.call(null, $this$$$);
  }
  throw $APP.cljs.core.missing_protocol("UpdateCache.get-updates-and-reset!", $this$$$);
};
clara.rules.update_cache.core.get_updates_and_reset_BANG_ = function($this$$$) {
  return $this$$$ != null && $this$$$.clara$rules$update_cache$core$UpdateCache$get_updates_and_reset_BANG_$arity$1 != null ? $this$$$.clara$rules$update_cache$core$UpdateCache$get_updates_and_reset_BANG_$arity$1($this$$$) : clara$rules$update_cache$core$UpdateCache$get_updates_and_reset_BANG_$dyn_48107($this$$$);
};
clara.rules.update_cache.core.OrderedUpdateCache = function($updates$$) {
  this.updates = $updates$$;
};
clara.rules.update_cache.core.OrderedUpdateCache.prototype.clara$rules$update_cache$core$UpdateCache$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.update_cache.core.OrderedUpdateCache.prototype.clara$rules$update_cache$core$UpdateCache$add_insertions_BANG_$arity$2 = function($this$$$, $facts$$) {
  return $APP.cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$3(this.updates, $APP.cljs.core.into, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [clara.rules.update_cache.core.__GT_PendingUpdate(cljs$cst$3094$insert, $facts$$)], null));
};
clara.rules.update_cache.core.OrderedUpdateCache.prototype.clara$rules$update_cache$core$UpdateCache$add_retractions_BANG_$arity$2 = function($this$$$, $facts$$) {
  return $APP.cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$3(this.updates, $APP.cljs.core.into, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [clara.rules.update_cache.core.__GT_PendingUpdate(cljs$cst$3095$retract, $facts$$)], null));
};
clara.rules.update_cache.core.OrderedUpdateCache.prototype.clara$rules$update_cache$core$UpdateCache$get_updates_and_reset_BANG_$arity$1 = function($current_updates_this$$$) {
  $current_updates_this$$$ = $APP.cljs.core.deref(this.updates);
  $APP.cljs.core.reset_BANG_(this.updates, $APP.cljs.core.PersistentVector.EMPTY);
  return $APP.cljs.core.partition_by.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$139$type, $current_updates_this$$$);
};
clara.rules.update_cache.core.OrderedUpdateCache.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3096$updates], null);
};
clara.rules.update_cache.core.OrderedUpdateCache.cljs$lang$type = !0;
clara.rules.update_cache.core.OrderedUpdateCache.cljs$lang$ctorStr = "clara.rules.update-cache.core/OrderedUpdateCache";
clara.rules.update_cache.core.OrderedUpdateCache.cljs$lang$ctorPrWriter = function($this__5310__auto__$$, $writer__5311__auto__$$, $opt__5312__auto__$$) {
  return $APP.cljs.core._write($writer__5311__auto__$$, "clara.rules.update-cache.core/OrderedUpdateCache");
};
clara.rules.update_cache.core.__GT_OrderedUpdateCache = function($updates$$) {
  return new clara.rules.update_cache.core.OrderedUpdateCache($updates$$);
};
clara.rules.update_cache.core.get_ordered_update_cache = function() {
  return new clara.rules.update_cache.core.OrderedUpdateCache($APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.PersistentVector.EMPTY));
};
clara.rules.engine = {};
clara.rules.engine.Accumulator = function($initial_value$$, $retract_fn$$, $reduce_fn$$, $combine_fn$$, $convert_return_fn$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.initial_value = $initial_value$$;
  this.retract_fn = $retract_fn$$;
  this.reduce_fn = $reduce_fn$$;
  this.combine_fn = $combine_fn$$;
  this.convert_return_fn = $convert_return_fn$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
clara.rules.engine.Accumulator.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
clara.rules.engine.Accumulator.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k48561$$, $else__5326__auto__$$) {
  switch($k48561$$ instanceof $APP.cljs.core.Keyword ? $k48561$$.fqn : null) {
    case "initial-value":
      return this.initial_value;
    case "retract-fn":
      return this.retract_fn;
    case "reduce-fn":
      return this.reduce_fn;
    case "combine-fn":
      return this.combine_fn;
    case "convert-return-fn":
      return this.convert_return_fn;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k48561$$, $else__5326__auto__$$);
  }
};
clara.rules.engine.Accumulator.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__48566_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__48566_v__5348__auto__$$, 0, null);
    $p__48566_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__48566_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__48566_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__48566_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
clara.rules.engine.Accumulator.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#clara.rules.engine.Accumulator{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3097$initial_value, this.initial_value], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3098$retract_fn, this.retract_fn], 
  null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3099$reduce_fn, this.reduce_fn], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3100$combine_fn, this.combine_fn], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3101$convert_return_fn, this.convert_return_fn], null)], null), this.__extmap));
};
clara.rules.engine.Accumulator.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__48560$$) {
  return new $APP.cljs.core.RecordIter(0, this, 5, new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3097$initial_value, cljs$cst$3098$retract_fn, cljs$cst$3099$reduce_fn, cljs$cst$3100$combine_fn, cljs$cst$3101$convert_return_fn], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
clara.rules.engine.Accumulator.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
clara.rules.engine.Accumulator.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new clara.rules.engine.Accumulator(this.initial_value, this.retract_fn, this.reduce_fn, this.combine_fn, this.convert_return_fn, this.__meta, this.__extmap, this.__hash);
};
clara.rules.engine.Accumulator.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 5 + $APP.cljs.core.count(this.__extmap);
};
clara.rules.engine.Accumulator.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$93_h__5134__auto____$1$jscomp$93_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$93_h__5134__auto____$1$jscomp$93_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$93_h__5134__auto____$1$jscomp$93_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$93_h__5134__auto____$1$jscomp$93_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$93_h__5134__auto____$1$jscomp$93_this__5319__auto__$$ = -184995004 ^ $APP.cljs.core.hash_unordered_coll(this);
};
clara.rules.engine.Accumulator.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this48562$$, $other48563$$) {
  return $other48563$$ != null && this.constructor === $other48563$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.initial_value, $other48563$$.initial_value) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.retract_fn, $other48563$$.retract_fn) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.reduce_fn, $other48563$$.reduce_fn) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.combine_fn, $other48563$$.combine_fn) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.convert_return_fn, 
  $other48563$$.convert_return_fn) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other48563$$.__extmap);
};
clara.rules.engine.Accumulator.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 5, [cljs$cst$3101$convert_return_fn, null, cljs$cst$3098$retract_fn, null, cljs$cst$3099$reduce_fn, null, cljs$cst$3097$initial_value, null, cljs$cst$3100$combine_fn, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, 
  this), this.__meta), $k__5334__auto__$$) : new clara.rules.engine.Accumulator(this.initial_value, this.retract_fn, this.reduce_fn, this.combine_fn, this.convert_return_fn, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
clara.rules.engine.Accumulator.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k48561$$) {
  switch($k48561$$ instanceof $APP.cljs.core.Keyword ? $k48561$$.fqn : null) {
    case "initial-value":
    case "retract-fn":
    case "reduce-fn":
    case "combine-fn":
    case "convert-return-fn":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k48561$$);
  }
};
clara.rules.engine.Accumulator.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__48571_this__5331__auto__$$, $k__5332__auto__$$, $G__48560$$) {
  $pred__48571_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__48571_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__48571_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3097$initial_value, $k__5332__auto__$$) : $pred__48571_this__5331__auto__$$.call(null, cljs$cst$3097$initial_value, $k__5332__auto__$$)) ? new clara.rules.engine.Accumulator($G__48560$$, this.retract_fn, this.reduce_fn, this.combine_fn, this.convert_return_fn, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__48571_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? 
  $pred__48571_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3098$retract_fn, $k__5332__auto__$$) : $pred__48571_this__5331__auto__$$.call(null, cljs$cst$3098$retract_fn, $k__5332__auto__$$)) ? new clara.rules.engine.Accumulator(this.initial_value, $G__48560$$, this.reduce_fn, this.combine_fn, this.convert_return_fn, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__48571_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__48571_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3099$reduce_fn, 
  $k__5332__auto__$$) : $pred__48571_this__5331__auto__$$.call(null, cljs$cst$3099$reduce_fn, $k__5332__auto__$$)) ? new clara.rules.engine.Accumulator(this.initial_value, this.retract_fn, $G__48560$$, this.combine_fn, this.convert_return_fn, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__48571_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__48571_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3100$combine_fn, $k__5332__auto__$$) : $pred__48571_this__5331__auto__$$.call(null, 
  cljs$cst$3100$combine_fn, $k__5332__auto__$$)) ? new clara.rules.engine.Accumulator(this.initial_value, this.retract_fn, this.reduce_fn, $G__48560$$, this.convert_return_fn, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__48571_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__48571_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3101$convert_return_fn, $k__5332__auto__$$) : $pred__48571_this__5331__auto__$$.call(null, cljs$cst$3101$convert_return_fn, $k__5332__auto__$$)) ? 
  new clara.rules.engine.Accumulator(this.initial_value, this.retract_fn, this.reduce_fn, this.combine_fn, $G__48560$$, this.__meta, this.__extmap, null) : new clara.rules.engine.Accumulator(this.initial_value, this.retract_fn, this.reduce_fn, this.combine_fn, this.convert_return_fn, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__48560$$), null);
};
clara.rules.engine.Accumulator.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry(cljs$cst$3097$initial_value, this.initial_value, null), new $APP.cljs.core.MapEntry(cljs$cst$3098$retract_fn, this.retract_fn, null), new $APP.cljs.core.MapEntry(cljs$cst$3099$reduce_fn, this.reduce_fn, null), new $APP.cljs.core.MapEntry(cljs$cst$3100$combine_fn, this.combine_fn, null), new $APP.cljs.core.MapEntry(cljs$cst$3101$convert_return_fn, 
  this.convert_return_fn, null)], null), this.__extmap));
};
clara.rules.engine.Accumulator.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__48560$$) {
  return new clara.rules.engine.Accumulator(this.initial_value, this.retract_fn, this.reduce_fn, this.combine_fn, this.convert_return_fn, $G__48560$$, this.__extmap, this.__hash);
};
clara.rules.engine.Accumulator.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
clara.rules.engine.Accumulator.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3102$initial_value, cljs$cst$3103$retract_fn, cljs$cst$3104$reduce_fn, cljs$cst$3105$combine_fn, cljs$cst$3106$convert_return_fn], null);
};
clara.rules.engine.Accumulator.cljs$lang$type = !0;
clara.rules.engine.Accumulator.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "clara.rules.engine/Accumulator", null, 1, null);
};
clara.rules.engine.Accumulator.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "clara.rules.engine/Accumulator");
};
clara.rules.engine.__GT_Accumulator = function($initial_value$$, $retract_fn$$, $reduce_fn$$, $combine_fn$$, $convert_return_fn$$) {
  return new clara.rules.engine.Accumulator($initial_value$$, $retract_fn$$, $reduce_fn$$, $combine_fn$$, $convert_return_fn$$, null, null, null);
};
clara.rules.engine.map__GT_Accumulator = function($G__48564$$) {
  var $G__48574$jscomp$inline_5310_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__48564$$, cljs$cst$3097$initial_value, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$3098$retract_fn, cljs$cst$3099$reduce_fn, cljs$cst$3100$combine_fn, cljs$cst$3101$convert_return_fn], 0));
  $G__48574$jscomp$inline_5310_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__48564$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__48574$jscomp$inline_5310_extmap__5365__auto__$$) : $G__48574$jscomp$inline_5310_extmap__5365__auto__$$;
  return new clara.rules.engine.Accumulator(cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1($G__48564$$), cljs$cst$3098$retract_fn.cljs$core$IFn$_invoke$arity$1($G__48564$$), cljs$cst$3099$reduce_fn.cljs$core$IFn$_invoke$arity$1($G__48564$$), cljs$cst$3100$combine_fn.cljs$core$IFn$_invoke$arity$1($G__48564$$), cljs$cst$3101$convert_return_fn.cljs$core$IFn$_invoke$arity$1($G__48564$$), null, $APP.cljs.core.not_empty($G__48574$jscomp$inline_5310_extmap__5365__auto__$$), null);
};
clara.rules.engine.Token = function($matches$$, $bindings$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.matches = $matches$$;
  this.bindings = $bindings$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
clara.rules.engine.Token.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
clara.rules.engine.Token.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k48576$$, $else__5326__auto__$$) {
  switch($k48576$$ instanceof $APP.cljs.core.Keyword ? $k48576$$.fqn : null) {
    case "matches":
      return this.matches;
    case "bindings":
      return this.bindings;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k48576$$, $else__5326__auto__$$);
  }
};
clara.rules.engine.Token.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__48581_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__48581_v__5348__auto__$$, 0, null);
    $p__48581_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__48581_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__48581_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__48581_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
clara.rules.engine.Token.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#clara.rules.engine.Token{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3107$matches, this.matches], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$394$bindings, this.bindings], null)], null), 
  this.__extmap));
};
clara.rules.engine.Token.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__48575$$) {
  return new $APP.cljs.core.RecordIter(0, this, 2, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3107$matches, $APP.cljs$cst$394$bindings], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
clara.rules.engine.Token.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
clara.rules.engine.Token.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new clara.rules.engine.Token(this.matches, this.bindings, this.__meta, this.__extmap, this.__hash);
};
clara.rules.engine.Token.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 2 + $APP.cljs.core.count(this.__extmap);
};
clara.rules.engine.Token.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$94_h__5134__auto____$1$jscomp$94_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$94_h__5134__auto____$1$jscomp$94_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$94_h__5134__auto____$1$jscomp$94_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$94_h__5134__auto____$1$jscomp$94_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$94_h__5134__auto____$1$jscomp$94_this__5319__auto__$$ = 684955489 ^ $APP.cljs.core.hash_unordered_coll(this);
};
clara.rules.engine.Token.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this48577$$, $other48578$$) {
  return $other48578$$ != null && this.constructor === $other48578$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.matches, $other48578$$.matches) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.bindings, $other48578$$.bindings) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other48578$$.__extmap);
};
clara.rules.engine.Token.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$394$bindings, null, cljs$cst$3107$matches, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new clara.rules.engine.Token(this.matches, this.bindings, 
  this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
clara.rules.engine.Token.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k48576$$) {
  switch($k48576$$ instanceof $APP.cljs.core.Keyword ? $k48576$$.fqn : null) {
    case "matches":
    case "bindings":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k48576$$);
  }
};
clara.rules.engine.Token.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__48586_this__5331__auto__$$, $k__5332__auto__$$, $G__48575$$) {
  $pred__48586_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__48586_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__48586_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3107$matches, $k__5332__auto__$$) : $pred__48586_this__5331__auto__$$.call(null, cljs$cst$3107$matches, $k__5332__auto__$$)) ? new clara.rules.engine.Token($G__48575$$, this.bindings, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__48586_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__48586_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$394$bindings, 
  $k__5332__auto__$$) : $pred__48586_this__5331__auto__$$.call(null, $APP.cljs$cst$394$bindings, $k__5332__auto__$$)) ? new clara.rules.engine.Token(this.matches, $G__48575$$, this.__meta, this.__extmap, null) : new clara.rules.engine.Token(this.matches, this.bindings, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__48575$$), null);
};
clara.rules.engine.Token.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry(cljs$cst$3107$matches, this.matches, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$394$bindings, this.bindings, null)], null), this.__extmap));
};
clara.rules.engine.Token.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__48575$$) {
  return new clara.rules.engine.Token(this.matches, this.bindings, $G__48575$$, this.__extmap, this.__hash);
};
clara.rules.engine.Token.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
clara.rules.engine.Token.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3108$matches, $APP.cljs$cst$375$bindings], null);
};
clara.rules.engine.Token.cljs$lang$type = !0;
clara.rules.engine.Token.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "clara.rules.engine/Token", null, 1, null);
};
clara.rules.engine.Token.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "clara.rules.engine/Token");
};
clara.rules.engine.__GT_Token = function($matches$$, $bindings$$) {
  return new clara.rules.engine.Token($matches$$, $bindings$$, null, null, null);
};
clara.rules.engine.map__GT_Token = function($G__48579$$) {
  var $G__48589$jscomp$inline_5312_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__48579$$, cljs$cst$3107$matches, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$394$bindings], 0));
  $G__48589$jscomp$inline_5312_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__48579$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__48589$jscomp$inline_5312_extmap__5365__auto__$$) : $G__48589$jscomp$inline_5312_extmap__5365__auto__$$;
  return new clara.rules.engine.Token(cljs$cst$3107$matches.cljs$core$IFn$_invoke$arity$1($G__48579$$), $APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($G__48579$$), null, $APP.cljs.core.not_empty($G__48589$jscomp$inline_5312_extmap__5365__auto__$$), null);
};
clara.rules.engine.Element = function($fact$$, $bindings$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.fact = $fact$$;
  this.bindings = $bindings$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
clara.rules.engine.Element.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
clara.rules.engine.Element.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k48591$$, $else__5326__auto__$$) {
  switch($k48591$$ instanceof $APP.cljs.core.Keyword ? $k48591$$.fqn : null) {
    case "fact":
      return this.fact;
    case "bindings":
      return this.bindings;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k48591$$, $else__5326__auto__$$);
  }
};
clara.rules.engine.Element.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__48596_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__48596_v__5348__auto__$$, 0, null);
    $p__48596_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__48596_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__48596_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__48596_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
clara.rules.engine.Element.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#clara.rules.engine.Element{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3109$fact, this.fact], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$394$bindings, this.bindings], null)], null), this.__extmap));
};
clara.rules.engine.Element.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__48590$$) {
  return new $APP.cljs.core.RecordIter(0, this, 2, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3109$fact, $APP.cljs$cst$394$bindings], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
clara.rules.engine.Element.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
clara.rules.engine.Element.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new clara.rules.engine.Element(this.fact, this.bindings, this.__meta, this.__extmap, this.__hash);
};
clara.rules.engine.Element.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 2 + $APP.cljs.core.count(this.__extmap);
};
clara.rules.engine.Element.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$95_h__5134__auto____$1$jscomp$95_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$95_h__5134__auto____$1$jscomp$95_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$95_h__5134__auto____$1$jscomp$95_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$95_h__5134__auto____$1$jscomp$95_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$95_h__5134__auto____$1$jscomp$95_this__5319__auto__$$ = 108136292 ^ $APP.cljs.core.hash_unordered_coll(this);
};
clara.rules.engine.Element.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this48592$$, $other48593$$) {
  return $other48593$$ != null && this.constructor === $other48593$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.fact, $other48593$$.fact) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.bindings, $other48593$$.bindings) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other48593$$.__extmap);
};
clara.rules.engine.Element.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$394$bindings, null, cljs$cst$3109$fact, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new clara.rules.engine.Element(this.fact, this.bindings, this.__meta, 
  $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
clara.rules.engine.Element.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k48591$$) {
  switch($k48591$$ instanceof $APP.cljs.core.Keyword ? $k48591$$.fqn : null) {
    case "fact":
    case "bindings":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k48591$$);
  }
};
clara.rules.engine.Element.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__48601_this__5331__auto__$$, $k__5332__auto__$$, $G__48590$$) {
  $pred__48601_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__48601_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__48601_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3109$fact, $k__5332__auto__$$) : $pred__48601_this__5331__auto__$$.call(null, cljs$cst$3109$fact, $k__5332__auto__$$)) ? new clara.rules.engine.Element($G__48590$$, this.bindings, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__48601_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__48601_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$394$bindings, 
  $k__5332__auto__$$) : $pred__48601_this__5331__auto__$$.call(null, $APP.cljs$cst$394$bindings, $k__5332__auto__$$)) ? new clara.rules.engine.Element(this.fact, $G__48590$$, this.__meta, this.__extmap, null) : new clara.rules.engine.Element(this.fact, this.bindings, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__48590$$), null);
};
clara.rules.engine.Element.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry(cljs$cst$3109$fact, this.fact, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$394$bindings, this.bindings, null)], null), this.__extmap));
};
clara.rules.engine.Element.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__48590$$) {
  return new clara.rules.engine.Element(this.fact, this.bindings, $G__48590$$, this.__extmap, this.__hash);
};
clara.rules.engine.Element.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
clara.rules.engine.Element.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3110$fact, $APP.cljs$cst$375$bindings], null);
};
clara.rules.engine.Element.cljs$lang$type = !0;
clara.rules.engine.Element.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "clara.rules.engine/Element", null, 1, null);
};
clara.rules.engine.Element.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "clara.rules.engine/Element");
};
clara.rules.engine.__GT_Element = function($fact$$, $bindings$$) {
  return new clara.rules.engine.Element($fact$$, $bindings$$, null, null, null);
};
clara.rules.engine.map__GT_Element = function($G__48594$$) {
  var $G__48606$jscomp$inline_5314_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__48594$$, cljs$cst$3109$fact, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$394$bindings], 0));
  $G__48606$jscomp$inline_5314_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__48594$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__48606$jscomp$inline_5314_extmap__5365__auto__$$) : $G__48606$jscomp$inline_5314_extmap__5365__auto__$$;
  return new clara.rules.engine.Element(cljs$cst$3109$fact.cljs$core$IFn$_invoke$arity$1($G__48594$$), $APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($G__48594$$), null, $APP.cljs.core.not_empty($G__48606$jscomp$inline_5314_extmap__5365__auto__$$), null);
};
clara.rules.engine.Activation = function($node$$, $token$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.node = $node$$;
  this.token = $token$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
clara.rules.engine.Activation.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
clara.rules.engine.Activation.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k48608$$, $else__5326__auto__$$) {
  switch($k48608$$ instanceof $APP.cljs.core.Keyword ? $k48608$$.fqn : null) {
    case "node":
      return this.node;
    case "token":
      return this.token;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k48608$$, $else__5326__auto__$$);
  }
};
clara.rules.engine.Activation.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__48615_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__48615_v__5348__auto__$$, 0, null);
    $p__48615_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__48615_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__48615_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__48615_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
clara.rules.engine.Activation.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#clara.rules.engine.Activation{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$3067$node, this.node], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$3068$token, this.token], null)], null), 
  this.__extmap));
};
clara.rules.engine.Activation.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__48607$$) {
  return new $APP.cljs.core.RecordIter(0, this, 2, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$3067$node, $APP.cljs$cst$3068$token], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
clara.rules.engine.Activation.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
clara.rules.engine.Activation.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new clara.rules.engine.Activation(this.node, this.token, this.__meta, this.__extmap, this.__hash);
};
clara.rules.engine.Activation.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 2 + $APP.cljs.core.count(this.__extmap);
};
clara.rules.engine.Activation.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$96_h__5134__auto____$1$jscomp$96_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$96_h__5134__auto____$1$jscomp$96_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$96_h__5134__auto____$1$jscomp$96_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$96_h__5134__auto____$1$jscomp$96_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$96_h__5134__auto____$1$jscomp$96_this__5319__auto__$$ = 1866209306 ^ $APP.cljs.core.hash_unordered_coll(this);
};
clara.rules.engine.Activation.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this48609$$, $other48610$$) {
  return $other48610$$ != null && this.constructor === $other48610$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.node, $other48610$$.node) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.token, $other48610$$.token) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other48610$$.__extmap);
};
clara.rules.engine.Activation.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$3067$node, null, $APP.cljs$cst$3068$token, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new clara.rules.engine.Activation(this.node, this.token, this.__meta, 
  $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
clara.rules.engine.Activation.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k48608$$) {
  switch($k48608$$ instanceof $APP.cljs.core.Keyword ? $k48608$$.fqn : null) {
    case "node":
    case "token":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k48608$$);
  }
};
clara.rules.engine.Activation.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__48620_this__5331__auto__$$, $k__5332__auto__$$, $G__48607$$) {
  $pred__48620_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__48620_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__48620_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$3067$node, $k__5332__auto__$$) : $pred__48620_this__5331__auto__$$.call(null, $APP.cljs$cst$3067$node, $k__5332__auto__$$)) ? new clara.rules.engine.Activation($G__48607$$, this.token, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__48620_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__48620_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$3068$token, 
  $k__5332__auto__$$) : $pred__48620_this__5331__auto__$$.call(null, $APP.cljs$cst$3068$token, $k__5332__auto__$$)) ? new clara.rules.engine.Activation(this.node, $G__48607$$, this.__meta, this.__extmap, null) : new clara.rules.engine.Activation(this.node, this.token, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__48607$$), null);
};
clara.rules.engine.Activation.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$3067$node, this.node, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$3068$token, this.token, null)], null), this.__extmap));
};
clara.rules.engine.Activation.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__48607$$) {
  return new clara.rules.engine.Activation(this.node, this.token, $G__48607$$, this.__extmap, this.__hash);
};
clara.rules.engine.Activation.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
clara.rules.engine.Activation.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$64$node, $APP.cljs$cst$3069$token], null);
};
clara.rules.engine.Activation.cljs$lang$type = !0;
clara.rules.engine.Activation.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "clara.rules.engine/Activation", null, 1, null);
};
clara.rules.engine.Activation.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "clara.rules.engine/Activation");
};
clara.rules.engine.__GT_Activation = function($node$$, $token$$) {
  return new clara.rules.engine.Activation($node$$, $token$$, null, null, null);
};
clara.rules.engine.map__GT_Activation = function($G__48611$$) {
  var $G__48623$jscomp$inline_5316_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__48611$$, $APP.cljs$cst$3067$node, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$3068$token], 0));
  $G__48623$jscomp$inline_5316_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__48611$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__48623$jscomp$inline_5316_extmap__5365__auto__$$) : $G__48623$jscomp$inline_5316_extmap__5365__auto__$$;
  return new clara.rules.engine.Activation($APP.cljs$cst$3067$node.cljs$core$IFn$_invoke$arity$1($G__48611$$), $APP.cljs$cst$3068$token.cljs$core$IFn$_invoke$arity$1($G__48611$$), null, $APP.cljs.core.not_empty($G__48623$jscomp$inline_5316_extmap__5365__auto__$$), null);
};
clara.rules.engine.empty_token = clara.rules.engine.__GT_Token($APP.cljs.core.PersistentVector.EMPTY, $APP.cljs.core.PersistentArrayMap.EMPTY);
clara.rules.engine.NegationResult = function($gen_rule_name$$, $ancestor_bindings$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.gen_rule_name = $gen_rule_name$$;
  this.ancestor_bindings = $ancestor_bindings$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
clara.rules.engine.NegationResult.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
clara.rules.engine.NegationResult.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k48625$$, $else__5326__auto__$$) {
  switch($k48625$$ instanceof $APP.cljs.core.Keyword ? $k48625$$.fqn : null) {
    case "gen-rule-name":
      return this.gen_rule_name;
    case "ancestor-bindings":
      return this.ancestor_bindings;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k48625$$, $else__5326__auto__$$);
  }
};
clara.rules.engine.NegationResult.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__48630_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__48630_v__5348__auto__$$, 0, null);
    $p__48630_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__48630_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__48630_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__48630_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
clara.rules.engine.NegationResult.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#clara.rules.engine.NegationResult{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3111$gen_rule_name, this.gen_rule_name], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3112$ancestor_bindings, this.ancestor_bindings], 
  null)], null), this.__extmap));
};
clara.rules.engine.NegationResult.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__48624$$) {
  return new $APP.cljs.core.RecordIter(0, this, 2, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3111$gen_rule_name, cljs$cst$3112$ancestor_bindings], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
clara.rules.engine.NegationResult.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
clara.rules.engine.NegationResult.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new clara.rules.engine.NegationResult(this.gen_rule_name, this.ancestor_bindings, this.__meta, this.__extmap, this.__hash);
};
clara.rules.engine.NegationResult.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 2 + $APP.cljs.core.count(this.__extmap);
};
clara.rules.engine.NegationResult.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$97_h__5134__auto____$1$jscomp$97_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$97_h__5134__auto____$1$jscomp$97_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$97_h__5134__auto____$1$jscomp$97_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$97_h__5134__auto____$1$jscomp$97_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$97_h__5134__auto____$1$jscomp$97_this__5319__auto__$$ = 1778368605 ^ $APP.cljs.core.hash_unordered_coll(this);
};
clara.rules.engine.NegationResult.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this48626$$, $other48627$$) {
  return $other48627$$ != null && this.constructor === $other48627$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.gen_rule_name, $other48627$$.gen_rule_name) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.ancestor_bindings, $other48627$$.ancestor_bindings) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other48627$$.__extmap);
};
clara.rules.engine.NegationResult.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [cljs$cst$3112$ancestor_bindings, null, cljs$cst$3111$gen_rule_name, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new clara.rules.engine.NegationResult(this.gen_rule_name, 
  this.ancestor_bindings, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
clara.rules.engine.NegationResult.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k48625$$) {
  switch($k48625$$ instanceof $APP.cljs.core.Keyword ? $k48625$$.fqn : null) {
    case "gen-rule-name":
    case "ancestor-bindings":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k48625$$);
  }
};
clara.rules.engine.NegationResult.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__48635_this__5331__auto__$$, $k__5332__auto__$$, $G__48624$$) {
  $pred__48635_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__48635_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__48635_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3111$gen_rule_name, $k__5332__auto__$$) : $pred__48635_this__5331__auto__$$.call(null, cljs$cst$3111$gen_rule_name, $k__5332__auto__$$)) ? new clara.rules.engine.NegationResult($G__48624$$, this.ancestor_bindings, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__48635_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? 
  $pred__48635_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3112$ancestor_bindings, $k__5332__auto__$$) : $pred__48635_this__5331__auto__$$.call(null, cljs$cst$3112$ancestor_bindings, $k__5332__auto__$$)) ? new clara.rules.engine.NegationResult(this.gen_rule_name, $G__48624$$, this.__meta, this.__extmap, null) : new clara.rules.engine.NegationResult(this.gen_rule_name, this.ancestor_bindings, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, 
  $G__48624$$), null);
};
clara.rules.engine.NegationResult.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry(cljs$cst$3111$gen_rule_name, this.gen_rule_name, null), new $APP.cljs.core.MapEntry(cljs$cst$3112$ancestor_bindings, this.ancestor_bindings, null)], null), this.__extmap));
};
clara.rules.engine.NegationResult.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__48624$$) {
  return new clara.rules.engine.NegationResult(this.gen_rule_name, this.ancestor_bindings, $G__48624$$, this.__extmap, this.__hash);
};
clara.rules.engine.NegationResult.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
clara.rules.engine.NegationResult.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3113$gen_rule_name, cljs$cst$3114$ancestor_bindings], null);
};
clara.rules.engine.NegationResult.cljs$lang$type = !0;
clara.rules.engine.NegationResult.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "clara.rules.engine/NegationResult", null, 1, null);
};
clara.rules.engine.NegationResult.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "clara.rules.engine/NegationResult");
};
clara.rules.engine.__GT_NegationResult = function($gen_rule_name$$, $ancestor_bindings$$) {
  return new clara.rules.engine.NegationResult($gen_rule_name$$, $ancestor_bindings$$, null, null, null);
};
clara.rules.engine.map__GT_NegationResult = function($G__48628$$) {
  var $G__48640$jscomp$inline_5318_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__48628$$, cljs$cst$3111$gen_rule_name, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$3112$ancestor_bindings], 0));
  $G__48640$jscomp$inline_5318_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__48628$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__48640$jscomp$inline_5318_extmap__5365__auto__$$) : $G__48640$jscomp$inline_5318_extmap__5365__auto__$$;
  return new clara.rules.engine.NegationResult(cljs$cst$3111$gen_rule_name.cljs$core$IFn$_invoke$arity$1($G__48628$$), cljs$cst$3112$ancestor_bindings.cljs$core$IFn$_invoke$arity$1($G__48628$$), null, $APP.cljs.core.not_empty($G__48640$jscomp$inline_5318_extmap__5365__auto__$$), null);
};
$APP.cljs.core.derive.cljs$core$IFn$_invoke$arity$2(clara.rules.engine.NegationResult, cljs$cst$3115$clara_DOT_rules_DOT_engine_SLASH_system_type);
clara.rules.engine.ISession = function() {
};
var clara$rules$engine$ISession$insert$dyn_50795 = function($session$$, $facts$$) {
  var $m__5372__auto__$jscomp$337_m__5374__auto__$$ = clara.rules.engine.insert[$APP.goog.typeOf($session$$ == null ? null : $session$$)];
  if ($m__5372__auto__$jscomp$337_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$337_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$337_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($session$$, $facts$$) : $m__5372__auto__$jscomp$337_m__5374__auto__$$.call(null, $session$$, $facts$$);
  }
  $m__5372__auto__$jscomp$337_m__5374__auto__$$ = clara.rules.engine.insert._;
  if ($m__5372__auto__$jscomp$337_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$337_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$337_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($session$$, $facts$$) : $m__5372__auto__$jscomp$337_m__5374__auto__$$.call(null, $session$$, $facts$$);
  }
  throw $APP.cljs.core.missing_protocol("ISession.insert", $session$$);
};
clara.rules.engine.insert = function($session$$, $facts$$) {
  return $session$$ != null && $session$$.clara$rules$engine$ISession$insert$arity$2 != null ? $session$$.clara$rules$engine$ISession$insert$arity$2($session$$, $facts$$) : clara$rules$engine$ISession$insert$dyn_50795($session$$, $facts$$);
};
var clara$rules$engine$ISession$retract$dyn_50796 = function($session$$, $facts$$) {
  var $m__5372__auto__$jscomp$338_m__5374__auto__$$ = clara.rules.engine.retract[$APP.goog.typeOf($session$$ == null ? null : $session$$)];
  if ($m__5372__auto__$jscomp$338_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$338_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$338_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($session$$, $facts$$) : $m__5372__auto__$jscomp$338_m__5374__auto__$$.call(null, $session$$, $facts$$);
  }
  $m__5372__auto__$jscomp$338_m__5374__auto__$$ = clara.rules.engine.retract._;
  if ($m__5372__auto__$jscomp$338_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$338_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$338_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($session$$, $facts$$) : $m__5372__auto__$jscomp$338_m__5374__auto__$$.call(null, $session$$, $facts$$);
  }
  throw $APP.cljs.core.missing_protocol("ISession.retract", $session$$);
};
clara.rules.engine.retract = function($session$$, $facts$$) {
  return $session$$ != null && $session$$.clara$rules$engine$ISession$retract$arity$2 != null ? $session$$.clara$rules$engine$ISession$retract$arity$2($session$$, $facts$$) : clara$rules$engine$ISession$retract$dyn_50796($session$$, $facts$$);
};
var clara$rules$engine$ISession$fire_rules$dyn_50799 = function() {
  var $G__50800$$ = null, $G__50800__1$$ = function($session$$) {
    var $m__5372__auto__$jscomp$339_m__5374__auto__$$ = clara.rules.engine.fire_rules[$APP.goog.typeOf($session$$ == null ? null : $session$$)];
    if ($m__5372__auto__$jscomp$339_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$339_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$339_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($session$$) : $m__5372__auto__$jscomp$339_m__5374__auto__$$.call(null, $session$$);
    }
    $m__5372__auto__$jscomp$339_m__5374__auto__$$ = clara.rules.engine.fire_rules._;
    if ($m__5372__auto__$jscomp$339_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$339_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$339_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($session$$) : $m__5372__auto__$jscomp$339_m__5374__auto__$$.call(null, $session$$);
    }
    throw $APP.cljs.core.missing_protocol("ISession.fire-rules", $session$$);
  }, $G__50800__2$$ = function($session$$, $opts$$) {
    var $m__5372__auto__$jscomp$340_m__5374__auto__$$ = clara.rules.engine.fire_rules[$APP.goog.typeOf($session$$ == null ? null : $session$$)];
    if ($m__5372__auto__$jscomp$340_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$340_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$340_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($session$$, $opts$$) : $m__5372__auto__$jscomp$340_m__5374__auto__$$.call(null, $session$$, $opts$$);
    }
    $m__5372__auto__$jscomp$340_m__5374__auto__$$ = clara.rules.engine.fire_rules._;
    if ($m__5372__auto__$jscomp$340_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$340_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$340_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($session$$, $opts$$) : $m__5372__auto__$jscomp$340_m__5374__auto__$$.call(null, $session$$, $opts$$);
    }
    throw $APP.cljs.core.missing_protocol("ISession.fire-rules", $session$$);
  };
  $G__50800$$ = function($session$$, $opts$$) {
    switch(arguments.length) {
      case 1:
        return $G__50800__1$$.call(this, $session$$);
      case 2:
        return $G__50800__2$$.call(this, $session$$, $opts$$);
    }
    throw Error("Invalid arity: " + arguments.length);
  };
  $G__50800$$.cljs$core$IFn$_invoke$arity$1 = $G__50800__1$$;
  $G__50800$$.cljs$core$IFn$_invoke$arity$2 = $G__50800__2$$;
  return $G__50800$$;
}();
clara.rules.engine.fire_rules = function($var_args$$) {
  switch(arguments.length) {
    case 1:
      return clara.rules.engine.fire_rules.cljs$core$IFn$_invoke$arity$1(arguments[0]);
    case 2:
      return clara.rules.engine.fire_rules.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
clara.rules.engine.fire_rules.cljs$core$IFn$_invoke$arity$1 = function($session$$) {
  return $session$$ != null && $session$$.clara$rules$engine$ISession$fire_rules$arity$1 != null ? $session$$.clara$rules$engine$ISession$fire_rules$arity$1($session$$) : clara$rules$engine$ISession$fire_rules$dyn_50799($session$$);
};
clara.rules.engine.fire_rules.cljs$core$IFn$_invoke$arity$2 = function($session$$, $opts$$) {
  return $session$$ != null && $session$$.clara$rules$engine$ISession$fire_rules$arity$2 != null ? $session$$.clara$rules$engine$ISession$fire_rules$arity$2($session$$, $opts$$) : clara$rules$engine$ISession$fire_rules$dyn_50799($session$$, $opts$$);
};
clara.rules.engine.fire_rules.cljs$lang$maxFixedArity = 2;
var clara$rules$engine$ISession$query$dyn_50803 = function($session$$, $query$$, $params$$) {
  var $m__5372__auto__$jscomp$341_m__5374__auto__$$ = clara.rules.engine.query[$APP.goog.typeOf($session$$ == null ? null : $session$$)];
  if ($m__5372__auto__$jscomp$341_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$341_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$341_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($session$$, $query$$, $params$$) : $m__5372__auto__$jscomp$341_m__5374__auto__$$.call(null, $session$$, $query$$, $params$$);
  }
  $m__5372__auto__$jscomp$341_m__5374__auto__$$ = clara.rules.engine.query._;
  if ($m__5372__auto__$jscomp$341_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$341_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$341_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($session$$, $query$$, $params$$) : $m__5372__auto__$jscomp$341_m__5374__auto__$$.call(null, $session$$, $query$$, $params$$);
  }
  throw $APP.cljs.core.missing_protocol("ISession.query", $session$$);
};
clara.rules.engine.query = function($session$$, $query$$, $params$$) {
  return $session$$ != null && $session$$.clara$rules$engine$ISession$query$arity$3 != null ? $session$$.clara$rules$engine$ISession$query$arity$3($session$$, $query$$, $params$$) : clara$rules$engine$ISession$query$dyn_50803($session$$, $query$$, $params$$);
};
var clara$rules$engine$ISession$components$dyn_50805 = function($session$$) {
  var $m__5372__auto__$jscomp$342_m__5374__auto__$$ = clara.rules.engine.components[$APP.goog.typeOf($session$$ == null ? null : $session$$)];
  if ($m__5372__auto__$jscomp$342_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$342_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$342_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($session$$) : $m__5372__auto__$jscomp$342_m__5374__auto__$$.call(null, $session$$);
  }
  $m__5372__auto__$jscomp$342_m__5374__auto__$$ = clara.rules.engine.components._;
  if ($m__5372__auto__$jscomp$342_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$342_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$342_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($session$$) : $m__5372__auto__$jscomp$342_m__5374__auto__$$.call(null, $session$$);
  }
  throw $APP.cljs.core.missing_protocol("ISession.components", $session$$);
};
clara.rules.engine.components = function($session$$) {
  return $session$$ != null && $session$$.clara$rules$engine$ISession$components$arity$1 != null ? $session$$.clara$rules$engine$ISession$components$arity$1($session$$) : clara$rules$engine$ISession$components$dyn_50805($session$$);
};
clara.rules.engine.ILeftActivate = function() {
};
var clara$rules$engine$ILeftActivate$left_activate$dyn_50806 = function($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) {
  var $m__5372__auto__$jscomp$343_m__5374__auto__$$ = clara.rules.engine.left_activate[$APP.goog.typeOf($node$$ == null ? null : $node$$)];
  if ($m__5372__auto__$jscomp$343_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$343_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6 ? $m__5372__auto__$jscomp$343_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) : $m__5372__auto__$jscomp$343_m__5374__auto__$$.call(null, $node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$);
  }
  $m__5372__auto__$jscomp$343_m__5374__auto__$$ = clara.rules.engine.left_activate._;
  if ($m__5372__auto__$jscomp$343_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$343_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6 ? $m__5372__auto__$jscomp$343_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) : $m__5372__auto__$jscomp$343_m__5374__auto__$$.call(null, $node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$);
  }
  throw $APP.cljs.core.missing_protocol("ILeftActivate.left-activate", $node$$);
};
clara.rules.engine.left_activate = function($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) {
  return $node$$ != null && $node$$.clara$rules$engine$ILeftActivate$left_activate$arity$6 != null ? $node$$.clara$rules$engine$ILeftActivate$left_activate$arity$6($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) : clara$rules$engine$ILeftActivate$left_activate$dyn_50806($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$);
};
var clara$rules$engine$ILeftActivate$left_retract$dyn_50809 = function($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) {
  var $m__5372__auto__$jscomp$344_m__5374__auto__$$ = clara.rules.engine.left_retract[$APP.goog.typeOf($node$$ == null ? null : $node$$)];
  if ($m__5372__auto__$jscomp$344_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$344_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6 ? $m__5372__auto__$jscomp$344_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) : $m__5372__auto__$jscomp$344_m__5374__auto__$$.call(null, $node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$);
  }
  $m__5372__auto__$jscomp$344_m__5374__auto__$$ = clara.rules.engine.left_retract._;
  if ($m__5372__auto__$jscomp$344_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$344_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6 ? $m__5372__auto__$jscomp$344_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) : $m__5372__auto__$jscomp$344_m__5374__auto__$$.call(null, $node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$);
  }
  throw $APP.cljs.core.missing_protocol("ILeftActivate.left-retract", $node$$);
};
clara.rules.engine.left_retract = function($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) {
  return $node$$ != null && $node$$.clara$rules$engine$ILeftActivate$left_retract$arity$6 != null ? $node$$.clara$rules$engine$ILeftActivate$left_retract$arity$6($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) : clara$rules$engine$ILeftActivate$left_retract$dyn_50809($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$);
};
var clara$rules$engine$ILeftActivate$description$dyn_50813 = function($node$$) {
  var $m__5372__auto__$jscomp$345_m__5374__auto__$$ = clara.rules.engine.description[$APP.goog.typeOf($node$$ == null ? null : $node$$)];
  if ($m__5372__auto__$jscomp$345_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$345_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$345_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($node$$) : $m__5372__auto__$jscomp$345_m__5374__auto__$$.call(null, $node$$);
  }
  $m__5372__auto__$jscomp$345_m__5374__auto__$$ = clara.rules.engine.description._;
  if ($m__5372__auto__$jscomp$345_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$345_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$345_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($node$$) : $m__5372__auto__$jscomp$345_m__5374__auto__$$.call(null, $node$$);
  }
  throw $APP.cljs.core.missing_protocol("ILeftActivate.description", $node$$);
};
clara.rules.engine.description = function($node$$) {
  return $node$$ != null && $node$$.clara$rules$engine$ILeftActivate$description$arity$1 != null ? $node$$.clara$rules$engine$ILeftActivate$description$arity$1($node$$) : clara$rules$engine$ILeftActivate$description$dyn_50813($node$$);
};
var clara$rules$engine$ILeftActivate$get_join_keys$dyn_50814 = function($node$$) {
  var $m__5372__auto__$jscomp$346_m__5374__auto__$$ = clara.rules.engine.get_join_keys[$APP.goog.typeOf($node$$ == null ? null : $node$$)];
  if ($m__5372__auto__$jscomp$346_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$346_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$346_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($node$$) : $m__5372__auto__$jscomp$346_m__5374__auto__$$.call(null, $node$$);
  }
  $m__5372__auto__$jscomp$346_m__5374__auto__$$ = clara.rules.engine.get_join_keys._;
  if ($m__5372__auto__$jscomp$346_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$346_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$346_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($node$$) : $m__5372__auto__$jscomp$346_m__5374__auto__$$.call(null, $node$$);
  }
  throw $APP.cljs.core.missing_protocol("ILeftActivate.get-join-keys", $node$$);
};
clara.rules.engine.get_join_keys = function($node$$) {
  return $node$$ != null && $node$$.clara$rules$engine$ILeftActivate$get_join_keys$arity$1 != null ? $node$$.clara$rules$engine$ILeftActivate$get_join_keys$arity$1($node$$) : clara$rules$engine$ILeftActivate$get_join_keys$dyn_50814($node$$);
};
clara.rules.engine.IRightActivate = function() {
};
var clara$rules$engine$IRightActivate$right_activate$dyn_50817 = function($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$) {
  var $m__5372__auto__$jscomp$347_m__5374__auto__$$ = clara.rules.engine.right_activate[$APP.goog.typeOf($node$$ == null ? null : $node$$)];
  if ($m__5372__auto__$jscomp$347_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$347_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6 ? $m__5372__auto__$jscomp$347_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$) : $m__5372__auto__$jscomp$347_m__5374__auto__$$.call(null, $node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$);
  }
  $m__5372__auto__$jscomp$347_m__5374__auto__$$ = clara.rules.engine.right_activate._;
  if ($m__5372__auto__$jscomp$347_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$347_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6 ? $m__5372__auto__$jscomp$347_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$) : $m__5372__auto__$jscomp$347_m__5374__auto__$$.call(null, $node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$);
  }
  throw $APP.cljs.core.missing_protocol("IRightActivate.right-activate", $node$$);
};
clara.rules.engine.right_activate = function($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$) {
  return $node$$ != null && $node$$.clara$rules$engine$IRightActivate$right_activate$arity$6 != null ? $node$$.clara$rules$engine$IRightActivate$right_activate$arity$6($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$) : clara$rules$engine$IRightActivate$right_activate$dyn_50817($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$);
};
var clara$rules$engine$IRightActivate$right_retract$dyn_50819 = function($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$) {
  var $m__5372__auto__$jscomp$348_m__5374__auto__$$ = clara.rules.engine.right_retract[$APP.goog.typeOf($node$$ == null ? null : $node$$)];
  if ($m__5372__auto__$jscomp$348_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$348_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6 ? $m__5372__auto__$jscomp$348_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$) : $m__5372__auto__$jscomp$348_m__5374__auto__$$.call(null, $node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$);
  }
  $m__5372__auto__$jscomp$348_m__5374__auto__$$ = clara.rules.engine.right_retract._;
  if ($m__5372__auto__$jscomp$348_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$348_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6 ? $m__5372__auto__$jscomp$348_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$) : $m__5372__auto__$jscomp$348_m__5374__auto__$$.call(null, $node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$);
  }
  throw $APP.cljs.core.missing_protocol("IRightActivate.right-retract", $node$$);
};
clara.rules.engine.right_retract = function($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$) {
  return $node$$ != null && $node$$.clara$rules$engine$IRightActivate$right_retract$arity$6 != null ? $node$$.clara$rules$engine$IRightActivate$right_retract$arity$6($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$) : clara$rules$engine$IRightActivate$right_retract$dyn_50819($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$);
};
clara.rules.engine.IAccumRightActivate = function() {
};
var clara$rules$engine$IAccumRightActivate$pre_reduce$dyn_50821 = function($node$$, $elements$$) {
  var $m__5372__auto__$jscomp$349_m__5374__auto__$$ = clara.rules.engine.pre_reduce[$APP.goog.typeOf($node$$ == null ? null : $node$$)];
  if ($m__5372__auto__$jscomp$349_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$349_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$349_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($node$$, $elements$$) : $m__5372__auto__$jscomp$349_m__5374__auto__$$.call(null, $node$$, $elements$$);
  }
  $m__5372__auto__$jscomp$349_m__5374__auto__$$ = clara.rules.engine.pre_reduce._;
  if ($m__5372__auto__$jscomp$349_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$349_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$349_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($node$$, $elements$$) : $m__5372__auto__$jscomp$349_m__5374__auto__$$.call(null, $node$$, $elements$$);
  }
  throw $APP.cljs.core.missing_protocol("IAccumRightActivate.pre-reduce", $node$$);
};
clara.rules.engine.pre_reduce = function($node$$, $elements$$) {
  return $node$$ != null && $node$$.clara$rules$engine$IAccumRightActivate$pre_reduce$arity$2 != null ? $node$$.clara$rules$engine$IAccumRightActivate$pre_reduce$arity$2($node$$, $elements$$) : clara$rules$engine$IAccumRightActivate$pre_reduce$dyn_50821($node$$, $elements$$);
};
var clara$rules$engine$IAccumRightActivate$right_activate_reduced$dyn_50823 = function($node$$, $join_bindings$$, $reduced$$, $memory$$, $transport$$, $listener$$) {
  var $m__5372__auto__$jscomp$350_m__5374__auto__$$ = clara.rules.engine.right_activate_reduced[$APP.goog.typeOf($node$$ == null ? null : $node$$)];
  if ($m__5372__auto__$jscomp$350_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$350_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6 ? $m__5372__auto__$jscomp$350_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6($node$$, $join_bindings$$, $reduced$$, $memory$$, $transport$$, $listener$$) : $m__5372__auto__$jscomp$350_m__5374__auto__$$.call(null, $node$$, $join_bindings$$, $reduced$$, $memory$$, $transport$$, $listener$$);
  }
  $m__5372__auto__$jscomp$350_m__5374__auto__$$ = clara.rules.engine.right_activate_reduced._;
  if ($m__5372__auto__$jscomp$350_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$350_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6 ? $m__5372__auto__$jscomp$350_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6($node$$, $join_bindings$$, $reduced$$, $memory$$, $transport$$, $listener$$) : $m__5372__auto__$jscomp$350_m__5374__auto__$$.call(null, $node$$, $join_bindings$$, $reduced$$, $memory$$, $transport$$, $listener$$);
  }
  throw $APP.cljs.core.missing_protocol("IAccumRightActivate.right-activate-reduced", $node$$);
};
clara.rules.engine.right_activate_reduced = function($node$$, $join_bindings$$, $reduced$$, $memory$$, $transport$$, $listener$$) {
  return $node$$ != null && $node$$.clara$rules$engine$IAccumRightActivate$right_activate_reduced$arity$6 != null ? $node$$.clara$rules$engine$IAccumRightActivate$right_activate_reduced$arity$6($node$$, $join_bindings$$, $reduced$$, $memory$$, $transport$$, $listener$$) : clara$rules$engine$IAccumRightActivate$right_activate_reduced$dyn_50823($node$$, $join_bindings$$, $reduced$$, $memory$$, $transport$$, $listener$$);
};
clara.rules.engine.IAccumInspect = function() {
};
var clara$rules$engine$IAccumInspect$token__GT_matching_elements$dyn_50827 = function($node$$, $memory$$, $token$$) {
  var $m__5372__auto__$jscomp$351_m__5374__auto__$$ = clara.rules.engine.token__GT_matching_elements[$APP.goog.typeOf($node$$ == null ? null : $node$$)];
  if ($m__5372__auto__$jscomp$351_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$351_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$351_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($node$$, $memory$$, $token$$) : $m__5372__auto__$jscomp$351_m__5374__auto__$$.call(null, $node$$, $memory$$, $token$$);
  }
  $m__5372__auto__$jscomp$351_m__5374__auto__$$ = clara.rules.engine.token__GT_matching_elements._;
  if ($m__5372__auto__$jscomp$351_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$351_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$351_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($node$$, $memory$$, $token$$) : $m__5372__auto__$jscomp$351_m__5374__auto__$$.call(null, $node$$, $memory$$, $token$$);
  }
  throw $APP.cljs.core.missing_protocol("IAccumInspect.token-\x3ematching-elements", $node$$);
};
clara.rules.engine.token__GT_matching_elements = function($node$$, $memory$$, $token$$) {
  return $node$$ != null && $node$$.clara$rules$engine$IAccumInspect$token__GT_matching_elements$arity$3 != null ? $node$$.clara$rules$engine$IAccumInspect$token__GT_matching_elements$arity$3($node$$, $memory$$, $token$$) : clara$rules$engine$IAccumInspect$token__GT_matching_elements$dyn_50827($node$$, $memory$$, $token$$);
};
clara.rules.engine.ITransport = function() {
};
var clara$rules$engine$ITransport$send_elements$dyn_50829 = function($transport$$, $memory$$, $listener$$, $nodes$$, $elements$$) {
  var $m__5372__auto__$jscomp$352_m__5374__auto__$$ = clara.rules.engine.send_elements[$APP.goog.typeOf($transport$$ == null ? null : $transport$$)];
  if ($m__5372__auto__$jscomp$352_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$352_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5 ? $m__5372__auto__$jscomp$352_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5($transport$$, $memory$$, $listener$$, $nodes$$, $elements$$) : $m__5372__auto__$jscomp$352_m__5374__auto__$$.call(null, $transport$$, $memory$$, $listener$$, $nodes$$, $elements$$);
  }
  $m__5372__auto__$jscomp$352_m__5374__auto__$$ = clara.rules.engine.send_elements._;
  if ($m__5372__auto__$jscomp$352_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$352_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5 ? $m__5372__auto__$jscomp$352_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5($transport$$, $memory$$, $listener$$, $nodes$$, $elements$$) : $m__5372__auto__$jscomp$352_m__5374__auto__$$.call(null, $transport$$, $memory$$, $listener$$, $nodes$$, $elements$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransport.send-elements", $transport$$);
};
clara.rules.engine.send_elements = function($transport$$, $memory$$, $listener$$, $nodes$$, $elements$$) {
  return $transport$$ != null && $transport$$.clara$rules$engine$ITransport$send_elements$arity$5 != null ? $transport$$.clara$rules$engine$ITransport$send_elements$arity$5($transport$$, $memory$$, $listener$$, $nodes$$, $elements$$) : clara$rules$engine$ITransport$send_elements$dyn_50829($transport$$, $memory$$, $listener$$, $nodes$$, $elements$$);
};
var clara$rules$engine$ITransport$send_tokens$dyn_50833 = function($transport$$, $memory$$, $listener$$, $nodes$$, $tokens$$) {
  var $m__5372__auto__$jscomp$353_m__5374__auto__$$ = clara.rules.engine.send_tokens[$APP.goog.typeOf($transport$$ == null ? null : $transport$$)];
  if ($m__5372__auto__$jscomp$353_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$353_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5 ? $m__5372__auto__$jscomp$353_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5($transport$$, $memory$$, $listener$$, $nodes$$, $tokens$$) : $m__5372__auto__$jscomp$353_m__5374__auto__$$.call(null, $transport$$, $memory$$, $listener$$, $nodes$$, $tokens$$);
  }
  $m__5372__auto__$jscomp$353_m__5374__auto__$$ = clara.rules.engine.send_tokens._;
  if ($m__5372__auto__$jscomp$353_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$353_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5 ? $m__5372__auto__$jscomp$353_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5($transport$$, $memory$$, $listener$$, $nodes$$, $tokens$$) : $m__5372__auto__$jscomp$353_m__5374__auto__$$.call(null, $transport$$, $memory$$, $listener$$, $nodes$$, $tokens$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransport.send-tokens", $transport$$);
};
clara.rules.engine.send_tokens = function($transport$$, $memory$$, $listener$$, $nodes$$, $tokens$$) {
  return $transport$$ != null && $transport$$.clara$rules$engine$ITransport$send_tokens$arity$5 != null ? $transport$$.clara$rules$engine$ITransport$send_tokens$arity$5($transport$$, $memory$$, $listener$$, $nodes$$, $tokens$$) : clara$rules$engine$ITransport$send_tokens$dyn_50833($transport$$, $memory$$, $listener$$, $nodes$$, $tokens$$);
};
var clara$rules$engine$ITransport$retract_elements$dyn_50837 = function($transport$$, $memory$$, $listener$$, $nodes$$, $elements$$) {
  var $m__5372__auto__$jscomp$354_m__5374__auto__$$ = clara.rules.engine.retract_elements[$APP.goog.typeOf($transport$$ == null ? null : $transport$$)];
  if ($m__5372__auto__$jscomp$354_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$354_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5 ? $m__5372__auto__$jscomp$354_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5($transport$$, $memory$$, $listener$$, $nodes$$, $elements$$) : $m__5372__auto__$jscomp$354_m__5374__auto__$$.call(null, $transport$$, $memory$$, $listener$$, $nodes$$, $elements$$);
  }
  $m__5372__auto__$jscomp$354_m__5374__auto__$$ = clara.rules.engine.retract_elements._;
  if ($m__5372__auto__$jscomp$354_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$354_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5 ? $m__5372__auto__$jscomp$354_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5($transport$$, $memory$$, $listener$$, $nodes$$, $elements$$) : $m__5372__auto__$jscomp$354_m__5374__auto__$$.call(null, $transport$$, $memory$$, $listener$$, $nodes$$, $elements$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransport.retract-elements", $transport$$);
};
clara.rules.engine.retract_elements = function($transport$$, $memory$$, $listener$$, $nodes$$, $elements$$) {
  return $transport$$ != null && $transport$$.clara$rules$engine$ITransport$retract_elements$arity$5 != null ? $transport$$.clara$rules$engine$ITransport$retract_elements$arity$5($transport$$, $memory$$, $listener$$, $nodes$$, $elements$$) : clara$rules$engine$ITransport$retract_elements$dyn_50837($transport$$, $memory$$, $listener$$, $nodes$$, $elements$$);
};
var clara$rules$engine$ITransport$retract_tokens$dyn_50838 = function($transport$$, $memory$$, $listener$$, $nodes$$, $tokens$$) {
  var $m__5372__auto__$jscomp$355_m__5374__auto__$$ = clara.rules.engine.retract_tokens[$APP.goog.typeOf($transport$$ == null ? null : $transport$$)];
  if ($m__5372__auto__$jscomp$355_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$355_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5 ? $m__5372__auto__$jscomp$355_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5($transport$$, $memory$$, $listener$$, $nodes$$, $tokens$$) : $m__5372__auto__$jscomp$355_m__5374__auto__$$.call(null, $transport$$, $memory$$, $listener$$, $nodes$$, $tokens$$);
  }
  $m__5372__auto__$jscomp$355_m__5374__auto__$$ = clara.rules.engine.retract_tokens._;
  if ($m__5372__auto__$jscomp$355_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$355_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5 ? $m__5372__auto__$jscomp$355_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5($transport$$, $memory$$, $listener$$, $nodes$$, $tokens$$) : $m__5372__auto__$jscomp$355_m__5374__auto__$$.call(null, $transport$$, $memory$$, $listener$$, $nodes$$, $tokens$$);
  }
  throw $APP.cljs.core.missing_protocol("ITransport.retract-tokens", $transport$$);
};
clara.rules.engine.retract_tokens = function($transport$$, $memory$$, $listener$$, $nodes$$, $tokens$$) {
  return $transport$$ != null && $transport$$.clara$rules$engine$ITransport$retract_tokens$arity$5 != null ? $transport$$.clara$rules$engine$ITransport$retract_tokens$arity$5($transport$$, $memory$$, $listener$$, $nodes$$, $tokens$$) : clara$rules$engine$ITransport$retract_tokens$dyn_50838($transport$$, $memory$$, $listener$$, $nodes$$, $tokens$$);
};
clara.rules.engine.propagate_items_to_nodes = function($transport$$, $memory$$, $listener$$, $G__48720_50869_G__48744_50912_G__50882_node$jscomp$463_nodes$$, $items$$, $propagate_fn$$) {
  for (var $G__48745_50913_G__50900_c__5548__auto__$$ = $APP.cljs.core.seq($G__48720_50869_G__48744_50912_G__50882_node$jscomp$463_nodes$$), $G__48746_50914_G__50881_G__50901_chunk__48654_chunk__48727_50887_join_bindings_50905$$ = null, $G__48747_50915_G__50883_G__50902_c__5548__auto___50899_count__48655_count__48728_50888_item_group_50906_vec__48741_50904$$ = 0, $G__48748_50916_i__48656_i__48729_50889$$ = 0;;) {
    if ($G__48748_50916_i__48656_i__48729_50889$$ < $G__48747_50915_G__50883_G__50902_c__5548__auto___50899_count__48655_count__48728_50888_item_group_50906_vec__48741_50904$$) {
      $G__48720_50869_G__48744_50912_G__50882_node$jscomp$463_nodes$$ = $G__48746_50914_G__50881_G__50901_chunk__48654_chunk__48727_50887_join_bindings_50905$$.cljs$core$IIndexed$_nth$arity$2(null, $G__48748_50916_i__48656_i__48729_50889$$);
      var $G__48721_50870_G__50856_join_keys_50839_seq__48652__$1_seq__48704_50840_seq__48704_50854__$1_temp__5825__auto___50853$$ = clara.rules.engine.get_join_keys($G__48720_50869_G__48744_50912_G__50882_node$jscomp$463_nodes$$);
      if ($APP.cljs.core.count($G__48721_50870_G__50856_join_keys_50839_seq__48652__$1_seq__48704_50840_seq__48704_50854__$1_temp__5825__auto___50853$$) > 0) {
        $G__48721_50870_G__50856_join_keys_50839_seq__48652__$1_seq__48704_50840_seq__48704_50854__$1_temp__5825__auto___50853$$ = $APP.cljs.core.seq(clara.rules.platform.group_by_seq(function($seq__48652$$, $chunk__48654$$, $count__48655$$, $i__48656$$, $join_keys_50839$$, $node$$) {
          return function($p1__48651_SHARP_$$) {
            return $APP.cljs.core.select_keys($APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($p1__48651_SHARP_$$), $join_keys_50839$$);
          };
        }($G__48745_50913_G__50900_c__5548__auto__$$, $G__48746_50914_G__50881_G__50901_chunk__48654_chunk__48727_50887_join_bindings_50905$$, $G__48747_50915_G__50883_G__50902_c__5548__auto___50899_count__48655_count__48728_50888_item_group_50906_vec__48741_50904$$, $G__48748_50916_i__48656_i__48729_50889$$, $G__48721_50870_G__50856_join_keys_50839_seq__48652__$1_seq__48704_50840_seq__48704_50854__$1_temp__5825__auto___50853$$, $G__48720_50869_G__48744_50912_G__50882_node$jscomp$463_nodes$$), $items$$));
        for (var $G__48722_50871_G__48749_50917_G__50857_chunk__48705_50841_join_bindings_50862_join_bindings_50891_temp__5825__auto__$$ = null, $G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$ = 0, $G__48724_50873_i__48707_50843$$ = 0;;) {
          if ($G__48724_50873_i__48707_50843$$ < $G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$) {
            var $item_group_50846_vec__48714_50844$$ = $G__48722_50871_G__48749_50917_G__50857_chunk__48705_50841_join_bindings_50862_join_bindings_50891_temp__5825__auto__$$.cljs$core$IIndexed$_nth$arity$2(null, $G__48724_50873_i__48707_50843$$), $G__48725_50874_join_bindings_50845$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($item_group_50846_vec__48714_50844$$, 0, null);
            $item_group_50846_vec__48714_50844$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($item_group_50846_vec__48714_50844$$, 1, null);
            $propagate_fn$$.cljs$core$IFn$_invoke$arity$6 ? $propagate_fn$$.cljs$core$IFn$_invoke$arity$6($G__48720_50869_G__48744_50912_G__50882_node$jscomp$463_nodes$$, $G__48725_50874_join_bindings_50845$$, $item_group_50846_vec__48714_50844$$, $memory$$, $transport$$, $listener$$) : $propagate_fn$$.call(null, $G__48720_50869_G__48744_50912_G__50882_node$jscomp$463_nodes$$, $G__48725_50874_join_bindings_50845$$, $item_group_50846_vec__48714_50844$$, $memory$$, $transport$$, $listener$$);
            $G__48724_50873_i__48707_50843$$ += 1;
          } else {
            if ($G__48721_50870_G__50856_join_keys_50839_seq__48652__$1_seq__48704_50840_seq__48704_50854__$1_temp__5825__auto___50853$$ = $APP.cljs.core.seq($G__48721_50870_G__50856_join_keys_50839_seq__48652__$1_seq__48704_50840_seq__48704_50854__$1_temp__5825__auto___50853$$)) {
              $APP.cljs.core.chunked_seq_QMARK_($G__48721_50870_G__50856_join_keys_50839_seq__48652__$1_seq__48704_50840_seq__48704_50854__$1_temp__5825__auto___50853$$) ? ($G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$ = $APP.cljs.core.chunk_first($G__48721_50870_G__50856_join_keys_50839_seq__48652__$1_seq__48704_50840_seq__48704_50854__$1_temp__5825__auto___50853$$), $G__48721_50870_G__50856_join_keys_50839_seq__48652__$1_seq__48704_50840_seq__48704_50854__$1_temp__5825__auto___50853$$ = 
              $APP.cljs.core.chunk_rest($G__48721_50870_G__50856_join_keys_50839_seq__48652__$1_seq__48704_50840_seq__48704_50854__$1_temp__5825__auto___50853$$), $G__48722_50871_G__48749_50917_G__50857_chunk__48705_50841_join_bindings_50862_join_bindings_50891_temp__5825__auto__$$ = $G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$, $G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$ = 
              $APP.cljs.core.count($G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$)) : ($G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$ = $APP.cljs.core.first($G__48721_50870_G__50856_join_keys_50839_seq__48652__$1_seq__48704_50840_seq__48704_50854__$1_temp__5825__auto___50853$$), $G__48722_50871_G__48749_50917_G__50857_chunk__48705_50841_join_bindings_50862_join_bindings_50891_temp__5825__auto__$$ = 
              $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$, 0, null), $G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$, 
              1, null), $propagate_fn$$.cljs$core$IFn$_invoke$arity$6 ? $propagate_fn$$.cljs$core$IFn$_invoke$arity$6($G__48720_50869_G__48744_50912_G__50882_node$jscomp$463_nodes$$, $G__48722_50871_G__48749_50917_G__50857_chunk__48705_50841_join_bindings_50862_join_bindings_50891_temp__5825__auto__$$, $G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$, $memory$$, $transport$$, $listener$$) : $propagate_fn$$.call(null, 
              $G__48720_50869_G__48744_50912_G__50882_node$jscomp$463_nodes$$, $G__48722_50871_G__48749_50917_G__50857_chunk__48705_50841_join_bindings_50862_join_bindings_50891_temp__5825__auto__$$, $G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$, $memory$$, $transport$$, $listener$$), $G__48721_50870_G__50856_join_keys_50839_seq__48652__$1_seq__48704_50840_seq__48704_50854__$1_temp__5825__auto___50853$$ = 
              $APP.cljs.core.next($G__48721_50870_G__50856_join_keys_50839_seq__48652__$1_seq__48704_50840_seq__48704_50854__$1_temp__5825__auto___50853$$), $G__48722_50871_G__48749_50917_G__50857_chunk__48705_50841_join_bindings_50862_join_bindings_50891_temp__5825__auto__$$ = null, $G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$ = 0), $G__48724_50873_i__48707_50843$$ = 0;
            } else {
              break;
            }
          }
        }
      } else {
        $APP.cljs.core.seq($items$$) && ($G__48721_50870_G__50856_join_keys_50839_seq__48652__$1_seq__48704_50840_seq__48704_50854__$1_temp__5825__auto___50853$$ = $APP.cljs.core.PersistentArrayMap.EMPTY, $G__48722_50871_G__48749_50917_G__50857_chunk__48705_50841_join_bindings_50862_join_bindings_50891_temp__5825__auto__$$ = $items$$, $G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$ = $memory$$, 
        $G__48724_50873_i__48707_50843$$ = $transport$$, $G__48725_50874_join_bindings_50845$$ = $listener$$, $propagate_fn$$.cljs$core$IFn$_invoke$arity$6 ? $propagate_fn$$.cljs$core$IFn$_invoke$arity$6($G__48720_50869_G__48744_50912_G__50882_node$jscomp$463_nodes$$, $G__48721_50870_G__50856_join_keys_50839_seq__48652__$1_seq__48704_50840_seq__48704_50854__$1_temp__5825__auto___50853$$, $G__48722_50871_G__48749_50917_G__50857_chunk__48705_50841_join_bindings_50862_join_bindings_50891_temp__5825__auto__$$, 
        $G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$, $G__48724_50873_i__48707_50843$$, $G__48725_50874_join_bindings_50845$$) : $propagate_fn$$.call(null, $G__48720_50869_G__48744_50912_G__50882_node$jscomp$463_nodes$$, $G__48721_50870_G__50856_join_keys_50839_seq__48652__$1_seq__48704_50840_seq__48704_50854__$1_temp__5825__auto___50853$$, $G__48722_50871_G__48749_50917_G__50857_chunk__48705_50841_join_bindings_50862_join_bindings_50891_temp__5825__auto__$$, 
        $G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$, $G__48724_50873_i__48707_50843$$, $G__48725_50874_join_bindings_50845$$));
      }
      $G__48748_50916_i__48656_i__48729_50889$$ += 1;
    } else {
      if ($G__48722_50871_G__48749_50917_G__50857_chunk__48705_50841_join_bindings_50862_join_bindings_50891_temp__5825__auto__$$ = $APP.cljs.core.seq($G__48745_50913_G__50900_c__5548__auto__$$)) {
        $G__48721_50870_G__50856_join_keys_50839_seq__48652__$1_seq__48704_50840_seq__48704_50854__$1_temp__5825__auto___50853$$ = $G__48722_50871_G__48749_50917_G__50857_chunk__48705_50841_join_bindings_50862_join_bindings_50891_temp__5825__auto__$$;
        if ($APP.cljs.core.chunked_seq_QMARK_($G__48721_50870_G__50856_join_keys_50839_seq__48652__$1_seq__48704_50840_seq__48704_50854__$1_temp__5825__auto___50853$$)) {
          $G__48745_50913_G__50900_c__5548__auto__$$ = $APP.cljs.core.chunk_first($G__48721_50870_G__50856_join_keys_50839_seq__48652__$1_seq__48704_50840_seq__48704_50854__$1_temp__5825__auto___50853$$), $G__48746_50914_G__50881_G__50901_chunk__48654_chunk__48727_50887_join_bindings_50905$$ = $APP.cljs.core.chunk_rest($G__48721_50870_G__50856_join_keys_50839_seq__48652__$1_seq__48704_50840_seq__48704_50854__$1_temp__5825__auto___50853$$), $G__48720_50869_G__48744_50912_G__50882_node$jscomp$463_nodes$$ = 
          $G__48745_50913_G__50900_c__5548__auto__$$, $G__48747_50915_G__50883_G__50902_c__5548__auto___50899_count__48655_count__48728_50888_item_group_50906_vec__48741_50904$$ = $APP.cljs.core.count($G__48745_50913_G__50900_c__5548__auto__$$), $G__48745_50913_G__50900_c__5548__auto__$$ = $G__48746_50914_G__50881_G__50901_chunk__48654_chunk__48727_50887_join_bindings_50905$$, $G__48746_50914_G__50881_G__50901_chunk__48654_chunk__48727_50887_join_bindings_50905$$ = $G__48720_50869_G__48744_50912_G__50882_node$jscomp$463_nodes$$;
        } else {
          $G__48720_50869_G__48744_50912_G__50882_node$jscomp$463_nodes$$ = $APP.cljs.core.first($G__48721_50870_G__50856_join_keys_50839_seq__48652__$1_seq__48704_50840_seq__48704_50854__$1_temp__5825__auto___50853$$);
          $G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$ = clara.rules.engine.get_join_keys($G__48720_50869_G__48744_50912_G__50882_node$jscomp$463_nodes$$);
          if ($APP.cljs.core.count($G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$) > 0) {
            for ($G__48745_50913_G__50900_c__5548__auto__$$ = $APP.cljs.core.seq(clara.rules.platform.group_by_seq(function($seq__48652$$, $chunk__48654$$, $count__48655$$, $i__48656$$, $join_keys_50885$$, $node$$, $seq__48652__$1$$, $temp__5825__auto__$$) {
              return function($p1__48651_SHARP_$$) {
                return $APP.cljs.core.select_keys($APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($p1__48651_SHARP_$$), $join_keys_50885$$);
              };
            }($G__48745_50913_G__50900_c__5548__auto__$$, $G__48746_50914_G__50881_G__50901_chunk__48654_chunk__48727_50887_join_bindings_50905$$, $G__48747_50915_G__50883_G__50902_c__5548__auto___50899_count__48655_count__48728_50888_item_group_50906_vec__48741_50904$$, $G__48748_50916_i__48656_i__48729_50889$$, $G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$, $G__48720_50869_G__48744_50912_G__50882_node$jscomp$463_nodes$$, 
            $G__48721_50870_G__50856_join_keys_50839_seq__48652__$1_seq__48704_50840_seq__48704_50854__$1_temp__5825__auto___50853$$, $G__48722_50871_G__48749_50917_G__50857_chunk__48705_50841_join_bindings_50862_join_bindings_50891_temp__5825__auto__$$), $items$$)), $G__48746_50914_G__50881_G__50901_chunk__48654_chunk__48727_50887_join_bindings_50905$$ = null, $G__48748_50916_i__48656_i__48729_50889$$ = $G__48747_50915_G__50883_G__50902_c__5548__auto___50899_count__48655_count__48728_50888_item_group_50906_vec__48741_50904$$ = 
            0;;) {
              if ($G__48748_50916_i__48656_i__48729_50889$$ < $G__48747_50915_G__50883_G__50902_c__5548__auto___50899_count__48655_count__48728_50888_item_group_50906_vec__48741_50904$$) {
                $G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$ = $G__48746_50914_G__50881_G__50901_chunk__48654_chunk__48727_50887_join_bindings_50905$$.cljs$core$IIndexed$_nth$arity$2(null, $G__48748_50916_i__48656_i__48729_50889$$), $G__48722_50871_G__48749_50917_G__50857_chunk__48705_50841_join_bindings_50862_join_bindings_50891_temp__5825__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$, 
                0, null), $G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$, 1, null), $propagate_fn$$.cljs$core$IFn$_invoke$arity$6 ? $propagate_fn$$.cljs$core$IFn$_invoke$arity$6($G__48720_50869_G__48744_50912_G__50882_node$jscomp$463_nodes$$, 
                $G__48722_50871_G__48749_50917_G__50857_chunk__48705_50841_join_bindings_50862_join_bindings_50891_temp__5825__auto__$$, $G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$, $memory$$, $transport$$, $listener$$) : $propagate_fn$$.call(null, $G__48720_50869_G__48744_50912_G__50882_node$jscomp$463_nodes$$, $G__48722_50871_G__48749_50917_G__50857_chunk__48705_50841_join_bindings_50862_join_bindings_50891_temp__5825__auto__$$, 
                $G__48723_50872_G__50858_c__5548__auto___50855_count__48706_50842_item_group_50863_item_group_50892_join_keys_50885_vec__48717_50861_vec__48736_50890$$, $memory$$, $transport$$, $listener$$), $G__48748_50916_i__48656_i__48729_50889$$ += 1;
              } else {
                if ($G__48745_50913_G__50900_c__5548__auto__$$ = $APP.cljs.core.seq($G__48745_50913_G__50900_c__5548__auto__$$)) {
                  $APP.cljs.core.chunked_seq_QMARK_($G__48745_50913_G__50900_c__5548__auto__$$) ? ($G__48747_50915_G__50883_G__50902_c__5548__auto___50899_count__48655_count__48728_50888_item_group_50906_vec__48741_50904$$ = $APP.cljs.core.chunk_first($G__48745_50913_G__50900_c__5548__auto__$$), $G__48745_50913_G__50900_c__5548__auto__$$ = $APP.cljs.core.chunk_rest($G__48745_50913_G__50900_c__5548__auto__$$), $G__48746_50914_G__50881_G__50901_chunk__48654_chunk__48727_50887_join_bindings_50905$$ = 
                  $G__48747_50915_G__50883_G__50902_c__5548__auto___50899_count__48655_count__48728_50888_item_group_50906_vec__48741_50904$$, $G__48747_50915_G__50883_G__50902_c__5548__auto___50899_count__48655_count__48728_50888_item_group_50906_vec__48741_50904$$ = $APP.cljs.core.count($G__48747_50915_G__50883_G__50902_c__5548__auto___50899_count__48655_count__48728_50888_item_group_50906_vec__48741_50904$$)) : ($G__48747_50915_G__50883_G__50902_c__5548__auto___50899_count__48655_count__48728_50888_item_group_50906_vec__48741_50904$$ = 
                  $APP.cljs.core.first($G__48745_50913_G__50900_c__5548__auto__$$), $G__48746_50914_G__50881_G__50901_chunk__48654_chunk__48727_50887_join_bindings_50905$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__48747_50915_G__50883_G__50902_c__5548__auto___50899_count__48655_count__48728_50888_item_group_50906_vec__48741_50904$$, 0, null), $G__48747_50915_G__50883_G__50902_c__5548__auto___50899_count__48655_count__48728_50888_item_group_50906_vec__48741_50904$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__48747_50915_G__50883_G__50902_c__5548__auto___50899_count__48655_count__48728_50888_item_group_50906_vec__48741_50904$$, 
                  1, null), $propagate_fn$$.cljs$core$IFn$_invoke$arity$6 ? $propagate_fn$$.cljs$core$IFn$_invoke$arity$6($G__48720_50869_G__48744_50912_G__50882_node$jscomp$463_nodes$$, $G__48746_50914_G__50881_G__50901_chunk__48654_chunk__48727_50887_join_bindings_50905$$, $G__48747_50915_G__50883_G__50902_c__5548__auto___50899_count__48655_count__48728_50888_item_group_50906_vec__48741_50904$$, $memory$$, $transport$$, $listener$$) : $propagate_fn$$.call(null, $G__48720_50869_G__48744_50912_G__50882_node$jscomp$463_nodes$$, 
                  $G__48746_50914_G__50881_G__50901_chunk__48654_chunk__48727_50887_join_bindings_50905$$, $G__48747_50915_G__50883_G__50902_c__5548__auto___50899_count__48655_count__48728_50888_item_group_50906_vec__48741_50904$$, $memory$$, $transport$$, $listener$$), $G__48745_50913_G__50900_c__5548__auto__$$ = $APP.cljs.core.next($G__48745_50913_G__50900_c__5548__auto__$$), $G__48746_50914_G__50881_G__50901_chunk__48654_chunk__48727_50887_join_bindings_50905$$ = null, $G__48747_50915_G__50883_G__50902_c__5548__auto___50899_count__48655_count__48728_50888_item_group_50906_vec__48741_50904$$ = 
                  0), $G__48748_50916_i__48656_i__48729_50889$$ = 0;
                } else {
                  break;
                }
              }
            }
          } else {
            $APP.cljs.core.seq($items$$) && ($G__48745_50913_G__50900_c__5548__auto__$$ = $APP.cljs.core.PersistentArrayMap.EMPTY, $G__48746_50914_G__50881_G__50901_chunk__48654_chunk__48727_50887_join_bindings_50905$$ = $items$$, $G__48747_50915_G__50883_G__50902_c__5548__auto___50899_count__48655_count__48728_50888_item_group_50906_vec__48741_50904$$ = $memory$$, $G__48748_50916_i__48656_i__48729_50889$$ = $transport$$, $G__48722_50871_G__48749_50917_G__50857_chunk__48705_50841_join_bindings_50862_join_bindings_50891_temp__5825__auto__$$ = 
            $listener$$, $propagate_fn$$.cljs$core$IFn$_invoke$arity$6 ? $propagate_fn$$.cljs$core$IFn$_invoke$arity$6($G__48720_50869_G__48744_50912_G__50882_node$jscomp$463_nodes$$, $G__48745_50913_G__50900_c__5548__auto__$$, $G__48746_50914_G__50881_G__50901_chunk__48654_chunk__48727_50887_join_bindings_50905$$, $G__48747_50915_G__50883_G__50902_c__5548__auto___50899_count__48655_count__48728_50888_item_group_50906_vec__48741_50904$$, $G__48748_50916_i__48656_i__48729_50889$$, $G__48722_50871_G__48749_50917_G__50857_chunk__48705_50841_join_bindings_50862_join_bindings_50891_temp__5825__auto__$$) : 
            $propagate_fn$$.call(null, $G__48720_50869_G__48744_50912_G__50882_node$jscomp$463_nodes$$, $G__48745_50913_G__50900_c__5548__auto__$$, $G__48746_50914_G__50881_G__50901_chunk__48654_chunk__48727_50887_join_bindings_50905$$, $G__48747_50915_G__50883_G__50902_c__5548__auto___50899_count__48655_count__48728_50888_item_group_50906_vec__48741_50904$$, $G__48748_50916_i__48656_i__48729_50889$$, $G__48722_50871_G__48749_50917_G__50857_chunk__48705_50841_join_bindings_50862_join_bindings_50891_temp__5825__auto__$$));
          }
          $G__48745_50913_G__50900_c__5548__auto__$$ = $APP.cljs.core.next($G__48721_50870_G__50856_join_keys_50839_seq__48652__$1_seq__48704_50840_seq__48704_50854__$1_temp__5825__auto___50853$$);
          $G__48746_50914_G__50881_G__50901_chunk__48654_chunk__48727_50887_join_bindings_50905$$ = null;
          $G__48747_50915_G__50883_G__50902_c__5548__auto___50899_count__48655_count__48728_50888_item_group_50906_vec__48741_50904$$ = 0;
        }
        $G__48748_50916_i__48656_i__48729_50889$$ = 0;
      } else {
        return null;
      }
    }
  }
};
clara.rules.engine.LocalTransport = function() {
};
clara.rules.engine.LocalTransport.prototype.clara$rules$engine$ITransport$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.LocalTransport.prototype.clara$rules$engine$ITransport$send_elements$arity$5 = function($transport$$, $memory$$, $listener$$, $nodes$$, $elements$$) {
  return clara.rules.engine.propagate_items_to_nodes(this, $memory$$, $listener$$, $nodes$$, $elements$$, clara.rules.engine.right_activate);
};
clara.rules.engine.LocalTransport.prototype.clara$rules$engine$ITransport$send_tokens$arity$5 = function($transport$$, $memory$$, $listener$$, $nodes$$, $tokens$$) {
  return clara.rules.engine.propagate_items_to_nodes(this, $memory$$, $listener$$, $nodes$$, $tokens$$, clara.rules.engine.left_activate);
};
clara.rules.engine.LocalTransport.prototype.clara$rules$engine$ITransport$retract_elements$arity$5 = function($transport$$, $memory$$, $listener$$, $nodes$$, $elements$$) {
  return clara.rules.engine.propagate_items_to_nodes(this, $memory$$, $listener$$, $nodes$$, $elements$$, clara.rules.engine.right_retract);
};
clara.rules.engine.LocalTransport.prototype.clara$rules$engine$ITransport$retract_tokens$arity$5 = function($transport$$, $memory$$, $listener$$, $nodes$$, $tokens$$) {
  return clara.rules.engine.propagate_items_to_nodes(this, $memory$$, $listener$$, $nodes$$, $tokens$$, clara.rules.engine.left_retract);
};
clara.rules.engine.LocalTransport.getBasis = function() {
  return $APP.cljs.core.PersistentVector.EMPTY;
};
clara.rules.engine.LocalTransport.cljs$lang$type = !0;
clara.rules.engine.LocalTransport.cljs$lang$ctorStr = "clara.rules.engine/LocalTransport";
clara.rules.engine.LocalTransport.cljs$lang$ctorPrWriter = function($this__5310__auto__$$, $writer__5311__auto__$$, $opt__5312__auto__$$) {
  return $APP.cljs.core._write($writer__5311__auto__$$, "clara.rules.engine/LocalTransport");
};
clara.rules.engine.__GT_LocalTransport = function() {
  return new clara.rules.engine.LocalTransport();
};
clara.rules.engine.IAlphaActivate = function() {
};
var clara$rules$engine$IAlphaActivate$alpha_activate$dyn_50926 = function($node$$, $facts$$, $memory$$, $transport$$, $listener$$) {
  var $m__5372__auto__$jscomp$356_m__5374__auto__$$ = clara.rules.engine.alpha_activate[$APP.goog.typeOf($node$$ == null ? null : $node$$)];
  if ($m__5372__auto__$jscomp$356_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$356_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5 ? $m__5372__auto__$jscomp$356_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5($node$$, $facts$$, $memory$$, $transport$$, $listener$$) : $m__5372__auto__$jscomp$356_m__5374__auto__$$.call(null, $node$$, $facts$$, $memory$$, $transport$$, $listener$$);
  }
  $m__5372__auto__$jscomp$356_m__5374__auto__$$ = clara.rules.engine.alpha_activate._;
  if ($m__5372__auto__$jscomp$356_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$356_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5 ? $m__5372__auto__$jscomp$356_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5($node$$, $facts$$, $memory$$, $transport$$, $listener$$) : $m__5372__auto__$jscomp$356_m__5374__auto__$$.call(null, $node$$, $facts$$, $memory$$, $transport$$, $listener$$);
  }
  throw $APP.cljs.core.missing_protocol("IAlphaActivate.alpha-activate", $node$$);
};
clara.rules.engine.alpha_activate = function($node$$, $facts$$, $memory$$, $transport$$, $listener$$) {
  return $node$$ != null && $node$$.clara$rules$engine$IAlphaActivate$alpha_activate$arity$5 != null ? $node$$.clara$rules$engine$IAlphaActivate$alpha_activate$arity$5($node$$, $facts$$, $memory$$, $transport$$, $listener$$) : clara$rules$engine$IAlphaActivate$alpha_activate$dyn_50926($node$$, $facts$$, $memory$$, $transport$$, $listener$$);
};
var clara$rules$engine$IAlphaActivate$alpha_retract$dyn_50928 = function($node$$, $facts$$, $memory$$, $transport$$, $listener$$) {
  var $m__5372__auto__$jscomp$357_m__5374__auto__$$ = clara.rules.engine.alpha_retract[$APP.goog.typeOf($node$$ == null ? null : $node$$)];
  if ($m__5372__auto__$jscomp$357_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$357_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5 ? $m__5372__auto__$jscomp$357_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5($node$$, $facts$$, $memory$$, $transport$$, $listener$$) : $m__5372__auto__$jscomp$357_m__5374__auto__$$.call(null, $node$$, $facts$$, $memory$$, $transport$$, $listener$$);
  }
  $m__5372__auto__$jscomp$357_m__5374__auto__$$ = clara.rules.engine.alpha_retract._;
  if ($m__5372__auto__$jscomp$357_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$357_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5 ? $m__5372__auto__$jscomp$357_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$5($node$$, $facts$$, $memory$$, $transport$$, $listener$$) : $m__5372__auto__$jscomp$357_m__5374__auto__$$.call(null, $node$$, $facts$$, $memory$$, $transport$$, $listener$$);
  }
  throw $APP.cljs.core.missing_protocol("IAlphaActivate.alpha-retract", $node$$);
};
clara.rules.engine.alpha_retract = function($node$$, $facts$$, $memory$$, $transport$$, $listener$$) {
  return $node$$ != null && $node$$.clara$rules$engine$IAlphaActivate$alpha_retract$arity$5 != null ? $node$$.clara$rules$engine$IAlphaActivate$alpha_retract$arity$5($node$$, $facts$$, $memory$$, $transport$$, $listener$$) : clara$rules$engine$IAlphaActivate$alpha_retract$dyn_50928($node$$, $facts$$, $memory$$, $transport$$, $listener$$);
};
clara.rules.engine.ITerminalNode = function() {
};
var clara$rules$engine$ITerminalNode$terminal_node_type$dyn_50930 = function($this$$$) {
  var $m__5372__auto__$jscomp$358_m__5374__auto__$$ = clara.rules.engine.terminal_node_type[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
  if ($m__5372__auto__$jscomp$358_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$358_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$358_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$358_m__5374__auto__$$.call(null, $this$$$);
  }
  $m__5372__auto__$jscomp$358_m__5374__auto__$$ = clara.rules.engine.terminal_node_type._;
  if ($m__5372__auto__$jscomp$358_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$358_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$358_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$358_m__5374__auto__$$.call(null, $this$$$);
  }
  throw $APP.cljs.core.missing_protocol("ITerminalNode.terminal-node-type", $this$$$);
};
clara.rules.engine.terminal_node_type = function($this$$$) {
  return $this$$$ != null && $this$$$.clara$rules$engine$ITerminalNode$terminal_node_type$arity$1 != null ? $this$$$.clara$rules$engine$ITerminalNode$terminal_node_type$arity$1($this$$$) : clara$rules$engine$ITerminalNode$terminal_node_type$dyn_50930($this$$$);
};
clara.rules.engine.IConditionNode = function() {
};
var clara$rules$engine$IConditionNode$get_condition_description$dyn_50932 = function($this$$$) {
  var $m__5372__auto__$jscomp$359_m__5374__auto__$$ = clara.rules.engine.get_condition_description[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
  if ($m__5372__auto__$jscomp$359_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$359_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$359_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$359_m__5374__auto__$$.call(null, $this$$$);
  }
  $m__5372__auto__$jscomp$359_m__5374__auto__$$ = clara.rules.engine.get_condition_description._;
  if ($m__5372__auto__$jscomp$359_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$359_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$359_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$359_m__5374__auto__$$.call(null, $this$$$);
  }
  throw $APP.cljs.core.missing_protocol("IConditionNode.get-condition-description", $this$$$);
};
clara.rules.engine.get_condition_description = function($this$$$) {
  return $this$$$ != null && $this$$$.clara$rules$engine$IConditionNode$get_condition_description$arity$1 != null ? $this$$$.clara$rules$engine$IConditionNode$get_condition_description$arity$1($this$$$) : clara$rules$engine$IConditionNode$get_condition_description$dyn_50932($this$$$);
};
clara.rules.engine.get_terminal_node_types = function($node$$) {
  return $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.sorted_set(), $APP.cljs.core.keep.cljs$core$IFn$_invoke$arity$2(function($p1__48750_SHARP_$$) {
    return ($p1__48750_SHARP_$$ != null ? $APP.cljs.core.PROTOCOL_SENTINEL === $p1__48750_SHARP_$$.clara$rules$engine$ITerminalNode$ || ($p1__48750_SHARP_$$.cljs$lang$protocol_mask$partition$ ? 0 : $APP.cljs.core.native_satisfies_QMARK_(clara.rules.engine.ITerminalNode, $p1__48750_SHARP_$$)) : $APP.cljs.core.native_satisfies_QMARK_(clara.rules.engine.ITerminalNode, $p1__48750_SHARP_$$)) ? clara.rules.engine.terminal_node_type($p1__48750_SHARP_$$) : null;
  }, $APP.cljs.core.tree_seq($APP.cljs.core.comp.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.seq, $APP.cljs$cst$3116$children), $APP.cljs$cst$3116$children, $node$$)));
};
clara.rules.engine.get_conditions_and_rule_names = function($node$$) {
  var $temp__5823__auto__$$ = ($node$$ != null ? $APP.cljs.core.PROTOCOL_SENTINEL === $node$$.clara$rules$engine$IConditionNode$ || ($node$$.cljs$lang$protocol_mask$partition$ ? 0 : $APP.cljs.core.native_satisfies_QMARK_(clara.rules.engine.IConditionNode, $node$$)) : $APP.cljs.core.native_satisfies_QMARK_(clara.rules.engine.IConditionNode, $node$$)) ? clara.rules.engine.get_condition_description($node$$) : null;
  return $APP.cljs.core.truth_($temp__5823__auto__$$) ? $APP.cljs.core.PersistentArrayMap.createAsIfByAssoc([$temp__5823__auto__$$, clara.rules.engine.get_terminal_node_types($node$$)]) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.partial.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.merge_with, $APP.cljs.core.into), $APP.cljs.core.PersistentArrayMap.EMPTY, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(clara.rules.engine.get_conditions_and_rule_names, $APP.cljs$cst$3116$children.cljs$core$IFn$_invoke$arity$1($node$$)));
};
clara.rules.engine._STAR_current_session_STAR_ = null;
clara.rules.engine._STAR_pending_external_retractions_STAR_ = null;
clara.rules.engine._STAR_rule_context_STAR_ = null;
clara.rules.engine.external_retract_loop = function($get_alphas_fn$$, $memory$$, $transport$$, $listener$$) {
  for (;;) {
    var $G__50974_retractions$$ = $APP.cljs.core.deref(clara.rules.engine._STAR_pending_external_retractions_STAR_);
    $APP.cljs.core.reset_BANG_(clara.rules.engine._STAR_pending_external_retractions_STAR_, $APP.cljs.core.PersistentVector.EMPTY);
    $G__50974_retractions$$ = $APP.cljs.core.seq($get_alphas_fn$$.cljs$core$IFn$_invoke$arity$1 ? $get_alphas_fn$$.cljs$core$IFn$_invoke$arity$1($G__50974_retractions$$) : $get_alphas_fn$$.call(null, $G__50974_retractions$$));
    for (var $G__50975_chunk__48758_50936_fact_group_50980_vec__48780_50978$$ = null, $G__50976_alpha_roots_50979_c__5548__auto___50973_c__5548__auto___50995_count__48759_50937_root_51000_seq__48754_50981_temp__5825__auto___50991__$1$$ = 0, $G__50997_chunk__48755_50982_i__48760_50938_seq__48754_50993__$1$$ = 0;;) {
      if ($G__50997_chunk__48755_50982_i__48760_50938_seq__48754_50993__$1$$ < $G__50976_alpha_roots_50979_c__5548__auto___50973_c__5548__auto___50995_count__48759_50937_root_51000_seq__48754_50981_temp__5825__auto___50991__$1$$) {
        var $G__50998_count__48756_50983_fact_group_50941_vec__48775_50939$$ = $G__50975_chunk__48758_50936_fact_group_50980_vec__48780_50978$$.cljs$core$IIndexed$_nth$arity$2(null, $G__50997_chunk__48755_50982_i__48760_50938_seq__48754_50993__$1$$), $G__50996_alpha_roots_50940_c__5548__auto___50956_i__48757_50984_root_50961_seq__48761_50942_temp__5825__auto___50952$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__50998_count__48756_50983_fact_group_50941_vec__48775_50939$$, 0, null);
        $G__50998_count__48756_50983_fact_group_50941_vec__48775_50939$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__50998_count__48756_50983_fact_group_50941_vec__48775_50939$$, 1, null);
        $G__50996_alpha_roots_50940_c__5548__auto___50956_i__48757_50984_root_50961_seq__48761_50942_temp__5825__auto___50952$$ = $APP.cljs.core.seq($G__50996_alpha_roots_50940_c__5548__auto___50956_i__48757_50984_root_50961_seq__48761_50942_temp__5825__auto___50952$$);
        for (var $G__50958_chunk__48762_50943_root_50985_seq__48761_50954__$1$$ = null, $G__50959_count__48763_50944$$ = 0, $G__50957_i__48764_50945$$ = 0;;) {
          if ($G__50957_i__48764_50945$$ < $G__50959_count__48763_50944$$) {
            var $root_50946$$ = $G__50958_chunk__48762_50943_root_50985_seq__48761_50954__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $G__50957_i__48764_50945$$);
            clara.rules.engine.alpha_retract($root_50946$$, $G__50998_count__48756_50983_fact_group_50941_vec__48775_50939$$, $memory$$, $transport$$, $listener$$);
            $G__50957_i__48764_50945$$ += 1;
          } else {
            if ($G__50996_alpha_roots_50940_c__5548__auto___50956_i__48757_50984_root_50961_seq__48761_50942_temp__5825__auto___50952$$ = $APP.cljs.core.seq($G__50996_alpha_roots_50940_c__5548__auto___50956_i__48757_50984_root_50961_seq__48761_50942_temp__5825__auto___50952$$)) {
              $G__50958_chunk__48762_50943_root_50985_seq__48761_50954__$1$$ = $G__50996_alpha_roots_50940_c__5548__auto___50956_i__48757_50984_root_50961_seq__48761_50942_temp__5825__auto___50952$$, $APP.cljs.core.chunked_seq_QMARK_($G__50958_chunk__48762_50943_root_50985_seq__48761_50954__$1$$) ? ($G__50996_alpha_roots_50940_c__5548__auto___50956_i__48757_50984_root_50961_seq__48761_50942_temp__5825__auto___50952$$ = $APP.cljs.core.chunk_first($G__50958_chunk__48762_50943_root_50985_seq__48761_50954__$1$$), 
              $G__50957_i__48764_50945$$ = $APP.cljs.core.chunk_rest($G__50958_chunk__48762_50943_root_50985_seq__48761_50954__$1$$), $G__50958_chunk__48762_50943_root_50985_seq__48761_50954__$1$$ = $G__50996_alpha_roots_50940_c__5548__auto___50956_i__48757_50984_root_50961_seq__48761_50942_temp__5825__auto___50952$$, $G__50959_count__48763_50944$$ = $APP.cljs.core.count($G__50996_alpha_roots_50940_c__5548__auto___50956_i__48757_50984_root_50961_seq__48761_50942_temp__5825__auto___50952$$), $G__50996_alpha_roots_50940_c__5548__auto___50956_i__48757_50984_root_50961_seq__48761_50942_temp__5825__auto___50952$$ = 
              $G__50957_i__48764_50945$$) : ($G__50996_alpha_roots_50940_c__5548__auto___50956_i__48757_50984_root_50961_seq__48761_50942_temp__5825__auto___50952$$ = $APP.cljs.core.first($G__50958_chunk__48762_50943_root_50985_seq__48761_50954__$1$$), clara.rules.engine.alpha_retract($G__50996_alpha_roots_50940_c__5548__auto___50956_i__48757_50984_root_50961_seq__48761_50942_temp__5825__auto___50952$$, $G__50998_count__48756_50983_fact_group_50941_vec__48775_50939$$, $memory$$, $transport$$, $listener$$), 
              $G__50996_alpha_roots_50940_c__5548__auto___50956_i__48757_50984_root_50961_seq__48761_50942_temp__5825__auto___50952$$ = $APP.cljs.core.next($G__50958_chunk__48762_50943_root_50985_seq__48761_50954__$1$$), $G__50958_chunk__48762_50943_root_50985_seq__48761_50954__$1$$ = null, $G__50959_count__48763_50944$$ = 0), $G__50957_i__48764_50945$$ = 0;
            } else {
              break;
            }
          }
        }
        $G__50997_chunk__48755_50982_i__48760_50938_seq__48754_50993__$1$$ += 1;
      } else {
        if ($G__50974_retractions$$ = $APP.cljs.core.seq($G__50974_retractions$$)) {
          if ($APP.cljs.core.chunked_seq_QMARK_($G__50974_retractions$$)) {
            $G__50976_alpha_roots_50979_c__5548__auto___50973_c__5548__auto___50995_count__48759_50937_root_51000_seq__48754_50981_temp__5825__auto___50991__$1$$ = $APP.cljs.core.chunk_first($G__50974_retractions$$), $G__50974_retractions$$ = $APP.cljs.core.chunk_rest($G__50974_retractions$$), $G__50975_chunk__48758_50936_fact_group_50980_vec__48780_50978$$ = $G__50976_alpha_roots_50979_c__5548__auto___50973_c__5548__auto___50995_count__48759_50937_root_51000_seq__48754_50981_temp__5825__auto___50991__$1$$, 
            $G__50976_alpha_roots_50979_c__5548__auto___50973_c__5548__auto___50995_count__48759_50937_root_51000_seq__48754_50981_temp__5825__auto___50991__$1$$ = $APP.cljs.core.count($G__50976_alpha_roots_50979_c__5548__auto___50973_c__5548__auto___50995_count__48759_50937_root_51000_seq__48754_50981_temp__5825__auto___50991__$1$$);
          } else {
            $G__50975_chunk__48758_50936_fact_group_50980_vec__48780_50978$$ = $APP.cljs.core.first($G__50974_retractions$$);
            $G__50976_alpha_roots_50979_c__5548__auto___50973_c__5548__auto___50995_count__48759_50937_root_51000_seq__48754_50981_temp__5825__auto___50991__$1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__50975_chunk__48758_50936_fact_group_50980_vec__48780_50978$$, 0, null);
            $G__50975_chunk__48758_50936_fact_group_50980_vec__48780_50978$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__50975_chunk__48758_50936_fact_group_50980_vec__48780_50978$$, 1, null);
            $G__50976_alpha_roots_50979_c__5548__auto___50973_c__5548__auto___50995_count__48759_50937_root_51000_seq__48754_50981_temp__5825__auto___50991__$1$$ = $APP.cljs.core.seq($G__50976_alpha_roots_50979_c__5548__auto___50973_c__5548__auto___50995_count__48759_50937_root_51000_seq__48754_50981_temp__5825__auto___50991__$1$$);
            $G__50997_chunk__48755_50982_i__48760_50938_seq__48754_50993__$1$$ = null;
            for ($G__50996_alpha_roots_50940_c__5548__auto___50956_i__48757_50984_root_50961_seq__48761_50942_temp__5825__auto___50952$$ = $G__50998_count__48756_50983_fact_group_50941_vec__48775_50939$$ = 0;;) {
              if ($G__50996_alpha_roots_50940_c__5548__auto___50956_i__48757_50984_root_50961_seq__48761_50942_temp__5825__auto___50952$$ < $G__50998_count__48756_50983_fact_group_50941_vec__48775_50939$$) {
                $G__50958_chunk__48762_50943_root_50985_seq__48761_50954__$1$$ = $G__50997_chunk__48755_50982_i__48760_50938_seq__48754_50993__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $G__50996_alpha_roots_50940_c__5548__auto___50956_i__48757_50984_root_50961_seq__48761_50942_temp__5825__auto___50952$$), clara.rules.engine.alpha_retract($G__50958_chunk__48762_50943_root_50985_seq__48761_50954__$1$$, $G__50975_chunk__48758_50936_fact_group_50980_vec__48780_50978$$, $memory$$, $transport$$, $listener$$), 
                $G__50996_alpha_roots_50940_c__5548__auto___50956_i__48757_50984_root_50961_seq__48761_50942_temp__5825__auto___50952$$ += 1;
              } else {
                if ($G__50976_alpha_roots_50979_c__5548__auto___50973_c__5548__auto___50995_count__48759_50937_root_51000_seq__48754_50981_temp__5825__auto___50991__$1$$ = $APP.cljs.core.seq($G__50976_alpha_roots_50979_c__5548__auto___50973_c__5548__auto___50995_count__48759_50937_root_51000_seq__48754_50981_temp__5825__auto___50991__$1$$)) {
                  $G__50997_chunk__48755_50982_i__48760_50938_seq__48754_50993__$1$$ = $G__50976_alpha_roots_50979_c__5548__auto___50973_c__5548__auto___50995_count__48759_50937_root_51000_seq__48754_50981_temp__5825__auto___50991__$1$$, $APP.cljs.core.chunked_seq_QMARK_($G__50997_chunk__48755_50982_i__48760_50938_seq__48754_50993__$1$$) ? ($G__50976_alpha_roots_50979_c__5548__auto___50973_c__5548__auto___50995_count__48759_50937_root_51000_seq__48754_50981_temp__5825__auto___50991__$1$$ = $APP.cljs.core.chunk_first($G__50997_chunk__48755_50982_i__48760_50938_seq__48754_50993__$1$$), 
                  $G__50996_alpha_roots_50940_c__5548__auto___50956_i__48757_50984_root_50961_seq__48761_50942_temp__5825__auto___50952$$ = $APP.cljs.core.chunk_rest($G__50997_chunk__48755_50982_i__48760_50938_seq__48754_50993__$1$$), $G__50997_chunk__48755_50982_i__48760_50938_seq__48754_50993__$1$$ = $G__50976_alpha_roots_50979_c__5548__auto___50973_c__5548__auto___50995_count__48759_50937_root_51000_seq__48754_50981_temp__5825__auto___50991__$1$$, $G__50998_count__48756_50983_fact_group_50941_vec__48775_50939$$ = 
                  $APP.cljs.core.count($G__50976_alpha_roots_50979_c__5548__auto___50973_c__5548__auto___50995_count__48759_50937_root_51000_seq__48754_50981_temp__5825__auto___50991__$1$$), $G__50976_alpha_roots_50979_c__5548__auto___50973_c__5548__auto___50995_count__48759_50937_root_51000_seq__48754_50981_temp__5825__auto___50991__$1$$ = $G__50996_alpha_roots_50940_c__5548__auto___50956_i__48757_50984_root_50961_seq__48761_50942_temp__5825__auto___50952$$) : ($G__50976_alpha_roots_50979_c__5548__auto___50973_c__5548__auto___50995_count__48759_50937_root_51000_seq__48754_50981_temp__5825__auto___50991__$1$$ = 
                  $APP.cljs.core.first($G__50997_chunk__48755_50982_i__48760_50938_seq__48754_50993__$1$$), clara.rules.engine.alpha_retract($G__50976_alpha_roots_50979_c__5548__auto___50973_c__5548__auto___50995_count__48759_50937_root_51000_seq__48754_50981_temp__5825__auto___50991__$1$$, $G__50975_chunk__48758_50936_fact_group_50980_vec__48780_50978$$, $memory$$, $transport$$, $listener$$), $G__50976_alpha_roots_50979_c__5548__auto___50973_c__5548__auto___50995_count__48759_50937_root_51000_seq__48754_50981_temp__5825__auto___50991__$1$$ = 
                  $APP.cljs.core.next($G__50997_chunk__48755_50982_i__48760_50938_seq__48754_50993__$1$$), $G__50997_chunk__48755_50982_i__48760_50938_seq__48754_50993__$1$$ = null, $G__50998_count__48756_50983_fact_group_50941_vec__48775_50939$$ = 0), $G__50996_alpha_roots_50940_c__5548__auto___50956_i__48757_50984_root_50961_seq__48761_50942_temp__5825__auto___50952$$ = 0;
                } else {
                  break;
                }
              }
            }
            $G__50974_retractions$$ = $APP.cljs.core.next($G__50974_retractions$$);
            $G__50975_chunk__48758_50936_fact_group_50980_vec__48780_50978$$ = null;
            $G__50976_alpha_roots_50979_c__5548__auto___50973_c__5548__auto___50995_count__48759_50937_root_51000_seq__48754_50981_temp__5825__auto___50991__$1$$ = 0;
          }
          $G__50997_chunk__48755_50982_i__48760_50938_seq__48754_50993__$1$$ = 0;
        } else {
          break;
        }
      }
    }
    if (!$APP.cljs.core.truth_($APP.cljs.core.not_empty($APP.cljs.core.deref(clara.rules.engine._STAR_pending_external_retractions_STAR_)))) {
      return null;
    }
  }
};
clara.rules.engine.flush_updates = function($current_session$$) {
  return function $clara$rules$engine$flush_updates_$_flush_all$$($current_session__$1$$, $flushed_items_QMARK_$$) {
    var $map__48923__$1$$ = $APP.cljs.core.__destructure_map($current_session__$1$$);
    $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__48923__$1$$, cljs$cst$3082$rulebase);
    var $transient_memory$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__48923__$1$$, cljs$cst$3117$transient_memory), $transport$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__48923__$1$$, cljs$cst$3118$transport);
    $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__48923__$1$$, $APP.cljs$cst$3119$insertions);
    var $get_alphas_fn$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__48923__$1$$, cljs$cst$3120$get_alphas_fn), $listener$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__48923__$1$$, cljs$cst$3121$listener), $pending_updates$$ = clara.rules.update_cache.core.get_updates_and_reset_BANG_(cljs$cst$3122$pending_updates.cljs$core$IFn$_invoke$arity$1($current_session__$1$$));
    if ($APP.cljs.core.empty_QMARK_($pending_updates$$)) {
      return $flushed_items_QMARK_$$;
    }
    for (var $seq__48927_51009$$ = $APP.cljs.core.seq($pending_updates$$), $chunk__48941_51010$$ = null, $count__48942_51011$$ = 0, $i__48943_51012$$ = 0;;) {
      if ($i__48943_51012$$ < $count__48942_51011$$) {
        for (var $partition_51013$$ = $chunk__48941_51010$$.cljs$core$IIndexed$_nth$arity$2(null, $i__48943_51012$$), $facts_51014$$ = $APP.cljs.core.mapcat.cljs$core$IFn$_invoke$arity$variadic(cljs$cst$3092$facts, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$partition_51013$$], 0)), $seq__48945_51015$$ = $APP.cljs.core.seq($get_alphas_fn$$.cljs$core$IFn$_invoke$arity$1 ? $get_alphas_fn$$.cljs$core$IFn$_invoke$arity$1($facts_51014$$) : $get_alphas_fn$$.call(null, $facts_51014$$)), $chunk__48950_51016$$ = 
        null, $count__48951_51017$$ = 0, $i__48952_51018$$ = 0;;) {
          if ($i__48952_51018$$ < $count__48951_51017$$) {
            for (var $vec__49068_51019$$ = $chunk__48950_51016$$.cljs$core$IIndexed$_nth$arity$2(null, $i__48952_51018$$), $alpha_roots_51020$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49068_51019$$, 0, null), $fact_group_51021$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49068_51019$$, 1, null), $seq__48953_51022$$ = $APP.cljs.core.seq($alpha_roots_51020$$), $chunk__48954_51023$$ = null, $count__48955_51024$$ = 0, $i__48956_51025$$ = 0;;) {
              if ($i__48956_51025$$ < $count__48955_51024$$) {
                var $root_51026$$ = $chunk__48954_51023$$.cljs$core$IIndexed$_nth$arity$2(null, $i__48956_51025$$);
                $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3094$insert, $APP.cljs$cst$139$type.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first($partition_51013$$))) ? clara.rules.engine.alpha_activate($root_51026$$, $fact_group_51021$$, $transient_memory$$, $transport$$, $listener$$) : clara.rules.engine.alpha_retract($root_51026$$, $fact_group_51021$$, $transient_memory$$, $transport$$, $listener$$);
                $i__48956_51025$$ += 1;
              } else {
                var $temp__5825__auto___51034$$ = $APP.cljs.core.seq($seq__48953_51022$$);
                if ($temp__5825__auto___51034$$) {
                  var $seq__48953_51035__$1$$ = $temp__5825__auto___51034$$;
                  if ($APP.cljs.core.chunked_seq_QMARK_($seq__48953_51035__$1$$)) {
                    var $c__5548__auto___51036$$ = $APP.cljs.core.chunk_first($seq__48953_51035__$1$$), $G__51037$$ = $APP.cljs.core.chunk_rest($seq__48953_51035__$1$$), $G__51038$$ = $c__5548__auto___51036$$, $G__51039$$ = $APP.cljs.core.count($c__5548__auto___51036$$);
                    $seq__48953_51022$$ = $G__51037$$;
                    $chunk__48954_51023$$ = $G__51038$$;
                    $count__48955_51024$$ = $G__51039$$;
                  } else {
                    var $root_51041$$ = $APP.cljs.core.first($seq__48953_51035__$1$$);
                    $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3094$insert, $APP.cljs$cst$139$type.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first($partition_51013$$))) ? clara.rules.engine.alpha_activate($root_51041$$, $fact_group_51021$$, $transient_memory$$, $transport$$, $listener$$) : clara.rules.engine.alpha_retract($root_51041$$, $fact_group_51021$$, $transient_memory$$, $transport$$, $listener$$);
                    $seq__48953_51022$$ = $APP.cljs.core.next($seq__48953_51035__$1$$);
                    $chunk__48954_51023$$ = null;
                    $count__48955_51024$$ = 0;
                  }
                  $i__48956_51025$$ = 0;
                } else {
                  break;
                }
              }
            }
            $i__48952_51018$$ += 1;
          } else {
            var $temp__5825__auto___51050$$ = $APP.cljs.core.seq($seq__48945_51015$$);
            if ($temp__5825__auto___51050$$) {
              var $seq__48945_51052__$1$$ = $temp__5825__auto___51050$$;
              if ($APP.cljs.core.chunked_seq_QMARK_($seq__48945_51052__$1$$)) {
                var $c__5548__auto___51054$$ = $APP.cljs.core.chunk_first($seq__48945_51052__$1$$), $G__51055$$ = $APP.cljs.core.chunk_rest($seq__48945_51052__$1$$), $G__51056$$ = $c__5548__auto___51054$$, $G__51057$$ = $APP.cljs.core.count($c__5548__auto___51054$$);
                $seq__48945_51015$$ = $G__51055$$;
                $chunk__48950_51016$$ = $G__51056$$;
                $count__48951_51017$$ = $G__51057$$;
              } else {
                for (var $vec__49071_51059$$ = $APP.cljs.core.first($seq__48945_51052__$1$$), $alpha_roots_51060$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49071_51059$$, 0, null), $fact_group_51061$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49071_51059$$, 1, null), $seq__48946_51062$$ = $APP.cljs.core.seq($alpha_roots_51060$$), $chunk__48947_51063$$ = null, $count__48948_51064$$ = 0, $i__48949_51065$$ = 0;;) {
                  if ($i__48949_51065$$ < $count__48948_51064$$) {
                    var $root_51067$$ = $chunk__48947_51063$$.cljs$core$IIndexed$_nth$arity$2(null, $i__48949_51065$$);
                    $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3094$insert, $APP.cljs$cst$139$type.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first($partition_51013$$))) ? clara.rules.engine.alpha_activate($root_51067$$, $fact_group_51061$$, $transient_memory$$, $transport$$, $listener$$) : clara.rules.engine.alpha_retract($root_51067$$, $fact_group_51061$$, $transient_memory$$, $transport$$, $listener$$);
                    $i__48949_51065$$ += 1;
                  } else {
                    var $temp__5825__auto___51072__$1$$ = $APP.cljs.core.seq($seq__48946_51062$$);
                    if ($temp__5825__auto___51072__$1$$) {
                      var $seq__48946_51073__$1$$ = $temp__5825__auto___51072__$1$$;
                      if ($APP.cljs.core.chunked_seq_QMARK_($seq__48946_51073__$1$$)) {
                        var $c__5548__auto___51074$$ = $APP.cljs.core.chunk_first($seq__48946_51073__$1$$), $G__51075$$ = $APP.cljs.core.chunk_rest($seq__48946_51073__$1$$), $G__51076$$ = $c__5548__auto___51074$$, $G__51077$$ = $APP.cljs.core.count($c__5548__auto___51074$$);
                        $seq__48946_51062$$ = $G__51075$$;
                        $chunk__48947_51063$$ = $G__51076$$;
                        $count__48948_51064$$ = $G__51077$$;
                      } else {
                        var $root_51079$$ = $APP.cljs.core.first($seq__48946_51073__$1$$);
                        $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3094$insert, $APP.cljs$cst$139$type.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first($partition_51013$$))) ? clara.rules.engine.alpha_activate($root_51079$$, $fact_group_51061$$, $transient_memory$$, $transport$$, $listener$$) : clara.rules.engine.alpha_retract($root_51079$$, $fact_group_51061$$, $transient_memory$$, $transport$$, $listener$$);
                        $seq__48946_51062$$ = $APP.cljs.core.next($seq__48946_51073__$1$$);
                        $chunk__48947_51063$$ = null;
                        $count__48948_51064$$ = 0;
                      }
                      $i__48949_51065$$ = 0;
                    } else {
                      break;
                    }
                  }
                }
                $seq__48945_51015$$ = $APP.cljs.core.next($seq__48945_51052__$1$$);
                $chunk__48950_51016$$ = null;
                $count__48951_51017$$ = 0;
              }
              $i__48952_51018$$ = 0;
            } else {
              break;
            }
          }
        }
        $i__48943_51012$$ += 1;
      } else {
        var $temp__5825__auto___51092$$ = $APP.cljs.core.seq($seq__48927_51009$$);
        if ($temp__5825__auto___51092$$) {
          var $seq__48927_51093__$1$$ = $temp__5825__auto___51092$$;
          if ($APP.cljs.core.chunked_seq_QMARK_($seq__48927_51093__$1$$)) {
            var $c__5548__auto___51094$$ = $APP.cljs.core.chunk_first($seq__48927_51093__$1$$), $G__51095$$ = $APP.cljs.core.chunk_rest($seq__48927_51093__$1$$), $G__51096$$ = $c__5548__auto___51094$$, $G__51097$$ = $APP.cljs.core.count($c__5548__auto___51094$$);
            $seq__48927_51009$$ = $G__51095$$;
            $chunk__48941_51010$$ = $G__51096$$;
            $count__48942_51011$$ = $G__51097$$;
          } else {
            for (var $partition_51099$$ = $APP.cljs.core.first($seq__48927_51093__$1$$), $facts_51100$$ = $APP.cljs.core.mapcat.cljs$core$IFn$_invoke$arity$variadic(cljs$cst$3092$facts, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$partition_51099$$], 0)), $seq__48929_51101$$ = $APP.cljs.core.seq($get_alphas_fn$$.cljs$core$IFn$_invoke$arity$1 ? $get_alphas_fn$$.cljs$core$IFn$_invoke$arity$1($facts_51100$$) : $get_alphas_fn$$.call(null, $facts_51100$$)), $chunk__48934_51102$$ = null, $count__48935_51103$$ = 
            0, $i__48936_51104$$ = 0;;) {
              if ($i__48936_51104$$ < $count__48935_51103$$) {
                for (var $vec__49080_51105$$ = $chunk__48934_51102$$.cljs$core$IIndexed$_nth$arity$2(null, $i__48936_51104$$), $alpha_roots_51107$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49080_51105$$, 0, null), $fact_group_51108$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49080_51105$$, 1, null), $seq__48937_51110$$ = $APP.cljs.core.seq($alpha_roots_51107$$), $chunk__48938_51111$$ = null, $count__48939_51112$$ = 0, $i__48940_51113$$ = 0;;) {
                  if ($i__48940_51113$$ < $count__48939_51112$$) {
                    var $root_51114$$ = $chunk__48938_51111$$.cljs$core$IIndexed$_nth$arity$2(null, $i__48940_51113$$);
                    $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3094$insert, $APP.cljs$cst$139$type.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first($partition_51099$$))) ? clara.rules.engine.alpha_activate($root_51114$$, $fact_group_51108$$, $transient_memory$$, $transport$$, $listener$$) : clara.rules.engine.alpha_retract($root_51114$$, $fact_group_51108$$, $transient_memory$$, $transport$$, $listener$$);
                    $i__48940_51113$$ += 1;
                  } else {
                    var $temp__5825__auto___51121__$1$$ = $APP.cljs.core.seq($seq__48937_51110$$);
                    if ($temp__5825__auto___51121__$1$$) {
                      var $seq__48937_51122__$1$$ = $temp__5825__auto___51121__$1$$;
                      if ($APP.cljs.core.chunked_seq_QMARK_($seq__48937_51122__$1$$)) {
                        var $c__5548__auto___51123$$ = $APP.cljs.core.chunk_first($seq__48937_51122__$1$$), $G__51124$$ = $APP.cljs.core.chunk_rest($seq__48937_51122__$1$$), $G__51125$$ = $c__5548__auto___51123$$, $G__51126$$ = $APP.cljs.core.count($c__5548__auto___51123$$);
                        $seq__48937_51110$$ = $G__51124$$;
                        $chunk__48938_51111$$ = $G__51125$$;
                        $count__48939_51112$$ = $G__51126$$;
                      } else {
                        var $root_51128$$ = $APP.cljs.core.first($seq__48937_51122__$1$$);
                        $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3094$insert, $APP.cljs$cst$139$type.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first($partition_51099$$))) ? clara.rules.engine.alpha_activate($root_51128$$, $fact_group_51108$$, $transient_memory$$, $transport$$, $listener$$) : clara.rules.engine.alpha_retract($root_51128$$, $fact_group_51108$$, $transient_memory$$, $transport$$, $listener$$);
                        $seq__48937_51110$$ = $APP.cljs.core.next($seq__48937_51122__$1$$);
                        $chunk__48938_51111$$ = null;
                        $count__48939_51112$$ = 0;
                      }
                      $i__48940_51113$$ = 0;
                    } else {
                      break;
                    }
                  }
                }
                $i__48936_51104$$ += 1;
              } else {
                var $temp__5825__auto___51137__$1$$ = $APP.cljs.core.seq($seq__48929_51101$$);
                if ($temp__5825__auto___51137__$1$$) {
                  var $seq__48929_51138__$1$$ = $temp__5825__auto___51137__$1$$;
                  if ($APP.cljs.core.chunked_seq_QMARK_($seq__48929_51138__$1$$)) {
                    var $c__5548__auto___51139$$ = $APP.cljs.core.chunk_first($seq__48929_51138__$1$$), $G__51140$$ = $APP.cljs.core.chunk_rest($seq__48929_51138__$1$$), $G__51141$$ = $c__5548__auto___51139$$, $G__51142$$ = $APP.cljs.core.count($c__5548__auto___51139$$);
                    $seq__48929_51101$$ = $G__51140$$;
                    $chunk__48934_51102$$ = $G__51141$$;
                    $count__48935_51103$$ = $G__51142$$;
                  } else {
                    for (var $vec__49083_51144$$ = $APP.cljs.core.first($seq__48929_51138__$1$$), $alpha_roots_51145$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49083_51144$$, 0, null), $fact_group_51146$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49083_51144$$, 1, null), $seq__48930_51148$$ = $APP.cljs.core.seq($alpha_roots_51145$$), $chunk__48931_51149$$ = null, $count__48932_51150$$ = 0, $i__48933_51151$$ = 0;;) {
                      if ($i__48933_51151$$ < $count__48932_51150$$) {
                        var $root_51152$$ = $chunk__48931_51149$$.cljs$core$IIndexed$_nth$arity$2(null, $i__48933_51151$$);
                        $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3094$insert, $APP.cljs$cst$139$type.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first($partition_51099$$))) ? clara.rules.engine.alpha_activate($root_51152$$, $fact_group_51146$$, $transient_memory$$, $transport$$, $listener$$) : clara.rules.engine.alpha_retract($root_51152$$, $fact_group_51146$$, $transient_memory$$, $transport$$, $listener$$);
                        $i__48933_51151$$ += 1;
                      } else {
                        var $temp__5825__auto___51157__$2$$ = $APP.cljs.core.seq($seq__48930_51148$$);
                        if ($temp__5825__auto___51157__$2$$) {
                          var $seq__48930_51158__$1$$ = $temp__5825__auto___51157__$2$$;
                          if ($APP.cljs.core.chunked_seq_QMARK_($seq__48930_51158__$1$$)) {
                            var $c__5548__auto___51159$$ = $APP.cljs.core.chunk_first($seq__48930_51158__$1$$), $G__51160$$ = $APP.cljs.core.chunk_rest($seq__48930_51158__$1$$), $G__51161$$ = $c__5548__auto___51159$$, $G__51162$$ = $APP.cljs.core.count($c__5548__auto___51159$$);
                            $seq__48930_51148$$ = $G__51160$$;
                            $chunk__48931_51149$$ = $G__51161$$;
                            $count__48932_51150$$ = $G__51162$$;
                          } else {
                            var $root_51164$$ = $APP.cljs.core.first($seq__48930_51158__$1$$);
                            $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3094$insert, $APP.cljs$cst$139$type.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first($partition_51099$$))) ? clara.rules.engine.alpha_activate($root_51164$$, $fact_group_51146$$, $transient_memory$$, $transport$$, $listener$$) : clara.rules.engine.alpha_retract($root_51164$$, $fact_group_51146$$, $transient_memory$$, $transport$$, $listener$$);
                            $seq__48930_51148$$ = $APP.cljs.core.next($seq__48930_51158__$1$$);
                            $chunk__48931_51149$$ = null;
                            $count__48932_51150$$ = 0;
                          }
                          $i__48933_51151$$ = 0;
                        } else {
                          break;
                        }
                      }
                    }
                    $seq__48929_51101$$ = $APP.cljs.core.next($seq__48929_51138__$1$$);
                    $chunk__48934_51102$$ = null;
                    $count__48935_51103$$ = 0;
                  }
                  $i__48936_51104$$ = 0;
                } else {
                  break;
                }
              }
            }
            $seq__48927_51009$$ = $APP.cljs.core.next($seq__48927_51093__$1$$);
            $chunk__48941_51010$$ = null;
            $count__48942_51011$$ = 0;
          }
          $i__48943_51012$$ = 0;
        } else {
          break;
        }
      }
    }
    return $clara$rules$engine$flush_updates_$_flush_all$$($current_session__$1$$, !0);
  }($current_session$$, !1);
};
clara.rules.engine.insert_facts_BANG_ = function($facts$$, $unconditional$$) {
  return $APP.cljs.core.truth_($unconditional$$) ? $APP.cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$3(cljs$cst$3123$batched_unconditional_insertions.cljs$core$IFn$_invoke$arity$1(clara.rules.engine._STAR_rule_context_STAR_), $APP.cljs.core.into, $facts$$) : $APP.cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$3(cljs$cst$3124$batched_logical_insertions.cljs$core$IFn$_invoke$arity$1(clara.rules.engine._STAR_rule_context_STAR_), $APP.cljs.core.into, $facts$$);
};
clara.rules.engine.rhs_retract_facts_BANG_ = function($facts$$) {
  return $APP.cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$3(cljs$cst$3125$batched_rhs_retractions.cljs$core$IFn$_invoke$arity$1(clara.rules.engine._STAR_rule_context_STAR_), $APP.cljs.core.into, $facts$$);
};
clara.rules.engine.flush_rhs_retractions_BANG_ = function($G__51212_fact_group_facts$jscomp$45_temp__5825__auto__$$) {
  var $listener$$ = $APP.cljs.core.__destructure_map(clara.rules.engine._STAR_current_session_STAR_);
  $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($listener$$, cljs$cst$3082$rulebase);
  var $transient_memory$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($listener$$, cljs$cst$3117$transient_memory), $transport$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($listener$$, cljs$cst$3118$transport), $G__51211_insertions$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($listener$$, $APP.cljs$cst$3119$insertions), $c__5548__auto__$jscomp$40_c__5548__auto___51229_chunk__49093_get_alphas_fn$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($listener$$, cljs$cst$3120$get_alphas_fn);
  $listener$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($listener$$, cljs$cst$3121$listener);
  var $G__51232_count__49091_51218_i__49095_map__49087__$1_token$$ = $APP.cljs.core.__destructure_map(clara.rules.engine._STAR_rule_context_STAR_), $G__51213_G__51231_chunk__49090_51217_count__49094_node$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($G__51232_count__49091_51218_i__49095_map__49087__$1_token$$, $APP.cljs$cst$3067$node);
  $G__51232_count__49091_51218_i__49095_map__49087__$1_token$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($G__51232_count__49091_51218_i__49095_map__49087__$1_token$$, $APP.cljs$cst$3068$token);
  $APP.cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$3($G__51211_insertions$$, $APP.cljs.core._PLUS_, $APP.cljs.core.count($G__51212_fact_group_facts$jscomp$45_temp__5825__auto__$$));
  $APP.cljs.core.truth_($listener$$) && clara.rules.listener.retract_facts_BANG_($listener$$, $G__51213_G__51231_chunk__49090_51217_count__49094_node$$, $G__51232_count__49091_51218_i__49095_map__49087__$1_token$$, $G__51212_fact_group_facts$jscomp$45_temp__5825__auto__$$);
  $G__51211_insertions$$ = $APP.cljs.core.seq($c__5548__auto__$jscomp$40_c__5548__auto___51229_chunk__49093_get_alphas_fn$$.cljs$core$IFn$_invoke$arity$1 ? $c__5548__auto__$jscomp$40_c__5548__auto___51229_chunk__49093_get_alphas_fn$$.cljs$core$IFn$_invoke$arity$1($G__51212_fact_group_facts$jscomp$45_temp__5825__auto__$$) : $c__5548__auto__$jscomp$40_c__5548__auto___51229_chunk__49093_get_alphas_fn$$.call(null, $G__51212_fact_group_facts$jscomp$45_temp__5825__auto__$$));
  $c__5548__auto__$jscomp$40_c__5548__auto___51229_chunk__49093_get_alphas_fn$$ = null;
  for ($G__51232_count__49091_51218_i__49095_map__49087__$1_token$$ = $G__51213_G__51231_chunk__49090_51217_count__49094_node$$ = 0;;) {
    if ($G__51232_count__49091_51218_i__49095_map__49087__$1_token$$ < $G__51213_G__51231_chunk__49090_51217_count__49094_node$$) {
      $G__51212_fact_group_facts$jscomp$45_temp__5825__auto__$$ = $c__5548__auto__$jscomp$40_c__5548__auto___51229_chunk__49093_get_alphas_fn$$.cljs$core$IIndexed$_nth$arity$2(null, $G__51232_count__49091_51218_i__49095_map__49087__$1_token$$);
      var $G__51230_alpha_roots_c__5548__auto___51196_i__49092_51219_root_51201_seq__49096_51185_temp__5825__auto___51194$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__51212_fact_group_facts$jscomp$45_temp__5825__auto__$$, 0, null);
      $G__51212_fact_group_facts$jscomp$45_temp__5825__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__51212_fact_group_facts$jscomp$45_temp__5825__auto__$$, 1, null);
      $G__51230_alpha_roots_c__5548__auto___51196_i__49092_51219_root_51201_seq__49096_51185_temp__5825__auto___51194$$ = $APP.cljs.core.seq($G__51230_alpha_roots_c__5548__auto___51196_i__49092_51219_root_51201_seq__49096_51185_temp__5825__auto___51194$$);
      for (var $G__51198_chunk__49097_51186_root_51220_seq__49096_51195__$1$$ = null, $G__51199_count__49098_51187$$ = 0, $G__51197_i__49099_51188$$ = 0;;) {
        if ($G__51197_i__49099_51188$$ < $G__51199_count__49098_51187$$) {
          var $root_51189$$ = $G__51198_chunk__49097_51186_root_51220_seq__49096_51195__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $G__51197_i__49099_51188$$);
          clara.rules.engine.alpha_retract($root_51189$$, $G__51212_fact_group_facts$jscomp$45_temp__5825__auto__$$, $transient_memory$$, $transport$$, $listener$$);
          $G__51197_i__49099_51188$$ += 1;
        } else {
          if ($G__51230_alpha_roots_c__5548__auto___51196_i__49092_51219_root_51201_seq__49096_51185_temp__5825__auto___51194$$ = $APP.cljs.core.seq($G__51230_alpha_roots_c__5548__auto___51196_i__49092_51219_root_51201_seq__49096_51185_temp__5825__auto___51194$$)) {
            $G__51198_chunk__49097_51186_root_51220_seq__49096_51195__$1$$ = $G__51230_alpha_roots_c__5548__auto___51196_i__49092_51219_root_51201_seq__49096_51185_temp__5825__auto___51194$$, $APP.cljs.core.chunked_seq_QMARK_($G__51198_chunk__49097_51186_root_51220_seq__49096_51195__$1$$) ? ($G__51230_alpha_roots_c__5548__auto___51196_i__49092_51219_root_51201_seq__49096_51185_temp__5825__auto___51194$$ = $APP.cljs.core.chunk_first($G__51198_chunk__49097_51186_root_51220_seq__49096_51195__$1$$), 
            $G__51197_i__49099_51188$$ = $APP.cljs.core.chunk_rest($G__51198_chunk__49097_51186_root_51220_seq__49096_51195__$1$$), $G__51198_chunk__49097_51186_root_51220_seq__49096_51195__$1$$ = $G__51230_alpha_roots_c__5548__auto___51196_i__49092_51219_root_51201_seq__49096_51185_temp__5825__auto___51194$$, $G__51199_count__49098_51187$$ = $APP.cljs.core.count($G__51230_alpha_roots_c__5548__auto___51196_i__49092_51219_root_51201_seq__49096_51185_temp__5825__auto___51194$$), $G__51230_alpha_roots_c__5548__auto___51196_i__49092_51219_root_51201_seq__49096_51185_temp__5825__auto___51194$$ = 
            $G__51197_i__49099_51188$$) : ($G__51230_alpha_roots_c__5548__auto___51196_i__49092_51219_root_51201_seq__49096_51185_temp__5825__auto___51194$$ = $APP.cljs.core.first($G__51198_chunk__49097_51186_root_51220_seq__49096_51195__$1$$), clara.rules.engine.alpha_retract($G__51230_alpha_roots_c__5548__auto___51196_i__49092_51219_root_51201_seq__49096_51185_temp__5825__auto___51194$$, $G__51212_fact_group_facts$jscomp$45_temp__5825__auto__$$, $transient_memory$$, $transport$$, $listener$$), 
            $G__51230_alpha_roots_c__5548__auto___51196_i__49092_51219_root_51201_seq__49096_51185_temp__5825__auto___51194$$ = $APP.cljs.core.next($G__51198_chunk__49097_51186_root_51220_seq__49096_51195__$1$$), $G__51198_chunk__49097_51186_root_51220_seq__49096_51195__$1$$ = null, $G__51199_count__49098_51187$$ = 0), $G__51197_i__49099_51188$$ = 0;
          } else {
            break;
          }
        }
      }
      $G__51232_count__49091_51218_i__49095_map__49087__$1_token$$ += 1;
    } else {
      if ($G__51212_fact_group_facts$jscomp$45_temp__5825__auto__$$ = $APP.cljs.core.seq($G__51211_insertions$$)) {
        $G__51211_insertions$$ = $G__51212_fact_group_facts$jscomp$45_temp__5825__auto__$$;
        if ($APP.cljs.core.chunked_seq_QMARK_($G__51211_insertions$$)) {
          $c__5548__auto__$jscomp$40_c__5548__auto___51229_chunk__49093_get_alphas_fn$$ = $APP.cljs.core.chunk_first($G__51211_insertions$$), $G__51211_insertions$$ = $APP.cljs.core.chunk_rest($G__51211_insertions$$), $G__51212_fact_group_facts$jscomp$45_temp__5825__auto__$$ = $c__5548__auto__$jscomp$40_c__5548__auto___51229_chunk__49093_get_alphas_fn$$, $G__51213_G__51231_chunk__49090_51217_count__49094_node$$ = $APP.cljs.core.count($c__5548__auto__$jscomp$40_c__5548__auto___51229_chunk__49093_get_alphas_fn$$), 
          $c__5548__auto__$jscomp$40_c__5548__auto___51229_chunk__49093_get_alphas_fn$$ = $G__51212_fact_group_facts$jscomp$45_temp__5825__auto__$$;
        } else {
          $G__51212_fact_group_facts$jscomp$45_temp__5825__auto__$$ = $APP.cljs.core.first($G__51211_insertions$$);
          $G__51230_alpha_roots_c__5548__auto___51196_i__49092_51219_root_51201_seq__49096_51185_temp__5825__auto___51194$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__51212_fact_group_facts$jscomp$45_temp__5825__auto__$$, 0, null);
          $G__51212_fact_group_facts$jscomp$45_temp__5825__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__51212_fact_group_facts$jscomp$45_temp__5825__auto__$$, 1, null);
          $c__5548__auto__$jscomp$40_c__5548__auto___51229_chunk__49093_get_alphas_fn$$ = $APP.cljs.core.seq($G__51230_alpha_roots_c__5548__auto___51196_i__49092_51219_root_51201_seq__49096_51185_temp__5825__auto___51194$$);
          $G__51213_G__51231_chunk__49090_51217_count__49094_node$$ = null;
          for ($G__51230_alpha_roots_c__5548__auto___51196_i__49092_51219_root_51201_seq__49096_51185_temp__5825__auto___51194$$ = $G__51232_count__49091_51218_i__49095_map__49087__$1_token$$ = 0;;) {
            if ($G__51230_alpha_roots_c__5548__auto___51196_i__49092_51219_root_51201_seq__49096_51185_temp__5825__auto___51194$$ < $G__51232_count__49091_51218_i__49095_map__49087__$1_token$$) {
              $G__51198_chunk__49097_51186_root_51220_seq__49096_51195__$1$$ = $G__51213_G__51231_chunk__49090_51217_count__49094_node$$.cljs$core$IIndexed$_nth$arity$2(null, $G__51230_alpha_roots_c__5548__auto___51196_i__49092_51219_root_51201_seq__49096_51185_temp__5825__auto___51194$$), clara.rules.engine.alpha_retract($G__51198_chunk__49097_51186_root_51220_seq__49096_51195__$1$$, $G__51212_fact_group_facts$jscomp$45_temp__5825__auto__$$, $transient_memory$$, $transport$$, $listener$$), $G__51230_alpha_roots_c__5548__auto___51196_i__49092_51219_root_51201_seq__49096_51185_temp__5825__auto___51194$$ += 
              1;
            } else {
              if ($c__5548__auto__$jscomp$40_c__5548__auto___51229_chunk__49093_get_alphas_fn$$ = $APP.cljs.core.seq($c__5548__auto__$jscomp$40_c__5548__auto___51229_chunk__49093_get_alphas_fn$$)) {
                $G__51213_G__51231_chunk__49090_51217_count__49094_node$$ = $c__5548__auto__$jscomp$40_c__5548__auto___51229_chunk__49093_get_alphas_fn$$, $APP.cljs.core.chunked_seq_QMARK_($G__51213_G__51231_chunk__49090_51217_count__49094_node$$) ? ($c__5548__auto__$jscomp$40_c__5548__auto___51229_chunk__49093_get_alphas_fn$$ = $APP.cljs.core.chunk_first($G__51213_G__51231_chunk__49090_51217_count__49094_node$$), $G__51230_alpha_roots_c__5548__auto___51196_i__49092_51219_root_51201_seq__49096_51185_temp__5825__auto___51194$$ = 
                $APP.cljs.core.chunk_rest($G__51213_G__51231_chunk__49090_51217_count__49094_node$$), $G__51213_G__51231_chunk__49090_51217_count__49094_node$$ = $c__5548__auto__$jscomp$40_c__5548__auto___51229_chunk__49093_get_alphas_fn$$, $G__51232_count__49091_51218_i__49095_map__49087__$1_token$$ = $APP.cljs.core.count($c__5548__auto__$jscomp$40_c__5548__auto___51229_chunk__49093_get_alphas_fn$$), $c__5548__auto__$jscomp$40_c__5548__auto___51229_chunk__49093_get_alphas_fn$$ = $G__51230_alpha_roots_c__5548__auto___51196_i__49092_51219_root_51201_seq__49096_51185_temp__5825__auto___51194$$) : 
                ($c__5548__auto__$jscomp$40_c__5548__auto___51229_chunk__49093_get_alphas_fn$$ = $APP.cljs.core.first($G__51213_G__51231_chunk__49090_51217_count__49094_node$$), clara.rules.engine.alpha_retract($c__5548__auto__$jscomp$40_c__5548__auto___51229_chunk__49093_get_alphas_fn$$, $G__51212_fact_group_facts$jscomp$45_temp__5825__auto__$$, $transient_memory$$, $transport$$, $listener$$), $c__5548__auto__$jscomp$40_c__5548__auto___51229_chunk__49093_get_alphas_fn$$ = $APP.cljs.core.next($G__51213_G__51231_chunk__49090_51217_count__49094_node$$), 
                $G__51213_G__51231_chunk__49090_51217_count__49094_node$$ = null, $G__51232_count__49091_51218_i__49095_map__49087__$1_token$$ = 0), $G__51230_alpha_roots_c__5548__auto___51196_i__49092_51219_root_51201_seq__49096_51185_temp__5825__auto___51194$$ = 0;
              } else {
                break;
              }
            }
          }
          $G__51211_insertions$$ = $APP.cljs.core.next($G__51211_insertions$$);
          $c__5548__auto__$jscomp$40_c__5548__auto___51229_chunk__49093_get_alphas_fn$$ = null;
          $G__51213_G__51231_chunk__49090_51217_count__49094_node$$ = 0;
        }
        $G__51232_count__49091_51218_i__49095_map__49087__$1_token$$ = 0;
      } else {
        return null;
      }
    }
  }
};
clara.rules.engine.flush_insertions_BANG_ = function($facts$$, $unconditional$$) {
  var $listener$$ = $APP.cljs.core.__destructure_map(clara.rules.engine._STAR_current_session_STAR_);
  $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($listener$$, cljs$cst$3082$rulebase);
  var $transient_memory$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($listener$$, cljs$cst$3117$transient_memory);
  $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($listener$$, cljs$cst$3118$transport);
  var $insertions$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($listener$$, $APP.cljs$cst$3119$insertions);
  $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($listener$$, cljs$cst$3120$get_alphas_fn);
  $listener$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($listener$$, cljs$cst$3121$listener);
  var $map__49113__$1_token$$ = $APP.cljs.core.__destructure_map(clara.rules.engine._STAR_rule_context_STAR_), $node$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__49113__$1_token$$, $APP.cljs$cst$3067$node);
  $map__49113__$1_token$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__49113__$1_token$$, $APP.cljs$cst$3068$token);
  $APP.cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$3($insertions$$, $APP.cljs.core._PLUS_, $APP.cljs.core.count($facts$$));
  $APP.cljs.core.truth_($unconditional$$) ? clara.rules.listener.insert_facts_BANG_($listener$$, $node$$, $map__49113__$1_token$$, $facts$$) : (clara.rules.memory.add_insertions_BANG_($transient_memory$$, $node$$, $map__49113__$1_token$$, $facts$$), clara.rules.listener.insert_facts_logical_BANG_($listener$$, $node$$, $map__49113__$1_token$$, $facts$$));
  return clara.rules.update_cache.core.add_insertions_BANG_(cljs$cst$3122$pending_updates.cljs$core$IFn$_invoke$arity$1(clara.rules.engine._STAR_current_session_STAR_), $facts$$);
};
clara.rules.engine.retract_facts_BANG_ = function($facts$$) {
  return clara.rules.update_cache.core.add_retractions_BANG_(cljs$cst$3122$pending_updates.cljs$core$IFn$_invoke$arity$1(clara.rules.engine._STAR_current_session_STAR_), $facts$$);
};
clara.rules.engine.ProductionNode = function($id$$, $production$$, $rhs$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.id = $id$$;
  this.production = $production$$;
  this.rhs = $rhs$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
clara.rules.engine.ProductionNode.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
clara.rules.engine.ProductionNode.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k49115$$, $else__5326__auto__$$) {
  switch($k49115$$ instanceof $APP.cljs.core.Keyword ? $k49115$$.fqn : null) {
    case "id":
      return this.id;
    case "production":
      return this.production;
    case "rhs":
      return this.rhs;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k49115$$, $else__5326__auto__$$);
  }
};
clara.rules.engine.ProductionNode.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__49120_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__49120_v__5348__auto__$$, 0, null);
    $p__49120_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__49120_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__49120_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__49120_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
clara.rules.engine.ProductionNode.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#clara.rules.engine.ProductionNode{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id, this.id], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3126$production, this.production], null), new $APP.cljs.core.PersistentVector(null, 
  2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3127$rhs, this.rhs], null)], null), this.__extmap));
};
clara.rules.engine.ProductionNode.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__49114$$) {
  return new $APP.cljs.core.RecordIter(0, this, 3, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id, cljs$cst$3126$production, cljs$cst$3127$rhs], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
clara.rules.engine.ProductionNode.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
clara.rules.engine.ProductionNode.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new clara.rules.engine.ProductionNode(this.id, this.production, this.rhs, this.__meta, this.__extmap, this.__hash);
};
clara.rules.engine.ProductionNode.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 3 + $APP.cljs.core.count(this.__extmap);
};
clara.rules.engine.ProductionNode.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$98_h__5134__auto____$1$jscomp$98_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$98_h__5134__auto____$1$jscomp$98_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$98_h__5134__auto____$1$jscomp$98_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$98_h__5134__auto____$1$jscomp$98_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$98_h__5134__auto____$1$jscomp$98_this__5319__auto__$$ = 1181595195 ^ $APP.cljs.core.hash_unordered_coll(this);
};
clara.rules.engine.ProductionNode.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this49116$$, $other49117$$) {
  return $other49117$$ != null && this.constructor === $other49117$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.id, $other49117$$.id) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.production, $other49117$$.production) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.rhs, $other49117$$.rhs) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other49117$$.__extmap);
};
clara.rules.engine.ProductionNode.prototype.clara$rules$engine$ITerminalNode$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.ProductionNode.prototype.clara$rules$engine$ITerminalNode$terminal_node_type$arity$1 = function($this$$$) {
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3126$production, $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1(this.production)], null);
};
clara.rules.engine.ProductionNode.prototype.clara$rules$engine$ILeftActivate$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.ProductionNode.prototype.clara$rules$engine$ILeftActivate$left_activate$arity$6 = function($activations$jscomp$14_node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) {
  var $node__$1$$ = this;
  clara.rules.listener.left_activate_BANG_($listener$$, $node__$1$$, $tokens$$);
  return $APP.cljs.core.not($APP.cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(this.production, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3128$props, cljs$cst$3129$no_loop], null))) || !$APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.production, $APP.cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(clara.rules.engine._STAR_rule_context_STAR_, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
  [$APP.cljs$cst$3067$node, cljs$cst$3126$production], null))) ? ($activations$jscomp$14_node$$ = $APP.cljs.core.doall.cljs$core$IFn$_invoke$arity$1(function() {
    return function $clara$rules$engine$iter__49124$$($s__49125$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (;;) {
          var $s__49125__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__49125$$);
          if ($s__49125__$2_temp__5825__auto__$$) {
            if ($APP.cljs.core.chunked_seq_QMARK_($s__49125__$2_temp__5825__auto__$$)) {
              var $JSCompiler_inline_result$jscomp$1005_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__49125__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1005_c__5501__auto__$$), $b__49127_token$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
              a: {
                for (var $i__49126$$ = 0;;) {
                  if ($i__49126$$ < $size__5502__auto__$$) {
                    var $token$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1005_c__5501__auto__$$, $i__49126$$);
                    $APP.cljs.core.chunk_append($b__49127_token$$, clara.rules.engine.__GT_Activation($node__$1$$, $token$$));
                    $i__49126$$ += 1;
                  } else {
                    $JSCompiler_inline_result$jscomp$1005_c__5501__auto__$$ = !0;
                    break a;
                  }
                }
                $JSCompiler_inline_result$jscomp$1005_c__5501__auto__$$ = void 0;
              }
              return $JSCompiler_inline_result$jscomp$1005_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49127_token$$), $clara$rules$engine$iter__49124$$($APP.cljs.core.chunk_rest($s__49125__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49127_token$$), null);
            }
            $b__49127_token$$ = $APP.cljs.core.first($s__49125__$2_temp__5825__auto__$$);
            return $APP.cljs.core.cons(clara.rules.engine.__GT_Activation($node__$1$$, $b__49127_token$$), $clara$rules$engine$iter__49124$$($APP.cljs.core.rest($s__49125__$2_temp__5825__auto__$$)));
          }
          return null;
        }
      }, null, null);
    }($tokens$$);
  }()), clara.rules.listener.add_activations_BANG_($listener$$, $node__$1$$, $activations$jscomp$14_node$$), clara.rules.memory.add_activations_BANG_($memory$$, this.production, $activations$jscomp$14_node$$)) : null;
};
clara.rules.engine.ProductionNode.prototype.clara$rules$engine$ILeftActivate$left_retract$arity$6 = function($G__51279_G__51307_activations$jscomp$15_chunk__49136_51263_chunk__49152_51290_node$jscomp$475_removed_activations$$, $G__51278_G__51306_join_bindings$$, $tokens$$, $memory$jscomp$127_temp__5825__auto__$$, $G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$, 
$listener$$) {
  var $node__$1$$ = this;
  clara.rules.listener.left_retract_BANG_($listener$$, $node__$1$$, $tokens$$);
  $G__51279_G__51307_activations$jscomp$15_chunk__49136_51263_chunk__49152_51290_node$jscomp$475_removed_activations$$ = $APP.cljs.core.doall.cljs$core$IFn$_invoke$arity$1(function() {
    return function $clara$rules$engine$iter__49131$$($s__49132$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (;;) {
          var $s__49132__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__49132$$);
          if ($s__49132__$2_temp__5825__auto__$$) {
            if ($APP.cljs.core.chunked_seq_QMARK_($s__49132__$2_temp__5825__auto__$$)) {
              var $JSCompiler_inline_result$jscomp$1006_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__49132__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1006_c__5501__auto__$$), $b__49134_token$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
              a: {
                for (var $i__49133$$ = 0;;) {
                  if ($i__49133$$ < $size__5502__auto__$$) {
                    var $token$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1006_c__5501__auto__$$, $i__49133$$);
                    $APP.cljs.core.chunk_append($b__49134_token$$, clara.rules.engine.__GT_Activation($node__$1$$, $token$$));
                    $i__49133$$ += 1;
                  } else {
                    $JSCompiler_inline_result$jscomp$1006_c__5501__auto__$$ = !0;
                    break a;
                  }
                }
                $JSCompiler_inline_result$jscomp$1006_c__5501__auto__$$ = void 0;
              }
              return $JSCompiler_inline_result$jscomp$1006_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49134_token$$), $clara$rules$engine$iter__49131$$($APP.cljs.core.chunk_rest($s__49132__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49134_token$$), null);
            }
            $b__49134_token$$ = $APP.cljs.core.first($s__49132__$2_temp__5825__auto__$$);
            return $APP.cljs.core.cons(clara.rules.engine.__GT_Activation($node__$1$$, $b__49134_token$$), $clara$rules$engine$iter__49131$$($APP.cljs.core.rest($s__49132__$2_temp__5825__auto__$$)));
          }
          return null;
        }
      }, null, null);
    }($tokens$$);
  }());
  $G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$ = clara.rules.memory.remove_activations_BANG_($memory$jscomp$127_temp__5825__auto__$$, this.production, $G__51279_G__51307_activations$jscomp$15_chunk__49136_51263_chunk__49152_51290_node$jscomp$475_removed_activations$$);
  $G__51279_G__51307_activations$jscomp$15_chunk__49136_51263_chunk__49152_51290_node$jscomp$475_removed_activations$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$, 0, null);
  $G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$, 1, null);
  clara.rules.listener.remove_activations_BANG_($listener$$, $node__$1$$, $G__51279_G__51307_activations$jscomp$15_chunk__49136_51263_chunk__49152_51290_node$jscomp$475_removed_activations$$);
  $G__51279_G__51307_activations$jscomp$15_chunk__49136_51263_chunk__49152_51290_node$jscomp$475_removed_activations$$ = $APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$3068$token, $G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$);
  $G__51279_G__51307_activations$jscomp$15_chunk__49136_51263_chunk__49152_51290_node$jscomp$475_removed_activations$$ = clara.rules.memory.remove_insertions_BANG_($memory$jscomp$127_temp__5825__auto__$$, $node__$1$$, $G__51279_G__51307_activations$jscomp$15_chunk__49136_51263_chunk__49152_51290_node$jscomp$475_removed_activations$$);
  if ($memory$jscomp$127_temp__5825__auto__$$ = $APP.cljs.core.seq($APP.cljs.core.apply.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.concat, $APP.cljs.core.vals($G__51279_G__51307_activations$jscomp$15_chunk__49136_51263_chunk__49152_51290_node$jscomp$475_removed_activations$$)))) {
    if ($APP.cljs.core.truth_(clara.rules.engine._STAR_current_session_STAR_)) {
      if ($APP.cljs.core.not($APP.cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(this.production, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3128$props, cljs$cst$3129$no_loop], null))) || !$APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.production, $APP.cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(clara.rules.engine._STAR_rule_context_STAR_, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
      [$APP.cljs$cst$3067$node, cljs$cst$3126$production], null)))) {
        $G__51278_G__51306_join_bindings$$ = $APP.cljs.core.seq($G__51279_G__51307_activations$jscomp$15_chunk__49136_51263_chunk__49152_51290_node$jscomp$475_removed_activations$$);
        $G__51279_G__51307_activations$jscomp$15_chunk__49136_51263_chunk__49152_51290_node$jscomp$475_removed_activations$$ = null;
        for (var $i__49138_51265_i__49154_51292$$ = $G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$ = 0;;) {
          if ($i__49138_51265_i__49154_51292$$ < $G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$) {
            var $token_insertions_51268_token_insertions_51295_vec__49145_51266_vec__49161_51293$$ = $G__51279_G__51307_activations$jscomp$15_chunk__49136_51263_chunk__49152_51290_node$jscomp$475_removed_activations$$.cljs$core$IIndexed$_nth$arity$2(null, $i__49138_51265_i__49154_51292$$), $token_51267_token_51294$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($token_insertions_51268_token_insertions_51295_vec__49145_51266_vec__49161_51293$$, 0, null);
            $token_insertions_51268_token_insertions_51295_vec__49145_51266_vec__49161_51293$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($token_insertions_51268_token_insertions_51295_vec__49145_51266_vec__49161_51293$$, 1, null);
            clara.rules.listener.retract_facts_logical_BANG_($listener$$, $node__$1$$, $token_51267_token_51294$$, $token_insertions_51268_token_insertions_51295_vec__49145_51266_vec__49161_51293$$);
            $i__49138_51265_i__49154_51292$$ += 1;
          } else {
            if ($G__51278_G__51306_join_bindings$$ = $APP.cljs.core.seq($G__51278_G__51306_join_bindings$$)) {
              $APP.cljs.core.chunked_seq_QMARK_($G__51278_G__51306_join_bindings$$) ? ($G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$ = $APP.cljs.core.chunk_first($G__51278_G__51306_join_bindings$$), $G__51278_G__51306_join_bindings$$ = $APP.cljs.core.chunk_rest($G__51278_G__51306_join_bindings$$), $G__51279_G__51307_activations$jscomp$15_chunk__49136_51263_chunk__49152_51290_node$jscomp$475_removed_activations$$ = 
              $G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$, $G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$ = $APP.cljs.core.count($G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$)) : 
              ($G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$ = $APP.cljs.core.first($G__51278_G__51306_join_bindings$$), $G__51279_G__51307_activations$jscomp$15_chunk__49136_51263_chunk__49152_51290_node$jscomp$475_removed_activations$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$, 
              0, null), $G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$, 1, null), clara.rules.listener.retract_facts_logical_BANG_($listener$$, 
              $node__$1$$, $G__51279_G__51307_activations$jscomp$15_chunk__49136_51263_chunk__49152_51290_node$jscomp$475_removed_activations$$, $G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$), $G__51278_G__51306_join_bindings$$ = $APP.cljs.core.next($G__51278_G__51306_join_bindings$$), $G__51279_G__51307_activations$jscomp$15_chunk__49136_51263_chunk__49152_51290_node$jscomp$475_removed_activations$$ = 
              null, $G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$ = 0), $i__49138_51265_i__49154_51292$$ = 0;
            } else {
              break;
            }
          }
        }
        return clara.rules.engine.retract_facts_BANG_($memory$jscomp$127_temp__5825__auto__$$);
      }
      return null;
    }
    if ($APP.cljs.core.truth_(clara.rules.engine._STAR_pending_external_retractions_STAR_)) {
      $G__51278_G__51306_join_bindings$$ = $APP.cljs.core.seq($G__51279_G__51307_activations$jscomp$15_chunk__49136_51263_chunk__49152_51290_node$jscomp$475_removed_activations$$);
      $G__51279_G__51307_activations$jscomp$15_chunk__49136_51263_chunk__49152_51290_node$jscomp$475_removed_activations$$ = null;
      for ($i__49138_51265_i__49154_51292$$ = $G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$ = 0;;) {
        if ($i__49138_51265_i__49154_51292$$ < $G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$) {
          $token_insertions_51268_token_insertions_51295_vec__49145_51266_vec__49161_51293$$ = $G__51279_G__51307_activations$jscomp$15_chunk__49136_51263_chunk__49152_51290_node$jscomp$475_removed_activations$$.cljs$core$IIndexed$_nth$arity$2(null, $i__49138_51265_i__49154_51292$$), $token_51267_token_51294$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($token_insertions_51268_token_insertions_51295_vec__49145_51266_vec__49161_51293$$, 0, null), $token_insertions_51268_token_insertions_51295_vec__49145_51266_vec__49161_51293$$ = 
          $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($token_insertions_51268_token_insertions_51295_vec__49145_51266_vec__49161_51293$$, 1, null), clara.rules.listener.retract_facts_logical_BANG_($listener$$, $node__$1$$, $token_51267_token_51294$$, $token_insertions_51268_token_insertions_51295_vec__49145_51266_vec__49161_51293$$), $i__49138_51265_i__49154_51292$$ += 1;
        } else {
          if ($G__51278_G__51306_join_bindings$$ = $APP.cljs.core.seq($G__51278_G__51306_join_bindings$$)) {
            $APP.cljs.core.chunked_seq_QMARK_($G__51278_G__51306_join_bindings$$) ? ($G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$ = $APP.cljs.core.chunk_first($G__51278_G__51306_join_bindings$$), $G__51278_G__51306_join_bindings$$ = $APP.cljs.core.chunk_rest($G__51278_G__51306_join_bindings$$), $G__51279_G__51307_activations$jscomp$15_chunk__49136_51263_chunk__49152_51290_node$jscomp$475_removed_activations$$ = 
            $G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$, $G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$ = $APP.cljs.core.count($G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$)) : 
            ($G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$ = $APP.cljs.core.first($G__51278_G__51306_join_bindings$$), $G__51279_G__51307_activations$jscomp$15_chunk__49136_51263_chunk__49152_51290_node$jscomp$475_removed_activations$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$, 
            0, null), $G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$, 1, null), clara.rules.listener.retract_facts_logical_BANG_($listener$$, 
            $node__$1$$, $G__51279_G__51307_activations$jscomp$15_chunk__49136_51263_chunk__49152_51290_node$jscomp$475_removed_activations$$, $G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$), $G__51278_G__51306_join_bindings$$ = $APP.cljs.core.next($G__51278_G__51306_join_bindings$$), $G__51279_G__51307_activations$jscomp$15_chunk__49136_51263_chunk__49152_51290_node$jscomp$475_removed_activations$$ = 
            null, $G__51280_G__51308_c__5548__auto___51277_c__5548__auto___51305_count__49137_51264_count__49153_51291_token_insertions_51284_token_insertions_51312_transport$jscomp$33_unremoved_activations$$ = 0), $i__49138_51265_i__49154_51292$$ = 0;
          } else {
            break;
          }
        }
      }
      return $APP.cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$3(clara.rules.engine._STAR_pending_external_retractions_STAR_, $APP.cljs.core.into, $memory$jscomp$127_temp__5825__auto__$$);
    }
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Attempting to retract from a ProductionNode when neither *current-session* nor *pending-external-retractions* is bound is illegal.", new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$3067$node, $node__$1$$, cljs$cst$3070$join_bindings, $G__51278_G__51306_join_bindings$$, cljs$cst$3130$tokens, $tokens$$], null));
  }
  return null;
};
clara.rules.engine.ProductionNode.prototype.clara$rules$engine$ILeftActivate$get_join_keys$arity$1 = function($node$$) {
  return $APP.cljs.core.PersistentVector.EMPTY;
};
clara.rules.engine.ProductionNode.prototype.clara$rules$engine$ILeftActivate$description$arity$1 = function($node$$) {
  return "ProductionNode";
};
clara.rules.engine.ProductionNode.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 3, [cljs$cst$3126$production, null, $APP.cljs$cst$396$id, null, cljs$cst$3127$rhs, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new clara.rules.engine.ProductionNode(this.id, 
  this.production, this.rhs, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
clara.rules.engine.ProductionNode.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k49115$$) {
  switch($k49115$$ instanceof $APP.cljs.core.Keyword ? $k49115$$.fqn : null) {
    case "id":
    case "production":
    case "rhs":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k49115$$);
  }
};
clara.rules.engine.ProductionNode.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__49168_this__5331__auto__$$, $k__5332__auto__$$, $G__49114$$) {
  $pred__49168_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__49168_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49168_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$396$id, $k__5332__auto__$$) : $pred__49168_this__5331__auto__$$.call(null, $APP.cljs$cst$396$id, $k__5332__auto__$$)) ? new clara.rules.engine.ProductionNode($G__49114$$, this.production, this.rhs, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49168_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49168_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3126$production, 
  $k__5332__auto__$$) : $pred__49168_this__5331__auto__$$.call(null, cljs$cst$3126$production, $k__5332__auto__$$)) ? new clara.rules.engine.ProductionNode(this.id, $G__49114$$, this.rhs, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49168_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49168_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3127$rhs, $k__5332__auto__$$) : $pred__49168_this__5331__auto__$$.call(null, cljs$cst$3127$rhs, $k__5332__auto__$$)) ? 
  new clara.rules.engine.ProductionNode(this.id, this.production, $G__49114$$, this.__meta, this.__extmap, null) : new clara.rules.engine.ProductionNode(this.id, this.production, this.rhs, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__49114$$), null);
};
clara.rules.engine.ProductionNode.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$396$id, this.id, null), new $APP.cljs.core.MapEntry(cljs$cst$3126$production, this.production, null), new $APP.cljs.core.MapEntry(cljs$cst$3127$rhs, this.rhs, null)], null), this.__extmap));
};
clara.rules.engine.ProductionNode.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__49114$$) {
  return new clara.rules.engine.ProductionNode(this.id, this.production, this.rhs, $G__49114$$, this.__extmap, this.__hash);
};
clara.rules.engine.ProductionNode.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
clara.rules.engine.ProductionNode.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1850$id, cljs$cst$3131$production, $APP.cljs$cst$3132$rhs], null);
};
clara.rules.engine.ProductionNode.cljs$lang$type = !0;
clara.rules.engine.ProductionNode.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "clara.rules.engine/ProductionNode", null, 1, null);
};
clara.rules.engine.ProductionNode.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "clara.rules.engine/ProductionNode");
};
clara.rules.engine.__GT_ProductionNode = function($id$$, $production$$, $rhs$$) {
  return new clara.rules.engine.ProductionNode($id$$, $production$$, $rhs$$, null, null, null);
};
clara.rules.engine.map__GT_ProductionNode = function($G__49118$$) {
  var $G__49171$jscomp$inline_5328_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__49118$$, $APP.cljs$cst$396$id, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$3126$production, cljs$cst$3127$rhs], 0));
  $G__49171$jscomp$inline_5328_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__49118$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__49171$jscomp$inline_5328_extmap__5365__auto__$$) : $G__49171$jscomp$inline_5328_extmap__5365__auto__$$;
  return new clara.rules.engine.ProductionNode($APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($G__49118$$), cljs$cst$3126$production.cljs$core$IFn$_invoke$arity$1($G__49118$$), cljs$cst$3127$rhs.cljs$core$IFn$_invoke$arity$1($G__49118$$), null, $APP.cljs.core.not_empty($G__49171$jscomp$inline_5328_extmap__5365__auto__$$), null);
};
clara.rules.engine.QueryNode = function($id$$, $query$$, $param_keys$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.id = $id$$;
  this.query = $query$$;
  this.param_keys = $param_keys$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
clara.rules.engine.QueryNode.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
clara.rules.engine.QueryNode.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k49173$$, $else__5326__auto__$$) {
  switch($k49173$$ instanceof $APP.cljs.core.Keyword ? $k49173$$.fqn : null) {
    case "id":
      return this.id;
    case "query":
      return this.query;
    case "param-keys":
      return this.param_keys;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k49173$$, $else__5326__auto__$$);
  }
};
clara.rules.engine.QueryNode.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__49178_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__49178_v__5348__auto__$$, 0, null);
    $p__49178_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__49178_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__49178_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__49178_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
clara.rules.engine.QueryNode.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#clara.rules.engine.QueryNode{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id, this.id], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2339$query, this.query], null), new $APP.cljs.core.PersistentVector(null, 
  2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3133$param_keys, this.param_keys], null)], null), this.__extmap));
};
clara.rules.engine.QueryNode.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__49172$$) {
  return new $APP.cljs.core.RecordIter(0, this, 3, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id, $APP.cljs$cst$2339$query, cljs$cst$3133$param_keys], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
clara.rules.engine.QueryNode.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
clara.rules.engine.QueryNode.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new clara.rules.engine.QueryNode(this.id, this.query, this.param_keys, this.__meta, this.__extmap, this.__hash);
};
clara.rules.engine.QueryNode.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 3 + $APP.cljs.core.count(this.__extmap);
};
clara.rules.engine.QueryNode.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$99_h__5134__auto____$1$jscomp$99_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$99_h__5134__auto____$1$jscomp$99_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$99_h__5134__auto____$1$jscomp$99_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$99_h__5134__auto____$1$jscomp$99_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$99_h__5134__auto____$1$jscomp$99_this__5319__auto__$$ = 1866219374 ^ $APP.cljs.core.hash_unordered_coll(this);
};
clara.rules.engine.QueryNode.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this49174$$, $other49175$$) {
  return $other49175$$ != null && this.constructor === $other49175$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.id, $other49175$$.id) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.query, $other49175$$.query) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.param_keys, $other49175$$.param_keys) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other49175$$.__extmap);
};
clara.rules.engine.QueryNode.prototype.clara$rules$engine$ITerminalNode$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.QueryNode.prototype.clara$rules$engine$ITerminalNode$terminal_node_type$arity$1 = function($this$$$) {
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2339$query, $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1(this.query)], null);
};
clara.rules.engine.QueryNode.prototype.clara$rules$engine$ILeftActivate$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.QueryNode.prototype.clara$rules$engine$ILeftActivate$left_activate$arity$6 = function($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) {
  clara.rules.listener.left_activate_BANG_($listener$$, this, $tokens$$);
  return clara.rules.memory.add_tokens_BANG_($memory$$, this, $join_bindings$$, $tokens$$);
};
clara.rules.engine.QueryNode.prototype.clara$rules$engine$ILeftActivate$left_retract$arity$6 = function($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) {
  clara.rules.listener.left_retract_BANG_($listener$$, this, $tokens$$);
  return clara.rules.memory.remove_tokens_BANG_($memory$$, this, $join_bindings$$, $tokens$$);
};
clara.rules.engine.QueryNode.prototype.clara$rules$engine$ILeftActivate$get_join_keys$arity$1 = function($node$$) {
  return this.param_keys;
};
clara.rules.engine.QueryNode.prototype.clara$rules$engine$ILeftActivate$description$arity$1 = function($node$$) {
  return ["QueryNode -- ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(this.query)].join("");
};
clara.rules.engine.QueryNode.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 3, [cljs$cst$3133$param_keys, null, $APP.cljs$cst$396$id, null, $APP.cljs$cst$2339$query, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new clara.rules.engine.QueryNode(this.id, 
  this.query, this.param_keys, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
clara.rules.engine.QueryNode.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k49173$$) {
  switch($k49173$$ instanceof $APP.cljs.core.Keyword ? $k49173$$.fqn : null) {
    case "id":
    case "query":
    case "param-keys":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k49173$$);
  }
};
clara.rules.engine.QueryNode.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__49183_this__5331__auto__$$, $k__5332__auto__$$, $G__49172$$) {
  $pred__49183_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__49183_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49183_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$396$id, $k__5332__auto__$$) : $pred__49183_this__5331__auto__$$.call(null, $APP.cljs$cst$396$id, $k__5332__auto__$$)) ? new clara.rules.engine.QueryNode($G__49172$$, this.query, this.param_keys, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49183_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49183_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2339$query, 
  $k__5332__auto__$$) : $pred__49183_this__5331__auto__$$.call(null, $APP.cljs$cst$2339$query, $k__5332__auto__$$)) ? new clara.rules.engine.QueryNode(this.id, $G__49172$$, this.param_keys, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49183_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49183_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3133$param_keys, $k__5332__auto__$$) : $pred__49183_this__5331__auto__$$.call(null, cljs$cst$3133$param_keys, $k__5332__auto__$$)) ? 
  new clara.rules.engine.QueryNode(this.id, this.query, $G__49172$$, this.__meta, this.__extmap, null) : new clara.rules.engine.QueryNode(this.id, this.query, this.param_keys, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__49172$$), null);
};
clara.rules.engine.QueryNode.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$396$id, this.id, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$2339$query, this.query, null), new $APP.cljs.core.MapEntry(cljs$cst$3133$param_keys, this.param_keys, null)], null), this.__extmap));
};
clara.rules.engine.QueryNode.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__49172$$) {
  return new clara.rules.engine.QueryNode(this.id, this.query, this.param_keys, $G__49172$$, this.__extmap, this.__hash);
};
clara.rules.engine.QueryNode.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
clara.rules.engine.QueryNode.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1850$id, $APP.cljs$cst$2411$query, cljs$cst$3134$param_keys], null);
};
clara.rules.engine.QueryNode.cljs$lang$type = !0;
clara.rules.engine.QueryNode.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "clara.rules.engine/QueryNode", null, 1, null);
};
clara.rules.engine.QueryNode.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "clara.rules.engine/QueryNode");
};
clara.rules.engine.__GT_QueryNode = function($id$$, $query$$, $param_keys$$) {
  return new clara.rules.engine.QueryNode($id$$, $query$$, $param_keys$$, null, null, null);
};
clara.rules.engine.map__GT_QueryNode = function($G__49176$$) {
  var $G__49186$jscomp$inline_5330_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__49176$$, $APP.cljs$cst$396$id, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$2339$query, cljs$cst$3133$param_keys], 0));
  $G__49186$jscomp$inline_5330_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__49176$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__49186$jscomp$inline_5330_extmap__5365__auto__$$) : $G__49186$jscomp$inline_5330_extmap__5365__auto__$$;
  return new clara.rules.engine.QueryNode($APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($G__49176$$), $APP.cljs$cst$2339$query.cljs$core$IFn$_invoke$arity$1($G__49176$$), cljs$cst$3133$param_keys.cljs$core$IFn$_invoke$arity$1($G__49176$$), null, $APP.cljs.core.not_empty($G__49186$jscomp$inline_5330_extmap__5365__auto__$$), null);
};
clara.rules.engine.node_rule_names = function($child_type$$, $node$$) {
  return $APP.cljs.core.sort.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.distinct.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$272$name, $APP.cljs.core.keep.cljs$core$IFn$_invoke$arity$2($child_type$$, $APP.cljs.core.tree_seq($APP.cljs.core.comp.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.seq, $APP.cljs$cst$3116$children), $APP.cljs$cst$3116$children, $node$$)))));
};
clara.rules.engine.list_of_names = function($names_string_singular$$, $plural$$, $prefix$$, $names$$) {
  var $msg_for_unnamed$$ = ["  An unnamed ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($names_string_singular$$), ", provide names to your ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($plural$$), " if you want them to be identified here."].join("");
  $names_string_singular$$ = $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$2("\n", $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(function($p1__49188_SHARP_$$) {
    return [$APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($prefix$$), "  ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($p1__49188_SHARP_$$)].join("");
  }, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(function($p1__49187_SHARP_$$) {
    return $p1__49187_SHARP_$$ == null ? $msg_for_unnamed$$ : $p1__49187_SHARP_$$;
  }, $APP.cljs.core.sort.cljs$core$IFn$_invoke$arity$1($names$$))));
  return $APP.cljs.core.count($names$$) > 0 ? [$APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($prefix$$), $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($plural$$), ":\n", $names_string_singular$$, "\n"].join("") : null;
};
clara.rules.engine.single_condition_message = function($condition_number$$, $p__49189_production_section_productions$$) {
  var $condition_definition$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__49189_production_section_productions$$, 0, null), $queries_query_section_terminals$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__49189_production_section_productions$$, 1, null);
  $p__49189_production_section_productions$$ = $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.second, $APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.comp.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 1, [cljs$cst$3126$production, null], null), null), $APP.cljs.core.first), $queries_query_section_terminals$$));
  $queries_query_section_terminals$$ = $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.second, $APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.comp.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$2339$query, null], null), null), $APP.cljs.core.first), $queries_query_section_terminals$$));
  $p__49189_production_section_productions$$ = clara.rules.engine.list_of_names("rule", "rules", "   ", $p__49189_production_section_productions$$);
  $queries_query_section_terminals$$ = clara.rules.engine.list_of_names("query", "queries", "   ", $queries_query_section_terminals$$);
  return $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$1(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [[$APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($condition_number$$ + 1), ". ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($condition_definition$$), "\n"].join(""), $p__49189_production_section_productions$$, $queries_query_section_terminals$$], null));
};
clara.rules.engine.throw_condition_exception = function($cause$$) {
  var $condition_messages_facts_description_map__49194__$1$$ = $APP.cljs.core.__destructure_map($cause$$);
  $cause$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($condition_messages_facts_description_map__49194__$1$$, $APP.cljs$cst$145$cause);
  var $conditions_and_rules_node$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($condition_messages_facts_description_map__49194__$1$$, $APP.cljs$cst$3067$node), $fact$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($condition_messages_facts_description_map__49194__$1$$, cljs$cst$3109$fact), $env$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($condition_messages_facts_description_map__49194__$1$$, $APP.cljs$cst$395$env), $bindings$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($condition_messages_facts_description_map__49194__$1$$, 
  $APP.cljs$cst$394$bindings), $bindings_description_message$$ = $APP.cljs.core.empty_QMARK_($bindings$$) ? "with no bindings" : ["with bindings\n  ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($bindings$$)].join("");
  $condition_messages_facts_description_map__49194__$1$$ = $APP.cljs.core.contains_QMARK_($condition_messages_facts_description_map__49194__$1$$, cljs$cst$3109$fact) ? ["when processing fact\n ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$fact$$], 0))].join("") : "with no fact";
  $bindings_description_message$$ = $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$1(new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, ["Condition exception raised.\n", [$condition_messages_facts_description_map__49194__$1$$, "\n"].join(""), [$bindings_description_message$$, "\n"].join(""), "Conditions:\n"], null));
  $conditions_and_rules_node$$ = clara.rules.engine.get_conditions_and_rule_names($conditions_and_rules_node$$);
  $condition_messages_facts_description_map__49194__$1$$ = $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$2("\n", $APP.cljs.core.map_indexed.cljs$core$IFn$_invoke$arity$2(clara.rules.engine.single_condition_message, $conditions_and_rules_node$$));
  $bindings_description_message$$ = [$bindings_description_message$$, "\n", $condition_messages_facts_description_map__49194__$1$$].join("");
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$3($bindings_description_message$$, new $APP.cljs.core.PersistentArrayMap(null, 4, [cljs$cst$3109$fact, $fact$$, $APP.cljs$cst$394$bindings, $bindings$$, $APP.cljs$cst$395$env, $env$$, cljs$cst$3135$conditions_and_rules, $conditions_and_rules_node$$], null), $cause$$);
};
clara.rules.engine.alpha_node_matches = function($facts$$, $env$$, $activation$$, $node$$) {
  return $APP.cljs.core.doall.cljs$core$IFn$_invoke$arity$1(function() {
    return function $clara$rules$engine$alpha_node_matches_$_iter__49195$$($s__49196$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (var $s__49196__$1_s__49196__$2_temp__5825__auto__$$ = $s__49196$$;;) {
          if ($s__49196__$1_s__49196__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__49196__$1_s__49196__$2_temp__5825__auto__$$)) {
            if ($APP.cljs.core.chunked_seq_QMARK_($s__49196__$1_s__49196__$2_temp__5825__auto__$$)) {
              var $c__5501__auto__$jscomp$94_fact$$ = $APP.cljs.core.chunk_first($s__49196__$1_s__49196__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($c__5501__auto__$jscomp$94_fact$$), $b__49198_bindings$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
              a: {
                for (var $i__49197$$ = 0;;) {
                  if ($i__49197$$ < $size__5502__auto__$$) {
                    var $fact$$ = $APP.cljs.core._nth($c__5501__auto__$jscomp$94_fact$$, $i__49197$$);
                    try {
                      var $JSCompiler_inline_result$jscomp$10210_bindings$$ = $activation$$.cljs$core$IFn$_invoke$arity$2 ? $activation$$.cljs$core$IFn$_invoke$arity$2($fact$$, $env$$) : $activation$$.call(null, $fact$$, $env$$);
                    } catch ($e49199$$) {
                      $JSCompiler_inline_result$jscomp$10210_bindings$$ = clara.rules.engine.throw_condition_exception(new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$145$cause, $e49199$$, $APP.cljs$cst$3067$node, $node$$, cljs$cst$3109$fact, $fact$$, $APP.cljs$cst$395$env, $env$$], null));
                    }
                    $APP.cljs.core.truth_($JSCompiler_inline_result$jscomp$10210_bindings$$) && $APP.cljs.core.chunk_append($b__49198_bindings$$, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$fact$$, $JSCompiler_inline_result$jscomp$10210_bindings$$], null));
                    $i__49197$$ += 1;
                  } else {
                    $JSCompiler_inline_result$jscomp$10210_bindings$$ = !0;
                    break a;
                  }
                }
                $JSCompiler_inline_result$jscomp$10210_bindings$$ = void 0;
              }
              return $JSCompiler_inline_result$jscomp$10210_bindings$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49198_bindings$$), $clara$rules$engine$alpha_node_matches_$_iter__49195$$($APP.cljs.core.chunk_rest($s__49196__$1_s__49196__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49198_bindings$$), null);
            }
            $c__5501__auto__$jscomp$94_fact$$ = $APP.cljs.core.first($s__49196__$1_s__49196__$2_temp__5825__auto__$$);
            try {
              $b__49198_bindings$$ = $activation$$.cljs$core$IFn$_invoke$arity$2 ? $activation$$.cljs$core$IFn$_invoke$arity$2($c__5501__auto__$jscomp$94_fact$$, $env$$) : $activation$$.call(null, $c__5501__auto__$jscomp$94_fact$$, $env$$);
            } catch ($e49200$$) {
              $b__49198_bindings$$ = clara.rules.engine.throw_condition_exception(new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$145$cause, $e49200$$, $APP.cljs$cst$3067$node, $node$$, cljs$cst$3109$fact, $c__5501__auto__$jscomp$94_fact$$, $APP.cljs$cst$395$env, $env$$], null));
            }
            if ($APP.cljs.core.truth_($b__49198_bindings$$)) {
              return $APP.cljs.core.cons(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$c__5501__auto__$jscomp$94_fact$$, $b__49198_bindings$$], null), $clara$rules$engine$alpha_node_matches_$_iter__49195$$($APP.cljs.core.rest($s__49196__$1_s__49196__$2_temp__5825__auto__$$)));
            }
            $s__49196__$1_s__49196__$2_temp__5825__auto__$$ = $APP.cljs.core.rest($s__49196__$1_s__49196__$2_temp__5825__auto__$$);
          } else {
            return null;
          }
        }
      }, null, null);
    }($facts$$);
  }());
};
clara.rules.engine.AlphaNode = function($id$$, $env$$, $children$$, $activation$$, $fact_type$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.id = $id$$;
  this.env = $env$$;
  this.children = $children$$;
  this.activation = $activation$$;
  this.fact_type = $fact_type$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
clara.rules.engine.AlphaNode.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
clara.rules.engine.AlphaNode.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k49202$$, $else__5326__auto__$$) {
  switch($k49202$$ instanceof $APP.cljs.core.Keyword ? $k49202$$.fqn : null) {
    case "id":
      return this.id;
    case "env":
      return this.env;
    case "children":
      return this.children;
    case "activation":
      return this.activation;
    case "fact-type":
      return this.fact_type;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k49202$$, $else__5326__auto__$$);
  }
};
clara.rules.engine.AlphaNode.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__49213_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__49213_v__5348__auto__$$, 0, null);
    $p__49213_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__49213_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__49213_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__49213_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
clara.rules.engine.AlphaNode.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#clara.rules.engine.AlphaNode{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id, this.id], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$395$env, this.env], null), new $APP.cljs.core.PersistentVector(null, 
  2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$3116$children, this.children], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3136$activation, this.activation], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3137$fact_type, this.fact_type], null)], null), this.__extmap));
};
clara.rules.engine.AlphaNode.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__49201$$) {
  return new $APP.cljs.core.RecordIter(0, this, 5, new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id, $APP.cljs$cst$395$env, $APP.cljs$cst$3116$children, cljs$cst$3136$activation, cljs$cst$3137$fact_type], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
clara.rules.engine.AlphaNode.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
clara.rules.engine.AlphaNode.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new clara.rules.engine.AlphaNode(this.id, this.env, this.children, this.activation, this.fact_type, this.__meta, this.__extmap, this.__hash);
};
clara.rules.engine.AlphaNode.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 5 + $APP.cljs.core.count(this.__extmap);
};
clara.rules.engine.AlphaNode.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$100_h__5134__auto____$1$jscomp$100_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$100_h__5134__auto____$1$jscomp$100_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$100_h__5134__auto____$1$jscomp$100_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$100_h__5134__auto____$1$jscomp$100_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$100_h__5134__auto____$1$jscomp$100_this__5319__auto__$$ = -117816789 ^ $APP.cljs.core.hash_unordered_coll(this);
};
clara.rules.engine.AlphaNode.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this49203$$, $other49204$$) {
  return $other49204$$ != null && this.constructor === $other49204$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.id, $other49204$$.id) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.env, $other49204$$.env) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.children, $other49204$$.children) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.activation, $other49204$$.activation) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.fact_type, $other49204$$.fact_type) && 
  $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other49204$$.__extmap);
};
clara.rules.engine.AlphaNode.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 5, [$APP.cljs$cst$3116$children, null, cljs$cst$3137$fact_type, null, $APP.cljs$cst$395$env, null, cljs$cst$3136$activation, null, $APP.cljs$cst$396$id, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), 
  $k__5334__auto__$$) : new clara.rules.engine.AlphaNode(this.id, this.env, this.children, this.activation, this.fact_type, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
clara.rules.engine.AlphaNode.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k49202$$) {
  switch($k49202$$ instanceof $APP.cljs.core.Keyword ? $k49202$$.fqn : null) {
    case "id":
    case "env":
    case "children":
    case "activation":
    case "fact-type":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k49202$$);
  }
};
clara.rules.engine.AlphaNode.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__49231_this__5331__auto__$$, $k__5332__auto__$$, $G__49201$$) {
  $pred__49231_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__49231_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49231_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$396$id, $k__5332__auto__$$) : $pred__49231_this__5331__auto__$$.call(null, $APP.cljs$cst$396$id, $k__5332__auto__$$)) ? new clara.rules.engine.AlphaNode($G__49201$$, this.env, this.children, this.activation, this.fact_type, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49231_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? 
  $pred__49231_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$395$env, $k__5332__auto__$$) : $pred__49231_this__5331__auto__$$.call(null, $APP.cljs$cst$395$env, $k__5332__auto__$$)) ? new clara.rules.engine.AlphaNode(this.id, $G__49201$$, this.children, this.activation, this.fact_type, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49231_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49231_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$3116$children, 
  $k__5332__auto__$$) : $pred__49231_this__5331__auto__$$.call(null, $APP.cljs$cst$3116$children, $k__5332__auto__$$)) ? new clara.rules.engine.AlphaNode(this.id, this.env, $G__49201$$, this.activation, this.fact_type, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49231_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49231_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3136$activation, $k__5332__auto__$$) : $pred__49231_this__5331__auto__$$.call(null, cljs$cst$3136$activation, 
  $k__5332__auto__$$)) ? new clara.rules.engine.AlphaNode(this.id, this.env, this.children, $G__49201$$, this.fact_type, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49231_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49231_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3137$fact_type, $k__5332__auto__$$) : $pred__49231_this__5331__auto__$$.call(null, cljs$cst$3137$fact_type, $k__5332__auto__$$)) ? new clara.rules.engine.AlphaNode(this.id, this.env, 
  this.children, this.activation, $G__49201$$, this.__meta, this.__extmap, null) : new clara.rules.engine.AlphaNode(this.id, this.env, this.children, this.activation, this.fact_type, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__49201$$), null);
};
clara.rules.engine.AlphaNode.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$396$id, this.id, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$395$env, this.env, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$3116$children, this.children, null), new $APP.cljs.core.MapEntry(cljs$cst$3136$activation, this.activation, null), new $APP.cljs.core.MapEntry(cljs$cst$3137$fact_type, 
  this.fact_type, null)], null), this.__extmap));
};
clara.rules.engine.AlphaNode.prototype.clara$rules$engine$IAlphaActivate$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.AlphaNode.prototype.clara$rules$engine$IAlphaActivate$alpha_activate$arity$5 = function($node$$, $facts$$, $memory$$, $transport$$, $listener$$) {
  var $fact_binding_pairs$$ = clara.rules.engine.alpha_node_matches($facts$$, this.env, this.activation, this);
  clara.rules.listener.alpha_activate_BANG_($listener$$, this, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.first, $fact_binding_pairs$$));
  return clara.rules.engine.send_elements($transport$$, $memory$$, $listener$$, this.children, $APP.cljs.core.doall.cljs$core$IFn$_invoke$arity$1(function() {
    return function $clara$rules$engine$iter__49236$$($s__49237$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (;;) {
          var $s__49237__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__49237$$);
          if ($s__49237__$2_temp__5825__auto__$$) {
            if ($APP.cljs.core.chunked_seq_QMARK_($s__49237__$2_temp__5825__auto__$$)) {
              var $JSCompiler_inline_result$jscomp$1007_bindings$jscomp$212_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__49237__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1007_bindings$jscomp$212_c__5501__auto__$$), $b__49239_fact$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
              a: {
                for (var $i__49238$$ = 0;;) {
                  if ($i__49238$$ < $size__5502__auto__$$) {
                    var $bindings$jscomp$inline_5338_vec__49248$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1007_bindings$jscomp$212_c__5501__auto__$$, $i__49238$$), $fact$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($bindings$jscomp$inline_5338_vec__49248$$, 0, null);
                    $bindings$jscomp$inline_5338_vec__49248$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($bindings$jscomp$inline_5338_vec__49248$$, 1, null);
                    $APP.cljs.core.chunk_append($b__49239_fact$$, clara.rules.engine.__GT_Element($fact$$, $bindings$jscomp$inline_5338_vec__49248$$));
                    $i__49238$$ += 1;
                  } else {
                    $JSCompiler_inline_result$jscomp$1007_bindings$jscomp$212_c__5501__auto__$$ = !0;
                    break a;
                  }
                }
                $JSCompiler_inline_result$jscomp$1007_bindings$jscomp$212_c__5501__auto__$$ = void 0;
              }
              return $JSCompiler_inline_result$jscomp$1007_bindings$jscomp$212_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49239_fact$$), $clara$rules$engine$iter__49236$$($APP.cljs.core.chunk_rest($s__49237__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49239_fact$$), null);
            }
            $JSCompiler_inline_result$jscomp$1007_bindings$jscomp$212_c__5501__auto__$$ = $APP.cljs.core.first($s__49237__$2_temp__5825__auto__$$);
            $b__49239_fact$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_inline_result$jscomp$1007_bindings$jscomp$212_c__5501__auto__$$, 0, null);
            $JSCompiler_inline_result$jscomp$1007_bindings$jscomp$212_c__5501__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_inline_result$jscomp$1007_bindings$jscomp$212_c__5501__auto__$$, 1, null);
            return $APP.cljs.core.cons(clara.rules.engine.__GT_Element($b__49239_fact$$, $JSCompiler_inline_result$jscomp$1007_bindings$jscomp$212_c__5501__auto__$$), $clara$rules$engine$iter__49236$$($APP.cljs.core.rest($s__49237__$2_temp__5825__auto__$$)));
          }
          return null;
        }
      }, null, null);
    }($fact_binding_pairs$$);
  }()));
};
clara.rules.engine.AlphaNode.prototype.clara$rules$engine$IAlphaActivate$alpha_retract$arity$5 = function($node$$, $facts$$, $memory$$, $transport$$, $listener$$) {
  var $fact_binding_pairs$$ = clara.rules.engine.alpha_node_matches($facts$$, this.env, this.activation, this);
  clara.rules.listener.alpha_retract_BANG_($listener$$, this, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.first, $fact_binding_pairs$$));
  return clara.rules.engine.retract_elements($transport$$, $memory$$, $listener$$, this.children, $APP.cljs.core.doall.cljs$core$IFn$_invoke$arity$1(function() {
    return function $clara$rules$engine$iter__49256$$($s__49257$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (;;) {
          var $s__49257__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__49257$$);
          if ($s__49257__$2_temp__5825__auto__$$) {
            if ($APP.cljs.core.chunked_seq_QMARK_($s__49257__$2_temp__5825__auto__$$)) {
              var $JSCompiler_inline_result$jscomp$1008_bindings$jscomp$214_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__49257__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1008_bindings$jscomp$214_c__5501__auto__$$), $b__49259_fact$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
              a: {
                for (var $i__49258$$ = 0;;) {
                  if ($i__49258$$ < $size__5502__auto__$$) {
                    var $bindings$jscomp$inline_5344_vec__49260$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1008_bindings$jscomp$214_c__5501__auto__$$, $i__49258$$), $fact$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($bindings$jscomp$inline_5344_vec__49260$$, 0, null);
                    $bindings$jscomp$inline_5344_vec__49260$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($bindings$jscomp$inline_5344_vec__49260$$, 1, null);
                    $APP.cljs.core.chunk_append($b__49259_fact$$, clara.rules.engine.__GT_Element($fact$$, $bindings$jscomp$inline_5344_vec__49260$$));
                    $i__49258$$ += 1;
                  } else {
                    $JSCompiler_inline_result$jscomp$1008_bindings$jscomp$214_c__5501__auto__$$ = !0;
                    break a;
                  }
                }
                $JSCompiler_inline_result$jscomp$1008_bindings$jscomp$214_c__5501__auto__$$ = void 0;
              }
              return $JSCompiler_inline_result$jscomp$1008_bindings$jscomp$214_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49259_fact$$), $clara$rules$engine$iter__49256$$($APP.cljs.core.chunk_rest($s__49257__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49259_fact$$), null);
            }
            $JSCompiler_inline_result$jscomp$1008_bindings$jscomp$214_c__5501__auto__$$ = $APP.cljs.core.first($s__49257__$2_temp__5825__auto__$$);
            $b__49259_fact$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_inline_result$jscomp$1008_bindings$jscomp$214_c__5501__auto__$$, 0, null);
            $JSCompiler_inline_result$jscomp$1008_bindings$jscomp$214_c__5501__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_inline_result$jscomp$1008_bindings$jscomp$214_c__5501__auto__$$, 1, null);
            return $APP.cljs.core.cons(clara.rules.engine.__GT_Element($b__49259_fact$$, $JSCompiler_inline_result$jscomp$1008_bindings$jscomp$214_c__5501__auto__$$), $clara$rules$engine$iter__49256$$($APP.cljs.core.rest($s__49257__$2_temp__5825__auto__$$)));
          }
          return null;
        }
      }, null, null);
    }($fact_binding_pairs$$);
  }()));
};
clara.rules.engine.AlphaNode.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__49201$$) {
  return new clara.rules.engine.AlphaNode(this.id, this.env, this.children, this.activation, this.fact_type, $G__49201$$, this.__extmap, this.__hash);
};
clara.rules.engine.AlphaNode.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
clara.rules.engine.AlphaNode.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1850$id, cljs$cst$3138$env, $APP.cljs$cst$3091$children, cljs$cst$3139$activation, cljs$cst$3140$fact_type], null);
};
clara.rules.engine.AlphaNode.cljs$lang$type = !0;
clara.rules.engine.AlphaNode.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "clara.rules.engine/AlphaNode", null, 1, null);
};
clara.rules.engine.AlphaNode.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "clara.rules.engine/AlphaNode");
};
clara.rules.engine.__GT_AlphaNode = function($id$$, $env$$, $children$$, $activation$$, $fact_type$$) {
  return new clara.rules.engine.AlphaNode($id$$, $env$$, $children$$, $activation$$, $fact_type$$, null, null, null);
};
clara.rules.engine.map__GT_AlphaNode = function($G__49205$$) {
  var $G__49275$jscomp$inline_5347_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__49205$$, $APP.cljs$cst$396$id, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$395$env, $APP.cljs$cst$3116$children, cljs$cst$3136$activation, cljs$cst$3137$fact_type], 0));
  $G__49275$jscomp$inline_5347_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__49205$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__49275$jscomp$inline_5347_extmap__5365__auto__$$) : $G__49275$jscomp$inline_5347_extmap__5365__auto__$$;
  return new clara.rules.engine.AlphaNode($APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($G__49205$$), $APP.cljs$cst$395$env.cljs$core$IFn$_invoke$arity$1($G__49205$$), $APP.cljs$cst$3116$children.cljs$core$IFn$_invoke$arity$1($G__49205$$), cljs$cst$3136$activation.cljs$core$IFn$_invoke$arity$1($G__49205$$), cljs$cst$3137$fact_type.cljs$core$IFn$_invoke$arity$1($G__49205$$), null, $APP.cljs.core.not_empty($G__49275$jscomp$inline_5347_extmap__5365__auto__$$), null);
};
clara.rules.engine.RootJoinNode = function($id$$, $condition$$, $children$$, $binding_keys$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.id = $id$$;
  this.condition = $condition$$;
  this.children = $children$$;
  this.binding_keys = $binding_keys$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
clara.rules.engine.RootJoinNode.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
clara.rules.engine.RootJoinNode.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k49281$$, $else__5326__auto__$$) {
  switch($k49281$$ instanceof $APP.cljs.core.Keyword ? $k49281$$.fqn : null) {
    case "id":
      return this.id;
    case "condition":
      return this.condition;
    case "children":
      return this.children;
    case "binding-keys":
      return this.binding_keys;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k49281$$, $else__5326__auto__$$);
  }
};
clara.rules.engine.RootJoinNode.prototype.clara$rules$engine$IRightActivate$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.RootJoinNode.prototype.clara$rules$engine$IRightActivate$right_activate$arity$6 = function($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$) {
  var $node__$1$$ = this;
  clara.rules.listener.right_activate_BANG_($listener$$, $node__$1$$, $elements$$);
  clara.rules.memory.add_elements_BANG_($memory$$, $node__$1$$, $join_bindings$$, $elements$$);
  return clara.rules.engine.send_tokens($transport$$, $memory$$, $listener$$, this.children, $APP.cljs.core.doall.cljs$core$IFn$_invoke$arity$1(function() {
    return function $clara$rules$engine$iter__49287$$($s__49288$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (;;) {
          var $s__49288__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__49288$$);
          if ($s__49288__$2_temp__5825__auto__$$) {
            if ($APP.cljs.core.chunked_seq_QMARK_($s__49288__$2_temp__5825__auto__$$)) {
              var $JSCompiler_inline_result$jscomp$1009_bindings$jscomp$216_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__49288__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1009_bindings$jscomp$216_c__5501__auto__$$), $b__49290_fact$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
              a: {
                for (var $i__49289$$ = 0;;) {
                  if ($i__49289$$ < $size__5502__auto__$$) {
                    var $fact$jscomp$inline_5353_map__49295$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1009_bindings$jscomp$216_c__5501__auto__$$, $i__49289$$), $bindings$jscomp$inline_5354_map__49295__$1$$ = $APP.cljs.core.__destructure_map($fact$jscomp$inline_5353_map__49295$$);
                    $fact$jscomp$inline_5353_map__49295$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($bindings$jscomp$inline_5354_map__49295__$1$$, cljs$cst$3109$fact);
                    $bindings$jscomp$inline_5354_map__49295__$1$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($bindings$jscomp$inline_5354_map__49295__$1$$, $APP.cljs$cst$394$bindings);
                    $APP.cljs.core.chunk_append($b__49290_fact$$, clara.rules.engine.__GT_Token(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$fact$jscomp$inline_5353_map__49295$$, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node__$1$$)], null)], null), $bindings$jscomp$inline_5354_map__49295__$1$$));
                    $i__49289$$ += 1;
                  } else {
                    $JSCompiler_inline_result$jscomp$1009_bindings$jscomp$216_c__5501__auto__$$ = !0;
                    break a;
                  }
                }
                $JSCompiler_inline_result$jscomp$1009_bindings$jscomp$216_c__5501__auto__$$ = void 0;
              }
              return $JSCompiler_inline_result$jscomp$1009_bindings$jscomp$216_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49290_fact$$), $clara$rules$engine$iter__49287$$($APP.cljs.core.chunk_rest($s__49288__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49290_fact$$), null);
            }
            $b__49290_fact$$ = $APP.cljs.core.first($s__49288__$2_temp__5825__auto__$$);
            $JSCompiler_inline_result$jscomp$1009_bindings$jscomp$216_c__5501__auto__$$ = $APP.cljs.core.__destructure_map($b__49290_fact$$);
            $b__49290_fact$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($JSCompiler_inline_result$jscomp$1009_bindings$jscomp$216_c__5501__auto__$$, cljs$cst$3109$fact);
            $JSCompiler_inline_result$jscomp$1009_bindings$jscomp$216_c__5501__auto__$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($JSCompiler_inline_result$jscomp$1009_bindings$jscomp$216_c__5501__auto__$$, $APP.cljs$cst$394$bindings);
            return $APP.cljs.core.cons(clara.rules.engine.__GT_Token(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$b__49290_fact$$, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node__$1$$)], null)], null), $JSCompiler_inline_result$jscomp$1009_bindings$jscomp$216_c__5501__auto__$$), $clara$rules$engine$iter__49287$$($APP.cljs.core.rest($s__49288__$2_temp__5825__auto__$$)));
          }
          return null;
        }
      }, null, null);
    }($elements$$);
  }()));
};
clara.rules.engine.RootJoinNode.prototype.clara$rules$engine$IRightActivate$right_retract$arity$6 = function($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$) {
  var $node__$1$$ = this;
  clara.rules.listener.right_retract_BANG_($listener$$, $node__$1$$, $elements$$);
  return clara.rules.engine.retract_tokens($transport$$, $memory$$, $listener$$, this.children, $APP.cljs.core.doall.cljs$core$IFn$_invoke$arity$1(function() {
    return function $clara$rules$engine$iter__49297$$($s__49298$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (;;) {
          var $s__49298__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__49298$$);
          if ($s__49298__$2_temp__5825__auto__$$) {
            if ($APP.cljs.core.chunked_seq_QMARK_($s__49298__$2_temp__5825__auto__$$)) {
              var $JSCompiler_inline_result$jscomp$1010_bindings$jscomp$218_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__49298__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1010_bindings$jscomp$218_c__5501__auto__$$), $b__49300_fact$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
              a: {
                for (var $i__49299$$ = 0;;) {
                  if ($i__49299$$ < $size__5502__auto__$$) {
                    var $fact$jscomp$inline_5361_map__49301$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1010_bindings$jscomp$218_c__5501__auto__$$, $i__49299$$), $bindings$jscomp$inline_5362_map__49301__$1$$ = $APP.cljs.core.__destructure_map($fact$jscomp$inline_5361_map__49301$$);
                    $fact$jscomp$inline_5361_map__49301$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($bindings$jscomp$inline_5362_map__49301__$1$$, cljs$cst$3109$fact);
                    $bindings$jscomp$inline_5362_map__49301__$1$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($bindings$jscomp$inline_5362_map__49301__$1$$, $APP.cljs$cst$394$bindings);
                    $APP.cljs.core.chunk_append($b__49300_fact$$, clara.rules.engine.__GT_Token(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$fact$jscomp$inline_5361_map__49301$$, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node__$1$$)], null)], null), $bindings$jscomp$inline_5362_map__49301__$1$$));
                    $i__49299$$ += 1;
                  } else {
                    $JSCompiler_inline_result$jscomp$1010_bindings$jscomp$218_c__5501__auto__$$ = !0;
                    break a;
                  }
                }
                $JSCompiler_inline_result$jscomp$1010_bindings$jscomp$218_c__5501__auto__$$ = void 0;
              }
              return $JSCompiler_inline_result$jscomp$1010_bindings$jscomp$218_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49300_fact$$), $clara$rules$engine$iter__49297$$($APP.cljs.core.chunk_rest($s__49298__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49300_fact$$), null);
            }
            $b__49300_fact$$ = $APP.cljs.core.first($s__49298__$2_temp__5825__auto__$$);
            $JSCompiler_inline_result$jscomp$1010_bindings$jscomp$218_c__5501__auto__$$ = $APP.cljs.core.__destructure_map($b__49300_fact$$);
            $b__49300_fact$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($JSCompiler_inline_result$jscomp$1010_bindings$jscomp$218_c__5501__auto__$$, cljs$cst$3109$fact);
            $JSCompiler_inline_result$jscomp$1010_bindings$jscomp$218_c__5501__auto__$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($JSCompiler_inline_result$jscomp$1010_bindings$jscomp$218_c__5501__auto__$$, $APP.cljs$cst$394$bindings);
            return $APP.cljs.core.cons(clara.rules.engine.__GT_Token(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$b__49300_fact$$, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node__$1$$)], null)], null), $JSCompiler_inline_result$jscomp$1010_bindings$jscomp$218_c__5501__auto__$$), $clara$rules$engine$iter__49297$$($APP.cljs.core.rest($s__49298__$2_temp__5825__auto__$$)));
          }
          return null;
        }
      }, null, null);
    }(clara.rules.memory.remove_elements_BANG_($memory$$, $node__$1$$, $join_bindings$$, $elements$$));
  }()));
};
clara.rules.engine.RootJoinNode.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__49306_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__49306_v__5348__auto__$$, 0, null);
    $p__49306_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__49306_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__49306_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__49306_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
clara.rules.engine.RootJoinNode.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#clara.rules.engine.RootJoinNode{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id, this.id], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3141$condition, this.condition], null), new $APP.cljs.core.PersistentVector(null, 
  2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$3116$children, this.children], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3142$binding_keys, this.binding_keys], null)], null), this.__extmap));
};
clara.rules.engine.RootJoinNode.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__49280$$) {
  return new $APP.cljs.core.RecordIter(0, this, 4, new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id, cljs$cst$3141$condition, $APP.cljs$cst$3116$children, cljs$cst$3142$binding_keys], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
clara.rules.engine.RootJoinNode.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
clara.rules.engine.RootJoinNode.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new clara.rules.engine.RootJoinNode(this.id, this.condition, this.children, this.binding_keys, this.__meta, this.__extmap, this.__hash);
};
clara.rules.engine.RootJoinNode.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 4 + $APP.cljs.core.count(this.__extmap);
};
clara.rules.engine.RootJoinNode.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$101_h__5134__auto____$1$jscomp$101_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$101_h__5134__auto____$1$jscomp$101_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$101_h__5134__auto____$1$jscomp$101_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$101_h__5134__auto____$1$jscomp$101_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$101_h__5134__auto____$1$jscomp$101_this__5319__auto__$$ = 573658183 ^ $APP.cljs.core.hash_unordered_coll(this);
};
clara.rules.engine.RootJoinNode.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this49282$$, $other49283$$) {
  return $other49283$$ != null && this.constructor === $other49283$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.id, $other49283$$.id) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.condition, $other49283$$.condition) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.children, $other49283$$.children) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.binding_keys, $other49283$$.binding_keys) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, 
  $other49283$$.__extmap);
};
clara.rules.engine.RootJoinNode.prototype.clara$rules$engine$IConditionNode$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.RootJoinNode.prototype.clara$rules$engine$IConditionNode$get_condition_description$arity$1 = function($this$$jscomp$844_type$$) {
  var $constraints$$ = $APP.cljs.core.__destructure_map(this.condition);
  $this$$jscomp$844_type$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($constraints$$, $APP.cljs$cst$139$type);
  $constraints$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($constraints$$, cljs$cst$3143$constraints);
  return $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$this$$jscomp$844_type$$], null), $constraints$$);
};
clara.rules.engine.RootJoinNode.prototype.clara$rules$engine$ILeftActivate$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.RootJoinNode.prototype.clara$rules$engine$ILeftActivate$left_activate$arity$6 = function($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) {
  return null;
};
clara.rules.engine.RootJoinNode.prototype.clara$rules$engine$ILeftActivate$left_retract$arity$6 = function($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) {
  return null;
};
clara.rules.engine.RootJoinNode.prototype.clara$rules$engine$ILeftActivate$get_join_keys$arity$1 = function($node$$) {
  return this.binding_keys;
};
clara.rules.engine.RootJoinNode.prototype.clara$rules$engine$ILeftActivate$description$arity$1 = function($node$$) {
  return ["RootJoinNode -- ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($APP.cljs$cst$1999$text.cljs$core$IFn$_invoke$arity$1(this.condition))].join("");
};
clara.rules.engine.RootJoinNode.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$3116$children, null, $APP.cljs$cst$396$id, null, cljs$cst$3141$condition, null, cljs$cst$3142$binding_keys, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : 
  new clara.rules.engine.RootJoinNode(this.id, this.condition, this.children, this.binding_keys, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
clara.rules.engine.RootJoinNode.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k49281$$) {
  switch($k49281$$ instanceof $APP.cljs.core.Keyword ? $k49281$$.fqn : null) {
    case "id":
    case "condition":
    case "children":
    case "binding-keys":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k49281$$);
  }
};
clara.rules.engine.RootJoinNode.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__49320_this__5331__auto__$$, $k__5332__auto__$$, $G__49280$$) {
  $pred__49320_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__49320_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49320_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$396$id, $k__5332__auto__$$) : $pred__49320_this__5331__auto__$$.call(null, $APP.cljs$cst$396$id, $k__5332__auto__$$)) ? new clara.rules.engine.RootJoinNode($G__49280$$, this.condition, this.children, this.binding_keys, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49320_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? 
  $pred__49320_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3141$condition, $k__5332__auto__$$) : $pred__49320_this__5331__auto__$$.call(null, cljs$cst$3141$condition, $k__5332__auto__$$)) ? new clara.rules.engine.RootJoinNode(this.id, $G__49280$$, this.children, this.binding_keys, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49320_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49320_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$3116$children, 
  $k__5332__auto__$$) : $pred__49320_this__5331__auto__$$.call(null, $APP.cljs$cst$3116$children, $k__5332__auto__$$)) ? new clara.rules.engine.RootJoinNode(this.id, this.condition, $G__49280$$, this.binding_keys, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49320_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49320_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3142$binding_keys, $k__5332__auto__$$) : $pred__49320_this__5331__auto__$$.call(null, cljs$cst$3142$binding_keys, 
  $k__5332__auto__$$)) ? new clara.rules.engine.RootJoinNode(this.id, this.condition, this.children, $G__49280$$, this.__meta, this.__extmap, null) : new clara.rules.engine.RootJoinNode(this.id, this.condition, this.children, this.binding_keys, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__49280$$), null);
};
clara.rules.engine.RootJoinNode.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$396$id, this.id, null), new $APP.cljs.core.MapEntry(cljs$cst$3141$condition, this.condition, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$3116$children, this.children, null), new $APP.cljs.core.MapEntry(cljs$cst$3142$binding_keys, this.binding_keys, null)], null), this.__extmap));
};
clara.rules.engine.RootJoinNode.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__49280$$) {
  return new clara.rules.engine.RootJoinNode(this.id, this.condition, this.children, this.binding_keys, $G__49280$$, this.__extmap, this.__hash);
};
clara.rules.engine.RootJoinNode.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
clara.rules.engine.RootJoinNode.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1850$id, cljs$cst$3144$condition, $APP.cljs$cst$3091$children, cljs$cst$3145$binding_keys], null);
};
clara.rules.engine.RootJoinNode.cljs$lang$type = !0;
clara.rules.engine.RootJoinNode.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "clara.rules.engine/RootJoinNode", null, 1, null);
};
clara.rules.engine.RootJoinNode.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "clara.rules.engine/RootJoinNode");
};
clara.rules.engine.__GT_RootJoinNode = function($id$$, $condition$$, $children$$, $binding_keys$$) {
  return new clara.rules.engine.RootJoinNode($id$$, $condition$$, $children$$, $binding_keys$$, null, null, null);
};
clara.rules.engine.map__GT_RootJoinNode = function($G__49284$$) {
  var $G__49327$jscomp$inline_5365_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__49284$$, $APP.cljs$cst$396$id, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$3141$condition, $APP.cljs$cst$3116$children, cljs$cst$3142$binding_keys], 0));
  $G__49327$jscomp$inline_5365_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__49284$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__49327$jscomp$inline_5365_extmap__5365__auto__$$) : $G__49327$jscomp$inline_5365_extmap__5365__auto__$$;
  return new clara.rules.engine.RootJoinNode($APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($G__49284$$), cljs$cst$3141$condition.cljs$core$IFn$_invoke$arity$1($G__49284$$), $APP.cljs$cst$3116$children.cljs$core$IFn$_invoke$arity$1($G__49284$$), cljs$cst$3142$binding_keys.cljs$core$IFn$_invoke$arity$1($G__49284$$), null, $APP.cljs.core.not_empty($G__49327$jscomp$inline_5365_extmap__5365__auto__$$), null);
};
clara.rules.engine.HashJoinNode = function($id$$, $condition$$, $children$$, $binding_keys$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.id = $id$$;
  this.condition = $condition$$;
  this.children = $children$$;
  this.binding_keys = $binding_keys$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
clara.rules.engine.HashJoinNode.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
clara.rules.engine.HashJoinNode.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k49329$$, $else__5326__auto__$$) {
  switch($k49329$$ instanceof $APP.cljs.core.Keyword ? $k49329$$.fqn : null) {
    case "id":
      return this.id;
    case "condition":
      return this.condition;
    case "children":
      return this.children;
    case "binding-keys":
      return this.binding_keys;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k49329$$, $else__5326__auto__$$);
  }
};
clara.rules.engine.HashJoinNode.prototype.clara$rules$engine$IRightActivate$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.HashJoinNode.prototype.clara$rules$engine$IRightActivate$right_activate$arity$6 = function($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$) {
  var $self__$$ = this, $node__$1$$ = this;
  clara.rules.memory.add_elements_BANG_($memory$$, $node__$1$$, $join_bindings$$, $elements$$);
  clara.rules.listener.right_activate_BANG_($listener$$, $node__$1$$, $elements$$);
  return clara.rules.engine.send_tokens($transport$$, $memory$$, $listener$$, $self__$$.children, $APP.cljs.core.doall.cljs$core$IFn$_invoke$arity$1(function() {
    return function $clara$rules$engine$iter__49339$$($s__49340$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (var $s__49340__$1$$ = $s__49340$$;;) {
          var $fs__5500__auto__$jscomp$48_iterys__5499__auto__$jscomp$48_temp__5825__auto__$$ = $APP.cljs.core.seq($s__49340__$1$$);
          if ($fs__5500__auto__$jscomp$48_iterys__5499__auto__$jscomp$48_temp__5825__auto__$$) {
            var $xs__6385__auto__$$ = $fs__5500__auto__$jscomp$48_iterys__5499__auto__$jscomp$48_temp__5825__auto__$$, $token$$ = $APP.cljs.core.first($xs__6385__auto__$$);
            $fs__5500__auto__$jscomp$48_iterys__5499__auto__$jscomp$48_temp__5825__auto__$$ = function($s__49340__$1$$, $token$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $node__$1$$) {
              return function $clara$rules$engine$iter__49339_$_iter__49341$$($s__49342$$) {
                return new $APP.cljs.core.LazySeq(null, function($s__49340__$1$$, $token$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $node__$1$$) {
                  return function() {
                    for (;;) {
                      var $s__49342__$2_temp__5825__auto____$1$$ = $APP.cljs.core.seq($s__49342$$);
                      if ($s__49342__$2_temp__5825__auto____$1$$) {
                        if ($APP.cljs.core.chunked_seq_QMARK_($s__49342__$2_temp__5825__auto____$1$$)) {
                          var $JSCompiler_inline_result$jscomp$1011_bindings$jscomp$220_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__49342__$2_temp__5825__auto____$1$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1011_bindings$jscomp$220_c__5501__auto__$$), $b__49344_fact$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
                          a: {
                            for (var $i__49343$$ = 0;;) {
                              if ($i__49343$$ < $size__5502__auto__$$) {
                                var $fact$jscomp$inline_5371_map__49345$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1011_bindings$jscomp$220_c__5501__auto__$$, $i__49343$$), $bindings$jscomp$inline_5372_map__49345__$1$$ = $APP.cljs.core.__destructure_map($fact$jscomp$inline_5371_map__49345$$);
                                $fact$jscomp$inline_5371_map__49345$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($bindings$jscomp$inline_5372_map__49345__$1$$, cljs$cst$3109$fact);
                                $bindings$jscomp$inline_5372_map__49345__$1$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($bindings$jscomp$inline_5372_map__49345__$1$$, $APP.cljs$cst$394$bindings);
                                $APP.cljs.core.chunk_append($b__49344_fact$$, clara.rules.engine.__GT_Token($APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2(cljs$cst$3107$matches.cljs$core$IFn$_invoke$arity$1($token$$), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$fact$jscomp$inline_5371_map__49345$$, $self__$$.id], null)), $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($token$$), $bindings$jscomp$inline_5372_map__49345__$1$$)));
                                $i__49343$$ += 1;
                              } else {
                                $JSCompiler_inline_result$jscomp$1011_bindings$jscomp$220_c__5501__auto__$$ = !0;
                                break a;
                              }
                            }
                            $JSCompiler_inline_result$jscomp$1011_bindings$jscomp$220_c__5501__auto__$$ = void 0;
                          }
                          return $JSCompiler_inline_result$jscomp$1011_bindings$jscomp$220_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49344_fact$$), $clara$rules$engine$iter__49339_$_iter__49341$$($APP.cljs.core.chunk_rest($s__49342__$2_temp__5825__auto____$1$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49344_fact$$), null);
                        }
                        $b__49344_fact$$ = $APP.cljs.core.first($s__49342__$2_temp__5825__auto____$1$$);
                        $JSCompiler_inline_result$jscomp$1011_bindings$jscomp$220_c__5501__auto__$$ = $APP.cljs.core.__destructure_map($b__49344_fact$$);
                        $b__49344_fact$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($JSCompiler_inline_result$jscomp$1011_bindings$jscomp$220_c__5501__auto__$$, cljs$cst$3109$fact);
                        $JSCompiler_inline_result$jscomp$1011_bindings$jscomp$220_c__5501__auto__$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($JSCompiler_inline_result$jscomp$1011_bindings$jscomp$220_c__5501__auto__$$, $APP.cljs$cst$394$bindings);
                        return $APP.cljs.core.cons(clara.rules.engine.__GT_Token($APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2(cljs$cst$3107$matches.cljs$core$IFn$_invoke$arity$1($token$$), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$b__49344_fact$$, $self__$$.id], null)), $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($token$$), $JSCompiler_inline_result$jscomp$1011_bindings$jscomp$220_c__5501__auto__$$)), 
                        $clara$rules$engine$iter__49339_$_iter__49341$$($APP.cljs.core.rest($s__49342__$2_temp__5825__auto____$1$$)));
                      }
                      return null;
                    }
                  };
                }($s__49340__$1$$, $token$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $node__$1$$), null, null);
              };
            }($s__49340__$1$$, $token$$, $xs__6385__auto__$$, $fs__5500__auto__$jscomp$48_iterys__5499__auto__$jscomp$48_temp__5825__auto__$$, $node__$1$$);
            if ($fs__5500__auto__$jscomp$48_iterys__5499__auto__$jscomp$48_temp__5825__auto__$$ = $APP.cljs.core.seq($fs__5500__auto__$jscomp$48_iterys__5499__auto__$jscomp$48_temp__5825__auto__$$($elements$$))) {
              return $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($fs__5500__auto__$jscomp$48_iterys__5499__auto__$jscomp$48_temp__5825__auto__$$, $clara$rules$engine$iter__49339$$($APP.cljs.core.rest($s__49340__$1$$)));
            }
            $s__49340__$1$$ = $APP.cljs.core.rest($s__49340__$1$$);
          } else {
            return null;
          }
        }
      }, null, null);
    }(clara.rules.memory.get_tokens($memory$$, $node__$1$$, $join_bindings$$));
  }()));
};
clara.rules.engine.HashJoinNode.prototype.clara$rules$engine$IRightActivate$right_retract$arity$6 = function($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$) {
  var $self__$$ = this, $node__$1$$ = this;
  clara.rules.listener.right_retract_BANG_($listener$$, $node__$1$$, $elements$$);
  return clara.rules.engine.retract_tokens($transport$$, $memory$$, $listener$$, $self__$$.children, $APP.cljs.core.doall.cljs$core$IFn$_invoke$arity$1(function() {
    return function $clara$rules$engine$iter__49352$$($s__49353$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (var $s__49353__$1$$ = $s__49353$$;;) {
          var $fs__5500__auto__$jscomp$49_iterys__5499__auto__$jscomp$49_temp__5825__auto__$$ = $APP.cljs.core.seq($s__49353__$1$$);
          if ($fs__5500__auto__$jscomp$49_iterys__5499__auto__$jscomp$49_temp__5825__auto__$$) {
            var $xs__6385__auto__$$ = $fs__5500__auto__$jscomp$49_iterys__5499__auto__$jscomp$49_temp__5825__auto__$$, $map__49358$$ = $APP.cljs.core.first($xs__6385__auto__$$), $map__49358__$1$$ = $APP.cljs.core.__destructure_map($map__49358$$), $element$$ = $map__49358__$1$$, $fact$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__49358__$1$$, cljs$cst$3109$fact), $bindings$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__49358__$1$$, $APP.cljs$cst$394$bindings);
            $fs__5500__auto__$jscomp$49_iterys__5499__auto__$jscomp$49_temp__5825__auto__$$ = function($s__49353__$1$$, $map__49358$$, $map__49358__$1$$, $element$$, $fact$$, $bindings$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $node__$1$$) {
              return function $clara$rules$engine$iter__49352_$_iter__49354$$($s__49355$$) {
                return new $APP.cljs.core.LazySeq(null, function($s__49353__$1$$, $map__49358$$, $map__49358__$1$$, $element$$, $fact$$, $bindings$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $node__$1$$) {
                  return function() {
                    for (;;) {
                      var $s__49355__$2_temp__5825__auto____$1$$ = $APP.cljs.core.seq($s__49355$$);
                      if ($s__49355__$2_temp__5825__auto____$1$$) {
                        if ($APP.cljs.core.chunked_seq_QMARK_($s__49355__$2_temp__5825__auto____$1$$)) {
                          var $JSCompiler_inline_result$jscomp$1012_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__49355__$2_temp__5825__auto____$1$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1012_c__5501__auto__$$), $b__49357_token$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
                          a: {
                            for (var $i__49356$$ = 0;;) {
                              if ($i__49356$$ < $size__5502__auto__$$) {
                                var $token$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1012_c__5501__auto__$$, $i__49356$$);
                                $APP.cljs.core.chunk_append($b__49357_token$$, clara.rules.engine.__GT_Token($APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2(cljs$cst$3107$matches.cljs$core$IFn$_invoke$arity$1($token$$), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$fact$$, $self__$$.id], null)), $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($token$$), $bindings$$)));
                                $i__49356$$ += 1;
                              } else {
                                $JSCompiler_inline_result$jscomp$1012_c__5501__auto__$$ = !0;
                                break a;
                              }
                            }
                            $JSCompiler_inline_result$jscomp$1012_c__5501__auto__$$ = void 0;
                          }
                          return $JSCompiler_inline_result$jscomp$1012_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49357_token$$), $clara$rules$engine$iter__49352_$_iter__49354$$($APP.cljs.core.chunk_rest($s__49355__$2_temp__5825__auto____$1$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49357_token$$), null);
                        }
                        $b__49357_token$$ = $APP.cljs.core.first($s__49355__$2_temp__5825__auto____$1$$);
                        return $APP.cljs.core.cons(clara.rules.engine.__GT_Token($APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2(cljs$cst$3107$matches.cljs$core$IFn$_invoke$arity$1($b__49357_token$$), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$fact$$, $self__$$.id], null)), $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($b__49357_token$$), $bindings$$)), $clara$rules$engine$iter__49352_$_iter__49354$$($APP.cljs.core.rest($s__49355__$2_temp__5825__auto____$1$$)));
                      }
                      return null;
                    }
                  };
                }($s__49353__$1$$, $map__49358$$, $map__49358__$1$$, $element$$, $fact$$, $bindings$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $node__$1$$), null, null);
              };
            }($s__49353__$1$$, $map__49358$$, $map__49358__$1$$, $element$$, $fact$$, $bindings$$, $xs__6385__auto__$$, $fs__5500__auto__$jscomp$49_iterys__5499__auto__$jscomp$49_temp__5825__auto__$$, $node__$1$$);
            if ($fs__5500__auto__$jscomp$49_iterys__5499__auto__$jscomp$49_temp__5825__auto__$$ = $APP.cljs.core.seq($fs__5500__auto__$jscomp$49_iterys__5499__auto__$jscomp$49_temp__5825__auto__$$(clara.rules.memory.get_tokens($memory$$, $node__$1$$, $join_bindings$$)))) {
              return $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($fs__5500__auto__$jscomp$49_iterys__5499__auto__$jscomp$49_temp__5825__auto__$$, $clara$rules$engine$iter__49352$$($APP.cljs.core.rest($s__49353__$1$$)));
            }
            $s__49353__$1$$ = $APP.cljs.core.rest($s__49353__$1$$);
          } else {
            return null;
          }
        }
      }, null, null);
    }(clara.rules.memory.remove_elements_BANG_($memory$$, $node__$1$$, $join_bindings$$, $elements$$));
  }()));
};
clara.rules.engine.HashJoinNode.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__49360_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__49360_v__5348__auto__$$, 0, null);
    $p__49360_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__49360_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__49360_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__49360_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
clara.rules.engine.HashJoinNode.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#clara.rules.engine.HashJoinNode{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id, this.id], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3141$condition, this.condition], null), new $APP.cljs.core.PersistentVector(null, 
  2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$3116$children, this.children], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3142$binding_keys, this.binding_keys], null)], null), this.__extmap));
};
clara.rules.engine.HashJoinNode.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__49328$$) {
  return new $APP.cljs.core.RecordIter(0, this, 4, new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id, cljs$cst$3141$condition, $APP.cljs$cst$3116$children, cljs$cst$3142$binding_keys], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
clara.rules.engine.HashJoinNode.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
clara.rules.engine.HashJoinNode.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new clara.rules.engine.HashJoinNode(this.id, this.condition, this.children, this.binding_keys, this.__meta, this.__extmap, this.__hash);
};
clara.rules.engine.HashJoinNode.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 4 + $APP.cljs.core.count(this.__extmap);
};
clara.rules.engine.HashJoinNode.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$102_h__5134__auto____$1$jscomp$102_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$102_h__5134__auto____$1$jscomp$102_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$102_h__5134__auto____$1$jscomp$102_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$102_h__5134__auto____$1$jscomp$102_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$102_h__5134__auto____$1$jscomp$102_this__5319__auto__$$ = 2084246332 ^ $APP.cljs.core.hash_unordered_coll(this);
};
clara.rules.engine.HashJoinNode.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this49330$$, $other49331$$) {
  return $other49331$$ != null && this.constructor === $other49331$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.id, $other49331$$.id) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.condition, $other49331$$.condition) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.children, $other49331$$.children) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.binding_keys, $other49331$$.binding_keys) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, 
  $other49331$$.__extmap);
};
clara.rules.engine.HashJoinNode.prototype.clara$rules$engine$IConditionNode$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.HashJoinNode.prototype.clara$rules$engine$IConditionNode$get_condition_description$arity$1 = function($this$$jscomp$845_type$$) {
  var $constraints$$ = $APP.cljs.core.__destructure_map(this.condition);
  $this$$jscomp$845_type$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($constraints$$, $APP.cljs$cst$139$type);
  $constraints$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($constraints$$, cljs$cst$3143$constraints);
  return $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$this$$jscomp$845_type$$], null), $constraints$$);
};
clara.rules.engine.HashJoinNode.prototype.clara$rules$engine$ILeftActivate$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.HashJoinNode.prototype.clara$rules$engine$ILeftActivate$left_activate$arity$6 = function($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) {
  var $self__$$ = this, $node__$1$$ = this;
  clara.rules.memory.add_tokens_BANG_($memory$$, $node__$1$$, $join_bindings$$, $tokens$$);
  clara.rules.listener.left_activate_BANG_($listener$$, $node__$1$$, $tokens$$);
  return clara.rules.engine.send_tokens($transport$$, $memory$$, $listener$$, $self__$$.children, $APP.cljs.core.doall.cljs$core$IFn$_invoke$arity$1(function() {
    return function $clara$rules$engine$iter__49374$$($s__49375$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (var $s__49375__$1$$ = $s__49375$$;;) {
          var $fs__5500__auto__$jscomp$50_iterys__5499__auto__$jscomp$50_temp__5825__auto__$$ = $APP.cljs.core.seq($s__49375__$1$$);
          if ($fs__5500__auto__$jscomp$50_iterys__5499__auto__$jscomp$50_temp__5825__auto__$$) {
            var $xs__6385__auto__$$ = $fs__5500__auto__$jscomp$50_iterys__5499__auto__$jscomp$50_temp__5825__auto__$$, $element$$ = $APP.cljs.core.first($xs__6385__auto__$$);
            $fs__5500__auto__$jscomp$50_iterys__5499__auto__$jscomp$50_temp__5825__auto__$$ = function($s__49375__$1$$, $element$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $node__$1$$) {
              return function $clara$rules$engine$iter__49374_$_iter__49376$$($s__49377$$) {
                return new $APP.cljs.core.LazySeq(null, function($s__49375__$1$$, $element$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $node__$1$$) {
                  return function() {
                    for (;;) {
                      var $s__49377__$2_temp__5825__auto____$1$$ = $APP.cljs.core.seq($s__49377$$);
                      if ($s__49377__$2_temp__5825__auto____$1$$) {
                        if ($APP.cljs.core.chunked_seq_QMARK_($s__49377__$2_temp__5825__auto____$1$$)) {
                          var $JSCompiler_inline_result$jscomp$1013_c__5501__auto__$jscomp$101_fact$$ = $APP.cljs.core.chunk_first($s__49377__$2_temp__5825__auto____$1$$), $fact_binding$jscomp$4_size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1013_c__5501__auto__$jscomp$101_fact$$), $b__49379_token$$ = $APP.cljs.core.chunk_buffer($fact_binding$jscomp$4_size__5502__auto__$$);
                          a: {
                            for (var $i__49378$$ = 0;;) {
                              if ($i__49378$$ < $fact_binding$jscomp$4_size__5502__auto__$$) {
                                var $token$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1013_c__5501__auto__$jscomp$101_fact$$, $i__49378$$), $fact$$ = cljs$cst$3109$fact.cljs$core$IFn$_invoke$arity$1($element$$), $fact_binding$$ = $APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($element$$);
                                $APP.cljs.core.chunk_append($b__49379_token$$, clara.rules.engine.__GT_Token($APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2(cljs$cst$3107$matches.cljs$core$IFn$_invoke$arity$1($token$$), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$fact$$, $self__$$.id], null)), $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($fact_binding$$, $APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($token$$))));
                                $i__49378$$ += 1;
                              } else {
                                $JSCompiler_inline_result$jscomp$1013_c__5501__auto__$jscomp$101_fact$$ = !0;
                                break a;
                              }
                            }
                            $JSCompiler_inline_result$jscomp$1013_c__5501__auto__$jscomp$101_fact$$ = void 0;
                          }
                          return $JSCompiler_inline_result$jscomp$1013_c__5501__auto__$jscomp$101_fact$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49379_token$$), $clara$rules$engine$iter__49374_$_iter__49376$$($APP.cljs.core.chunk_rest($s__49377__$2_temp__5825__auto____$1$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49379_token$$), null);
                        }
                        $b__49379_token$$ = $APP.cljs.core.first($s__49377__$2_temp__5825__auto____$1$$);
                        $JSCompiler_inline_result$jscomp$1013_c__5501__auto__$jscomp$101_fact$$ = cljs$cst$3109$fact.cljs$core$IFn$_invoke$arity$1($element$$);
                        $fact_binding$jscomp$4_size__5502__auto__$$ = $APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($element$$);
                        return $APP.cljs.core.cons(clara.rules.engine.__GT_Token($APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2(cljs$cst$3107$matches.cljs$core$IFn$_invoke$arity$1($b__49379_token$$), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$JSCompiler_inline_result$jscomp$1013_c__5501__auto__$jscomp$101_fact$$, $self__$$.id], null)), $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($fact_binding$jscomp$4_size__5502__auto__$$, $APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($b__49379_token$$))), 
                        $clara$rules$engine$iter__49374_$_iter__49376$$($APP.cljs.core.rest($s__49377__$2_temp__5825__auto____$1$$)));
                      }
                      return null;
                    }
                  };
                }($s__49375__$1$$, $element$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $node__$1$$), null, null);
              };
            }($s__49375__$1$$, $element$$, $xs__6385__auto__$$, $fs__5500__auto__$jscomp$50_iterys__5499__auto__$jscomp$50_temp__5825__auto__$$, $node__$1$$);
            if ($fs__5500__auto__$jscomp$50_iterys__5499__auto__$jscomp$50_temp__5825__auto__$$ = $APP.cljs.core.seq($fs__5500__auto__$jscomp$50_iterys__5499__auto__$jscomp$50_temp__5825__auto__$$($tokens$$))) {
              return $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($fs__5500__auto__$jscomp$50_iterys__5499__auto__$jscomp$50_temp__5825__auto__$$, $clara$rules$engine$iter__49374$$($APP.cljs.core.rest($s__49375__$1$$)));
            }
            $s__49375__$1$$ = $APP.cljs.core.rest($s__49375__$1$$);
          } else {
            return null;
          }
        }
      }, null, null);
    }(clara.rules.memory.get_elements($memory$$, $node__$1$$, $join_bindings$$));
  }()));
};
clara.rules.engine.HashJoinNode.prototype.clara$rules$engine$ILeftActivate$left_retract$arity$6 = function($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) {
  var $self__$$ = this, $node__$1$$ = this;
  clara.rules.listener.left_retract_BANG_($listener$$, $node__$1$$, $tokens$$);
  return clara.rules.engine.retract_tokens($transport$$, $memory$$, $listener$$, $self__$$.children, $APP.cljs.core.doall.cljs$core$IFn$_invoke$arity$1(function() {
    return function $clara$rules$engine$iter__49381$$($s__49382$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (var $s__49382__$1$$ = $s__49382$$;;) {
          var $fs__5500__auto__$jscomp$51_iterys__5499__auto__$jscomp$51_temp__5825__auto__$$ = $APP.cljs.core.seq($s__49382__$1$$);
          if ($fs__5500__auto__$jscomp$51_iterys__5499__auto__$jscomp$51_temp__5825__auto__$$) {
            var $xs__6385__auto__$$ = $fs__5500__auto__$jscomp$51_iterys__5499__auto__$jscomp$51_temp__5825__auto__$$, $token$$ = $APP.cljs.core.first($xs__6385__auto__$$);
            $fs__5500__auto__$jscomp$51_iterys__5499__auto__$jscomp$51_temp__5825__auto__$$ = function($s__49382__$1$$, $token$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $node__$1$$) {
              return function $clara$rules$engine$iter__49381_$_iter__49383$$($s__49384$$) {
                return new $APP.cljs.core.LazySeq(null, function($s__49382__$1$$, $token$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $node__$1$$) {
                  return function() {
                    for (;;) {
                      var $s__49384__$2_temp__5825__auto____$1$$ = $APP.cljs.core.seq($s__49384$$);
                      if ($s__49384__$2_temp__5825__auto____$1$$) {
                        if ($APP.cljs.core.chunked_seq_QMARK_($s__49384__$2_temp__5825__auto____$1$$)) {
                          var $JSCompiler_inline_result$jscomp$1014_c__5501__auto__$jscomp$102_element$jscomp$59_fact_bindings$$ = $APP.cljs.core.chunk_first($s__49384__$2_temp__5825__auto____$1$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1014_c__5501__auto__$jscomp$102_element$jscomp$59_fact_bindings$$), $b__49386_fact$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
                          a: {
                            for (var $i__49385$$ = 0;;) {
                              if ($i__49385$$ < $size__5502__auto__$$) {
                                var $element$jscomp$inline_5386_fact_bindings$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1014_c__5501__auto__$jscomp$102_element$jscomp$59_fact_bindings$$, $i__49385$$), $fact$$ = cljs$cst$3109$fact.cljs$core$IFn$_invoke$arity$1($element$jscomp$inline_5386_fact_bindings$$);
                                $element$jscomp$inline_5386_fact_bindings$$ = $APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($element$jscomp$inline_5386_fact_bindings$$);
                                $APP.cljs.core.chunk_append($b__49386_fact$$, clara.rules.engine.__GT_Token($APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2(cljs$cst$3107$matches.cljs$core$IFn$_invoke$arity$1($token$$), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$fact$$, $self__$$.id], null)), $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($element$jscomp$inline_5386_fact_bindings$$, $APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($token$$))));
                                $i__49385$$ += 1;
                              } else {
                                $JSCompiler_inline_result$jscomp$1014_c__5501__auto__$jscomp$102_element$jscomp$59_fact_bindings$$ = !0;
                                break a;
                              }
                            }
                            $JSCompiler_inline_result$jscomp$1014_c__5501__auto__$jscomp$102_element$jscomp$59_fact_bindings$$ = void 0;
                          }
                          return $JSCompiler_inline_result$jscomp$1014_c__5501__auto__$jscomp$102_element$jscomp$59_fact_bindings$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49386_fact$$), $clara$rules$engine$iter__49381_$_iter__49383$$($APP.cljs.core.chunk_rest($s__49384__$2_temp__5825__auto____$1$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49386_fact$$), null);
                        }
                        $JSCompiler_inline_result$jscomp$1014_c__5501__auto__$jscomp$102_element$jscomp$59_fact_bindings$$ = $APP.cljs.core.first($s__49384__$2_temp__5825__auto____$1$$);
                        $b__49386_fact$$ = cljs$cst$3109$fact.cljs$core$IFn$_invoke$arity$1($JSCompiler_inline_result$jscomp$1014_c__5501__auto__$jscomp$102_element$jscomp$59_fact_bindings$$);
                        $JSCompiler_inline_result$jscomp$1014_c__5501__auto__$jscomp$102_element$jscomp$59_fact_bindings$$ = $APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($JSCompiler_inline_result$jscomp$1014_c__5501__auto__$jscomp$102_element$jscomp$59_fact_bindings$$);
                        return $APP.cljs.core.cons(clara.rules.engine.__GT_Token($APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2(cljs$cst$3107$matches.cljs$core$IFn$_invoke$arity$1($token$$), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$b__49386_fact$$, $self__$$.id], null)), $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($JSCompiler_inline_result$jscomp$1014_c__5501__auto__$jscomp$102_element$jscomp$59_fact_bindings$$, $APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($token$$))), 
                        $clara$rules$engine$iter__49381_$_iter__49383$$($APP.cljs.core.rest($s__49384__$2_temp__5825__auto____$1$$)));
                      }
                      return null;
                    }
                  };
                }($s__49382__$1$$, $token$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $node__$1$$), null, null);
              };
            }($s__49382__$1$$, $token$$, $xs__6385__auto__$$, $fs__5500__auto__$jscomp$51_iterys__5499__auto__$jscomp$51_temp__5825__auto__$$, $node__$1$$);
            if ($fs__5500__auto__$jscomp$51_iterys__5499__auto__$jscomp$51_temp__5825__auto__$$ = $APP.cljs.core.seq($fs__5500__auto__$jscomp$51_iterys__5499__auto__$jscomp$51_temp__5825__auto__$$(clara.rules.memory.get_elements($memory$$, $node__$1$$, $join_bindings$$)))) {
              return $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($fs__5500__auto__$jscomp$51_iterys__5499__auto__$jscomp$51_temp__5825__auto__$$, $clara$rules$engine$iter__49381$$($APP.cljs.core.rest($s__49382__$1$$)));
            }
            $s__49382__$1$$ = $APP.cljs.core.rest($s__49382__$1$$);
          } else {
            return null;
          }
        }
      }, null, null);
    }(clara.rules.memory.remove_tokens_BANG_($memory$$, $node__$1$$, $join_bindings$$, $tokens$$));
  }()));
};
clara.rules.engine.HashJoinNode.prototype.clara$rules$engine$ILeftActivate$get_join_keys$arity$1 = function($node$$) {
  return this.binding_keys;
};
clara.rules.engine.HashJoinNode.prototype.clara$rules$engine$ILeftActivate$description$arity$1 = function($node$$) {
  return ["JoinNode -- ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($APP.cljs$cst$1999$text.cljs$core$IFn$_invoke$arity$1(this.condition))].join("");
};
clara.rules.engine.HashJoinNode.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$3116$children, null, $APP.cljs$cst$396$id, null, cljs$cst$3141$condition, null, cljs$cst$3142$binding_keys, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : 
  new clara.rules.engine.HashJoinNode(this.id, this.condition, this.children, this.binding_keys, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
clara.rules.engine.HashJoinNode.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k49329$$) {
  switch($k49329$$ instanceof $APP.cljs.core.Keyword ? $k49329$$.fqn : null) {
    case "id":
    case "condition":
    case "children":
    case "binding-keys":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k49329$$);
  }
};
clara.rules.engine.HashJoinNode.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__49397_this__5331__auto__$$, $k__5332__auto__$$, $G__49328$$) {
  $pred__49397_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__49397_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49397_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$396$id, $k__5332__auto__$$) : $pred__49397_this__5331__auto__$$.call(null, $APP.cljs$cst$396$id, $k__5332__auto__$$)) ? new clara.rules.engine.HashJoinNode($G__49328$$, this.condition, this.children, this.binding_keys, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49397_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? 
  $pred__49397_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3141$condition, $k__5332__auto__$$) : $pred__49397_this__5331__auto__$$.call(null, cljs$cst$3141$condition, $k__5332__auto__$$)) ? new clara.rules.engine.HashJoinNode(this.id, $G__49328$$, this.children, this.binding_keys, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49397_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49397_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$3116$children, 
  $k__5332__auto__$$) : $pred__49397_this__5331__auto__$$.call(null, $APP.cljs$cst$3116$children, $k__5332__auto__$$)) ? new clara.rules.engine.HashJoinNode(this.id, this.condition, $G__49328$$, this.binding_keys, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49397_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49397_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3142$binding_keys, $k__5332__auto__$$) : $pred__49397_this__5331__auto__$$.call(null, cljs$cst$3142$binding_keys, 
  $k__5332__auto__$$)) ? new clara.rules.engine.HashJoinNode(this.id, this.condition, this.children, $G__49328$$, this.__meta, this.__extmap, null) : new clara.rules.engine.HashJoinNode(this.id, this.condition, this.children, this.binding_keys, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__49328$$), null);
};
clara.rules.engine.HashJoinNode.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$396$id, this.id, null), new $APP.cljs.core.MapEntry(cljs$cst$3141$condition, this.condition, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$3116$children, this.children, null), new $APP.cljs.core.MapEntry(cljs$cst$3142$binding_keys, this.binding_keys, null)], null), this.__extmap));
};
clara.rules.engine.HashJoinNode.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__49328$$) {
  return new clara.rules.engine.HashJoinNode(this.id, this.condition, this.children, this.binding_keys, $G__49328$$, this.__extmap, this.__hash);
};
clara.rules.engine.HashJoinNode.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
clara.rules.engine.HashJoinNode.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1850$id, cljs$cst$3144$condition, $APP.cljs$cst$3091$children, cljs$cst$3145$binding_keys], null);
};
clara.rules.engine.HashJoinNode.cljs$lang$type = !0;
clara.rules.engine.HashJoinNode.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "clara.rules.engine/HashJoinNode", null, 1, null);
};
clara.rules.engine.HashJoinNode.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "clara.rules.engine/HashJoinNode");
};
clara.rules.engine.__GT_HashJoinNode = function($id$$, $condition$$, $children$$, $binding_keys$$) {
  return new clara.rules.engine.HashJoinNode($id$$, $condition$$, $children$$, $binding_keys$$, null, null, null);
};
clara.rules.engine.map__GT_HashJoinNode = function($G__49333$$) {
  var $G__49403$jscomp$inline_5391_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__49333$$, $APP.cljs$cst$396$id, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$3141$condition, $APP.cljs$cst$3116$children, cljs$cst$3142$binding_keys], 0));
  $G__49403$jscomp$inline_5391_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__49333$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__49403$jscomp$inline_5391_extmap__5365__auto__$$) : $G__49403$jscomp$inline_5391_extmap__5365__auto__$$;
  return new clara.rules.engine.HashJoinNode($APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($G__49333$$), cljs$cst$3141$condition.cljs$core$IFn$_invoke$arity$1($G__49333$$), $APP.cljs$cst$3116$children.cljs$core$IFn$_invoke$arity$1($G__49333$$), cljs$cst$3142$binding_keys.cljs$core$IFn$_invoke$arity$1($G__49333$$), null, $APP.cljs.core.not_empty($G__49403$jscomp$inline_5391_extmap__5365__auto__$$), null);
};
clara.rules.engine.join_node_matches = function($node$$, $join_filter_fn$$, $token$$, $fact$$, $fact_bindings$$, $env$$) {
  try {
    var $G__49410$$ = $APP.cljs.core.PersistentArrayMap.EMPTY;
    var $beta_bindings$$ = $join_filter_fn$$.cljs$core$IFn$_invoke$arity$4 ? $join_filter_fn$$.cljs$core$IFn$_invoke$arity$4($token$$, $fact$$, $fact_bindings$$, $G__49410$$) : $join_filter_fn$$.call(null, $token$$, $fact$$, $fact_bindings$$, $G__49410$$);
  } catch ($e49406$$) {
    $beta_bindings$$ = clara.rules.engine.throw_condition_exception(new $APP.cljs.core.PersistentArrayMap(null, 5, [$APP.cljs$cst$145$cause, $e49406$$, $APP.cljs$cst$3067$node, $node$$, cljs$cst$3109$fact, $fact$$, $APP.cljs$cst$395$env, $env$$, $APP.cljs$cst$394$bindings, $APP.cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($token$$), $fact_bindings$$], 0))], null));
  }
  return $beta_bindings$$;
};
clara.rules.engine.ExpressionJoinNode = function($id$$, $condition$$, $join_filter_fn$$, $children$$, $binding_keys$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.id = $id$$;
  this.condition = $condition$$;
  this.join_filter_fn = $join_filter_fn$$;
  this.children = $children$$;
  this.binding_keys = $binding_keys$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
clara.rules.engine.ExpressionJoinNode.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
clara.rules.engine.ExpressionJoinNode.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k49412$$, $else__5326__auto__$$) {
  switch($k49412$$ instanceof $APP.cljs.core.Keyword ? $k49412$$.fqn : null) {
    case "id":
      return this.id;
    case "condition":
      return this.condition;
    case "join-filter-fn":
      return this.join_filter_fn;
    case "children":
      return this.children;
    case "binding-keys":
      return this.binding_keys;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k49412$$, $else__5326__auto__$$);
  }
};
clara.rules.engine.ExpressionJoinNode.prototype.clara$rules$engine$IRightActivate$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.ExpressionJoinNode.prototype.clara$rules$engine$IRightActivate$right_activate$arity$6 = function($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$) {
  var $self__$$ = this, $node__$1$$ = this;
  clara.rules.memory.add_elements_BANG_($memory$$, $node__$1$$, $join_bindings$$, $elements$$);
  clara.rules.listener.right_activate_BANG_($listener$$, $node__$1$$, $elements$$);
  return clara.rules.engine.send_tokens($transport$$, $memory$$, $listener$$, $self__$$.children, $APP.cljs.core.doall.cljs$core$IFn$_invoke$arity$1(function() {
    return function $clara$rules$engine$iter__49422$$($s__49423$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (var $s__49423__$1$$ = $s__49423$$;;) {
          var $fs__5500__auto__$jscomp$52_iterys__5499__auto__$jscomp$52_temp__5825__auto__$$ = $APP.cljs.core.seq($s__49423__$1$$);
          if ($fs__5500__auto__$jscomp$52_iterys__5499__auto__$jscomp$52_temp__5825__auto__$$) {
            var $xs__6385__auto__$$ = $fs__5500__auto__$jscomp$52_iterys__5499__auto__$jscomp$52_temp__5825__auto__$$, $token$$ = $APP.cljs.core.first($xs__6385__auto__$$);
            $fs__5500__auto__$jscomp$52_iterys__5499__auto__$jscomp$52_temp__5825__auto__$$ = function($s__49423__$1$$, $token$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $node__$1$$) {
              return function $clara$rules$engine$iter__49422_$_iter__49424$$($s__49425$$) {
                return new $APP.cljs.core.LazySeq(null, function($s__49423__$1$$, $token$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $node__$1$$) {
                  return function() {
                    for (var $s__49425__$1_s__49425__$2_temp__5825__auto____$1$$ = $s__49425$$;;) {
                      if ($s__49425__$1_s__49425__$2_temp__5825__auto____$1$$ = $APP.cljs.core.seq($s__49425__$1_s__49425__$2_temp__5825__auto____$1$$)) {
                        if ($APP.cljs.core.chunked_seq_QMARK_($s__49425__$1_s__49425__$2_temp__5825__auto____$1$$)) {
                          var $JSCompiler_inline_result$jscomp$1015_bindings$jscomp$225_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__49425__$1_s__49425__$2_temp__5825__auto____$1$$), $beta_bindings$jscomp$1_size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1015_bindings$jscomp$225_c__5501__auto__$$), $b__49427_fact$$ = $APP.cljs.core.chunk_buffer($beta_bindings$jscomp$1_size__5502__auto__$$);
                          a: {
                            for (var $i__49426$$ = 0;;) {
                              if ($i__49426$$ < $beta_bindings$jscomp$1_size__5502__auto__$$) {
                                var $fact$jscomp$inline_5404_map__49428$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1015_bindings$jscomp$225_c__5501__auto__$$, $i__49426$$), $bindings$jscomp$inline_5405_map__49428__$1$$ = $APP.cljs.core.__destructure_map($fact$jscomp$inline_5404_map__49428$$);
                                $fact$jscomp$inline_5404_map__49428$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($bindings$jscomp$inline_5405_map__49428__$1$$, cljs$cst$3109$fact);
                                $bindings$jscomp$inline_5405_map__49428__$1$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($bindings$jscomp$inline_5405_map__49428__$1$$, $APP.cljs$cst$394$bindings);
                                var $beta_bindings$$ = clara.rules.engine.join_node_matches($node__$1$$, $self__$$.join_filter_fn, $token$$, $fact$jscomp$inline_5404_map__49428$$, $bindings$jscomp$inline_5405_map__49428__$1$$, $APP.cljs.core.PersistentArrayMap.EMPTY);
                                $APP.cljs.core.truth_($beta_bindings$$) && $APP.cljs.core.chunk_append($b__49427_fact$$, clara.rules.engine.__GT_Token($APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2(cljs$cst$3107$matches.cljs$core$IFn$_invoke$arity$1($token$$), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$fact$jscomp$inline_5404_map__49428$$, $self__$$.id], null)), $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$variadic($APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($token$$), 
                                $bindings$jscomp$inline_5405_map__49428__$1$$, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$beta_bindings$$], 0))));
                                $i__49426$$ += 1;
                              } else {
                                $JSCompiler_inline_result$jscomp$1015_bindings$jscomp$225_c__5501__auto__$$ = !0;
                                break a;
                              }
                            }
                            $JSCompiler_inline_result$jscomp$1015_bindings$jscomp$225_c__5501__auto__$$ = void 0;
                          }
                          return $JSCompiler_inline_result$jscomp$1015_bindings$jscomp$225_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49427_fact$$), $clara$rules$engine$iter__49422_$_iter__49424$$($APP.cljs.core.chunk_rest($s__49425__$1_s__49425__$2_temp__5825__auto____$1$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49427_fact$$), null);
                        }
                        $b__49427_fact$$ = $APP.cljs.core.first($s__49425__$1_s__49425__$2_temp__5825__auto____$1$$);
                        $JSCompiler_inline_result$jscomp$1015_bindings$jscomp$225_c__5501__auto__$$ = $APP.cljs.core.__destructure_map($b__49427_fact$$);
                        $b__49427_fact$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($JSCompiler_inline_result$jscomp$1015_bindings$jscomp$225_c__5501__auto__$$, cljs$cst$3109$fact);
                        $JSCompiler_inline_result$jscomp$1015_bindings$jscomp$225_c__5501__auto__$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($JSCompiler_inline_result$jscomp$1015_bindings$jscomp$225_c__5501__auto__$$, $APP.cljs$cst$394$bindings);
                        $beta_bindings$jscomp$1_size__5502__auto__$$ = clara.rules.engine.join_node_matches($node__$1$$, $self__$$.join_filter_fn, $token$$, $b__49427_fact$$, $JSCompiler_inline_result$jscomp$1015_bindings$jscomp$225_c__5501__auto__$$, $APP.cljs.core.PersistentArrayMap.EMPTY);
                        if ($APP.cljs.core.truth_($beta_bindings$jscomp$1_size__5502__auto__$$)) {
                          return $APP.cljs.core.cons(clara.rules.engine.__GT_Token($APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2(cljs$cst$3107$matches.cljs$core$IFn$_invoke$arity$1($token$$), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$b__49427_fact$$, $self__$$.id], null)), $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$variadic($APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($token$$), $JSCompiler_inline_result$jscomp$1015_bindings$jscomp$225_c__5501__auto__$$, 
                          $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$beta_bindings$jscomp$1_size__5502__auto__$$], 0))), $clara$rules$engine$iter__49422_$_iter__49424$$($APP.cljs.core.rest($s__49425__$1_s__49425__$2_temp__5825__auto____$1$$)));
                        }
                        $s__49425__$1_s__49425__$2_temp__5825__auto____$1$$ = $APP.cljs.core.rest($s__49425__$1_s__49425__$2_temp__5825__auto____$1$$);
                      } else {
                        return null;
                      }
                    }
                  };
                }($s__49423__$1$$, $token$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $node__$1$$), null, null);
              };
            }($s__49423__$1$$, $token$$, $xs__6385__auto__$$, $fs__5500__auto__$jscomp$52_iterys__5499__auto__$jscomp$52_temp__5825__auto__$$, $node__$1$$);
            if ($fs__5500__auto__$jscomp$52_iterys__5499__auto__$jscomp$52_temp__5825__auto__$$ = $APP.cljs.core.seq($fs__5500__auto__$jscomp$52_iterys__5499__auto__$jscomp$52_temp__5825__auto__$$($elements$$))) {
              return $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($fs__5500__auto__$jscomp$52_iterys__5499__auto__$jscomp$52_temp__5825__auto__$$, $clara$rules$engine$iter__49422$$($APP.cljs.core.rest($s__49423__$1$$)));
            }
            $s__49423__$1$$ = $APP.cljs.core.rest($s__49423__$1$$);
          } else {
            return null;
          }
        }
      }, null, null);
    }(clara.rules.memory.get_tokens($memory$$, $node__$1$$, $join_bindings$$));
  }()));
};
clara.rules.engine.ExpressionJoinNode.prototype.clara$rules$engine$IRightActivate$right_retract$arity$6 = function($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$) {
  var $self__$$ = this, $node__$1$$ = this;
  clara.rules.listener.right_retract_BANG_($listener$$, $node__$1$$, $elements$$);
  return clara.rules.engine.retract_tokens($transport$$, $memory$$, $listener$$, $self__$$.children, $APP.cljs.core.doall.cljs$core$IFn$_invoke$arity$1(function() {
    return function $clara$rules$engine$iter__49435$$($s__49436$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (var $s__49436__$1$$ = $s__49436$$;;) {
          var $fs__5500__auto__$jscomp$53_iterys__5499__auto__$jscomp$53_temp__5825__auto__$$ = $APP.cljs.core.seq($s__49436__$1$$);
          if ($fs__5500__auto__$jscomp$53_iterys__5499__auto__$jscomp$53_temp__5825__auto__$$) {
            var $xs__6385__auto__$$ = $fs__5500__auto__$jscomp$53_iterys__5499__auto__$jscomp$53_temp__5825__auto__$$, $map__49442$$ = $APP.cljs.core.first($xs__6385__auto__$$), $map__49442__$1$$ = $APP.cljs.core.__destructure_map($map__49442$$), $element$$ = $map__49442__$1$$, $fact$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__49442__$1$$, cljs$cst$3109$fact), $bindings$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__49442__$1$$, $APP.cljs$cst$394$bindings);
            $fs__5500__auto__$jscomp$53_iterys__5499__auto__$jscomp$53_temp__5825__auto__$$ = function($s__49436__$1$$, $map__49442$$, $map__49442__$1$$, $element$$, $fact$$, $bindings$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $node__$1$$) {
              return function $clara$rules$engine$iter__49435_$_iter__49437$$($s__49438$$) {
                return new $APP.cljs.core.LazySeq(null, function($s__49436__$1$$, $map__49442$$, $map__49442__$1$$, $element$$, $fact$$, $bindings$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $node__$1$$) {
                  return function() {
                    for (var $s__49438__$1_s__49438__$2_temp__5825__auto____$1$$ = $s__49438$$;;) {
                      if ($s__49438__$1_s__49438__$2_temp__5825__auto____$1$$ = $APP.cljs.core.seq($s__49438__$1_s__49438__$2_temp__5825__auto____$1$$)) {
                        if ($APP.cljs.core.chunked_seq_QMARK_($s__49438__$1_s__49438__$2_temp__5825__auto____$1$$)) {
                          var $JSCompiler_inline_result$jscomp$1016_beta_bindings$jscomp$3_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__49438__$1_s__49438__$2_temp__5825__auto____$1$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1016_beta_bindings$jscomp$3_c__5501__auto__$$), $b__49440_token$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
                          a: {
                            for (var $i__49439$$ = 0;;) {
                              if ($i__49439$$ < $size__5502__auto__$$) {
                                var $token$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1016_beta_bindings$jscomp$3_c__5501__auto__$$, $i__49439$$), $beta_bindings$$ = clara.rules.engine.join_node_matches($node__$1$$, $self__$$.join_filter_fn, $token$$, $fact$$, $bindings$$, $APP.cljs.core.PersistentArrayMap.EMPTY);
                                $APP.cljs.core.truth_($beta_bindings$$) && $APP.cljs.core.chunk_append($b__49440_token$$, clara.rules.engine.__GT_Token($APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2(cljs$cst$3107$matches.cljs$core$IFn$_invoke$arity$1($token$$), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$fact$$, $self__$$.id], null)), $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$variadic($APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($token$$), 
                                $bindings$$, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$beta_bindings$$], 0))));
                                $i__49439$$ += 1;
                              } else {
                                $JSCompiler_inline_result$jscomp$1016_beta_bindings$jscomp$3_c__5501__auto__$$ = !0;
                                break a;
                              }
                            }
                            $JSCompiler_inline_result$jscomp$1016_beta_bindings$jscomp$3_c__5501__auto__$$ = void 0;
                          }
                          return $JSCompiler_inline_result$jscomp$1016_beta_bindings$jscomp$3_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49440_token$$), $clara$rules$engine$iter__49435_$_iter__49437$$($APP.cljs.core.chunk_rest($s__49438__$1_s__49438__$2_temp__5825__auto____$1$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49440_token$$), null);
                        }
                        $b__49440_token$$ = $APP.cljs.core.first($s__49438__$1_s__49438__$2_temp__5825__auto____$1$$);
                        $JSCompiler_inline_result$jscomp$1016_beta_bindings$jscomp$3_c__5501__auto__$$ = clara.rules.engine.join_node_matches($node__$1$$, $self__$$.join_filter_fn, $b__49440_token$$, $fact$$, $bindings$$, $APP.cljs.core.PersistentArrayMap.EMPTY);
                        if ($APP.cljs.core.truth_($JSCompiler_inline_result$jscomp$1016_beta_bindings$jscomp$3_c__5501__auto__$$)) {
                          return $APP.cljs.core.cons(clara.rules.engine.__GT_Token($APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2(cljs$cst$3107$matches.cljs$core$IFn$_invoke$arity$1($b__49440_token$$), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$fact$$, $self__$$.id], null)), $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$variadic($APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($b__49440_token$$), $bindings$$, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$JSCompiler_inline_result$jscomp$1016_beta_bindings$jscomp$3_c__5501__auto__$$], 
                          0))), $clara$rules$engine$iter__49435_$_iter__49437$$($APP.cljs.core.rest($s__49438__$1_s__49438__$2_temp__5825__auto____$1$$)));
                        }
                        $s__49438__$1_s__49438__$2_temp__5825__auto____$1$$ = $APP.cljs.core.rest($s__49438__$1_s__49438__$2_temp__5825__auto____$1$$);
                      } else {
                        return null;
                      }
                    }
                  };
                }($s__49436__$1$$, $map__49442$$, $map__49442__$1$$, $element$$, $fact$$, $bindings$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $node__$1$$), null, null);
              };
            }($s__49436__$1$$, $map__49442$$, $map__49442__$1$$, $element$$, $fact$$, $bindings$$, $xs__6385__auto__$$, $fs__5500__auto__$jscomp$53_iterys__5499__auto__$jscomp$53_temp__5825__auto__$$, $node__$1$$);
            if ($fs__5500__auto__$jscomp$53_iterys__5499__auto__$jscomp$53_temp__5825__auto__$$ = $APP.cljs.core.seq($fs__5500__auto__$jscomp$53_iterys__5499__auto__$jscomp$53_temp__5825__auto__$$(clara.rules.memory.get_tokens($memory$$, $node__$1$$, $join_bindings$$)))) {
              return $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($fs__5500__auto__$jscomp$53_iterys__5499__auto__$jscomp$53_temp__5825__auto__$$, $clara$rules$engine$iter__49435$$($APP.cljs.core.rest($s__49436__$1$$)));
            }
            $s__49436__$1$$ = $APP.cljs.core.rest($s__49436__$1$$);
          } else {
            return null;
          }
        }
      }, null, null);
    }(clara.rules.memory.remove_elements_BANG_($memory$$, $node__$1$$, $join_bindings$$, $elements$$));
  }()));
};
clara.rules.engine.ExpressionJoinNode.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__49448_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__49448_v__5348__auto__$$, 0, null);
    $p__49448_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__49448_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__49448_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__49448_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
clara.rules.engine.ExpressionJoinNode.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#clara.rules.engine.ExpressionJoinNode{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id, this.id], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3141$condition, this.condition], null), 
  new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3146$join_filter_fn, this.join_filter_fn], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$3116$children, this.children], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3142$binding_keys, this.binding_keys], null)], null), this.__extmap));
};
clara.rules.engine.ExpressionJoinNode.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__49411$$) {
  return new $APP.cljs.core.RecordIter(0, this, 5, new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id, cljs$cst$3141$condition, cljs$cst$3146$join_filter_fn, $APP.cljs$cst$3116$children, cljs$cst$3142$binding_keys], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
clara.rules.engine.ExpressionJoinNode.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
clara.rules.engine.ExpressionJoinNode.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new clara.rules.engine.ExpressionJoinNode(this.id, this.condition, this.join_filter_fn, this.children, this.binding_keys, this.__meta, this.__extmap, this.__hash);
};
clara.rules.engine.ExpressionJoinNode.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 5 + $APP.cljs.core.count(this.__extmap);
};
clara.rules.engine.ExpressionJoinNode.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$103_h__5134__auto____$1$jscomp$103_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$103_h__5134__auto____$1$jscomp$103_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$103_h__5134__auto____$1$jscomp$103_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$103_h__5134__auto____$1$jscomp$103_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$103_h__5134__auto____$1$jscomp$103_this__5319__auto__$$ = 1597975459 ^ $APP.cljs.core.hash_unordered_coll(this);
};
clara.rules.engine.ExpressionJoinNode.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this49413$$, $other49414$$) {
  return $other49414$$ != null && this.constructor === $other49414$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.id, $other49414$$.id) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.condition, $other49414$$.condition) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.join_filter_fn, $other49414$$.join_filter_fn) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.children, $other49414$$.children) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.binding_keys, 
  $other49414$$.binding_keys) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other49414$$.__extmap);
};
clara.rules.engine.ExpressionJoinNode.prototype.clara$rules$engine$IConditionNode$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.ExpressionJoinNode.prototype.clara$rules$engine$IConditionNode$get_condition_description$arity$1 = function($this$$jscomp$846_type$$) {
  var $map__49461__$1_original_constraints$$ = $APP.cljs.core.__destructure_map(this.condition);
  $this$$jscomp$846_type$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__49461__$1_original_constraints$$, $APP.cljs$cst$139$type);
  var $constraints$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__49461__$1_original_constraints$$, cljs$cst$3143$constraints);
  $map__49461__$1_original_constraints$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__49461__$1_original_constraints$$, cljs$cst$3147$original_constraints);
  $constraints$$ = $APP.cljs.core.seq($map__49461__$1_original_constraints$$) ? $map__49461__$1_original_constraints$$ : $constraints$$;
  return $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$this$$jscomp$846_type$$], null), $constraints$$);
};
clara.rules.engine.ExpressionJoinNode.prototype.clara$rules$engine$ILeftActivate$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.ExpressionJoinNode.prototype.clara$rules$engine$ILeftActivate$left_activate$arity$6 = function($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) {
  var $self__$$ = this, $node__$1$$ = this;
  clara.rules.memory.add_tokens_BANG_($memory$$, $node__$1$$, $join_bindings$$, $tokens$$);
  clara.rules.listener.left_activate_BANG_($listener$$, $node__$1$$, $tokens$$);
  return clara.rules.engine.send_tokens($transport$$, $memory$$, $listener$$, $self__$$.children, $APP.cljs.core.doall.cljs$core$IFn$_invoke$arity$1(function() {
    return function $clara$rules$engine$iter__49462$$($s__49463$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (var $s__49463__$1$$ = $s__49463$$;;) {
          var $fs__5500__auto__$jscomp$54_iterys__5499__auto__$jscomp$54_temp__5825__auto__$$ = $APP.cljs.core.seq($s__49463__$1$$);
          if ($fs__5500__auto__$jscomp$54_iterys__5499__auto__$jscomp$54_temp__5825__auto__$$) {
            var $xs__6385__auto__$$ = $fs__5500__auto__$jscomp$54_iterys__5499__auto__$jscomp$54_temp__5825__auto__$$, $element$$ = $APP.cljs.core.first($xs__6385__auto__$$);
            $fs__5500__auto__$jscomp$54_iterys__5499__auto__$jscomp$54_temp__5825__auto__$$ = function($s__49463__$1$$, $element$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $node__$1$$) {
              return function $clara$rules$engine$iter__49462_$_iter__49464$$($s__49465$$) {
                return new $APP.cljs.core.LazySeq(null, function($s__49463__$1$$, $element$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $node__$1$$) {
                  return function() {
                    for (var $s__49465__$1_s__49465__$2_temp__5825__auto____$1$$ = $s__49465$$;;) {
                      if ($s__49465__$1_s__49465__$2_temp__5825__auto____$1$$ = $APP.cljs.core.seq($s__49465__$1_s__49465__$2_temp__5825__auto____$1$$)) {
                        if ($APP.cljs.core.chunked_seq_QMARK_($s__49465__$1_s__49465__$2_temp__5825__auto____$1$$)) {
                          var $JSCompiler_inline_result$jscomp$1017_c__5501__auto__$jscomp$105_fact$$ = $APP.cljs.core.chunk_first($s__49465__$1_s__49465__$2_temp__5825__auto____$1$$), $fact_binding$jscomp$6_size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1017_c__5501__auto__$jscomp$105_fact$$), $b__49467_token$$ = $APP.cljs.core.chunk_buffer($fact_binding$jscomp$6_size__5502__auto__$$);
                          a: {
                            for (var $beta_bindings$jscomp$5_i__49466$$ = 0;;) {
                              if ($beta_bindings$jscomp$5_i__49466$$ < $fact_binding$jscomp$6_size__5502__auto__$$) {
                                var $token$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1017_c__5501__auto__$jscomp$105_fact$$, $beta_bindings$jscomp$5_i__49466$$), $fact$$ = cljs$cst$3109$fact.cljs$core$IFn$_invoke$arity$1($element$$), $fact_binding$$ = $APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($element$$), $beta_bindings$$ = clara.rules.engine.join_node_matches($node__$1$$, $self__$$.join_filter_fn, $token$$, $fact$$, $fact_binding$$, $APP.cljs.core.PersistentArrayMap.EMPTY);
                                $APP.cljs.core.truth_($beta_bindings$$) && $APP.cljs.core.chunk_append($b__49467_token$$, clara.rules.engine.__GT_Token($APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2(cljs$cst$3107$matches.cljs$core$IFn$_invoke$arity$1($token$$), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$fact$$, $self__$$.id], null)), $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$variadic($fact_binding$$, $APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($token$$), 
                                $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$beta_bindings$$], 0))));
                                $beta_bindings$jscomp$5_i__49466$$ += 1;
                              } else {
                                $JSCompiler_inline_result$jscomp$1017_c__5501__auto__$jscomp$105_fact$$ = !0;
                                break a;
                              }
                            }
                            $JSCompiler_inline_result$jscomp$1017_c__5501__auto__$jscomp$105_fact$$ = void 0;
                          }
                          return $JSCompiler_inline_result$jscomp$1017_c__5501__auto__$jscomp$105_fact$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49467_token$$), $clara$rules$engine$iter__49462_$_iter__49464$$($APP.cljs.core.chunk_rest($s__49465__$1_s__49465__$2_temp__5825__auto____$1$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49467_token$$), null);
                        }
                        $b__49467_token$$ = $APP.cljs.core.first($s__49465__$1_s__49465__$2_temp__5825__auto____$1$$);
                        $JSCompiler_inline_result$jscomp$1017_c__5501__auto__$jscomp$105_fact$$ = cljs$cst$3109$fact.cljs$core$IFn$_invoke$arity$1($element$$);
                        $fact_binding$jscomp$6_size__5502__auto__$$ = $APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($element$$);
                        $beta_bindings$jscomp$5_i__49466$$ = clara.rules.engine.join_node_matches($node__$1$$, $self__$$.join_filter_fn, $b__49467_token$$, $JSCompiler_inline_result$jscomp$1017_c__5501__auto__$jscomp$105_fact$$, $fact_binding$jscomp$6_size__5502__auto__$$, $APP.cljs.core.PersistentArrayMap.EMPTY);
                        if ($APP.cljs.core.truth_($beta_bindings$jscomp$5_i__49466$$)) {
                          return $APP.cljs.core.cons(clara.rules.engine.__GT_Token($APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2(cljs$cst$3107$matches.cljs$core$IFn$_invoke$arity$1($b__49467_token$$), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$JSCompiler_inline_result$jscomp$1017_c__5501__auto__$jscomp$105_fact$$, $self__$$.id], null)), $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$variadic($fact_binding$jscomp$6_size__5502__auto__$$, $APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($b__49467_token$$), 
                          $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$beta_bindings$jscomp$5_i__49466$$], 0))), $clara$rules$engine$iter__49462_$_iter__49464$$($APP.cljs.core.rest($s__49465__$1_s__49465__$2_temp__5825__auto____$1$$)));
                        }
                        $s__49465__$1_s__49465__$2_temp__5825__auto____$1$$ = $APP.cljs.core.rest($s__49465__$1_s__49465__$2_temp__5825__auto____$1$$);
                      } else {
                        return null;
                      }
                    }
                  };
                }($s__49463__$1$$, $element$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $node__$1$$), null, null);
              };
            }($s__49463__$1$$, $element$$, $xs__6385__auto__$$, $fs__5500__auto__$jscomp$54_iterys__5499__auto__$jscomp$54_temp__5825__auto__$$, $node__$1$$);
            if ($fs__5500__auto__$jscomp$54_iterys__5499__auto__$jscomp$54_temp__5825__auto__$$ = $APP.cljs.core.seq($fs__5500__auto__$jscomp$54_iterys__5499__auto__$jscomp$54_temp__5825__auto__$$($tokens$$))) {
              return $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($fs__5500__auto__$jscomp$54_iterys__5499__auto__$jscomp$54_temp__5825__auto__$$, $clara$rules$engine$iter__49462$$($APP.cljs.core.rest($s__49463__$1$$)));
            }
            $s__49463__$1$$ = $APP.cljs.core.rest($s__49463__$1$$);
          } else {
            return null;
          }
        }
      }, null, null);
    }(clara.rules.memory.get_elements($memory$$, $node__$1$$, $join_bindings$$));
  }()));
};
clara.rules.engine.ExpressionJoinNode.prototype.clara$rules$engine$ILeftActivate$left_retract$arity$6 = function($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) {
  var $self__$$ = this, $node__$1$$ = this;
  clara.rules.listener.left_retract_BANG_($listener$$, $node__$1$$, $tokens$$);
  return clara.rules.engine.retract_tokens($transport$$, $memory$$, $listener$$, $self__$$.children, $APP.cljs.core.doall.cljs$core$IFn$_invoke$arity$1(function() {
    return function $clara$rules$engine$iter__49479$$($s__49480$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (var $s__49480__$1$$ = $s__49480$$;;) {
          var $fs__5500__auto__$jscomp$55_iterys__5499__auto__$jscomp$55_temp__5825__auto__$$ = $APP.cljs.core.seq($s__49480__$1$$);
          if ($fs__5500__auto__$jscomp$55_iterys__5499__auto__$jscomp$55_temp__5825__auto__$$) {
            var $xs__6385__auto__$$ = $fs__5500__auto__$jscomp$55_iterys__5499__auto__$jscomp$55_temp__5825__auto__$$, $token$$ = $APP.cljs.core.first($xs__6385__auto__$$);
            $fs__5500__auto__$jscomp$55_iterys__5499__auto__$jscomp$55_temp__5825__auto__$$ = function($s__49480__$1$$, $token$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $node__$1$$) {
              return function $clara$rules$engine$iter__49479_$_iter__49481$$($s__49482$$) {
                return new $APP.cljs.core.LazySeq(null, function($s__49480__$1$$, $token$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $node__$1$$) {
                  return function() {
                    for (var $s__49482__$1_s__49482__$2_temp__5825__auto____$1$$ = $s__49482$$;;) {
                      if ($s__49482__$1_s__49482__$2_temp__5825__auto____$1$$ = $APP.cljs.core.seq($s__49482__$1_s__49482__$2_temp__5825__auto____$1$$)) {
                        if ($APP.cljs.core.chunked_seq_QMARK_($s__49482__$1_s__49482__$2_temp__5825__auto____$1$$)) {
                          var $JSCompiler_inline_result$jscomp$1018_c__5501__auto__$jscomp$106_element$jscomp$69_fact_bindings$$ = $APP.cljs.core.chunk_first($s__49482__$1_s__49482__$2_temp__5825__auto____$1$$), $beta_bindings$jscomp$7_size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1018_c__5501__auto__$jscomp$106_element$jscomp$69_fact_bindings$$), $b__49484_fact$$ = $APP.cljs.core.chunk_buffer($beta_bindings$jscomp$7_size__5502__auto__$$);
                          a: {
                            for (var $i__49483$$ = 0;;) {
                              if ($i__49483$$ < $beta_bindings$jscomp$7_size__5502__auto__$$) {
                                var $element$jscomp$inline_5425_fact_bindings$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1018_c__5501__auto__$jscomp$106_element$jscomp$69_fact_bindings$$, $i__49483$$), $fact$$ = cljs$cst$3109$fact.cljs$core$IFn$_invoke$arity$1($element$jscomp$inline_5425_fact_bindings$$);
                                $element$jscomp$inline_5425_fact_bindings$$ = $APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($element$jscomp$inline_5425_fact_bindings$$);
                                var $beta_bindings$$ = clara.rules.engine.join_node_matches($node__$1$$, $self__$$.join_filter_fn, $token$$, $fact$$, $element$jscomp$inline_5425_fact_bindings$$, $APP.cljs.core.PersistentArrayMap.EMPTY);
                                $APP.cljs.core.truth_($beta_bindings$$) && $APP.cljs.core.chunk_append($b__49484_fact$$, clara.rules.engine.__GT_Token($APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2(cljs$cst$3107$matches.cljs$core$IFn$_invoke$arity$1($token$$), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$fact$$, $self__$$.id], null)), $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$variadic($element$jscomp$inline_5425_fact_bindings$$, $APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($token$$), 
                                $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$beta_bindings$$], 0))));
                                $i__49483$$ += 1;
                              } else {
                                $JSCompiler_inline_result$jscomp$1018_c__5501__auto__$jscomp$106_element$jscomp$69_fact_bindings$$ = !0;
                                break a;
                              }
                            }
                            $JSCompiler_inline_result$jscomp$1018_c__5501__auto__$jscomp$106_element$jscomp$69_fact_bindings$$ = void 0;
                          }
                          return $JSCompiler_inline_result$jscomp$1018_c__5501__auto__$jscomp$106_element$jscomp$69_fact_bindings$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49484_fact$$), $clara$rules$engine$iter__49479_$_iter__49481$$($APP.cljs.core.chunk_rest($s__49482__$1_s__49482__$2_temp__5825__auto____$1$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49484_fact$$), null);
                        }
                        $JSCompiler_inline_result$jscomp$1018_c__5501__auto__$jscomp$106_element$jscomp$69_fact_bindings$$ = $APP.cljs.core.first($s__49482__$1_s__49482__$2_temp__5825__auto____$1$$);
                        $b__49484_fact$$ = cljs$cst$3109$fact.cljs$core$IFn$_invoke$arity$1($JSCompiler_inline_result$jscomp$1018_c__5501__auto__$jscomp$106_element$jscomp$69_fact_bindings$$);
                        $JSCompiler_inline_result$jscomp$1018_c__5501__auto__$jscomp$106_element$jscomp$69_fact_bindings$$ = $APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($JSCompiler_inline_result$jscomp$1018_c__5501__auto__$jscomp$106_element$jscomp$69_fact_bindings$$);
                        $beta_bindings$jscomp$7_size__5502__auto__$$ = clara.rules.engine.join_node_matches($node__$1$$, $self__$$.join_filter_fn, $token$$, $b__49484_fact$$, $JSCompiler_inline_result$jscomp$1018_c__5501__auto__$jscomp$106_element$jscomp$69_fact_bindings$$, $APP.cljs.core.PersistentArrayMap.EMPTY);
                        if ($APP.cljs.core.truth_($beta_bindings$jscomp$7_size__5502__auto__$$)) {
                          return $APP.cljs.core.cons(clara.rules.engine.__GT_Token($APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2(cljs$cst$3107$matches.cljs$core$IFn$_invoke$arity$1($token$$), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$b__49484_fact$$, $self__$$.id], null)), $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$variadic($JSCompiler_inline_result$jscomp$1018_c__5501__auto__$jscomp$106_element$jscomp$69_fact_bindings$$, $APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($token$$), 
                          $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$beta_bindings$jscomp$7_size__5502__auto__$$], 0))), $clara$rules$engine$iter__49479_$_iter__49481$$($APP.cljs.core.rest($s__49482__$1_s__49482__$2_temp__5825__auto____$1$$)));
                        }
                        $s__49482__$1_s__49482__$2_temp__5825__auto____$1$$ = $APP.cljs.core.rest($s__49482__$1_s__49482__$2_temp__5825__auto____$1$$);
                      } else {
                        return null;
                      }
                    }
                  };
                }($s__49480__$1$$, $token$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $node__$1$$), null, null);
              };
            }($s__49480__$1$$, $token$$, $xs__6385__auto__$$, $fs__5500__auto__$jscomp$55_iterys__5499__auto__$jscomp$55_temp__5825__auto__$$, $node__$1$$);
            if ($fs__5500__auto__$jscomp$55_iterys__5499__auto__$jscomp$55_temp__5825__auto__$$ = $APP.cljs.core.seq($fs__5500__auto__$jscomp$55_iterys__5499__auto__$jscomp$55_temp__5825__auto__$$(clara.rules.memory.get_elements($memory$$, $node__$1$$, $join_bindings$$)))) {
              return $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($fs__5500__auto__$jscomp$55_iterys__5499__auto__$jscomp$55_temp__5825__auto__$$, $clara$rules$engine$iter__49479$$($APP.cljs.core.rest($s__49480__$1$$)));
            }
            $s__49480__$1$$ = $APP.cljs.core.rest($s__49480__$1$$);
          } else {
            return null;
          }
        }
      }, null, null);
    }(clara.rules.memory.remove_tokens_BANG_($memory$$, $node__$1$$, $join_bindings$$, $tokens$$));
  }()));
};
clara.rules.engine.ExpressionJoinNode.prototype.clara$rules$engine$ILeftActivate$get_join_keys$arity$1 = function($node$$) {
  return this.binding_keys;
};
clara.rules.engine.ExpressionJoinNode.prototype.clara$rules$engine$ILeftActivate$description$arity$1 = function($node$$) {
  return ["JoinNode -- ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($APP.cljs$cst$1999$text.cljs$core$IFn$_invoke$arity$1(this.condition))].join("");
};
clara.rules.engine.ExpressionJoinNode.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 5, [$APP.cljs$cst$3116$children, null, cljs$cst$3146$join_filter_fn, null, $APP.cljs$cst$396$id, null, cljs$cst$3141$condition, null, cljs$cst$3142$binding_keys, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, 
  this), this.__meta), $k__5334__auto__$$) : new clara.rules.engine.ExpressionJoinNode(this.id, this.condition, this.join_filter_fn, this.children, this.binding_keys, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
clara.rules.engine.ExpressionJoinNode.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k49412$$) {
  switch($k49412$$ instanceof $APP.cljs.core.Keyword ? $k49412$$.fqn : null) {
    case "id":
    case "condition":
    case "join-filter-fn":
    case "children":
    case "binding-keys":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k49412$$);
  }
};
clara.rules.engine.ExpressionJoinNode.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__49494_this__5331__auto__$$, $k__5332__auto__$$, $G__49411$$) {
  $pred__49494_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__49494_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49494_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$396$id, $k__5332__auto__$$) : $pred__49494_this__5331__auto__$$.call(null, $APP.cljs$cst$396$id, $k__5332__auto__$$)) ? new clara.rules.engine.ExpressionJoinNode($G__49411$$, this.condition, this.join_filter_fn, this.children, this.binding_keys, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49494_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? 
  $pred__49494_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3141$condition, $k__5332__auto__$$) : $pred__49494_this__5331__auto__$$.call(null, cljs$cst$3141$condition, $k__5332__auto__$$)) ? new clara.rules.engine.ExpressionJoinNode(this.id, $G__49411$$, this.join_filter_fn, this.children, this.binding_keys, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49494_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49494_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3146$join_filter_fn, 
  $k__5332__auto__$$) : $pred__49494_this__5331__auto__$$.call(null, cljs$cst$3146$join_filter_fn, $k__5332__auto__$$)) ? new clara.rules.engine.ExpressionJoinNode(this.id, this.condition, $G__49411$$, this.children, this.binding_keys, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49494_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49494_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$3116$children, $k__5332__auto__$$) : $pred__49494_this__5331__auto__$$.call(null, 
  $APP.cljs$cst$3116$children, $k__5332__auto__$$)) ? new clara.rules.engine.ExpressionJoinNode(this.id, this.condition, this.join_filter_fn, $G__49411$$, this.binding_keys, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49494_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49494_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3142$binding_keys, $k__5332__auto__$$) : $pred__49494_this__5331__auto__$$.call(null, cljs$cst$3142$binding_keys, $k__5332__auto__$$)) ? 
  new clara.rules.engine.ExpressionJoinNode(this.id, this.condition, this.join_filter_fn, this.children, $G__49411$$, this.__meta, this.__extmap, null) : new clara.rules.engine.ExpressionJoinNode(this.id, this.condition, this.join_filter_fn, this.children, this.binding_keys, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__49411$$), null);
};
clara.rules.engine.ExpressionJoinNode.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$396$id, this.id, null), new $APP.cljs.core.MapEntry(cljs$cst$3141$condition, this.condition, null), new $APP.cljs.core.MapEntry(cljs$cst$3146$join_filter_fn, this.join_filter_fn, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$3116$children, this.children, null), new $APP.cljs.core.MapEntry(cljs$cst$3142$binding_keys, 
  this.binding_keys, null)], null), this.__extmap));
};
clara.rules.engine.ExpressionJoinNode.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__49411$$) {
  return new clara.rules.engine.ExpressionJoinNode(this.id, this.condition, this.join_filter_fn, this.children, this.binding_keys, $G__49411$$, this.__extmap, this.__hash);
};
clara.rules.engine.ExpressionJoinNode.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
clara.rules.engine.ExpressionJoinNode.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1850$id, cljs$cst$3144$condition, cljs$cst$3148$join_filter_fn, $APP.cljs$cst$3091$children, cljs$cst$3145$binding_keys], null);
};
clara.rules.engine.ExpressionJoinNode.cljs$lang$type = !0;
clara.rules.engine.ExpressionJoinNode.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "clara.rules.engine/ExpressionJoinNode", null, 1, null);
};
clara.rules.engine.ExpressionJoinNode.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "clara.rules.engine/ExpressionJoinNode");
};
clara.rules.engine.__GT_ExpressionJoinNode = function($id$$, $condition$$, $join_filter_fn$$, $children$$, $binding_keys$$) {
  return new clara.rules.engine.ExpressionJoinNode($id$$, $condition$$, $join_filter_fn$$, $children$$, $binding_keys$$, null, null, null);
};
clara.rules.engine.map__GT_ExpressionJoinNode = function($G__49416$$) {
  var $G__49503$jscomp$inline_5432_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__49416$$, $APP.cljs$cst$396$id, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$3141$condition, cljs$cst$3146$join_filter_fn, $APP.cljs$cst$3116$children, cljs$cst$3142$binding_keys], 0));
  $G__49503$jscomp$inline_5432_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__49416$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__49503$jscomp$inline_5432_extmap__5365__auto__$$) : $G__49503$jscomp$inline_5432_extmap__5365__auto__$$;
  return new clara.rules.engine.ExpressionJoinNode($APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($G__49416$$), cljs$cst$3141$condition.cljs$core$IFn$_invoke$arity$1($G__49416$$), cljs$cst$3146$join_filter_fn.cljs$core$IFn$_invoke$arity$1($G__49416$$), $APP.cljs$cst$3116$children.cljs$core$IFn$_invoke$arity$1($G__49416$$), cljs$cst$3142$binding_keys.cljs$core$IFn$_invoke$arity$1($G__49416$$), null, $APP.cljs.core.not_empty($G__49503$jscomp$inline_5432_extmap__5365__auto__$$), null);
};
clara.rules.engine.NegationNode = function($id$$, $condition$$, $children$$, $binding_keys$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.id = $id$$;
  this.condition = $condition$$;
  this.children = $children$$;
  this.binding_keys = $binding_keys$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
clara.rules.engine.NegationNode.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
clara.rules.engine.NegationNode.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k49506$$, $else__5326__auto__$$) {
  switch($k49506$$ instanceof $APP.cljs.core.Keyword ? $k49506$$.fqn : null) {
    case "id":
      return this.id;
    case "condition":
      return this.condition;
    case "children":
      return this.children;
    case "binding-keys":
      return this.binding_keys;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k49506$$, $else__5326__auto__$$);
  }
};
clara.rules.engine.NegationNode.prototype.clara$rules$engine$IRightActivate$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.NegationNode.prototype.clara$rules$engine$IRightActivate$right_activate$arity$6 = function($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$) {
  $node$$ = $APP.cljs.core.empty_QMARK_(clara.rules.memory.get_elements($memory$$, this, $join_bindings$$));
  clara.rules.listener.right_activate_BANG_($listener$$, this, $elements$$);
  clara.rules.memory.add_elements_BANG_($memory$$, this, $join_bindings$$, $elements$$);
  return $node$$ ? clara.rules.engine.retract_tokens($transport$$, $memory$$, $listener$$, this.children, clara.rules.memory.get_tokens($memory$$, this, $join_bindings$$)) : null;
};
clara.rules.engine.NegationNode.prototype.clara$rules$engine$IRightActivate$right_retract$arity$6 = function($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$) {
  clara.rules.listener.right_retract_BANG_($listener$$, this, $elements$$);
  clara.rules.memory.remove_elements_BANG_($memory$$, this, $join_bindings$$, $elements$$);
  return $APP.cljs.core.empty_QMARK_(clara.rules.memory.get_elements($memory$$, this, $join_bindings$$)) ? clara.rules.engine.send_tokens($transport$$, $memory$$, $listener$$, this.children, clara.rules.memory.get_tokens($memory$$, this, $join_bindings$$)) : null;
};
clara.rules.engine.NegationNode.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__49515_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__49515_v__5348__auto__$$, 0, null);
    $p__49515_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__49515_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__49515_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__49515_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
clara.rules.engine.NegationNode.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#clara.rules.engine.NegationNode{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id, this.id], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3141$condition, this.condition], null), new $APP.cljs.core.PersistentVector(null, 
  2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$3116$children, this.children], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3142$binding_keys, this.binding_keys], null)], null), this.__extmap));
};
clara.rules.engine.NegationNode.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__49505$$) {
  return new $APP.cljs.core.RecordIter(0, this, 4, new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id, cljs$cst$3141$condition, $APP.cljs$cst$3116$children, cljs$cst$3142$binding_keys], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
clara.rules.engine.NegationNode.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
clara.rules.engine.NegationNode.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new clara.rules.engine.NegationNode(this.id, this.condition, this.children, this.binding_keys, this.__meta, this.__extmap, this.__hash);
};
clara.rules.engine.NegationNode.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 4 + $APP.cljs.core.count(this.__extmap);
};
clara.rules.engine.NegationNode.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$104_h__5134__auto____$1$jscomp$104_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$104_h__5134__auto____$1$jscomp$104_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$104_h__5134__auto____$1$jscomp$104_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$104_h__5134__auto____$1$jscomp$104_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$104_h__5134__auto____$1$jscomp$104_this__5319__auto__$$ = 1548078984 ^ $APP.cljs.core.hash_unordered_coll(this);
};
clara.rules.engine.NegationNode.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this49507$$, $other49508$$) {
  return $other49508$$ != null && this.constructor === $other49508$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.id, $other49508$$.id) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.condition, $other49508$$.condition) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.children, $other49508$$.children) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.binding_keys, $other49508$$.binding_keys) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, 
  $other49508$$.__extmap);
};
clara.rules.engine.NegationNode.prototype.clara$rules$engine$IConditionNode$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.NegationNode.prototype.clara$rules$engine$IConditionNode$get_condition_description$arity$1 = function($this$$jscomp$847_type$$) {
  var $constraints$$ = $APP.cljs.core.__destructure_map(this.condition);
  $this$$jscomp$847_type$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($constraints$$, $APP.cljs$cst$139$type);
  $constraints$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($constraints$$, cljs$cst$3143$constraints);
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2341$not, $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$this$$jscomp$847_type$$], null), $constraints$$)], null);
};
clara.rules.engine.NegationNode.prototype.clara$rules$engine$ILeftActivate$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.NegationNode.prototype.clara$rules$engine$ILeftActivate$left_activate$arity$6 = function($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) {
  clara.rules.listener.left_activate_BANG_($listener$$, this, $tokens$$);
  clara.rules.memory.add_tokens_BANG_($memory$$, this, $join_bindings$$, $tokens$$);
  return $APP.cljs.core.empty_QMARK_(clara.rules.memory.get_elements($memory$$, this, $join_bindings$$)) ? clara.rules.engine.send_tokens($transport$$, $memory$$, $listener$$, this.children, $tokens$$) : null;
};
clara.rules.engine.NegationNode.prototype.clara$rules$engine$ILeftActivate$left_retract$arity$6 = function($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) {
  clara.rules.listener.left_retract_BANG_($listener$$, this, $tokens$$);
  clara.rules.memory.remove_tokens_BANG_($memory$$, this, $join_bindings$$, $tokens$$);
  return $APP.cljs.core.empty_QMARK_(clara.rules.memory.get_elements($memory$$, this, $join_bindings$$)) ? clara.rules.engine.retract_tokens($transport$$, $memory$$, $listener$$, this.children, $tokens$$) : null;
};
clara.rules.engine.NegationNode.prototype.clara$rules$engine$ILeftActivate$get_join_keys$arity$1 = function($node$$) {
  return this.binding_keys;
};
clara.rules.engine.NegationNode.prototype.clara$rules$engine$ILeftActivate$description$arity$1 = function($node$$) {
  return ["NegationNode -- ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($APP.cljs$cst$1999$text.cljs$core$IFn$_invoke$arity$1(this.condition))].join("");
};
clara.rules.engine.NegationNode.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$3116$children, null, $APP.cljs$cst$396$id, null, cljs$cst$3141$condition, null, cljs$cst$3142$binding_keys, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : 
  new clara.rules.engine.NegationNode(this.id, this.condition, this.children, this.binding_keys, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
clara.rules.engine.NegationNode.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k49506$$) {
  switch($k49506$$ instanceof $APP.cljs.core.Keyword ? $k49506$$.fqn : null) {
    case "id":
    case "condition":
    case "children":
    case "binding-keys":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k49506$$);
  }
};
clara.rules.engine.NegationNode.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__49523_this__5331__auto__$$, $k__5332__auto__$$, $G__49505$$) {
  $pred__49523_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__49523_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49523_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$396$id, $k__5332__auto__$$) : $pred__49523_this__5331__auto__$$.call(null, $APP.cljs$cst$396$id, $k__5332__auto__$$)) ? new clara.rules.engine.NegationNode($G__49505$$, this.condition, this.children, this.binding_keys, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49523_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? 
  $pred__49523_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3141$condition, $k__5332__auto__$$) : $pred__49523_this__5331__auto__$$.call(null, cljs$cst$3141$condition, $k__5332__auto__$$)) ? new clara.rules.engine.NegationNode(this.id, $G__49505$$, this.children, this.binding_keys, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49523_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49523_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$3116$children, 
  $k__5332__auto__$$) : $pred__49523_this__5331__auto__$$.call(null, $APP.cljs$cst$3116$children, $k__5332__auto__$$)) ? new clara.rules.engine.NegationNode(this.id, this.condition, $G__49505$$, this.binding_keys, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49523_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49523_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3142$binding_keys, $k__5332__auto__$$) : $pred__49523_this__5331__auto__$$.call(null, cljs$cst$3142$binding_keys, 
  $k__5332__auto__$$)) ? new clara.rules.engine.NegationNode(this.id, this.condition, this.children, $G__49505$$, this.__meta, this.__extmap, null) : new clara.rules.engine.NegationNode(this.id, this.condition, this.children, this.binding_keys, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__49505$$), null);
};
clara.rules.engine.NegationNode.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$396$id, this.id, null), new $APP.cljs.core.MapEntry(cljs$cst$3141$condition, this.condition, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$3116$children, this.children, null), new $APP.cljs.core.MapEntry(cljs$cst$3142$binding_keys, this.binding_keys, null)], null), this.__extmap));
};
clara.rules.engine.NegationNode.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__49505$$) {
  return new clara.rules.engine.NegationNode(this.id, this.condition, this.children, this.binding_keys, $G__49505$$, this.__extmap, this.__hash);
};
clara.rules.engine.NegationNode.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
clara.rules.engine.NegationNode.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1850$id, cljs$cst$3144$condition, $APP.cljs$cst$3091$children, cljs$cst$3145$binding_keys], null);
};
clara.rules.engine.NegationNode.cljs$lang$type = !0;
clara.rules.engine.NegationNode.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "clara.rules.engine/NegationNode", null, 1, null);
};
clara.rules.engine.NegationNode.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "clara.rules.engine/NegationNode");
};
clara.rules.engine.__GT_NegationNode = function($id$$, $condition$$, $children$$, $binding_keys$$) {
  return new clara.rules.engine.NegationNode($id$$, $condition$$, $children$$, $binding_keys$$, null, null, null);
};
clara.rules.engine.map__GT_NegationNode = function($G__49509$$) {
  var $G__49528$jscomp$inline_5434_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__49509$$, $APP.cljs$cst$396$id, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$3141$condition, $APP.cljs$cst$3116$children, cljs$cst$3142$binding_keys], 0));
  $G__49528$jscomp$inline_5434_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__49509$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__49528$jscomp$inline_5434_extmap__5365__auto__$$) : $G__49528$jscomp$inline_5434_extmap__5365__auto__$$;
  return new clara.rules.engine.NegationNode($APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($G__49509$$), cljs$cst$3141$condition.cljs$core$IFn$_invoke$arity$1($G__49509$$), $APP.cljs$cst$3116$children.cljs$core$IFn$_invoke$arity$1($G__49509$$), cljs$cst$3142$binding_keys.cljs$core$IFn$_invoke$arity$1($G__49509$$), null, $APP.cljs.core.not_empty($G__49528$jscomp$inline_5434_extmap__5365__auto__$$), null);
};
clara.rules.engine.matches_some_facts_QMARK_ = function($node$$, $token$$, $elements$$, $join_filter_fn$$, $condition$$) {
  return $APP.cljs.core.some(function($fact$$) {
    var $bindings$$ = $APP.cljs.core.__destructure_map($fact$$);
    $fact$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($bindings$$, cljs$cst$3109$fact);
    $bindings$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($bindings$$, $APP.cljs$cst$394$bindings);
    return clara.rules.engine.join_node_matches($node$$, $join_filter_fn$$, $token$$, $fact$$, $bindings$$, $APP.cljs$cst$395$env.cljs$core$IFn$_invoke$arity$1($condition$$));
  }, $elements$$);
};
clara.rules.engine.NegationWithJoinFilterNode = function($id$$, $condition$$, $join_filter_fn$$, $children$$, $binding_keys$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.id = $id$$;
  this.condition = $condition$$;
  this.join_filter_fn = $join_filter_fn$$;
  this.children = $children$$;
  this.binding_keys = $binding_keys$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
clara.rules.engine.NegationWithJoinFilterNode.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
clara.rules.engine.NegationWithJoinFilterNode.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k49532$$, $else__5326__auto__$$) {
  switch($k49532$$ instanceof $APP.cljs.core.Keyword ? $k49532$$.fqn : null) {
    case "id":
      return this.id;
    case "condition":
      return this.condition;
    case "join-filter-fn":
      return this.join_filter_fn;
    case "children":
      return this.children;
    case "binding-keys":
      return this.binding_keys;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k49532$$, $else__5326__auto__$$);
  }
};
clara.rules.engine.NegationWithJoinFilterNode.prototype.clara$rules$engine$IRightActivate$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.NegationWithJoinFilterNode.prototype.clara$rules$engine$IRightActivate$right_activate$arity$6 = function($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$) {
  var $self__$$ = this, $node__$1$$ = this;
  clara.rules.listener.right_activate_BANG_($listener$$, $node__$1$$, $elements$$);
  var $previous_elements$$ = clara.rules.memory.get_elements($memory$$, $node__$1$$, $join_bindings$$);
  clara.rules.engine.retract_tokens($transport$$, $memory$$, $listener$$, $self__$$.children, $APP.cljs.core.doall.cljs$core$IFn$_invoke$arity$1(function() {
    return function $clara$rules$engine$iter__49539$$($s__49540$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (var $s__49540__$1_s__49540__$2_temp__5825__auto__$$ = $s__49540$$;;) {
          if ($s__49540__$1_s__49540__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__49540__$1_s__49540__$2_temp__5825__auto__$$)) {
            if ($APP.cljs.core.chunked_seq_QMARK_($s__49540__$1_s__49540__$2_temp__5825__auto__$$)) {
              var $c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__49540__$1_s__49540__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($c__5501__auto__$$), $b__49542$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
              return function() {
                for (var $i__49541$$ = 0;;) {
                  if ($i__49541$$ < $size__5502__auto__$$) {
                    var $token$$ = $APP.cljs.core._nth($c__5501__auto__$$, $i__49541$$), $JSCompiler_temp_const$$ = $APP.cljs.core, $JSCompiler_temp_const$jscomp$0$$ = $JSCompiler_temp_const$$.truth_;
                    var $JSCompiler_inline_result$jscomp$1021_and__5023__auto__$$ = clara.rules.engine.matches_some_facts_QMARK_($node__$1$$, $token$$, $elements$$, $self__$$.join_filter_fn, $self__$$.condition);
                    $JSCompiler_inline_result$jscomp$1021_and__5023__auto__$$ = $APP.cljs.core.truth_($JSCompiler_inline_result$jscomp$1021_and__5023__auto__$$) ? $APP.cljs.core.not(clara.rules.engine.matches_some_facts_QMARK_($node__$1$$, $token$$, $previous_elements$$, $self__$$.join_filter_fn, $self__$$.condition)) : $JSCompiler_inline_result$jscomp$1021_and__5023__auto__$$;
                    $JSCompiler_temp_const$jscomp$0$$.call($JSCompiler_temp_const$$, $JSCompiler_inline_result$jscomp$1021_and__5023__auto__$$) && $APP.cljs.core.chunk_append($b__49542$$, $token$$);
                    $i__49541$$ += 1;
                  } else {
                    return !0;
                  }
                }
              }() ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49542$$), $clara$rules$engine$iter__49539$$($APP.cljs.core.chunk_rest($s__49540__$1_s__49540__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49542$$), null);
            }
            var $token$$ = $APP.cljs.core.first($s__49540__$1_s__49540__$2_temp__5825__auto__$$);
            if ($APP.cljs.core.truth_(function() {
              var $and__5023__auto__$$ = clara.rules.engine.matches_some_facts_QMARK_($node__$1$$, $token$$, $elements$$, $self__$$.join_filter_fn, $self__$$.condition);
              return $APP.cljs.core.truth_($and__5023__auto__$$) ? $APP.cljs.core.not(clara.rules.engine.matches_some_facts_QMARK_($node__$1$$, $token$$, $previous_elements$$, $self__$$.join_filter_fn, $self__$$.condition)) : $and__5023__auto__$$;
            }())) {
              return $APP.cljs.core.cons($token$$, $clara$rules$engine$iter__49539$$($APP.cljs.core.rest($s__49540__$1_s__49540__$2_temp__5825__auto__$$)));
            }
            $s__49540__$1_s__49540__$2_temp__5825__auto__$$ = $APP.cljs.core.rest($s__49540__$1_s__49540__$2_temp__5825__auto__$$);
          } else {
            return null;
          }
        }
      }, null, null);
    }(clara.rules.memory.get_tokens($memory$$, $node__$1$$, $join_bindings$$));
  }()));
  return clara.rules.memory.add_elements_BANG_($memory$$, $node__$1$$, $join_bindings$$, $elements$$);
};
clara.rules.engine.NegationWithJoinFilterNode.prototype.clara$rules$engine$IRightActivate$right_retract$arity$6 = function($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$) {
  var $self__$$ = this, $node__$1$$ = this;
  clara.rules.listener.right_retract_BANG_($listener$$, $node__$1$$, $elements$$);
  clara.rules.memory.remove_elements_BANG_($memory$$, $node__$1$$, $join_bindings$$, $elements$$);
  return clara.rules.engine.send_tokens($transport$$, $memory$$, $listener$$, $self__$$.children, function() {
    var $remaining_elements$$ = clara.rules.memory.get_elements($memory$$, $node__$1$$, $join_bindings$$);
    return $APP.cljs.core.doall.cljs$core$IFn$_invoke$arity$1(function() {
      return function $clara$rules$engine$iter__49543$$($s__49544$$) {
        return new $APP.cljs.core.LazySeq(null, function() {
          for (var $s__49544__$1_s__49544__$2_temp__5825__auto__$$ = $s__49544$$;;) {
            if ($s__49544__$1_s__49544__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__49544__$1_s__49544__$2_temp__5825__auto__$$)) {
              if ($APP.cljs.core.chunked_seq_QMARK_($s__49544__$1_s__49544__$2_temp__5825__auto__$$)) {
                var $c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__49544__$1_s__49544__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($c__5501__auto__$$), $b__49546$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
                return function() {
                  for (var $i__49545$$ = 0;;) {
                    if ($i__49545$$ < $size__5502__auto__$$) {
                      var $token$$ = $APP.cljs.core._nth($c__5501__auto__$$, $i__49545$$), $JSCompiler_temp_const$$ = $APP.cljs.core, $JSCompiler_temp_const$jscomp$0$$ = $JSCompiler_temp_const$$.truth_;
                      var $JSCompiler_inline_result$jscomp$1024_and__5023__auto__$$ = clara.rules.engine.matches_some_facts_QMARK_($node__$1$$, $token$$, $elements$$, $self__$$.join_filter_fn, $self__$$.condition);
                      $JSCompiler_inline_result$jscomp$1024_and__5023__auto__$$ = $APP.cljs.core.truth_($JSCompiler_inline_result$jscomp$1024_and__5023__auto__$$) ? $APP.cljs.core.not(clara.rules.engine.matches_some_facts_QMARK_($node__$1$$, $token$$, $remaining_elements$$, $self__$$.join_filter_fn, $self__$$.condition)) : $JSCompiler_inline_result$jscomp$1024_and__5023__auto__$$;
                      $JSCompiler_temp_const$jscomp$0$$.call($JSCompiler_temp_const$$, $JSCompiler_inline_result$jscomp$1024_and__5023__auto__$$) && $APP.cljs.core.chunk_append($b__49546$$, $token$$);
                      $i__49545$$ += 1;
                    } else {
                      return !0;
                    }
                  }
                }() ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49546$$), $clara$rules$engine$iter__49543$$($APP.cljs.core.chunk_rest($s__49544__$1_s__49544__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49546$$), null);
              }
              var $token$$ = $APP.cljs.core.first($s__49544__$1_s__49544__$2_temp__5825__auto__$$);
              if ($APP.cljs.core.truth_(function() {
                var $and__5023__auto__$$ = clara.rules.engine.matches_some_facts_QMARK_($node__$1$$, $token$$, $elements$$, $self__$$.join_filter_fn, $self__$$.condition);
                return $APP.cljs.core.truth_($and__5023__auto__$$) ? $APP.cljs.core.not(clara.rules.engine.matches_some_facts_QMARK_($node__$1$$, $token$$, $remaining_elements$$, $self__$$.join_filter_fn, $self__$$.condition)) : $and__5023__auto__$$;
              }())) {
                return $APP.cljs.core.cons($token$$, $clara$rules$engine$iter__49543$$($APP.cljs.core.rest($s__49544__$1_s__49544__$2_temp__5825__auto__$$)));
              }
              $s__49544__$1_s__49544__$2_temp__5825__auto__$$ = $APP.cljs.core.rest($s__49544__$1_s__49544__$2_temp__5825__auto__$$);
            } else {
              return null;
            }
          }
        }, null, null);
      }(clara.rules.memory.get_tokens($memory$$, $node__$1$$, $join_bindings$$));
    }());
  }());
};
clara.rules.engine.NegationWithJoinFilterNode.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__49549_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__49549_v__5348__auto__$$, 0, null);
    $p__49549_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__49549_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__49549_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__49549_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
clara.rules.engine.NegationWithJoinFilterNode.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#clara.rules.engine.NegationWithJoinFilterNode{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id, this.id], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3141$condition, this.condition], 
  null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3146$join_filter_fn, this.join_filter_fn], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$3116$children, this.children], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3142$binding_keys, this.binding_keys], null)], null), this.__extmap));
};
clara.rules.engine.NegationWithJoinFilterNode.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__49531$$) {
  return new $APP.cljs.core.RecordIter(0, this, 5, new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id, cljs$cst$3141$condition, cljs$cst$3146$join_filter_fn, $APP.cljs$cst$3116$children, cljs$cst$3142$binding_keys], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
clara.rules.engine.NegationWithJoinFilterNode.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
clara.rules.engine.NegationWithJoinFilterNode.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new clara.rules.engine.NegationWithJoinFilterNode(this.id, this.condition, this.join_filter_fn, this.children, this.binding_keys, this.__meta, this.__extmap, this.__hash);
};
clara.rules.engine.NegationWithJoinFilterNode.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 5 + $APP.cljs.core.count(this.__extmap);
};
clara.rules.engine.NegationWithJoinFilterNode.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$105_h__5134__auto____$1$jscomp$105_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$105_h__5134__auto____$1$jscomp$105_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$105_h__5134__auto____$1$jscomp$105_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$105_h__5134__auto____$1$jscomp$105_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$105_h__5134__auto____$1$jscomp$105_this__5319__auto__$$ = 931728775 ^ $APP.cljs.core.hash_unordered_coll(this);
};
clara.rules.engine.NegationWithJoinFilterNode.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this49533$$, $other49534$$) {
  return $other49534$$ != null && this.constructor === $other49534$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.id, $other49534$$.id) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.condition, $other49534$$.condition) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.join_filter_fn, $other49534$$.join_filter_fn) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.children, $other49534$$.children) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.binding_keys, 
  $other49534$$.binding_keys) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other49534$$.__extmap);
};
clara.rules.engine.NegationWithJoinFilterNode.prototype.clara$rules$engine$IConditionNode$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.NegationWithJoinFilterNode.prototype.clara$rules$engine$IConditionNode$get_condition_description$arity$1 = function($this$$jscomp$848_type$$) {
  var $map__49553__$1_original_constraints$$ = $APP.cljs.core.__destructure_map(this.condition);
  $this$$jscomp$848_type$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__49553__$1_original_constraints$$, $APP.cljs$cst$139$type);
  var $constraints$jscomp$14_full_constraints$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__49553__$1_original_constraints$$, cljs$cst$3143$constraints);
  $map__49553__$1_original_constraints$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__49553__$1_original_constraints$$, cljs$cst$3147$original_constraints);
  $constraints$jscomp$14_full_constraints$$ = $APP.cljs.core.seq($map__49553__$1_original_constraints$$) ? $map__49553__$1_original_constraints$$ : $constraints$jscomp$14_full_constraints$$;
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2341$not, $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$this$$jscomp$848_type$$], null), $constraints$jscomp$14_full_constraints$$)], null);
};
clara.rules.engine.NegationWithJoinFilterNode.prototype.clara$rules$engine$ILeftActivate$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.NegationWithJoinFilterNode.prototype.clara$rules$engine$ILeftActivate$left_activate$arity$6 = function($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) {
  var $self__$$ = this, $node__$1$$ = this;
  clara.rules.listener.left_activate_BANG_($listener$$, $node__$1$$, $tokens$$);
  clara.rules.memory.add_tokens_BANG_($memory$$, $node__$1$$, $join_bindings$$, $tokens$$);
  return clara.rules.engine.send_tokens($transport$$, $memory$$, $listener$$, $self__$$.children, function() {
    var $elements$$ = clara.rules.memory.get_elements($memory$$, $node__$1$$, $join_bindings$$);
    return $APP.cljs.core.doall.cljs$core$IFn$_invoke$arity$1(function() {
      return function $clara$rules$engine$iter__49554$$($s__49555$$) {
        return new $APP.cljs.core.LazySeq(null, function() {
          for (var $s__49555__$1_s__49555__$2_temp__5825__auto__$$ = $s__49555$$;;) {
            if ($s__49555__$1_s__49555__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__49555__$1_s__49555__$2_temp__5825__auto__$$)) {
              if ($APP.cljs.core.chunked_seq_QMARK_($s__49555__$1_s__49555__$2_temp__5825__auto__$$)) {
                var $JSCompiler_inline_result$jscomp$1025_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__49555__$1_s__49555__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1025_c__5501__auto__$$), $b__49557_token$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
                a: {
                  for (var $i__49556$$ = 0;;) {
                    if ($i__49556$$ < $size__5502__auto__$$) {
                      var $token$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1025_c__5501__auto__$$, $i__49556$$);
                      $APP.cljs.core.not(clara.rules.engine.matches_some_facts_QMARK_($node__$1$$, $token$$, $elements$$, $self__$$.join_filter_fn, $self__$$.condition)) && $APP.cljs.core.chunk_append($b__49557_token$$, $token$$);
                      $i__49556$$ += 1;
                    } else {
                      $JSCompiler_inline_result$jscomp$1025_c__5501__auto__$$ = !0;
                      break a;
                    }
                  }
                  $JSCompiler_inline_result$jscomp$1025_c__5501__auto__$$ = void 0;
                }
                return $JSCompiler_inline_result$jscomp$1025_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49557_token$$), $clara$rules$engine$iter__49554$$($APP.cljs.core.chunk_rest($s__49555__$1_s__49555__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49557_token$$), null);
              }
              $b__49557_token$$ = $APP.cljs.core.first($s__49555__$1_s__49555__$2_temp__5825__auto__$$);
              if ($APP.cljs.core.not(clara.rules.engine.matches_some_facts_QMARK_($node__$1$$, $b__49557_token$$, $elements$$, $self__$$.join_filter_fn, $self__$$.condition))) {
                return $APP.cljs.core.cons($b__49557_token$$, $clara$rules$engine$iter__49554$$($APP.cljs.core.rest($s__49555__$1_s__49555__$2_temp__5825__auto__$$)));
              }
              $s__49555__$1_s__49555__$2_temp__5825__auto__$$ = $APP.cljs.core.rest($s__49555__$1_s__49555__$2_temp__5825__auto__$$);
            } else {
              return null;
            }
          }
        }, null, null);
      }($tokens$$);
    }());
  }());
};
clara.rules.engine.NegationWithJoinFilterNode.prototype.clara$rules$engine$ILeftActivate$left_retract$arity$6 = function($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) {
  var $self__$$ = this, $node__$1$$ = this;
  clara.rules.listener.left_retract_BANG_($listener$$, $node__$1$$, $tokens$$);
  clara.rules.memory.remove_tokens_BANG_($memory$$, $node__$1$$, $join_bindings$$, $tokens$$);
  return clara.rules.engine.retract_tokens($transport$$, $memory$$, $listener$$, $self__$$.children, function() {
    var $elements$$ = clara.rules.memory.get_elements($memory$$, $node__$1$$, $join_bindings$$);
    return $APP.cljs.core.doall.cljs$core$IFn$_invoke$arity$1(function() {
      return function $clara$rules$engine$iter__49558$$($s__49559$$) {
        return new $APP.cljs.core.LazySeq(null, function() {
          for (var $s__49559__$1_s__49559__$2_temp__5825__auto__$$ = $s__49559$$;;) {
            if ($s__49559__$1_s__49559__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__49559__$1_s__49559__$2_temp__5825__auto__$$)) {
              if ($APP.cljs.core.chunked_seq_QMARK_($s__49559__$1_s__49559__$2_temp__5825__auto__$$)) {
                var $JSCompiler_inline_result$jscomp$1026_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__49559__$1_s__49559__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1026_c__5501__auto__$$), $b__49561_token$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
                a: {
                  for (var $i__49560$$ = 0;;) {
                    if ($i__49560$$ < $size__5502__auto__$$) {
                      var $token$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1026_c__5501__auto__$$, $i__49560$$);
                      $APP.cljs.core.not(clara.rules.engine.matches_some_facts_QMARK_($node__$1$$, $token$$, $elements$$, $self__$$.join_filter_fn, $self__$$.condition)) && $APP.cljs.core.chunk_append($b__49561_token$$, $token$$);
                      $i__49560$$ += 1;
                    } else {
                      $JSCompiler_inline_result$jscomp$1026_c__5501__auto__$$ = !0;
                      break a;
                    }
                  }
                  $JSCompiler_inline_result$jscomp$1026_c__5501__auto__$$ = void 0;
                }
                return $JSCompiler_inline_result$jscomp$1026_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49561_token$$), $clara$rules$engine$iter__49558$$($APP.cljs.core.chunk_rest($s__49559__$1_s__49559__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49561_token$$), null);
              }
              $b__49561_token$$ = $APP.cljs.core.first($s__49559__$1_s__49559__$2_temp__5825__auto__$$);
              if ($APP.cljs.core.not(clara.rules.engine.matches_some_facts_QMARK_($node__$1$$, $b__49561_token$$, $elements$$, $self__$$.join_filter_fn, $self__$$.condition))) {
                return $APP.cljs.core.cons($b__49561_token$$, $clara$rules$engine$iter__49558$$($APP.cljs.core.rest($s__49559__$1_s__49559__$2_temp__5825__auto__$$)));
              }
              $s__49559__$1_s__49559__$2_temp__5825__auto__$$ = $APP.cljs.core.rest($s__49559__$1_s__49559__$2_temp__5825__auto__$$);
            } else {
              return null;
            }
          }
        }, null, null);
      }($tokens$$);
    }());
  }());
};
clara.rules.engine.NegationWithJoinFilterNode.prototype.clara$rules$engine$ILeftActivate$get_join_keys$arity$1 = function($node$$) {
  return this.binding_keys;
};
clara.rules.engine.NegationWithJoinFilterNode.prototype.clara$rules$engine$ILeftActivate$description$arity$1 = function($node$$) {
  return ["NegationWithJoinFilterNode -- ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($APP.cljs$cst$1999$text.cljs$core$IFn$_invoke$arity$1(this.condition))].join("");
};
clara.rules.engine.NegationWithJoinFilterNode.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 5, [$APP.cljs$cst$3116$children, null, cljs$cst$3146$join_filter_fn, null, $APP.cljs$cst$396$id, null, cljs$cst$3141$condition, null, cljs$cst$3142$binding_keys, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, 
  this), this.__meta), $k__5334__auto__$$) : new clara.rules.engine.NegationWithJoinFilterNode(this.id, this.condition, this.join_filter_fn, this.children, this.binding_keys, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
clara.rules.engine.NegationWithJoinFilterNode.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k49532$$) {
  switch($k49532$$ instanceof $APP.cljs.core.Keyword ? $k49532$$.fqn : null) {
    case "id":
    case "condition":
    case "join-filter-fn":
    case "children":
    case "binding-keys":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k49532$$);
  }
};
clara.rules.engine.NegationWithJoinFilterNode.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__49565_this__5331__auto__$$, $k__5332__auto__$$, $G__49531$$) {
  $pred__49565_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__49565_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49565_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$396$id, $k__5332__auto__$$) : $pred__49565_this__5331__auto__$$.call(null, $APP.cljs$cst$396$id, $k__5332__auto__$$)) ? new clara.rules.engine.NegationWithJoinFilterNode($G__49531$$, this.condition, this.join_filter_fn, this.children, this.binding_keys, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49565_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? 
  $pred__49565_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3141$condition, $k__5332__auto__$$) : $pred__49565_this__5331__auto__$$.call(null, cljs$cst$3141$condition, $k__5332__auto__$$)) ? new clara.rules.engine.NegationWithJoinFilterNode(this.id, $G__49531$$, this.join_filter_fn, this.children, this.binding_keys, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49565_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49565_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3146$join_filter_fn, 
  $k__5332__auto__$$) : $pred__49565_this__5331__auto__$$.call(null, cljs$cst$3146$join_filter_fn, $k__5332__auto__$$)) ? new clara.rules.engine.NegationWithJoinFilterNode(this.id, this.condition, $G__49531$$, this.children, this.binding_keys, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49565_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49565_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$3116$children, $k__5332__auto__$$) : $pred__49565_this__5331__auto__$$.call(null, 
  $APP.cljs$cst$3116$children, $k__5332__auto__$$)) ? new clara.rules.engine.NegationWithJoinFilterNode(this.id, this.condition, this.join_filter_fn, $G__49531$$, this.binding_keys, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49565_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49565_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3142$binding_keys, $k__5332__auto__$$) : $pred__49565_this__5331__auto__$$.call(null, cljs$cst$3142$binding_keys, $k__5332__auto__$$)) ? 
  new clara.rules.engine.NegationWithJoinFilterNode(this.id, this.condition, this.join_filter_fn, this.children, $G__49531$$, this.__meta, this.__extmap, null) : new clara.rules.engine.NegationWithJoinFilterNode(this.id, this.condition, this.join_filter_fn, this.children, this.binding_keys, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__49531$$), null);
};
clara.rules.engine.NegationWithJoinFilterNode.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$396$id, this.id, null), new $APP.cljs.core.MapEntry(cljs$cst$3141$condition, this.condition, null), new $APP.cljs.core.MapEntry(cljs$cst$3146$join_filter_fn, this.join_filter_fn, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$3116$children, this.children, null), new $APP.cljs.core.MapEntry(cljs$cst$3142$binding_keys, 
  this.binding_keys, null)], null), this.__extmap));
};
clara.rules.engine.NegationWithJoinFilterNode.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__49531$$) {
  return new clara.rules.engine.NegationWithJoinFilterNode(this.id, this.condition, this.join_filter_fn, this.children, this.binding_keys, $G__49531$$, this.__extmap, this.__hash);
};
clara.rules.engine.NegationWithJoinFilterNode.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
clara.rules.engine.NegationWithJoinFilterNode.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1850$id, cljs$cst$3144$condition, cljs$cst$3148$join_filter_fn, $APP.cljs$cst$3091$children, cljs$cst$3145$binding_keys], null);
};
clara.rules.engine.NegationWithJoinFilterNode.cljs$lang$type = !0;
clara.rules.engine.NegationWithJoinFilterNode.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "clara.rules.engine/NegationWithJoinFilterNode", null, 1, null);
};
clara.rules.engine.NegationWithJoinFilterNode.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "clara.rules.engine/NegationWithJoinFilterNode");
};
clara.rules.engine.__GT_NegationWithJoinFilterNode = function($id$$, $condition$$, $join_filter_fn$$, $children$$, $binding_keys$$) {
  return new clara.rules.engine.NegationWithJoinFilterNode($id$$, $condition$$, $join_filter_fn$$, $children$$, $binding_keys$$, null, null, null);
};
clara.rules.engine.map__GT_NegationWithJoinFilterNode = function($G__49535$$) {
  var $G__49568$jscomp$inline_5450_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__49535$$, $APP.cljs$cst$396$id, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$3141$condition, cljs$cst$3146$join_filter_fn, $APP.cljs$cst$3116$children, cljs$cst$3142$binding_keys], 0));
  $G__49568$jscomp$inline_5450_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__49535$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__49568$jscomp$inline_5450_extmap__5365__auto__$$) : $G__49568$jscomp$inline_5450_extmap__5365__auto__$$;
  return new clara.rules.engine.NegationWithJoinFilterNode($APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($G__49535$$), cljs$cst$3141$condition.cljs$core$IFn$_invoke$arity$1($G__49535$$), cljs$cst$3146$join_filter_fn.cljs$core$IFn$_invoke$arity$1($G__49535$$), $APP.cljs$cst$3116$children.cljs$core$IFn$_invoke$arity$1($G__49535$$), cljs$cst$3142$binding_keys.cljs$core$IFn$_invoke$arity$1($G__49535$$), null, $APP.cljs.core.not_empty($G__49568$jscomp$inline_5450_extmap__5365__auto__$$), null);
};
clara.rules.engine.test_node_matches = function($node$$, $test_handler$$, $env$$, $token$$) {
  try {
    var $test_result$$ = $test_handler$$.cljs$core$IFn$_invoke$arity$2 ? $test_handler$$.cljs$core$IFn$_invoke$arity$2($token$$, $env$$) : $test_handler$$.call(null, $token$$, $env$$);
  } catch ($e49571$$) {
    $test_result$$ = clara.rules.engine.throw_condition_exception(new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$145$cause, $e49571$$, $APP.cljs$cst$3067$node, $node$$, $APP.cljs$cst$395$env, $env$$, $APP.cljs$cst$394$bindings, $APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($token$$)], null));
  }
  return $test_result$$;
};
clara.rules.engine.TestNode = function($id$$, $env$$, $constraints$$, $test$$, $children$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.id = $id$$;
  this.env = $env$$;
  this.constraints = $constraints$$;
  this.test = $test$$;
  this.children = $children$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
clara.rules.engine.TestNode.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
clara.rules.engine.TestNode.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k49573$$, $else__5326__auto__$$) {
  switch($k49573$$ instanceof $APP.cljs.core.Keyword ? $k49573$$.fqn : null) {
    case "id":
      return this.id;
    case "env":
      return this.env;
    case "constraints":
      return this.constraints;
    case "test":
      return this.test;
    case "children":
      return this.children;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k49573$$, $else__5326__auto__$$);
  }
};
clara.rules.engine.TestNode.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__49578_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__49578_v__5348__auto__$$, 0, null);
    $p__49578_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__49578_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__49578_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__49578_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
clara.rules.engine.TestNode.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#clara.rules.engine.TestNode{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id, this.id], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$395$env, this.env], null), new $APP.cljs.core.PersistentVector(null, 
  2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3143$constraints, this.constraints], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$171$test, this.test], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$3116$children, this.children], null)], null), this.__extmap));
};
clara.rules.engine.TestNode.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__49572$$) {
  return new $APP.cljs.core.RecordIter(0, this, 5, new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id, $APP.cljs$cst$395$env, cljs$cst$3143$constraints, $APP.cljs$cst$171$test, $APP.cljs$cst$3116$children], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
clara.rules.engine.TestNode.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
clara.rules.engine.TestNode.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new clara.rules.engine.TestNode(this.id, this.env, this.constraints, this.test, this.children, this.__meta, this.__extmap, this.__hash);
};
clara.rules.engine.TestNode.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 5 + $APP.cljs.core.count(this.__extmap);
};
clara.rules.engine.TestNode.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$106_h__5134__auto____$1$jscomp$106_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$106_h__5134__auto____$1$jscomp$106_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$106_h__5134__auto____$1$jscomp$106_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$106_h__5134__auto____$1$jscomp$106_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$106_h__5134__auto____$1$jscomp$106_this__5319__auto__$$ = -1174895889 ^ $APP.cljs.core.hash_unordered_coll(this);
};
clara.rules.engine.TestNode.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this49574$$, $other49575$$) {
  return $other49575$$ != null && this.constructor === $other49575$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.id, $other49575$$.id) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.env, $other49575$$.env) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.constraints, $other49575$$.constraints) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.test, $other49575$$.test) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.children, $other49575$$.children) && 
  $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other49575$$.__extmap);
};
clara.rules.engine.TestNode.prototype.clara$rules$engine$IConditionNode$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.TestNode.prototype.clara$rules$engine$IConditionNode$get_condition_description$arity$1 = function($this$$$) {
  return $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$171$test], null), this.constraints);
};
clara.rules.engine.TestNode.prototype.clara$rules$engine$ILeftActivate$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.TestNode.prototype.clara$rules$engine$ILeftActivate$left_activate$arity$6 = function($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) {
  var $self__$$ = this, $node__$1$$ = this;
  clara.rules.listener.left_activate_BANG_($listener$$, $node__$1$$, $tokens$$);
  return clara.rules.engine.send_tokens($transport$$, $memory$$, $listener$$, $self__$$.children, $APP.cljs.core.doall.cljs$core$IFn$_invoke$arity$1(function() {
    return function $clara$rules$engine$iter__49584$$($s__49585$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (var $s__49585__$1_s__49585__$2_temp__5825__auto__$$ = $s__49585$$;;) {
          if ($s__49585__$1_s__49585__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__49585__$1_s__49585__$2_temp__5825__auto__$$)) {
            if ($APP.cljs.core.chunked_seq_QMARK_($s__49585__$1_s__49585__$2_temp__5825__auto__$$)) {
              var $JSCompiler_inline_result$jscomp$1027_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__49585__$1_s__49585__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1027_c__5501__auto__$$), $b__49587_token$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
              a: {
                for (var $i__49586$$ = 0;;) {
                  if ($i__49586$$ < $size__5502__auto__$$) {
                    var $token$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1027_c__5501__auto__$$, $i__49586$$);
                    $APP.cljs.core.truth_(clara.rules.engine.test_node_matches($node__$1$$, $self__$$.test, $self__$$.env, $token$$)) && $APP.cljs.core.chunk_append($b__49587_token$$, $token$$);
                    $i__49586$$ += 1;
                  } else {
                    $JSCompiler_inline_result$jscomp$1027_c__5501__auto__$$ = !0;
                    break a;
                  }
                }
                $JSCompiler_inline_result$jscomp$1027_c__5501__auto__$$ = void 0;
              }
              return $JSCompiler_inline_result$jscomp$1027_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49587_token$$), $clara$rules$engine$iter__49584$$($APP.cljs.core.chunk_rest($s__49585__$1_s__49585__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49587_token$$), null);
            }
            $b__49587_token$$ = $APP.cljs.core.first($s__49585__$1_s__49585__$2_temp__5825__auto__$$);
            if ($APP.cljs.core.truth_(clara.rules.engine.test_node_matches($node__$1$$, $self__$$.test, $self__$$.env, $b__49587_token$$))) {
              return $APP.cljs.core.cons($b__49587_token$$, $clara$rules$engine$iter__49584$$($APP.cljs.core.rest($s__49585__$1_s__49585__$2_temp__5825__auto__$$)));
            }
            $s__49585__$1_s__49585__$2_temp__5825__auto__$$ = $APP.cljs.core.rest($s__49585__$1_s__49585__$2_temp__5825__auto__$$);
          } else {
            return null;
          }
        }
      }, null, null);
    }($tokens$$);
  }()));
};
clara.rules.engine.TestNode.prototype.clara$rules$engine$ILeftActivate$left_retract$arity$6 = function($node$$, $join_bindings$$, $tokens$$, $memory$$, $transport$$, $listener$$) {
  clara.rules.listener.left_retract_BANG_($listener$$, this, $tokens$$);
  return clara.rules.engine.retract_tokens($transport$$, $memory$$, $listener$$, this.children, $tokens$$);
};
clara.rules.engine.TestNode.prototype.clara$rules$engine$ILeftActivate$get_join_keys$arity$1 = function($node$$) {
  return $APP.cljs.core.PersistentVector.EMPTY;
};
clara.rules.engine.TestNode.prototype.clara$rules$engine$ILeftActivate$description$arity$1 = function($node$$) {
  return ["TestNode -- ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($APP.cljs$cst$1999$text.cljs$core$IFn$_invoke$arity$1(this.test))].join("");
};
clara.rules.engine.TestNode.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 5, [cljs$cst$3143$constraints, null, $APP.cljs$cst$3116$children, null, $APP.cljs$cst$395$env, null, $APP.cljs$cst$396$id, null, $APP.cljs$cst$171$test, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), 
  $k__5334__auto__$$) : new clara.rules.engine.TestNode(this.id, this.env, this.constraints, this.test, this.children, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
clara.rules.engine.TestNode.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k49573$$) {
  switch($k49573$$ instanceof $APP.cljs.core.Keyword ? $k49573$$.fqn : null) {
    case "id":
    case "env":
    case "constraints":
    case "test":
    case "children":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k49573$$);
  }
};
clara.rules.engine.TestNode.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__49591_this__5331__auto__$$, $k__5332__auto__$$, $G__49572$$) {
  $pred__49591_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__49591_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49591_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$396$id, $k__5332__auto__$$) : $pred__49591_this__5331__auto__$$.call(null, $APP.cljs$cst$396$id, $k__5332__auto__$$)) ? new clara.rules.engine.TestNode($G__49572$$, this.env, this.constraints, this.test, this.children, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49591_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? 
  $pred__49591_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$395$env, $k__5332__auto__$$) : $pred__49591_this__5331__auto__$$.call(null, $APP.cljs$cst$395$env, $k__5332__auto__$$)) ? new clara.rules.engine.TestNode(this.id, $G__49572$$, this.constraints, this.test, this.children, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49591_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49591_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3143$constraints, 
  $k__5332__auto__$$) : $pred__49591_this__5331__auto__$$.call(null, cljs$cst$3143$constraints, $k__5332__auto__$$)) ? new clara.rules.engine.TestNode(this.id, this.env, $G__49572$$, this.test, this.children, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49591_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49591_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$171$test, $k__5332__auto__$$) : $pred__49591_this__5331__auto__$$.call(null, $APP.cljs$cst$171$test, 
  $k__5332__auto__$$)) ? new clara.rules.engine.TestNode(this.id, this.env, this.constraints, $G__49572$$, this.children, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__49591_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__49591_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$3116$children, $k__5332__auto__$$) : $pred__49591_this__5331__auto__$$.call(null, $APP.cljs$cst$3116$children, $k__5332__auto__$$)) ? new clara.rules.engine.TestNode(this.id, this.env, 
  this.constraints, this.test, $G__49572$$, this.__meta, this.__extmap, null) : new clara.rules.engine.TestNode(this.id, this.env, this.constraints, this.test, this.children, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__49572$$), null);
};
clara.rules.engine.TestNode.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$396$id, this.id, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$395$env, this.env, null), new $APP.cljs.core.MapEntry(cljs$cst$3143$constraints, this.constraints, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$171$test, this.test, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$3116$children, 
  this.children, null)], null), this.__extmap));
};
clara.rules.engine.TestNode.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__49572$$) {
  return new clara.rules.engine.TestNode(this.id, this.env, this.constraints, this.test, this.children, $G__49572$$, this.__extmap, this.__hash);
};
clara.rules.engine.TestNode.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
clara.rules.engine.TestNode.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1850$id, cljs$cst$3138$env, $APP.cljs$cst$2357$constraints, $APP.cljs$cst$1167$test, $APP.cljs$cst$3091$children], null);
};
clara.rules.engine.TestNode.cljs$lang$type = !0;
clara.rules.engine.TestNode.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "clara.rules.engine/TestNode", null, 1, null);
};
clara.rules.engine.TestNode.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "clara.rules.engine/TestNode");
};
clara.rules.engine.__GT_TestNode = function($id$$, $env$$, $constraints$$, $test$$, $children$$) {
  return new clara.rules.engine.TestNode($id$$, $env$$, $constraints$$, $test$$, $children$$, null, null, null);
};
clara.rules.engine.map__GT_TestNode = function($G__49576$$) {
  var $G__49594$jscomp$inline_5460_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__49576$$, $APP.cljs$cst$396$id, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$395$env, cljs$cst$3143$constraints, $APP.cljs$cst$171$test, $APP.cljs$cst$3116$children], 0));
  $G__49594$jscomp$inline_5460_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__49576$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__49594$jscomp$inline_5460_extmap__5365__auto__$$) : $G__49594$jscomp$inline_5460_extmap__5365__auto__$$;
  return new clara.rules.engine.TestNode($APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($G__49576$$), $APP.cljs$cst$395$env.cljs$core$IFn$_invoke$arity$1($G__49576$$), cljs$cst$3143$constraints.cljs$core$IFn$_invoke$arity$1($G__49576$$), $APP.cljs$cst$171$test.cljs$core$IFn$_invoke$arity$1($G__49576$$), $APP.cljs$cst$3116$children.cljs$core$IFn$_invoke$arity$1($G__49576$$), null, $APP.cljs.core.not_empty($G__49594$jscomp$inline_5460_extmap__5365__auto__$$), null);
};
clara.rules.engine.do_accumulate = function($accumulator$$, $facts$$) {
  return $APP.clojure.core.reducers.reduce.cljs$core$IFn$_invoke$arity$3(cljs$cst$3099$reduce_fn.cljs$core$IFn$_invoke$arity$1($accumulator$$), cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1($accumulator$$), $facts$$);
};
clara.rules.engine.retract_accumulated = function($node$$, $accum_condition_new_facts$$, $accumulator$$, $new_bindings_result_binding$$, $token$$, $converted_result$$, $fact_bindings$$, $transport$$, $memory$$, $listener$$) {
  $accum_condition_new_facts$$ = $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2(cljs$cst$3107$matches.cljs$core$IFn$_invoke$arity$1($token$$), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$converted_result$$, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$)], null));
  $new_bindings_result_binding$$ = $APP.cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($token$$), $fact_bindings$$, $APP.cljs.core.truth_($new_bindings_result_binding$$) ? $APP.cljs.core.PersistentArrayMap.createAsIfByAssoc([$new_bindings_result_binding$$, $converted_result$$]) : null], 0));
  return clara.rules.engine.retract_tokens($transport$$, $memory$$, $listener$$, $APP.cljs$cst$3116$children.cljs$core$IFn$_invoke$arity$1($node$$), new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [clara.rules.engine.__GT_Token($accum_condition_new_facts$$, $new_bindings_result_binding$$)], null));
};
clara.rules.engine.send_accumulated = function($node$$, $accum_condition$jscomp$1_new_bindings$$, $accumulator$$, $previous_result_result_binding$$, $token$$, $converted_result$$, $fact_bindings$$, $transport$$, $memory$$, $listener$$) {
  $accum_condition$jscomp$1_new_bindings$$ = $APP.cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($token$$), $fact_bindings$$, $APP.cljs.core.truth_($previous_result_result_binding$$) ? $APP.cljs.core.PersistentArrayMap.createAsIfByAssoc([$previous_result_result_binding$$, $converted_result$$]) : null], 0));
  $previous_result_result_binding$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3($APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($token$$), $previous_result_result_binding$$, cljs$cst$3149$clara_DOT_rules_DOT_engine_SLASH_no_previous_result);
  return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($previous_result_result_binding$$, cljs$cst$3149$clara_DOT_rules_DOT_engine_SLASH_no_previous_result) || $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($previous_result_result_binding$$, $converted_result$$) ? clara.rules.engine.send_tokens($transport$$, $memory$$, $listener$$, $APP.cljs$cst$3116$children.cljs$core$IFn$_invoke$arity$1($node$$), new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
  [clara.rules.engine.__GT_Token($APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2(cljs$cst$3107$matches.cljs$core$IFn$_invoke$arity$1($token$$), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$converted_result$$, $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$)], null)), $accum_condition$jscomp$1_new_bindings$$)], null)) : null;
};
clara.rules.engine.AccumulateNode = function($id$$, $accum_condition$$, $accumulator$$, $result_binding$$, $children$$, $binding_keys$$, $new_bindings$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.id = $id$$;
  this.accum_condition = $accum_condition$$;
  this.accumulator = $accumulator$$;
  this.result_binding = $result_binding$$;
  this.children = $children$$;
  this.binding_keys = $binding_keys$$;
  this.new_bindings = $new_bindings$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
clara.rules.engine.AccumulateNode.prototype.clara$rules$engine$IAccumRightActivate$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.AccumulateNode.prototype.clara$rules$engine$IAccumRightActivate$pre_reduce$arity$2 = function($node$$, $elements$$) {
  return $APP.cljs.core.doall.cljs$core$IFn$_invoke$arity$1(function() {
    return function $clara$rules$engine$iter__49602$$($s__49603$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (;;) {
          var $s__49603__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__49603$$);
          if ($s__49603__$2_temp__5825__auto__$$) {
            if ($APP.cljs.core.chunked_seq_QMARK_($s__49603__$2_temp__5825__auto__$$)) {
              var $JSCompiler_inline_result$jscomp$1028_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__49603__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1028_c__5501__auto__$$), $b__49605_bindings$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
              a: {
                for (var $i__49604$$ = 0;;) {
                  if ($i__49604$$ < $size__5502__auto__$$) {
                    var $element_group$jscomp$inline_5465_vec__49606$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1028_c__5501__auto__$$, $i__49604$$), $bindings$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($element_group$jscomp$inline_5465_vec__49606$$, 0, null);
                    $element_group$jscomp$inline_5465_vec__49606$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($element_group$jscomp$inline_5465_vec__49606$$, 1, null);
                    $APP.cljs.core.chunk_append($b__49605_bindings$$, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$bindings$$, $APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2(cljs$cst$3109$fact, $element_group$jscomp$inline_5465_vec__49606$$)], null));
                    $i__49604$$ += 1;
                  } else {
                    $JSCompiler_inline_result$jscomp$1028_c__5501__auto__$$ = !0;
                    break a;
                  }
                }
                $JSCompiler_inline_result$jscomp$1028_c__5501__auto__$$ = void 0;
              }
              return $JSCompiler_inline_result$jscomp$1028_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49605_bindings$$), $clara$rules$engine$iter__49602$$($APP.cljs.core.chunk_rest($s__49603__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__49605_bindings$$), null);
            }
            $JSCompiler_inline_result$jscomp$1028_c__5501__auto__$$ = $APP.cljs.core.first($s__49603__$2_temp__5825__auto__$$);
            $b__49605_bindings$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_inline_result$jscomp$1028_c__5501__auto__$$, 0, null);
            $JSCompiler_inline_result$jscomp$1028_c__5501__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_inline_result$jscomp$1028_c__5501__auto__$$, 1, null);
            return $APP.cljs.core.cons(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$b__49605_bindings$$, $APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2(cljs$cst$3109$fact, $JSCompiler_inline_result$jscomp$1028_c__5501__auto__$$)], null), $clara$rules$engine$iter__49602$$($APP.cljs.core.rest($s__49603__$2_temp__5825__auto__$$)));
          }
          return null;
        }
      }, null, null);
    }(clara.rules.platform.group_by_seq($APP.cljs$cst$394$bindings, $elements$$));
  }());
};
clara.rules.engine.AccumulateNode.prototype.clara$rules$engine$IAccumRightActivate$right_activate_reduced$arity$6 = function($node$$, $join_bindings$$, $fact_seq$$, $memory$$, $transport$$, $listener$$) {
  for (var $self__$$ = this, $convert_return_fn$$ = cljs$cst$3101$convert_return_fn.cljs$core$IFn$_invoke$arity$1($self__$$.accumulator), $matched_tokens$$ = clara.rules.memory.get_tokens($memory$$, this, $join_bindings$$), $has_matches_QMARK_$$ = $APP.cljs.core.seq($matched_tokens$$), $seq__49615$$ = $APP.cljs.core.seq($fact_seq$$), $chunk__49617$$ = null, $count__49618$$ = 0, $i__49619$$ = 0;;) {
    if ($i__49619$$ < $count__49618$$) {
      var $vec__49677$$ = $chunk__49617$$.cljs$core$IIndexed$_nth$arity$2(null, $i__49619$$), $bindings$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49677$$, 0, null), $facts$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49677$$, 1, null), $previous_51573$$ = clara.rules.memory.get_accum_reduced($memory$$, this, $join_bindings$$, $bindings$$), $has_previous_QMARK__51574$$ = $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3072$clara_DOT_rules_DOT_memory_SLASH_no_accum_reduced, 
      $previous_51573$$), $vec__49680_51575$$ = $has_previous_QMARK__51574$$ ? $previous_51573$$ : new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3072$clara_DOT_rules_DOT_memory_SLASH_no_accum_reduced, cljs$cst$3150$clara_DOT_rules_DOT_engine_SLASH_not_reduced], null), $previous_51576__$1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49680_51575$$, 0, null), $previous_reduced_51577$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49680_51575$$, 
      1, null), $combined_51578$$ = $has_previous_QMARK__51574$$ ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($previous_51576__$1$$, $facts$$) : $facts$$, $combined_reduced_51579$$ = $has_matches_QMARK_$$ && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3150$clara_DOT_rules_DOT_engine_SLASH_not_reduced, $previous_reduced_51577$$) ? clara.rules.engine.do_accumulate($self__$$.accumulator, $combined_51578$$) : $APP.cljs.core.truth_($has_matches_QMARK_$$ ? cljs$cst$3100$combine_fn.cljs$core$IFn$_invoke$arity$1($self__$$.accumulator) : 
      $has_matches_QMARK_$$) ? function() {
        var $G__49684$$ = $previous_reduced_51577$$, $G__49685$$ = clara.rules.engine.do_accumulate($self__$$.accumulator, $facts$$), $fexpr__49683$$ = cljs$cst$3100$combine_fn.cljs$core$IFn$_invoke$arity$1($self__$$.accumulator);
        return $fexpr__49683$$.cljs$core$IFn$_invoke$arity$2 ? $fexpr__49683$$.cljs$core$IFn$_invoke$arity$2($G__49684$$, $G__49685$$) : $fexpr__49683$$.call(null, $G__49684$$, $G__49685$$);
      }() : $has_matches_QMARK_$$ ? clara.rules.engine.do_accumulate($APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($self__$$.accumulator, cljs$cst$3097$initial_value, $previous_reduced_51577$$), $facts$$) : cljs$cst$3150$clara_DOT_rules_DOT_engine_SLASH_not_reduced, $converted_51580$$ = $combined_reduced_51579$$ != null && $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3150$clara_DOT_rules_DOT_engine_SLASH_not_reduced, $combined_reduced_51579$$) ? $convert_return_fn$$.cljs$core$IFn$_invoke$arity$1 ? 
      $convert_return_fn$$.cljs$core$IFn$_invoke$arity$1($combined_reduced_51579$$) : $convert_return_fn$$.call(null, $combined_reduced_51579$$) : null, $previous_converted_51581$$ = $has_previous_QMARK__51574$$ && $previous_reduced_51577$$ != null && $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3150$clara_DOT_rules_DOT_engine_SLASH_not_reduced, $previous_reduced_51577$$) ? $convert_return_fn$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$$.cljs$core$IFn$_invoke$arity$1($previous_reduced_51577$$) : 
      $convert_return_fn$$.call(null, $previous_reduced_51577$$) : null, $accum_reduced_51582$$ = $APP.cljs.core.with_meta(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$combined_51578$$, $combined_reduced_51579$$], null), new $APP.cljs.core.PersistentArrayMap(null, 1, [cljs$cst$3151$clara_DOT_rules_DOT_engine_SLASH_accum_node, !0], null));
      clara.rules.listener.add_accum_reduced_BANG_($listener$$, this, $join_bindings$$, $accum_reduced_51582$$, $bindings$$);
      clara.rules.memory.add_accum_reduced_BANG_($memory$$, this, $join_bindings$$, $accum_reduced_51582$$, $bindings$$);
      if ($previous_converted_51581$$ != null || $converted_51580$$ != null) {
        if ($converted_51580$$ == null) {
          for (var $seq__49686_51598$$ = $APP.cljs.core.seq($matched_tokens$$), $chunk__49687_51599$$ = null, $count__49688_51600$$ = 0, $i__49689_51601$$ = 0;;) {
            if ($i__49689_51601$$ < $count__49688_51600$$) {
              var $token_51602$$ = $chunk__49687_51599$$.cljs$core$IIndexed$_nth$arity$2(null, $i__49689_51601$$);
              clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_51602$$, $previous_converted_51581$$, $bindings$$, $transport$$, $memory$$, $listener$$);
              $i__49689_51601$$ += 1;
            } else {
              var $temp__5825__auto___51607$$ = $APP.cljs.core.seq($seq__49686_51598$$);
              if ($temp__5825__auto___51607$$) {
                var $seq__49686_51608__$1$$ = $temp__5825__auto___51607$$;
                if ($APP.cljs.core.chunked_seq_QMARK_($seq__49686_51608__$1$$)) {
                  var $c__5548__auto___51609$$ = $APP.cljs.core.chunk_first($seq__49686_51608__$1$$), $G__51610$$ = $APP.cljs.core.chunk_rest($seq__49686_51608__$1$$), $G__51611$$ = $c__5548__auto___51609$$, $G__51612$$ = $APP.cljs.core.count($c__5548__auto___51609$$);
                  $seq__49686_51598$$ = $G__51610$$;
                  $chunk__49687_51599$$ = $G__51611$$;
                  $count__49688_51600$$ = $G__51612$$;
                } else {
                  var $token_51614$$ = $APP.cljs.core.first($seq__49686_51608__$1$$);
                  clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_51614$$, $previous_converted_51581$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                  $seq__49686_51598$$ = $APP.cljs.core.next($seq__49686_51608__$1$$);
                  $chunk__49687_51599$$ = null;
                  $count__49688_51600$$ = 0;
                }
                $i__49689_51601$$ = 0;
              } else {
                break;
              }
            }
          }
        } else {
          if ($previous_converted_51581$$ == null) {
            for (var $seq__49692_51620$$ = $APP.cljs.core.seq($matched_tokens$$), $chunk__49693_51621$$ = null, $count__49694_51622$$ = 0, $i__49695_51623$$ = 0;;) {
              if ($i__49695_51623$$ < $count__49694_51622$$) {
                var $token_51625$$ = $chunk__49693_51621$$.cljs$core$IIndexed$_nth$arity$2(null, $i__49695_51623$$);
                clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_51625$$, $converted_51580$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                $i__49695_51623$$ += 1;
              } else {
                var $temp__5825__auto___51631$$ = $APP.cljs.core.seq($seq__49692_51620$$);
                if ($temp__5825__auto___51631$$) {
                  var $seq__49692_51632__$1$$ = $temp__5825__auto___51631$$;
                  if ($APP.cljs.core.chunked_seq_QMARK_($seq__49692_51632__$1$$)) {
                    var $c__5548__auto___51635$$ = $APP.cljs.core.chunk_first($seq__49692_51632__$1$$), $G__51636$$ = $APP.cljs.core.chunk_rest($seq__49692_51632__$1$$), $G__51637$$ = $c__5548__auto___51635$$, $G__51638$$ = $APP.cljs.core.count($c__5548__auto___51635$$);
                    $seq__49692_51620$$ = $G__51636$$;
                    $chunk__49693_51621$$ = $G__51637$$;
                    $count__49694_51622$$ = $G__51638$$;
                  } else {
                    var $token_51641$$ = $APP.cljs.core.first($seq__49692_51632__$1$$);
                    clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_51641$$, $converted_51580$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                    $seq__49692_51620$$ = $APP.cljs.core.next($seq__49692_51632__$1$$);
                    $chunk__49693_51621$$ = null;
                    $count__49694_51622$$ = 0;
                  }
                  $i__49695_51623$$ = 0;
                } else {
                  break;
                }
              }
            }
          } else {
            if ($APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($converted_51580$$, $previous_converted_51581$$)) {
              for (var $seq__49696_51646$$ = $APP.cljs.core.seq($matched_tokens$$), $chunk__49697_51647$$ = null, $count__49698_51648$$ = 0, $i__49699_51649$$ = 0;;) {
                if ($i__49699_51649$$ < $count__49698_51648$$) {
                  var $token_51650$$ = $chunk__49697_51647$$.cljs$core$IIndexed$_nth$arity$2(null, $i__49699_51649$$);
                  clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_51650$$, $previous_converted_51581$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                  $i__49699_51649$$ += 1;
                } else {
                  var $temp__5825__auto___51655$$ = $APP.cljs.core.seq($seq__49696_51646$$);
                  if ($temp__5825__auto___51655$$) {
                    var $seq__49696_51656__$1$$ = $temp__5825__auto___51655$$;
                    if ($APP.cljs.core.chunked_seq_QMARK_($seq__49696_51656__$1$$)) {
                      var $c__5548__auto___51657$$ = $APP.cljs.core.chunk_first($seq__49696_51656__$1$$), $G__51658$$ = $APP.cljs.core.chunk_rest($seq__49696_51656__$1$$), $G__51659$$ = $c__5548__auto___51657$$, $G__51660$$ = $APP.cljs.core.count($c__5548__auto___51657$$);
                      $seq__49696_51646$$ = $G__51658$$;
                      $chunk__49697_51647$$ = $G__51659$$;
                      $count__49698_51648$$ = $G__51660$$;
                    } else {
                      var $token_51662$$ = $APP.cljs.core.first($seq__49696_51656__$1$$);
                      clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_51662$$, $previous_converted_51581$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                      $seq__49696_51646$$ = $APP.cljs.core.next($seq__49696_51656__$1$$);
                      $chunk__49697_51647$$ = null;
                      $count__49698_51648$$ = 0;
                    }
                    $i__49699_51649$$ = 0;
                  } else {
                    break;
                  }
                }
              }
              for (var $seq__49700_51667$$ = $APP.cljs.core.seq($matched_tokens$$), $chunk__49701_51668$$ = null, $count__49702_51669$$ = 0, $i__49703_51670$$ = 0;;) {
                if ($i__49703_51670$$ < $count__49702_51669$$) {
                  var $token_51671$$ = $chunk__49701_51668$$.cljs$core$IIndexed$_nth$arity$2(null, $i__49703_51670$$);
                  clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_51671$$, $converted_51580$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                  $i__49703_51670$$ += 1;
                } else {
                  var $temp__5825__auto___51687$$ = $APP.cljs.core.seq($seq__49700_51667$$);
                  if ($temp__5825__auto___51687$$) {
                    var $seq__49700_51688__$1$$ = $temp__5825__auto___51687$$;
                    if ($APP.cljs.core.chunked_seq_QMARK_($seq__49700_51688__$1$$)) {
                      var $c__5548__auto___51689$$ = $APP.cljs.core.chunk_first($seq__49700_51688__$1$$), $G__51690$$ = $APP.cljs.core.chunk_rest($seq__49700_51688__$1$$), $G__51691$$ = $c__5548__auto___51689$$, $G__51692$$ = $APP.cljs.core.count($c__5548__auto___51689$$);
                      $seq__49700_51667$$ = $G__51690$$;
                      $chunk__49701_51668$$ = $G__51691$$;
                      $count__49702_51669$$ = $G__51692$$;
                    } else {
                      var $token_51694$$ = $APP.cljs.core.first($seq__49700_51688__$1$$);
                      clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_51694$$, $converted_51580$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                      $seq__49700_51667$$ = $APP.cljs.core.next($seq__49700_51688__$1$$);
                      $chunk__49701_51668$$ = null;
                      $count__49702_51669$$ = 0;
                    }
                    $i__49703_51670$$ = 0;
                  } else {
                    break;
                  }
                }
              }
            }
          }
        }
      }
      $i__49619$$ += 1;
    } else {
      var $temp__5825__auto__$$ = $APP.cljs.core.seq($seq__49615$$);
      if ($temp__5825__auto__$$) {
        var $seq__49615__$1$$ = $temp__5825__auto__$$;
        if ($APP.cljs.core.chunked_seq_QMARK_($seq__49615__$1$$)) {
          var $c__5548__auto__$$ = $APP.cljs.core.chunk_first($seq__49615__$1$$), $G__51703$$ = $APP.cljs.core.chunk_rest($seq__49615__$1$$), $G__51704$$ = $c__5548__auto__$$, $G__51705$$ = $APP.cljs.core.count($c__5548__auto__$$);
          $seq__49615$$ = $G__51703$$;
          $chunk__49617$$ = $G__51704$$;
          $count__49618$$ = $G__51705$$;
        } else {
          var $vec__49704$$ = $APP.cljs.core.first($seq__49615__$1$$);
          $bindings$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49704$$, 0, null);
          $facts$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49704$$, 1, null);
          var $previous_51707$$ = clara.rules.memory.get_accum_reduced($memory$$, this, $join_bindings$$, $bindings$$), $has_previous_QMARK__51708$$ = $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3072$clara_DOT_rules_DOT_memory_SLASH_no_accum_reduced, $previous_51707$$), $vec__49707_51709$$ = $has_previous_QMARK__51708$$ ? $previous_51707$$ : new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3072$clara_DOT_rules_DOT_memory_SLASH_no_accum_reduced, 
          cljs$cst$3150$clara_DOT_rules_DOT_engine_SLASH_not_reduced], null), $previous_51710__$1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49707_51709$$, 0, null), $previous_reduced_51711$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49707_51709$$, 1, null), $combined_51712$$ = $has_previous_QMARK__51708$$ ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($previous_51710__$1$$, $facts$$) : $facts$$, $combined_reduced_51713$$ = $has_matches_QMARK_$$ && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3150$clara_DOT_rules_DOT_engine_SLASH_not_reduced, 
          $previous_reduced_51711$$) ? clara.rules.engine.do_accumulate($self__$$.accumulator, $combined_51712$$) : $APP.cljs.core.truth_($has_matches_QMARK_$$ ? cljs$cst$3100$combine_fn.cljs$core$IFn$_invoke$arity$1($self__$$.accumulator) : $has_matches_QMARK_$$) ? function() {
            var $G__49711$$ = $previous_reduced_51711$$, $G__49712$$ = clara.rules.engine.do_accumulate($self__$$.accumulator, $facts$$), $fexpr__49710$$ = cljs$cst$3100$combine_fn.cljs$core$IFn$_invoke$arity$1($self__$$.accumulator);
            return $fexpr__49710$$.cljs$core$IFn$_invoke$arity$2 ? $fexpr__49710$$.cljs$core$IFn$_invoke$arity$2($G__49711$$, $G__49712$$) : $fexpr__49710$$.call(null, $G__49711$$, $G__49712$$);
          }() : $has_matches_QMARK_$$ ? clara.rules.engine.do_accumulate($APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($self__$$.accumulator, cljs$cst$3097$initial_value, $previous_reduced_51711$$), $facts$$) : cljs$cst$3150$clara_DOT_rules_DOT_engine_SLASH_not_reduced, $converted_51714$$ = $combined_reduced_51713$$ != null && $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3150$clara_DOT_rules_DOT_engine_SLASH_not_reduced, $combined_reduced_51713$$) ? $convert_return_fn$$.cljs$core$IFn$_invoke$arity$1 ? 
          $convert_return_fn$$.cljs$core$IFn$_invoke$arity$1($combined_reduced_51713$$) : $convert_return_fn$$.call(null, $combined_reduced_51713$$) : null, $previous_converted_51715$$ = $has_previous_QMARK__51708$$ && $previous_reduced_51711$$ != null && $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3150$clara_DOT_rules_DOT_engine_SLASH_not_reduced, $previous_reduced_51711$$) ? $convert_return_fn$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$$.cljs$core$IFn$_invoke$arity$1($previous_reduced_51711$$) : 
          $convert_return_fn$$.call(null, $previous_reduced_51711$$) : null, $accum_reduced_51716$$ = $APP.cljs.core.with_meta(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$combined_51712$$, $combined_reduced_51713$$], null), new $APP.cljs.core.PersistentArrayMap(null, 1, [cljs$cst$3151$clara_DOT_rules_DOT_engine_SLASH_accum_node, !0], null));
          clara.rules.listener.add_accum_reduced_BANG_($listener$$, this, $join_bindings$$, $accum_reduced_51716$$, $bindings$$);
          clara.rules.memory.add_accum_reduced_BANG_($memory$$, this, $join_bindings$$, $accum_reduced_51716$$, $bindings$$);
          if ($previous_converted_51715$$ != null || $converted_51714$$ != null) {
            if ($converted_51714$$ == null) {
              for (var $seq__49713_51758$$ = $APP.cljs.core.seq($matched_tokens$$), $chunk__49714_51759$$ = null, $count__49715_51760$$ = 0, $i__49716_51761$$ = 0;;) {
                if ($i__49716_51761$$ < $count__49715_51760$$) {
                  var $token_51762$$ = $chunk__49714_51759$$.cljs$core$IIndexed$_nth$arity$2(null, $i__49716_51761$$);
                  clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_51762$$, $previous_converted_51715$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                  $i__49716_51761$$ += 1;
                } else {
                  var $temp__5825__auto___51767__$1$$ = $APP.cljs.core.seq($seq__49713_51758$$);
                  if ($temp__5825__auto___51767__$1$$) {
                    var $seq__49713_51768__$1$$ = $temp__5825__auto___51767__$1$$;
                    if ($APP.cljs.core.chunked_seq_QMARK_($seq__49713_51768__$1$$)) {
                      var $c__5548__auto___51770$$ = $APP.cljs.core.chunk_first($seq__49713_51768__$1$$), $G__51772$$ = $APP.cljs.core.chunk_rest($seq__49713_51768__$1$$), $G__51773$$ = $c__5548__auto___51770$$, $G__51774$$ = $APP.cljs.core.count($c__5548__auto___51770$$);
                      $seq__49713_51758$$ = $G__51772$$;
                      $chunk__49714_51759$$ = $G__51773$$;
                      $count__49715_51760$$ = $G__51774$$;
                    } else {
                      var $token_51776$$ = $APP.cljs.core.first($seq__49713_51768__$1$$);
                      clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_51776$$, $previous_converted_51715$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                      $seq__49713_51758$$ = $APP.cljs.core.next($seq__49713_51768__$1$$);
                      $chunk__49714_51759$$ = null;
                      $count__49715_51760$$ = 0;
                    }
                    $i__49716_51761$$ = 0;
                  } else {
                    break;
                  }
                }
              }
            } else {
              if ($previous_converted_51715$$ == null) {
                for (var $seq__49717_51781$$ = $APP.cljs.core.seq($matched_tokens$$), $chunk__49718_51782$$ = null, $count__49719_51783$$ = 0, $i__49720_51784$$ = 0;;) {
                  if ($i__49720_51784$$ < $count__49719_51783$$) {
                    var $token_51785$$ = $chunk__49718_51782$$.cljs$core$IIndexed$_nth$arity$2(null, $i__49720_51784$$);
                    clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_51785$$, $converted_51714$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                    $i__49720_51784$$ += 1;
                  } else {
                    var $temp__5825__auto___51790__$1$$ = $APP.cljs.core.seq($seq__49717_51781$$);
                    if ($temp__5825__auto___51790__$1$$) {
                      var $seq__49717_51791__$1$$ = $temp__5825__auto___51790__$1$$;
                      if ($APP.cljs.core.chunked_seq_QMARK_($seq__49717_51791__$1$$)) {
                        var $c__5548__auto___51792$$ = $APP.cljs.core.chunk_first($seq__49717_51791__$1$$), $G__51793$$ = $APP.cljs.core.chunk_rest($seq__49717_51791__$1$$), $G__51794$$ = $c__5548__auto___51792$$, $G__51795$$ = $APP.cljs.core.count($c__5548__auto___51792$$);
                        $seq__49717_51781$$ = $G__51793$$;
                        $chunk__49718_51782$$ = $G__51794$$;
                        $count__49719_51783$$ = $G__51795$$;
                      } else {
                        var $token_51834$$ = $APP.cljs.core.first($seq__49717_51791__$1$$);
                        clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_51834$$, $converted_51714$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                        $seq__49717_51781$$ = $APP.cljs.core.next($seq__49717_51791__$1$$);
                        $chunk__49718_51782$$ = null;
                        $count__49719_51783$$ = 0;
                      }
                      $i__49720_51784$$ = 0;
                    } else {
                      break;
                    }
                  }
                }
              } else {
                if ($APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($converted_51714$$, $previous_converted_51715$$)) {
                  for (var $seq__49721_51839$$ = $APP.cljs.core.seq($matched_tokens$$), $chunk__49722_51840$$ = null, $count__49723_51841$$ = 0, $i__49724_51842$$ = 0;;) {
                    if ($i__49724_51842$$ < $count__49723_51841$$) {
                      var $token_51843$$ = $chunk__49722_51840$$.cljs$core$IIndexed$_nth$arity$2(null, $i__49724_51842$$);
                      clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_51843$$, $previous_converted_51715$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                      $i__49724_51842$$ += 1;
                    } else {
                      var $temp__5825__auto___51848__$1$$ = $APP.cljs.core.seq($seq__49721_51839$$);
                      if ($temp__5825__auto___51848__$1$$) {
                        var $seq__49721_51849__$1$$ = $temp__5825__auto___51848__$1$$;
                        if ($APP.cljs.core.chunked_seq_QMARK_($seq__49721_51849__$1$$)) {
                          var $c__5548__auto___51850$$ = $APP.cljs.core.chunk_first($seq__49721_51849__$1$$), $G__51851$$ = $APP.cljs.core.chunk_rest($seq__49721_51849__$1$$), $G__51852$$ = $c__5548__auto___51850$$, $G__51853$$ = $APP.cljs.core.count($c__5548__auto___51850$$);
                          $seq__49721_51839$$ = $G__51851$$;
                          $chunk__49722_51840$$ = $G__51852$$;
                          $count__49723_51841$$ = $G__51853$$;
                        } else {
                          var $token_51855$$ = $APP.cljs.core.first($seq__49721_51849__$1$$);
                          clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_51855$$, $previous_converted_51715$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                          $seq__49721_51839$$ = $APP.cljs.core.next($seq__49721_51849__$1$$);
                          $chunk__49722_51840$$ = null;
                          $count__49723_51841$$ = 0;
                        }
                        $i__49724_51842$$ = 0;
                      } else {
                        break;
                      }
                    }
                  }
                  for (var $seq__49726_51860$$ = $APP.cljs.core.seq($matched_tokens$$), $chunk__49727_51861$$ = null, $count__49728_51862$$ = 0, $i__49729_51863$$ = 0;;) {
                    if ($i__49729_51863$$ < $count__49728_51862$$) {
                      var $token_51864$$ = $chunk__49727_51861$$.cljs$core$IIndexed$_nth$arity$2(null, $i__49729_51863$$);
                      clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_51864$$, $converted_51714$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                      $i__49729_51863$$ += 1;
                    } else {
                      var $temp__5825__auto___51869__$1$$ = $APP.cljs.core.seq($seq__49726_51860$$);
                      if ($temp__5825__auto___51869__$1$$) {
                        var $seq__49726_51870__$1$$ = $temp__5825__auto___51869__$1$$;
                        if ($APP.cljs.core.chunked_seq_QMARK_($seq__49726_51870__$1$$)) {
                          var $c__5548__auto___51871$$ = $APP.cljs.core.chunk_first($seq__49726_51870__$1$$), $G__51872$$ = $APP.cljs.core.chunk_rest($seq__49726_51870__$1$$), $G__51873$$ = $c__5548__auto___51871$$, $G__51874$$ = $APP.cljs.core.count($c__5548__auto___51871$$);
                          $seq__49726_51860$$ = $G__51872$$;
                          $chunk__49727_51861$$ = $G__51873$$;
                          $count__49728_51862$$ = $G__51874$$;
                        } else {
                          var $token_51876$$ = $APP.cljs.core.first($seq__49726_51870__$1$$);
                          clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_51876$$, $converted_51714$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                          $seq__49726_51860$$ = $APP.cljs.core.next($seq__49726_51870__$1$$);
                          $chunk__49727_51861$$ = null;
                          $count__49728_51862$$ = 0;
                        }
                        $i__49729_51863$$ = 0;
                      } else {
                        break;
                      }
                    }
                  }
                }
              }
            }
          }
          $seq__49615$$ = $APP.cljs.core.next($seq__49615__$1$$);
          $chunk__49617$$ = null;
          $count__49618$$ = 0;
        }
        $i__49619$$ = 0;
      } else {
        return null;
      }
    }
  }
};
clara.rules.engine.AccumulateNode.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
clara.rules.engine.AccumulateNode.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k49596$$, $else__5326__auto__$$) {
  switch($k49596$$ instanceof $APP.cljs.core.Keyword ? $k49596$$.fqn : null) {
    case "id":
      return this.id;
    case "accum-condition":
      return this.accum_condition;
    case "accumulator":
      return this.accumulator;
    case "result-binding":
      return this.result_binding;
    case "children":
      return this.children;
    case "binding-keys":
      return this.binding_keys;
    case "new-bindings":
      return this.new_bindings;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k49596$$, $else__5326__auto__$$);
  }
};
clara.rules.engine.AccumulateNode.prototype.clara$rules$engine$IRightActivate$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.AccumulateNode.prototype.clara$rules$engine$IRightActivate$right_activate$arity$6 = function($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$) {
  clara.rules.listener.right_activate_BANG_($listener$$, this, $elements$$);
  return this.clara$rules$engine$IAccumRightActivate$right_activate_reduced$arity$6(null, $join_bindings$$, this.clara$rules$engine$IAccumRightActivate$pre_reduce$arity$2(null, $elements$$), $memory$$, $transport$$, $listener$$);
};
clara.rules.engine.AccumulateNode.prototype.clara$rules$engine$IRightActivate$right_retract$arity$6 = function($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$) {
  var $self__$$ = this;
  clara.rules.listener.right_retract_BANG_($listener$$, this, $elements$$);
  for (var $convert_return_fn$$ = cljs$cst$3101$convert_return_fn.cljs$core$IFn$_invoke$arity$1($self__$$.accumulator), $matched_tokens$$ = clara.rules.memory.get_tokens($memory$$, this, $join_bindings$$), $has_matches_QMARK_$$ = $APP.cljs.core.seq($matched_tokens$$), $seq__49734$$ = $APP.cljs.core.seq(clara.rules.platform.group_by_seq($APP.cljs$cst$394$bindings, $elements$$)), $chunk__49738$$ = null, $count__49739$$ = 0, $i__49740$$ = 0;;) {
    if ($i__49740$$ < $count__49739$$) {
      var $vec__49853$$ = $chunk__49738$$.cljs$core$IIndexed$_nth$arity$2(null, $i__49740$$), $bindings$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49853$$, 0, null), $elements__$1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49853$$, 1, null), $previous$$ = clara.rules.memory.get_accum_reduced($memory$$, this, $join_bindings$$, $bindings$$), $has_previous_QMARK_$$ = $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3072$clara_DOT_rules_DOT_memory_SLASH_no_accum_reduced, 
      $previous$$), $vec__49860$$ = $has_previous_QMARK_$$ ? $previous$$ : $APP.cljs.core.with_meta(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3072$clara_DOT_rules_DOT_memory_SLASH_no_accum_reduced, cljs$cst$3150$clara_DOT_rules_DOT_engine_SLASH_not_reduced], null), new $APP.cljs.core.PersistentArrayMap(null, 1, [cljs$cst$3151$clara_DOT_rules_DOT_engine_SLASH_accum_node, !0], null)), $previous__$1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49860$$, 
      0, null), $previous_reduced$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49860$$, 1, null);
      if ($has_previous_QMARK_$$) {
        var $facts_51900$$ = $APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2(cljs$cst$3109$fact, $elements__$1$$), $vec__49867_51901$$ = clara.rules.memory.remove_first_of_each($facts_51900$$, $previous__$1$$), $removed_51902$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49867_51901$$, 0, null), $retracted_51903$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49867_51901$$, 1, null), $all_retracted_QMARK__51904$$ = $APP.cljs.core.empty_QMARK_($retracted_51903$$), $retracted_reduced_51905$$ = 
        $has_matches_QMARK_$$ && !$all_retracted_QMARK__51904$$ ? function() {
          var $temp__5823__auto__$$ = cljs$cst$3098$retract_fn.cljs$core$IFn$_invoke$arity$1($self__$$.accumulator);
          return $APP.cljs.core.truth_($temp__5823__auto__$$) ? $APP.clojure.core.reducers.reduce.cljs$core$IFn$_invoke$arity$3($temp__5823__auto__$$, $previous_reduced$$, $removed_51902$$) : clara.rules.engine.do_accumulate($self__$$.accumulator, $retracted_51903$$);
        }() : cljs$cst$3150$clara_DOT_rules_DOT_engine_SLASH_not_reduced, $retracted_converted_51906$$ = $retracted_reduced_51905$$ != null && $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3150$clara_DOT_rules_DOT_engine_SLASH_not_reduced, $retracted_reduced_51905$$) ? $convert_return_fn$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$$.cljs$core$IFn$_invoke$arity$1($retracted_reduced_51905$$) : $convert_return_fn$$.call(null, $retracted_reduced_51905$$) : null, $previous_converted_51907$$ = 
        $previous_reduced$$ != null && $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3150$clara_DOT_rules_DOT_engine_SLASH_not_reduced, $previous_reduced$$) ? $convert_return_fn$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$$.cljs$core$IFn$_invoke$arity$1($previous_reduced$$) : $convert_return_fn$$.call(null, $previous_reduced$$) : null;
        if ($all_retracted_QMARK__51904$$) {
          clara.rules.listener.remove_accum_reduced_BANG_($listener$$, this, $join_bindings$$, $bindings$$);
          clara.rules.memory.remove_accum_reduced_BANG_($memory$$, this, $join_bindings$$, $bindings$$);
          if ($previous_converted_51907$$ != null) {
            for (var $seq__49871_51911$$ = $APP.cljs.core.seq($matched_tokens$$), $chunk__49872_51912$$ = null, $count__49873_51913$$ = 0, $i__49874_51914$$ = 0;;) {
              if ($i__49874_51914$$ < $count__49873_51913$$) {
                var $token_51915$$ = $chunk__49872_51912$$.cljs$core$IIndexed$_nth$arity$2(null, $i__49874_51914$$);
                clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_51915$$, $previous_converted_51907$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                $i__49874_51914$$ += 1;
              } else {
                var $temp__5825__auto___51920$$ = $APP.cljs.core.seq($seq__49871_51911$$);
                if ($temp__5825__auto___51920$$) {
                  var $seq__49871_51921__$1$$ = $temp__5825__auto___51920$$;
                  if ($APP.cljs.core.chunked_seq_QMARK_($seq__49871_51921__$1$$)) {
                    var $c__5548__auto___51922$$ = $APP.cljs.core.chunk_first($seq__49871_51921__$1$$), $G__51923$$ = $APP.cljs.core.chunk_rest($seq__49871_51921__$1$$), $G__51924$$ = $c__5548__auto___51922$$, $G__51925$$ = $APP.cljs.core.count($c__5548__auto___51922$$);
                    $seq__49871_51911$$ = $G__51923$$;
                    $chunk__49872_51912$$ = $G__51924$$;
                    $count__49873_51913$$ = $G__51925$$;
                  } else {
                    var $token_51927$$ = $APP.cljs.core.first($seq__49871_51921__$1$$);
                    clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_51927$$, $previous_converted_51907$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                    $seq__49871_51911$$ = $APP.cljs.core.next($seq__49871_51921__$1$$);
                    $chunk__49872_51912$$ = null;
                    $count__49873_51913$$ = 0;
                  }
                  $i__49874_51914$$ = 0;
                } else {
                  break;
                }
              }
            }
          }
          var $initial_value_51932$$ = cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1($self__$$.accumulator), $initial_converted_51933$$ = $APP.cljs.core.truth_($initial_value_51932$$) ? $convert_return_fn$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$$.cljs$core$IFn$_invoke$arity$1($initial_value_51932$$) : $convert_return_fn$$.call(null, $initial_value_51932$$) : null;
          if ($initial_converted_51933$$ != null && $APP.cljs.core.empty_QMARK_($self__$$.new_bindings)) {
            for (var $seq__49875_51935$$ = $APP.cljs.core.seq($matched_tokens$$), $chunk__49876_51936$$ = null, $count__49877_51937$$ = 0, $i__49878_51938$$ = 0;;) {
              if ($i__49878_51938$$ < $count__49877_51937$$) {
                var $token_51939$$ = $chunk__49876_51936$$.cljs$core$IIndexed$_nth$arity$2(null, $i__49878_51938$$);
                clara.rules.listener.add_accum_reduced_BANG_($listener$$, this, $join_bindings$$, $APP.cljs.core.with_meta(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.PersistentVector.EMPTY, $initial_value_51932$$], null), new $APP.cljs.core.PersistentArrayMap(null, 1, [cljs$cst$3151$clara_DOT_rules_DOT_engine_SLASH_accum_node, !0], null)), $join_bindings$$);
                clara.rules.memory.add_accum_reduced_BANG_($memory$$, this, $join_bindings$$, $APP.cljs.core.with_meta(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.PersistentVector.EMPTY, $initial_value_51932$$], null), new $APP.cljs.core.PersistentArrayMap(null, 1, [cljs$cst$3151$clara_DOT_rules_DOT_engine_SLASH_accum_node, !0], null)), $join_bindings$$);
                clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_51939$$, $initial_converted_51933$$, $APP.cljs.core.PersistentArrayMap.EMPTY, $transport$$, $memory$$, $listener$$);
                $i__49878_51938$$ += 1;
              } else {
                var $temp__5825__auto___51944$$ = $APP.cljs.core.seq($seq__49875_51935$$);
                if ($temp__5825__auto___51944$$) {
                  var $seq__49875_51945__$1$$ = $temp__5825__auto___51944$$;
                  if ($APP.cljs.core.chunked_seq_QMARK_($seq__49875_51945__$1$$)) {
                    var $c__5548__auto___51946$$ = $APP.cljs.core.chunk_first($seq__49875_51945__$1$$), $G__51947$$ = $APP.cljs.core.chunk_rest($seq__49875_51945__$1$$), $G__51948$$ = $c__5548__auto___51946$$, $G__51949$$ = $APP.cljs.core.count($c__5548__auto___51946$$);
                    $seq__49875_51935$$ = $G__51947$$;
                    $chunk__49876_51936$$ = $G__51948$$;
                    $count__49877_51937$$ = $G__51949$$;
                  } else {
                    var $token_51951$$ = $APP.cljs.core.first($seq__49875_51945__$1$$);
                    clara.rules.listener.add_accum_reduced_BANG_($listener$$, this, $join_bindings$$, $APP.cljs.core.with_meta(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.PersistentVector.EMPTY, $initial_value_51932$$], null), new $APP.cljs.core.PersistentArrayMap(null, 1, [cljs$cst$3151$clara_DOT_rules_DOT_engine_SLASH_accum_node, !0], null)), $join_bindings$$);
                    clara.rules.memory.add_accum_reduced_BANG_($memory$$, this, $join_bindings$$, $APP.cljs.core.with_meta(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.PersistentVector.EMPTY, $initial_value_51932$$], null), new $APP.cljs.core.PersistentArrayMap(null, 1, [cljs$cst$3151$clara_DOT_rules_DOT_engine_SLASH_accum_node, !0], null)), $join_bindings$$);
                    clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_51951$$, $initial_converted_51933$$, $APP.cljs.core.PersistentArrayMap.EMPTY, $transport$$, $memory$$, $listener$$);
                    $seq__49875_51935$$ = $APP.cljs.core.next($seq__49875_51945__$1$$);
                    $chunk__49876_51936$$ = null;
                    $count__49877_51937$$ = 0;
                  }
                  $i__49878_51938$$ = 0;
                } else {
                  break;
                }
              }
            }
          }
        } else {
          if (clara.rules.listener.add_accum_reduced_BANG_($listener$$, this, $join_bindings$$, $APP.cljs.core.with_meta(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$retracted_51903$$, $retracted_reduced_51905$$], null), new $APP.cljs.core.PersistentArrayMap(null, 1, [cljs$cst$3151$clara_DOT_rules_DOT_engine_SLASH_accum_node, !0], null)), $bindings$$), clara.rules.memory.add_accum_reduced_BANG_($memory$$, this, $join_bindings$$, $APP.cljs.core.with_meta(new $APP.cljs.core.PersistentVector(null, 
          2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$retracted_51903$$, $retracted_reduced_51905$$], null), new $APP.cljs.core.PersistentArrayMap(null, 1, [cljs$cst$3151$clara_DOT_rules_DOT_engine_SLASH_accum_node, !0], null)), $bindings$$), $previous_converted_51907$$ != null || $retracted_converted_51906$$ != null) {
            if ($previous_converted_51907$$ == null) {
              for (var $seq__49879_51956$$ = $APP.cljs.core.seq($matched_tokens$$), $chunk__49880_51957$$ = null, $count__49881_51958$$ = 0, $i__49882_51959$$ = 0;;) {
                if ($i__49882_51959$$ < $count__49881_51958$$) {
                  var $token_51960$$ = $chunk__49880_51957$$.cljs$core$IIndexed$_nth$arity$2(null, $i__49882_51959$$);
                  clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_51960$$, $retracted_converted_51906$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                  $i__49882_51959$$ += 1;
                } else {
                  var $temp__5825__auto___51965$$ = $APP.cljs.core.seq($seq__49879_51956$$);
                  if ($temp__5825__auto___51965$$) {
                    var $seq__49879_51966__$1$$ = $temp__5825__auto___51965$$;
                    if ($APP.cljs.core.chunked_seq_QMARK_($seq__49879_51966__$1$$)) {
                      var $c__5548__auto___51967$$ = $APP.cljs.core.chunk_first($seq__49879_51966__$1$$), $G__51968$$ = $APP.cljs.core.chunk_rest($seq__49879_51966__$1$$), $G__51969$$ = $c__5548__auto___51967$$, $G__51970$$ = $APP.cljs.core.count($c__5548__auto___51967$$);
                      $seq__49879_51956$$ = $G__51968$$;
                      $chunk__49880_51957$$ = $G__51969$$;
                      $count__49881_51958$$ = $G__51970$$;
                    } else {
                      var $token_51972$$ = $APP.cljs.core.first($seq__49879_51966__$1$$);
                      clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_51972$$, $retracted_converted_51906$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                      $seq__49879_51956$$ = $APP.cljs.core.next($seq__49879_51966__$1$$);
                      $chunk__49880_51957$$ = null;
                      $count__49881_51958$$ = 0;
                    }
                    $i__49882_51959$$ = 0;
                  } else {
                    break;
                  }
                }
              }
            } else {
              if ($retracted_converted_51906$$ == null) {
                for (var $seq__49883_51977$$ = $APP.cljs.core.seq($matched_tokens$$), $chunk__49884_51978$$ = null, $count__49885_51979$$ = 0, $i__49886_51980$$ = 0;;) {
                  if ($i__49886_51980$$ < $count__49885_51979$$) {
                    var $token_51981$$ = $chunk__49884_51978$$.cljs$core$IIndexed$_nth$arity$2(null, $i__49886_51980$$);
                    clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_51981$$, $previous_converted_51907$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                    $i__49886_51980$$ += 1;
                  } else {
                    var $temp__5825__auto___51986$$ = $APP.cljs.core.seq($seq__49883_51977$$);
                    if ($temp__5825__auto___51986$$) {
                      var $seq__49883_51987__$1$$ = $temp__5825__auto___51986$$;
                      if ($APP.cljs.core.chunked_seq_QMARK_($seq__49883_51987__$1$$)) {
                        var $c__5548__auto___51988$$ = $APP.cljs.core.chunk_first($seq__49883_51987__$1$$), $G__51989$$ = $APP.cljs.core.chunk_rest($seq__49883_51987__$1$$), $G__51990$$ = $c__5548__auto___51988$$, $G__51991$$ = $APP.cljs.core.count($c__5548__auto___51988$$);
                        $seq__49883_51977$$ = $G__51989$$;
                        $chunk__49884_51978$$ = $G__51990$$;
                        $count__49885_51979$$ = $G__51991$$;
                      } else {
                        var $token_51993$$ = $APP.cljs.core.first($seq__49883_51987__$1$$);
                        clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_51993$$, $previous_converted_51907$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                        $seq__49883_51977$$ = $APP.cljs.core.next($seq__49883_51987__$1$$);
                        $chunk__49884_51978$$ = null;
                        $count__49885_51979$$ = 0;
                      }
                      $i__49886_51980$$ = 0;
                    } else {
                      break;
                    }
                  }
                }
              } else {
                if ($APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($retracted_converted_51906$$, $previous_converted_51907$$)) {
                  for (var $seq__49887_51998$$ = $APP.cljs.core.seq($matched_tokens$$), $chunk__49888_51999$$ = null, $count__49889_52000$$ = 0, $i__49890_52001$$ = 0;;) {
                    if ($i__49890_52001$$ < $count__49889_52000$$) {
                      var $token_52002$$ = $chunk__49888_51999$$.cljs$core$IIndexed$_nth$arity$2(null, $i__49890_52001$$);
                      clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_52002$$, $previous_converted_51907$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                      $i__49890_52001$$ += 1;
                    } else {
                      var $temp__5825__auto___52009$$ = $APP.cljs.core.seq($seq__49887_51998$$);
                      if ($temp__5825__auto___52009$$) {
                        var $seq__49887_52010__$1$$ = $temp__5825__auto___52009$$;
                        if ($APP.cljs.core.chunked_seq_QMARK_($seq__49887_52010__$1$$)) {
                          var $c__5548__auto___52011$$ = $APP.cljs.core.chunk_first($seq__49887_52010__$1$$), $G__52012$$ = $APP.cljs.core.chunk_rest($seq__49887_52010__$1$$), $G__52013$$ = $c__5548__auto___52011$$, $G__52014$$ = $APP.cljs.core.count($c__5548__auto___52011$$);
                          $seq__49887_51998$$ = $G__52012$$;
                          $chunk__49888_51999$$ = $G__52013$$;
                          $count__49889_52000$$ = $G__52014$$;
                        } else {
                          var $token_52016$$ = $APP.cljs.core.first($seq__49887_52010__$1$$);
                          clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_52016$$, $previous_converted_51907$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                          $seq__49887_51998$$ = $APP.cljs.core.next($seq__49887_52010__$1$$);
                          $chunk__49888_51999$$ = null;
                          $count__49889_52000$$ = 0;
                        }
                        $i__49890_52001$$ = 0;
                      } else {
                        break;
                      }
                    }
                  }
                  for (var $seq__49891_52021$$ = $APP.cljs.core.seq($matched_tokens$$), $chunk__49892_52022$$ = null, $count__49893_52023$$ = 0, $i__49894_52024$$ = 0;;) {
                    if ($i__49894_52024$$ < $count__49893_52023$$) {
                      var $token_52025$$ = $chunk__49892_52022$$.cljs$core$IIndexed$_nth$arity$2(null, $i__49894_52024$$);
                      clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_52025$$, $retracted_converted_51906$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                      $i__49894_52024$$ += 1;
                    } else {
                      var $temp__5825__auto___52030$$ = $APP.cljs.core.seq($seq__49891_52021$$);
                      if ($temp__5825__auto___52030$$) {
                        var $seq__49891_52031__$1$$ = $temp__5825__auto___52030$$;
                        if ($APP.cljs.core.chunked_seq_QMARK_($seq__49891_52031__$1$$)) {
                          var $c__5548__auto___52032$$ = $APP.cljs.core.chunk_first($seq__49891_52031__$1$$), $G__52033$$ = $APP.cljs.core.chunk_rest($seq__49891_52031__$1$$), $G__52034$$ = $c__5548__auto___52032$$, $G__52035$$ = $APP.cljs.core.count($c__5548__auto___52032$$);
                          $seq__49891_52021$$ = $G__52033$$;
                          $chunk__49892_52022$$ = $G__52034$$;
                          $count__49893_52023$$ = $G__52035$$;
                        } else {
                          var $token_52037$$ = $APP.cljs.core.first($seq__49891_52031__$1$$);
                          clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_52037$$, $retracted_converted_51906$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                          $seq__49891_52021$$ = $APP.cljs.core.next($seq__49891_52031__$1$$);
                          $chunk__49892_52022$$ = null;
                          $count__49893_52023$$ = 0;
                        }
                        $i__49894_52024$$ = 0;
                      } else {
                        break;
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      $i__49740$$ += 1;
    } else {
      var $temp__5825__auto__$$ = $APP.cljs.core.seq($seq__49734$$);
      if ($temp__5825__auto__$$) {
        var $seq__49734__$1$$ = $temp__5825__auto__$$;
        if ($APP.cljs.core.chunked_seq_QMARK_($seq__49734__$1$$)) {
          var $c__5548__auto__$$ = $APP.cljs.core.chunk_first($seq__49734__$1$$), $G__52050$$ = $APP.cljs.core.chunk_rest($seq__49734__$1$$), $G__52051$$ = $c__5548__auto__$$, $G__52052$$ = $APP.cljs.core.count($c__5548__auto__$$);
          $seq__49734$$ = $G__52050$$;
          $chunk__49738$$ = $G__52051$$;
          $count__49739$$ = $G__52052$$;
        } else {
          var $vec__49899$$ = $APP.cljs.core.first($seq__49734__$1$$);
          $bindings$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49899$$, 0, null);
          $elements__$1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49899$$, 1, null);
          $previous$$ = clara.rules.memory.get_accum_reduced($memory$$, this, $join_bindings$$, $bindings$$);
          var $vec__49902$$ = ($has_previous_QMARK_$$ = $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3072$clara_DOT_rules_DOT_memory_SLASH_no_accum_reduced, $previous$$)) ? $previous$$ : $APP.cljs.core.with_meta(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3072$clara_DOT_rules_DOT_memory_SLASH_no_accum_reduced, cljs$cst$3150$clara_DOT_rules_DOT_engine_SLASH_not_reduced], null), new $APP.cljs.core.PersistentArrayMap(null, 1, 
          [cljs$cst$3151$clara_DOT_rules_DOT_engine_SLASH_accum_node, !0], null));
          $previous__$1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49902$$, 0, null);
          $previous_reduced$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49902$$, 1, null);
          if ($has_previous_QMARK_$$) {
            var $facts_52054$$ = $APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2(cljs$cst$3109$fact, $elements__$1$$), $vec__49905_52055$$ = clara.rules.memory.remove_first_of_each($facts_52054$$, $previous__$1$$), $removed_52056$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49905_52055$$, 0, null), $retracted_52057$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__49905_52055$$, 1, null), $all_retracted_QMARK__52058$$ = $APP.cljs.core.empty_QMARK_($retracted_52057$$), $retracted_reduced_52059$$ = 
            $has_matches_QMARK_$$ && !$all_retracted_QMARK__52058$$ ? function() {
              var $temp__5823__auto__$$ = cljs$cst$3098$retract_fn.cljs$core$IFn$_invoke$arity$1($self__$$.accumulator);
              return $APP.cljs.core.truth_($temp__5823__auto__$$) ? $APP.clojure.core.reducers.reduce.cljs$core$IFn$_invoke$arity$3($temp__5823__auto__$$, $previous_reduced$$, $removed_52056$$) : clara.rules.engine.do_accumulate($self__$$.accumulator, $retracted_52057$$);
            }() : cljs$cst$3150$clara_DOT_rules_DOT_engine_SLASH_not_reduced, $retracted_converted_52060$$ = $retracted_reduced_52059$$ != null && $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3150$clara_DOT_rules_DOT_engine_SLASH_not_reduced, $retracted_reduced_52059$$) ? $convert_return_fn$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$$.cljs$core$IFn$_invoke$arity$1($retracted_reduced_52059$$) : $convert_return_fn$$.call(null, $retracted_reduced_52059$$) : null, $previous_converted_52061$$ = 
            $previous_reduced$$ != null && $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3150$clara_DOT_rules_DOT_engine_SLASH_not_reduced, $previous_reduced$$) ? $convert_return_fn$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$$.cljs$core$IFn$_invoke$arity$1($previous_reduced$$) : $convert_return_fn$$.call(null, $previous_reduced$$) : null;
            if ($all_retracted_QMARK__52058$$) {
              clara.rules.listener.remove_accum_reduced_BANG_($listener$$, this, $join_bindings$$, $bindings$$);
              clara.rules.memory.remove_accum_reduced_BANG_($memory$$, this, $join_bindings$$, $bindings$$);
              if ($previous_converted_52061$$ != null) {
                for (var $seq__49909_52064$$ = $APP.cljs.core.seq($matched_tokens$$), $chunk__49910_52065$$ = null, $count__49911_52066$$ = 0, $i__49912_52067$$ = 0;;) {
                  if ($i__49912_52067$$ < $count__49911_52066$$) {
                    var $token_52069$$ = $chunk__49910_52065$$.cljs$core$IIndexed$_nth$arity$2(null, $i__49912_52067$$);
                    clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_52069$$, $previous_converted_52061$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                    $i__49912_52067$$ += 1;
                  } else {
                    var $temp__5825__auto___52075__$1$$ = $APP.cljs.core.seq($seq__49909_52064$$);
                    if ($temp__5825__auto___52075__$1$$) {
                      var $seq__49909_52076__$1$$ = $temp__5825__auto___52075__$1$$;
                      if ($APP.cljs.core.chunked_seq_QMARK_($seq__49909_52076__$1$$)) {
                        var $c__5548__auto___52077$$ = $APP.cljs.core.chunk_first($seq__49909_52076__$1$$), $G__52078$$ = $APP.cljs.core.chunk_rest($seq__49909_52076__$1$$), $G__52079$$ = $c__5548__auto___52077$$, $G__52080$$ = $APP.cljs.core.count($c__5548__auto___52077$$);
                        $seq__49909_52064$$ = $G__52078$$;
                        $chunk__49910_52065$$ = $G__52079$$;
                        $count__49911_52066$$ = $G__52080$$;
                      } else {
                        var $token_52083$$ = $APP.cljs.core.first($seq__49909_52076__$1$$);
                        clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_52083$$, $previous_converted_52061$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                        $seq__49909_52064$$ = $APP.cljs.core.next($seq__49909_52076__$1$$);
                        $chunk__49910_52065$$ = null;
                        $count__49911_52066$$ = 0;
                      }
                      $i__49912_52067$$ = 0;
                    } else {
                      break;
                    }
                  }
                }
              }
              var $initial_value_52090$$ = cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1($self__$$.accumulator), $initial_converted_52091$$ = $APP.cljs.core.truth_($initial_value_52090$$) ? $convert_return_fn$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$$.cljs$core$IFn$_invoke$arity$1($initial_value_52090$$) : $convert_return_fn$$.call(null, $initial_value_52090$$) : null;
              if ($initial_converted_52091$$ != null && $APP.cljs.core.empty_QMARK_($self__$$.new_bindings)) {
                for (var $seq__49919_52093$$ = $APP.cljs.core.seq($matched_tokens$$), $chunk__49920_52094$$ = null, $count__49921_52095$$ = 0, $i__49922_52096$$ = 0;;) {
                  if ($i__49922_52096$$ < $count__49921_52095$$) {
                    var $token_52097$$ = $chunk__49920_52094$$.cljs$core$IIndexed$_nth$arity$2(null, $i__49922_52096$$);
                    clara.rules.listener.add_accum_reduced_BANG_($listener$$, this, $join_bindings$$, $APP.cljs.core.with_meta(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.PersistentVector.EMPTY, $initial_value_52090$$], null), new $APP.cljs.core.PersistentArrayMap(null, 1, [cljs$cst$3151$clara_DOT_rules_DOT_engine_SLASH_accum_node, !0], null)), $join_bindings$$);
                    clara.rules.memory.add_accum_reduced_BANG_($memory$$, this, $join_bindings$$, $APP.cljs.core.with_meta(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.PersistentVector.EMPTY, $initial_value_52090$$], null), new $APP.cljs.core.PersistentArrayMap(null, 1, [cljs$cst$3151$clara_DOT_rules_DOT_engine_SLASH_accum_node, !0], null)), $join_bindings$$);
                    clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_52097$$, $initial_converted_52091$$, $APP.cljs.core.PersistentArrayMap.EMPTY, $transport$$, $memory$$, $listener$$);
                    $i__49922_52096$$ += 1;
                  } else {
                    var $temp__5825__auto___52104__$1$$ = $APP.cljs.core.seq($seq__49919_52093$$);
                    if ($temp__5825__auto___52104__$1$$) {
                      var $seq__49919_52105__$1$$ = $temp__5825__auto___52104__$1$$;
                      if ($APP.cljs.core.chunked_seq_QMARK_($seq__49919_52105__$1$$)) {
                        var $c__5548__auto___52106$$ = $APP.cljs.core.chunk_first($seq__49919_52105__$1$$), $G__52107$$ = $APP.cljs.core.chunk_rest($seq__49919_52105__$1$$), $G__52108$$ = $c__5548__auto___52106$$, $G__52109$$ = $APP.cljs.core.count($c__5548__auto___52106$$);
                        $seq__49919_52093$$ = $G__52107$$;
                        $chunk__49920_52094$$ = $G__52108$$;
                        $count__49921_52095$$ = $G__52109$$;
                      } else {
                        var $token_52111$$ = $APP.cljs.core.first($seq__49919_52105__$1$$);
                        clara.rules.listener.add_accum_reduced_BANG_($listener$$, this, $join_bindings$$, $APP.cljs.core.with_meta(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.PersistentVector.EMPTY, $initial_value_52090$$], null), new $APP.cljs.core.PersistentArrayMap(null, 1, [cljs$cst$3151$clara_DOT_rules_DOT_engine_SLASH_accum_node, !0], null)), $join_bindings$$);
                        clara.rules.memory.add_accum_reduced_BANG_($memory$$, this, $join_bindings$$, $APP.cljs.core.with_meta(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.PersistentVector.EMPTY, $initial_value_52090$$], null), new $APP.cljs.core.PersistentArrayMap(null, 1, [cljs$cst$3151$clara_DOT_rules_DOT_engine_SLASH_accum_node, !0], null)), $join_bindings$$);
                        clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_52111$$, $initial_converted_52091$$, $APP.cljs.core.PersistentArrayMap.EMPTY, $transport$$, $memory$$, $listener$$);
                        $seq__49919_52093$$ = $APP.cljs.core.next($seq__49919_52105__$1$$);
                        $chunk__49920_52094$$ = null;
                        $count__49921_52095$$ = 0;
                      }
                      $i__49922_52096$$ = 0;
                    } else {
                      break;
                    }
                  }
                }
              }
            } else {
              if (clara.rules.listener.add_accum_reduced_BANG_($listener$$, this, $join_bindings$$, $APP.cljs.core.with_meta(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$retracted_52057$$, $retracted_reduced_52059$$], null), new $APP.cljs.core.PersistentArrayMap(null, 1, [cljs$cst$3151$clara_DOT_rules_DOT_engine_SLASH_accum_node, !0], null)), $bindings$$), clara.rules.memory.add_accum_reduced_BANG_($memory$$, this, $join_bindings$$, $APP.cljs.core.with_meta(new $APP.cljs.core.PersistentVector(null, 
              2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$retracted_52057$$, $retracted_reduced_52059$$], null), new $APP.cljs.core.PersistentArrayMap(null, 1, [cljs$cst$3151$clara_DOT_rules_DOT_engine_SLASH_accum_node, !0], null)), $bindings$$), $previous_converted_52061$$ != null || $retracted_converted_52060$$ != null) {
                if ($previous_converted_52061$$ == null) {
                  for (var $seq__49923_52116$$ = $APP.cljs.core.seq($matched_tokens$$), $chunk__49924_52117$$ = null, $count__49925_52118$$ = 0, $i__49926_52119$$ = 0;;) {
                    if ($i__49926_52119$$ < $count__49925_52118$$) {
                      var $token_52120$$ = $chunk__49924_52117$$.cljs$core$IIndexed$_nth$arity$2(null, $i__49926_52119$$);
                      clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_52120$$, $retracted_converted_52060$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                      $i__49926_52119$$ += 1;
                    } else {
                      var $temp__5825__auto___52125__$1$$ = $APP.cljs.core.seq($seq__49923_52116$$);
                      if ($temp__5825__auto___52125__$1$$) {
                        var $seq__49923_52126__$1$$ = $temp__5825__auto___52125__$1$$;
                        if ($APP.cljs.core.chunked_seq_QMARK_($seq__49923_52126__$1$$)) {
                          var $c__5548__auto___52127$$ = $APP.cljs.core.chunk_first($seq__49923_52126__$1$$), $G__52128$$ = $APP.cljs.core.chunk_rest($seq__49923_52126__$1$$), $G__52129$$ = $c__5548__auto___52127$$, $G__52130$$ = $APP.cljs.core.count($c__5548__auto___52127$$);
                          $seq__49923_52116$$ = $G__52128$$;
                          $chunk__49924_52117$$ = $G__52129$$;
                          $count__49925_52118$$ = $G__52130$$;
                        } else {
                          var $token_52132$$ = $APP.cljs.core.first($seq__49923_52126__$1$$);
                          clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_52132$$, $retracted_converted_52060$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                          $seq__49923_52116$$ = $APP.cljs.core.next($seq__49923_52126__$1$$);
                          $chunk__49924_52117$$ = null;
                          $count__49925_52118$$ = 0;
                        }
                        $i__49926_52119$$ = 0;
                      } else {
                        break;
                      }
                    }
                  }
                } else {
                  if ($retracted_converted_52060$$ == null) {
                    for (var $seq__49932_52137$$ = $APP.cljs.core.seq($matched_tokens$$), $chunk__49933_52138$$ = null, $count__49934_52139$$ = 0, $i__49935_52140$$ = 0;;) {
                      if ($i__49935_52140$$ < $count__49934_52139$$) {
                        var $token_52141$$ = $chunk__49933_52138$$.cljs$core$IIndexed$_nth$arity$2(null, $i__49935_52140$$);
                        clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_52141$$, $previous_converted_52061$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                        $i__49935_52140$$ += 1;
                      } else {
                        var $temp__5825__auto___52146__$1$$ = $APP.cljs.core.seq($seq__49932_52137$$);
                        if ($temp__5825__auto___52146__$1$$) {
                          var $seq__49932_52147__$1$$ = $temp__5825__auto___52146__$1$$;
                          if ($APP.cljs.core.chunked_seq_QMARK_($seq__49932_52147__$1$$)) {
                            var $c__5548__auto___52148$$ = $APP.cljs.core.chunk_first($seq__49932_52147__$1$$), $G__52149$$ = $APP.cljs.core.chunk_rest($seq__49932_52147__$1$$), $G__52150$$ = $c__5548__auto___52148$$, $G__52151$$ = $APP.cljs.core.count($c__5548__auto___52148$$);
                            $seq__49932_52137$$ = $G__52149$$;
                            $chunk__49933_52138$$ = $G__52150$$;
                            $count__49934_52139$$ = $G__52151$$;
                          } else {
                            var $token_52153$$ = $APP.cljs.core.first($seq__49932_52147__$1$$);
                            clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_52153$$, $previous_converted_52061$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                            $seq__49932_52137$$ = $APP.cljs.core.next($seq__49932_52147__$1$$);
                            $chunk__49933_52138$$ = null;
                            $count__49934_52139$$ = 0;
                          }
                          $i__49935_52140$$ = 0;
                        } else {
                          break;
                        }
                      }
                    }
                  } else {
                    if ($APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($retracted_converted_52060$$, $previous_converted_52061$$)) {
                      for (var $seq__49937_52158$$ = $APP.cljs.core.seq($matched_tokens$$), $chunk__49938_52159$$ = null, $count__49939_52160$$ = 0, $i__49940_52161$$ = 0;;) {
                        if ($i__49940_52161$$ < $count__49939_52160$$) {
                          var $token_52162$$ = $chunk__49938_52159$$.cljs$core$IIndexed$_nth$arity$2(null, $i__49940_52161$$);
                          clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_52162$$, $previous_converted_52061$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                          $i__49940_52161$$ += 1;
                        } else {
                          var $temp__5825__auto___52167__$1$$ = $APP.cljs.core.seq($seq__49937_52158$$);
                          if ($temp__5825__auto___52167__$1$$) {
                            var $seq__49937_52169__$1$$ = $temp__5825__auto___52167__$1$$;
                            if ($APP.cljs.core.chunked_seq_QMARK_($seq__49937_52169__$1$$)) {
                              var $c__5548__auto___52170$$ = $APP.cljs.core.chunk_first($seq__49937_52169__$1$$), $G__52171$$ = $APP.cljs.core.chunk_rest($seq__49937_52169__$1$$), $G__52172$$ = $c__5548__auto___52170$$, $G__52173$$ = $APP.cljs.core.count($c__5548__auto___52170$$);
                              $seq__49937_52158$$ = $G__52171$$;
                              $chunk__49938_52159$$ = $G__52172$$;
                              $count__49939_52160$$ = $G__52173$$;
                            } else {
                              var $token_52177$$ = $APP.cljs.core.first($seq__49937_52169__$1$$);
                              clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_52177$$, $previous_converted_52061$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                              $seq__49937_52158$$ = $APP.cljs.core.next($seq__49937_52169__$1$$);
                              $chunk__49938_52159$$ = null;
                              $count__49939_52160$$ = 0;
                            }
                            $i__49940_52161$$ = 0;
                          } else {
                            break;
                          }
                        }
                      }
                      for (var $seq__49944_52183$$ = $APP.cljs.core.seq($matched_tokens$$), $chunk__49945_52184$$ = null, $count__49946_52185$$ = 0, $i__49947_52186$$ = 0;;) {
                        if ($i__49947_52186$$ < $count__49946_52185$$) {
                          var $token_52187$$ = $chunk__49945_52184$$.cljs$core$IIndexed$_nth$arity$2(null, $i__49947_52186$$);
                          clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_52187$$, $retracted_converted_52060$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                          $i__49947_52186$$ += 1;
                        } else {
                          var $temp__5825__auto___52192__$1$$ = $APP.cljs.core.seq($seq__49944_52183$$);
                          if ($temp__5825__auto___52192__$1$$) {
                            var $seq__49944_52193__$1$$ = $temp__5825__auto___52192__$1$$;
                            if ($APP.cljs.core.chunked_seq_QMARK_($seq__49944_52193__$1$$)) {
                              var $c__5548__auto___52194$$ = $APP.cljs.core.chunk_first($seq__49944_52193__$1$$), $G__52195$$ = $APP.cljs.core.chunk_rest($seq__49944_52193__$1$$), $G__52196$$ = $c__5548__auto___52194$$, $G__52197$$ = $APP.cljs.core.count($c__5548__auto___52194$$);
                              $seq__49944_52183$$ = $G__52195$$;
                              $chunk__49945_52184$$ = $G__52196$$;
                              $count__49946_52185$$ = $G__52197$$;
                            } else {
                              var $token_52199$$ = $APP.cljs.core.first($seq__49944_52193__$1$$);
                              clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_52199$$, $retracted_converted_52060$$, $bindings$$, $transport$$, $memory$$, $listener$$);
                              $seq__49944_52183$$ = $APP.cljs.core.next($seq__49944_52193__$1$$);
                              $chunk__49945_52184$$ = null;
                              $count__49946_52185$$ = 0;
                            }
                            $i__49947_52186$$ = 0;
                          } else {
                            break;
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
          $seq__49734$$ = $APP.cljs.core.next($seq__49734__$1$$);
          $chunk__49738$$ = null;
          $count__49739$$ = 0;
        }
        $i__49740$$ = 0;
      } else {
        return null;
      }
    }
  }
};
clara.rules.engine.AccumulateNode.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__49951_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__49951_v__5348__auto__$$, 0, null);
    $p__49951_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__49951_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__49951_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__49951_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
clara.rules.engine.AccumulateNode.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#clara.rules.engine.AccumulateNode{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 7, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id, this.id], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3152$accum_condition, this.accum_condition], 
  null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3153$accumulator, this.accumulator], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3154$result_binding, this.result_binding], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$3116$children, this.children], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
  [cljs$cst$3142$binding_keys, this.binding_keys], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3155$new_bindings, this.new_bindings], null)], null), this.__extmap));
};
clara.rules.engine.AccumulateNode.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__49595$$) {
  return new $APP.cljs.core.RecordIter(0, this, 7, new $APP.cljs.core.PersistentVector(null, 7, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id, cljs$cst$3152$accum_condition, cljs$cst$3153$accumulator, cljs$cst$3154$result_binding, $APP.cljs$cst$3116$children, cljs$cst$3142$binding_keys, cljs$cst$3155$new_bindings], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
clara.rules.engine.AccumulateNode.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
clara.rules.engine.AccumulateNode.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new clara.rules.engine.AccumulateNode(this.id, this.accum_condition, this.accumulator, this.result_binding, this.children, this.binding_keys, this.new_bindings, this.__meta, this.__extmap, this.__hash);
};
clara.rules.engine.AccumulateNode.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 7 + $APP.cljs.core.count(this.__extmap);
};
clara.rules.engine.AccumulateNode.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$107_h__5134__auto____$1$jscomp$107_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$107_h__5134__auto____$1$jscomp$107_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$107_h__5134__auto____$1$jscomp$107_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$107_h__5134__auto____$1$jscomp$107_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$107_h__5134__auto____$1$jscomp$107_this__5319__auto__$$ = -1077214365 ^ $APP.cljs.core.hash_unordered_coll(this);
};
clara.rules.engine.AccumulateNode.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this49597$$, $other49598$$) {
  return $other49598$$ != null && this.constructor === $other49598$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.id, $other49598$$.id) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.accum_condition, $other49598$$.accum_condition) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.accumulator, $other49598$$.accumulator) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.result_binding, $other49598$$.result_binding) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.children, 
  $other49598$$.children) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.binding_keys, $other49598$$.binding_keys) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.new_bindings, $other49598$$.new_bindings) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other49598$$.__extmap);
};
clara.rules.engine.AccumulateNode.prototype.clara$rules$engine$IAccumInspect$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.AccumulateNode.prototype.clara$rules$engine$IAccumInspect$token__GT_matching_elements$arity$3 = function($join_bindings$jscomp$73_this$$$, $memory$$, $fact_bindings$jscomp$25_token$$) {
  $join_bindings$jscomp$73_this$$$ = $APP.cljs.core.select_keys($APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($fact_bindings$jscomp$25_token$$), this.clara$rules$engine$ILeftActivate$get_join_keys$arity$1(null));
  $fact_bindings$jscomp$25_token$$ = $APP.cljs.core.select_keys($APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($fact_bindings$jscomp$25_token$$), this.new_bindings);
  return $APP.cljs.core.first(clara.rules.memory.get_accum_reduced($memory$$, this, $join_bindings$jscomp$73_this$$$, $APP.cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$join_bindings$jscomp$73_this$$$, $fact_bindings$jscomp$25_token$$], 0))));
};
clara.rules.engine.AccumulateNode.prototype.clara$rules$engine$IConditionNode$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.AccumulateNode.prototype.clara$rules$engine$IConditionNode$get_condition_description$arity$1 = function($accumulator__$1_this$$$) {
  var $condition$jscomp$16_from$jscomp$9_map__49963__$1_type$$ = $APP.cljs.core.__destructure_map(this.accum_condition);
  $accumulator__$1_this$$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($condition$jscomp$16_from$jscomp$9_map__49963__$1_type$$, cljs$cst$3153$accumulator);
  $condition$jscomp$16_from$jscomp$9_map__49963__$1_type$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($condition$jscomp$16_from$jscomp$9_map__49963__$1_type$$, $APP.cljs$cst$3156$from);
  var $constraints$$ = $APP.cljs.core.__destructure_map($condition$jscomp$16_from$jscomp$9_map__49963__$1_type$$);
  $condition$jscomp$16_from$jscomp$9_map__49963__$1_type$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($constraints$$, $APP.cljs$cst$139$type);
  $constraints$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($constraints$$, cljs$cst$3143$constraints);
  $condition$jscomp$16_from$jscomp$9_map__49963__$1_type$$ = $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$condition$jscomp$16_from$jscomp$9_map__49963__$1_type$$], null), $constraints$$);
  $constraints$$ = $APP.cljs.core.symbol.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.name(this.result_binding));
  return new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$constraints$$, cljs$cst$3157$_LT__, $accumulator__$1_this$$$, $APP.cljs$cst$3156$from, $condition$jscomp$16_from$jscomp$9_map__49963__$1_type$$], null);
};
clara.rules.engine.AccumulateNode.prototype.clara$rules$engine$ILeftActivate$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.AccumulateNode.prototype.clara$rules$engine$ILeftActivate$left_activate$arity$6 = function($G__52304_accum_reduced_convert_return_fn$jscomp$4_node$jscomp$530_token$$, $G__52302_join_bindings$$, $G__52303_chunk__50025_tokens$$, $memory$$, $transport$$, $listener$$) {
  clara.rules.listener.left_activate_BANG_($listener$$, this, $G__52303_chunk__50025_tokens$$);
  var $G__52255_count__50026_previous_results_seq__49967_seq__49967__$1_temp__5825__auto__$$ = clara.rules.memory.get_accum_reduced_all($memory$$, this, $G__52302_join_bindings$$);
  $G__52304_accum_reduced_convert_return_fn$jscomp$4_node$jscomp$530_token$$ = cljs$cst$3101$convert_return_fn.cljs$core$IFn$_invoke$arity$1(this.accumulator);
  var $c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$ = $APP.cljs.core.seq($G__52255_count__50026_previous_results_seq__49967_seq__49967__$1_temp__5825__auto__$$), $G__52257_c__5548__auto___52280_count__49970_first_reduce_QMARK__52261_initial_value$$ = $c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$ ? null : cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1(this.accumulator), $G__52256_fact_bindings$$ = $G__52257_c__5548__auto___52280_count__49970_first_reduce_QMARK__52261_initial_value$$ != 
  null ? $G__52304_accum_reduced_convert_return_fn$jscomp$4_node$jscomp$530_token$$.cljs$core$IFn$_invoke$arity$1 ? $G__52304_accum_reduced_convert_return_fn$jscomp$4_node$jscomp$530_token$$.cljs$core$IFn$_invoke$arity$1($G__52257_c__5548__auto___52280_count__49970_first_reduce_QMARK__52261_initial_value$$) : $G__52304_accum_reduced_convert_return_fn$jscomp$4_node$jscomp$530_token$$.call(null, $G__52257_c__5548__auto___52280_count__49970_first_reduce_QMARK__52261_initial_value$$) : null;
  clara.rules.memory.add_tokens_BANG_($memory$$, this, $G__52302_join_bindings$$, $G__52303_chunk__50025_tokens$$);
  if ($c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$) {
    $G__52255_count__50026_previous_results_seq__49967_seq__49967__$1_temp__5825__auto__$$ = $APP.cljs.core.seq($G__52255_count__50026_previous_results_seq__49967_seq__49967__$1_temp__5825__auto__$$);
    $c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$ = null;
    for (var $G__52282_accum_reduced_52263_chunk__50017_52268_i__49971_seq__50016_52279__$1$$ = $G__52257_c__5548__auto___52280_count__49970_first_reduce_QMARK__52261_initial_value$$ = 0;;) {
      if ($G__52282_accum_reduced_52263_chunk__50017_52268_i__49971_seq__50016_52279__$1$$ < $G__52257_c__5548__auto___52280_count__49970_first_reduce_QMARK__52261_initial_value$$) {
        var $G__52283_converted_52225_count__50018_52269_previous$$ = $c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$.cljs$core$IIndexed$_nth$arity$2(null, $G__52282_accum_reduced_52263_chunk__50017_52268_i__49971_seq__50016_52279__$1$$);
        $G__52256_fact_bindings$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52283_converted_52225_count__50018_52269_previous$$, 0, null);
        var $G__52281_c__5548__auto___52238_first_reduce_QMARK__52222_i__50019_52270_seq__50005_52226_temp__5825__auto___52236_token_52244_vec__50000$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52283_converted_52225_count__50018_52269_previous$$, 1, null);
        $G__52283_converted_52225_count__50018_52269_previous$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52281_c__5548__auto___52238_first_reduce_QMARK__52222_i__50019_52270_seq__50005_52226_temp__5825__auto___52236_token_52244_vec__50000$$, 0, null);
        var $G__52240_chunk__50006_52227_previous_reduced$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52281_c__5548__auto___52238_first_reduce_QMARK__52222_i__50019_52270_seq__50005_52226_temp__5825__auto___52236_token_52244_vec__50000$$, 1, null);
        $G__52240_chunk__50006_52227_previous_reduced$$ = ($G__52281_c__5548__auto___52238_first_reduce_QMARK__52222_i__50019_52270_seq__50005_52226_temp__5825__auto___52236_token_52244_vec__50000$$ = $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3150$clara_DOT_rules_DOT_engine_SLASH_not_reduced, $G__52240_chunk__50006_52227_previous_reduced$$)) ? clara.rules.engine.do_accumulate(this.accumulator, $G__52283_converted_52225_count__50018_52269_previous$$) : $G__52240_chunk__50006_52227_previous_reduced$$;
        var $G__52241_accum_reduced_52224_count__50007_52228$$ = $G__52281_c__5548__auto___52238_first_reduce_QMARK__52222_i__50019_52270_seq__50005_52226_temp__5825__auto___52236_token_52244_vec__50000$$ ? $APP.cljs.core.with_meta(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$G__52283_converted_52225_count__50018_52269_previous$$, $G__52240_chunk__50006_52227_previous_reduced$$], null), new $APP.cljs.core.PersistentArrayMap(null, 1, [cljs$cst$3151$clara_DOT_rules_DOT_engine_SLASH_accum_node, 
        !0], null)) : null;
        $G__52283_converted_52225_count__50018_52269_previous$$ = $G__52240_chunk__50006_52227_previous_reduced$$ != null ? $G__52304_accum_reduced_convert_return_fn$jscomp$4_node$jscomp$530_token$$.cljs$core$IFn$_invoke$arity$1 ? $G__52304_accum_reduced_convert_return_fn$jscomp$4_node$jscomp$530_token$$.cljs$core$IFn$_invoke$arity$1($G__52240_chunk__50006_52227_previous_reduced$$) : $G__52304_accum_reduced_convert_return_fn$jscomp$4_node$jscomp$530_token$$.call(null, $G__52240_chunk__50006_52227_previous_reduced$$) : 
        null;
        $G__52281_c__5548__auto___52238_first_reduce_QMARK__52222_i__50019_52270_seq__50005_52226_temp__5825__auto___52236_token_52244_vec__50000$$ && (clara.rules.listener.add_accum_reduced_BANG_($listener$$, this, $G__52302_join_bindings$$, $G__52241_accum_reduced_52224_count__50007_52228$$, $G__52256_fact_bindings$$), clara.rules.memory.add_accum_reduced_BANG_($memory$$, this, $G__52302_join_bindings$$, $G__52241_accum_reduced_52224_count__50007_52228$$, $G__52256_fact_bindings$$));
        if ($G__52283_converted_52225_count__50018_52269_previous$$ != null) {
          $G__52281_c__5548__auto___52238_first_reduce_QMARK__52222_i__50019_52270_seq__50005_52226_temp__5825__auto___52236_token_52244_vec__50000$$ = $APP.cljs.core.seq($G__52303_chunk__50025_tokens$$);
          $G__52240_chunk__50006_52227_previous_reduced$$ = null;
          for (var $G__52239_i__50008_52229$$ = $G__52241_accum_reduced_52224_count__50007_52228$$ = 0;;) {
            if ($G__52239_i__50008_52229$$ < $G__52241_accum_reduced_52224_count__50007_52228$$) {
              var $token_52230$$ = $G__52240_chunk__50006_52227_previous_reduced$$.cljs$core$IIndexed$_nth$arity$2(null, $G__52239_i__50008_52229$$);
              clara.rules.engine.send_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $token_52230$$, $G__52283_converted_52225_count__50018_52269_previous$$, $G__52256_fact_bindings$$, $transport$$, $memory$$, $listener$$);
              $G__52239_i__50008_52229$$ += 1;
            } else {
              if ($G__52281_c__5548__auto___52238_first_reduce_QMARK__52222_i__50019_52270_seq__50005_52226_temp__5825__auto___52236_token_52244_vec__50000$$ = $APP.cljs.core.seq($G__52281_c__5548__auto___52238_first_reduce_QMARK__52222_i__50019_52270_seq__50005_52226_temp__5825__auto___52236_token_52244_vec__50000$$)) {
                $G__52240_chunk__50006_52227_previous_reduced$$ = $G__52281_c__5548__auto___52238_first_reduce_QMARK__52222_i__50019_52270_seq__50005_52226_temp__5825__auto___52236_token_52244_vec__50000$$, $APP.cljs.core.chunked_seq_QMARK_($G__52240_chunk__50006_52227_previous_reduced$$) ? ($G__52281_c__5548__auto___52238_first_reduce_QMARK__52222_i__50019_52270_seq__50005_52226_temp__5825__auto___52236_token_52244_vec__50000$$ = $APP.cljs.core.chunk_first($G__52240_chunk__50006_52227_previous_reduced$$), 
                $G__52239_i__50008_52229$$ = $APP.cljs.core.chunk_rest($G__52240_chunk__50006_52227_previous_reduced$$), $G__52240_chunk__50006_52227_previous_reduced$$ = $G__52281_c__5548__auto___52238_first_reduce_QMARK__52222_i__50019_52270_seq__50005_52226_temp__5825__auto___52236_token_52244_vec__50000$$, $G__52241_accum_reduced_52224_count__50007_52228$$ = $APP.cljs.core.count($G__52281_c__5548__auto___52238_first_reduce_QMARK__52222_i__50019_52270_seq__50005_52226_temp__5825__auto___52236_token_52244_vec__50000$$), 
                $G__52281_c__5548__auto___52238_first_reduce_QMARK__52222_i__50019_52270_seq__50005_52226_temp__5825__auto___52236_token_52244_vec__50000$$ = $G__52239_i__50008_52229$$) : ($G__52281_c__5548__auto___52238_first_reduce_QMARK__52222_i__50019_52270_seq__50005_52226_temp__5825__auto___52236_token_52244_vec__50000$$ = $APP.cljs.core.first($G__52240_chunk__50006_52227_previous_reduced$$), clara.rules.engine.send_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, 
                $G__52281_c__5548__auto___52238_first_reduce_QMARK__52222_i__50019_52270_seq__50005_52226_temp__5825__auto___52236_token_52244_vec__50000$$, $G__52283_converted_52225_count__50018_52269_previous$$, $G__52256_fact_bindings$$, $transport$$, $memory$$, $listener$$), $G__52281_c__5548__auto___52238_first_reduce_QMARK__52222_i__50019_52270_seq__50005_52226_temp__5825__auto___52236_token_52244_vec__50000$$ = $APP.cljs.core.next($G__52240_chunk__50006_52227_previous_reduced$$), $G__52240_chunk__50006_52227_previous_reduced$$ = 
                null, $G__52241_accum_reduced_52224_count__50007_52228$$ = 0), $G__52239_i__50008_52229$$ = 0;
              } else {
                break;
              }
            }
          }
        }
        $G__52282_accum_reduced_52263_chunk__50017_52268_i__49971_seq__50016_52279__$1$$ += 1;
      } else {
        if ($G__52255_count__50026_previous_results_seq__49967_seq__49967__$1_temp__5825__auto__$$ = $APP.cljs.core.seq($G__52255_count__50026_previous_results_seq__49967_seq__49967__$1_temp__5825__auto__$$)) {
          if ($APP.cljs.core.chunked_seq_QMARK_($G__52255_count__50026_previous_results_seq__49967_seq__49967__$1_temp__5825__auto__$$)) {
            $c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$ = $APP.cljs.core.chunk_first($G__52255_count__50026_previous_results_seq__49967_seq__49967__$1_temp__5825__auto__$$), $G__52255_count__50026_previous_results_seq__49967_seq__49967__$1_temp__5825__auto__$$ = $APP.cljs.core.chunk_rest($G__52255_count__50026_previous_results_seq__49967_seq__49967__$1_temp__5825__auto__$$), $G__52256_fact_bindings$$ = $c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$, 
            $G__52257_c__5548__auto___52280_count__49970_first_reduce_QMARK__52261_initial_value$$ = $APP.cljs.core.count($c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$), $c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$ = $G__52256_fact_bindings$$;
          } else {
            $c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$ = $APP.cljs.core.first($G__52255_count__50026_previous_results_seq__49967_seq__49967__$1_temp__5825__auto__$$);
            $G__52256_fact_bindings$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$, 0, null);
            $c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$, 1, null);
            $G__52283_converted_52225_count__50018_52269_previous$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$, 0, null);
            $G__52240_chunk__50006_52227_previous_reduced$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$, 1, null);
            $c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$ = ($G__52257_c__5548__auto___52280_count__49970_first_reduce_QMARK__52261_initial_value$$ = $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3150$clara_DOT_rules_DOT_engine_SLASH_not_reduced, $G__52240_chunk__50006_52227_previous_reduced$$)) ? clara.rules.engine.do_accumulate(this.accumulator, $G__52283_converted_52225_count__50018_52269_previous$$) : $G__52240_chunk__50006_52227_previous_reduced$$;
            $G__52282_accum_reduced_52263_chunk__50017_52268_i__49971_seq__50016_52279__$1$$ = $G__52257_c__5548__auto___52280_count__49970_first_reduce_QMARK__52261_initial_value$$ ? $APP.cljs.core.with_meta(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$G__52283_converted_52225_count__50018_52269_previous$$, $c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$], null), new $APP.cljs.core.PersistentArrayMap(null, 1, [cljs$cst$3151$clara_DOT_rules_DOT_engine_SLASH_accum_node, 
            !0], null)) : null;
            $c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$ = $c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$ != null ? $G__52304_accum_reduced_convert_return_fn$jscomp$4_node$jscomp$530_token$$.cljs$core$IFn$_invoke$arity$1 ? $G__52304_accum_reduced_convert_return_fn$jscomp$4_node$jscomp$530_token$$.cljs$core$IFn$_invoke$arity$1($c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$) : $G__52304_accum_reduced_convert_return_fn$jscomp$4_node$jscomp$530_token$$.call(null, 
            $c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$) : null;
            $G__52257_c__5548__auto___52280_count__49970_first_reduce_QMARK__52261_initial_value$$ && (clara.rules.listener.add_accum_reduced_BANG_($listener$$, this, $G__52302_join_bindings$$, $G__52282_accum_reduced_52263_chunk__50017_52268_i__49971_seq__50016_52279__$1$$, $G__52256_fact_bindings$$), clara.rules.memory.add_accum_reduced_BANG_($memory$$, this, $G__52302_join_bindings$$, $G__52282_accum_reduced_52263_chunk__50017_52268_i__49971_seq__50016_52279__$1$$, $G__52256_fact_bindings$$));
            if ($c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$ != null) {
              for ($G__52257_c__5548__auto___52280_count__49970_first_reduce_QMARK__52261_initial_value$$ = $APP.cljs.core.seq($G__52303_chunk__50025_tokens$$), $G__52282_accum_reduced_52263_chunk__50017_52268_i__49971_seq__50016_52279__$1$$ = null, $G__52281_c__5548__auto___52238_first_reduce_QMARK__52222_i__50019_52270_seq__50005_52226_temp__5825__auto___52236_token_52244_vec__50000$$ = $G__52283_converted_52225_count__50018_52269_previous$$ = 0;;) {
                if ($G__52281_c__5548__auto___52238_first_reduce_QMARK__52222_i__50019_52270_seq__50005_52226_temp__5825__auto___52236_token_52244_vec__50000$$ < $G__52283_converted_52225_count__50018_52269_previous$$) {
                  $G__52240_chunk__50006_52227_previous_reduced$$ = $G__52282_accum_reduced_52263_chunk__50017_52268_i__49971_seq__50016_52279__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $G__52281_c__5548__auto___52238_first_reduce_QMARK__52222_i__50019_52270_seq__50005_52226_temp__5825__auto___52236_token_52244_vec__50000$$), clara.rules.engine.send_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $G__52240_chunk__50006_52227_previous_reduced$$, $c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$, 
                  $G__52256_fact_bindings$$, $transport$$, $memory$$, $listener$$), $G__52281_c__5548__auto___52238_first_reduce_QMARK__52222_i__50019_52270_seq__50005_52226_temp__5825__auto___52236_token_52244_vec__50000$$ += 1;
                } else {
                  if ($G__52257_c__5548__auto___52280_count__49970_first_reduce_QMARK__52261_initial_value$$ = $APP.cljs.core.seq($G__52257_c__5548__auto___52280_count__49970_first_reduce_QMARK__52261_initial_value$$)) {
                    $G__52282_accum_reduced_52263_chunk__50017_52268_i__49971_seq__50016_52279__$1$$ = $G__52257_c__5548__auto___52280_count__49970_first_reduce_QMARK__52261_initial_value$$, $APP.cljs.core.chunked_seq_QMARK_($G__52282_accum_reduced_52263_chunk__50017_52268_i__49971_seq__50016_52279__$1$$) ? ($G__52257_c__5548__auto___52280_count__49970_first_reduce_QMARK__52261_initial_value$$ = $APP.cljs.core.chunk_first($G__52282_accum_reduced_52263_chunk__50017_52268_i__49971_seq__50016_52279__$1$$), 
                    $G__52281_c__5548__auto___52238_first_reduce_QMARK__52222_i__50019_52270_seq__50005_52226_temp__5825__auto___52236_token_52244_vec__50000$$ = $APP.cljs.core.chunk_rest($G__52282_accum_reduced_52263_chunk__50017_52268_i__49971_seq__50016_52279__$1$$), $G__52282_accum_reduced_52263_chunk__50017_52268_i__49971_seq__50016_52279__$1$$ = $G__52257_c__5548__auto___52280_count__49970_first_reduce_QMARK__52261_initial_value$$, $G__52283_converted_52225_count__50018_52269_previous$$ = $APP.cljs.core.count($G__52257_c__5548__auto___52280_count__49970_first_reduce_QMARK__52261_initial_value$$), 
                    $G__52257_c__5548__auto___52280_count__49970_first_reduce_QMARK__52261_initial_value$$ = $G__52281_c__5548__auto___52238_first_reduce_QMARK__52222_i__50019_52270_seq__50005_52226_temp__5825__auto___52236_token_52244_vec__50000$$) : ($G__52257_c__5548__auto___52280_count__49970_first_reduce_QMARK__52261_initial_value$$ = $APP.cljs.core.first($G__52282_accum_reduced_52263_chunk__50017_52268_i__49971_seq__50016_52279__$1$$), clara.rules.engine.send_accumulated(this, this.accum_condition, 
                    this.accumulator, this.result_binding, $G__52257_c__5548__auto___52280_count__49970_first_reduce_QMARK__52261_initial_value$$, $c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$, $G__52256_fact_bindings$$, $transport$$, $memory$$, $listener$$), $G__52257_c__5548__auto___52280_count__49970_first_reduce_QMARK__52261_initial_value$$ = $APP.cljs.core.next($G__52282_accum_reduced_52263_chunk__50017_52268_i__49971_seq__50016_52279__$1$$), $G__52282_accum_reduced_52263_chunk__50017_52268_i__49971_seq__50016_52279__$1$$ = 
                    null, $G__52283_converted_52225_count__50018_52269_previous$$ = 0), $G__52281_c__5548__auto___52238_first_reduce_QMARK__52222_i__50019_52270_seq__50005_52226_temp__5825__auto___52236_token_52244_vec__50000$$ = 0;
                  } else {
                    break;
                  }
                }
              }
            }
            $G__52255_count__50026_previous_results_seq__49967_seq__49967__$1_temp__5825__auto__$$ = $APP.cljs.core.next($G__52255_count__50026_previous_results_seq__49967_seq__49967__$1_temp__5825__auto__$$);
            $c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$ = null;
            $G__52257_c__5548__auto___52280_count__49970_first_reduce_QMARK__52261_initial_value$$ = 0;
          }
          $G__52282_accum_reduced_52263_chunk__50017_52268_i__49971_seq__50016_52279__$1$$ = 0;
        } else {
          return null;
        }
      }
    }
  } else {
    if ($G__52256_fact_bindings$$ != null && $APP.cljs.core.empty_QMARK_(this.new_bindings)) {
      for ($G__52304_accum_reduced_convert_return_fn$jscomp$4_node$jscomp$530_token$$ = $APP.cljs.core.with_meta(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.PersistentVector.EMPTY, $G__52257_c__5548__auto___52280_count__49970_first_reduce_QMARK__52261_initial_value$$], null), new $APP.cljs.core.PersistentArrayMap(null, 1, [cljs$cst$3151$clara_DOT_rules_DOT_engine_SLASH_accum_node, !0], null)), clara.rules.listener.add_accum_reduced_BANG_($listener$$, 
      this, $G__52302_join_bindings$$, $G__52304_accum_reduced_convert_return_fn$jscomp$4_node$jscomp$530_token$$, $G__52302_join_bindings$$), clara.rules.memory.add_accum_reduced_BANG_($memory$$, this, $G__52302_join_bindings$$, $G__52304_accum_reduced_convert_return_fn$jscomp$4_node$jscomp$530_token$$, $G__52302_join_bindings$$), $G__52302_join_bindings$$ = $APP.cljs.core.seq($G__52303_chunk__50025_tokens$$), $G__52303_chunk__50025_tokens$$ = null, $c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$ = 
      $G__52255_count__50026_previous_results_seq__49967_seq__49967__$1_temp__5825__auto__$$ = 0;;) {
        if ($c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$ < $G__52255_count__50026_previous_results_seq__49967_seq__49967__$1_temp__5825__auto__$$) {
          $G__52304_accum_reduced_convert_return_fn$jscomp$4_node$jscomp$530_token$$ = $G__52303_chunk__50025_tokens$$.cljs$core$IIndexed$_nth$arity$2(null, $c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$), clara.rules.engine.send_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $G__52304_accum_reduced_convert_return_fn$jscomp$4_node$jscomp$530_token$$, $G__52256_fact_bindings$$, $APP.cljs.core.PersistentArrayMap.EMPTY, $transport$$, $memory$$, 
          $listener$$), $c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$ += 1;
        } else {
          if ($G__52255_count__50026_previous_results_seq__49967_seq__49967__$1_temp__5825__auto__$$ = $APP.cljs.core.seq($G__52302_join_bindings$$)) {
            $G__52302_join_bindings$$ = $G__52255_count__50026_previous_results_seq__49967_seq__49967__$1_temp__5825__auto__$$, $APP.cljs.core.chunked_seq_QMARK_($G__52302_join_bindings$$) ? ($c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$ = $APP.cljs.core.chunk_first($G__52302_join_bindings$$), $G__52302_join_bindings$$ = $APP.cljs.core.chunk_rest($G__52302_join_bindings$$), $G__52303_chunk__50025_tokens$$ = $c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$, 
            $G__52255_count__50026_previous_results_seq__49967_seq__49967__$1_temp__5825__auto__$$ = $G__52304_accum_reduced_convert_return_fn$jscomp$4_node$jscomp$530_token$$ = $APP.cljs.core.count($c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$)) : ($G__52304_accum_reduced_convert_return_fn$jscomp$4_node$jscomp$530_token$$ = $APP.cljs.core.first($G__52302_join_bindings$$), clara.rules.engine.send_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, 
            $G__52304_accum_reduced_convert_return_fn$jscomp$4_node$jscomp$530_token$$, $G__52256_fact_bindings$$, $APP.cljs.core.PersistentArrayMap.EMPTY, $transport$$, $memory$$, $listener$$), $G__52302_join_bindings$$ = $APP.cljs.core.next($G__52302_join_bindings$$), $G__52303_chunk__50025_tokens$$ = null, $G__52255_count__50026_previous_results_seq__49967_seq__49967__$1_temp__5825__auto__$$ = 0), $c__5548__auto__$jscomp$43_chunk__49969_converted_52264_has_matches_QMARK_$$ = 0;
          } else {
            return null;
          }
        }
      }
    } else {
      return null;
    }
  }
};
clara.rules.engine.AccumulateNode.prototype.clara$rules$engine$ILeftActivate$left_retract$arity$6 = function($node$jscomp$531_removed_tokens$$, $join_bindings$$, $G__52361_previous_results$jscomp$1_seq__50036_52310_seq__50036_52359__$1_temp__5825__auto___52358_tokens$$, $memory$$, $transport$$, $listener$$) {
  var $self__$$ = this, $node__$1$$ = this;
  clara.rules.listener.left_retract_BANG_($listener$$, $node__$1$$, $G__52361_previous_results$jscomp$1_seq__50036_52310_seq__50036_52359__$1_temp__5825__auto___52358_tokens$$);
  $node$jscomp$531_removed_tokens$$ = clara.rules.memory.remove_tokens_BANG_($memory$$, $node__$1$$, $join_bindings$$, $G__52361_previous_results$jscomp$1_seq__50036_52310_seq__50036_52359__$1_temp__5825__auto___52358_tokens$$);
  var $remaining_tokens$$ = clara.rules.memory.get_tokens($memory$$, $node__$1$$, $join_bindings$$);
  $G__52361_previous_results$jscomp$1_seq__50036_52310_seq__50036_52359__$1_temp__5825__auto___52358_tokens$$ = clara.rules.memory.get_accum_reduced_all($memory$$, $node__$1$$, $join_bindings$$);
  (function() {
    var $and__5023__auto__$jscomp$218_and__5023__auto____$1$jscomp$44_current$$ = $APP.cljs.core.empty_QMARK_($remaining_tokens$$);
    return $and__5023__auto__$jscomp$218_and__5023__auto____$1$jscomp$44_current$$ ? ($and__5023__auto__$jscomp$218_and__5023__auto____$1$jscomp$44_current$$ = $APP.cljs.core.empty_QMARK_($self__$$.new_bindings)) ? ($and__5023__auto__$jscomp$218_and__5023__auto____$1$jscomp$44_current$$ = clara.rules.memory.get_accum_reduced($memory$$, $node__$1$$, $join_bindings$$, $join_bindings$$), $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($and__5023__auto__$jscomp$218_and__5023__auto____$1$jscomp$44_current$$, 
    cljs$cst$3072$clara_DOT_rules_DOT_memory_SLASH_no_accum_reduced) && $APP.cljs.core.empty_QMARK_($APP.cljs.core.first($and__5023__auto__$jscomp$218_and__5023__auto____$1$jscomp$44_current$$))) : $and__5023__auto__$jscomp$218_and__5023__auto____$1$jscomp$44_current$$ : $and__5023__auto__$jscomp$218_and__5023__auto____$1$jscomp$44_current$$;
  })() && clara.rules.memory.remove_accum_reduced_BANG_($memory$$, $node__$1$$, $join_bindings$$, $join_bindings$$);
  if ($APP.cljs.core.seq($node$jscomp$531_removed_tokens$$)) {
    $G__52361_previous_results$jscomp$1_seq__50036_52310_seq__50036_52359__$1_temp__5825__auto___52358_tokens$$ = $APP.cljs.core.seq($G__52361_previous_results$jscomp$1_seq__50036_52310_seq__50036_52359__$1_temp__5825__auto___52358_tokens$$);
    for (var $G__52362_chunk__50043_52311_fact_bindings_52366$$ = null, $G__52363_c__5548__auto___52360_count__50044_52312_previous_converted_52371_vec__50093_52365_vec__50096_52367$$ = 0, $c__5548__auto___52385_i__50045_52313_seq__50039_52372_temp__5825__auto___52382__$1_token_52390$$ = 0;;) {
      if ($c__5548__auto___52385_i__50045_52313_seq__50039_52372_temp__5825__auto___52382__$1_token_52390$$ < $G__52363_c__5548__auto___52360_count__50044_52312_previous_converted_52371_vec__50093_52365_vec__50096_52367$$) {
        var $G__52388_count__50041_52374_previous_converted_52320_vec__50080_52314_vec__50083_52316$$ = $G__52362_chunk__50043_52311_fact_bindings_52366$$.cljs$core$IIndexed$_nth$arity$2(null, $c__5548__auto___52385_i__50045_52313_seq__50039_52372_temp__5825__auto___52382__$1_token_52390$$), $G__52387_chunk__50040_52373_fact_bindings_52315_seq__50039_52384__$1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52388_count__50041_52374_previous_converted_52320_vec__50080_52314_vec__50083_52316$$, 
        0, null);
        $G__52388_count__50041_52374_previous_converted_52320_vec__50080_52314_vec__50083_52316$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52388_count__50041_52374_previous_converted_52320_vec__50080_52314_vec__50083_52316$$, 1, null);
        $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52388_count__50041_52374_previous_converted_52320_vec__50080_52314_vec__50083_52316$$, 0, null);
        var $previous_reduced_52318$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52388_count__50041_52374_previous_converted_52320_vec__50080_52314_vec__50083_52316$$, 1, null);
        $G__52388_count__50041_52374_previous_converted_52320_vec__50080_52314_vec__50083_52316$$ = $previous_reduced_52318$$ != null ? function() {
          var $fexpr__50086$$ = cljs$cst$3101$convert_return_fn.cljs$core$IFn$_invoke$arity$1($self__$$.accumulator);
          return $fexpr__50086$$.cljs$core$IFn$_invoke$arity$1 ? $fexpr__50086$$.cljs$core$IFn$_invoke$arity$1($previous_reduced_52318$$) : $fexpr__50086$$.call(null, $previous_reduced_52318$$);
        }() : null;
        if ($G__52388_count__50041_52374_previous_converted_52320_vec__50080_52314_vec__50083_52316$$ != null) {
          for (var $G__52386_c__5548__auto___52340_i__50042_52375_seq__50048_52325_temp__5825__auto___52338_token_52345$$ = $APP.cljs.core.seq($node$jscomp$531_removed_tokens$$), $G__52342_chunk__50049_52326_seq__50048_52339__$1_token_52377$$ = null, $G__52343_count__50050_52327$$ = 0, $G__52341_i__50051_52328$$ = 0;;) {
            if ($G__52341_i__50051_52328$$ < $G__52343_count__50050_52327$$) {
              var $token_52329$$ = $G__52342_chunk__50049_52326_seq__50048_52339__$1_token_52377$$.cljs$core$IIndexed$_nth$arity$2(null, $G__52341_i__50051_52328$$);
              clara.rules.engine.retract_accumulated($node__$1$$, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_52329$$, $G__52388_count__50041_52374_previous_converted_52320_vec__50080_52314_vec__50083_52316$$, $G__52387_chunk__50040_52373_fact_bindings_52315_seq__50039_52384__$1$$, $transport$$, $memory$$, $listener$$);
              $G__52341_i__50051_52328$$ += 1;
            } else {
              if ($G__52386_c__5548__auto___52340_i__50042_52375_seq__50048_52325_temp__5825__auto___52338_token_52345$$ = $APP.cljs.core.seq($G__52386_c__5548__auto___52340_i__50042_52375_seq__50048_52325_temp__5825__auto___52338_token_52345$$)) {
                $G__52342_chunk__50049_52326_seq__50048_52339__$1_token_52377$$ = $G__52386_c__5548__auto___52340_i__50042_52375_seq__50048_52325_temp__5825__auto___52338_token_52345$$, $APP.cljs.core.chunked_seq_QMARK_($G__52342_chunk__50049_52326_seq__50048_52339__$1_token_52377$$) ? ($G__52386_c__5548__auto___52340_i__50042_52375_seq__50048_52325_temp__5825__auto___52338_token_52345$$ = $APP.cljs.core.chunk_first($G__52342_chunk__50049_52326_seq__50048_52339__$1_token_52377$$), $G__52341_i__50051_52328$$ = 
                $APP.cljs.core.chunk_rest($G__52342_chunk__50049_52326_seq__50048_52339__$1_token_52377$$), $G__52342_chunk__50049_52326_seq__50048_52339__$1_token_52377$$ = $G__52386_c__5548__auto___52340_i__50042_52375_seq__50048_52325_temp__5825__auto___52338_token_52345$$, $G__52343_count__50050_52327$$ = $APP.cljs.core.count($G__52386_c__5548__auto___52340_i__50042_52375_seq__50048_52325_temp__5825__auto___52338_token_52345$$), $G__52386_c__5548__auto___52340_i__50042_52375_seq__50048_52325_temp__5825__auto___52338_token_52345$$ = 
                $G__52341_i__50051_52328$$) : ($G__52386_c__5548__auto___52340_i__50042_52375_seq__50048_52325_temp__5825__auto___52338_token_52345$$ = $APP.cljs.core.first($G__52342_chunk__50049_52326_seq__50048_52339__$1_token_52377$$), clara.rules.engine.retract_accumulated($node__$1$$, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $G__52386_c__5548__auto___52340_i__50042_52375_seq__50048_52325_temp__5825__auto___52338_token_52345$$, $G__52388_count__50041_52374_previous_converted_52320_vec__50080_52314_vec__50083_52316$$, 
                $G__52387_chunk__50040_52373_fact_bindings_52315_seq__50039_52384__$1$$, $transport$$, $memory$$, $listener$$), $G__52386_c__5548__auto___52340_i__50042_52375_seq__50048_52325_temp__5825__auto___52338_token_52345$$ = $APP.cljs.core.next($G__52342_chunk__50049_52326_seq__50048_52339__$1_token_52377$$), $G__52342_chunk__50049_52326_seq__50048_52339__$1_token_52377$$ = null, $G__52343_count__50050_52327$$ = 0), $G__52341_i__50051_52328$$ = 0;
              } else {
                break;
              }
            }
          }
        }
        $c__5548__auto___52385_i__50045_52313_seq__50039_52372_temp__5825__auto___52382__$1_token_52390$$ += 1;
      } else {
        if ($G__52361_previous_results$jscomp$1_seq__50036_52310_seq__50036_52359__$1_temp__5825__auto___52358_tokens$$ = $APP.cljs.core.seq($G__52361_previous_results$jscomp$1_seq__50036_52310_seq__50036_52359__$1_temp__5825__auto___52358_tokens$$)) {
          if ($APP.cljs.core.chunked_seq_QMARK_($G__52361_previous_results$jscomp$1_seq__50036_52310_seq__50036_52359__$1_temp__5825__auto___52358_tokens$$)) {
            $G__52363_c__5548__auto___52360_count__50044_52312_previous_converted_52371_vec__50093_52365_vec__50096_52367$$ = $APP.cljs.core.chunk_first($G__52361_previous_results$jscomp$1_seq__50036_52310_seq__50036_52359__$1_temp__5825__auto___52358_tokens$$), $G__52361_previous_results$jscomp$1_seq__50036_52310_seq__50036_52359__$1_temp__5825__auto___52358_tokens$$ = $APP.cljs.core.chunk_rest($G__52361_previous_results$jscomp$1_seq__50036_52310_seq__50036_52359__$1_temp__5825__auto___52358_tokens$$), 
            $G__52362_chunk__50043_52311_fact_bindings_52366$$ = $G__52363_c__5548__auto___52360_count__50044_52312_previous_converted_52371_vec__50093_52365_vec__50096_52367$$, $G__52363_c__5548__auto___52360_count__50044_52312_previous_converted_52371_vec__50093_52365_vec__50096_52367$$ = $APP.cljs.core.count($G__52363_c__5548__auto___52360_count__50044_52312_previous_converted_52371_vec__50093_52365_vec__50096_52367$$);
          } else {
            $G__52363_c__5548__auto___52360_count__50044_52312_previous_converted_52371_vec__50093_52365_vec__50096_52367$$ = $APP.cljs.core.first($G__52361_previous_results$jscomp$1_seq__50036_52310_seq__50036_52359__$1_temp__5825__auto___52358_tokens$$);
            $G__52362_chunk__50043_52311_fact_bindings_52366$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52363_c__5548__auto___52360_count__50044_52312_previous_converted_52371_vec__50093_52365_vec__50096_52367$$, 0, null);
            $G__52363_c__5548__auto___52360_count__50044_52312_previous_converted_52371_vec__50093_52365_vec__50096_52367$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52363_c__5548__auto___52360_count__50044_52312_previous_converted_52371_vec__50093_52365_vec__50096_52367$$, 1, null);
            $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52363_c__5548__auto___52360_count__50044_52312_previous_converted_52371_vec__50093_52365_vec__50096_52367$$, 0, null);
            var $previous_reduced_52369$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52363_c__5548__auto___52360_count__50044_52312_previous_converted_52371_vec__50093_52365_vec__50096_52367$$, 1, null);
            $G__52363_c__5548__auto___52360_count__50044_52312_previous_converted_52371_vec__50093_52365_vec__50096_52367$$ = $previous_reduced_52369$$ != null ? function() {
              var $fexpr__50101$$ = cljs$cst$3101$convert_return_fn.cljs$core$IFn$_invoke$arity$1($self__$$.accumulator);
              return $fexpr__50101$$.cljs$core$IFn$_invoke$arity$1 ? $fexpr__50101$$.cljs$core$IFn$_invoke$arity$1($previous_reduced_52369$$) : $fexpr__50101$$.call(null, $previous_reduced_52369$$);
            }() : null;
            if ($G__52363_c__5548__auto___52360_count__50044_52312_previous_converted_52371_vec__50093_52365_vec__50096_52367$$ != null) {
              for ($c__5548__auto___52385_i__50045_52313_seq__50039_52372_temp__5825__auto___52382__$1_token_52390$$ = $APP.cljs.core.seq($node$jscomp$531_removed_tokens$$), $G__52387_chunk__50040_52373_fact_bindings_52315_seq__50039_52384__$1$$ = null, $G__52386_c__5548__auto___52340_i__50042_52375_seq__50048_52325_temp__5825__auto___52338_token_52345$$ = $G__52388_count__50041_52374_previous_converted_52320_vec__50080_52314_vec__50083_52316$$ = 0;;) {
                if ($G__52386_c__5548__auto___52340_i__50042_52375_seq__50048_52325_temp__5825__auto___52338_token_52345$$ < $G__52388_count__50041_52374_previous_converted_52320_vec__50080_52314_vec__50083_52316$$) {
                  $G__52342_chunk__50049_52326_seq__50048_52339__$1_token_52377$$ = $G__52387_chunk__50040_52373_fact_bindings_52315_seq__50039_52384__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $G__52386_c__5548__auto___52340_i__50042_52375_seq__50048_52325_temp__5825__auto___52338_token_52345$$), clara.rules.engine.retract_accumulated($node__$1$$, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $G__52342_chunk__50049_52326_seq__50048_52339__$1_token_52377$$, $G__52363_c__5548__auto___52360_count__50044_52312_previous_converted_52371_vec__50093_52365_vec__50096_52367$$, 
                  $G__52362_chunk__50043_52311_fact_bindings_52366$$, $transport$$, $memory$$, $listener$$), $G__52386_c__5548__auto___52340_i__50042_52375_seq__50048_52325_temp__5825__auto___52338_token_52345$$ += 1;
                } else {
                  if ($c__5548__auto___52385_i__50045_52313_seq__50039_52372_temp__5825__auto___52382__$1_token_52390$$ = $APP.cljs.core.seq($c__5548__auto___52385_i__50045_52313_seq__50039_52372_temp__5825__auto___52382__$1_token_52390$$)) {
                    $G__52387_chunk__50040_52373_fact_bindings_52315_seq__50039_52384__$1$$ = $c__5548__auto___52385_i__50045_52313_seq__50039_52372_temp__5825__auto___52382__$1_token_52390$$, $APP.cljs.core.chunked_seq_QMARK_($G__52387_chunk__50040_52373_fact_bindings_52315_seq__50039_52384__$1$$) ? ($c__5548__auto___52385_i__50045_52313_seq__50039_52372_temp__5825__auto___52382__$1_token_52390$$ = $APP.cljs.core.chunk_first($G__52387_chunk__50040_52373_fact_bindings_52315_seq__50039_52384__$1$$), 
                    $G__52386_c__5548__auto___52340_i__50042_52375_seq__50048_52325_temp__5825__auto___52338_token_52345$$ = $APP.cljs.core.chunk_rest($G__52387_chunk__50040_52373_fact_bindings_52315_seq__50039_52384__$1$$), $G__52387_chunk__50040_52373_fact_bindings_52315_seq__50039_52384__$1$$ = $c__5548__auto___52385_i__50045_52313_seq__50039_52372_temp__5825__auto___52382__$1_token_52390$$, $G__52388_count__50041_52374_previous_converted_52320_vec__50080_52314_vec__50083_52316$$ = $APP.cljs.core.count($c__5548__auto___52385_i__50045_52313_seq__50039_52372_temp__5825__auto___52382__$1_token_52390$$), 
                    $c__5548__auto___52385_i__50045_52313_seq__50039_52372_temp__5825__auto___52382__$1_token_52390$$ = $G__52386_c__5548__auto___52340_i__50042_52375_seq__50048_52325_temp__5825__auto___52338_token_52345$$) : ($c__5548__auto___52385_i__50045_52313_seq__50039_52372_temp__5825__auto___52382__$1_token_52390$$ = $APP.cljs.core.first($G__52387_chunk__50040_52373_fact_bindings_52315_seq__50039_52384__$1$$), clara.rules.engine.retract_accumulated($node__$1$$, $self__$$.accum_condition, 
                    $self__$$.accumulator, $self__$$.result_binding, $c__5548__auto___52385_i__50045_52313_seq__50039_52372_temp__5825__auto___52382__$1_token_52390$$, $G__52363_c__5548__auto___52360_count__50044_52312_previous_converted_52371_vec__50093_52365_vec__50096_52367$$, $G__52362_chunk__50043_52311_fact_bindings_52366$$, $transport$$, $memory$$, $listener$$), $c__5548__auto___52385_i__50045_52313_seq__50039_52372_temp__5825__auto___52382__$1_token_52390$$ = $APP.cljs.core.next($G__52387_chunk__50040_52373_fact_bindings_52315_seq__50039_52384__$1$$), 
                    $G__52387_chunk__50040_52373_fact_bindings_52315_seq__50039_52384__$1$$ = null, $G__52388_count__50041_52374_previous_converted_52320_vec__50080_52314_vec__50083_52316$$ = 0), $G__52386_c__5548__auto___52340_i__50042_52375_seq__50048_52325_temp__5825__auto___52338_token_52345$$ = 0;
                  } else {
                    break;
                  }
                }
              }
            }
            $G__52361_previous_results$jscomp$1_seq__50036_52310_seq__50036_52359__$1_temp__5825__auto___52358_tokens$$ = $APP.cljs.core.next($G__52361_previous_results$jscomp$1_seq__50036_52310_seq__50036_52359__$1_temp__5825__auto___52358_tokens$$);
            $G__52362_chunk__50043_52311_fact_bindings_52366$$ = null;
            $G__52363_c__5548__auto___52360_count__50044_52312_previous_converted_52371_vec__50093_52365_vec__50096_52367$$ = 0;
          }
          $c__5548__auto___52385_i__50045_52313_seq__50039_52372_temp__5825__auto___52382__$1_token_52390$$ = 0;
        } else {
          break;
        }
      }
    }
  }
  return null;
};
clara.rules.engine.AccumulateNode.prototype.clara$rules$engine$ILeftActivate$get_join_keys$arity$1 = function($node$$) {
  return this.binding_keys;
};
clara.rules.engine.AccumulateNode.prototype.clara$rules$engine$ILeftActivate$description$arity$1 = function($node$$) {
  return ["AccumulateNode -- ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(this.accumulator)].join("");
};
clara.rules.engine.AccumulateNode.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 7, [$APP.cljs$cst$3116$children, null, cljs$cst$3152$accum_condition, null, cljs$cst$3155$new_bindings, null, $APP.cljs$cst$396$id, null, cljs$cst$3142$binding_keys, null, cljs$cst$3154$result_binding, null, cljs$cst$3153$accumulator, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, 
  this), this.__meta), $k__5334__auto__$$) : new clara.rules.engine.AccumulateNode(this.id, this.accum_condition, this.accumulator, this.result_binding, this.children, this.binding_keys, this.new_bindings, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
clara.rules.engine.AccumulateNode.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k49596$$) {
  switch($k49596$$ instanceof $APP.cljs.core.Keyword ? $k49596$$.fqn : null) {
    case "id":
    case "accum-condition":
    case "accumulator":
    case "result-binding":
    case "children":
    case "binding-keys":
    case "new-bindings":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k49596$$);
  }
};
clara.rules.engine.AccumulateNode.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__50109_this__5331__auto__$$, $k__5332__auto__$$, $G__49595$$) {
  $pred__50109_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__50109_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__50109_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$396$id, $k__5332__auto__$$) : $pred__50109_this__5331__auto__$$.call(null, $APP.cljs$cst$396$id, $k__5332__auto__$$)) ? new clara.rules.engine.AccumulateNode($G__49595$$, this.accum_condition, this.accumulator, this.result_binding, this.children, this.binding_keys, this.new_bindings, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__50109_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? 
  $pred__50109_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3152$accum_condition, $k__5332__auto__$$) : $pred__50109_this__5331__auto__$$.call(null, cljs$cst$3152$accum_condition, $k__5332__auto__$$)) ? new clara.rules.engine.AccumulateNode(this.id, $G__49595$$, this.accumulator, this.result_binding, this.children, this.binding_keys, this.new_bindings, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__50109_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__50109_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3153$accumulator, 
  $k__5332__auto__$$) : $pred__50109_this__5331__auto__$$.call(null, cljs$cst$3153$accumulator, $k__5332__auto__$$)) ? new clara.rules.engine.AccumulateNode(this.id, this.accum_condition, $G__49595$$, this.result_binding, this.children, this.binding_keys, this.new_bindings, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__50109_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__50109_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3154$result_binding, $k__5332__auto__$$) : 
  $pred__50109_this__5331__auto__$$.call(null, cljs$cst$3154$result_binding, $k__5332__auto__$$)) ? new clara.rules.engine.AccumulateNode(this.id, this.accum_condition, this.accumulator, $G__49595$$, this.children, this.binding_keys, this.new_bindings, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__50109_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__50109_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$3116$children, $k__5332__auto__$$) : $pred__50109_this__5331__auto__$$.call(null, 
  $APP.cljs$cst$3116$children, $k__5332__auto__$$)) ? new clara.rules.engine.AccumulateNode(this.id, this.accum_condition, this.accumulator, this.result_binding, $G__49595$$, this.binding_keys, this.new_bindings, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__50109_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__50109_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3142$binding_keys, $k__5332__auto__$$) : $pred__50109_this__5331__auto__$$.call(null, cljs$cst$3142$binding_keys, 
  $k__5332__auto__$$)) ? new clara.rules.engine.AccumulateNode(this.id, this.accum_condition, this.accumulator, this.result_binding, this.children, $G__49595$$, this.new_bindings, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__50109_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__50109_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3155$new_bindings, $k__5332__auto__$$) : $pred__50109_this__5331__auto__$$.call(null, cljs$cst$3155$new_bindings, $k__5332__auto__$$)) ? 
  new clara.rules.engine.AccumulateNode(this.id, this.accum_condition, this.accumulator, this.result_binding, this.children, this.binding_keys, $G__49595$$, this.__meta, this.__extmap, null) : new clara.rules.engine.AccumulateNode(this.id, this.accum_condition, this.accumulator, this.result_binding, this.children, this.binding_keys, this.new_bindings, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__49595$$), null);
};
clara.rules.engine.AccumulateNode.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 7, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$396$id, this.id, null), new $APP.cljs.core.MapEntry(cljs$cst$3152$accum_condition, this.accum_condition, null), new $APP.cljs.core.MapEntry(cljs$cst$3153$accumulator, this.accumulator, null), new $APP.cljs.core.MapEntry(cljs$cst$3154$result_binding, this.result_binding, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$3116$children, 
  this.children, null), new $APP.cljs.core.MapEntry(cljs$cst$3142$binding_keys, this.binding_keys, null), new $APP.cljs.core.MapEntry(cljs$cst$3155$new_bindings, this.new_bindings, null)], null), this.__extmap));
};
clara.rules.engine.AccumulateNode.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__49595$$) {
  return new clara.rules.engine.AccumulateNode(this.id, this.accum_condition, this.accumulator, this.result_binding, this.children, this.binding_keys, this.new_bindings, $G__49595$$, this.__extmap, this.__hash);
};
clara.rules.engine.AccumulateNode.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
clara.rules.engine.AccumulateNode.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 7, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1850$id, cljs$cst$3158$accum_condition, cljs$cst$3159$accumulator, cljs$cst$3160$result_binding, $APP.cljs$cst$3091$children, cljs$cst$3145$binding_keys, cljs$cst$3161$new_bindings], null);
};
clara.rules.engine.AccumulateNode.cljs$lang$type = !0;
clara.rules.engine.AccumulateNode.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "clara.rules.engine/AccumulateNode", null, 1, null);
};
clara.rules.engine.AccumulateNode.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "clara.rules.engine/AccumulateNode");
};
clara.rules.engine.__GT_AccumulateNode = function($id$$, $accum_condition$$, $accumulator$$, $result_binding$$, $children$$, $binding_keys$$, $new_bindings$$) {
  return new clara.rules.engine.AccumulateNode($id$$, $accum_condition$$, $accumulator$$, $result_binding$$, $children$$, $binding_keys$$, $new_bindings$$, null, null, null);
};
clara.rules.engine.map__GT_AccumulateNode = function($G__49601$$) {
  var $G__50123$jscomp$inline_5468_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__49601$$, $APP.cljs$cst$396$id, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$3152$accum_condition, cljs$cst$3153$accumulator, cljs$cst$3154$result_binding, $APP.cljs$cst$3116$children, cljs$cst$3142$binding_keys, cljs$cst$3155$new_bindings], 0));
  $G__50123$jscomp$inline_5468_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__49601$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__50123$jscomp$inline_5468_extmap__5365__auto__$$) : $G__50123$jscomp$inline_5468_extmap__5365__auto__$$;
  return new clara.rules.engine.AccumulateNode($APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($G__49601$$), cljs$cst$3152$accum_condition.cljs$core$IFn$_invoke$arity$1($G__49601$$), cljs$cst$3153$accumulator.cljs$core$IFn$_invoke$arity$1($G__49601$$), cljs$cst$3154$result_binding.cljs$core$IFn$_invoke$arity$1($G__49601$$), $APP.cljs$cst$3116$children.cljs$core$IFn$_invoke$arity$1($G__49601$$), cljs$cst$3142$binding_keys.cljs$core$IFn$_invoke$arity$1($G__49601$$), cljs$cst$3155$new_bindings.cljs$core$IFn$_invoke$arity$1($G__49601$$), 
  null, $APP.cljs.core.not_empty($G__50123$jscomp$inline_5468_extmap__5365__auto__$$), null);
};
clara.rules.engine.filter_accum_facts = function($node$$, $join_filter_fn$$, $token$$, $candidate_facts$$, $bindings$$) {
  return $APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2(function($p1__50125_SHARP_$$) {
    return clara.rules.engine.join_node_matches($node$$, $join_filter_fn$$, $token$$, $p1__50125_SHARP_$$, $bindings$$, $APP.cljs.core.PersistentArrayMap.EMPTY);
  }, $candidate_facts$$);
};
clara.rules.engine.AccumulateWithJoinFilterNode = function($id$$, $accum_condition$$, $accumulator$$, $join_filter_fn$$, $result_binding$$, $children$$, $binding_keys$$, $new_bindings$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.id = $id$$;
  this.accum_condition = $accum_condition$$;
  this.accumulator = $accumulator$$;
  this.join_filter_fn = $join_filter_fn$$;
  this.result_binding = $result_binding$$;
  this.children = $children$$;
  this.binding_keys = $binding_keys$$;
  this.new_bindings = $new_bindings$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.clara$rules$engine$IAccumRightActivate$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.clara$rules$engine$IAccumRightActivate$pre_reduce$arity$2 = function($node$$, $elements$$) {
  return $APP.cljs.core.doall.cljs$core$IFn$_invoke$arity$1(function() {
    return function $clara$rules$engine$iter__50133$$($s__50134$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (;;) {
          var $s__50134__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__50134$$);
          if ($s__50134__$2_temp__5825__auto__$$) {
            if ($APP.cljs.core.chunked_seq_QMARK_($s__50134__$2_temp__5825__auto__$$)) {
              var $JSCompiler_inline_result$jscomp$1029_c__5501__auto__$jscomp$113_element_group$$ = $APP.cljs.core.chunk_first($s__50134__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1029_c__5501__auto__$jscomp$113_element_group$$), $b__50136_bindings$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
              a: {
                for (var $i__50135$$ = 0;;) {
                  if ($i__50135$$ < $size__5502__auto__$$) {
                    var $element_group$jscomp$inline_5473_vec__50138$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1029_c__5501__auto__$jscomp$113_element_group$$, $i__50135$$), $bindings$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($element_group$jscomp$inline_5473_vec__50138$$, 0, null);
                    $element_group$jscomp$inline_5473_vec__50138$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($element_group$jscomp$inline_5473_vec__50138$$, 1, null);
                    $APP.cljs.core.chunk_append($b__50136_bindings$$, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$bindings$$, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs$cst$3109$fact, $element_group$jscomp$inline_5473_vec__50138$$)], null));
                    $i__50135$$ += 1;
                  } else {
                    $JSCompiler_inline_result$jscomp$1029_c__5501__auto__$jscomp$113_element_group$$ = !0;
                    break a;
                  }
                }
                $JSCompiler_inline_result$jscomp$1029_c__5501__auto__$jscomp$113_element_group$$ = void 0;
              }
              return $JSCompiler_inline_result$jscomp$1029_c__5501__auto__$jscomp$113_element_group$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__50136_bindings$$), $clara$rules$engine$iter__50133$$($APP.cljs.core.chunk_rest($s__50134__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__50136_bindings$$), null);
            }
            $JSCompiler_inline_result$jscomp$1029_c__5501__auto__$jscomp$113_element_group$$ = $APP.cljs.core.first($s__50134__$2_temp__5825__auto__$$);
            $b__50136_bindings$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_inline_result$jscomp$1029_c__5501__auto__$jscomp$113_element_group$$, 0, null);
            $JSCompiler_inline_result$jscomp$1029_c__5501__auto__$jscomp$113_element_group$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_inline_result$jscomp$1029_c__5501__auto__$jscomp$113_element_group$$, 1, null);
            return $APP.cljs.core.cons(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$b__50136_bindings$$, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs$cst$3109$fact, $JSCompiler_inline_result$jscomp$1029_c__5501__auto__$jscomp$113_element_group$$)], null), $clara$rules$engine$iter__50133$$($APP.cljs.core.rest($s__50134__$2_temp__5825__auto__$$)));
          }
          return null;
        }
      }, null, null);
    }(clara.rules.platform.group_by_seq($APP.cljs$cst$394$bindings, $elements$$));
  }());
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.clara$rules$engine$IAccumRightActivate$right_activate_reduced$arity$6 = function($convert_return_fn$jscomp$5_node$$, $join_bindings$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$, $memory$$, $transport$$, $listener$$) {
  var $self__$$ = this;
  $convert_return_fn$jscomp$5_node$$ = cljs$cst$3101$convert_return_fn.cljs$core$IFn$_invoke$arity$1($self__$$.accumulator);
  for (var $matched_tokens$$ = clara.rules.memory.get_tokens($memory$$, this, $join_bindings$$), $G__52508_seq__50146_seq__50146__$1$$ = $APP.cljs.core.seq($G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$), $chunk__50148_previous_candidates_52514_previous_candidates_52516__$1$$ = null, $G__52568_combined_candidates_52517_count__50149_seq__50196_52520_seq__50196_52566__$1_temp__5825__auto___52565__$1$$ = 0, $G__52569_chunk__50200_52521_i__50150_token_52572$$ = 0;;) {
    if ($G__52569_chunk__50200_52521_i__50150_token_52572$$ < $G__52568_combined_candidates_52517_count__50149_seq__50196_52520_seq__50196_52566__$1_temp__5825__auto___52565__$1$$) {
      var $G__52510_c__5548__auto__$$ = $chunk__50148_previous_candidates_52514_previous_candidates_52516__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $G__52569_chunk__50200_52521_i__50150_token_52572$$);
      $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52510_c__5548__auto__$$, 0, null);
      $G__52510_c__5548__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52510_c__5548__auto__$$, 1, null);
      var $G__52570_c__5548__auto___52567_count__50201_52522_previous_candidates_52435_previous_candidates_52437__$1_previous_converted_52578_previous_filtered_facts_52574$$ = clara.rules.memory.get_accum_reduced($memory$$, this, $join_bindings$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$);
      $G__52570_c__5548__auto___52567_count__50201_52522_previous_candidates_52435_previous_candidates_52437__$1_previous_converted_52578_previous_filtered_facts_52574$$ = $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3072$clara_DOT_rules_DOT_memory_SLASH_no_accum_reduced, $G__52570_c__5548__auto___52567_count__50201_52522_previous_candidates_52435_previous_candidates_52437__$1_previous_converted_52578_previous_filtered_facts_52574$$) ? $G__52570_c__5548__auto___52567_count__50201_52522_previous_candidates_52435_previous_candidates_52437__$1_previous_converted_52578_previous_filtered_facts_52574$$ : 
      null;
      var $G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$ = $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.PersistentVector.EMPTY, $APP.cljs.core.cat, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$G__52570_c__5548__auto___52567_count__50201_52522_previous_candidates_52435_previous_candidates_52437__$1_previous_converted_52578_previous_filtered_facts_52574$$, 
      $G__52510_c__5548__auto__$$], null));
      clara.rules.listener.add_accum_reduced_BANG_($listener$$, this, $join_bindings$$, $G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$);
      clara.rules.memory.add_accum_reduced_BANG_($memory$$, this, $join_bindings$$, $G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$);
      $G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$ = $APP.cljs.core.seq($matched_tokens$$);
      for (var $G__52476_chunk__50187_52440_token_52479_token_52524$$ = null, $G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$ = 0, $accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$ = 0;;) {
        if ($accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$ < $G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$) {
          var $token_52443$$ = $G__52476_chunk__50187_52440_token_52479_token_52524$$.cljs$core$IIndexed$_nth$arity$2(null, $accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$), $new_filtered_facts_52444$$ = clara.rules.engine.filter_accum_facts(this, $self__$$.join_filter_fn, $token_52443$$, $G__52510_c__5548__auto__$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$);
          if ($APP.cljs.core.seq($new_filtered_facts_52444$$)) {
            var $previous_converted_52449_previous_filtered_facts_52445$$ = clara.rules.engine.filter_accum_facts(this, $self__$$.join_filter_fn, $token_52443$$, $G__52570_c__5548__auto___52567_count__50201_52522_previous_candidates_52435_previous_candidates_52437__$1_previous_converted_52578_previous_filtered_facts_52574$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$), $previous_accum_result_init_52446$$ = $APP.cljs.core.seq($previous_converted_52449_previous_filtered_facts_52445$$) ? 
            clara.rules.engine.do_accumulate($self__$$.accumulator, $previous_converted_52449_previous_filtered_facts_52445$$) : cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1($self__$$.accumulator) != null && $APP.cljs.core.empty_QMARK_($self__$$.new_bindings) ? cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1($self__$$.accumulator) : cljs$cst$3162$clara_DOT_rules_DOT_engine_SLASH_no_previous_value, $previous_accum_result_52447$$ = $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($previous_accum_result_init_52446$$, 
            cljs$cst$3162$clara_DOT_rules_DOT_engine_SLASH_no_previous_value) ? $previous_accum_result_init_52446$$ : null, $accum_result_52448_new_converted_52450$$ = function() {
              var $accum_previous_init$$ = $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($previous_accum_result_init_52446$$, cljs$cst$3162$clara_DOT_rules_DOT_engine_SLASH_no_previous_value) ? $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($self__$$.accumulator, cljs$cst$3097$initial_value, $previous_accum_result_52447$$) : $self__$$.accumulator;
              return clara.rules.engine.do_accumulate($accum_previous_init$$, $new_filtered_facts_52444$$);
            }();
            $previous_converted_52449_previous_filtered_facts_52445$$ = $previous_accum_result_52447$$ != null ? $convert_return_fn$jscomp$5_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$5_node$$.cljs$core$IFn$_invoke$arity$1($previous_accum_result_52447$$) : $convert_return_fn$jscomp$5_node$$.call(null, $previous_accum_result_52447$$) : null;
            $accum_result_52448_new_converted_52450$$ = $accum_result_52448_new_converted_52450$$ != null ? $convert_return_fn$jscomp$5_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$5_node$$.cljs$core$IFn$_invoke$arity$1($accum_result_52448_new_converted_52450$$) : $convert_return_fn$jscomp$5_node$$.call(null, $accum_result_52448_new_converted_52450$$) : null;
            if ($previous_converted_52449_previous_filtered_facts_52445$$ != null || $accum_result_52448_new_converted_52450$$ != null) {
              $accum_result_52448_new_converted_52450$$ == null ? clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_52443$$, $previous_converted_52449_previous_filtered_facts_52445$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$) : $previous_converted_52449_previous_filtered_facts_52445$$ == null ? clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, 
              $self__$$.accumulator, $self__$$.result_binding, $token_52443$$, $accum_result_52448_new_converted_52450$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$) : $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($accum_result_52448_new_converted_52450$$, $previous_converted_52449_previous_filtered_facts_52445$$) && (clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, 
              $token_52443$$, $previous_converted_52449_previous_filtered_facts_52445$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$), clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $token_52443$$, $accum_result_52448_new_converted_52450$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$));
            }
          }
          $accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$ += 1;
        } else {
          if ($G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$ = $APP.cljs.core.seq($G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$)) {
            if ($APP.cljs.core.chunked_seq_QMARK_($G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$)) {
              $G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$ = $APP.cljs.core.chunk_first($G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$), $G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$ = 
              $APP.cljs.core.chunk_rest($G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$), $G__52476_chunk__50187_52440_token_52479_token_52524$$ = $G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$, $G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$ = 
              $APP.cljs.core.count($G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$);
            } else {
              $G__52476_chunk__50187_52440_token_52479_token_52524$$ = $APP.cljs.core.first($G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$);
              var $new_filtered_facts_52480$$ = clara.rules.engine.filter_accum_facts(this, $self__$$.join_filter_fn, $G__52476_chunk__50187_52440_token_52479_token_52524$$, $G__52510_c__5548__auto__$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$);
              if ($APP.cljs.core.seq($new_filtered_facts_52480$$)) {
                $G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$ = clara.rules.engine.filter_accum_facts(this, $self__$$.join_filter_fn, $G__52476_chunk__50187_52440_token_52479_token_52524$$, $G__52570_c__5548__auto___52567_count__50201_52522_previous_candidates_52435_previous_candidates_52437__$1_previous_converted_52578_previous_filtered_facts_52574$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$);
                var $previous_accum_result_init_52482$$ = $APP.cljs.core.seq($G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$) ? clara.rules.engine.do_accumulate($self__$$.accumulator, $G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$) : cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1($self__$$.accumulator) != 
                null && $APP.cljs.core.empty_QMARK_($self__$$.new_bindings) ? cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1($self__$$.accumulator) : cljs$cst$3162$clara_DOT_rules_DOT_engine_SLASH_no_previous_value, $previous_accum_result_52483$$ = $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($previous_accum_result_init_52482$$, cljs$cst$3162$clara_DOT_rules_DOT_engine_SLASH_no_previous_value) ? $previous_accum_result_init_52482$$ : null;
                $accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$ = function() {
                  var $accum_previous_init$$ = $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($previous_accum_result_init_52482$$, cljs$cst$3162$clara_DOT_rules_DOT_engine_SLASH_no_previous_value) ? $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($self__$$.accumulator, cljs$cst$3097$initial_value, $previous_accum_result_52483$$) : $self__$$.accumulator;
                  return clara.rules.engine.do_accumulate($accum_previous_init$$, $new_filtered_facts_52480$$);
                }();
                $G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$ = $previous_accum_result_52483$$ != null ? $convert_return_fn$jscomp$5_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$5_node$$.cljs$core$IFn$_invoke$arity$1($previous_accum_result_52483$$) : $convert_return_fn$jscomp$5_node$$.call(null, $previous_accum_result_52483$$) : null;
                $accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$ = $accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$ != null ? $convert_return_fn$jscomp$5_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$5_node$$.cljs$core$IFn$_invoke$arity$1($accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$) : $convert_return_fn$jscomp$5_node$$.call(null, $accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$) : 
                null;
                if ($G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$ != null || $accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$ != null) {
                  $accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$ == null ? clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $G__52476_chunk__50187_52440_token_52479_token_52524$$, $G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$, 
                  $transport$$, $memory$$, $listener$$) : $G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$ == null ? clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $G__52476_chunk__50187_52440_token_52479_token_52524$$, $accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$, 
                  $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$) : $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$, $G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$) && (clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, 
                  $self__$$.accumulator, $self__$$.result_binding, $G__52476_chunk__50187_52440_token_52479_token_52524$$, $G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$), clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, 
                  $G__52476_chunk__50187_52440_token_52479_token_52524$$, $accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$));
                }
              }
              $G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$ = $APP.cljs.core.next($G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$);
              $G__52476_chunk__50187_52440_token_52479_token_52524$$ = null;
              $G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$ = 0;
            }
            $accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$ = 0;
          } else {
            break;
          }
        }
      }
      $G__52569_chunk__50200_52521_i__50150_token_52572$$ += 1;
    } else {
      if ($G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$ = $APP.cljs.core.seq($G__52508_seq__50146_seq__50146__$1$$)) {
        $G__52508_seq__50146_seq__50146__$1$$ = $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$;
        if ($APP.cljs.core.chunked_seq_QMARK_($G__52508_seq__50146_seq__50146__$1$$)) {
          $G__52510_c__5548__auto__$$ = $APP.cljs.core.chunk_first($G__52508_seq__50146_seq__50146__$1$$), $G__52508_seq__50146_seq__50146__$1$$ = $APP.cljs.core.chunk_rest($G__52508_seq__50146_seq__50146__$1$$), $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$ = $G__52510_c__5548__auto__$$, $G__52510_c__5548__auto__$$ = $APP.cljs.core.count($G__52510_c__5548__auto__$$), $chunk__50148_previous_candidates_52514_previous_candidates_52516__$1$$ = $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$, 
          $G__52568_combined_candidates_52517_count__50149_seq__50196_52520_seq__50196_52566__$1_temp__5825__auto___52565__$1$$ = $G__52510_c__5548__auto__$$;
        } else {
          $G__52510_c__5548__auto__$$ = $APP.cljs.core.first($G__52508_seq__50146_seq__50146__$1$$);
          $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52510_c__5548__auto__$$, 0, null);
          $G__52510_c__5548__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52510_c__5548__auto__$$, 1, null);
          $chunk__50148_previous_candidates_52514_previous_candidates_52516__$1$$ = clara.rules.memory.get_accum_reduced($memory$$, this, $join_bindings$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$);
          $chunk__50148_previous_candidates_52514_previous_candidates_52516__$1$$ = $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3072$clara_DOT_rules_DOT_memory_SLASH_no_accum_reduced, $chunk__50148_previous_candidates_52514_previous_candidates_52516__$1$$) ? $chunk__50148_previous_candidates_52514_previous_candidates_52516__$1$$ : null;
          $G__52568_combined_candidates_52517_count__50149_seq__50196_52520_seq__50196_52566__$1_temp__5825__auto___52565__$1$$ = $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.PersistentVector.EMPTY, $APP.cljs.core.cat, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$chunk__50148_previous_candidates_52514_previous_candidates_52516__$1$$, $G__52510_c__5548__auto__$$], null));
          clara.rules.listener.add_accum_reduced_BANG_($listener$$, this, $join_bindings$$, $G__52568_combined_candidates_52517_count__50149_seq__50196_52520_seq__50196_52566__$1_temp__5825__auto___52565__$1$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$);
          clara.rules.memory.add_accum_reduced_BANG_($memory$$, this, $join_bindings$$, $G__52568_combined_candidates_52517_count__50149_seq__50196_52520_seq__50196_52566__$1_temp__5825__auto___52565__$1$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$);
          $G__52568_combined_candidates_52517_count__50149_seq__50196_52520_seq__50196_52566__$1_temp__5825__auto___52565__$1$$ = $APP.cljs.core.seq($matched_tokens$$);
          $G__52569_chunk__50200_52521_i__50150_token_52572$$ = null;
          for ($G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$ = $G__52570_c__5548__auto___52567_count__50201_52522_previous_candidates_52435_previous_candidates_52437__$1_previous_converted_52578_previous_filtered_facts_52574$$ = 0;;) {
            if ($G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$ < $G__52570_c__5548__auto___52567_count__50201_52522_previous_candidates_52435_previous_candidates_52437__$1_previous_converted_52578_previous_filtered_facts_52574$$) {
              $G__52476_chunk__50187_52440_token_52479_token_52524$$ = $G__52569_chunk__50200_52521_i__50150_token_52572$$.cljs$core$IIndexed$_nth$arity$2(null, $G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$);
              var $new_filtered_facts_52525$$ = clara.rules.engine.filter_accum_facts(this, $self__$$.join_filter_fn, $G__52476_chunk__50187_52440_token_52479_token_52524$$, $G__52510_c__5548__auto__$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$);
              if ($APP.cljs.core.seq($new_filtered_facts_52525$$)) {
                $G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$ = clara.rules.engine.filter_accum_facts(this, $self__$$.join_filter_fn, $G__52476_chunk__50187_52440_token_52479_token_52524$$, $chunk__50148_previous_candidates_52514_previous_candidates_52516__$1$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$);
                var $previous_accum_result_init_52527$$ = $APP.cljs.core.seq($G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$) ? clara.rules.engine.do_accumulate($self__$$.accumulator, $G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$) : cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1($self__$$.accumulator) != 
                null && $APP.cljs.core.empty_QMARK_($self__$$.new_bindings) ? cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1($self__$$.accumulator) : cljs$cst$3162$clara_DOT_rules_DOT_engine_SLASH_no_previous_value, $previous_accum_result_52528$$ = $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($previous_accum_result_init_52527$$, cljs$cst$3162$clara_DOT_rules_DOT_engine_SLASH_no_previous_value) ? $previous_accum_result_init_52527$$ : null;
                $accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$ = function() {
                  var $accum_previous_init$$ = $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($previous_accum_result_init_52527$$, cljs$cst$3162$clara_DOT_rules_DOT_engine_SLASH_no_previous_value) ? $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($self__$$.accumulator, cljs$cst$3097$initial_value, $previous_accum_result_52528$$) : $self__$$.accumulator;
                  return clara.rules.engine.do_accumulate($accum_previous_init$$, $new_filtered_facts_52525$$);
                }();
                $G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$ = $previous_accum_result_52528$$ != null ? $convert_return_fn$jscomp$5_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$5_node$$.cljs$core$IFn$_invoke$arity$1($previous_accum_result_52528$$) : $convert_return_fn$jscomp$5_node$$.call(null, $previous_accum_result_52528$$) : null;
                $accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$ = $accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$ != null ? $convert_return_fn$jscomp$5_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$5_node$$.cljs$core$IFn$_invoke$arity$1($accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$) : $convert_return_fn$jscomp$5_node$$.call(null, $accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$) : 
                null;
                if ($G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$ != null || $accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$ != null) {
                  $accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$ == null ? clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $G__52476_chunk__50187_52440_token_52479_token_52524$$, $G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$, 
                  $transport$$, $memory$$, $listener$$) : $G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$ == null ? clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $G__52476_chunk__50187_52440_token_52479_token_52524$$, $accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$, 
                  $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$) : $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$, $G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$) && (clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, 
                  $self__$$.accumulator, $self__$$.result_binding, $G__52476_chunk__50187_52440_token_52479_token_52524$$, $G__52477_c__5548__auto___52474_count__50188_52441_previous_converted_52485_previous_converted_52530_previous_filtered_facts_52481_previous_filtered_facts_52526$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$), clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, 
                  $G__52476_chunk__50187_52440_token_52479_token_52524$$, $accum_result_52484_accum_result_52529_i__50189_52442_new_converted_52486_new_converted_52531$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$));
                }
              }
              $G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$ += 1;
            } else {
              if ($G__52568_combined_candidates_52517_count__50149_seq__50196_52520_seq__50196_52566__$1_temp__5825__auto___52565__$1$$ = $APP.cljs.core.seq($G__52568_combined_candidates_52517_count__50149_seq__50196_52520_seq__50196_52566__$1_temp__5825__auto___52565__$1$$)) {
                if ($APP.cljs.core.chunked_seq_QMARK_($G__52568_combined_candidates_52517_count__50149_seq__50196_52520_seq__50196_52566__$1_temp__5825__auto___52565__$1$$)) {
                  $G__52570_c__5548__auto___52567_count__50201_52522_previous_candidates_52435_previous_candidates_52437__$1_previous_converted_52578_previous_filtered_facts_52574$$ = $APP.cljs.core.chunk_first($G__52568_combined_candidates_52517_count__50149_seq__50196_52520_seq__50196_52566__$1_temp__5825__auto___52565__$1$$), $G__52568_combined_candidates_52517_count__50149_seq__50196_52520_seq__50196_52566__$1_temp__5825__auto___52565__$1$$ = $APP.cljs.core.chunk_rest($G__52568_combined_candidates_52517_count__50149_seq__50196_52520_seq__50196_52566__$1_temp__5825__auto___52565__$1$$), 
                  $G__52569_chunk__50200_52521_i__50150_token_52572$$ = $G__52570_c__5548__auto___52567_count__50201_52522_previous_candidates_52435_previous_candidates_52437__$1_previous_converted_52578_previous_filtered_facts_52574$$, $G__52570_c__5548__auto___52567_count__50201_52522_previous_candidates_52435_previous_candidates_52437__$1_previous_converted_52578_previous_filtered_facts_52574$$ = $APP.cljs.core.count($G__52570_c__5548__auto___52567_count__50201_52522_previous_candidates_52435_previous_candidates_52437__$1_previous_converted_52578_previous_filtered_facts_52574$$);
                } else {
                  $G__52569_chunk__50200_52521_i__50150_token_52572$$ = $APP.cljs.core.first($G__52568_combined_candidates_52517_count__50149_seq__50196_52520_seq__50196_52566__$1_temp__5825__auto___52565__$1$$);
                  var $new_filtered_facts_52573$$ = clara.rules.engine.filter_accum_facts(this, $self__$$.join_filter_fn, $G__52569_chunk__50200_52521_i__50150_token_52572$$, $G__52510_c__5548__auto__$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$);
                  if ($APP.cljs.core.seq($new_filtered_facts_52573$$)) {
                    $G__52570_c__5548__auto___52567_count__50201_52522_previous_candidates_52435_previous_candidates_52437__$1_previous_converted_52578_previous_filtered_facts_52574$$ = clara.rules.engine.filter_accum_facts(this, $self__$$.join_filter_fn, $G__52569_chunk__50200_52521_i__50150_token_52572$$, $chunk__50148_previous_candidates_52514_previous_candidates_52516__$1$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$);
                    var $previous_accum_result_init_52575$$ = $APP.cljs.core.seq($G__52570_c__5548__auto___52567_count__50201_52522_previous_candidates_52435_previous_candidates_52437__$1_previous_converted_52578_previous_filtered_facts_52574$$) ? clara.rules.engine.do_accumulate($self__$$.accumulator, $G__52570_c__5548__auto___52567_count__50201_52522_previous_candidates_52435_previous_candidates_52437__$1_previous_converted_52578_previous_filtered_facts_52574$$) : cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1($self__$$.accumulator) != 
                    null && $APP.cljs.core.empty_QMARK_($self__$$.new_bindings) ? cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1($self__$$.accumulator) : cljs$cst$3162$clara_DOT_rules_DOT_engine_SLASH_no_previous_value, $previous_accum_result_52576$$ = $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($previous_accum_result_init_52575$$, cljs$cst$3162$clara_DOT_rules_DOT_engine_SLASH_no_previous_value) ? $previous_accum_result_init_52575$$ : null;
                    $G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$ = function() {
                      var $accum_previous_init$$ = $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($previous_accum_result_init_52575$$, cljs$cst$3162$clara_DOT_rules_DOT_engine_SLASH_no_previous_value) ? $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($self__$$.accumulator, cljs$cst$3097$initial_value, $previous_accum_result_52576$$) : $self__$$.accumulator;
                      return clara.rules.engine.do_accumulate($accum_previous_init$$, $new_filtered_facts_52573$$);
                    }();
                    $G__52570_c__5548__auto___52567_count__50201_52522_previous_candidates_52435_previous_candidates_52437__$1_previous_converted_52578_previous_filtered_facts_52574$$ = $previous_accum_result_52576$$ != null ? $convert_return_fn$jscomp$5_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$5_node$$.cljs$core$IFn$_invoke$arity$1($previous_accum_result_52576$$) : $convert_return_fn$jscomp$5_node$$.call(null, $previous_accum_result_52576$$) : null;
                    $G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$ = $G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$ != null ? $convert_return_fn$jscomp$5_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$5_node$$.cljs$core$IFn$_invoke$arity$1($G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$) : 
                    $convert_return_fn$jscomp$5_node$$.call(null, $G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$) : null;
                    if ($G__52570_c__5548__auto___52567_count__50201_52522_previous_candidates_52435_previous_candidates_52437__$1_previous_converted_52578_previous_filtered_facts_52574$$ != null || $G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$ != null) {
                      $G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$ == null ? clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $G__52569_chunk__50200_52521_i__50150_token_52572$$, $G__52570_c__5548__auto___52567_count__50201_52522_previous_candidates_52435_previous_candidates_52437__$1_previous_converted_52578_previous_filtered_facts_52574$$, 
                      $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$) : $G__52570_c__5548__auto___52567_count__50201_52522_previous_candidates_52435_previous_candidates_52437__$1_previous_converted_52578_previous_filtered_facts_52574$$ == null ? clara.rules.engine.send_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $G__52569_chunk__50200_52521_i__50150_token_52572$$, $G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$, 
                      $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$) : $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$, $G__52570_c__5548__auto___52567_count__50201_52522_previous_candidates_52435_previous_candidates_52437__$1_previous_converted_52578_previous_filtered_facts_52574$$) && 
                      (clara.rules.engine.retract_accumulated(this, $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $G__52569_chunk__50200_52521_i__50150_token_52572$$, $G__52570_c__5548__auto___52567_count__50201_52522_previous_candidates_52435_previous_candidates_52437__$1_previous_converted_52578_previous_filtered_facts_52574$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$), clara.rules.engine.send_accumulated(this, 
                      $self__$$.accum_condition, $self__$$.accumulator, $self__$$.result_binding, $G__52569_chunk__50200_52521_i__50150_token_52572$$, $G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$, $G__52509_binding_candidates_seq_bindings$jscomp$238_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$));
                    }
                  }
                  $G__52568_combined_candidates_52517_count__50149_seq__50196_52520_seq__50196_52566__$1_temp__5825__auto___52565__$1$$ = $APP.cljs.core.next($G__52568_combined_candidates_52517_count__50149_seq__50196_52520_seq__50196_52566__$1_temp__5825__auto___52565__$1$$);
                  $G__52569_chunk__50200_52521_i__50150_token_52572$$ = null;
                  $G__52570_c__5548__auto___52567_count__50201_52522_previous_candidates_52435_previous_candidates_52437__$1_previous_converted_52578_previous_filtered_facts_52574$$ = 0;
                }
                $G__52475_accum_result_52577_combined_candidates_52438_i__50202_52523_new_converted_52579_seq__50183_52439_seq__50183_52473__$1_temp__5825__auto___52472$$ = 0;
              } else {
                break;
              }
            }
          }
          $G__52508_seq__50146_seq__50146__$1$$ = $APP.cljs.core.next($G__52508_seq__50146_seq__50146__$1$$);
          $chunk__50148_previous_candidates_52514_previous_candidates_52516__$1$$ = null;
          $G__52568_combined_candidates_52517_count__50149_seq__50196_52520_seq__50196_52566__$1_temp__5825__auto___52565__$1$$ = 0;
        }
        $G__52569_chunk__50200_52521_i__50150_token_52572$$ = 0;
      } else {
        return null;
      }
    }
  }
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k50129$$, $else__5326__auto__$$) {
  switch($k50129$$ instanceof $APP.cljs.core.Keyword ? $k50129$$.fqn : null) {
    case "id":
      return this.id;
    case "accum-condition":
      return this.accum_condition;
    case "accumulator":
      return this.accumulator;
    case "join-filter-fn":
      return this.join_filter_fn;
    case "result-binding":
      return this.result_binding;
    case "children":
      return this.children;
    case "binding-keys":
      return this.binding_keys;
    case "new-bindings":
      return this.new_bindings;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k50129$$, $else__5326__auto__$$);
  }
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.clara$rules$engine$IRightActivate$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.clara$rules$engine$IRightActivate$right_activate$arity$6 = function($node$$, $join_bindings$$, $elements$$, $memory$$, $transport$$, $listener$$) {
  clara.rules.listener.right_activate_BANG_($listener$$, this, $elements$$);
  return this.clara$rules$engine$IAccumRightActivate$right_activate_reduced$arity$6(null, $join_bindings$$, this.clara$rules$engine$IAccumRightActivate$pre_reduce$arity$2(null, $elements$$), $memory$$, $transport$$, $listener$$);
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.clara$rules$engine$IRightActivate$right_retract$arity$6 = function($convert_return_fn$jscomp$6_node$$, $join_bindings$$, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$, $memory$$, $transport$$, $listener$$) {
  clara.rules.listener.right_retract_BANG_($listener$$, this, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$);
  $convert_return_fn$jscomp$6_node$$ = cljs$cst$3101$convert_return_fn.cljs$core$IFn$_invoke$arity$1(this.accumulator);
  for (var $matched_tokens$$ = clara.rules.memory.get_tokens($memory$$, this, $join_bindings$$), $G__52694_seq__50208_seq__50208__$1$$ = $APP.cljs.core.seq(clara.rules.platform.group_by_seq($APP.cljs$cst$394$bindings, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$)), $chunk__50212_facts_52698_new_candidates_52699$$ = null, $G__52734_count__50213_seq__50260_52700_seq__50260_52731__$1_temp__5825__auto___52730__$1$$ = 0, $G__52735_chunk__50264_52701_i__50214_token_52738$$ = 0;;) {
    if ($G__52735_chunk__50264_52701_i__50214_token_52738$$ < $G__52734_count__50213_seq__50260_52700_seq__50260_52731__$1_temp__5825__auto___52730__$1$$) {
      var $G__52696_c__5548__auto__$$ = $chunk__50212_facts_52698_new_candidates_52699$$.cljs$core$IIndexed$_nth$arity$2(null, $G__52735_chunk__50264_52701_i__50214_token_52738$$);
      $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52696_c__5548__auto__$$, 0, null);
      var $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52696_c__5548__auto__$$, 1, null);
      $G__52696_c__5548__auto__$$ = clara.rules.memory.get_accum_reduced($memory$$, this, $join_bindings$$, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$);
      if ($APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3072$clara_DOT_rules_DOT_memory_SLASH_no_accum_reduced, $G__52696_c__5548__auto__$$)) {
        $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$ = $APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2(cljs$cst$3109$fact, $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$);
        $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$ = $APP.cljs.core.second(clara.rules.memory.remove_first_of_each($G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$, $G__52696_c__5548__auto__$$));
        clara.rules.listener.add_accum_reduced_BANG_($listener$$, this, $join_bindings$$, $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$);
        clara.rules.memory.add_accum_reduced_BANG_($memory$$, this, $join_bindings$$, $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$);
        for (var $G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$ = $APP.cljs.core.seq($matched_tokens$$), $G__52653_chunk__50251_52617_token_52657_token_52704$$ = null, $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$ = 0, $i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$ = 
        0;;) {
          if ($i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$ < $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$) {
            var $token_52620$$ = $G__52653_chunk__50251_52617_token_52657_token_52704$$.cljs$core$IIndexed$_nth$arity$2(null, $i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$), $previous_converted_52625_previous_facts_52621_previous_result_52623$$ = clara.rules.engine.filter_accum_facts(this, this.join_filter_fn, $token_52620$$, $G__52696_c__5548__auto__$$, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$), 
            $new_converted_52626_new_facts_52622_new_result_52624$$ = clara.rules.engine.filter_accum_facts(this, this.join_filter_fn, $token_52620$$, $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$);
            $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.count($previous_converted_52625_previous_facts_52621_previous_result_52623$$), $APP.cljs.core.count($new_converted_52626_new_facts_52622_new_result_52624$$)) && ($previous_converted_52625_previous_facts_52621_previous_result_52623$$ = clara.rules.engine.do_accumulate(this.accumulator, $previous_converted_52625_previous_facts_52621_previous_result_52623$$), $new_converted_52626_new_facts_52622_new_result_52624$$ = $APP.cljs.core.seq($new_converted_52626_new_facts_52622_new_result_52624$$) ? 
            clara.rules.engine.do_accumulate(this.accumulator, $new_converted_52626_new_facts_52622_new_result_52624$$) : cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1(this.accumulator) != null && $APP.cljs.core.empty_QMARK_(this.new_bindings) ? cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1(this.accumulator) : null, $previous_converted_52625_previous_facts_52621_previous_result_52623$$ = $previous_converted_52625_previous_facts_52621_previous_result_52623$$ != null ? $convert_return_fn$jscomp$6_node$$.cljs$core$IFn$_invoke$arity$1 ? 
            $convert_return_fn$jscomp$6_node$$.cljs$core$IFn$_invoke$arity$1($previous_converted_52625_previous_facts_52621_previous_result_52623$$) : $convert_return_fn$jscomp$6_node$$.call(null, $previous_converted_52625_previous_facts_52621_previous_result_52623$$) : null, $new_converted_52626_new_facts_52622_new_result_52624$$ = $new_converted_52626_new_facts_52622_new_result_52624$$ != null ? $convert_return_fn$jscomp$6_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$6_node$$.cljs$core$IFn$_invoke$arity$1($new_converted_52626_new_facts_52622_new_result_52624$$) : 
            $convert_return_fn$jscomp$6_node$$.call(null, $new_converted_52626_new_facts_52622_new_result_52624$$) : null, $previous_converted_52625_previous_facts_52621_previous_result_52623$$ != null || $new_converted_52626_new_facts_52622_new_result_52624$$ != null) && ($new_converted_52626_new_facts_52622_new_result_52624$$ == null ? clara.rules.engine.retract_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $token_52620$$, $previous_converted_52625_previous_facts_52621_previous_result_52623$$, 
            $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$) : $previous_converted_52625_previous_facts_52621_previous_result_52623$$ == null ? clara.rules.engine.send_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $token_52620$$, $new_converted_52626_new_facts_52622_new_result_52624$$, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$) : $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($previous_converted_52625_previous_facts_52621_previous_result_52623$$, 
            $new_converted_52626_new_facts_52622_new_result_52624$$) && (clara.rules.engine.retract_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $token_52620$$, $previous_converted_52625_previous_facts_52621_previous_result_52623$$, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$), clara.rules.engine.send_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $token_52620$$, $new_converted_52626_new_facts_52622_new_result_52624$$, 
            $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$)));
            $i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$ += 1;
          } else {
            if ($G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$ = $APP.cljs.core.seq($G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$)) {
              $APP.cljs.core.chunked_seq_QMARK_($G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$) ? ($G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$ = $APP.cljs.core.chunk_first($G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$), 
              $G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$ = $APP.cljs.core.chunk_rest($G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$), $G__52653_chunk__50251_52617_token_52657_token_52704$$ = $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$, 
              $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$ = $APP.cljs.core.count($G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$)) : ($G__52653_chunk__50251_52617_token_52657_token_52704$$ = $APP.cljs.core.first($G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$), 
              $i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$ = clara.rules.engine.filter_accum_facts(this, this.join_filter_fn, $G__52653_chunk__50251_52617_token_52657_token_52704$$, $G__52696_c__5548__auto__$$, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$), $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$ = 
              clara.rules.engine.filter_accum_facts(this, this.join_filter_fn, $G__52653_chunk__50251_52617_token_52657_token_52704$$, $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$), $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.count($i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$), 
              $APP.cljs.core.count($G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$)) && ($i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$ = clara.rules.engine.do_accumulate(this.accumulator, $i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$), 
              $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$ = $APP.cljs.core.seq($G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$) ? clara.rules.engine.do_accumulate(this.accumulator, $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$) : 
              cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1(this.accumulator) != null && $APP.cljs.core.empty_QMARK_(this.new_bindings) ? cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1(this.accumulator) : null, $i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$ = $i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$ != 
              null ? $convert_return_fn$jscomp$6_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$6_node$$.cljs$core$IFn$_invoke$arity$1($i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$) : $convert_return_fn$jscomp$6_node$$.call(null, $i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$) : 
              null, $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$ = $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$ != null ? $convert_return_fn$jscomp$6_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$6_node$$.cljs$core$IFn$_invoke$arity$1($G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$) : 
              $convert_return_fn$jscomp$6_node$$.call(null, $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$) : null, $i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$ != null || $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$ != 
              null) && ($G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$ == null ? clara.rules.engine.retract_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $G__52653_chunk__50251_52617_token_52657_token_52704$$, $i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$, 
              $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$) : $i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$ == null ? clara.rules.engine.send_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $G__52653_chunk__50251_52617_token_52657_token_52704$$, $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$, 
              $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$) : $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$, $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$) && (clara.rules.engine.retract_accumulated(this, 
              this.accum_condition, this.accumulator, this.result_binding, $G__52653_chunk__50251_52617_token_52657_token_52704$$, $i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$), clara.rules.engine.send_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $G__52653_chunk__50251_52617_token_52657_token_52704$$, 
              $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$))), $G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$ = $APP.cljs.core.next($G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$), 
              $G__52653_chunk__50251_52617_token_52657_token_52704$$ = null, $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$ = 0), $i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$ = 0;
            } else {
              break;
            }
          }
        }
      }
      $G__52735_chunk__50264_52701_i__50214_token_52738$$ += 1;
    } else {
      if ($G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$ = $APP.cljs.core.seq($G__52694_seq__50208_seq__50208__$1$$)) {
        $G__52694_seq__50208_seq__50208__$1$$ = $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$;
        if ($APP.cljs.core.chunked_seq_QMARK_($G__52694_seq__50208_seq__50208__$1$$)) {
          $G__52696_c__5548__auto__$$ = $APP.cljs.core.chunk_first($G__52694_seq__50208_seq__50208__$1$$), $G__52694_seq__50208_seq__50208__$1$$ = $APP.cljs.core.chunk_rest($G__52694_seq__50208_seq__50208__$1$$), $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$ = $G__52696_c__5548__auto__$$, $G__52696_c__5548__auto__$$ = $APP.cljs.core.count($G__52696_c__5548__auto__$$), $chunk__50212_facts_52698_new_candidates_52699$$ = $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$, 
          $G__52734_count__50213_seq__50260_52700_seq__50260_52731__$1_temp__5825__auto___52730__$1$$ = $G__52696_c__5548__auto__$$;
        } else {
          $G__52696_c__5548__auto__$$ = $APP.cljs.core.first($G__52694_seq__50208_seq__50208__$1$$);
          $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52696_c__5548__auto__$$, 0, null);
          $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52696_c__5548__auto__$$, 1, null);
          $G__52696_c__5548__auto__$$ = clara.rules.memory.get_accum_reduced($memory$$, this, $join_bindings$$, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$);
          if ($APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$3072$clara_DOT_rules_DOT_memory_SLASH_no_accum_reduced, $G__52696_c__5548__auto__$$)) {
            for ($chunk__50212_facts_52698_new_candidates_52699$$ = $APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2(cljs$cst$3109$fact, $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$), $chunk__50212_facts_52698_new_candidates_52699$$ = $APP.cljs.core.second(clara.rules.memory.remove_first_of_each($chunk__50212_facts_52698_new_candidates_52699$$, $G__52696_c__5548__auto__$$)), clara.rules.listener.add_accum_reduced_BANG_($listener$$, this, $join_bindings$$, $chunk__50212_facts_52698_new_candidates_52699$$, 
            $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$), clara.rules.memory.add_accum_reduced_BANG_($memory$$, this, $join_bindings$$, $chunk__50212_facts_52698_new_candidates_52699$$, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$), $G__52734_count__50213_seq__50260_52700_seq__50260_52731__$1_temp__5825__auto___52730__$1$$ = $APP.cljs.core.seq($matched_tokens$$), $G__52735_chunk__50264_52701_i__50214_token_52738$$ = null, $G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$ = 
            $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$ = 0;;) {
              if ($G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$ < $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$) {
                $G__52653_chunk__50251_52617_token_52657_token_52704$$ = $G__52735_chunk__50264_52701_i__50214_token_52738$$.cljs$core$IIndexed$_nth$arity$2(null, $G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$), $i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$ = clara.rules.engine.filter_accum_facts(this, 
                this.join_filter_fn, $G__52653_chunk__50251_52617_token_52657_token_52704$$, $G__52696_c__5548__auto__$$, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$), $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$ = clara.rules.engine.filter_accum_facts(this, this.join_filter_fn, $G__52653_chunk__50251_52617_token_52657_token_52704$$, $chunk__50212_facts_52698_new_candidates_52699$$, 
                $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$), $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.count($i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$), $APP.cljs.core.count($G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$)) && 
                ($i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$ = clara.rules.engine.do_accumulate(this.accumulator, $i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$), $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$ = 
                $APP.cljs.core.seq($G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$) ? clara.rules.engine.do_accumulate(this.accumulator, $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$) : cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1(this.accumulator) != null && $APP.cljs.core.empty_QMARK_(this.new_bindings) ? 
                cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1(this.accumulator) : null, $i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$ = $i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$ != null ? $convert_return_fn$jscomp$6_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$6_node$$.cljs$core$IFn$_invoke$arity$1($i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$) : 
                $convert_return_fn$jscomp$6_node$$.call(null, $i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$) : null, $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$ = $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$ != 
                null ? $convert_return_fn$jscomp$6_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$6_node$$.cljs$core$IFn$_invoke$arity$1($G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$) : $convert_return_fn$jscomp$6_node$$.call(null, $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$) : 
                null, $i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$ != null || $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$ != null) && ($G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$ == 
                null ? clara.rules.engine.retract_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $G__52653_chunk__50251_52617_token_52657_token_52704$$, $i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$) : $i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$ == 
                null ? clara.rules.engine.send_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $G__52653_chunk__50251_52617_token_52657_token_52704$$, $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$) : $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$, 
                $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$) && (clara.rules.engine.retract_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $G__52653_chunk__50251_52617_token_52657_token_52704$$, $i__50253_52619_previous_converted_52663_previous_converted_52709_previous_facts_52659_previous_facts_52705_previous_result_52661_previous_result_52707$$, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$, 
                $transport$$, $memory$$, $listener$$), clara.rules.engine.send_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $G__52653_chunk__50251_52617_token_52657_token_52704$$, $G__52654_c__5548__auto___52651_count__50252_52618_new_converted_52664_new_converted_52710_new_facts_52660_new_facts_52706_new_result_52662_new_result_52708$$, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$))), $G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$ += 
                1;
              } else {
                if ($G__52734_count__50213_seq__50260_52700_seq__50260_52731__$1_temp__5825__auto___52730__$1$$ = $APP.cljs.core.seq($G__52734_count__50213_seq__50260_52700_seq__50260_52731__$1_temp__5825__auto___52730__$1$$)) {
                  $APP.cljs.core.chunked_seq_QMARK_($G__52734_count__50213_seq__50260_52700_seq__50260_52731__$1_temp__5825__auto___52730__$1$$) ? ($G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$ = $APP.cljs.core.chunk_first($G__52734_count__50213_seq__50260_52700_seq__50260_52731__$1_temp__5825__auto___52730__$1$$), $G__52734_count__50213_seq__50260_52700_seq__50260_52731__$1_temp__5825__auto___52730__$1$$ = $APP.cljs.core.chunk_rest($G__52734_count__50213_seq__50260_52700_seq__50260_52731__$1_temp__5825__auto___52730__$1$$), 
                  $G__52735_chunk__50264_52701_i__50214_token_52738$$ = $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$, $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$ = $APP.cljs.core.count($G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$)) : ($G__52735_chunk__50264_52701_i__50214_token_52738$$ = $APP.cljs.core.first($G__52734_count__50213_seq__50260_52700_seq__50260_52731__$1_temp__5825__auto___52730__$1$$), $G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$ = 
                  clara.rules.engine.filter_accum_facts(this, this.join_filter_fn, $G__52735_chunk__50264_52701_i__50214_token_52738$$, $G__52696_c__5548__auto__$$, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$), $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$ = clara.rules.engine.filter_accum_facts(this, this.join_filter_fn, $G__52735_chunk__50264_52701_i__50214_token_52738$$, $chunk__50212_facts_52698_new_candidates_52699$$, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$), 
                  $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.count($G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$), $APP.cljs.core.count($G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$)) && ($G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$ = 
                  clara.rules.engine.do_accumulate(this.accumulator, $G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$), $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$ = $APP.cljs.core.seq($G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$) ? clara.rules.engine.do_accumulate(this.accumulator, $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$) : 
                  cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1(this.accumulator) != null && $APP.cljs.core.empty_QMARK_(this.new_bindings) ? cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1(this.accumulator) : null, $G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$ = $G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$ != 
                  null ? $convert_return_fn$jscomp$6_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$6_node$$.cljs$core$IFn$_invoke$arity$1($G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$) : $convert_return_fn$jscomp$6_node$$.call(null, $G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$) : 
                  null, $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$ = $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$ != null ? $convert_return_fn$jscomp$6_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$6_node$$.cljs$core$IFn$_invoke$arity$1($G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$) : $convert_return_fn$jscomp$6_node$$.call(null, $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$) : null, $G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$ != 
                  null || $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$ != null) && ($G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$ == null ? clara.rules.engine.retract_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $G__52735_chunk__50264_52701_i__50214_token_52738$$, $G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$, 
                  $transport$$, $memory$$, $listener$$) : $G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$ == null ? clara.rules.engine.send_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $G__52735_chunk__50264_52701_i__50214_token_52738$$, $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$, 
                  $transport$$, $memory$$, $listener$$) : $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$, $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$) && (clara.rules.engine.retract_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $G__52735_chunk__50264_52701_i__50214_token_52738$$, $G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$, 
                  $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$), clara.rules.engine.send_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $G__52735_chunk__50264_52701_i__50214_token_52738$$, $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$, $G__52695_bindings$jscomp$239_elements$jscomp$55_temp__5825__auto__$$, $transport$$, $memory$$, $listener$$))), $G__52734_count__50213_seq__50260_52700_seq__50260_52731__$1_temp__5825__auto___52730__$1$$ = 
                  $APP.cljs.core.next($G__52734_count__50213_seq__50260_52700_seq__50260_52731__$1_temp__5825__auto___52730__$1$$), $G__52735_chunk__50264_52701_i__50214_token_52738$$ = null, $G__52736_c__5548__auto___52732_count__50265_52702_elements__$1$$ = 0), $G__52652_i__50266_52703_previous_converted_52747_previous_facts_52739_previous_result_52745_seq__50247_52616_seq__50247_52648__$1_temp__5825__auto___52646$$ = 0;
                } else {
                  break;
                }
              }
            }
          }
          $G__52694_seq__50208_seq__50208__$1$$ = $APP.cljs.core.next($G__52694_seq__50208_seq__50208__$1$$);
          $chunk__50212_facts_52698_new_candidates_52699$$ = null;
          $G__52734_count__50213_seq__50260_52700_seq__50260_52731__$1_temp__5825__auto___52730__$1$$ = 0;
        }
        $G__52735_chunk__50264_52701_i__50214_token_52738$$ = 0;
      } else {
        return null;
      }
    }
  }
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__50270_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__50270_v__5348__auto__$$, 0, null);
    $p__50270_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__50270_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__50270_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__50270_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#clara.rules.engine.AccumulateWithJoinFilterNode{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 8, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id, this.id], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3152$accum_condition, this.accum_condition], 
  null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3153$accumulator, this.accumulator], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3146$join_filter_fn, this.join_filter_fn], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3154$result_binding, this.result_binding], null), new $APP.cljs.core.PersistentVector(null, 
  2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$3116$children, this.children], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3142$binding_keys, this.binding_keys], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3155$new_bindings, this.new_bindings], null)], null), this.__extmap));
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__50128$$) {
  return new $APP.cljs.core.RecordIter(0, this, 8, new $APP.cljs.core.PersistentVector(null, 8, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id, cljs$cst$3152$accum_condition, cljs$cst$3153$accumulator, cljs$cst$3146$join_filter_fn, cljs$cst$3154$result_binding, $APP.cljs$cst$3116$children, cljs$cst$3142$binding_keys, cljs$cst$3155$new_bindings], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new clara.rules.engine.AccumulateWithJoinFilterNode(this.id, this.accum_condition, this.accumulator, this.join_filter_fn, this.result_binding, this.children, this.binding_keys, this.new_bindings, this.__meta, this.__extmap, this.__hash);
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 8 + $APP.cljs.core.count(this.__extmap);
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$108_h__5134__auto____$1$jscomp$108_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$108_h__5134__auto____$1$jscomp$108_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$108_h__5134__auto____$1$jscomp$108_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$108_h__5134__auto____$1$jscomp$108_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$108_h__5134__auto____$1$jscomp$108_this__5319__auto__$$ = -367913407 ^ $APP.cljs.core.hash_unordered_coll(this);
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this50130$$, $other50131$$) {
  return $other50131$$ != null && this.constructor === $other50131$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.id, $other50131$$.id) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.accum_condition, $other50131$$.accum_condition) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.accumulator, $other50131$$.accumulator) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.join_filter_fn, $other50131$$.join_filter_fn) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.result_binding, 
  $other50131$$.result_binding) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.children, $other50131$$.children) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.binding_keys, $other50131$$.binding_keys) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.new_bindings, $other50131$$.new_bindings) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other50131$$.__extmap);
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.clara$rules$engine$IAccumInspect$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.clara$rules$engine$IAccumInspect$token__GT_matching_elements$arity$3 = function($join_bindings$jscomp$79_this$$$, $memory$$, $token$$) {
  var $self__$$ = this;
  $join_bindings$jscomp$79_this$$$ = $APP.cljs.core.select_keys($APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($token$$), this.clara$rules$engine$ILeftActivate$get_join_keys$arity$1(null));
  var $fact_bindings$$ = $APP.cljs.core.select_keys($APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($token$$), $self__$$.new_bindings);
  $memory$$ = clara.rules.memory.get_accum_reduced($memory$$, this, $join_bindings$jscomp$79_this$$$, $APP.cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$join_bindings$jscomp$79_this$$$, $fact_bindings$$], 0)));
  return $APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2(function($fact$$) {
    var $G__50283$$ = $APP.cljs.core.PersistentArrayMap.EMPTY;
    return $self__$$.join_filter_fn.cljs$core$IFn$_invoke$arity$4 ? $self__$$.join_filter_fn.cljs$core$IFn$_invoke$arity$4($token$$, $fact$$, $fact_bindings$$, $G__50283$$) : $self__$$.join_filter_fn.call(null, $token$$, $fact$$, $fact_bindings$$, $G__50283$$);
  }, $memory$$);
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.clara$rules$engine$IConditionNode$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.clara$rules$engine$IConditionNode$get_condition_description$arity$1 = function($accumulator__$1$jscomp$1_this$$$) {
  var $condition$jscomp$17_from$jscomp$10_map__50284__$1_type$$ = $APP.cljs.core.__destructure_map(this.accum_condition);
  $accumulator__$1$jscomp$1_this$$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($condition$jscomp$17_from$jscomp$10_map__50284__$1_type$$, cljs$cst$3153$accumulator);
  $condition$jscomp$17_from$jscomp$10_map__50284__$1_type$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($condition$jscomp$17_from$jscomp$10_map__50284__$1_type$$, $APP.cljs$cst$3156$from);
  var $map__50285__$1_result_symbol$$ = $APP.cljs.core.__destructure_map($condition$jscomp$17_from$jscomp$10_map__50284__$1_type$$);
  $condition$jscomp$17_from$jscomp$10_map__50284__$1_type$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__50285__$1_result_symbol$$, $APP.cljs$cst$139$type);
  var $constraints$jscomp$18_full_constraints$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__50285__$1_result_symbol$$, cljs$cst$3143$constraints), $original_constraints$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__50285__$1_result_symbol$$, cljs$cst$3147$original_constraints);
  $map__50285__$1_result_symbol$$ = $APP.cljs.core.symbol.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.name(this.result_binding));
  $constraints$jscomp$18_full_constraints$$ = $APP.cljs.core.seq($original_constraints$$) ? $original_constraints$$ : $constraints$jscomp$18_full_constraints$$;
  $condition$jscomp$17_from$jscomp$10_map__50284__$1_type$$ = $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$condition$jscomp$17_from$jscomp$10_map__50284__$1_type$$], null), $constraints$jscomp$18_full_constraints$$);
  return new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$map__50285__$1_result_symbol$$, cljs$cst$3157$_LT__, $accumulator__$1$jscomp$1_this$$$, $APP.cljs$cst$3156$from, $condition$jscomp$17_from$jscomp$10_map__50284__$1_type$$], null);
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.clara$rules$engine$ILeftActivate$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.clara$rules$engine$ILeftActivate$left_activate$arity$6 = function($convert_return_fn$jscomp$7_converted_result$jscomp$2_node$$, $G__52868_join_bindings$$, $G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$, $memory$$, $transport$$, $listener$$) {
  clara.rules.listener.left_activate_BANG_($listener$$, this, $G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$);
  $convert_return_fn$jscomp$7_converted_result$jscomp$2_node$$ = cljs$cst$3101$convert_return_fn.cljs$core$IFn$_invoke$arity$1(this.accumulator);
  var $G__52953_grouped_candidate_facts_initial_value$$ = clara.rules.memory.get_accum_reduced_all($memory$$, this, $G__52868_join_bindings$$);
  clara.rules.memory.add_tokens_BANG_($memory$$, this, $G__52868_join_bindings$$, $G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$);
  if ($APP.cljs.core.seq($G__52953_grouped_candidate_facts_initial_value$$)) {
    $G__52868_join_bindings$$ = $APP.cljs.core.seq($G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$);
    for (var $G__52869_G__52910_G__52954_chunk__50299_chunk__50363_seq__50287_52872_seq__50287_52908__$1_temp__5825__auto___52907__$1$$ = null, $G__52911_chunk__50292_52873_count__50300_count__50364_fact_bindings_52915$$ = 0, $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$ = 0;;) {
      if ($G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$ < $G__52911_chunk__50292_52873_count__50300_count__50364_fact_bindings_52915$$) {
        $G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$ = $G__52869_G__52910_G__52954_chunk__50299_chunk__50363_seq__50287_52872_seq__50287_52908__$1_temp__5825__auto___52907__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$);
        for (var $G__52842_i__50294_52875_seq__50302_52804_seq__50302_52840__$1_temp__5825__auto___52839$$ = $APP.cljs.core.seq($G__52953_grouped_candidate_facts_initial_value$$), $G__52843_chunk__50307_52805_fact_bindings_52847_fact_bindings_52877$$ = null, $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$ = 
        0, $i__50309_52807$$ = 0;;) {
          if ($i__50309_52807$$ < $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$) {
            var $accum_result_52818_candidate_facts_52812_converted_result_52819_filtered_facts_52814_vec__50344_52810$$ = $G__52843_chunk__50307_52805_fact_bindings_52847_fact_bindings_52877$$.cljs$core$IIndexed$_nth$arity$2(null, $i__50309_52807$$), $fact_bindings_52811$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($accum_result_52818_candidate_facts_52812_converted_result_52819_filtered_facts_52814_vec__50344_52810$$, 0, null);
            $accum_result_52818_candidate_facts_52812_converted_result_52819_filtered_facts_52814_vec__50344_52810$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($accum_result_52818_candidate_facts_52812_converted_result_52819_filtered_facts_52814_vec__50344_52810$$, 1, null);
            $accum_result_52818_candidate_facts_52812_converted_result_52819_filtered_facts_52814_vec__50344_52810$$ = clara.rules.engine.filter_accum_facts(this, this.join_filter_fn, $G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$, $accum_result_52818_candidate_facts_52812_converted_result_52819_filtered_facts_52814_vec__50344_52810$$, $fact_bindings_52811$$);
            if ($APP.cljs.core.seq($accum_result_52818_candidate_facts_52812_converted_result_52819_filtered_facts_52814_vec__50344_52810$$) || cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1(this.accumulator) != null && $APP.cljs.core.empty_QMARK_(this.new_bindings)) {
              $accum_result_52818_candidate_facts_52812_converted_result_52819_filtered_facts_52814_vec__50344_52810$$ = clara.rules.engine.do_accumulate(this.accumulator, $accum_result_52818_candidate_facts_52812_converted_result_52819_filtered_facts_52814_vec__50344_52810$$), $accum_result_52818_candidate_facts_52812_converted_result_52819_filtered_facts_52814_vec__50344_52810$$ = $accum_result_52818_candidate_facts_52812_converted_result_52819_filtered_facts_52814_vec__50344_52810$$ != null ? 
              $convert_return_fn$jscomp$7_converted_result$jscomp$2_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$7_converted_result$jscomp$2_node$$.cljs$core$IFn$_invoke$arity$1($accum_result_52818_candidate_facts_52812_converted_result_52819_filtered_facts_52814_vec__50344_52810$$) : $convert_return_fn$jscomp$7_converted_result$jscomp$2_node$$.call(null, $accum_result_52818_candidate_facts_52812_converted_result_52819_filtered_facts_52814_vec__50344_52810$$) : null, $accum_result_52818_candidate_facts_52812_converted_result_52819_filtered_facts_52814_vec__50344_52810$$ != 
              null && clara.rules.engine.send_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$, $accum_result_52818_candidate_facts_52812_converted_result_52819_filtered_facts_52814_vec__50344_52810$$, $fact_bindings_52811$$, $transport$$, $memory$$, $listener$$);
            }
            $i__50309_52807$$ += 1;
          } else {
            if ($G__52842_i__50294_52875_seq__50302_52804_seq__50302_52840__$1_temp__5825__auto___52839$$ = $APP.cljs.core.seq($G__52842_i__50294_52875_seq__50302_52804_seq__50302_52840__$1_temp__5825__auto___52839$$)) {
              if ($APP.cljs.core.chunked_seq_QMARK_($G__52842_i__50294_52875_seq__50302_52804_seq__50302_52840__$1_temp__5825__auto___52839$$)) {
                $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$ = $APP.cljs.core.chunk_first($G__52842_i__50294_52875_seq__50302_52804_seq__50302_52840__$1_temp__5825__auto___52839$$), $G__52842_i__50294_52875_seq__50302_52804_seq__50302_52840__$1_temp__5825__auto___52839$$ = $APP.cljs.core.chunk_rest($G__52842_i__50294_52875_seq__50302_52804_seq__50302_52840__$1_temp__5825__auto___52839$$), 
                $G__52843_chunk__50307_52805_fact_bindings_52847_fact_bindings_52877$$ = $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$, $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$ = 
                $APP.cljs.core.count($G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$);
              } else {
                $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$ = $APP.cljs.core.first($G__52842_i__50294_52875_seq__50302_52804_seq__50302_52840__$1_temp__5825__auto___52839$$);
                $G__52843_chunk__50307_52805_fact_bindings_52847_fact_bindings_52877$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$, 0, null);
                $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$, 
                1, null);
                $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$ = clara.rules.engine.filter_accum_facts(this, this.join_filter_fn, $G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$, $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$, 
                $G__52843_chunk__50307_52805_fact_bindings_52847_fact_bindings_52877$$);
                if ($APP.cljs.core.seq($G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$) || cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1(this.accumulator) != null && $APP.cljs.core.empty_QMARK_(this.new_bindings)) {
                  $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$ = clara.rules.engine.do_accumulate(this.accumulator, $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$), 
                  $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$ = $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$ != 
                  null ? $convert_return_fn$jscomp$7_converted_result$jscomp$2_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$7_converted_result$jscomp$2_node$$.cljs$core$IFn$_invoke$arity$1($G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$) : $convert_return_fn$jscomp$7_converted_result$jscomp$2_node$$.call(null, 
                  $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$) : null, $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$ != 
                  null && clara.rules.engine.send_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$, $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$, $G__52843_chunk__50307_52805_fact_bindings_52847_fact_bindings_52877$$, 
                  $transport$$, $memory$$, $listener$$);
                }
                $G__52842_i__50294_52875_seq__50302_52804_seq__50302_52840__$1_temp__5825__auto___52839$$ = $APP.cljs.core.next($G__52842_i__50294_52875_seq__50302_52804_seq__50302_52840__$1_temp__5825__auto___52839$$);
                $G__52843_chunk__50307_52805_fact_bindings_52847_fact_bindings_52877$$ = null;
                $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$ = 0;
              }
              $i__50309_52807$$ = 0;
            } else {
              break;
            }
          }
        }
        $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$ += 1;
      } else {
        if ($G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$ = $APP.cljs.core.seq($G__52868_join_bindings$$)) {
          $G__52868_join_bindings$$ = $G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$;
          if ($APP.cljs.core.chunked_seq_QMARK_($G__52868_join_bindings$$)) {
            $G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$ = $APP.cljs.core.chunk_first($G__52868_join_bindings$$), $G__52868_join_bindings$$ = $APP.cljs.core.chunk_rest($G__52868_join_bindings$$), $G__52869_G__52910_G__52954_chunk__50299_chunk__50363_seq__50287_52872_seq__50287_52908__$1_temp__5825__auto___52907__$1$$ = $G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$, $G__52911_chunk__50292_52873_count__50300_count__50364_fact_bindings_52915$$ = 
            $G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$ = $APP.cljs.core.count($G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$);
          } else {
            $G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$ = $APP.cljs.core.first($G__52868_join_bindings$$);
            $G__52869_G__52910_G__52954_chunk__50299_chunk__50363_seq__50287_52872_seq__50287_52908__$1_temp__5825__auto___52907__$1$$ = $APP.cljs.core.seq($G__52953_grouped_candidate_facts_initial_value$$);
            $G__52911_chunk__50292_52873_count__50300_count__50364_fact_bindings_52915$$ = null;
            for ($G__52842_i__50294_52875_seq__50302_52804_seq__50302_52840__$1_temp__5825__auto___52839$$ = $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$ = 0;;) {
              if ($G__52842_i__50294_52875_seq__50302_52804_seq__50302_52840__$1_temp__5825__auto___52839$$ < $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$) {
                $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$ = $G__52911_chunk__50292_52873_count__50300_count__50364_fact_bindings_52915$$.cljs$core$IIndexed$_nth$arity$2(null, $G__52842_i__50294_52875_seq__50302_52804_seq__50302_52840__$1_temp__5825__auto___52839$$);
                $G__52843_chunk__50307_52805_fact_bindings_52847_fact_bindings_52877$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$, 0, null);
                $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$, 
                1, null);
                $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$ = clara.rules.engine.filter_accum_facts(this, this.join_filter_fn, $G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$, $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$, 
                $G__52843_chunk__50307_52805_fact_bindings_52847_fact_bindings_52877$$);
                if ($APP.cljs.core.seq($G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$) || cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1(this.accumulator) != null && $APP.cljs.core.empty_QMARK_(this.new_bindings)) {
                  $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$ = clara.rules.engine.do_accumulate(this.accumulator, $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$), 
                  $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$ = $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$ != 
                  null ? $convert_return_fn$jscomp$7_converted_result$jscomp$2_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$7_converted_result$jscomp$2_node$$.cljs$core$IFn$_invoke$arity$1($G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$) : $convert_return_fn$jscomp$7_converted_result$jscomp$2_node$$.call(null, 
                  $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$) : null, $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$ != 
                  null && clara.rules.engine.send_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$, $G__52844_accum_result_52850_accum_result_52893_c__5548__auto___52841_candidate_facts_52848_candidate_facts_52878_converted_result_52851_converted_result_52894_count__50308_52806_filtered_facts_52849_filtered_facts_52892_vec__50347_52846_vec__50356_52876$$, $G__52843_chunk__50307_52805_fact_bindings_52847_fact_bindings_52877$$, 
                  $transport$$, $memory$$, $listener$$);
                }
                $G__52842_i__50294_52875_seq__50302_52804_seq__50302_52840__$1_temp__5825__auto___52839$$ += 1;
              } else {
                if ($G__52869_G__52910_G__52954_chunk__50299_chunk__50363_seq__50287_52872_seq__50287_52908__$1_temp__5825__auto___52907__$1$$ = $APP.cljs.core.seq($G__52869_G__52910_G__52954_chunk__50299_chunk__50363_seq__50287_52872_seq__50287_52908__$1_temp__5825__auto___52907__$1$$)) {
                  if ($APP.cljs.core.chunked_seq_QMARK_($G__52869_G__52910_G__52954_chunk__50299_chunk__50363_seq__50287_52872_seq__50287_52908__$1_temp__5825__auto___52907__$1$$)) {
                    $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$ = $APP.cljs.core.chunk_first($G__52869_G__52910_G__52954_chunk__50299_chunk__50363_seq__50287_52872_seq__50287_52908__$1_temp__5825__auto___52907__$1$$), $G__52869_G__52910_G__52954_chunk__50299_chunk__50363_seq__50287_52872_seq__50287_52908__$1_temp__5825__auto___52907__$1$$ = $APP.cljs.core.chunk_rest($G__52869_G__52910_G__52954_chunk__50299_chunk__50363_seq__50287_52872_seq__50287_52908__$1_temp__5825__auto___52907__$1$$), 
                    $G__52911_chunk__50292_52873_count__50300_count__50364_fact_bindings_52915$$ = $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$, $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$ = $APP.cljs.core.count($G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$);
                  } else {
                    $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$ = $APP.cljs.core.first($G__52869_G__52910_G__52954_chunk__50299_chunk__50363_seq__50287_52872_seq__50287_52908__$1_temp__5825__auto___52907__$1$$);
                    $G__52911_chunk__50292_52873_count__50300_count__50364_fact_bindings_52915$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$, 0, null);
                    $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$, 1, null);
                    $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$ = clara.rules.engine.filter_accum_facts(this, this.join_filter_fn, $G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$, $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$, 
                    $G__52911_chunk__50292_52873_count__50300_count__50364_fact_bindings_52915$$);
                    if ($APP.cljs.core.seq($G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$) || cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1(this.accumulator) != null && $APP.cljs.core.empty_QMARK_(this.new_bindings)) {
                      $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$ = clara.rules.engine.do_accumulate(this.accumulator, $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$), $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$ = 
                      $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$ != null ? $convert_return_fn$jscomp$7_converted_result$jscomp$2_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$7_converted_result$jscomp$2_node$$.cljs$core$IFn$_invoke$arity$1($G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$) : 
                      $convert_return_fn$jscomp$7_converted_result$jscomp$2_node$$.call(null, $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$) : null, $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$ != null && clara.rules.engine.send_accumulated(this, 
                      this.accum_condition, this.accumulator, this.result_binding, $G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$, $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$, $G__52911_chunk__50292_52873_count__50300_count__50364_fact_bindings_52915$$, $transport$$, $memory$$, $listener$$);
                    }
                    $G__52869_G__52910_G__52954_chunk__50299_chunk__50363_seq__50287_52872_seq__50287_52908__$1_temp__5825__auto___52907__$1$$ = $APP.cljs.core.next($G__52869_G__52910_G__52954_chunk__50299_chunk__50363_seq__50287_52872_seq__50287_52908__$1_temp__5825__auto___52907__$1$$);
                    $G__52911_chunk__50292_52873_count__50300_count__50364_fact_bindings_52915$$ = null;
                    $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$ = 0;
                  }
                  $G__52842_i__50294_52875_seq__50302_52804_seq__50302_52840__$1_temp__5825__auto___52839$$ = 0;
                } else {
                  break;
                }
              }
            }
            $G__52868_join_bindings$$ = $APP.cljs.core.next($G__52868_join_bindings$$);
            $G__52869_G__52910_G__52954_chunk__50299_chunk__50363_seq__50287_52872_seq__50287_52908__$1_temp__5825__auto___52907__$1$$ = null;
            $G__52911_chunk__50292_52873_count__50300_count__50364_fact_bindings_52915$$ = 0;
          }
          $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$ = 0;
        } else {
          return null;
        }
      }
    }
  } else {
    if (cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1(this.accumulator) != null && $APP.cljs.core.empty_QMARK_(this.new_bindings)) {
      if ($G__52953_grouped_candidate_facts_initial_value$$ = cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1(this.accumulator), $convert_return_fn$jscomp$7_converted_result$jscomp$2_node$$ = $convert_return_fn$jscomp$7_converted_result$jscomp$2_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$7_converted_result$jscomp$2_node$$.cljs$core$IFn$_invoke$arity$1($G__52953_grouped_candidate_facts_initial_value$$) : $convert_return_fn$jscomp$7_converted_result$jscomp$2_node$$.call(null, 
      $G__52953_grouped_candidate_facts_initial_value$$), $convert_return_fn$jscomp$7_converted_result$jscomp$2_node$$ != null) {
        for ($G__52953_grouped_candidate_facts_initial_value$$ = $APP.cljs.core.seq($G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$), $G__52869_G__52910_G__52954_chunk__50299_chunk__50363_seq__50287_52872_seq__50287_52908__$1_temp__5825__auto___52907__$1$$ = null, $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$ = $G__52911_chunk__50292_52873_count__50300_count__50364_fact_bindings_52915$$ = 
        0;;) {
          if ($G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$ < $G__52911_chunk__50292_52873_count__50300_count__50364_fact_bindings_52915$$) {
            $G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$ = $G__52869_G__52910_G__52954_chunk__50299_chunk__50363_seq__50287_52872_seq__50287_52908__$1_temp__5825__auto___52907__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$), clara.rules.engine.send_accumulated(this, this.accum_condition, 
            this.accumulator, this.result_binding, $G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$, $convert_return_fn$jscomp$7_converted_result$jscomp$2_node$$, $G__52868_join_bindings$$, $transport$$, $memory$$, $listener$$), $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$ += 1;
          } else {
            if ($G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$ = $APP.cljs.core.seq($G__52953_grouped_candidate_facts_initial_value$$)) {
              $G__52953_grouped_candidate_facts_initial_value$$ = $G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$, $APP.cljs.core.chunked_seq_QMARK_($G__52953_grouped_candidate_facts_initial_value$$) ? ($G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$ = $APP.cljs.core.chunk_first($G__52953_grouped_candidate_facts_initial_value$$), $G__52953_grouped_candidate_facts_initial_value$$ = $APP.cljs.core.chunk_rest($G__52953_grouped_candidate_facts_initial_value$$), 
              $G__52869_G__52910_G__52954_chunk__50299_chunk__50363_seq__50287_52872_seq__50287_52908__$1_temp__5825__auto___52907__$1$$ = $G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$, $G__52911_chunk__50292_52873_count__50300_count__50364_fact_bindings_52915$$ = $G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$ = $APP.cljs.core.count($G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$)) : 
              ($G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$ = $APP.cljs.core.first($G__52953_grouped_candidate_facts_initial_value$$), clara.rules.engine.send_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $G__52870_G__52955_c__5548__auto__$jscomp$46_temp__5825__auto__$jscomp$410_token$jscomp$117_tokens$$, $convert_return_fn$jscomp$7_converted_result$jscomp$2_node$$, $G__52868_join_bindings$$, $transport$$, $memory$$, 
              $listener$$), $G__52953_grouped_candidate_facts_initial_value$$ = $APP.cljs.core.next($G__52953_grouped_candidate_facts_initial_value$$), $G__52869_G__52910_G__52954_chunk__50299_chunk__50363_seq__50287_52872_seq__50287_52908__$1_temp__5825__auto___52907__$1$$ = null, $G__52911_chunk__50292_52873_count__50300_count__50364_fact_bindings_52915$$ = 0), $G__52912_accum_result_52918_c__5548__auto___52909_candidate_facts_52916_converted_result_52919_count__50293_52874_filtered_facts_52917_i__50301_i__50365_vec__50359_52914$$ = 
              0;
            } else {
              return null;
            }
          }
        }
      } else {
        return null;
      }
    } else {
      return null;
    }
  }
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.clara$rules$engine$ILeftActivate$left_retract$arity$6 = function($convert_return_fn$jscomp$8_converted_result$jscomp$3_node$$, $G__53040_join_bindings$$, $G__53128_grouped_candidate_facts$jscomp$1_initial_value$jscomp$4_seq__50442_seq__50442__$1_tokens$$, $memory$$, $transport$$, $listener$$) {
  clara.rules.listener.left_retract_BANG_($listener$$, this, $G__53128_grouped_candidate_facts$jscomp$1_initial_value$jscomp$4_seq__50442_seq__50442__$1_tokens$$);
  var $G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$ = clara.rules.memory.remove_tokens_BANG_($memory$$, this, $G__53040_join_bindings$$, $G__53128_grouped_candidate_facts$jscomp$1_initial_value$jscomp$4_seq__50442_seq__50442__$1_tokens$$);
  $convert_return_fn$jscomp$8_converted_result$jscomp$3_node$$ = cljs$cst$3101$convert_return_fn.cljs$core$IFn$_invoke$arity$1(this.accumulator);
  $G__53128_grouped_candidate_facts$jscomp$1_initial_value$jscomp$4_seq__50442_seq__50442__$1_tokens$$ = clara.rules.memory.get_accum_reduced_all($memory$$, this, $G__53040_join_bindings$$);
  if ($APP.cljs.core.seq($G__53128_grouped_candidate_facts$jscomp$1_initial_value$jscomp$4_seq__50442_seq__50442__$1_tokens$$)) {
    $G__53040_join_bindings$$ = $APP.cljs.core.seq($G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$);
    for (var $G__53041_G__53076_G__53129_chunk__50379_chunk__50443_seq__50367_53046_seq__50367_53074__$1_temp__5825__auto___53072__$1$$ = null, $G__53077_chunk__50372_53047_count__50380_count__50444_fact_bindings_53084$$ = 0, $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$ = 0;;) {
      if ($G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$ < $G__53077_chunk__50372_53047_count__50380_count__50444_fact_bindings_53084$$) {
        $G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$ = $G__53041_G__53076_G__53129_chunk__50379_chunk__50443_seq__50367_53046_seq__50367_53074__$1_temp__5825__auto___53072__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$);
        for (var $G__53011_i__50374_53049_seq__50382_52971_seq__50382_53009__$1_temp__5825__auto___53008$$ = $APP.cljs.core.seq($G__53128_grouped_candidate_facts$jscomp$1_initial_value$jscomp$4_seq__50442_seq__50442__$1_tokens$$), $G__53012_chunk__50387_52972_fact_bindings_53017_fact_bindings_53051$$ = null, $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$ = 
        0, $i__50389_52974$$ = 0;;) {
          if ($i__50389_52974$$ < $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$) {
            var $accum_result_52988_candidate_facts_52978_filtered_facts_52982_retracted_converted_52989_vec__50424_52976$$ = $G__53012_chunk__50387_52972_fact_bindings_53017_fact_bindings_53051$$.cljs$core$IIndexed$_nth$arity$2(null, $i__50389_52974$$), $fact_bindings_52977$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($accum_result_52988_candidate_facts_52978_filtered_facts_52982_retracted_converted_52989_vec__50424_52976$$, 0, null);
            $accum_result_52988_candidate_facts_52978_filtered_facts_52982_retracted_converted_52989_vec__50424_52976$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($accum_result_52988_candidate_facts_52978_filtered_facts_52982_retracted_converted_52989_vec__50424_52976$$, 1, null);
            $accum_result_52988_candidate_facts_52978_filtered_facts_52982_retracted_converted_52989_vec__50424_52976$$ = clara.rules.engine.filter_accum_facts(this, this.join_filter_fn, $G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$, $accum_result_52988_candidate_facts_52978_filtered_facts_52982_retracted_converted_52989_vec__50424_52976$$, $fact_bindings_52977$$);
            if ($APP.cljs.core.seq($accum_result_52988_candidate_facts_52978_filtered_facts_52982_retracted_converted_52989_vec__50424_52976$$) || cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1(this.accumulator) != null && $APP.cljs.core.empty_QMARK_(this.new_bindings)) {
              $accum_result_52988_candidate_facts_52978_filtered_facts_52982_retracted_converted_52989_vec__50424_52976$$ = clara.rules.engine.do_accumulate(this.accumulator, $accum_result_52988_candidate_facts_52978_filtered_facts_52982_retracted_converted_52989_vec__50424_52976$$), $accum_result_52988_candidate_facts_52978_filtered_facts_52982_retracted_converted_52989_vec__50424_52976$$ = $accum_result_52988_candidate_facts_52978_filtered_facts_52982_retracted_converted_52989_vec__50424_52976$$ != 
              null ? $convert_return_fn$jscomp$8_converted_result$jscomp$3_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$8_converted_result$jscomp$3_node$$.cljs$core$IFn$_invoke$arity$1($accum_result_52988_candidate_facts_52978_filtered_facts_52982_retracted_converted_52989_vec__50424_52976$$) : $convert_return_fn$jscomp$8_converted_result$jscomp$3_node$$.call(null, $accum_result_52988_candidate_facts_52978_filtered_facts_52982_retracted_converted_52989_vec__50424_52976$$) : null, 
              $accum_result_52988_candidate_facts_52978_filtered_facts_52982_retracted_converted_52989_vec__50424_52976$$ != null && clara.rules.engine.retract_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$, $accum_result_52988_candidate_facts_52978_filtered_facts_52982_retracted_converted_52989_vec__50424_52976$$, $fact_bindings_52977$$, $transport$$, $memory$$, $listener$$);
            }
            $i__50389_52974$$ += 1;
          } else {
            if ($G__53011_i__50374_53049_seq__50382_52971_seq__50382_53009__$1_temp__5825__auto___53008$$ = $APP.cljs.core.seq($G__53011_i__50374_53049_seq__50382_52971_seq__50382_53009__$1_temp__5825__auto___53008$$)) {
              if ($APP.cljs.core.chunked_seq_QMARK_($G__53011_i__50374_53049_seq__50382_52971_seq__50382_53009__$1_temp__5825__auto___53008$$)) {
                $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$ = $APP.cljs.core.chunk_first($G__53011_i__50374_53049_seq__50382_52971_seq__50382_53009__$1_temp__5825__auto___53008$$), $G__53011_i__50374_53049_seq__50382_52971_seq__50382_53009__$1_temp__5825__auto___53008$$ = $APP.cljs.core.chunk_rest($G__53011_i__50374_53049_seq__50382_52971_seq__50382_53009__$1_temp__5825__auto___53008$$), 
                $G__53012_chunk__50387_52972_fact_bindings_53017_fact_bindings_53051$$ = $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$, $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$ = 
                $APP.cljs.core.count($G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$);
              } else {
                $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$ = $APP.cljs.core.first($G__53011_i__50374_53049_seq__50382_52971_seq__50382_53009__$1_temp__5825__auto___53008$$);
                $G__53012_chunk__50387_52972_fact_bindings_53017_fact_bindings_53051$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$, 0, null);
                $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$, 
                1, null);
                $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$ = clara.rules.engine.filter_accum_facts(this, this.join_filter_fn, $G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$, $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$, 
                $G__53012_chunk__50387_52972_fact_bindings_53017_fact_bindings_53051$$);
                if ($APP.cljs.core.seq($G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$) || cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1(this.accumulator) != null && $APP.cljs.core.empty_QMARK_(this.new_bindings)) {
                  $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$ = clara.rules.engine.do_accumulate(this.accumulator, $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$), 
                  $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$ = $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$ != 
                  null ? $convert_return_fn$jscomp$8_converted_result$jscomp$3_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$8_converted_result$jscomp$3_node$$.cljs$core$IFn$_invoke$arity$1($G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$) : $convert_return_fn$jscomp$8_converted_result$jscomp$3_node$$.call(null, 
                  $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$) : null, $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$ != 
                  null && clara.rules.engine.retract_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$, $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$, $G__53012_chunk__50387_52972_fact_bindings_53017_fact_bindings_53051$$, 
                  $transport$$, $memory$$, $listener$$);
                }
                $G__53011_i__50374_53049_seq__50382_52971_seq__50382_53009__$1_temp__5825__auto___53008$$ = $APP.cljs.core.next($G__53011_i__50374_53049_seq__50382_52971_seq__50382_53009__$1_temp__5825__auto___53008$$);
                $G__53012_chunk__50387_52972_fact_bindings_53017_fact_bindings_53051$$ = null;
                $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$ = 0;
              }
              $i__50389_52974$$ = 0;
            } else {
              break;
            }
          }
        }
        $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$ += 1;
      } else {
        if ($G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$ = $APP.cljs.core.seq($G__53040_join_bindings$$)) {
          $G__53040_join_bindings$$ = $G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$;
          if ($APP.cljs.core.chunked_seq_QMARK_($G__53040_join_bindings$$)) {
            $G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$ = $APP.cljs.core.chunk_first($G__53040_join_bindings$$), $G__53040_join_bindings$$ = $APP.cljs.core.chunk_rest($G__53040_join_bindings$$), $G__53041_G__53076_G__53129_chunk__50379_chunk__50443_seq__50367_53046_seq__50367_53074__$1_temp__5825__auto___53072__$1$$ = $G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$, $G__53077_chunk__50372_53047_count__50380_count__50444_fact_bindings_53084$$ = 
            $G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$ = $APP.cljs.core.count($G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$);
          } else {
            $G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$ = $APP.cljs.core.first($G__53040_join_bindings$$);
            $G__53041_G__53076_G__53129_chunk__50379_chunk__50443_seq__50367_53046_seq__50367_53074__$1_temp__5825__auto___53072__$1$$ = $APP.cljs.core.seq($G__53128_grouped_candidate_facts$jscomp$1_initial_value$jscomp$4_seq__50442_seq__50442__$1_tokens$$);
            $G__53077_chunk__50372_53047_count__50380_count__50444_fact_bindings_53084$$ = null;
            for ($G__53011_i__50374_53049_seq__50382_52971_seq__50382_53009__$1_temp__5825__auto___53008$$ = $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$ = 0;;) {
              if ($G__53011_i__50374_53049_seq__50382_52971_seq__50382_53009__$1_temp__5825__auto___53008$$ < $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$) {
                $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$ = $G__53077_chunk__50372_53047_count__50380_count__50444_fact_bindings_53084$$.cljs$core$IIndexed$_nth$arity$2(null, $G__53011_i__50374_53049_seq__50382_52971_seq__50382_53009__$1_temp__5825__auto___53008$$);
                $G__53012_chunk__50387_52972_fact_bindings_53017_fact_bindings_53051$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$, 0, null);
                $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$, 
                1, null);
                $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$ = clara.rules.engine.filter_accum_facts(this, this.join_filter_fn, $G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$, $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$, 
                $G__53012_chunk__50387_52972_fact_bindings_53017_fact_bindings_53051$$);
                if ($APP.cljs.core.seq($G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$) || cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1(this.accumulator) != null && $APP.cljs.core.empty_QMARK_(this.new_bindings)) {
                  $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$ = clara.rules.engine.do_accumulate(this.accumulator, $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$), 
                  $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$ = $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$ != 
                  null ? $convert_return_fn$jscomp$8_converted_result$jscomp$3_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$8_converted_result$jscomp$3_node$$.cljs$core$IFn$_invoke$arity$1($G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$) : $convert_return_fn$jscomp$8_converted_result$jscomp$3_node$$.call(null, 
                  $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$) : null, $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$ != 
                  null && clara.rules.engine.retract_accumulated(this, this.accum_condition, this.accumulator, this.result_binding, $G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$, $G__53013_accum_result_53022_accum_result_53054_c__5548__auto___53010_candidate_facts_53018_candidate_facts_53052_count__50388_52973_filtered_facts_53021_filtered_facts_53053_retracted_converted_53023_retracted_converted_53055_vec__50427_53016_vec__50436_53050$$, $G__53012_chunk__50387_52972_fact_bindings_53017_fact_bindings_53051$$, 
                  $transport$$, $memory$$, $listener$$);
                }
                $G__53011_i__50374_53049_seq__50382_52971_seq__50382_53009__$1_temp__5825__auto___53008$$ += 1;
              } else {
                if ($G__53041_G__53076_G__53129_chunk__50379_chunk__50443_seq__50367_53046_seq__50367_53074__$1_temp__5825__auto___53072__$1$$ = $APP.cljs.core.seq($G__53041_G__53076_G__53129_chunk__50379_chunk__50443_seq__50367_53046_seq__50367_53074__$1_temp__5825__auto___53072__$1$$)) {
                  if ($APP.cljs.core.chunked_seq_QMARK_($G__53041_G__53076_G__53129_chunk__50379_chunk__50443_seq__50367_53046_seq__50367_53074__$1_temp__5825__auto___53072__$1$$)) {
                    $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$ = $APP.cljs.core.chunk_first($G__53041_G__53076_G__53129_chunk__50379_chunk__50443_seq__50367_53046_seq__50367_53074__$1_temp__5825__auto___53072__$1$$), $G__53041_G__53076_G__53129_chunk__50379_chunk__50443_seq__50367_53046_seq__50367_53074__$1_temp__5825__auto___53072__$1$$ = $APP.cljs.core.chunk_rest($G__53041_G__53076_G__53129_chunk__50379_chunk__50443_seq__50367_53046_seq__50367_53074__$1_temp__5825__auto___53072__$1$$), 
                    $G__53077_chunk__50372_53047_count__50380_count__50444_fact_bindings_53084$$ = $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$, $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$ = $APP.cljs.core.count($G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$);
                  } else {
                    $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$ = $APP.cljs.core.first($G__53041_G__53076_G__53129_chunk__50379_chunk__50443_seq__50367_53046_seq__50367_53074__$1_temp__5825__auto___53072__$1$$);
                    $G__53077_chunk__50372_53047_count__50380_count__50444_fact_bindings_53084$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$, 0, null);
                    $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$, 1, null);
                    $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$ = clara.rules.engine.filter_accum_facts(this, this.join_filter_fn, $G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$, $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$, 
                    $G__53077_chunk__50372_53047_count__50380_count__50444_fact_bindings_53084$$);
                    if ($APP.cljs.core.seq($G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$) || cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1(this.accumulator) != null && $APP.cljs.core.empty_QMARK_(this.new_bindings)) {
                      $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$ = clara.rules.engine.do_accumulate(this.accumulator, $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$), $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$ = 
                      $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$ != null ? $convert_return_fn$jscomp$8_converted_result$jscomp$3_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$8_converted_result$jscomp$3_node$$.cljs$core$IFn$_invoke$arity$1($G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$) : 
                      $convert_return_fn$jscomp$8_converted_result$jscomp$3_node$$.call(null, $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$) : null, $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$ != null && clara.rules.engine.retract_accumulated(this, 
                      this.accum_condition, this.accumulator, this.result_binding, $G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$, $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$, $G__53077_chunk__50372_53047_count__50380_count__50444_fact_bindings_53084$$, $transport$$, $memory$$, $listener$$);
                    }
                    $G__53041_G__53076_G__53129_chunk__50379_chunk__50443_seq__50367_53046_seq__50367_53074__$1_temp__5825__auto___53072__$1$$ = $APP.cljs.core.next($G__53041_G__53076_G__53129_chunk__50379_chunk__50443_seq__50367_53046_seq__50367_53074__$1_temp__5825__auto___53072__$1$$);
                    $G__53077_chunk__50372_53047_count__50380_count__50444_fact_bindings_53084$$ = null;
                    $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$ = 0;
                  }
                  $G__53011_i__50374_53049_seq__50382_52971_seq__50382_53009__$1_temp__5825__auto___53008$$ = 0;
                } else {
                  break;
                }
              }
            }
            $G__53040_join_bindings$$ = $APP.cljs.core.next($G__53040_join_bindings$$);
            $G__53041_G__53076_G__53129_chunk__50379_chunk__50443_seq__50367_53046_seq__50367_53074__$1_temp__5825__auto___53072__$1$$ = null;
            $G__53077_chunk__50372_53047_count__50380_count__50444_fact_bindings_53084$$ = 0;
          }
          $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$ = 0;
        } else {
          return null;
        }
      }
    }
  } else {
    if (cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1(this.accumulator) != null && $APP.cljs.core.empty_QMARK_(this.new_bindings)) {
      if ($G__53128_grouped_candidate_facts$jscomp$1_initial_value$jscomp$4_seq__50442_seq__50442__$1_tokens$$ = cljs$cst$3097$initial_value.cljs$core$IFn$_invoke$arity$1(this.accumulator), $convert_return_fn$jscomp$8_converted_result$jscomp$3_node$$ = $convert_return_fn$jscomp$8_converted_result$jscomp$3_node$$.cljs$core$IFn$_invoke$arity$1 ? $convert_return_fn$jscomp$8_converted_result$jscomp$3_node$$.cljs$core$IFn$_invoke$arity$1($G__53128_grouped_candidate_facts$jscomp$1_initial_value$jscomp$4_seq__50442_seq__50442__$1_tokens$$) : 
      $convert_return_fn$jscomp$8_converted_result$jscomp$3_node$$.call(null, $G__53128_grouped_candidate_facts$jscomp$1_initial_value$jscomp$4_seq__50442_seq__50442__$1_tokens$$), $convert_return_fn$jscomp$8_converted_result$jscomp$3_node$$ != null) {
        for ($G__53128_grouped_candidate_facts$jscomp$1_initial_value$jscomp$4_seq__50442_seq__50442__$1_tokens$$ = $APP.cljs.core.seq($G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$), $G__53041_G__53076_G__53129_chunk__50379_chunk__50443_seq__50367_53046_seq__50367_53074__$1_temp__5825__auto___53072__$1$$ = null, $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$ = 
        $G__53077_chunk__50372_53047_count__50380_count__50444_fact_bindings_53084$$ = 0;;) {
          if ($G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$ < $G__53077_chunk__50372_53047_count__50380_count__50444_fact_bindings_53084$$) {
            $G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$ = $G__53041_G__53076_G__53129_chunk__50379_chunk__50443_seq__50367_53046_seq__50367_53074__$1_temp__5825__auto___53072__$1$$.cljs$core$IIndexed$_nth$arity$2(null, $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$), clara.rules.engine.retract_accumulated(this, this.accum_condition, 
            this.accumulator, this.result_binding, $G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$, $convert_return_fn$jscomp$8_converted_result$jscomp$3_node$$, $G__53040_join_bindings$$, $transport$$, $memory$$, $listener$$), $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$ += 1;
          } else {
            if ($G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$ = $APP.cljs.core.seq($G__53128_grouped_candidate_facts$jscomp$1_initial_value$jscomp$4_seq__50442_seq__50442__$1_tokens$$)) {
              $G__53128_grouped_candidate_facts$jscomp$1_initial_value$jscomp$4_seq__50442_seq__50442__$1_tokens$$ = $G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$, $APP.cljs.core.chunked_seq_QMARK_($G__53128_grouped_candidate_facts$jscomp$1_initial_value$jscomp$4_seq__50442_seq__50442__$1_tokens$$) ? ($G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$ = $APP.cljs.core.chunk_first($G__53128_grouped_candidate_facts$jscomp$1_initial_value$jscomp$4_seq__50442_seq__50442__$1_tokens$$), 
              $G__53128_grouped_candidate_facts$jscomp$1_initial_value$jscomp$4_seq__50442_seq__50442__$1_tokens$$ = $APP.cljs.core.chunk_rest($G__53128_grouped_candidate_facts$jscomp$1_initial_value$jscomp$4_seq__50442_seq__50442__$1_tokens$$), $G__53041_G__53076_G__53129_chunk__50379_chunk__50443_seq__50367_53046_seq__50367_53074__$1_temp__5825__auto___53072__$1$$ = $G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$, $G__53077_chunk__50372_53047_count__50380_count__50444_fact_bindings_53084$$ = 
              $G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$ = $APP.cljs.core.count($G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$)) : ($G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$ = $APP.cljs.core.first($G__53128_grouped_candidate_facts$jscomp$1_initial_value$jscomp$4_seq__50442_seq__50442__$1_tokens$$), clara.rules.engine.retract_accumulated(this, this.accum_condition, this.accumulator, 
              this.result_binding, $G__53042_G__53130_c__5548__auto__$jscomp$47_temp__5825__auto__$jscomp$411_token$$, $convert_return_fn$jscomp$8_converted_result$jscomp$3_node$$, $G__53040_join_bindings$$, $transport$$, $memory$$, $listener$$), $G__53128_grouped_candidate_facts$jscomp$1_initial_value$jscomp$4_seq__50442_seq__50442__$1_tokens$$ = $APP.cljs.core.next($G__53128_grouped_candidate_facts$jscomp$1_initial_value$jscomp$4_seq__50442_seq__50442__$1_tokens$$), $G__53041_G__53076_G__53129_chunk__50379_chunk__50443_seq__50367_53046_seq__50367_53074__$1_temp__5825__auto___53072__$1$$ = 
              null, $G__53077_chunk__50372_53047_count__50380_count__50444_fact_bindings_53084$$ = 0), $G__53079_accum_result_53090_c__5548__auto___53075_candidate_facts_53085_count__50373_53048_filtered_facts_53087_i__50381_i__50445_retracted_converted_53091_vec__50439_53083$$ = 0;
            } else {
              return null;
            }
          }
        }
      } else {
        return null;
      }
    } else {
      return null;
    }
  }
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.clara$rules$engine$ILeftActivate$get_join_keys$arity$1 = function($node$$) {
  return this.binding_keys;
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.clara$rules$engine$ILeftActivate$description$arity$1 = function($node$$) {
  return ["AccumulateWithBetaPredicateNode -- ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(this.accumulator)].join("");
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 8, [$APP.cljs$cst$3116$children, null, cljs$cst$3152$accum_condition, null, cljs$cst$3155$new_bindings, null, cljs$cst$3146$join_filter_fn, null, $APP.cljs$cst$396$id, null, cljs$cst$3142$binding_keys, null, cljs$cst$3154$result_binding, null, cljs$cst$3153$accumulator, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, 
  this), this.__meta), $k__5334__auto__$$) : new clara.rules.engine.AccumulateWithJoinFilterNode(this.id, this.accum_condition, this.accumulator, this.join_filter_fn, this.result_binding, this.children, this.binding_keys, this.new_bindings, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k50129$$) {
  switch($k50129$$ instanceof $APP.cljs.core.Keyword ? $k50129$$.fqn : null) {
    case "id":
    case "accum-condition":
    case "accumulator":
    case "join-filter-fn":
    case "result-binding":
    case "children":
    case "binding-keys":
    case "new-bindings":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k50129$$);
  }
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__50447_this__5331__auto__$$, $k__5332__auto__$$, $G__50128$$) {
  $pred__50447_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__50447_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__50447_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$396$id, $k__5332__auto__$$) : $pred__50447_this__5331__auto__$$.call(null, $APP.cljs$cst$396$id, $k__5332__auto__$$)) ? new clara.rules.engine.AccumulateWithJoinFilterNode($G__50128$$, this.accum_condition, this.accumulator, this.join_filter_fn, this.result_binding, this.children, this.binding_keys, this.new_bindings, this.__meta, 
  this.__extmap, null) : $APP.cljs.core.truth_($pred__50447_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__50447_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3152$accum_condition, $k__5332__auto__$$) : $pred__50447_this__5331__auto__$$.call(null, cljs$cst$3152$accum_condition, $k__5332__auto__$$)) ? new clara.rules.engine.AccumulateWithJoinFilterNode(this.id, $G__50128$$, this.accumulator, this.join_filter_fn, this.result_binding, this.children, this.binding_keys, this.new_bindings, 
  this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__50447_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__50447_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3153$accumulator, $k__5332__auto__$$) : $pred__50447_this__5331__auto__$$.call(null, cljs$cst$3153$accumulator, $k__5332__auto__$$)) ? new clara.rules.engine.AccumulateWithJoinFilterNode(this.id, this.accum_condition, $G__50128$$, this.join_filter_fn, this.result_binding, this.children, this.binding_keys, 
  this.new_bindings, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__50447_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__50447_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3146$join_filter_fn, $k__5332__auto__$$) : $pred__50447_this__5331__auto__$$.call(null, cljs$cst$3146$join_filter_fn, $k__5332__auto__$$)) ? new clara.rules.engine.AccumulateWithJoinFilterNode(this.id, this.accum_condition, this.accumulator, $G__50128$$, this.result_binding, this.children, 
  this.binding_keys, this.new_bindings, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__50447_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__50447_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3154$result_binding, $k__5332__auto__$$) : $pred__50447_this__5331__auto__$$.call(null, cljs$cst$3154$result_binding, $k__5332__auto__$$)) ? new clara.rules.engine.AccumulateWithJoinFilterNode(this.id, this.accum_condition, this.accumulator, this.join_filter_fn, $G__50128$$, 
  this.children, this.binding_keys, this.new_bindings, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__50447_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__50447_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$3116$children, $k__5332__auto__$$) : $pred__50447_this__5331__auto__$$.call(null, $APP.cljs$cst$3116$children, $k__5332__auto__$$)) ? new clara.rules.engine.AccumulateWithJoinFilterNode(this.id, this.accum_condition, this.accumulator, this.join_filter_fn, 
  this.result_binding, $G__50128$$, this.binding_keys, this.new_bindings, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__50447_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__50447_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3142$binding_keys, $k__5332__auto__$$) : $pred__50447_this__5331__auto__$$.call(null, cljs$cst$3142$binding_keys, $k__5332__auto__$$)) ? new clara.rules.engine.AccumulateWithJoinFilterNode(this.id, this.accum_condition, this.accumulator, 
  this.join_filter_fn, this.result_binding, this.children, $G__50128$$, this.new_bindings, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__50447_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__50447_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3155$new_bindings, $k__5332__auto__$$) : $pred__50447_this__5331__auto__$$.call(null, cljs$cst$3155$new_bindings, $k__5332__auto__$$)) ? new clara.rules.engine.AccumulateWithJoinFilterNode(this.id, this.accum_condition, 
  this.accumulator, this.join_filter_fn, this.result_binding, this.children, this.binding_keys, $G__50128$$, this.__meta, this.__extmap, null) : new clara.rules.engine.AccumulateWithJoinFilterNode(this.id, this.accum_condition, this.accumulator, this.join_filter_fn, this.result_binding, this.children, this.binding_keys, this.new_bindings, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__50128$$), null);
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 8, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$396$id, this.id, null), new $APP.cljs.core.MapEntry(cljs$cst$3152$accum_condition, this.accum_condition, null), new $APP.cljs.core.MapEntry(cljs$cst$3153$accumulator, this.accumulator, null), new $APP.cljs.core.MapEntry(cljs$cst$3146$join_filter_fn, this.join_filter_fn, null), new $APP.cljs.core.MapEntry(cljs$cst$3154$result_binding, 
  this.result_binding, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$3116$children, this.children, null), new $APP.cljs.core.MapEntry(cljs$cst$3142$binding_keys, this.binding_keys, null), new $APP.cljs.core.MapEntry(cljs$cst$3155$new_bindings, this.new_bindings, null)], null), this.__extmap));
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__50128$$) {
  return new clara.rules.engine.AccumulateWithJoinFilterNode(this.id, this.accum_condition, this.accumulator, this.join_filter_fn, this.result_binding, this.children, this.binding_keys, this.new_bindings, $G__50128$$, this.__extmap, this.__hash);
};
clara.rules.engine.AccumulateWithJoinFilterNode.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
clara.rules.engine.AccumulateWithJoinFilterNode.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 8, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1850$id, cljs$cst$3158$accum_condition, cljs$cst$3159$accumulator, cljs$cst$3148$join_filter_fn, cljs$cst$3160$result_binding, $APP.cljs$cst$3091$children, cljs$cst$3145$binding_keys, cljs$cst$3161$new_bindings], null);
};
clara.rules.engine.AccumulateWithJoinFilterNode.cljs$lang$type = !0;
clara.rules.engine.AccumulateWithJoinFilterNode.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "clara.rules.engine/AccumulateWithJoinFilterNode", null, 1, null);
};
clara.rules.engine.AccumulateWithJoinFilterNode.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "clara.rules.engine/AccumulateWithJoinFilterNode");
};
clara.rules.engine.__GT_AccumulateWithJoinFilterNode = function($id$$, $accum_condition$$, $accumulator$$, $join_filter_fn$$, $result_binding$$, $children$$, $binding_keys$$, $new_bindings$$) {
  return new clara.rules.engine.AccumulateWithJoinFilterNode($id$$, $accum_condition$$, $accumulator$$, $join_filter_fn$$, $result_binding$$, $children$$, $binding_keys$$, $new_bindings$$, null, null, null);
};
clara.rules.engine.map__GT_AccumulateWithJoinFilterNode = function($G__50132$$) {
  var $G__50450$jscomp$inline_5476_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__50132$$, $APP.cljs$cst$396$id, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$3152$accum_condition, cljs$cst$3153$accumulator, cljs$cst$3146$join_filter_fn, cljs$cst$3154$result_binding, $APP.cljs$cst$3116$children, cljs$cst$3142$binding_keys, cljs$cst$3155$new_bindings], 0));
  $G__50450$jscomp$inline_5476_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__50132$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__50450$jscomp$inline_5476_extmap__5365__auto__$$) : $G__50450$jscomp$inline_5476_extmap__5365__auto__$$;
  return new clara.rules.engine.AccumulateWithJoinFilterNode($APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($G__50132$$), cljs$cst$3152$accum_condition.cljs$core$IFn$_invoke$arity$1($G__50132$$), cljs$cst$3153$accumulator.cljs$core$IFn$_invoke$arity$1($G__50132$$), cljs$cst$3146$join_filter_fn.cljs$core$IFn$_invoke$arity$1($G__50132$$), cljs$cst$3154$result_binding.cljs$core$IFn$_invoke$arity$1($G__50132$$), $APP.cljs$cst$3116$children.cljs$core$IFn$_invoke$arity$1($G__50132$$), cljs$cst$3142$binding_keys.cljs$core$IFn$_invoke$arity$1($G__50132$$), 
  cljs$cst$3155$new_bindings.cljs$core$IFn$_invoke$arity$1($G__50132$$), null, $APP.cljs.core.not_empty($G__50450$jscomp$inline_5476_extmap__5365__auto__$$), null);
};
clara.rules.engine.node_type__GT_abbreviated_type = new $APP.cljs.core.PersistentArrayMap(null, 7, "AlphaNode AN TestNode TN AccumulateNode AccN AccumulateWithJoinFilterNode AJFN ProductionNode PN NegationWithJoinFilterNode NJFN ExpressionJoinNode EJN".split(" "), null);
clara.rules.engine.variables_as_keywords = function($expression$$) {
  return $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentHashSet.EMPTY, $APP.cljs.core.doall.cljs$core$IFn$_invoke$arity$1(function() {
    return function $clara$rules$engine$variables_as_keywords_$_iter__50451$$($s__50452$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (var $s__50452__$1_s__50452__$2_temp__5825__auto__$$ = $s__50452$$;;) {
          if ($s__50452__$1_s__50452__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__50452__$1_s__50452__$2_temp__5825__auto__$$)) {
            if ($APP.cljs.core.chunked_seq_QMARK_($s__50452__$1_s__50452__$2_temp__5825__auto__$$)) {
              var $JSCompiler_inline_result$jscomp$1030_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__50452__$1_s__50452__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1030_c__5501__auto__$$), $b__50454_item$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
              a: {
                for (var $i__50453$$ = 0;;) {
                  if ($i__50453$$ < $size__5502__auto__$$) {
                    var $item$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1030_c__5501__auto__$$, $i__50453$$);
                    $item$$ instanceof $APP.cljs.core.Symbol && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2("?", $APP.cljs.core.first($APP.cljs.core.name($item$$))) && $APP.cljs.core.chunk_append($b__50454_item$$, $APP.cljs.core.keyword.cljs$core$IFn$_invoke$arity$1($item$$));
                    $i__50453$$ += 1;
                  } else {
                    $JSCompiler_inline_result$jscomp$1030_c__5501__auto__$$ = !0;
                    break a;
                  }
                }
                $JSCompiler_inline_result$jscomp$1030_c__5501__auto__$$ = void 0;
              }
              return $JSCompiler_inline_result$jscomp$1030_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__50454_item$$), $clara$rules$engine$variables_as_keywords_$_iter__50451$$($APP.cljs.core.chunk_rest($s__50452__$1_s__50452__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__50454_item$$), null);
            }
            $b__50454_item$$ = $APP.cljs.core.first($s__50452__$1_s__50452__$2_temp__5825__auto__$$);
            if ($b__50454_item$$ instanceof $APP.cljs.core.Symbol && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2("?", $APP.cljs.core.first($APP.cljs.core.name($b__50454_item$$)))) {
              return $APP.cljs.core.cons($APP.cljs.core.keyword.cljs$core$IFn$_invoke$arity$1($b__50454_item$$), $clara$rules$engine$variables_as_keywords_$_iter__50451$$($APP.cljs.core.rest($s__50452__$1_s__50452__$2_temp__5825__auto__$$)));
            }
            $s__50452__$1_s__50452__$2_temp__5825__auto__$$ = $APP.cljs.core.rest($s__50452__$1_s__50452__$2_temp__5825__auto__$$);
          } else {
            return null;
          }
        }
      }, null, null);
    }($APP.cljs.core.tree_seq($APP.cljs.core.coll_QMARK_, $APP.cljs.core.seq, $expression$$));
  }()));
};
clara.rules.engine.conj_rulebases = function($base1$$, $base2$$) {
  return $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($base1$$, $base2$$);
};
clara.rules.engine.fire_rules_STAR_ = function($G__53209_G__53249_G__53254__STAR_current_session_STAR__temp_val__50456_activation_53214_e_53241_rulebase$$, $_STAR_current_session_STAR__orig_val__50455_nodes$$, $transient_memory$$, $G__50474_53227_transport$$, $listener$$, $get_alphas_fn$$, $update_cache$$) {
  $_STAR_current_session_STAR__orig_val__50455_nodes$$ = clara.rules.engine._STAR_current_session_STAR_;
  $G__53209_G__53249_G__53254__STAR_current_session_STAR__temp_val__50456_activation_53214_e_53241_rulebase$$ = new $APP.cljs.core.PersistentArrayMap(null, 7, [cljs$cst$3082$rulebase, $G__53209_G__53249_G__53254__STAR_current_session_STAR__temp_val__50456_activation_53214_e_53241_rulebase$$, cljs$cst$3117$transient_memory, $transient_memory$$, cljs$cst$3118$transport, $G__50474_53227_transport$$, $APP.cljs$cst$3119$insertions, $APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1(0), cljs$cst$3120$get_alphas_fn, 
  $get_alphas_fn$$, cljs$cst$3122$pending_updates, $update_cache$$, cljs$cst$3121$listener, $listener$$], null);
  clara.rules.engine._STAR_current_session_STAR_ = $G__53209_G__53249_G__53254__STAR_current_session_STAR__temp_val__50456_activation_53214_e_53241_rulebase$$;
  try {
    for (var $next_group$$ = clara.rules.memory.next_activation_group($transient_memory$$), $last_group$$ = null;;) {
      if ($APP.cljs.core.truth_($next_group$$)) {
        if ($APP.cljs.core.truth_(function() {
          var $and__5023__auto__$$ = $last_group$$;
          return $APP.cljs.core.truth_($and__5023__auto__$$) ? $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($last_group$$, $next_group$$) : $and__5023__auto__$$;
        }())) {
          clara.rules.engine.flush_updates(clara.rules.engine._STAR_current_session_STAR_);
          var $upcoming_group$$ = clara.rules.memory.next_activation_group($transient_memory$$);
          clara.rules.listener.activation_group_transition_BANG_($listener$$, $next_group$$, $upcoming_group$$);
          $G__53209_G__53249_G__53254__STAR_current_session_STAR__temp_val__50456_activation_53214_e_53241_rulebase$$ = $next_group$$;
          $next_group$$ = $upcoming_group$$;
          $last_group$$ = $G__53209_G__53249_G__53254__STAR_current_session_STAR__temp_val__50456_activation_53214_e_53241_rulebase$$;
        } else {
          var $temp__5825__auto___53211$$ = clara.rules.memory.pop_activation_BANG_($transient_memory$$);
          if ($APP.cljs.core.truth_($temp__5825__auto___53211$$)) {
            var $map__50468_53213__$1$$ = $APP.cljs.core.__destructure_map($temp__5825__auto___53211$$);
            $G__53209_G__53249_G__53254__STAR_current_session_STAR__temp_val__50456_activation_53214_e_53241_rulebase$$ = $map__50468_53213__$1$$;
            var $node_53215$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__50468_53213__$1$$, $APP.cljs$cst$3067$node), $token_53216$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__50468_53213__$1$$, $APP.cljs$cst$3068$token), $batched_logical_insertions_53219$$ = $APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.PersistentVector.EMPTY), $batched_unconditional_insertions_53220$$ = $APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.PersistentVector.EMPTY), 
            $batched_rhs_retractions_53221$$ = $APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.PersistentVector.EMPTY), $_STAR_rule_context_STAR__orig_val__50469_53222$$ = clara.rules.engine._STAR_rule_context_STAR_, $_STAR_rule_context_STAR__temp_val__50470_53223$$ = new $APP.cljs.core.PersistentArrayMap(null, 5, [$APP.cljs$cst$3068$token, $token_53216$$, $APP.cljs$cst$3067$node, $node_53215$$, cljs$cst$3124$batched_logical_insertions, $batched_logical_insertions_53219$$, cljs$cst$3123$batched_unconditional_insertions, 
            $batched_unconditional_insertions_53220$$, cljs$cst$3125$batched_rhs_retractions, $batched_rhs_retractions_53221$$], null);
            clara.rules.engine._STAR_rule_context_STAR_ = $_STAR_rule_context_STAR__temp_val__50470_53223$$;
            try {
              try {
                $G__50474_53227_transport$$ = $token_53216$$;
                var $G__50475_53228$$ = $APP.cljs$cst$395$env.cljs$core$IFn$_invoke$arity$1(cljs$cst$3126$production.cljs$core$IFn$_invoke$arity$1($node_53215$$)), $fexpr__50473_53229$$ = cljs$cst$3127$rhs.cljs$core$IFn$_invoke$arity$1($node_53215$$);
                $fexpr__50473_53229$$.cljs$core$IFn$_invoke$arity$2 ? $fexpr__50473_53229$$.cljs$core$IFn$_invoke$arity$2($G__50474_53227_transport$$, $G__50475_53228$$) : $fexpr__50473_53229$$.call(null, $G__50474_53227_transport$$, $G__50475_53228$$);
                var $retrieved_unconditional_insertions_53230$$ = $APP.cljs.core.deref($batched_unconditional_insertions_53220$$), $retrieved_logical_insertions_53231$$ = $APP.cljs.core.deref($batched_logical_insertions_53219$$), $retrieved_rhs_retractions_53232$$ = $APP.cljs.core.deref($batched_rhs_retractions_53221$$);
                clara.rules.listener.fire_activation_BANG_($listener$$, $G__53209_G__53249_G__53254__STAR_current_session_STAR__temp_val__50456_activation_53214_e_53241_rulebase$$, new $APP.cljs.core.PersistentArrayMap(null, 3, [cljs$cst$3163$unconditional_insertions, $retrieved_unconditional_insertions_53230$$, cljs$cst$3164$logical_insertions, $retrieved_logical_insertions_53231$$, cljs$cst$3165$rhs_retractions, $retrieved_rhs_retractions_53232$$], null));
                var $temp__5825__auto___53235__$1$$ = $APP.cljs.core.seq($retrieved_unconditional_insertions_53230$$);
                $temp__5825__auto___53235__$1$$ && clara.rules.engine.flush_insertions_BANG_($temp__5825__auto___53235__$1$$, !0);
                var $temp__5825__auto___53237__$1$$ = $APP.cljs.core.seq($retrieved_logical_insertions_53231$$);
                $temp__5825__auto___53237__$1$$ && clara.rules.engine.flush_insertions_BANG_($temp__5825__auto___53237__$1$$, !1);
                var $temp__5825__auto___53239__$1$$ = $APP.cljs.core.seq($retrieved_rhs_retractions_53232$$);
                $temp__5825__auto___53239__$1$$ && clara.rules.engine.flush_rhs_retractions_BANG_($temp__5825__auto___53239__$1$$);
              } catch ($e50471$$) {
                $G__53209_G__53249_G__53254__STAR_current_session_STAR__temp_val__50456_activation_53214_e_53241_rulebase$$ = $e50471$$;
                var $production_53242$$ = cljs$cst$3126$production.cljs$core$IFn$_invoke$arity$1($node_53215$$), $rule_name_53243$$ = $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($production_53242$$), $rhs_53244$$ = cljs$cst$3127$rhs.cljs$core$IFn$_invoke$arity$1($production_53242$$);
                throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$3(["Exception in ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.truth_($rule_name_53243$$) ? $rule_name_53243$$ : $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$rhs_53244$$], 0))), " with bindings ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($token_53216$$)], 
                0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 7, [$APP.cljs$cst$394$bindings, $APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($token_53216$$), $APP.cljs$cst$272$name, $rule_name_53243$$, cljs$cst$3127$rhs, $rhs_53244$$, cljs$cst$3124$batched_logical_insertions, $APP.cljs.core.deref($batched_logical_insertions_53219$$), cljs$cst$3123$batched_unconditional_insertions, $APP.cljs.core.deref($batched_unconditional_insertions_53220$$), cljs$cst$3125$batched_rhs_retractions, 
                $APP.cljs.core.deref($batched_rhs_retractions_53221$$), $APP.cljs$cst$2040$listeners, function() {
                  try {
                    var $p_listener$$ = clara.rules.listener.to_persistent_BANG_($listener$$);
                    return clara.rules.listener.null_listener_QMARK_($p_listener$$) ? $APP.cljs.core.PersistentVector.EMPTY : clara.rules.listener.get_children($p_listener$$);
                  } catch ($e50472$$) {
                    return $e50472$$;
                  }
                }()], null), $G__53209_G__53249_G__53254__STAR_current_session_STAR__temp_val__50456_activation_53214_e_53241_rulebase$$);
              }
              $APP.cljs.core.truth_(function() {
                var $G__50476_G__50476__$1_G__50476__$2$$ = $node_53215$$;
                $G__50476_G__50476__$1_G__50476__$2$$ = $G__50476_G__50476__$1_G__50476__$2$$ == null ? null : cljs$cst$3126$production.cljs$core$IFn$_invoke$arity$1($G__50476_G__50476__$1_G__50476__$2$$);
                $G__50476_G__50476__$1_G__50476__$2$$ = $G__50476_G__50476__$1_G__50476__$2$$ == null ? null : cljs$cst$3128$props.cljs$core$IFn$_invoke$arity$1($G__50476_G__50476__$1_G__50476__$2$$);
                return $G__50476_G__50476__$1_G__50476__$2$$ == null ? null : cljs$cst$3129$no_loop.cljs$core$IFn$_invoke$arity$1($G__50476_G__50476__$1_G__50476__$2$$);
              }()) && clara.rules.engine.flush_updates(clara.rules.engine._STAR_current_session_STAR_);
            } finally {
              clara.rules.engine._STAR_rule_context_STAR_ = $_STAR_rule_context_STAR__orig_val__50469_53222$$;
            }
          }
          var $G__53248$$ = clara.rules.memory.next_activation_group($transient_memory$$);
          $G__53209_G__53249_G__53254__STAR_current_session_STAR__temp_val__50456_activation_53214_e_53241_rulebase$$ = $next_group$$;
          $next_group$$ = $G__53248$$;
          $last_group$$ = $G__53209_G__53249_G__53254__STAR_current_session_STAR__temp_val__50456_activation_53214_e_53241_rulebase$$;
        }
      } else {
        if ($APP.cljs.core.truth_(clara.rules.engine.flush_updates(clara.rules.engine._STAR_current_session_STAR_))) {
          $upcoming_group$$ = clara.rules.memory.next_activation_group($transient_memory$$), clara.rules.listener.activation_group_transition_BANG_($listener$$, $next_group$$, $upcoming_group$$), $G__53209_G__53249_G__53254__STAR_current_session_STAR__temp_val__50456_activation_53214_e_53241_rulebase$$ = $next_group$$, $next_group$$ = $upcoming_group$$, $last_group$$ = $G__53209_G__53249_G__53254__STAR_current_session_STAR__temp_val__50456_activation_53214_e_53241_rulebase$$;
        } else {
          return null;
        }
      }
    }
  } finally {
    clara.rules.engine._STAR_current_session_STAR_ = $_STAR_current_session_STAR__orig_val__50455_nodes$$;
  }
};
clara.rules.engine.LocalSession = function($rulebase$$, $memory$$, $transport$$, $listener$$, $get_alphas_fn$$, $pending_operations$$) {
  this.rulebase = $rulebase$$;
  this.memory = $memory$$;
  this.transport = $transport$$;
  this.listener = $listener$$;
  this.get_alphas_fn = $get_alphas_fn$$;
  this.pending_operations = $pending_operations$$;
};
clara.rules.engine.LocalSession.prototype.clara$rules$engine$ISession$ = $APP.cljs.core.PROTOCOL_SENTINEL;
clara.rules.engine.LocalSession.prototype.clara$rules$engine$ISession$insert$arity$2 = function($new_pending_operations_session$$, $facts$$) {
  $new_pending_operations_session$$ = $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2(this.pending_operations, clara.rules.update_cache.core.__GT_PendingUpdate(cljs$cst$3166$insertion, $APP.cljs.core.coll_QMARK_($facts$$) ? $facts$$ : $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentVector.EMPTY, $facts$$)));
  return new clara.rules.engine.LocalSession(this.rulebase, this.memory, this.transport, this.listener, this.get_alphas_fn, $new_pending_operations_session$$);
};
clara.rules.engine.LocalSession.prototype.clara$rules$engine$ISession$retract$arity$2 = function($new_pending_operations$jscomp$1_session$$, $facts$$) {
  $new_pending_operations$jscomp$1_session$$ = $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2(this.pending_operations, clara.rules.update_cache.core.__GT_PendingUpdate(cljs$cst$3167$retraction, $APP.cljs.core.coll_QMARK_($facts$$) ? $facts$$ : $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentVector.EMPTY, $facts$$)));
  return new clara.rules.engine.LocalSession(this.rulebase, this.memory, this.transport, this.listener, this.get_alphas_fn, $new_pending_operations$jscomp$1_session$$);
};
clara.rules.engine.LocalSession.prototype.clara$rules$engine$ISession$fire_rules$arity$1 = function($session$$) {
  return this.clara$rules$engine$ISession$fire_rules$arity$2(null, $APP.cljs.core.PersistentArrayMap.EMPTY);
};
clara.rules.engine.LocalSession.prototype.clara$rules$engine$ISession$fire_rules$arity$2 = function($session$$, $opts$$) {
  var $transient_memory$$ = clara.rules.memory.to_transient(this.memory), $transient_listener$$ = clara.rules.listener.to_transient(this.listener);
  if ($APP.cljs.core.not(cljs$cst$3168$cancelling.cljs$core$IFn$_invoke$arity$1($opts$$))) {
    for (var $seq__50481_53255$$ = $APP.cljs.core.seq(this.pending_operations), $chunk__50482_53256$$ = null, $count__50483_53257$$ = 0, $i__50484_53258$$ = 0;;) {
      if ($i__50484_53258$$ < $count__50483_53257$$) {
        var $map__50600_53262$$ = $chunk__50482_53256$$.cljs$core$IIndexed$_nth$arity$2(null, $i__50484_53258$$), $map__50600_53263__$1$$ = $APP.cljs.core.__destructure_map($map__50600_53262$$), $op_type_53264$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__50600_53263__$1$$, $APP.cljs$cst$139$type), $facts_53265$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__50600_53263__$1$$, cljs$cst$3092$facts), $G__50601_53266$$ = $op_type_53264$$, $G__50601_53267__$1$$ = $G__50601_53266$$ instanceof 
        $APP.cljs.core.Keyword ? $G__50601_53266$$.fqn : null;
        switch($G__50601_53267__$1$$) {
          case "insertion":
            clara.rules.listener.insert_facts_BANG_($transient_listener$$, null, null, $facts_53265$$);
            var $_STAR_pending_external_retractions_STAR__orig_val__50602_53269$$ = clara.rules.engine._STAR_pending_external_retractions_STAR_, $_STAR_pending_external_retractions_STAR__temp_val__50603_53270$$ = $APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.PersistentVector.EMPTY);
            clara.rules.engine._STAR_pending_external_retractions_STAR_ = $_STAR_pending_external_retractions_STAR__temp_val__50603_53270$$;
            try {
              for (var $seq__50604_53271$$ = $APP.cljs.core.seq(this.get_alphas_fn.cljs$core$IFn$_invoke$arity$1 ? this.get_alphas_fn.cljs$core$IFn$_invoke$arity$1($facts_53265$$) : this.get_alphas_fn.call(null, $facts_53265$$)), $chunk__50609_53272$$ = null, $count__50610_53274$$ = 0, $i__50611_53275$$ = 0;;) {
                if ($i__50611_53275$$ < $count__50610_53274$$) {
                  for (var $vec__50626_53280$$ = $chunk__50609_53272$$.cljs$core$IIndexed$_nth$arity$2(null, $i__50611_53275$$), $alpha_roots_53281$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__50626_53280$$, 0, null), $fact_group_53282$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__50626_53280$$, 1, null), $seq__50612_53283$$ = $APP.cljs.core.seq($alpha_roots_53281$$), $chunk__50613_53284$$ = null, $count__50614_53285$$ = 0, $i__50615_53286$$ = 0;;) {
                    if ($i__50615_53286$$ < $count__50614_53285$$) {
                      var $root_53287$$ = $chunk__50613_53284$$.cljs$core$IIndexed$_nth$arity$2(null, $i__50615_53286$$);
                      clara.rules.engine.alpha_activate($root_53287$$, $fact_group_53282$$, $transient_memory$$, this.transport, $transient_listener$$);
                      $i__50615_53286$$ += 1;
                    } else {
                      var $temp__5825__auto___53292$$ = $APP.cljs.core.seq($seq__50612_53283$$);
                      if ($temp__5825__auto___53292$$) {
                        var $seq__50612_53293__$1$$ = $temp__5825__auto___53292$$;
                        if ($APP.cljs.core.chunked_seq_QMARK_($seq__50612_53293__$1$$)) {
                          var $c__5548__auto___53294$$ = $APP.cljs.core.chunk_first($seq__50612_53293__$1$$), $G__53295$$ = $APP.cljs.core.chunk_rest($seq__50612_53293__$1$$), $G__53296$$ = $c__5548__auto___53294$$, $G__53297$$ = $APP.cljs.core.count($c__5548__auto___53294$$);
                          $seq__50612_53283$$ = $G__53295$$;
                          $chunk__50613_53284$$ = $G__53296$$;
                          $count__50614_53285$$ = $G__53297$$;
                        } else {
                          var $root_53299$$ = $APP.cljs.core.first($seq__50612_53293__$1$$);
                          clara.rules.engine.alpha_activate($root_53299$$, $fact_group_53282$$, $transient_memory$$, this.transport, $transient_listener$$);
                          $seq__50612_53283$$ = $APP.cljs.core.next($seq__50612_53293__$1$$);
                          $chunk__50613_53284$$ = null;
                          $count__50614_53285$$ = 0;
                        }
                        $i__50615_53286$$ = 0;
                      } else {
                        break;
                      }
                    }
                  }
                  $i__50611_53275$$ += 1;
                } else {
                  var $temp__5825__auto___53322$$ = $APP.cljs.core.seq($seq__50604_53271$$);
                  if ($temp__5825__auto___53322$$) {
                    var $seq__50604_53324__$1$$ = $temp__5825__auto___53322$$;
                    if ($APP.cljs.core.chunked_seq_QMARK_($seq__50604_53324__$1$$)) {
                      var $c__5548__auto___53329$$ = $APP.cljs.core.chunk_first($seq__50604_53324__$1$$), $G__53330$$ = $APP.cljs.core.chunk_rest($seq__50604_53324__$1$$), $G__53331$$ = $c__5548__auto___53329$$, $G__53332$$ = $APP.cljs.core.count($c__5548__auto___53329$$);
                      $seq__50604_53271$$ = $G__53330$$;
                      $chunk__50609_53272$$ = $G__53331$$;
                      $count__50610_53274$$ = $G__53332$$;
                    } else {
                      for (var $vec__50629_53335$$ = $APP.cljs.core.first($seq__50604_53324__$1$$), $alpha_roots_53336$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__50629_53335$$, 0, null), $fact_group_53337$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__50629_53335$$, 1, null), $seq__50605_53339$$ = $APP.cljs.core.seq($alpha_roots_53336$$), $chunk__50606_53340$$ = null, $count__50607_53341$$ = 0, $i__50608_53342$$ = 0;;) {
                        if ($i__50608_53342$$ < $count__50607_53341$$) {
                          var $root_53347$$ = $chunk__50606_53340$$.cljs$core$IIndexed$_nth$arity$2(null, $i__50608_53342$$);
                          clara.rules.engine.alpha_activate($root_53347$$, $fact_group_53337$$, $transient_memory$$, this.transport, $transient_listener$$);
                          $i__50608_53342$$ += 1;
                        } else {
                          var $temp__5825__auto___53353__$1$$ = $APP.cljs.core.seq($seq__50605_53339$$);
                          if ($temp__5825__auto___53353__$1$$) {
                            var $seq__50605_53354__$1$$ = $temp__5825__auto___53353__$1$$;
                            if ($APP.cljs.core.chunked_seq_QMARK_($seq__50605_53354__$1$$)) {
                              var $c__5548__auto___53356$$ = $APP.cljs.core.chunk_first($seq__50605_53354__$1$$), $G__53359$$ = $APP.cljs.core.chunk_rest($seq__50605_53354__$1$$), $G__53360$$ = $c__5548__auto___53356$$, $G__53361$$ = $APP.cljs.core.count($c__5548__auto___53356$$);
                              $seq__50605_53339$$ = $G__53359$$;
                              $chunk__50606_53340$$ = $G__53360$$;
                              $count__50607_53341$$ = $G__53361$$;
                            } else {
                              var $root_53363$$ = $APP.cljs.core.first($seq__50605_53354__$1$$);
                              clara.rules.engine.alpha_activate($root_53363$$, $fact_group_53337$$, $transient_memory$$, this.transport, $transient_listener$$);
                              $seq__50605_53339$$ = $APP.cljs.core.next($seq__50605_53354__$1$$);
                              $chunk__50606_53340$$ = null;
                              $count__50607_53341$$ = 0;
                            }
                            $i__50608_53342$$ = 0;
                          } else {
                            break;
                          }
                        }
                      }
                      $seq__50604_53271$$ = $APP.cljs.core.next($seq__50604_53324__$1$$);
                      $chunk__50609_53272$$ = null;
                      $count__50610_53274$$ = 0;
                    }
                    $i__50611_53275$$ = 0;
                  } else {
                    break;
                  }
                }
              }
              clara.rules.engine.external_retract_loop(this.get_alphas_fn, $transient_memory$$, this.transport, $transient_listener$$);
            } finally {
              clara.rules.engine._STAR_pending_external_retractions_STAR_ = $_STAR_pending_external_retractions_STAR__orig_val__50602_53269$$;
            }
            break;
          case "retraction":
            clara.rules.listener.retract_facts_BANG_($transient_listener$$, null, null, $facts_53265$$);
            var $_STAR_pending_external_retractions_STAR__orig_val__50632_53379$$ = clara.rules.engine._STAR_pending_external_retractions_STAR_, $_STAR_pending_external_retractions_STAR__temp_val__50633_53380$$ = $APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1($facts_53265$$);
            clara.rules.engine._STAR_pending_external_retractions_STAR_ = $_STAR_pending_external_retractions_STAR__temp_val__50633_53380$$;
            try {
              clara.rules.engine.external_retract_loop(this.get_alphas_fn, $transient_memory$$, this.transport, $transient_listener$$);
            } finally {
              clara.rules.engine._STAR_pending_external_retractions_STAR_ = $_STAR_pending_external_retractions_STAR__orig_val__50632_53379$$;
            }
            break;
          default:
            throw Error(["No matching clause: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($G__50601_53267__$1$$)].join(""));
        }
        $i__50484_53258$$ += 1;
      } else {
        var $temp__5825__auto___53391$$ = $APP.cljs.core.seq($seq__50481_53255$$);
        if ($temp__5825__auto___53391$$) {
          var $seq__50481_53393__$1$$ = $temp__5825__auto___53391$$;
          if ($APP.cljs.core.chunked_seq_QMARK_($seq__50481_53393__$1$$)) {
            var $c__5548__auto___53394$$ = $APP.cljs.core.chunk_first($seq__50481_53393__$1$$), $G__53395$$ = $APP.cljs.core.chunk_rest($seq__50481_53393__$1$$), $G__53396$$ = $c__5548__auto___53394$$, $G__53397$$ = $APP.cljs.core.count($c__5548__auto___53394$$);
            $seq__50481_53255$$ = $G__53395$$;
            $chunk__50482_53256$$ = $G__53396$$;
            $count__50483_53257$$ = $G__53397$$;
          } else {
            var $map__50634_53404$$ = $APP.cljs.core.first($seq__50481_53393__$1$$), $map__50634_53405__$1$$ = $APP.cljs.core.__destructure_map($map__50634_53404$$), $op_type_53406$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__50634_53405__$1$$, $APP.cljs$cst$139$type), $facts_53407$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__50634_53405__$1$$, cljs$cst$3092$facts), $G__50635_53410$$ = $op_type_53406$$, $G__50635_53411__$1$$ = $G__50635_53410$$ instanceof $APP.cljs.core.Keyword ? 
            $G__50635_53410$$.fqn : null;
            switch($G__50635_53411__$1$$) {
              case "insertion":
                clara.rules.listener.insert_facts_BANG_($transient_listener$$, null, null, $facts_53407$$);
                var $_STAR_pending_external_retractions_STAR__orig_val__50636_53413$$ = clara.rules.engine._STAR_pending_external_retractions_STAR_, $_STAR_pending_external_retractions_STAR__temp_val__50637_53414$$ = $APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.PersistentVector.EMPTY);
                clara.rules.engine._STAR_pending_external_retractions_STAR_ = $_STAR_pending_external_retractions_STAR__temp_val__50637_53414$$;
                try {
                  for (var $seq__50638_53420$$ = $APP.cljs.core.seq(this.get_alphas_fn.cljs$core$IFn$_invoke$arity$1 ? this.get_alphas_fn.cljs$core$IFn$_invoke$arity$1($facts_53407$$) : this.get_alphas_fn.call(null, $facts_53407$$)), $chunk__50643_53421$$ = null, $count__50644_53422$$ = 0, $i__50645_53423$$ = 0;;) {
                    if ($i__50645_53423$$ < $count__50644_53422$$) {
                      for (var $vec__50656_53426$$ = $chunk__50643_53421$$.cljs$core$IIndexed$_nth$arity$2(null, $i__50645_53423$$), $alpha_roots_53427$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__50656_53426$$, 0, null), $fact_group_53428$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__50656_53426$$, 1, null), $seq__50646_53433$$ = $APP.cljs.core.seq($alpha_roots_53427$$), $chunk__50647_53434$$ = null, $count__50648_53435$$ = 0, $i__50649_53436$$ = 0;;) {
                        if ($i__50649_53436$$ < $count__50648_53435$$) {
                          var $root_53437$$ = $chunk__50647_53434$$.cljs$core$IIndexed$_nth$arity$2(null, $i__50649_53436$$);
                          clara.rules.engine.alpha_activate($root_53437$$, $fact_group_53428$$, $transient_memory$$, this.transport, $transient_listener$$);
                          $i__50649_53436$$ += 1;
                        } else {
                          var $temp__5825__auto___53444__$1$$ = $APP.cljs.core.seq($seq__50646_53433$$);
                          if ($temp__5825__auto___53444__$1$$) {
                            var $seq__50646_53447__$1$$ = $temp__5825__auto___53444__$1$$;
                            if ($APP.cljs.core.chunked_seq_QMARK_($seq__50646_53447__$1$$)) {
                              var $c__5548__auto___53448$$ = $APP.cljs.core.chunk_first($seq__50646_53447__$1$$), $G__53450$$ = $APP.cljs.core.chunk_rest($seq__50646_53447__$1$$), $G__53451$$ = $c__5548__auto___53448$$, $G__53452$$ = $APP.cljs.core.count($c__5548__auto___53448$$);
                              $seq__50646_53433$$ = $G__53450$$;
                              $chunk__50647_53434$$ = $G__53451$$;
                              $count__50648_53435$$ = $G__53452$$;
                            } else {
                              var $root_53455$$ = $APP.cljs.core.first($seq__50646_53447__$1$$);
                              clara.rules.engine.alpha_activate($root_53455$$, $fact_group_53428$$, $transient_memory$$, this.transport, $transient_listener$$);
                              $seq__50646_53433$$ = $APP.cljs.core.next($seq__50646_53447__$1$$);
                              $chunk__50647_53434$$ = null;
                              $count__50648_53435$$ = 0;
                            }
                            $i__50649_53436$$ = 0;
                          } else {
                            break;
                          }
                        }
                      }
                      $i__50645_53423$$ += 1;
                    } else {
                      var $temp__5825__auto___53480__$1$$ = $APP.cljs.core.seq($seq__50638_53420$$);
                      if ($temp__5825__auto___53480__$1$$) {
                        var $seq__50638_53483__$1$$ = $temp__5825__auto___53480__$1$$;
                        if ($APP.cljs.core.chunked_seq_QMARK_($seq__50638_53483__$1$$)) {
                          var $c__5548__auto___53484$$ = $APP.cljs.core.chunk_first($seq__50638_53483__$1$$), $G__53486$$ = $APP.cljs.core.chunk_rest($seq__50638_53483__$1$$), $G__53487$$ = $c__5548__auto___53484$$, $G__53488$$ = $APP.cljs.core.count($c__5548__auto___53484$$);
                          $seq__50638_53420$$ = $G__53486$$;
                          $chunk__50643_53421$$ = $G__53487$$;
                          $count__50644_53422$$ = $G__53488$$;
                        } else {
                          for (var $vec__50659_53491$$ = $APP.cljs.core.first($seq__50638_53483__$1$$), $alpha_roots_53492$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__50659_53491$$, 0, null), $fact_group_53493$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__50659_53491$$, 1, null), $seq__50639_53495$$ = $APP.cljs.core.seq($alpha_roots_53492$$), $chunk__50640_53496$$ = null, $count__50641_53497$$ = 0, $i__50642_53498$$ = 0;;) {
                            if ($i__50642_53498$$ < $count__50641_53497$$) {
                              var $root_53501$$ = $chunk__50640_53496$$.cljs$core$IIndexed$_nth$arity$2(null, $i__50642_53498$$);
                              clara.rules.engine.alpha_activate($root_53501$$, $fact_group_53493$$, $transient_memory$$, this.transport, $transient_listener$$);
                              $i__50642_53498$$ += 1;
                            } else {
                              var $temp__5825__auto___53508__$2$$ = $APP.cljs.core.seq($seq__50639_53495$$);
                              if ($temp__5825__auto___53508__$2$$) {
                                var $seq__50639_53509__$1$$ = $temp__5825__auto___53508__$2$$;
                                if ($APP.cljs.core.chunked_seq_QMARK_($seq__50639_53509__$1$$)) {
                                  var $c__5548__auto___53511$$ = $APP.cljs.core.chunk_first($seq__50639_53509__$1$$), $G__53513$$ = $APP.cljs.core.chunk_rest($seq__50639_53509__$1$$), $G__53514$$ = $c__5548__auto___53511$$, $G__53515$$ = $APP.cljs.core.count($c__5548__auto___53511$$);
                                  $seq__50639_53495$$ = $G__53513$$;
                                  $chunk__50640_53496$$ = $G__53514$$;
                                  $count__50641_53497$$ = $G__53515$$;
                                } else {
                                  var $root_53518$$ = $APP.cljs.core.first($seq__50639_53509__$1$$);
                                  clara.rules.engine.alpha_activate($root_53518$$, $fact_group_53493$$, $transient_memory$$, this.transport, $transient_listener$$);
                                  $seq__50639_53495$$ = $APP.cljs.core.next($seq__50639_53509__$1$$);
                                  $chunk__50640_53496$$ = null;
                                  $count__50641_53497$$ = 0;
                                }
                                $i__50642_53498$$ = 0;
                              } else {
                                break;
                              }
                            }
                          }
                          $seq__50638_53420$$ = $APP.cljs.core.next($seq__50638_53483__$1$$);
                          $chunk__50643_53421$$ = null;
                          $count__50644_53422$$ = 0;
                        }
                        $i__50645_53423$$ = 0;
                      } else {
                        break;
                      }
                    }
                  }
                  clara.rules.engine.external_retract_loop(this.get_alphas_fn, $transient_memory$$, this.transport, $transient_listener$$);
                } finally {
                  clara.rules.engine._STAR_pending_external_retractions_STAR_ = $_STAR_pending_external_retractions_STAR__orig_val__50636_53413$$;
                }
                break;
              case "retraction":
                clara.rules.listener.retract_facts_BANG_($transient_listener$$, null, null, $facts_53407$$);
                var $_STAR_pending_external_retractions_STAR__orig_val__50662_53531$$ = clara.rules.engine._STAR_pending_external_retractions_STAR_, $_STAR_pending_external_retractions_STAR__temp_val__50663_53532$$ = $APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1($facts_53407$$);
                clara.rules.engine._STAR_pending_external_retractions_STAR_ = $_STAR_pending_external_retractions_STAR__temp_val__50663_53532$$;
                try {
                  clara.rules.engine.external_retract_loop(this.get_alphas_fn, $transient_memory$$, this.transport, $transient_listener$$);
                } finally {
                  clara.rules.engine._STAR_pending_external_retractions_STAR_ = $_STAR_pending_external_retractions_STAR__orig_val__50662_53531$$;
                }
                break;
              default:
                throw Error(["No matching clause: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($G__50635_53411__$1$$)].join(""));
            }
            $seq__50481_53255$$ = $APP.cljs.core.next($seq__50481_53393__$1$$);
            $chunk__50482_53256$$ = null;
            $count__50483_53257$$ = 0;
          }
          $i__50484_53258$$ = 0;
        } else {
          break;
        }
      }
    }
    clara.rules.engine.fire_rules_STAR_(this.rulebase, cljs$cst$3169$production_nodes.cljs$core$IFn$_invoke$arity$1(this.rulebase), $transient_memory$$, this.transport, $transient_listener$$, this.get_alphas_fn, clara.rules.update_cache.core.get_ordered_update_cache());
  } else {
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("The :cancelling option is not supported in ClojureScript", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$3170$session, this, $APP.cljs$cst$589$opts, $opts$$], null));
  }
  return new clara.rules.engine.LocalSession(this.rulebase, clara.rules.memory.to_persistent_BANG_($transient_memory$$), this.transport, clara.rules.listener.to_persistent_BANG_($transient_listener$$), this.get_alphas_fn, $APP.cljs.core.PersistentVector.EMPTY);
};
clara.rules.engine.LocalSession.prototype.clara$rules$engine$ISession$query$arity$3 = function($query_node_session$$, $query$$, $params$$) {
  $query_node_session$$ = $APP.cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(this.rulebase, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3171$query_nodes, $query$$], null));
  $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(null, $query_node_session$$) && clara.rules.platform.throw_error(["The query ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($query$$), " is invalid or not included in the rule base."].join(""));
  $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentHashSet.EMPTY, $APP.cljs.core.keys($params$$)), cljs$cst$3133$param_keys.cljs$core$IFn$_invoke$arity$1($query_node_session$$)) || clara.rules.platform.throw_error(["The query ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($query$$), " was not provided with the correct parameters, expected: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(cljs$cst$3133$param_keys.cljs$core$IFn$_invoke$arity$1($query_node_session$$)), 
  ", provided: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.set($APP.cljs.core.keys($params$$)))].join(""));
  return $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(function($bindings$$) {
    $bindings$$ = $APP.cljs.core.__destructure_map($bindings$$);
    $bindings$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($bindings$$, $APP.cljs$cst$394$bindings);
    return $APP.cljs.core.truth_($APP.cljs.core.some(function($p1__50477_SHARP_$$) {
      return $APP.cljs.core.re_find(/__gen/, $APP.cljs.core.name($p1__50477_SHARP_$$));
    }, $APP.cljs.core.keys($bindings$$))) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $APP.cljs.core.remove.cljs$core$IFn$_invoke$arity$2(function($p__50666$$) {
      var $k$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__50666$$, 0, null);
      $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__50666$$, 1, null);
      return $APP.cljs.core.re_find(/__gen/, $APP.cljs.core.name($k$$));
    }, $bindings$$)) : $bindings$$;
  }, clara.rules.memory.get_tokens(this.memory, $query_node_session$$, $params$$));
};
clara.rules.engine.LocalSession.prototype.clara$rules$engine$ISession$components$arity$1 = function($session$$) {
  return new $APP.cljs.core.PersistentArrayMap(null, 5, [cljs$cst$3082$rulebase, this.rulebase, $APP.cljs$cst$2115$memory, this.memory, cljs$cst$3118$transport, this.transport, $APP.cljs$cst$2040$listeners, clara.rules.listener.flatten_listener(this.listener), cljs$cst$3120$get_alphas_fn, this.get_alphas_fn], null);
};
clara.rules.engine.LocalSession.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 6, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3073$rulebase, cljs$cst$3172$memory, cljs$cst$3173$transport, cljs$cst$3174$listener, cljs$cst$3175$get_alphas_fn, cljs$cst$3176$pending_operations], null);
};
clara.rules.engine.LocalSession.cljs$lang$type = !0;
clara.rules.engine.LocalSession.cljs$lang$ctorStr = "clara.rules.engine/LocalSession";
clara.rules.engine.LocalSession.cljs$lang$ctorPrWriter = function($this__5310__auto__$$, $writer__5311__auto__$$, $opt__5312__auto__$$) {
  return $APP.cljs.core._write($writer__5311__auto__$$, "clara.rules.engine/LocalSession");
};
clara.rules.engine.__GT_LocalSession = function($rulebase$$, $memory$$, $transport$$, $listener$$, $get_alphas_fn$$, $pending_operations$$) {
  return new clara.rules.engine.LocalSession($rulebase$$, $memory$$, $transport$$, $listener$$, $get_alphas_fn$$, $pending_operations$$);
};
clara.rules.engine.assemble = function($p__50670_rulebase$$) {
  var $get_alphas_fn$$ = $APP.cljs.core.__destructure_map($p__50670_rulebase$$);
  $p__50670_rulebase$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($get_alphas_fn$$, cljs$cst$3082$rulebase);
  var $memory$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($get_alphas_fn$$, $APP.cljs$cst$2115$memory), $transport$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($get_alphas_fn$$, cljs$cst$3118$transport), $listeners$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($get_alphas_fn$$, $APP.cljs$cst$2040$listeners);
  $get_alphas_fn$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($get_alphas_fn$$, cljs$cst$3120$get_alphas_fn);
  return new clara.rules.engine.LocalSession($p__50670_rulebase$$, $memory$$, $transport$$, $APP.cljs.core.count($listeners$$) > 0 ? clara.rules.listener.delegating_listener($listeners$$) : clara.rules.listener.default_listener, $get_alphas_fn$$, $APP.cljs.core.PersistentVector.EMPTY);
};
clara.rules.engine.with_listener = function($map__50672_map__50672__$1_session$$, $listener$$) {
  $map__50672_map__50672__$1_session$$ = clara.rules.engine.components($map__50672_map__50672__$1_session$$);
  $map__50672_map__50672__$1_session$$ = $APP.cljs.core.__destructure_map($map__50672_map__50672__$1_session$$);
  var $listeners$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__50672_map__50672__$1_session$$, $APP.cljs$cst$2040$listeners);
  return clara.rules.engine.assemble($APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($map__50672_map__50672__$1_session$$, $APP.cljs$cst$2040$listeners, $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($listeners$$, $listener$$)));
};
clara.rules.engine.remove_listeners = function($session$$, $pred$$) {
  var $map__50673_map__50673__$1$$ = clara.rules.engine.components($session$$);
  $map__50673_map__50673__$1$$ = $APP.cljs.core.__destructure_map($map__50673_map__50673__$1$$);
  var $listeners$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__50673_map__50673__$1$$, $APP.cljs$cst$2040$listeners);
  return $APP.cljs.core.truth_($APP.cljs.core.some($pred$$, $listeners$$)) ? clara.rules.engine.assemble($APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($map__50673_map__50673__$1$$, $APP.cljs$cst$2040$listeners, $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.PersistentVector.EMPTY, $APP.cljs.core.remove.cljs$core$IFn$_invoke$arity$1($pred$$), $listeners$$))) : $session$$;
};
clara.rules.engine.find_listeners = function($listeners$jscomp$9_map__50674_map__50674__$1_session$$, $pred$$) {
  $listeners$jscomp$9_map__50674_map__50674__$1_session$$ = clara.rules.engine.components($listeners$jscomp$9_map__50674_map__50674__$1_session$$);
  $listeners$jscomp$9_map__50674_map__50674__$1_session$$ = $APP.cljs.core.__destructure_map($listeners$jscomp$9_map__50674_map__50674__$1_session$$);
  $listeners$jscomp$9_map__50674_map__50674__$1_session$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($listeners$jscomp$9_map__50674_map__50674__$1_session$$, $APP.cljs$cst$2040$listeners);
  return $APP.cljs.core.filterv($pred$$, $listeners$jscomp$9_map__50674_map__50674__$1_session$$);
};
clara.rules.engine.local_memory = function($beta_node_53606_c__5548__auto___53599_rulebase$$, $transport$$, $activation_group_sort_fn$jscomp$5_memory$$, $G__53602_activation_group_fn$$, $G__53603_alphas_fn$$) {
  $activation_group_sort_fn$jscomp$5_memory$$ = clara.rules.memory.local_memory($beta_node_53606_c__5548__auto___53599_rulebase$$, $activation_group_sort_fn$jscomp$5_memory$$, $G__53602_activation_group_fn$$, $G__53603_alphas_fn$$).clara$rules$memory$IPersistentMemory$to_transient$arity$1(null);
  $beta_node_53606_c__5548__auto___53599_rulebase$$ = $APP.cljs.core.seq(cljs$cst$3177$beta_roots.cljs$core$IFn$_invoke$arity$1($beta_node_53606_c__5548__auto___53599_rulebase$$));
  $G__53602_activation_group_fn$$ = null;
  for (var $G__53601_i__50678_53572$$ = $G__53603_alphas_fn$$ = 0;;) {
    if ($G__53601_i__50678_53572$$ < $G__53603_alphas_fn$$) {
      var $beta_node_53576$$ = $G__53602_activation_group_fn$$.cljs$core$IIndexed$_nth$arity$2(null, $G__53601_i__50678_53572$$);
      clara.rules.engine.left_activate($beta_node_53576$$, $APP.cljs.core.PersistentArrayMap.EMPTY, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [clara.rules.engine.empty_token], null), $activation_group_sort_fn$jscomp$5_memory$$, $transport$$, clara.rules.listener.default_listener);
      $G__53601_i__50678_53572$$ += 1;
    } else {
      if ($beta_node_53606_c__5548__auto___53599_rulebase$$ = $APP.cljs.core.seq($beta_node_53606_c__5548__auto___53599_rulebase$$)) {
        $G__53602_activation_group_fn$$ = $beta_node_53606_c__5548__auto___53599_rulebase$$, $APP.cljs.core.chunked_seq_QMARK_($G__53602_activation_group_fn$$) ? ($beta_node_53606_c__5548__auto___53599_rulebase$$ = $APP.cljs.core.chunk_first($G__53602_activation_group_fn$$), $G__53601_i__50678_53572$$ = $APP.cljs.core.chunk_rest($G__53602_activation_group_fn$$), $G__53602_activation_group_fn$$ = $beta_node_53606_c__5548__auto___53599_rulebase$$, $G__53603_alphas_fn$$ = $APP.cljs.core.count($beta_node_53606_c__5548__auto___53599_rulebase$$), 
        $beta_node_53606_c__5548__auto___53599_rulebase$$ = $G__53601_i__50678_53572$$) : ($beta_node_53606_c__5548__auto___53599_rulebase$$ = $APP.cljs.core.first($G__53602_activation_group_fn$$), clara.rules.engine.left_activate($beta_node_53606_c__5548__auto___53599_rulebase$$, $APP.cljs.core.PersistentArrayMap.EMPTY, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [clara.rules.engine.empty_token], null), $activation_group_sort_fn$jscomp$5_memory$$, 
        $transport$$, clara.rules.listener.default_listener), $beta_node_53606_c__5548__auto___53599_rulebase$$ = $APP.cljs.core.next($G__53602_activation_group_fn$$), $G__53602_activation_group_fn$$ = null, $G__53603_alphas_fn$$ = 0), $G__53601_i__50678_53572$$ = 0;
      } else {
        break;
      }
    }
  }
  return clara.rules.memory.to_persistent_BANG_($activation_group_sort_fn$jscomp$5_memory$$);
};
clara.rules.engine.options__GT_activation_group_sort_fn = function($options$$) {
  var $user_activation_group_sort_fn$$ = function() {
    var $or__5025__auto__$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($options$$, cljs$cst$3083$activation_group_sort_fn);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs.core._GT_;
  }();
  return function($salience1$$, $salience2$$) {
    var $forward_bool_forward_result$$ = function() {
      var $G__50679$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2($salience1$$, 0), $G__50680$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2($salience2$$, 0);
      return $user_activation_group_sort_fn$$.cljs$core$IFn$_invoke$arity$2 ? $user_activation_group_sort_fn$$.cljs$core$IFn$_invoke$arity$2($G__50679$$, $G__50680$$) : $user_activation_group_sort_fn$$.call(null, $G__50679$$, $G__50680$$);
    }();
    if (typeof $forward_bool_forward_result$$ === "number") {
      return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(0, $forward_bool_forward_result$$) ? $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2($salience1$$, 1) > $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2($salience2$$, 1) : $forward_bool_forward_result$$;
    }
    var $backward_bool_backward_result$$ = function() {
      var $G__50681$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2($salience2$$, 0), $G__50682$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2($salience1$$, 0);
      return $user_activation_group_sort_fn$$.cljs$core$IFn$_invoke$arity$2 ? $user_activation_group_sort_fn$$.cljs$core$IFn$_invoke$arity$2($G__50681$$, $G__50682$$) : $user_activation_group_sort_fn$$.call(null, $G__50681$$, $G__50682$$);
    }();
    $forward_bool_forward_result$$ = $APP.cljs.core.boolean$($forward_bool_forward_result$$);
    $backward_bool_backward_result$$ = $APP.cljs.core.boolean$($backward_bool_backward_result$$);
    return $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($forward_bool_forward_result$$, $backward_bool_backward_result$$) ? $forward_bool_forward_result$$ : $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2($salience1$$, 1) > $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2($salience2$$, 1);
  };
};
clara.rules.engine.internal_salience_levels = new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$205$default, 0, cljs$cst$3178$extracted_negation, 1], null);
clara.rules.engine.options__GT_activation_group_fn = function($options$$) {
  var $rule_salience_fn$$ = function() {
    var $or__5025__auto__$$ = cljs$cst$3084$activation_group_fn.cljs$core$IFn$_invoke$arity$1($options$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : function($G__50683__$1$jscomp$inline_5484_or__5025__auto____$1$jscomp$70_production$$) {
      $G__50683__$1$jscomp$inline_5484_or__5025__auto____$1$jscomp$70_production$$ = $G__50683__$1$jscomp$inline_5484_or__5025__auto____$1$jscomp$70_production$$ == null ? null : cljs$cst$3128$props.cljs$core$IFn$_invoke$arity$1($G__50683__$1$jscomp$inline_5484_or__5025__auto____$1$jscomp$70_production$$);
      $G__50683__$1$jscomp$inline_5484_or__5025__auto____$1$jscomp$70_production$$ = $G__50683__$1$jscomp$inline_5484_or__5025__auto____$1$jscomp$70_production$$ == null ? null : cljs$cst$3179$salience.cljs$core$IFn$_invoke$arity$1($G__50683__$1$jscomp$inline_5484_or__5025__auto____$1$jscomp$70_production$$);
      return $APP.cljs.core.truth_($G__50683__$1$jscomp$inline_5484_or__5025__auto____$1$jscomp$70_production$$) ? $G__50683__$1$jscomp$inline_5484_or__5025__auto____$1$jscomp$70_production$$ : 0;
    };
  }();
  return function($G__50684$jscomp$inline_10383_G__50685__$1$jscomp$inline_10385_JSCompiler_inline_result$jscomp$10214_or__5025__auto__$jscomp$inline_10384_production$$) {
    var $JSCompiler_temp_const$$ = $APP.cljs.core.PersistentVector, $JSCompiler_temp_const$jscomp$0$$ = $APP.cljs.core.PersistentVector.EMPTY_NODE, $JSCompiler_temp_const$jscomp$1$$ = $rule_salience_fn$$.cljs$core$IFn$_invoke$arity$1 ? $rule_salience_fn$$.cljs$core$IFn$_invoke$arity$1($G__50684$jscomp$inline_10383_G__50685__$1$jscomp$inline_10385_JSCompiler_inline_result$jscomp$10214_or__5025__auto__$jscomp$inline_10384_production$$) : $rule_salience_fn$$.call(null, $G__50684$jscomp$inline_10383_G__50685__$1$jscomp$inline_10385_JSCompiler_inline_result$jscomp$10214_or__5025__auto__$jscomp$inline_10384_production$$);
    $G__50684$jscomp$inline_10383_G__50685__$1$jscomp$inline_10385_JSCompiler_inline_result$jscomp$10214_or__5025__auto__$jscomp$inline_10384_production$$ = $G__50684$jscomp$inline_10383_G__50685__$1$jscomp$inline_10385_JSCompiler_inline_result$jscomp$10214_or__5025__auto__$jscomp$inline_10384_production$$ == null ? null : cljs$cst$3128$props.cljs$core$IFn$_invoke$arity$1($G__50684$jscomp$inline_10383_G__50685__$1$jscomp$inline_10385_JSCompiler_inline_result$jscomp$10214_or__5025__auto__$jscomp$inline_10384_production$$);
    $G__50684$jscomp$inline_10383_G__50685__$1$jscomp$inline_10385_JSCompiler_inline_result$jscomp$10214_or__5025__auto__$jscomp$inline_10384_production$$ = $G__50684$jscomp$inline_10383_G__50685__$1$jscomp$inline_10385_JSCompiler_inline_result$jscomp$10214_or__5025__auto__$jscomp$inline_10384_production$$ == null ? null : cljs$cst$3180$clara_rules_SLASH_internal_salience.cljs$core$IFn$_invoke$arity$1($G__50684$jscomp$inline_10383_G__50685__$1$jscomp$inline_10385_JSCompiler_inline_result$jscomp$10214_or__5025__auto__$jscomp$inline_10384_production$$);
    $G__50684$jscomp$inline_10383_G__50685__$1$jscomp$inline_10385_JSCompiler_inline_result$jscomp$10214_or__5025__auto__$jscomp$inline_10384_production$$ = $APP.cljs.core.truth_($G__50684$jscomp$inline_10383_G__50685__$1$jscomp$inline_10385_JSCompiler_inline_result$jscomp$10214_or__5025__auto__$jscomp$inline_10384_production$$) ? $G__50684$jscomp$inline_10383_G__50685__$1$jscomp$inline_10385_JSCompiler_inline_result$jscomp$10214_or__5025__auto__$jscomp$inline_10384_production$$ : $APP.cljs$cst$205$default;
    $G__50684$jscomp$inline_10383_G__50685__$1$jscomp$inline_10385_JSCompiler_inline_result$jscomp$10214_or__5025__auto__$jscomp$inline_10384_production$$ = clara.rules.engine.internal_salience_levels.cljs$core$IFn$_invoke$arity$1 ? clara.rules.engine.internal_salience_levels.cljs$core$IFn$_invoke$arity$1($G__50684$jscomp$inline_10383_G__50685__$1$jscomp$inline_10385_JSCompiler_inline_result$jscomp$10214_or__5025__auto__$jscomp$inline_10384_production$$) : clara.rules.engine.internal_salience_levels.call(null, 
    $G__50684$jscomp$inline_10383_G__50685__$1$jscomp$inline_10385_JSCompiler_inline_result$jscomp$10214_or__5025__auto__$jscomp$inline_10384_production$$);
    return new $JSCompiler_temp_const$$(null, 2, 5, $JSCompiler_temp_const$jscomp$0$$, [$JSCompiler_temp_const$jscomp$1$$, $G__50684$jscomp$inline_10383_G__50685__$1$jscomp$inline_10385_JSCompiler_inline_result$jscomp$10214_or__5025__auto__$jscomp$inline_10384_production$$], null);
  };
};
clara.rules.insert = function($var_args$$) {
  for (var $args__5755__auto__$jscomp$252_argseq__5756__auto__$$ = [], $len__5749__auto___37080$$ = arguments.length, $i__5750__auto___37081$$ = 0;;) {
    if ($i__5750__auto___37081$$ < $len__5749__auto___37080$$) {
      $args__5755__auto__$jscomp$252_argseq__5756__auto__$$.push(arguments[$i__5750__auto___37081$$]), $i__5750__auto___37081$$ += 1;
    } else {
      break;
    }
  }
  $args__5755__auto__$jscomp$252_argseq__5756__auto__$$ = 1 < $args__5755__auto__$jscomp$252_argseq__5756__auto__$$.length ? new $APP.cljs.core.IndexedSeq($args__5755__auto__$jscomp$252_argseq__5756__auto__$$.slice(1), 0, null) : null;
  return clara.rules.insert.cljs$core$IFn$_invoke$arity$variadic(arguments[0], $args__5755__auto__$jscomp$252_argseq__5756__auto__$$);
};
clara.rules.insert.cljs$core$IFn$_invoke$arity$variadic = function($session$$, $facts$$) {
  return clara.rules.engine.insert($session$$, $facts$$);
};
clara.rules.insert.cljs$lang$maxFixedArity = 1;
clara.rules.insert.cljs$lang$applyTo = function($seq36821_seq36821__$1$$) {
  var $G__36822$$ = $APP.cljs.core.first($seq36821_seq36821__$1$$);
  $seq36821_seq36821__$1$$ = $APP.cljs.core.next($seq36821_seq36821__$1$$);
  return this.cljs$core$IFn$_invoke$arity$variadic($G__36822$$, $seq36821_seq36821__$1$$);
};
clara.rules.insert_all = function($session$$, $fact_seq$$) {
  return clara.rules.engine.insert($session$$, $fact_seq$$);
};
clara.rules.retract = function($var_args$$) {
  for (var $args__5755__auto__$jscomp$253_argseq__5756__auto__$$ = [], $len__5749__auto___37083$$ = arguments.length, $i__5750__auto___37084$$ = 0;;) {
    if ($i__5750__auto___37084$$ < $len__5749__auto___37083$$) {
      $args__5755__auto__$jscomp$253_argseq__5756__auto__$$.push(arguments[$i__5750__auto___37084$$]), $i__5750__auto___37084$$ += 1;
    } else {
      break;
    }
  }
  $args__5755__auto__$jscomp$253_argseq__5756__auto__$$ = 1 < $args__5755__auto__$jscomp$253_argseq__5756__auto__$$.length ? new $APP.cljs.core.IndexedSeq($args__5755__auto__$jscomp$253_argseq__5756__auto__$$.slice(1), 0, null) : null;
  return clara.rules.retract.cljs$core$IFn$_invoke$arity$variadic(arguments[0], $args__5755__auto__$jscomp$253_argseq__5756__auto__$$);
};
clara.rules.retract.cljs$core$IFn$_invoke$arity$variadic = function($session$$, $facts$$) {
  return clara.rules.engine.retract($session$$, $facts$$);
};
clara.rules.retract.cljs$lang$maxFixedArity = 1;
clara.rules.retract.cljs$lang$applyTo = function($seq36842_seq36842__$1$$) {
  var $G__36843$$ = $APP.cljs.core.first($seq36842_seq36842__$1$$);
  $seq36842_seq36842__$1$$ = $APP.cljs.core.next($seq36842_seq36842__$1$$);
  return this.cljs$core$IFn$_invoke$arity$variadic($G__36843$$, $seq36842_seq36842__$1$$);
};
clara.rules.fire_rules = function($var_args$$) {
  switch(arguments.length) {
    case 1:
      return clara.rules.fire_rules.cljs$core$IFn$_invoke$arity$1(arguments[0]);
    case 2:
      return clara.rules.fire_rules.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
clara.rules.fire_rules.cljs$core$IFn$_invoke$arity$1 = function($session$$) {
  return clara.rules.engine.fire_rules($session$$, $APP.cljs.core.PersistentArrayMap.EMPTY);
};
clara.rules.fire_rules.cljs$core$IFn$_invoke$arity$2 = function($session$$, $opts$$) {
  return clara.rules.engine.fire_rules($session$$, $opts$$);
};
clara.rules.fire_rules.cljs$lang$maxFixedArity = 2;
clara.rules.query = function($var_args$$) {
  for (var $args__5755__auto__$jscomp$254_argseq__5756__auto__$$ = [], $len__5749__auto___37089$$ = arguments.length, $i__5750__auto___37090$$ = 0;;) {
    if ($i__5750__auto___37090$$ < $len__5749__auto___37089$$) {
      $args__5755__auto__$jscomp$254_argseq__5756__auto__$$.push(arguments[$i__5750__auto___37090$$]), $i__5750__auto___37090$$ += 1;
    } else {
      break;
    }
  }
  $args__5755__auto__$jscomp$254_argseq__5756__auto__$$ = 2 < $args__5755__auto__$jscomp$254_argseq__5756__auto__$$.length ? new $APP.cljs.core.IndexedSeq($args__5755__auto__$jscomp$254_argseq__5756__auto__$$.slice(2), 0, null) : null;
  return clara.rules.query.cljs$core$IFn$_invoke$arity$variadic(arguments[0], arguments[1], $args__5755__auto__$jscomp$254_argseq__5756__auto__$$);
};
clara.rules.query.cljs$core$IFn$_invoke$arity$variadic = function($session$$, $query$$, $params$$) {
  var $params_map$$ = $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, function() {
    return function $clara$rules$iter__36873$$($s__36874$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (;;) {
          var $s__36874__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__36874$$);
          if ($s__36874__$2_temp__5825__auto__$$) {
            if ($APP.cljs.core.chunked_seq_QMARK_($s__36874__$2_temp__5825__auto__$$)) {
              var $JSCompiler_inline_result$jscomp$1031_c__5501__auto__$jscomp$115_value$$ = $APP.cljs.core.chunk_first($s__36874__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1031_c__5501__auto__$jscomp$115_value$$), $b__36876_param$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
              a: {
                for (var $i__36875$$ = 0;;) {
                  if ($i__36875$$ < $size__5502__auto__$$) {
                    var $value$jscomp$inline_5492_vec__36881$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1031_c__5501__auto__$jscomp$115_value$$, $i__36875$$), $param$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($value$jscomp$inline_5492_vec__36881$$, 0, null);
                    $value$jscomp$inline_5492_vec__36881$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($value$jscomp$inline_5492_vec__36881$$, 1, null);
                    $APP.cljs.core.chunk_append($b__36876_param$$, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [clara.rules.platform.query_param($param$$), $value$jscomp$inline_5492_vec__36881$$], null));
                    $i__36875$$ += 1;
                  } else {
                    $JSCompiler_inline_result$jscomp$1031_c__5501__auto__$jscomp$115_value$$ = !0;
                    break a;
                  }
                }
                $JSCompiler_inline_result$jscomp$1031_c__5501__auto__$jscomp$115_value$$ = void 0;
              }
              return $JSCompiler_inline_result$jscomp$1031_c__5501__auto__$jscomp$115_value$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__36876_param$$), $clara$rules$iter__36873$$($APP.cljs.core.chunk_rest($s__36874__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__36876_param$$), null);
            }
            $JSCompiler_inline_result$jscomp$1031_c__5501__auto__$jscomp$115_value$$ = $APP.cljs.core.first($s__36874__$2_temp__5825__auto__$$);
            $b__36876_param$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_inline_result$jscomp$1031_c__5501__auto__$jscomp$115_value$$, 0, null);
            $JSCompiler_inline_result$jscomp$1031_c__5501__auto__$jscomp$115_value$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_inline_result$jscomp$1031_c__5501__auto__$jscomp$115_value$$, 1, null);
            return $APP.cljs.core.cons(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [clara.rules.platform.query_param($b__36876_param$$), $JSCompiler_inline_result$jscomp$1031_c__5501__auto__$jscomp$115_value$$], null), $clara$rules$iter__36873$$($APP.cljs.core.rest($s__36874__$2_temp__5825__auto__$$)));
          }
          return null;
        }
      }, null, null);
    }($APP.cljs.core.apply.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.hash_map, $params$$));
  }());
  return clara.rules.engine.query($session$$, $query$$, $params_map$$);
};
clara.rules.query.cljs$lang$maxFixedArity = 2;
clara.rules.query.cljs$lang$applyTo = function($G__36871_seq36869$$) {
  var $G__36870$$ = $APP.cljs.core.first($G__36871_seq36869$$), $seq36869__$1_seq36869__$2$$ = $APP.cljs.core.next($G__36871_seq36869$$);
  $G__36871_seq36869$$ = $APP.cljs.core.first($seq36869__$1_seq36869__$2$$);
  $seq36869__$1_seq36869__$2$$ = $APP.cljs.core.next($seq36869__$1_seq36869__$2$$);
  return this.cljs$core$IFn$_invoke$arity$variadic($G__36870$$, $G__36871_seq36869$$, $seq36869__$1_seq36869__$2$$);
};
clara.rules.insert_BANG_ = function($var_args$$) {
  for (var $args__5755__auto__$jscomp$255_argseq__5756__auto__$$ = [], $len__5749__auto___37102$$ = arguments.length, $i__5750__auto___37103$$ = 0;;) {
    if ($i__5750__auto___37103$$ < $len__5749__auto___37102$$) {
      $args__5755__auto__$jscomp$255_argseq__5756__auto__$$.push(arguments[$i__5750__auto___37103$$]), $i__5750__auto___37103$$ += 1;
    } else {
      break;
    }
  }
  $args__5755__auto__$jscomp$255_argseq__5756__auto__$$ = 0 < $args__5755__auto__$jscomp$255_argseq__5756__auto__$$.length ? new $APP.cljs.core.IndexedSeq($args__5755__auto__$jscomp$255_argseq__5756__auto__$$.slice(0), 0, null) : null;
  return clara.rules.insert_BANG_.cljs$core$IFn$_invoke$arity$variadic($args__5755__auto__$jscomp$255_argseq__5756__auto__$$);
};
clara.rules.insert_BANG_.cljs$core$IFn$_invoke$arity$variadic = function($facts$$) {
  return clara.rules.engine.insert_facts_BANG_($facts$$, !1);
};
clara.rules.insert_BANG_.cljs$lang$maxFixedArity = 0;
clara.rules.insert_BANG_.cljs$lang$applyTo = function($seq36888$$) {
  return this.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.seq($seq36888$$));
};
clara.rules.insert_all_BANG_ = function($facts$$) {
  return clara.rules.engine.insert_facts_BANG_($facts$$, !1);
};
clara.rules.insert_unconditional_BANG_ = function($var_args$$) {
  for (var $args__5755__auto__$jscomp$256_argseq__5756__auto__$$ = [], $len__5749__auto___37105$$ = arguments.length, $i__5750__auto___37106$$ = 0;;) {
    if ($i__5750__auto___37106$$ < $len__5749__auto___37105$$) {
      $args__5755__auto__$jscomp$256_argseq__5756__auto__$$.push(arguments[$i__5750__auto___37106$$]), $i__5750__auto___37106$$ += 1;
    } else {
      break;
    }
  }
  $args__5755__auto__$jscomp$256_argseq__5756__auto__$$ = 0 < $args__5755__auto__$jscomp$256_argseq__5756__auto__$$.length ? new $APP.cljs.core.IndexedSeq($args__5755__auto__$jscomp$256_argseq__5756__auto__$$.slice(0), 0, null) : null;
  return clara.rules.insert_unconditional_BANG_.cljs$core$IFn$_invoke$arity$variadic($args__5755__auto__$jscomp$256_argseq__5756__auto__$$);
};
clara.rules.insert_unconditional_BANG_.cljs$core$IFn$_invoke$arity$variadic = function($facts$$) {
  return clara.rules.engine.insert_facts_BANG_($facts$$, !0);
};
clara.rules.insert_unconditional_BANG_.cljs$lang$maxFixedArity = 0;
clara.rules.insert_unconditional_BANG_.cljs$lang$applyTo = function($seq36893$$) {
  return this.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.seq($seq36893$$));
};
clara.rules.insert_all_unconditional_BANG_ = function($facts$$) {
  return clara.rules.engine.insert_facts_BANG_($facts$$, !0);
};
clara.rules.retract_BANG_ = function($var_args$$) {
  for (var $args__5755__auto__$jscomp$257_argseq__5756__auto__$$ = [], $len__5749__auto___37111$$ = arguments.length, $i__5750__auto___37112$$ = 0;;) {
    if ($i__5750__auto___37112$$ < $len__5749__auto___37111$$) {
      $args__5755__auto__$jscomp$257_argseq__5756__auto__$$.push(arguments[$i__5750__auto___37112$$]), $i__5750__auto___37112$$ += 1;
    } else {
      break;
    }
  }
  $args__5755__auto__$jscomp$257_argseq__5756__auto__$$ = 0 < $args__5755__auto__$jscomp$257_argseq__5756__auto__$$.length ? new $APP.cljs.core.IndexedSeq($args__5755__auto__$jscomp$257_argseq__5756__auto__$$.slice(0), 0, null) : null;
  return clara.rules.retract_BANG_.cljs$core$IFn$_invoke$arity$variadic($args__5755__auto__$jscomp$257_argseq__5756__auto__$$);
};
clara.rules.retract_BANG_.cljs$core$IFn$_invoke$arity$variadic = function($facts$$) {
  return clara.rules.engine.rhs_retract_facts_BANG_($facts$$);
};
clara.rules.retract_BANG_.cljs$lang$maxFixedArity = 0;
clara.rules.retract_BANG_.cljs$lang$applyTo = function($seq36894$$) {
  return this.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.seq($seq36894$$));
};
clara.rules.accumulate = function($var_args$$) {
  for (var $args__5755__auto__$jscomp$258_argseq__5756__auto__$$ = [], $len__5749__auto___37115$$ = arguments.length, $i__5750__auto___37116$$ = 0;;) {
    if ($i__5750__auto___37116$$ < $len__5749__auto___37115$$) {
      $args__5755__auto__$jscomp$258_argseq__5756__auto__$$.push(arguments[$i__5750__auto___37116$$]), $i__5750__auto___37116$$ += 1;
    } else {
      break;
    }
  }
  $args__5755__auto__$jscomp$258_argseq__5756__auto__$$ = 0 < $args__5755__auto__$jscomp$258_argseq__5756__auto__$$.length ? new $APP.cljs.core.IndexedSeq($args__5755__auto__$jscomp$258_argseq__5756__auto__$$.slice(0), 0, null) : null;
  return clara.rules.accumulate.cljs$core$IFn$_invoke$arity$variadic($args__5755__auto__$jscomp$258_argseq__5756__auto__$$);
};
clara.rules.accumulate.cljs$core$IFn$_invoke$arity$variadic = function($map__36907__$1_p__36906$$) {
  $map__36907__$1_p__36906$$ = $APP.cljs.core.__destructure_map($map__36907__$1_p__36906$$);
  $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__36907__$1_p__36906$$, cljs$cst$3097$initial_value);
  $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__36907__$1_p__36906$$, cljs$cst$3099$reduce_fn);
  $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__36907__$1_p__36906$$, cljs$cst$3100$combine_fn);
  $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__36907__$1_p__36906$$, cljs$cst$3098$retract_fn);
  $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__36907__$1_p__36906$$, cljs$cst$3101$convert_return_fn);
  return clara.rules.engine.map__GT_Accumulator($APP.cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new $APP.cljs.core.PersistentArrayMap(null, 1, [cljs$cst$3101$convert_return_fn, $APP.cljs.core.identity], null), $map__36907__$1_p__36906$$], 0)));
};
clara.rules.accumulate.cljs$lang$maxFixedArity = 0;
clara.rules.accumulate.cljs$lang$applyTo = function($seq36900$$) {
  return this.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.seq($seq36900$$));
};
clara.rules.Rulebase = function($alpha_roots$$, $beta_roots$$, $productions$$, $queries$$, $production_nodes$$, $query_nodes$$, $id_to_node$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.alpha_roots = $alpha_roots$$;
  this.beta_roots = $beta_roots$$;
  this.productions = $productions$$;
  this.queries = $queries$$;
  this.production_nodes = $production_nodes$$;
  this.query_nodes = $query_nodes$$;
  this.id_to_node = $id_to_node$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
clara.rules.Rulebase.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
clara.rules.Rulebase.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k36909$$, $else__5326__auto__$$) {
  switch($k36909$$ instanceof $APP.cljs.core.Keyword ? $k36909$$.fqn : null) {
    case "alpha-roots":
      return this.alpha_roots;
    case "beta-roots":
      return this.beta_roots;
    case "productions":
      return this.productions;
    case "queries":
      return this.queries;
    case "production-nodes":
      return this.production_nodes;
    case "query-nodes":
      return this.query_nodes;
    case "id-to-node":
      return this.id_to_node;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k36909$$, $else__5326__auto__$$);
  }
};
clara.rules.Rulebase.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__36920_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__36920_v__5348__auto__$$, 0, null);
    $p__36920_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__36920_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__36920_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__36920_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
clara.rules.Rulebase.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#clara.rules.Rulebase{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 7, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3181$alpha_roots, this.alpha_roots], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3177$beta_roots, this.beta_roots], null), new $APP.cljs.core.PersistentVector(null, 
  2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3182$productions, this.productions], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3183$queries, this.queries], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3169$production_nodes, this.production_nodes], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3171$query_nodes, 
  this.query_nodes], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3184$id_to_node, this.id_to_node], null)], null), this.__extmap));
};
clara.rules.Rulebase.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__36908$$) {
  return new $APP.cljs.core.RecordIter(0, this, 7, new $APP.cljs.core.PersistentVector(null, 7, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3181$alpha_roots, cljs$cst$3177$beta_roots, cljs$cst$3182$productions, cljs$cst$3183$queries, cljs$cst$3169$production_nodes, cljs$cst$3171$query_nodes, cljs$cst$3184$id_to_node], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
clara.rules.Rulebase.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
clara.rules.Rulebase.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new clara.rules.Rulebase(this.alpha_roots, this.beta_roots, this.productions, this.queries, this.production_nodes, this.query_nodes, this.id_to_node, this.__meta, this.__extmap, this.__hash);
};
clara.rules.Rulebase.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 7 + $APP.cljs.core.count(this.__extmap);
};
clara.rules.Rulebase.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$109_h__5134__auto____$1$jscomp$109_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$109_h__5134__auto____$1$jscomp$109_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$109_h__5134__auto____$1$jscomp$109_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$109_h__5134__auto____$1$jscomp$109_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$109_h__5134__auto____$1$jscomp$109_this__5319__auto__$$ = -262718183 ^ $APP.cljs.core.hash_unordered_coll(this);
};
clara.rules.Rulebase.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this36910$$, $other36911$$) {
  return $other36911$$ != null && this.constructor === $other36911$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.alpha_roots, $other36911$$.alpha_roots) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.beta_roots, $other36911$$.beta_roots) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.productions, $other36911$$.productions) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.queries, $other36911$$.queries) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.production_nodes, 
  $other36911$$.production_nodes) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.query_nodes, $other36911$$.query_nodes) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.id_to_node, $other36911$$.id_to_node) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other36911$$.__extmap);
};
clara.rules.Rulebase.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 7, [cljs$cst$3181$alpha_roots, null, cljs$cst$3177$beta_roots, null, cljs$cst$3171$query_nodes, null, cljs$cst$3182$productions, null, cljs$cst$3169$production_nodes, null, cljs$cst$3183$queries, null, cljs$cst$3184$id_to_node, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, 
  this), this.__meta), $k__5334__auto__$$) : new clara.rules.Rulebase(this.alpha_roots, this.beta_roots, this.productions, this.queries, this.production_nodes, this.query_nodes, this.id_to_node, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
clara.rules.Rulebase.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k36909$$) {
  switch($k36909$$ instanceof $APP.cljs.core.Keyword ? $k36909$$.fqn : null) {
    case "alpha-roots":
    case "beta-roots":
    case "productions":
    case "queries":
    case "production-nodes":
    case "query-nodes":
    case "id-to-node":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k36909$$);
  }
};
clara.rules.Rulebase.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__36949_this__5331__auto__$$, $k__5332__auto__$$, $G__36908$$) {
  $pred__36949_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__36949_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__36949_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3181$alpha_roots, $k__5332__auto__$$) : $pred__36949_this__5331__auto__$$.call(null, cljs$cst$3181$alpha_roots, $k__5332__auto__$$)) ? new clara.rules.Rulebase($G__36908$$, this.beta_roots, this.productions, this.queries, this.production_nodes, this.query_nodes, this.id_to_node, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__36949_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? 
  $pred__36949_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3177$beta_roots, $k__5332__auto__$$) : $pred__36949_this__5331__auto__$$.call(null, cljs$cst$3177$beta_roots, $k__5332__auto__$$)) ? new clara.rules.Rulebase(this.alpha_roots, $G__36908$$, this.productions, this.queries, this.production_nodes, this.query_nodes, this.id_to_node, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__36949_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__36949_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3182$productions, 
  $k__5332__auto__$$) : $pred__36949_this__5331__auto__$$.call(null, cljs$cst$3182$productions, $k__5332__auto__$$)) ? new clara.rules.Rulebase(this.alpha_roots, this.beta_roots, $G__36908$$, this.queries, this.production_nodes, this.query_nodes, this.id_to_node, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__36949_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__36949_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3183$queries, $k__5332__auto__$$) : $pred__36949_this__5331__auto__$$.call(null, 
  cljs$cst$3183$queries, $k__5332__auto__$$)) ? new clara.rules.Rulebase(this.alpha_roots, this.beta_roots, this.productions, $G__36908$$, this.production_nodes, this.query_nodes, this.id_to_node, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__36949_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__36949_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3169$production_nodes, $k__5332__auto__$$) : $pred__36949_this__5331__auto__$$.call(null, cljs$cst$3169$production_nodes, 
  $k__5332__auto__$$)) ? new clara.rules.Rulebase(this.alpha_roots, this.beta_roots, this.productions, this.queries, $G__36908$$, this.query_nodes, this.id_to_node, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__36949_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__36949_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3171$query_nodes, $k__5332__auto__$$) : $pred__36949_this__5331__auto__$$.call(null, cljs$cst$3171$query_nodes, $k__5332__auto__$$)) ? new clara.rules.Rulebase(this.alpha_roots, 
  this.beta_roots, this.productions, this.queries, this.production_nodes, $G__36908$$, this.id_to_node, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__36949_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__36949_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$3184$id_to_node, $k__5332__auto__$$) : $pred__36949_this__5331__auto__$$.call(null, cljs$cst$3184$id_to_node, $k__5332__auto__$$)) ? new clara.rules.Rulebase(this.alpha_roots, this.beta_roots, this.productions, 
  this.queries, this.production_nodes, this.query_nodes, $G__36908$$, this.__meta, this.__extmap, null) : new clara.rules.Rulebase(this.alpha_roots, this.beta_roots, this.productions, this.queries, this.production_nodes, this.query_nodes, this.id_to_node, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__36908$$), null);
};
clara.rules.Rulebase.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 7, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry(cljs$cst$3181$alpha_roots, this.alpha_roots, null), new $APP.cljs.core.MapEntry(cljs$cst$3177$beta_roots, this.beta_roots, null), new $APP.cljs.core.MapEntry(cljs$cst$3182$productions, this.productions, null), new $APP.cljs.core.MapEntry(cljs$cst$3183$queries, this.queries, null), new $APP.cljs.core.MapEntry(cljs$cst$3169$production_nodes, 
  this.production_nodes, null), new $APP.cljs.core.MapEntry(cljs$cst$3171$query_nodes, this.query_nodes, null), new $APP.cljs.core.MapEntry(cljs$cst$3184$id_to_node, this.id_to_node, null)], null), this.__extmap));
};
clara.rules.Rulebase.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__36908$$) {
  return new clara.rules.Rulebase(this.alpha_roots, this.beta_roots, this.productions, this.queries, this.production_nodes, this.query_nodes, this.id_to_node, $G__36908$$, this.__extmap, this.__hash);
};
clara.rules.Rulebase.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
clara.rules.Rulebase.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 7, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3185$alpha_roots, cljs$cst$3186$beta_roots, cljs$cst$3187$productions, cljs$cst$3188$queries, cljs$cst$3189$production_nodes, cljs$cst$3190$query_nodes, cljs$cst$3191$id_to_node], null);
};
clara.rules.Rulebase.cljs$lang$type = !0;
clara.rules.Rulebase.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "clara.rules/Rulebase", null, 1, null);
};
clara.rules.Rulebase.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "clara.rules/Rulebase");
};
clara.rules.__GT_Rulebase = function($alpha_roots$$, $beta_roots$$, $productions$$, $queries$$, $production_nodes$$, $query_nodes$$, $id_to_node$$) {
  return new clara.rules.Rulebase($alpha_roots$$, $beta_roots$$, $productions$$, $queries$$, $production_nodes$$, $query_nodes$$, $id_to_node$$, null, null, null);
};
clara.rules.map__GT_Rulebase = function($G__36913$$) {
  var $G__36963$jscomp$inline_5495_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__36913$$, cljs$cst$3181$alpha_roots, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$3177$beta_roots, cljs$cst$3182$productions, cljs$cst$3183$queries, cljs$cst$3169$production_nodes, cljs$cst$3171$query_nodes, cljs$cst$3184$id_to_node], 0));
  $G__36963$jscomp$inline_5495_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__36913$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__36963$jscomp$inline_5495_extmap__5365__auto__$$) : $G__36963$jscomp$inline_5495_extmap__5365__auto__$$;
  return new clara.rules.Rulebase(cljs$cst$3181$alpha_roots.cljs$core$IFn$_invoke$arity$1($G__36913$$), cljs$cst$3177$beta_roots.cljs$core$IFn$_invoke$arity$1($G__36913$$), cljs$cst$3182$productions.cljs$core$IFn$_invoke$arity$1($G__36913$$), cljs$cst$3183$queries.cljs$core$IFn$_invoke$arity$1($G__36913$$), cljs$cst$3169$production_nodes.cljs$core$IFn$_invoke$arity$1($G__36913$$), cljs$cst$3171$query_nodes.cljs$core$IFn$_invoke$arity$1($G__36913$$), cljs$cst$3184$id_to_node.cljs$core$IFn$_invoke$arity$1($G__36913$$), 
  null, $APP.cljs.core.not_empty($G__36963$jscomp$inline_5495_extmap__5365__auto__$$), null);
};
clara.rules.create_get_alphas_fn = function($fact_type_fn$$, $ancestors_fn$$, $merged_rules$$) {
  var $alpha_map$$ = $APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.PersistentArrayMap.EMPTY), $wrapped_fact_type_fn$$ = $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($fact_type_fn$$, $APP.cljs.core.type) ? $APP.cljs.core.type : function($fact$$) {
    return $APP.cljs.core.isa_QMARK_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.type($fact$$), cljs$cst$3115$clara_DOT_rules_DOT_engine_SLASH_system_type) ? $APP.cljs.core.type($fact$$) : $fact_type_fn$$.cljs$core$IFn$_invoke$arity$1 ? $fact_type_fn$$.cljs$core$IFn$_invoke$arity$1($fact$$) : $fact_type_fn$$.call(null, $fact$$);
  }, $wrapped_ancestors_fn$$ = function($fact_type$$) {
    return $APP.cljs.core.isa_QMARK_.cljs$core$IFn$_invoke$arity$2($fact_type$$, cljs$cst$3115$clara_DOT_rules_DOT_engine_SLASH_system_type) ? $APP.cljs.core.PersistentHashSet.EMPTY : $ancestors_fn$$.cljs$core$IFn$_invoke$arity$1 ? $ancestors_fn$$.cljs$core$IFn$_invoke$arity$1($fact_type$$) : $ancestors_fn$$.call(null, $fact_type$$);
  };
  return function($facts$$) {
    return function $clara$rules$create_get_alphas_fn_$_iter__36984$$($s__36985$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (;;) {
          var $temp__5825__auto__$$ = $APP.cljs.core.seq($s__36985$$);
          if ($temp__5825__auto__$$) {
            var $s__36985__$2$$ = $temp__5825__auto__$$;
            if ($APP.cljs.core.chunked_seq_QMARK_($s__36985__$2$$)) {
              var $c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__36985__$2$$), $size__5502__auto__$$ = $APP.cljs.core.count($c__5501__auto__$$), $b__36987$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
              return function() {
                for (var $i__36986$$ = 0;;) {
                  if ($i__36986$$ < $size__5502__auto__$$) {
                    var $vec__36998$$ = $APP.cljs.core._nth($c__5501__auto__$$, $i__36986$$), $fact_type$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__36998$$, 0, null), $facts__$1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__36998$$, 1, null);
                    $APP.cljs.core.chunk_append($b__36987$$, function() {
                      var $new_nodes_temp__5823__auto__$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.deref($alpha_map$$), $fact_type$$);
                      if ($APP.cljs.core.truth_($new_nodes_temp__5823__auto__$$)) {
                        return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$new_nodes_temp__5823__auto__$$, $facts__$1$$], null);
                      }
                      var $ancestors$$ = $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($wrapped_ancestors_fn$$($fact_type$$), $fact_type$$);
                      $new_nodes_temp__5823__auto__$$ = $APP.cljs.core.distinct.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($i__36986$$, $ancestors$$, $temp__5823__auto__$$, $vec__36998$$, $fact_type$$, $facts__$1$$, $c__5501__auto__$$, $size__5502__auto__$$, $b__36987$$, $s__36985__$2$$, $temp__5825__auto__$$, $alpha_map$$, $wrapped_fact_type_fn$$, $wrapped_ancestors_fn$$) {
                        return function($coll$$, $ancestor$$) {
                          return $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($coll$$, $APP.cljs.core.get_in.cljs$core$IFn$_invoke$arity$2($merged_rules$$, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3181$alpha_roots, $ancestor$$], null)));
                        };
                      }($i__36986$$, $ancestors$$, $new_nodes_temp__5823__auto__$$, $vec__36998$$, $fact_type$$, $facts__$1$$, $c__5501__auto__$$, $size__5502__auto__$$, $b__36987$$, $s__36985__$2$$, $temp__5825__auto__$$, $alpha_map$$, $wrapped_fact_type_fn$$, $wrapped_ancestors_fn$$), $APP.cljs.core.PersistentVector.EMPTY, $ancestors$$));
                      $APP.cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$4($alpha_map$$, $APP.cljs.core.assoc, $fact_type$$, $new_nodes_temp__5823__auto__$$);
                      return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$new_nodes_temp__5823__auto__$$, $facts__$1$$], null);
                    }());
                    $i__36986$$ += 1;
                  } else {
                    return !0;
                  }
                }
              }() ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__36987$$), $clara$rules$create_get_alphas_fn_$_iter__36984$$($APP.cljs.core.chunk_rest($s__36985__$2$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__36987$$), null);
            }
            var $vec__37004$$ = $APP.cljs.core.first($s__36985__$2$$), $fact_type$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__37004$$, 0, null), $facts__$1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__37004$$, 1, null);
            return $APP.cljs.core.cons(function() {
              var $new_nodes$jscomp$1_temp__5823__auto__$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.deref($alpha_map$$), $fact_type$$);
              if ($APP.cljs.core.truth_($new_nodes$jscomp$1_temp__5823__auto__$$)) {
                return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$new_nodes$jscomp$1_temp__5823__auto__$$, $facts__$1$$], null);
              }
              var $ancestors$$ = $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($wrapped_ancestors_fn$$($fact_type$$), $fact_type$$);
              $new_nodes$jscomp$1_temp__5823__auto__$$ = $APP.cljs.core.distinct.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ancestors$$, $temp__5823__auto__$$, $vec__37004$$, $fact_type$$, $facts__$1$$, $s__36985__$2$$, $temp__5825__auto__$$, $alpha_map$$, $wrapped_fact_type_fn$$, $wrapped_ancestors_fn$$) {
                return function($coll$$, $ancestor$$) {
                  return $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($coll$$, $APP.cljs.core.get_in.cljs$core$IFn$_invoke$arity$2($merged_rules$$, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3181$alpha_roots, $ancestor$$], null)));
                };
              }($ancestors$$, $new_nodes$jscomp$1_temp__5823__auto__$$, $vec__37004$$, $fact_type$$, $facts__$1$$, $s__36985__$2$$, $temp__5825__auto__$$, $alpha_map$$, $wrapped_fact_type_fn$$, $wrapped_ancestors_fn$$), $APP.cljs.core.PersistentVector.EMPTY, $ancestors$$));
              $APP.cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$4($alpha_map$$, $APP.cljs.core.assoc, $fact_type$$, $new_nodes$jscomp$1_temp__5823__auto__$$);
              return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$new_nodes$jscomp$1_temp__5823__auto__$$, $facts__$1$$], null);
            }(), $clara$rules$create_get_alphas_fn_$_iter__36984$$($APP.cljs.core.rest($s__36985__$2$$)));
          }
          return null;
        }
      }, null, null);
    }(clara.rules.platform.tuned_group_by.cljs$core$IFn$_invoke$arity$2 ? clara.rules.platform.tuned_group_by.cljs$core$IFn$_invoke$arity$2($wrapped_fact_type_fn$$, $facts$$) : clara.rules.platform.tuned_group_by.call(null, $wrapped_fact_type_fn$$, $facts$$));
  };
};
clara.rules.mk_rulebase = function($beta_roots$$, $alpha_fns$$, $productions$$) {
  var $beta_nodes$$ = function() {
    return function $clara$rules$mk_rulebase_$_iter__37012$$($s__37013$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (var $s__37013__$1$$ = $s__37013$$;;) {
          var $iterys__5499__auto__$jscomp$56_temp__5825__auto__$$ = $APP.cljs.core.seq($s__37013__$1$$);
          if ($iterys__5499__auto__$jscomp$56_temp__5825__auto__$$) {
            var $xs__6385__auto__$$ = $iterys__5499__auto__$jscomp$56_temp__5825__auto__$$, $fs__5500__auto__$jscomp$56_root$$ = $APP.cljs.core.first($xs__6385__auto__$$);
            $iterys__5499__auto__$jscomp$56_temp__5825__auto__$$ = function($s__37013__$1$$, $root$$, $xs__6385__auto__$$, $temp__5825__auto__$$) {
              return function $clara$rules$mk_rulebase_$_iter__37012_$_iter__37014$$($s__37015$$) {
                return new $APP.cljs.core.LazySeq(null, function($s__37013__$1$$, $root$$, $xs__6385__auto__$$, $temp__5825__auto__$$) {
                  return function() {
                    for (;;) {
                      var $s__37015__$2_temp__5825__auto____$1$$ = $APP.cljs.core.seq($s__37015$$);
                      if ($s__37015__$2_temp__5825__auto____$1$$) {
                        if ($APP.cljs.core.chunked_seq_QMARK_($s__37015__$2_temp__5825__auto____$1$$)) {
                          var $JSCompiler_inline_result$jscomp$1032_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__37015__$2_temp__5825__auto____$1$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1032_c__5501__auto__$$), $b__37017_node$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
                          a: {
                            for (var $i__37016$$ = 0;;) {
                              if ($i__37016$$ < $size__5502__auto__$$) {
                                var $node$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1032_c__5501__auto__$$, $i__37016$$);
                                $APP.cljs.core.chunk_append($b__37017_node$$, $node$$);
                                $i__37016$$ += 1;
                              } else {
                                $JSCompiler_inline_result$jscomp$1032_c__5501__auto__$$ = !0;
                                break a;
                              }
                            }
                            $JSCompiler_inline_result$jscomp$1032_c__5501__auto__$$ = void 0;
                          }
                          return $JSCompiler_inline_result$jscomp$1032_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__37017_node$$), $clara$rules$mk_rulebase_$_iter__37012_$_iter__37014$$($APP.cljs.core.chunk_rest($s__37015__$2_temp__5825__auto____$1$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__37017_node$$), null);
                        }
                        $b__37017_node$$ = $APP.cljs.core.first($s__37015__$2_temp__5825__auto____$1$$);
                        return $APP.cljs.core.cons($b__37017_node$$, $clara$rules$mk_rulebase_$_iter__37012_$_iter__37014$$($APP.cljs.core.rest($s__37015__$2_temp__5825__auto____$1$$)));
                      }
                      return null;
                    }
                  };
                }($s__37013__$1$$, $root$$, $xs__6385__auto__$$, $temp__5825__auto__$$), null, null);
              };
            }($s__37013__$1$$, $fs__5500__auto__$jscomp$56_root$$, $xs__6385__auto__$$, $iterys__5499__auto__$jscomp$56_temp__5825__auto__$$);
            if ($fs__5500__auto__$jscomp$56_root$$ = $APP.cljs.core.seq($iterys__5499__auto__$jscomp$56_temp__5825__auto__$$($APP.cljs.core.tree_seq($APP.cljs$cst$3116$children, $APP.cljs$cst$3116$children, $fs__5500__auto__$jscomp$56_root$$)))) {
              return $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($fs__5500__auto__$jscomp$56_root$$, $clara$rules$mk_rulebase_$_iter__37012$$($APP.cljs.core.rest($s__37013__$1$$)));
            }
            $s__37013__$1$$ = $APP.cljs.core.rest($s__37013__$1$$);
          } else {
            return null;
          }
        }
      }, null, null);
    }($beta_roots$$);
  }(), $production_nodes$$ = function() {
    return function $clara$rules$mk_rulebase_$_iter__37024$$($s__37025$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (var $s__37025__$1_s__37025__$2_temp__5825__auto__$$ = $s__37025$$;;) {
          if ($s__37025__$1_s__37025__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__37025__$1_s__37025__$2_temp__5825__auto__$$)) {
            if ($APP.cljs.core.chunked_seq_QMARK_($s__37025__$1_s__37025__$2_temp__5825__auto__$$)) {
              var $JSCompiler_inline_result$jscomp$1033_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__37025__$1_s__37025__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1033_c__5501__auto__$$), $b__37027_node$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
              a: {
                for (var $i__37026$$ = 0;;) {
                  if ($i__37026$$ < $size__5502__auto__$$) {
                    var $node$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1033_c__5501__auto__$$, $i__37026$$);
                    $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(clara.rules.engine.ProductionNode, $APP.cljs.core.type($node$$)) && $APP.cljs.core.chunk_append($b__37027_node$$, $node$$);
                    $i__37026$$ += 1;
                  } else {
                    $JSCompiler_inline_result$jscomp$1033_c__5501__auto__$$ = !0;
                    break a;
                  }
                }
                $JSCompiler_inline_result$jscomp$1033_c__5501__auto__$$ = void 0;
              }
              return $JSCompiler_inline_result$jscomp$1033_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__37027_node$$), $clara$rules$mk_rulebase_$_iter__37024$$($APP.cljs.core.chunk_rest($s__37025__$1_s__37025__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__37027_node$$), null);
            }
            $b__37027_node$$ = $APP.cljs.core.first($s__37025__$1_s__37025__$2_temp__5825__auto__$$);
            if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(clara.rules.engine.ProductionNode, $APP.cljs.core.type($b__37027_node$$))) {
              return $APP.cljs.core.cons($b__37027_node$$, $clara$rules$mk_rulebase_$_iter__37024$$($APP.cljs.core.rest($s__37025__$1_s__37025__$2_temp__5825__auto__$$)));
            }
            $s__37025__$1_s__37025__$2_temp__5825__auto__$$ = $APP.cljs.core.rest($s__37025__$1_s__37025__$2_temp__5825__auto__$$);
          } else {
            return null;
          }
        }
      }, null, null);
    }($beta_nodes$$);
  }(), $query_nodes$$ = function() {
    return function $clara$rules$mk_rulebase_$_iter__37029$$($s__37030$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (var $s__37030__$1_s__37030__$2_temp__5825__auto__$$ = $s__37030$$;;) {
          if ($s__37030__$1_s__37030__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__37030__$1_s__37030__$2_temp__5825__auto__$$)) {
            if ($APP.cljs.core.chunked_seq_QMARK_($s__37030__$1_s__37030__$2_temp__5825__auto__$$)) {
              var $JSCompiler_inline_result$jscomp$1034_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__37030__$1_s__37030__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1034_c__5501__auto__$$), $b__37032_node$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
              a: {
                for (var $i__37031$$ = 0;;) {
                  if ($i__37031$$ < $size__5502__auto__$$) {
                    var $node$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1034_c__5501__auto__$$, $i__37031$$);
                    $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(clara.rules.engine.QueryNode, $APP.cljs.core.type($node$$)) && $APP.cljs.core.chunk_append($b__37032_node$$, $node$$);
                    $i__37031$$ += 1;
                  } else {
                    $JSCompiler_inline_result$jscomp$1034_c__5501__auto__$$ = !0;
                    break a;
                  }
                }
                $JSCompiler_inline_result$jscomp$1034_c__5501__auto__$$ = void 0;
              }
              return $JSCompiler_inline_result$jscomp$1034_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__37032_node$$), $clara$rules$mk_rulebase_$_iter__37029$$($APP.cljs.core.chunk_rest($s__37030__$1_s__37030__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__37032_node$$), null);
            }
            $b__37032_node$$ = $APP.cljs.core.first($s__37030__$1_s__37030__$2_temp__5825__auto__$$);
            if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(clara.rules.engine.QueryNode, $APP.cljs.core.type($b__37032_node$$))) {
              return $APP.cljs.core.cons($b__37032_node$$, $clara$rules$mk_rulebase_$_iter__37029$$($APP.cljs.core.rest($s__37030__$1_s__37030__$2_temp__5825__auto__$$)));
            }
            $s__37030__$1_s__37030__$2_temp__5825__auto__$$ = $APP.cljs.core.rest($s__37030__$1_s__37030__$2_temp__5825__auto__$$);
          } else {
            return null;
          }
        }
      }, null, null);
    }($beta_nodes$$);
  }(), $query_map$$ = $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, function() {
    return function $clara$rules$mk_rulebase_$_iter__37037$$($s__37038$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (var $s__37038__$1$$ = $s__37038$$;;) {
          var $iterys__5499__auto__$jscomp$57_temp__5825__auto__$$ = $APP.cljs.core.seq($s__37038__$1$$);
          if ($iterys__5499__auto__$jscomp$57_temp__5825__auto__$$) {
            var $xs__6385__auto__$$ = $iterys__5499__auto__$jscomp$57_temp__5825__auto__$$, $fs__5500__auto__$jscomp$57_query_node$$ = $APP.cljs.core.first($xs__6385__auto__$$);
            $iterys__5499__auto__$jscomp$57_temp__5825__auto__$$ = function($s__37038__$1$$, $query_node$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $beta_nodes$$, $production_nodes$$, $query_nodes$$) {
              return function $clara$rules$mk_rulebase_$_iter__37037_$_iter__37039$$($s__37040$$) {
                return new $APP.cljs.core.LazySeq(null, function($s__37038__$1$$, $query_node$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $beta_nodes$$, $production_nodes$$, $query_nodes$$) {
                  return function() {
                    for (;;) {
                      var $s__37040__$2_temp__5825__auto____$1$$ = $APP.cljs.core.seq($s__37040$$);
                      if ($s__37040__$2_temp__5825__auto____$1$$) {
                        if ($APP.cljs.core.chunked_seq_QMARK_($s__37040__$2_temp__5825__auto____$1$$)) {
                          var $JSCompiler_inline_result$jscomp$1035_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__37040__$2_temp__5825__auto____$1$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1035_c__5501__auto__$$), $b__37042_entry$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
                          a: {
                            for (var $i__37041$$ = 0;;) {
                              if ($i__37041$$ < $size__5502__auto__$$) {
                                var $entry$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1035_c__5501__auto__$$, $i__37041$$);
                                $APP.cljs.core.chunk_append($b__37042_entry$$, $entry$$);
                                $i__37041$$ += 1;
                              } else {
                                $JSCompiler_inline_result$jscomp$1035_c__5501__auto__$$ = !0;
                                break a;
                              }
                            }
                            $JSCompiler_inline_result$jscomp$1035_c__5501__auto__$$ = void 0;
                          }
                          return $JSCompiler_inline_result$jscomp$1035_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__37042_entry$$), $clara$rules$mk_rulebase_$_iter__37037_$_iter__37039$$($APP.cljs.core.chunk_rest($s__37040__$2_temp__5825__auto____$1$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__37042_entry$$), null);
                        }
                        $b__37042_entry$$ = $APP.cljs.core.first($s__37040__$2_temp__5825__auto____$1$$);
                        return $APP.cljs.core.cons($b__37042_entry$$, $clara$rules$mk_rulebase_$_iter__37037_$_iter__37039$$($APP.cljs.core.rest($s__37040__$2_temp__5825__auto____$1$$)));
                      }
                      return null;
                    }
                  };
                }($s__37038__$1$$, $query_node$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $beta_nodes$$, $production_nodes$$, $query_nodes$$), null, null);
              };
            }($s__37038__$1$$, $fs__5500__auto__$jscomp$57_query_node$$, $xs__6385__auto__$$, $iterys__5499__auto__$jscomp$57_temp__5825__auto__$$, $beta_nodes$$, $production_nodes$$, $query_nodes$$);
            if ($fs__5500__auto__$jscomp$57_query_node$$ = $APP.cljs.core.seq($iterys__5499__auto__$jscomp$57_temp__5825__auto__$$(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2339$query.cljs$core$IFn$_invoke$arity$1($fs__5500__auto__$jscomp$57_query_node$$), $fs__5500__auto__$jscomp$57_query_node$$], null), new $APP.cljs.core.PersistentVector(null, 
            2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($APP.cljs$cst$2339$query.cljs$core$IFn$_invoke$arity$1($fs__5500__auto__$jscomp$57_query_node$$)), $fs__5500__auto__$jscomp$57_query_node$$], null)], null)))) {
              return $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($fs__5500__auto__$jscomp$57_query_node$$, $clara$rules$mk_rulebase_$_iter__37037$$($APP.cljs.core.rest($s__37038__$1$$)));
            }
            $s__37038__$1$$ = $APP.cljs.core.rest($s__37038__$1$$);
          } else {
            return null;
          }
        }
      }, null, null);
    }($query_nodes$$);
  }()), $id_to_node$$ = $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, function() {
    return function $clara$rules$mk_rulebase_$_iter__37043$$($s__37044$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (;;) {
          var $s__37044__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__37044$$);
          if ($s__37044__$2_temp__5825__auto__$$) {
            if ($APP.cljs.core.chunked_seq_QMARK_($s__37044__$2_temp__5825__auto__$$)) {
              var $JSCompiler_inline_result$jscomp$1036_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__37044__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1036_c__5501__auto__$$), $b__37046_node$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
              a: {
                for (var $i__37045$$ = 0;;) {
                  if ($i__37045$$ < $size__5502__auto__$$) {
                    var $node$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1036_c__5501__auto__$$, $i__37045$$);
                    $APP.cljs.core.chunk_append($b__37046_node$$, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($node$$), $node$$], null));
                    $i__37045$$ += 1;
                  } else {
                    $JSCompiler_inline_result$jscomp$1036_c__5501__auto__$$ = !0;
                    break a;
                  }
                }
                $JSCompiler_inline_result$jscomp$1036_c__5501__auto__$$ = void 0;
              }
              return $JSCompiler_inline_result$jscomp$1036_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__37046_node$$), $clara$rules$mk_rulebase_$_iter__37043$$($APP.cljs.core.chunk_rest($s__37044__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__37046_node$$), null);
            }
            $b__37046_node$$ = $APP.cljs.core.first($s__37044__$2_temp__5825__auto__$$);
            return $APP.cljs.core.cons(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($b__37046_node$$), $b__37046_node$$], null), $clara$rules$mk_rulebase_$_iter__37043$$($APP.cljs.core.rest($s__37044__$2_temp__5825__auto__$$)));
          }
          return null;
        }
      }, null, null);
    }($beta_nodes$$);
  }()), $alpha_map$jscomp$3_alpha_nodes$$ = function() {
    return function $clara$rules$mk_rulebase_$_iter__37047$$($s__37048$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (;;) {
          var $s__37048__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__37048$$);
          if ($s__37048__$2_temp__5825__auto__$$) {
            if ($APP.cljs.core.chunked_seq_QMARK_($s__37048__$2_temp__5825__auto__$$)) {
              var $JSCompiler_inline_result$jscomp$1037_c__5501__auto__$jscomp$123_type$$ = $APP.cljs.core.chunk_first($s__37048__$2_temp__5825__auto__$$), $alpha_fn_size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1037_c__5501__auto__$jscomp$123_type$$), $b__37050_id$$ = $APP.cljs.core.chunk_buffer($alpha_fn_size__5502__auto__$$);
              a: {
                for (var $beta_children_children$jscomp$47_i__37049$$ = 0;;) {
                  if ($beta_children_children$jscomp$47_i__37049$$ < $alpha_fn_size__5502__auto__$$) {
                    var $env$jscomp$49_id$jscomp$inline_5522_map__37051$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1037_c__5501__auto__$jscomp$123_type$$, $beta_children_children$jscomp$47_i__37049$$), $env$jscomp$inline_5526_map__37051__$1$$ = $APP.cljs.core.__destructure_map($env$jscomp$49_id$jscomp$inline_5522_map__37051$$);
                    $env$jscomp$49_id$jscomp$inline_5522_map__37051$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($env$jscomp$inline_5526_map__37051__$1$$, $APP.cljs$cst$396$id);
                    var $type$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($env$jscomp$inline_5526_map__37051__$1$$, $APP.cljs$cst$139$type), $alpha_fn$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($env$jscomp$inline_5526_map__37051__$1$$, cljs$cst$3192$alpha_fn), $beta_children$jscomp$inline_5527_children$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($env$jscomp$inline_5526_map__37051__$1$$, $APP.cljs$cst$3116$children);
                    $env$jscomp$inline_5526_map__37051__$1$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($env$jscomp$inline_5526_map__37051__$1$$, $APP.cljs$cst$395$env);
                    $beta_children$jscomp$inline_5527_children$$ = $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2($id_to_node$$, $beta_children$jscomp$inline_5527_children$$);
                    $APP.cljs.core.chunk_append($b__37050_id$$, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$type$$, clara.rules.engine.__GT_AlphaNode($env$jscomp$49_id$jscomp$inline_5522_map__37051$$, $env$jscomp$inline_5526_map__37051__$1$$, $beta_children$jscomp$inline_5527_children$$, $alpha_fn$$, $type$$)], null));
                    $beta_children_children$jscomp$47_i__37049$$ += 1;
                  } else {
                    $JSCompiler_inline_result$jscomp$1037_c__5501__auto__$jscomp$123_type$$ = !0;
                    break a;
                  }
                }
                $JSCompiler_inline_result$jscomp$1037_c__5501__auto__$jscomp$123_type$$ = void 0;
              }
              return $JSCompiler_inline_result$jscomp$1037_c__5501__auto__$jscomp$123_type$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__37050_id$$), $clara$rules$mk_rulebase_$_iter__37047$$($APP.cljs.core.chunk_rest($s__37048__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__37050_id$$), null);
            }
            $b__37050_id$$ = $APP.cljs.core.first($s__37048__$2_temp__5825__auto__$$);
            $env$jscomp$49_id$jscomp$inline_5522_map__37051$$ = $APP.cljs.core.__destructure_map($b__37050_id$$);
            $b__37050_id$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($env$jscomp$49_id$jscomp$inline_5522_map__37051$$, $APP.cljs$cst$396$id);
            $JSCompiler_inline_result$jscomp$1037_c__5501__auto__$jscomp$123_type$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($env$jscomp$49_id$jscomp$inline_5522_map__37051$$, $APP.cljs$cst$139$type);
            $alpha_fn_size__5502__auto__$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($env$jscomp$49_id$jscomp$inline_5522_map__37051$$, cljs$cst$3192$alpha_fn);
            $beta_children_children$jscomp$47_i__37049$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($env$jscomp$49_id$jscomp$inline_5522_map__37051$$, $APP.cljs$cst$3116$children);
            $env$jscomp$49_id$jscomp$inline_5522_map__37051$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($env$jscomp$49_id$jscomp$inline_5522_map__37051$$, $APP.cljs$cst$395$env);
            $beta_children_children$jscomp$47_i__37049$$ = $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2($id_to_node$$, $beta_children_children$jscomp$47_i__37049$$);
            return $APP.cljs.core.cons(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$JSCompiler_inline_result$jscomp$1037_c__5501__auto__$jscomp$123_type$$, clara.rules.engine.__GT_AlphaNode($b__37050_id$$, $env$jscomp$49_id$jscomp$inline_5522_map__37051$$, $beta_children_children$jscomp$47_i__37049$$, $alpha_fn_size__5502__auto__$$, $JSCompiler_inline_result$jscomp$1037_c__5501__auto__$jscomp$123_type$$)], null), $clara$rules$mk_rulebase_$_iter__37047$$($APP.cljs.core.rest($s__37048__$2_temp__5825__auto__$$)));
          }
          return null;
        }
      }, null, null);
    }($alpha_fns$$);
  }();
  $alpha_map$jscomp$3_alpha_nodes$$ = $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($alpha_map$$, $alpha_node_p__37053$$) {
    var $type$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($alpha_node_p__37053$$, 0, null);
    $alpha_node_p__37053$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($alpha_node_p__37053$$, 1, null);
    return $APP.cljs.core.update_in.cljs$core$IFn$_invoke$arity$4($alpha_map$$, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$type$$], null), $APP.cljs.core.conj, $alpha_node_p__37053$$);
  }, $APP.cljs.core.PersistentArrayMap.EMPTY, $alpha_map$jscomp$3_alpha_nodes$$);
  return clara.rules.map__GT_Rulebase(new $APP.cljs.core.PersistentArrayMap(null, 7, [cljs$cst$3181$alpha_roots, $alpha_map$jscomp$3_alpha_nodes$$, cljs$cst$3177$beta_roots, $beta_roots$$, cljs$cst$3182$productions, $APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2(cljs$cst$3127$rhs, $productions$$), cljs$cst$3183$queries, $APP.cljs.core.remove.cljs$core$IFn$_invoke$arity$2(cljs$cst$3127$rhs, $productions$$), cljs$cst$3169$production_nodes, $production_nodes$$, cljs$cst$3171$query_nodes, $query_map$$, 
  cljs$cst$3184$id_to_node, $id_to_node$$], null));
};
clara.rules.assemble_session = function($beta_roots$jscomp$3_rulebase$$, $alpha_fns$jscomp$1_transport$$, $fact_type_fn$jscomp$1_get_alphas_fn$jscomp$8_productions$$, $options$$) {
  $beta_roots$jscomp$3_rulebase$$ = clara.rules.mk_rulebase($beta_roots$jscomp$3_rulebase$$, $alpha_fns$jscomp$1_transport$$, $fact_type_fn$jscomp$1_get_alphas_fn$jscomp$8_productions$$);
  $alpha_fns$jscomp$1_transport$$ = new clara.rules.engine.LocalTransport();
  $fact_type_fn$jscomp$1_get_alphas_fn$jscomp$8_productions$$ = function() {
    var $or__5025__auto__$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($options$$, cljs$cst$3193$fact_type_fn);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs.core.type;
  }();
  var $activation_group_sort_fn$jscomp$6_ancestors_fn$$ = function() {
    var $or__5025__auto__$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($options$$, cljs$cst$3194$ancestors_fn);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs.core.ancestors;
  }();
  $fact_type_fn$jscomp$1_get_alphas_fn$jscomp$8_productions$$ = clara.rules.create_get_alphas_fn($fact_type_fn$jscomp$1_get_alphas_fn$jscomp$8_productions$$, $activation_group_sort_fn$jscomp$6_ancestors_fn$$, $beta_roots$jscomp$3_rulebase$$);
  $activation_group_sort_fn$jscomp$6_ancestors_fn$$ = clara.rules.engine.options__GT_activation_group_sort_fn($options$$);
  var $activation_group_fn$$ = clara.rules.engine.options__GT_activation_group_fn($options$$), $listener$$ = function() {
    var $temp__5823__auto__$$ = $APP.cljs$cst$2040$listeners.cljs$core$IFn$_invoke$arity$1($options$$);
    return $APP.cljs.core.truth_($temp__5823__auto__$$) ? clara.rules.listener.delegating_listener($temp__5823__auto__$$) : clara.rules.listener.default_listener;
  }();
  return new clara.rules.engine.LocalSession($beta_roots$jscomp$3_rulebase$$, clara.rules.engine.local_memory($beta_roots$jscomp$3_rulebase$$, $alpha_fns$jscomp$1_transport$$, $activation_group_sort_fn$jscomp$6_ancestors_fn$$, $activation_group_fn$$, $fact_type_fn$jscomp$1_get_alphas_fn$jscomp$8_productions$$), $alpha_fns$jscomp$1_transport$$, $listener$$, $fact_type_fn$jscomp$1_get_alphas_fn$jscomp$8_productions$$, $APP.cljs.core.PersistentVector.EMPTY);
};
$APP.scittle.clara_rules = {};
$APP.scittle.clara_rules.init = function() {
  return $APP.scittle.core.register_plugin_BANG_(cljs$cst$3195$scittle_DOT_clara_rules_SLASH_clara_rules, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$398$namespaces, new $APP.cljs.core.PersistentArrayMap(null, 1, [cljs$cst$3196$clara_DOT_rules, $APP.sci.core._copy_ns($APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs.core.with_meta(cljs$cst$3197$map__GT_Rulebase, new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$2138$internal_ctor, !0, $APP.cljs$cst$2139$factory, 
  $APP.cljs$cst$202$map, $APP.cljs$cst$273$arglists, $APP.cljs.core.list($APP.cljs$cst$167$quote, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3198$G__36913], null))), $APP.cljs$cst$256$doc, "Factory function for clara.rules/Rulebase, taking a map of keywords to field values."], null)), $APP.cljs.core.with_meta(cljs$cst$3199$accumulate, new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list($APP.cljs$cst$167$quote, 
  $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$148$_AMPERSAND_, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1383$keys, new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3102$initial_value, cljs$cst$3104$reduce_fn, cljs$cst$3105$combine_fn, cljs$cst$3103$retract_fn, cljs$cst$3106$convert_return_fn], null), $APP.cljs$cst$265$as, $APP.cljs$cst$1246$args], 
  null)], null))), $APP.cljs$cst$256$doc, "DEPRECATED. Use clara.rules.accumulators/accum instead.\n\n  Creates a new accumulator based on the given properties:\n\n   * An initial-value to be used with the reduced operations.\n   * A reduce-fn that can be used with the Clojure Reducers library to reduce items.\n   * An optional combine-fn that can be used with the Clojure Reducers library to combine reduced items.\n   * An optional retract-fn that can remove a retracted fact from a previously reduced computation\n   * An optional convert-return-fn that converts the reduced data into something useful to the caller.\n     Simply uses identity by default.\n    ", 
  $APP.cljs$cst$1377$top_fn, new $APP.cljs.core.PersistentArrayMap(null, 6, [$APP.cljs$cst$1378$variadic_QMARK_, !0, $APP.cljs$cst$553$fixed_arity, 0, $APP.cljs$cst$1379$max_fixed_arity, 0, $APP.cljs$cst$1380$method_params, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.list(new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1383$keys, new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
  [cljs$cst$3102$initial_value, cljs$cst$3104$reduce_fn, cljs$cst$3105$combine_fn, cljs$cst$3103$retract_fn, cljs$cst$3106$convert_return_fn], null), $APP.cljs$cst$265$as, $APP.cljs$cst$1246$args], null))], null), $APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$148$_AMPERSAND_, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1383$keys, new $APP.cljs.core.PersistentVector(null, 
  5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3102$initial_value, cljs$cst$3104$reduce_fn, cljs$cst$3105$combine_fn, cljs$cst$3103$retract_fn, cljs$cst$3106$convert_return_fn], null), $APP.cljs$cst$265$as, $APP.cljs$cst$1246$args], null)], null)), $APP.cljs$cst$1381$arglists_meta, $APP.cljs.core.list(null)], null)], null)), $APP.cljs.core.with_meta(cljs$cst$3200$insert_unconditional_BANG_, new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list($APP.cljs$cst$167$quote, 
  $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$148$_AMPERSAND_, cljs$cst$3093$facts], null))), $APP.cljs$cst$256$doc, "To be executed within a rule's right-hand side, this inserts a new fact or facts into working memory.\n\n   This differs from insert! in that it is unconditional. The facts inserted will not be retracted\n   even if the rule activation doing the insert becomes false.  Most users should prefer the simple insert!\n   function as described above, but this function is available for use cases that don't wish to use\n   Clara's truth maintenance.", 
  $APP.cljs$cst$1377$top_fn, new $APP.cljs.core.PersistentArrayMap(null, 6, [$APP.cljs$cst$1378$variadic_QMARK_, !0, $APP.cljs$cst$553$fixed_arity, 0, $APP.cljs$cst$1379$max_fixed_arity, 0, $APP.cljs$cst$1380$method_params, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.list(cljs$cst$3093$facts)], null), $APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
  [$APP.cljs$cst$148$_AMPERSAND_, cljs$cst$3093$facts], null)), $APP.cljs$cst$1381$arglists_meta, $APP.cljs.core.list(null)], null)], null)), $APP.cljs.core.with_meta(cljs$cst$3201$retract, new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list($APP.cljs$cst$167$quote, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3202$session, $APP.cljs$cst$148$_AMPERSAND_, cljs$cst$3093$facts], null))), 
  $APP.cljs$cst$256$doc, "Retracts a fact from a working session. It does not modify the given session,\n   but returns a new session with the facts retracted.", $APP.cljs$cst$1377$top_fn, new $APP.cljs.core.PersistentArrayMap(null, 6, [$APP.cljs$cst$1378$variadic_QMARK_, !0, $APP.cljs$cst$553$fixed_arity, 1, $APP.cljs$cst$1379$max_fixed_arity, 1, $APP.cljs$cst$1380$method_params, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.list(cljs$cst$3202$session, 
  cljs$cst$3093$facts)], null), $APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3202$session, $APP.cljs$cst$148$_AMPERSAND_, cljs$cst$3093$facts], null)), $APP.cljs$cst$1381$arglists_meta, $APP.cljs.core.list(null)], null)], null)), $APP.cljs.core.with_meta(cljs$cst$3203$insert_all, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list($APP.cljs$cst$167$quote, 
  $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3202$session, cljs$cst$3204$fact_seq], null))), $APP.cljs$cst$256$doc, "Inserts a sequence of facts into a working session. It does not modify the given\n   session, but returns a new session with the facts added."], null)), $APP.cljs.core.with_meta(cljs$cst$3205$insert_BANG_, new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list($APP.cljs$cst$167$quote, 
  $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$148$_AMPERSAND_, cljs$cst$3093$facts], null))), $APP.cljs$cst$256$doc, 'To be executed within a rule\'s right-hand side, this inserts a new fact or facts into working memory.\n\n   Inserted facts are logical, in that if the support for the insertion is removed, the fact\n   will automatically be retracted. For instance, if there is a rule that inserts a "Cold" fact\n   if a "Temperature" fact is below a threshold, and the "Temperature" fact that triggered\n   the rule is retracted, the "Cold" fact the rule inserted is also retracted. This is the underlying\n   truth maintenance facillity.\n\n   This truth maintenance is also transitive: if a rule depends on some criteria to fire, and a\n   criterion becomes invalid, it may retract facts that invalidate other rules, which in turn\n   retract their conclusions. This way we can ensure that information inferred by rules is always\n   in a consistent state.', 
  $APP.cljs$cst$1377$top_fn, new $APP.cljs.core.PersistentArrayMap(null, 6, [$APP.cljs$cst$1378$variadic_QMARK_, !0, $APP.cljs$cst$553$fixed_arity, 0, $APP.cljs$cst$1379$max_fixed_arity, 0, $APP.cljs$cst$1380$method_params, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.list(cljs$cst$3093$facts)], null), $APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
  [$APP.cljs$cst$148$_AMPERSAND_, cljs$cst$3093$facts], null)), $APP.cljs$cst$1381$arglists_meta, $APP.cljs.core.list(null)], null)], null)), $APP.cljs.core.with_meta(cljs$cst$3206$fire_rules, new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list($APP.cljs$cst$167$quote, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3202$session], null), new $APP.cljs.core.PersistentVector(null, 2, 
  5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3202$session, $APP.cljs$cst$309$opts], null))), $APP.cljs$cst$256$doc, "Fires are rules in the given session. Once a rule is fired, it is labeled in a fired\n   state and will not be re-fired unless facts affecting the rule are added or retracted.\n\n   This function does not modify the given session to mark rules as fired. Instead, it returns\n   a new session in which the rules are marked as fired.\n\n   This take an additional map of options as a second argument.  Current options:\n\n   :cancelling true (EXPERIMENTAL, subject to change/removal.  Not supported in ClojureScript.):  \n    Simultaneously propagate insertions and retractions through the rules network, at every step using the insertion and retractions of equals facts to cancel each\n    other out and avoid operations deeper in the rules network.  The behavior of unconditional insertions and RHS (right-hand side) retractions\n    is undefined when this option is enabled and this option should not be used when calling fire-rules can result in these operations.\n    Note that this is purely a performance optimization and no guarantees are made at this time on whether a given rule's RHS will be called.\n    When this option is used rule RHS code that is executed shouldn't do anything that impacts state other than perform logical insertions.", 
  $APP.cljs$cst$1377$top_fn, new $APP.cljs.core.PersistentArrayMap(null, 6, [$APP.cljs$cst$1378$variadic_QMARK_, !1, $APP.cljs$cst$553$fixed_arity, 2, $APP.cljs$cst$1379$max_fixed_arity, 2, $APP.cljs$cst$1380$method_params, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3202$session], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
  [cljs$cst$3202$session, $APP.cljs$cst$309$opts], null)], null), $APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3202$session], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3202$session, $APP.cljs$cst$309$opts], null)), $APP.cljs$cst$1381$arglists_meta, $APP.cljs.core.list(null, null)], null)], null)), $APP.cljs.core.with_meta(cljs$cst$3207$insert, 
  new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list($APP.cljs$cst$167$quote, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3202$session, $APP.cljs$cst$148$_AMPERSAND_, cljs$cst$3093$facts], null))), $APP.cljs$cst$256$doc, "Inserts one or more facts into a working session. It does not modify the given\n   session, but returns a new session with the facts added.", $APP.cljs$cst$1377$top_fn, 
  new $APP.cljs.core.PersistentArrayMap(null, 6, [$APP.cljs$cst$1378$variadic_QMARK_, !0, $APP.cljs$cst$553$fixed_arity, 1, $APP.cljs$cst$1379$max_fixed_arity, 1, $APP.cljs$cst$1380$method_params, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.list(cljs$cst$3202$session, cljs$cst$3093$facts)], null), $APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
  [cljs$cst$3202$session, $APP.cljs$cst$148$_AMPERSAND_, cljs$cst$3093$facts], null)), $APP.cljs$cst$1381$arglists_meta, $APP.cljs.core.list(null)], null)], null)), $APP.cljs.core.with_meta(cljs$cst$3208$__GT_Rulebase, new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$2138$internal_ctor, !0, $APP.cljs$cst$2139$factory, $APP.cljs$cst$2145$positional, $APP.cljs$cst$273$arglists, $APP.cljs.core.list($APP.cljs$cst$167$quote, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 7, 
  5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3185$alpha_roots, cljs$cst$3186$beta_roots, cljs$cst$3187$productions, cljs$cst$3188$queries, cljs$cst$3189$production_nodes, cljs$cst$3190$query_nodes, cljs$cst$3191$id_to_node], null))), $APP.cljs$cst$256$doc, "Positional factory function for clara.rules/Rulebase."], null)), $APP.cljs.core.with_meta(cljs$cst$3209$retract_BANG_, new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list($APP.cljs$cst$167$quote, 
  $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$148$_AMPERSAND_, cljs$cst$3093$facts], null))), $APP.cljs$cst$256$doc, "To be executed within a rule's right-hand side, this retracts a fact or facts from the working memory.\n\n  Retracting facts from the right-hand side has slightly different semantics than insertion. As described\n  in the insert! documentation, inserts are logical and will automatically be retracted if the rule\n  that inserted them becomes false. This retract! function does not follow the inverse; retracted items\n  are simply removed, and not re-added if the rule that retracted them becomes false.\n\n  The reason for this is that retractions remove information from the knowledge base, and doing truth\n  maintenance over retractions would require holding onto all retracted items, which would be an issue\n  in some use cases. This retract! method is included to help with certain use cases, but unless you\n  have a specific need, it is better to simply do inserts on the rule's right-hand side, and let\n  Clara's underlying truth maintenance retract inserted items if their support becomes false.", 
  $APP.cljs$cst$1377$top_fn, new $APP.cljs.core.PersistentArrayMap(null, 6, [$APP.cljs$cst$1378$variadic_QMARK_, !0, $APP.cljs$cst$553$fixed_arity, 0, $APP.cljs$cst$1379$max_fixed_arity, 0, $APP.cljs$cst$1380$method_params, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.list(cljs$cst$3093$facts)], null), $APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
  [$APP.cljs$cst$148$_AMPERSAND_, cljs$cst$3093$facts], null)), $APP.cljs$cst$1381$arglists_meta, $APP.cljs.core.list(null)], null)], null)), $APP.cljs.core.with_meta(cljs$cst$3210$insert_all_BANG_, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list($APP.cljs$cst$167$quote, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3093$facts], null))), $APP.cljs$cst$256$doc, "Behaves the same as insert!, but accepts a sequence of facts to be inserted. This can be simpler and more efficient for\n   rules needing to insert multiple facts.\n\n   See the doc in insert! for details on insert behavior.."], 
  null)), $APP.cljs.core.with_meta($APP.cljs$cst$2411$query, new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list($APP.cljs$cst$167$quote, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3202$session, $APP.cljs$cst$2411$query, $APP.cljs$cst$148$_AMPERSAND_, $APP.cljs$cst$596$params], null))), $APP.cljs$cst$256$doc, 'Runs the given query with the optional given parameters against the session.\n   The optional parameters should be in map form. For example, a query call might be:\n\n   (query session get-by-last-name :?last-name "Jones")\n\n   The query itself may be either the var created by a defquery statement,\n   or the actual name of the query.\n   ', 
  $APP.cljs$cst$1377$top_fn, new $APP.cljs.core.PersistentArrayMap(null, 6, [$APP.cljs$cst$1378$variadic_QMARK_, !0, $APP.cljs$cst$553$fixed_arity, 2, $APP.cljs$cst$1379$max_fixed_arity, 2, $APP.cljs$cst$1380$method_params, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.list(cljs$cst$3202$session, $APP.cljs$cst$2411$query, $APP.cljs$cst$596$params)], null), $APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 
  4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3202$session, $APP.cljs$cst$2411$query, $APP.cljs$cst$148$_AMPERSAND_, $APP.cljs$cst$596$params], null)), $APP.cljs$cst$1381$arglists_meta, $APP.cljs.core.list(null)], null)], null)), $APP.cljs.core.with_meta(cljs$cst$3211$assemble_session, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list($APP.cljs$cst$167$quote, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
  [cljs$cst$3186$beta_roots, cljs$cst$3212$alpha_fns, cljs$cst$3187$productions, $APP.cljs$cst$1270$options], null))), $APP.cljs$cst$256$doc, "This is used by tools to create a session; most users won't use this function."], null)), $APP.cljs.core.with_meta(cljs$cst$3213$insert_all_unconditional_BANG_, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list($APP.cljs$cst$167$quote, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
  [cljs$cst$3093$facts], null))), $APP.cljs$cst$256$doc, "Behaves the same as insert-unconditional!, but accepts a sequence of facts to be inserted rather than individual facts.\n\n   See the doc in insert-unconditional! for details on uncondotional insert behavior."], null))], [new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$272$name, cljs$cst$3214$clara_DOT_rules_SLASH_map__GT_Rulebase, $APP.cljs$cst$108$val, clara.rules.map__GT_Rulebase, $APP.cljs$cst$2$meta, new $APP.cljs.core.PersistentArrayMap(null, 
  2, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3198$G__36913], null)), $APP.cljs$cst$256$doc, "Factory function for clara.rules/Rulebase, taking a map of keywords to field values."], null)], null), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$272$name, cljs$cst$3215$clara_DOT_rules_SLASH_accumulate, $APP.cljs$cst$108$val, clara.rules.accumulate, $APP.cljs$cst$2$meta, new $APP.cljs.core.PersistentArrayMap(null, 
  2, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$148$_AMPERSAND_, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1383$keys, new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3102$initial_value, cljs$cst$3104$reduce_fn, cljs$cst$3105$combine_fn, cljs$cst$3103$retract_fn, cljs$cst$3106$convert_return_fn], null), $APP.cljs$cst$265$as, 
  $APP.cljs$cst$1246$args], null)], null)), $APP.cljs$cst$256$doc, "DEPRECATED. Use clara.rules.accumulators/accum instead.\n\n  Creates a new accumulator based on the given properties:\n\n   * An initial-value to be used with the reduced operations.\n   * A reduce-fn that can be used with the Clojure Reducers library to reduce items.\n   * An optional combine-fn that can be used with the Clojure Reducers library to combine reduced items.\n   * An optional retract-fn that can remove a retracted fact from a previously reduced computation\n   * An optional convert-return-fn that converts the reduced data into something useful to the caller.\n     Simply uses identity by default.\n    "], 
  null)], null), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$272$name, cljs$cst$3216$clara_DOT_rules_SLASH_insert_unconditional_BANG_, $APP.cljs$cst$108$val, clara.rules.insert_unconditional_BANG_, $APP.cljs$cst$2$meta, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$148$_AMPERSAND_, cljs$cst$3093$facts], null)), $APP.cljs$cst$256$doc, 
  "To be executed within a rule's right-hand side, this inserts a new fact or facts into working memory.\n\n   This differs from insert! in that it is unconditional. The facts inserted will not be retracted\n   even if the rule activation doing the insert becomes false.  Most users should prefer the simple insert!\n   function as described above, but this function is available for use cases that don't wish to use\n   Clara's truth maintenance."], null)], null), new $APP.cljs.core.PersistentArrayMap(null, 
  3, [$APP.cljs$cst$272$name, cljs$cst$3217$clara_DOT_rules_SLASH_retract, $APP.cljs$cst$108$val, clara.rules.retract, $APP.cljs$cst$2$meta, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3202$session, $APP.cljs$cst$148$_AMPERSAND_, cljs$cst$3093$facts], null)), $APP.cljs$cst$256$doc, "Retracts a fact from a working session. It does not modify the given session,\n   but returns a new session with the facts retracted."], 
  null)], null), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$272$name, cljs$cst$3218$clara_DOT_rules_SLASH_insert_all, $APP.cljs$cst$108$val, clara.rules.insert_all, $APP.cljs$cst$2$meta, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3202$session, cljs$cst$3204$fact_seq], null)), $APP.cljs$cst$256$doc, "Inserts a sequence of facts into a working session. It does not modify the given\n   session, but returns a new session with the facts added."], 
  null)], null), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$272$name, cljs$cst$3219$clara_DOT_rules_SLASH_insert_BANG_, $APP.cljs$cst$108$val, clara.rules.insert_BANG_, $APP.cljs$cst$2$meta, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$148$_AMPERSAND_, cljs$cst$3093$facts], null)), $APP.cljs$cst$256$doc, 'To be executed within a rule\'s right-hand side, this inserts a new fact or facts into working memory.\n\n   Inserted facts are logical, in that if the support for the insertion is removed, the fact\n   will automatically be retracted. For instance, if there is a rule that inserts a "Cold" fact\n   if a "Temperature" fact is below a threshold, and the "Temperature" fact that triggered\n   the rule is retracted, the "Cold" fact the rule inserted is also retracted. This is the underlying\n   truth maintenance facillity.\n\n   This truth maintenance is also transitive: if a rule depends on some criteria to fire, and a\n   criterion becomes invalid, it may retract facts that invalidate other rules, which in turn\n   retract their conclusions. This way we can ensure that information inferred by rules is always\n   in a consistent state.'], 
  null)], null), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$272$name, cljs$cst$3220$clara_DOT_rules_SLASH_fire_rules, $APP.cljs$cst$108$val, clara.rules.fire_rules, $APP.cljs$cst$2$meta, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3202$session], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
  [cljs$cst$3202$session, $APP.cljs$cst$309$opts], null)), $APP.cljs$cst$256$doc, "Fires are rules in the given session. Once a rule is fired, it is labeled in a fired\n   state and will not be re-fired unless facts affecting the rule are added or retracted.\n\n   This function does not modify the given session to mark rules as fired. Instead, it returns\n   a new session in which the rules are marked as fired.\n\n   This take an additional map of options as a second argument.  Current options:\n\n   :cancelling true (EXPERIMENTAL, subject to change/removal.  Not supported in ClojureScript.):  \n    Simultaneously propagate insertions and retractions through the rules network, at every step using the insertion and retractions of equals facts to cancel each\n    other out and avoid operations deeper in the rules network.  The behavior of unconditional insertions and RHS (right-hand side) retractions\n    is undefined when this option is enabled and this option should not be used when calling fire-rules can result in these operations.\n    Note that this is purely a performance optimization and no guarantees are made at this time on whether a given rule's RHS will be called.\n    When this option is used rule RHS code that is executed shouldn't do anything that impacts state other than perform logical insertions."], 
  null)], null), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$272$name, cljs$cst$3221$clara_DOT_rules_SLASH_insert, $APP.cljs$cst$108$val, clara.rules.insert, $APP.cljs$cst$2$meta, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3202$session, $APP.cljs$cst$148$_AMPERSAND_, cljs$cst$3093$facts], null)), $APP.cljs$cst$256$doc, "Inserts one or more facts into a working session. It does not modify the given\n   session, but returns a new session with the facts added."], 
  null)], null), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$272$name, cljs$cst$3222$clara_DOT_rules_SLASH___GT_Rulebase, $APP.cljs$cst$108$val, clara.rules.__GT_Rulebase, $APP.cljs$cst$2$meta, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 7, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3185$alpha_roots, cljs$cst$3186$beta_roots, cljs$cst$3187$productions, cljs$cst$3188$queries, 
  cljs$cst$3189$production_nodes, cljs$cst$3190$query_nodes, cljs$cst$3191$id_to_node], null)), $APP.cljs$cst$256$doc, "Positional factory function for clara.rules/Rulebase."], null)], null), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$272$name, cljs$cst$3223$clara_DOT_rules_SLASH_retract_BANG_, $APP.cljs$cst$108$val, clara.rules.retract_BANG_, $APP.cljs$cst$2$meta, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 
  2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$148$_AMPERSAND_, cljs$cst$3093$facts], null)), $APP.cljs$cst$256$doc, "To be executed within a rule's right-hand side, this retracts a fact or facts from the working memory.\n\n  Retracting facts from the right-hand side has slightly different semantics than insertion. As described\n  in the insert! documentation, inserts are logical and will automatically be retracted if the rule\n  that inserted them becomes false. This retract! function does not follow the inverse; retracted items\n  are simply removed, and not re-added if the rule that retracted them becomes false.\n\n  The reason for this is that retractions remove information from the knowledge base, and doing truth\n  maintenance over retractions would require holding onto all retracted items, which would be an issue\n  in some use cases. This retract! method is included to help with certain use cases, but unless you\n  have a specific need, it is better to simply do inserts on the rule's right-hand side, and let\n  Clara's underlying truth maintenance retract inserted items if their support becomes false."], 
  null)], null), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$272$name, cljs$cst$3224$clara_DOT_rules_SLASH_insert_all_BANG_, $APP.cljs$cst$108$val, clara.rules.insert_all_BANG_, $APP.cljs$cst$2$meta, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3093$facts], null)), $APP.cljs$cst$256$doc, "Behaves the same as insert!, but accepts a sequence of facts to be inserted. This can be simpler and more efficient for\n   rules needing to insert multiple facts.\n\n   See the doc in insert! for details on insert behavior.."], 
  null)], null), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$272$name, cljs$cst$3225$clara_DOT_rules_SLASH_query, $APP.cljs$cst$108$val, clara.rules.query, $APP.cljs$cst$2$meta, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3202$session, $APP.cljs$cst$2411$query, $APP.cljs$cst$148$_AMPERSAND_, $APP.cljs$cst$596$params], null)), $APP.cljs$cst$256$doc, 
  'Runs the given query with the optional given parameters against the session.\n   The optional parameters should be in map form. For example, a query call might be:\n\n   (query session get-by-last-name :?last-name "Jones")\n\n   The query itself may be either the var created by a defquery statement,\n   or the actual name of the query.\n   '], null)], null), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$272$name, cljs$cst$3226$clara_DOT_rules_SLASH_assemble_session, $APP.cljs$cst$108$val, 
  clara.rules.assemble_session, $APP.cljs$cst$2$meta, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3186$beta_roots, cljs$cst$3212$alpha_fns, cljs$cst$3187$productions, $APP.cljs$cst$1270$options], null)), $APP.cljs$cst$256$doc, "This is used by tools to create a session; most users won't use this function."], null)], null), new $APP.cljs.core.PersistentArrayMap(null, 
  3, [$APP.cljs$cst$272$name, cljs$cst$3227$clara_DOT_rules_SLASH_insert_all_unconditional_BANG_, $APP.cljs$cst$108$val, clara.rules.insert_all_unconditional_BANG_, $APP.cljs$cst$2$meta, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$3093$facts], null)), $APP.cljs$cst$256$doc, "Behaves the same as insert-unconditional!, but accepts a sequence of facts to be inserted rather than individual facts.\n\n   See the doc in insert-unconditional! for details on uncondotional insert behavior."], 
  null)], null)]), $APP.sci.core.create_ns.cljs$core$IFn$_invoke$arity$2(cljs$cst$3196$clara_DOT_rules, null))], null)], null));
};
$APP.scittle.clara_rules.init();

}).call(this);