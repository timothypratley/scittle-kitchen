globalThis.datascript = {};(function(){
'use strict';
var cljs$cst$4668$datascript_DOT_core_SLASH_squuid, cljs$cst$4633$meta73268, cljs$cst$4613$qwhere, cljs$cst$4635$meta73279, cljs$cst$4439$db_DOT_unique_SLASH_identity, cljs$cst$4458$pull_patterns, cljs$cst$4689$datascript_DOT_db_SLASH_IDatom, cljs$cst$4498$transact_SLASH_upsert, cljs$cst$4687$datom_added, cljs$cst$4677$datascript_DOT_core_SLASH_filter, cljs$cst$4597$rule_vars, cljs$cst$4658$datascript_DOT_core_SLASH_q, cljs$cst$4520$db_last_stored, cljs$cst$4590$parser_SLASH_find, cljs$cst$4568$PullPattern, 
cljs$cst$4501$datascript_DOT_db_SLASH_tx_redundant, cljs$cst$4561$visitor, cljs$cst$4551$last_attr, cljs$cst$4500$conflict, cljs$cst$4675$datascript_DOT_core_SLASH_touch, cljs$cst$4583$free, cljs$cst$4654$datascript_DOT_core_SLASH_with, cljs$cst$4688$datascript_DOT_db_SLASH_datom_added, cljs$cst$4555$last_attr, cljs$cst$4489$lookup_ref_SLASH_syntax, cljs$cst$4669$datascript_DOT_core_SLASH_db, cljs$cst$4461$_index_range, cljs$cst$4628$used_args, cljs$cst$4608$qwhere, cljs$cst$4604$qfind, cljs$cst$4627$prefix_context, 
cljs$cst$4497$datascript_DOT_db_SLASH_queued_tuples, cljs$cst$4681$datascript_DOT_core_SLASH_pull, cljs$cst$4598$parser_SLASH_where, cljs$cst$4529$clojure_DOT_string_SLASH_starts_with_QMARK_, cljs$cst$4502$db_DOT_fn_SLASH_retractEntity, cljs$cst$4548$ref_QMARK_, cljs$cst$4492$entity_id_SLASH_missing, cljs$cst$4569$db_DOT_pull_SLASH_reverse, cljs$cst$4467$unfiltered_db, cljs$cst$4594$parser_SLASH_with, cljs$cst$4618$rels, cljs$cst$4602$branches, cljs$cst$4533$clojure_DOT_string_SLASH_ends_with_QMARK_, 
cljs$cst$4459$pull_attrs, cljs$cst$4691$datascript_DOT_db_SLASH_datom_tx, cljs$cst$4479$init_db, cljs$cst$4695$scittle_DOT_datascript_SLASH_datascript, cljs$cst$4558$parser_SLASH_pull, cljs$cst$4643$reset_conn_BANG_, cljs$cst$4596$rule_vars, cljs$cst$4476$db_SLASH_valueType, cljs$cst$4528$_differ_QMARK_, cljs$cst$4471$db_SLASH_isComponent, cljs$cst$4537$recursive_QMARK_, cljs$cst$4629$pending_guards, cljs$cst$4615$return_map, cljs$cst$4621$tuples, cljs$cst$4601$branches, cljs$cst$4535$clojure_DOT_string_SLASH_blank_QMARK_, 
cljs$cst$4577$validate_schema, cljs$cst$4664$datascript_DOT_core_SLASH_index_range, cljs$cst$4612$qin, cljs$cst$4462$attribute, cljs$cst$4556$reverse_attrs, cljs$cst$4693$datascript_DOT_db_SLASH_DB, cljs$cst$4694$datascript_DOT_db_SLASH_Datom, cljs$cst$4565$recursion_limits, cljs$cst$4473$db_DOT_type_SLASH_tuple, cljs$cst$4455$max_eid, cljs$cst$4436$ref_type, cljs$cst$4511$datascript_DOT_db_SLASH_flush_tuples, cljs$cst$4487$tx_meta, cljs$cst$4482$tx_meta, cljs$cst$4531$ground, cljs$cst$4630$datascript_SLASH_Datom, 
cljs$cst$4682$datascript_DOT_core_SLASH_create_conn, cljs$cst$4488$entity_id, cljs$cst$4486$tempids, cljs$cst$4505$db_SLASH_cas, cljs$cst$4672$datascript_DOT_core_SLASH_from_serializable, cljs$cst$4541$ref_QMARK_, cljs$cst$4609$qfind, cljs$cst$4622$tuples, cljs$cst$4532$_BANG__EQ_, cljs$cst$4617$rels, cljs$cst$4674$datascript_DOT_core_SLASH_init_db, cljs$cst$4494$datom, cljs$cst$4493$transact_SLASH_unique, cljs$cst$4515$old, cljs$cst$4429$key_gen, cljs$cst$4567$db_DOT_pull_SLASH_attr, cljs$cst$4665$datascript_DOT_core_SLASH_conn_from_db, 
cljs$cst$4650$init_db, cljs$cst$4632$db_DOT_part_SLASH_tx, cljs$cst$4610$qwith, cljs$cst$4585$variable, cljs$cst$4474$db_SLASH_attrTuples, cljs$cst$4542$component_QMARK_, cljs$cst$4589$aggregate, cljs$cst$4588$parser_SLASH_binding, cljs$cst$4686$datascript_DOT_db_SLASH_datom_from_reader, cljs$cst$4427$key_value, cljs$cst$4663$DB, cljs$cst$4496$datascript_DOT_db_SLASH_reverse_tempids, cljs$cst$4443$components, cljs$cst$4557$wildcard_QMARK_, cljs$cst$4435$branching_factor, cljs$cst$4457$rschema, cljs$cst$4599$not_join, 
cljs$cst$4605$qwith, cljs$cst$4584$parser_SLASH_rule_vars, cljs$cst$4676$datascript_DOT_core_SLASH_tx0, cljs$cst$4475$schema_SLASH_validation, cljs$cst$4428$gen_key, cljs$cst$4661$Datom, cljs$cst$4684$datascript_DOT_db_SLASH_db_from_reader, cljs$cst$4638$listen_BANG_, cljs$cst$4640$db_with, cljs$cst$4504$db_DOT_fn_SLASH_call, cljs$cst$4636$datascript_DOT_core, cljs$cst$4626$prefix_clauses, cljs$cst$4651$touch, cljs$cst$4611$qreturn_map, cljs$cst$4634$realized, cljs$cst$4442$index_access, cljs$cst$4607$qin, 
cljs$cst$4559$fragment, cljs$cst$4518$transaction_SLASH_filtered, cljs$cst$4509$datascript_DOT_db_SLASH_internal, cljs$cst$4484$db_after, cljs$cst$4546$reverse_QMARK_, cljs$cst$4631$datascript_SLASH_DB, cljs$cst$4581$free, cljs$cst$4576$datascript_DOT_db, cljs$cst$4554$first_attr, cljs$cst$4481$resolve_datom, cljs$cst$4525$get_else, cljs$cst$4657$Entity, cljs$cst$4440$incomparable, cljs$cst$4690$datom_tx, cljs$cst$4616$strs, cljs$cst$4478$db_DOT_cardinality_SLASH_one, cljs$cst$4606$qreturn_map, cljs$cst$4490$lookup_ref_SLASH_unique, 
cljs$cst$4603$parser_SLASH_rule, cljs$cst$4553$wildcard_QMARK_, cljs$cst$4433$pointers, cljs$cst$4614$parser_SLASH_query, cljs$cst$4430$gen, cljs$cst$4513$db_SLASH_fn, cljs$cst$4536$recursion_limit, cljs$cst$4549$component_QMARK_, cljs$cst$4432$meta65533, cljs$cst$4666$datascript_DOT_core_SLASH_reset_conn_BANG_, cljs$cst$4507$db_DOT_fn_SLASH_retractAttribute, cljs$cst$4670$datascript_DOT_core_SLASH_serializable, cljs$cst$4469$db_DOT_unique_SLASH_value, cljs$cst$4600$or_join, cljs$cst$4683$db_from_reader, 
cljs$cst$4530$missing_QMARK_, cljs$cst$4667$datascript_DOT_core_SLASH_transact_BANG_, cljs$cst$4595$parser_SLASH_in, cljs$cst$4434$cmp, cljs$cst$4540$multival_QMARK_, cljs$cst$4544$recursion_limit, cljs$cst$4485$tx_data, cljs$cst$4519$tx_tail, cljs$cst$4460$datascript_SLASH_db, cljs$cst$4573$thaw_fn, cljs$cst$4499$assertion, cljs$cst$4480$datoms, cljs$cst$4591$pull, cljs$cst$4483$db_before, cljs$cst$4671$datascript_DOT_core_SLASH_conn_from_datoms, cljs$cst$4527$untuple, cljs$cst$4679$c0, cljs$cst$4641$index_range, 
cljs$cst$4578$serialize, cljs$cst$4472$db_SLASH_tupleAttrs, cljs$cst$4574$thaw_kw, cljs$cst$4623$query_SLASH_binding, cljs$cst$4562$datoms, cljs$cst$4514$transact_SLASH_cas, cljs$cst$4506$db_SLASH_retractEntity, cljs$cst$4659$datascript_DOT_core_SLASH_listen_BANG_, cljs$cst$4620$rules, cljs$cst$4572$freeze_kw, cljs$cst$4468$db_SLASH_index, cljs$cst$4571$freeze_fn, cljs$cst$4662$datascript_DOT_core_SLASH_db_with, cljs$cst$4491$entity_id_SLASH_syntax, cljs$cst$4586$variable, cljs$cst$4637$pull_many, 
cljs$cst$4642$conn_from_db, cljs$cst$4579$parser_SLASH_rule_var, cljs$cst$4503$datascript_DOT_db_SLASH_upserted_tempids, cljs$cst$4547$multival_QMARK_, cljs$cst$4673$datascript_DOT_core_SLASH_empty_db, cljs$cst$4550$first_attr, cljs$cst$4560$visitor, cljs$cst$4521$datascript_DOT_impl_DOT_entity_SLASH_nf, cljs$cst$4524$query_SLASH_where, cljs$cst$4566$recursion_limits, cljs$cst$4575$datascript_DOT_db_SLASH_validate_schema, cljs$cst$4510$datascript_DOT_db_SLASH_value_tempids, cljs$cst$4692$datascript_DOT_db_SLASH_datom, 
cljs$cst$4580$required, cljs$cst$4570$db_DOT_pull_SLASH_wildcard, cljs$cst$4449$pull_patterns, cljs$cst$4456$max_tx, cljs$cst$4516$expected, cljs$cst$4685$datom_from_reader, cljs$cst$4644$transact_BANG_, cljs$cst$4450$pull_attrs, cljs$cst$4526$get_some, cljs$cst$4466$unfiltered_db, cljs$cst$4522$eid, cljs$cst$4454$avet, cljs$cst$4653$create_conn, cljs$cst$4678$datascript_DOT_core_SLASH_datoms, cljs$cst$4656$datascript_DOT_core_SLASH_entity, cljs$cst$4552$reverse_attrs, cljs$cst$4625$got, cljs$cst$4624$query_SLASH_inputs, 
cljs$cst$4477$db_SLASH_cardinality, cljs$cst$4646$serializable, cljs$cst$4660$datascript_DOT_core_SLASH_datom, cljs$cst$4582$required, cljs$cst$4495$db_SLASH_current_tx, cljs$cst$4452$eavt, cljs$cst$4523$touched, cljs$cst$4645$squuid, cljs$cst$4431$_STAR_impl, cljs$cst$4647$conn_from_datoms, cljs$cst$4453$aevt, cljs$cst$4534$clojure_DOT_string_SLASH_includes_QMARK_, cljs$cst$4649$empty_db, cljs$cst$4464$transact_SLASH_syntax, cljs$cst$4508$db_DOT_fn_SLASH_cas, cljs$cst$4652$tx0, cljs$cst$4648$from_serializable, 
cljs$cst$4564$PullAttr, cljs$cst$4655$datascript_DOT_core_SLASH_pull_many;
cljs$cst$4668$datascript_DOT_core_SLASH_squuid = new $APP.cljs.core.Symbol("datascript.core", "squuid", "datascript.core/squuid", -408746813, null);
cljs$cst$4633$meta73268 = new $APP.cljs.core.Symbol(null, "meta73268", "meta73268", 2083015358, null);
cljs$cst$4613$qwhere = new $APP.cljs.core.Symbol(null, "qwhere", "qwhere", -4535851, null);
cljs$cst$4635$meta73279 = new $APP.cljs.core.Symbol(null, "meta73279", "meta73279", 1081992242, null);
cljs$cst$4439$db_DOT_unique_SLASH_identity = new $APP.cljs.core.Keyword("db.unique", "identity", "db.unique/identity", 1675950722);
cljs$cst$4458$pull_patterns = new $APP.cljs.core.Symbol(null, "pull-patterns", "pull-patterns", 1296836479, null);
cljs$cst$4689$datascript_DOT_db_SLASH_IDatom = new $APP.cljs.core.Symbol("datascript.db", "IDatom", "datascript.db/IDatom", 293960966, null);
cljs$cst$4498$transact_SLASH_upsert = new $APP.cljs.core.Keyword("transact", "upsert", "transact/upsert", 412688078);
cljs$cst$4687$datom_added = new $APP.cljs.core.Symbol(null, "datom-added", "datom-added", -363961980, null);
cljs$cst$4677$datascript_DOT_core_SLASH_filter = new $APP.cljs.core.Symbol("datascript.core", "filter", "datascript.core/filter", -1276765471, null);
cljs$cst$4597$rule_vars = new $APP.cljs.core.Symbol(null, "rule-vars", "rule-vars", -988463249, null);
cljs$cst$4658$datascript_DOT_core_SLASH_q = new $APP.cljs.core.Symbol("datascript.core", "q", "datascript.core/q", 2106686416, null);
cljs$cst$4520$db_last_stored = new $APP.cljs.core.Keyword(null, "db-last-stored", "db-last-stored", -2068760702);
cljs$cst$4590$parser_SLASH_find = new $APP.cljs.core.Keyword("parser", "find", "parser/find", -801023103);
cljs$cst$4568$PullPattern = new $APP.cljs.core.Symbol(null, "PullPattern", "PullPattern", 1378528189, null);
cljs$cst$4501$datascript_DOT_db_SLASH_tx_redundant = new $APP.cljs.core.Keyword("datascript.db", "tx-redundant", "datascript.db/tx-redundant", -1117921977);
cljs$cst$4561$visitor = new $APP.cljs.core.Symbol(null, "visitor", "visitor", 613665662, null);
cljs$cst$4551$last_attr = new $APP.cljs.core.Keyword(null, "last-attr", "last-attr", -526000708);
cljs$cst$4500$conflict = new $APP.cljs.core.Keyword(null, "conflict", "conflict", 1978796605);
cljs$cst$4675$datascript_DOT_core_SLASH_touch = new $APP.cljs.core.Symbol("datascript.core", "touch", "datascript.core/touch", 632058772, null);
cljs$cst$4583$free = new $APP.cljs.core.Symbol(null, "free", "free", -1853071441, null);
cljs$cst$4654$datascript_DOT_core_SLASH_with = new $APP.cljs.core.Symbol("datascript.core", "with", "datascript.core/with", -1124098173, null);
cljs$cst$4688$datascript_DOT_db_SLASH_datom_added = new $APP.cljs.core.Symbol("datascript.db", "datom-added", "datascript.db/datom-added", -560586371, null);
cljs$cst$4555$last_attr = new $APP.cljs.core.Symbol(null, "last-attr", "last-attr", 1114530819, null);
cljs$cst$4489$lookup_ref_SLASH_syntax = new $APP.cljs.core.Keyword("lookup-ref", "syntax", "lookup-ref/syntax", -317304012);
cljs$cst$4669$datascript_DOT_core_SLASH_db = new $APP.cljs.core.Symbol("datascript.core", "db", "datascript.core/db", 667170070, null);
cljs$cst$4461$_index_range = new $APP.cljs.core.Symbol(null, "-index-range", "-index-range", 898114142, null);
cljs$cst$4628$used_args = new $APP.cljs.core.Keyword(null, "used-args", "used-args", 23596256);
cljs$cst$4608$qwhere = new $APP.cljs.core.Keyword(null, "qwhere", "qwhere", -1645067378);
cljs$cst$4604$qfind = new $APP.cljs.core.Keyword(null, "qfind", "qfind", 1529332972);
cljs$cst$4627$prefix_context = new $APP.cljs.core.Keyword(null, "prefix-context", "prefix-context", -1269613591);
cljs$cst$4497$datascript_DOT_db_SLASH_queued_tuples = new $APP.cljs.core.Keyword("datascript.db", "queued-tuples", "datascript.db/queued-tuples", -762852029);
cljs$cst$4681$datascript_DOT_core_SLASH_pull = new $APP.cljs.core.Symbol("datascript.core", "pull", "datascript.core/pull", -1213970902, null);
cljs$cst$4598$parser_SLASH_where = new $APP.cljs.core.Keyword("parser", "where", "parser/where", -966053850);
cljs$cst$4529$clojure_DOT_string_SLASH_starts_with_QMARK_ = new $APP.cljs.core.Symbol("clojure.string", "starts-with?", "clojure.string/starts-with?", 656256322, null);
cljs$cst$4502$db_DOT_fn_SLASH_retractEntity = new $APP.cljs.core.Keyword("db.fn", "retractEntity", "db.fn/retractEntity", -1423535441);
cljs$cst$4548$ref_QMARK_ = new $APP.cljs.core.Symbol(null, "ref?", "ref?", -721742049, null);
cljs$cst$4492$entity_id_SLASH_missing = new $APP.cljs.core.Keyword("entity-id", "missing", "entity-id/missing", 1234588374);
cljs$cst$4569$db_DOT_pull_SLASH_reverse = new $APP.cljs.core.Keyword("db.pull", "reverse", "db.pull/reverse", 1999788297);
cljs$cst$4467$unfiltered_db = new $APP.cljs.core.Symbol(null, "unfiltered-db", "unfiltered-db", 276811136, null);
cljs$cst$4594$parser_SLASH_with = new $APP.cljs.core.Keyword("parser", "with", "parser/with", -386255821);
cljs$cst$4618$rels = new $APP.cljs.core.Symbol(null, "rels", "rels", -884248584, null);
cljs$cst$4602$branches = new $APP.cljs.core.Symbol(null, "branches", "branches", 400194259, null);
cljs$cst$4533$clojure_DOT_string_SLASH_ends_with_QMARK_ = new $APP.cljs.core.Symbol("clojure.string", "ends-with?", "clojure.string/ends-with?", -745964149, null);
$APP.cljs$cst$4441$avet = new $APP.cljs.core.Keyword(null, "avet", "avet", 1383857032);
cljs$cst$4459$pull_attrs = new $APP.cljs.core.Symbol(null, "pull-attrs", "pull-attrs", 665668350, null);
cljs$cst$4691$datascript_DOT_db_SLASH_datom_tx = new $APP.cljs.core.Symbol("datascript.db", "datom-tx", "datascript.db/datom-tx", 2084964209, null);
cljs$cst$4479$init_db = new $APP.cljs.core.Keyword(null, "init-db", "init-db", 1595181278);
cljs$cst$4695$scittle_DOT_datascript_SLASH_datascript = new $APP.cljs.core.Keyword("scittle.datascript", "datascript", "scittle.datascript/datascript", -2101343946);
cljs$cst$4558$parser_SLASH_pull = new $APP.cljs.core.Keyword("parser", "pull", "parser/pull", -2147427204);
cljs$cst$4643$reset_conn_BANG_ = new $APP.cljs.core.Symbol(null, "reset-conn!", "reset-conn!", 1315177148, null);
cljs$cst$4596$rule_vars = new $APP.cljs.core.Keyword(null, "rule-vars", "rule-vars", 1665972520);
cljs$cst$4476$db_SLASH_valueType = new $APP.cljs.core.Keyword("db", "valueType", "db/valueType", 1827971944);
$APP.cljs$cst$4445$aevt = new $APP.cljs.core.Keyword(null, "aevt", "aevt", -585148059);
cljs$cst$4528$_differ_QMARK_ = new $APP.cljs.core.Symbol(null, "-differ?", "-differ?", 1465687357, null);
cljs$cst$4471$db_SLASH_isComponent = new $APP.cljs.core.Keyword("db", "isComponent", "db/isComponent", 423352398);
cljs$cst$4537$recursive_QMARK_ = new $APP.cljs.core.Keyword(null, "recursive?", "recursive?", 1340075244);
cljs$cst$4629$pending_guards = new $APP.cljs.core.Keyword(null, "pending-guards", "pending-guards", -1255527308);
cljs$cst$4615$return_map = new $APP.cljs.core.Keyword(null, "return-map", "return-map", 1620104901);
cljs$cst$4621$tuples = new $APP.cljs.core.Keyword(null, "tuples", "tuples", -676032639);
cljs$cst$4601$branches = new $APP.cljs.core.Keyword(null, "branches", "branches", -1240337268);
cljs$cst$4535$clojure_DOT_string_SLASH_blank_QMARK_ = new $APP.cljs.core.Symbol("clojure.string", "blank?", "clojure.string/blank?", 1772874244, null);
cljs$cst$4577$validate_schema = new $APP.cljs.core.Symbol(null, "validate-schema", "validate-schema", 758884380, null);
$APP.cljs$cst$4444$eavt = new $APP.cljs.core.Keyword(null, "eavt", "eavt", -666437073);
cljs$cst$4664$datascript_DOT_core_SLASH_index_range = new $APP.cljs.core.Symbol("datascript.core", "index-range", "datascript.core/index-range", -1484576383, null);
cljs$cst$4612$qin = new $APP.cljs.core.Symbol(null, "qin", "qin", -1281784618, null);
cljs$cst$4462$attribute = new $APP.cljs.core.Keyword(null, "attribute", "attribute", -2074029119);
cljs$cst$4556$reverse_attrs = new $APP.cljs.core.Symbol(null, "reverse-attrs", "reverse-attrs", -2024338067, null);
cljs$cst$4693$datascript_DOT_db_SLASH_DB = new $APP.cljs.core.Symbol("datascript.db", "DB", "datascript.db/DB", 348347258, null);
cljs$cst$4694$datascript_DOT_db_SLASH_Datom = new $APP.cljs.core.Symbol("datascript.db", "Datom", "datascript.db/Datom", 1951800754, null);
cljs$cst$4565$recursion_limits = new $APP.cljs.core.Keyword(null, "recursion-limits", "recursion-limits", 1762857814);
cljs$cst$4473$db_DOT_type_SLASH_tuple = new $APP.cljs.core.Keyword("db.type", "tuple", "db.type/tuple", 938234914);
cljs$cst$4455$max_eid = new $APP.cljs.core.Symbol(null, "max-eid", "max-eid", -519567694, null);
cljs$cst$4436$ref_type = new $APP.cljs.core.Keyword(null, "ref-type", "ref-type", -1367328851);
cljs$cst$4511$datascript_DOT_db_SLASH_flush_tuples = new $APP.cljs.core.Keyword("datascript.db", "flush-tuples", "datascript.db/flush-tuples", -797350002);
cljs$cst$4487$tx_meta = new $APP.cljs.core.Symbol(null, "tx-meta", "tx-meta", -1495152575, null);
cljs$cst$4482$tx_meta = new $APP.cljs.core.Keyword(null, "tx-meta", "tx-meta", 1159283194);
cljs$cst$4531$ground = new $APP.cljs.core.Symbol(null, "ground", "ground", -1460862835, null);
cljs$cst$4630$datascript_SLASH_Datom = new $APP.cljs.core.Symbol("datascript", "Datom", "datascript/Datom", -901340080, null);
cljs$cst$4682$datascript_DOT_core_SLASH_create_conn = new $APP.cljs.core.Symbol("datascript.core", "create-conn", "datascript.core/create-conn", -768042587, null);
cljs$cst$4488$entity_id = new $APP.cljs.core.Keyword(null, "entity-id", "entity-id", 1485898093);
cljs$cst$4486$tempids = new $APP.cljs.core.Symbol(null, "tempids", "tempids", -886926680, null);
cljs$cst$4505$db_SLASH_cas = new $APP.cljs.core.Keyword("db", "cas", "db/cas", -451542322);
cljs$cst$4672$datascript_DOT_core_SLASH_from_serializable = new $APP.cljs.core.Symbol("datascript.core", "from-serializable", "datascript.core/from-serializable", -1560031101, null);
$APP.cljs$cst$4447$max_tx = new $APP.cljs.core.Keyword(null, "max-tx", "max-tx", 1119558339);
cljs$cst$4541$ref_QMARK_ = new $APP.cljs.core.Keyword(null, "ref?", "ref?", 1932693720);
cljs$cst$4609$qfind = new $APP.cljs.core.Symbol(null, "qfind", "qfind", -1125102797, null);
cljs$cst$4622$tuples = new $APP.cljs.core.Symbol(null, "tuples", "tuples", 964498888, null);
cljs$cst$4532$_BANG__EQ_ = new $APP.cljs.core.Symbol(null, "!\x3d", "!\x3d", -201205829, null);
cljs$cst$4617$rels = new $APP.cljs.core.Keyword(null, "rels", "rels", 1770187185);
cljs$cst$4674$datascript_DOT_core_SLASH_init_db = new $APP.cljs.core.Symbol("datascript.core", "init-db", "datascript.core/init-db", 1493526573, null);
cljs$cst$4494$datom = new $APP.cljs.core.Keyword(null, "datom", "datom", -371556090);
cljs$cst$4493$transact_SLASH_unique = new $APP.cljs.core.Keyword("transact", "unique", "transact/unique", -940992320);
cljs$cst$4515$old = new $APP.cljs.core.Keyword(null, "old", "old", -1825222690);
cljs$cst$4429$key_gen = new $APP.cljs.core.Symbol(null, "key-gen", "key-gen", 415199034, null);
cljs$cst$4567$db_DOT_pull_SLASH_attr = new $APP.cljs.core.Keyword("db.pull", "attr", "db.pull/attr", -533298746);
cljs$cst$4665$datascript_DOT_core_SLASH_conn_from_db = new $APP.cljs.core.Symbol("datascript.core", "conn-from-db", "datascript.core/conn-from-db", 1590561228, null);
cljs$cst$4650$init_db = new $APP.cljs.core.Symbol(null, "init-db", "init-db", -1059254491, null);
cljs$cst$4632$db_DOT_part_SLASH_tx = new $APP.cljs.core.Keyword("db.part", "tx", "db.part/tx", -1480923213);
cljs$cst$4610$qwith = new $APP.cljs.core.Symbol(null, "qwith", "qwith", 1594722135, null);
cljs$cst$4585$variable = new $APP.cljs.core.Keyword(null, "variable", "variable", -281346492);
cljs$cst$4474$db_SLASH_attrTuples = new $APP.cljs.core.Keyword("db", "attrTuples", "db/attrTuples", 860541631);
cljs$cst$4542$component_QMARK_ = new $APP.cljs.core.Keyword(null, "component?", "component?", 407783990);
cljs$cst$4589$aggregate = new $APP.cljs.core.Symbol(null, "aggregate", "aggregate", -1142967327, null);
cljs$cst$4588$parser_SLASH_binding = new $APP.cljs.core.Keyword("parser", "binding", "parser/binding", -346395752);
cljs$cst$4686$datascript_DOT_db_SLASH_datom_from_reader = new $APP.cljs.core.Symbol("datascript.db", "datom-from-reader", "datascript.db/datom-from-reader", 2070683374, null);
cljs$cst$4427$key_value = new $APP.cljs.core.Symbol(null, "key-value", "key-value", 1605624688, null);
cljs$cst$4663$DB = new $APP.cljs.core.Symbol(null, "DB", "DB", 1622874957, null);
cljs$cst$4496$datascript_DOT_db_SLASH_reverse_tempids = new $APP.cljs.core.Keyword("datascript.db", "reverse-tempids", "datascript.db/reverse-tempids", 1165824950);
cljs$cst$4443$components = new $APP.cljs.core.Keyword(null, "components", "components", -1073188942);
cljs$cst$4557$wildcard_QMARK_ = new $APP.cljs.core.Symbol(null, "wildcard?", "wildcard?", 954487426, null);
cljs$cst$4435$branching_factor = new $APP.cljs.core.Keyword(null, "branching-factor", "branching-factor", 1903198601);
cljs$cst$4457$rschema = new $APP.cljs.core.Symbol(null, "rschema", "rschema", 444397473, null);
cljs$cst$4599$not_join = new $APP.cljs.core.Symbol(null, "not-join", "not-join", -645515756, null);
cljs$cst$4605$qwith = new $APP.cljs.core.Keyword(null, "qwith", "qwith", -45809392);
cljs$cst$4584$parser_SLASH_rule_vars = new $APP.cljs.core.Keyword("parser", "rule-vars", "parser/rule-vars", -1493174969);
cljs$cst$4676$datascript_DOT_core_SLASH_tx0 = new $APP.cljs.core.Symbol("datascript.core", "tx0", "datascript.core/tx0", 1432817831, null);
cljs$cst$4475$schema_SLASH_validation = new $APP.cljs.core.Keyword("schema", "validation", "schema/validation", 1178447161);
cljs$cst$4428$gen_key = new $APP.cljs.core.Symbol(null, "gen-key", "gen-key", 392707442, null);
cljs$cst$4661$Datom = new $APP.cljs.core.Symbol(null, "Datom", "Datom", 1208901035, null);
cljs$cst$4684$datascript_DOT_db_SLASH_db_from_reader = new $APP.cljs.core.Symbol("datascript.db", "db-from-reader", "datascript.db/db-from-reader", 266573302, null);
cljs$cst$4638$listen_BANG_ = new $APP.cljs.core.Symbol(null, "listen!", "listen!", -115577950, null);
cljs$cst$4640$db_with = new $APP.cljs.core.Symbol(null, "db-with", "db-with", 233242042, null);
cljs$cst$4504$db_DOT_fn_SLASH_call = new $APP.cljs.core.Keyword("db.fn", "call", "db.fn/call", -151594418);
cljs$cst$4636$datascript_DOT_core = new $APP.cljs.core.Symbol(null, "datascript.core", "datascript.core", -1034255346, null);
cljs$cst$4626$prefix_clauses = new $APP.cljs.core.Keyword(null, "prefix-clauses", "prefix-clauses", 1294180028);
cljs$cst$4651$touch = new $APP.cljs.core.Symbol(null, "touch", "touch", -1158163300, null);
cljs$cst$4611$qreturn_map = new $APP.cljs.core.Symbol(null, "qreturn-map", "qreturn-map", -813219775, null);
cljs$cst$4634$realized = new $APP.cljs.core.Symbol(null, "realized", "realized", 1487343404, null);
cljs$cst$4442$index_access = new $APP.cljs.core.Keyword(null, "index-access", "index-access", -1548960265);
cljs$cst$4607$qin = new $APP.cljs.core.Keyword(null, "qin", "qin", 1372651151);
cljs$cst$4559$fragment = new $APP.cljs.core.Keyword(null, "fragment", "fragment", 826775688);
cljs$cst$4518$transaction_SLASH_filtered = new $APP.cljs.core.Keyword("transaction", "filtered", "transaction/filtered", 1699706605);
cljs$cst$4509$datascript_DOT_db_SLASH_internal = new $APP.cljs.core.Keyword("datascript.db", "internal", "datascript.db/internal", -249301114);
$APP.cljs$cst$4448$rschema = new $APP.cljs.core.Keyword(null, "rschema", "rschema", -1196134054);
cljs$cst$4484$db_after = new $APP.cljs.core.Symbol(null, "db-after", "db-after", 1068646861, null);
cljs$cst$4546$reverse_QMARK_ = new $APP.cljs.core.Symbol(null, "reverse?", "reverse?", -32336947, null);
cljs$cst$4631$datascript_SLASH_DB = new $APP.cljs.core.Symbol("datascript", "DB", "datascript/DB", -487332776, null);
cljs$cst$4581$free = new $APP.cljs.core.Keyword(null, "free", "free", 801364328);
cljs$cst$4576$datascript_DOT_db = new $APP.cljs.core.Symbol(null, "datascript.db", "datascript.db", -444456104, null);
cljs$cst$4554$first_attr = new $APP.cljs.core.Symbol(null, "first-attr", "first-attr", -352508304, null);
cljs$cst$4481$resolve_datom = new $APP.cljs.core.Symbol(null, "resolve-datom", "resolve-datom", -294110827, null);
cljs$cst$4525$get_else = new $APP.cljs.core.Symbol(null, "get-else", "get-else", 1312024065, null);
cljs$cst$4657$Entity = new $APP.cljs.core.Symbol(null, "Entity", "Entity", 1953938502, null);
cljs$cst$4440$incomparable = new $APP.cljs.core.Keyword(null, "incomparable", "incomparable", 1634329662);
cljs$cst$4690$datom_tx = new $APP.cljs.core.Symbol(null, "datom-tx", "datom-tx", 1349109608, null);
cljs$cst$4616$strs = new $APP.cljs.core.Keyword(null, "strs", "strs", 1175537277);
cljs$cst$4478$db_DOT_cardinality_SLASH_one = new $APP.cljs.core.Keyword("db.cardinality", "one", "db.cardinality/one", 1428352190);
cljs$cst$4606$qreturn_map = new $APP.cljs.core.Keyword(null, "qreturn-map", "qreturn-map", 1841215994);
cljs$cst$4490$lookup_ref_SLASH_unique = new $APP.cljs.core.Keyword("lookup-ref", "unique", "lookup-ref/unique", -960647710);
cljs$cst$4603$parser_SLASH_rule = new $APP.cljs.core.Keyword("parser", "rule", "parser/rule", -464044566);
cljs$cst$4553$wildcard_QMARK_ = new $APP.cljs.core.Keyword(null, "wildcard?", "wildcard?", -686044101);
cljs$cst$4433$pointers = new $APP.cljs.core.Symbol(null, "pointers", "pointers", -1669058356, null);
cljs$cst$4614$parser_SLASH_query = new $APP.cljs.core.Keyword("parser", "query", "parser/query", 1877320671);
cljs$cst$4430$gen = new $APP.cljs.core.Symbol(null, "gen", "gen", 1783106829, null);
cljs$cst$4513$db_SLASH_fn = new $APP.cljs.core.Keyword("db", "fn", "db/fn", -1175261470);
cljs$cst$4536$recursion_limit = new $APP.cljs.core.Keyword(null, "recursion-limit", "recursion-limit", 52345639);
cljs$cst$4549$component_QMARK_ = new $APP.cljs.core.Symbol(null, "component?", "component?", 2048315517, null);
$APP.cljs$cst$4470$db_DOT_type_SLASH_ref = new $APP.cljs.core.Keyword("db.type", "ref", "db.type/ref", -1728373079);
cljs$cst$4432$meta65533 = new $APP.cljs.core.Symbol(null, "meta65533", "meta65533", -607965976, null);
cljs$cst$4666$datascript_DOT_core_SLASH_reset_conn_BANG_ = new $APP.cljs.core.Symbol("datascript.core", "reset-conn!", "datascript.core/reset-conn!", -458464444, null);
cljs$cst$4507$db_DOT_fn_SLASH_retractAttribute = new $APP.cljs.core.Keyword("db.fn", "retractAttribute", "db.fn/retractAttribute", 937402164);
cljs$cst$4670$datascript_DOT_core_SLASH_serializable = new $APP.cljs.core.Symbol("datascript.core", "serializable", "datascript.core/serializable", -630048076, null);
$APP.cljs$cst$4465$db_DOT_cardinality_SLASH_many = new $APP.cljs.core.Keyword("db.cardinality", "many", "db.cardinality/many", 772806234);
cljs$cst$4469$db_DOT_unique_SLASH_value = new $APP.cljs.core.Keyword("db.unique", "value", "db.unique/value", 276903088);
cljs$cst$4600$or_join = new $APP.cljs.core.Symbol(null, "or-join", "or-join", 591375469, null);
cljs$cst$4683$db_from_reader = new $APP.cljs.core.Symbol(null, "db-from-reader", "db-from-reader", 1527469533, null);
cljs$cst$4530$missing_QMARK_ = new $APP.cljs.core.Symbol(null, "missing?", "missing?", -1710383910, null);
cljs$cst$4667$datascript_DOT_core_SLASH_transact_BANG_ = new $APP.cljs.core.Symbol("datascript.core", "transact!", "datascript.core/transact!", 1506351773, null);
cljs$cst$4595$parser_SLASH_in = new $APP.cljs.core.Keyword("parser", "in", "parser/in", 1617442048);
cljs$cst$4434$cmp = new $APP.cljs.core.Keyword(null, "cmp", "cmp", 575646375);
cljs$cst$4540$multival_QMARK_ = new $APP.cljs.core.Keyword(null, "multival?", "multival?", 1072388383);
cljs$cst$4544$recursion_limit = new $APP.cljs.core.Symbol(null, "recursion-limit", "recursion-limit", 1692877166, null);
cljs$cst$4485$tx_data = new $APP.cljs.core.Symbol(null, "tx-data", "tx-data", -1720276008, null);
cljs$cst$4519$tx_tail = new $APP.cljs.core.Keyword(null, "tx-tail", "tx-tail", 1116487556);
cljs$cst$4460$datascript_SLASH_db = new $APP.cljs.core.Keyword("datascript", "db", "datascript/db", -1190971692);
cljs$cst$4573$thaw_fn = new $APP.cljs.core.Keyword(null, "thaw-fn", "thaw-fn", -240544261);
cljs$cst$4499$assertion = new $APP.cljs.core.Keyword(null, "assertion", "assertion", -1645134882);
cljs$cst$4480$datoms = new $APP.cljs.core.Keyword(null, "datoms", "datoms", -290874434);
cljs$cst$4591$pull = new $APP.cljs.core.Symbol(null, "pull", "pull", 779986722, null);
cljs$cst$4483$db_before = new $APP.cljs.core.Symbol(null, "db-before", "db-before", 1086839991, null);
cljs$cst$4671$datascript_DOT_core_SLASH_conn_from_datoms = new $APP.cljs.core.Symbol("datascript.core", "conn-from-datoms", "datascript.core/conn-from-datoms", 253878827, null);
cljs$cst$4527$untuple = new $APP.cljs.core.Symbol(null, "untuple", "untuple", -606149900, null);
cljs$cst$4679$c0 = new $APP.cljs.core.Symbol(null, "c0", "c0", 2105080311, null);
cljs$cst$4641$index_range = new $APP.cljs.core.Symbol(null, "index-range", "index-range", 1044940937, null);
$APP.cljs$cst$4639$datom = new $APP.cljs.core.Symbol(null, "datom", "datom", 1268975437, null);
cljs$cst$4578$serialize = new $APP.cljs.core.Keyword(null, "serialize", "serialize", -69216574);
cljs$cst$4472$db_SLASH_tupleAttrs = new $APP.cljs.core.Keyword("db", "tupleAttrs", "db/tupleAttrs", 250080092);
cljs$cst$4574$thaw_kw = new $APP.cljs.core.Keyword(null, "thaw-kw", "thaw-kw", 1076733097);
cljs$cst$4623$query_SLASH_binding = new $APP.cljs.core.Keyword("query", "binding", "query/binding", 698240489);
cljs$cst$4562$datoms = new $APP.cljs.core.Symbol(null, "datoms", "datoms", 1349657093, null);
cljs$cst$4514$transact_SLASH_cas = new $APP.cljs.core.Keyword("transact", "cas", "transact/cas", 816687170);
$APP.cljs$cst$4446$max_eid = new $APP.cljs.core.Keyword(null, "max-eid", "max-eid", 2134868075);
cljs$cst$4506$db_SLASH_retractEntity = new $APP.cljs.core.Keyword("db", "retractEntity", "db/retractEntity", -1452737935);
cljs$cst$4659$datascript_DOT_core_SLASH_listen_BANG_ = new $APP.cljs.core.Symbol("datascript.core", "listen!", "datascript.core/listen!", 1659161258, null);
cljs$cst$4620$rules = new $APP.cljs.core.Symbol(null, "rules", "rules", -1455523403, null);
cljs$cst$4572$freeze_kw = new $APP.cljs.core.Keyword(null, "freeze-kw", "freeze-kw", 391758233);
cljs$cst$4468$db_SLASH_index = new $APP.cljs.core.Keyword("db", "index", "db/index", -1531680669);
cljs$cst$4571$freeze_fn = new $APP.cljs.core.Keyword(null, "freeze-fn", "freeze-fn", -575885995);
cljs$cst$4662$datascript_DOT_core_SLASH_db_with = new $APP.cljs.core.Symbol("datascript.core", "db-with", "datascript.core/db-with", -1263574350, null);
$APP.cljs$cst$4438$db_SLASH_unique = new $APP.cljs.core.Keyword("db", "unique", "db/unique", 329396388);
cljs$cst$4491$entity_id_SLASH_syntax = new $APP.cljs.core.Keyword("entity-id", "syntax", "entity-id/syntax", 1921317045);
cljs$cst$4586$variable = new $APP.cljs.core.Symbol(null, "variable", "variable", 1359185035, null);
cljs$cst$4637$pull_many = new $APP.cljs.core.Symbol(null, "pull-many", "pull-many", 1857679657, null);
cljs$cst$4642$conn_from_db = new $APP.cljs.core.Symbol(null, "conn-from-db", "conn-from-db", -184109372, null);
cljs$cst$4579$parser_SLASH_rule_var = new $APP.cljs.core.Keyword("parser", "rule-var", "parser/rule-var", -1584354459);
cljs$cst$4503$datascript_DOT_db_SLASH_upserted_tempids = new $APP.cljs.core.Keyword("datascript.db", "upserted-tempids", "datascript.db/upserted-tempids", -1939648402);
cljs$cst$4547$multival_QMARK_ = new $APP.cljs.core.Symbol(null, "multival?", "multival?", -1582047386, null);
cljs$cst$4673$datascript_DOT_core_SLASH_empty_db = new $APP.cljs.core.Symbol("datascript.core", "empty-db", "datascript.core/empty-db", -807971396, null);
cljs$cst$4550$first_attr = new $APP.cljs.core.Keyword(null, "first-attr", "first-attr", -1993039831);
cljs$cst$4560$visitor = new $APP.cljs.core.Keyword(null, "visitor", "visitor", -1026865865);
cljs$cst$4521$datascript_DOT_impl_DOT_entity_SLASH_nf = new $APP.cljs.core.Keyword("datascript.impl.entity", "nf", "datascript.impl.entity/nf", -953741353);
cljs$cst$4524$query_SLASH_where = new $APP.cljs.core.Keyword("query", "where", "query/where", -1935159429);
cljs$cst$4566$recursion_limits = new $APP.cljs.core.Symbol(null, "recursion-limits", "recursion-limits", -891577955, null);
cljs$cst$4575$datascript_DOT_db_SLASH_validate_schema = new $APP.cljs.core.Symbol("datascript.db", "validate-schema", "datascript.db/validate-schema", -783030261, null);
cljs$cst$4510$datascript_DOT_db_SLASH_value_tempids = new $APP.cljs.core.Keyword("datascript.db", "value-tempids", "datascript.db/value-tempids", 244806162);
$APP.cljs$cst$4437$strong = new $APP.cljs.core.Keyword(null, "strong", "strong", 269529000);
cljs$cst$4692$datascript_DOT_db_SLASH_datom = new $APP.cljs.core.Symbol("datascript.db", "datom", "datascript.db/datom", 399198004, null);
cljs$cst$4580$required = new $APP.cljs.core.Keyword(null, "required", "required", 1807647006);
cljs$cst$4570$db_DOT_pull_SLASH_wildcard = new $APP.cljs.core.Keyword("db.pull", "wildcard", "db.pull/wildcard", 116316031);
cljs$cst$4449$pull_patterns = new $APP.cljs.core.Keyword(null, "pull-patterns", "pull-patterns", -343695048);
cljs$cst$4456$max_tx = new $APP.cljs.core.Symbol(null, "max-tx", "max-tx", -1534877430, null);
cljs$cst$4516$expected = new $APP.cljs.core.Keyword(null, "expected", "expected", 1583670997);
cljs$cst$4685$datom_from_reader = new $APP.cljs.core.Symbol(null, "datom-from-reader", "datom-from-reader", 1334075127, null);
cljs$cst$4644$transact_BANG_ = new $APP.cljs.core.Symbol(null, "transact!", "transact!", 817805717, null);
cljs$cst$4450$pull_attrs = new $APP.cljs.core.Keyword(null, "pull-attrs", "pull-attrs", -974863177);
cljs$cst$4526$get_some = new $APP.cljs.core.Symbol(null, "get-some", "get-some", 409442058, null);
cljs$cst$4466$unfiltered_db = new $APP.cljs.core.Keyword(null, "unfiltered-db", "unfiltered-db", -1363720391);
cljs$cst$4522$eid = new $APP.cljs.core.Symbol(null, "eid", "eid", -2094915839, null);
cljs$cst$4454$avet = new $APP.cljs.core.Symbol(null, "avet", "avet", -1270578737, null);
cljs$cst$4653$create_conn = new $APP.cljs.core.Symbol(null, "create-conn", "create-conn", 2071410861, null);
cljs$cst$4678$datascript_DOT_core_SLASH_datoms = new $APP.cljs.core.Symbol("datascript.core", "datoms", "datascript.core/datoms", 961250077, null);
cljs$cst$4656$datascript_DOT_core_SLASH_entity = new $APP.cljs.core.Symbol("datascript.core", "entity", "datascript.core/entity", -1406213973, null);
cljs$cst$4552$reverse_attrs = new $APP.cljs.core.Keyword(null, "reverse-attrs", "reverse-attrs", 630097702);
cljs$cst$4625$got = new $APP.cljs.core.Keyword(null, "got", "got", -1674745710);
cljs$cst$4624$query_SLASH_inputs = new $APP.cljs.core.Keyword("query", "inputs", "query/inputs", 1042810394);
cljs$cst$4477$db_SLASH_cardinality = new $APP.cljs.core.Keyword("db", "cardinality", "db/cardinality", -104975659);
cljs$cst$4646$serializable = new $APP.cljs.core.Symbol(null, "serializable", "serializable", 1941609404, null);
cljs$cst$4660$datascript_DOT_core_SLASH_datom = new $APP.cljs.core.Symbol("datascript.core", "datom", "datascript.core/datom", -1596234155, null);
cljs$cst$4582$required = new $APP.cljs.core.Symbol(null, "required", "required", -846788763, null);
cljs$cst$4495$db_SLASH_current_tx = new $APP.cljs.core.Keyword("db", "current-tx", "db/current-tx", 1600722132);
cljs$cst$4452$eavt = new $APP.cljs.core.Symbol(null, "eavt", "eavt", 974094454, null);
cljs$cst$4523$touched = new $APP.cljs.core.Symbol(null, "touched", "touched", 1031397108, null);
cljs$cst$4645$squuid = new $APP.cljs.core.Symbol(null, "squuid", "squuid", -1898207797, null);
cljs$cst$4431$_STAR_impl = new $APP.cljs.core.Symbol(null, "*impl", "*impl", 1858309677, null);
cljs$cst$4647$conn_from_datoms = new $APP.cljs.core.Symbol(null, "conn-from-datoms", "conn-from-datoms", -1502002909, null);
cljs$cst$4453$aevt = new $APP.cljs.core.Symbol(null, "aevt", "aevt", 1055383468, null);
cljs$cst$4534$clojure_DOT_string_SLASH_includes_QMARK_ = new $APP.cljs.core.Symbol("clojure.string", "includes?", "clojure.string/includes?", -1842146260, null);
cljs$cst$4649$empty_db = new $APP.cljs.core.Symbol(null, "empty-db", "empty-db", 1486862004, null);
cljs$cst$4464$transact_SLASH_syntax = new $APP.cljs.core.Keyword("transact", "syntax", "transact/syntax", -299207078);
cljs$cst$4508$db_DOT_fn_SLASH_cas = new $APP.cljs.core.Keyword("db.fn", "cas", "db.fn/cas", -379352172);
cljs$cst$4652$tx0 = new $APP.cljs.core.Symbol(null, "tx0", "tx0", -4656209, null);
cljs$cst$4648$from_serializable = new $APP.cljs.core.Symbol(null, "from-serializable", "from-serializable", 945516427, null);
cljs$cst$4564$PullAttr = new $APP.cljs.core.Symbol(null, "PullAttr", "PullAttr", 1557473458, null);
cljs$cst$4655$datascript_DOT_core_SLASH_pull_many = new $APP.cljs.core.Symbol("datascript.core", "pull-many", "datascript.core/pull-many", 394351057, null);
datascript = {lru:{}};
datascript.lru.LRU = function($key_value$$, $gen_key$$, $key_gen$$, $gen$$, $limit$$) {
  this.key_value = $key_value$$;
  this.gen_key = $gen_key$$;
  this.key_gen = $key_gen$$;
  this.gen = $gen$$;
  this.limit = $limit$$;
  this.cljs$lang$protocol_mask$partition0$ = 2147484416;
  this.cljs$lang$protocol_mask$partition1$ = 0;
};
datascript.lru.LRU.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($this$$$, $k$$, $v$$) {
  return datascript.lru.assoc_lru.cljs$core$IFn$_invoke$arity$3 ? datascript.lru.assoc_lru.cljs$core$IFn$_invoke$arity$3(this, $k$$, $v$$) : datascript.lru.assoc_lru.call(null, this, $k$$, $v$$);
};
datascript.lru.LRU.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($_$$, $k$$) {
  return $APP.cljs.core._contains_key_QMARK_(this.key_value, $k$$);
};
datascript.lru.LRU.prototype.cljs$core$ILookup$_lookup$arity$2 = function($_$$, $k$$) {
  return $APP.cljs.core._lookup(this.key_value, $k$$, null);
};
datascript.lru.LRU.prototype.cljs$core$ILookup$_lookup$arity$3 = function($_$$, $k$$, $nf$$) {
  return $APP.cljs.core._lookup(this.key_value, $k$$, $nf$$);
};
datascript.lru.LRU.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($_$$, $writer$$, $opts$$) {
  return $APP.cljs.core._pr_writer(this.key_value, $writer$$, $opts$$);
};
datascript.lru.LRU.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4427$key_value, cljs$cst$4428$gen_key, cljs$cst$4429$key_gen, cljs$cst$4430$gen, $APP.cljs$cst$2187$limit], null);
};
datascript.lru.LRU.cljs$lang$type = !0;
datascript.lru.LRU.cljs$lang$ctorStr = "datascript.lru/LRU";
datascript.lru.LRU.cljs$lang$ctorPrWriter = function($this__5310__auto__$$, $writer__5311__auto__$$, $opt__5312__auto__$$) {
  return $APP.cljs.core._write($writer__5311__auto__$$, "datascript.lru/LRU");
};
datascript.lru.__GT_LRU = function($key_value$$, $gen_key$$, $key_gen$$, $gen$$, $limit$$) {
  return new datascript.lru.LRU($key_value$$, $gen_key$$, $key_gen$$, $gen$$, $limit$$);
};
datascript.lru.assoc_lru = function($limit$jscomp$15_lru$$, $G__65515_k$$, $v$$) {
  var $key_value$$ = $limit$jscomp$15_lru$$.key_value, $gen_key$$ = $limit$jscomp$15_lru$$.gen_key, $key_gen$$ = $limit$jscomp$15_lru$$.key_gen, $gen$$ = $limit$jscomp$15_lru$$.gen;
  $limit$jscomp$15_lru$$ = $limit$jscomp$15_lru$$.limit;
  var $temp__5823__auto__$$ = $key_gen$$.cljs$core$IFn$_invoke$arity$2 ? $key_gen$$.cljs$core$IFn$_invoke$arity$2($G__65515_k$$, null) : $key_gen$$.call(null, $G__65515_k$$, null);
  if ($APP.cljs.core.truth_($temp__5823__auto__$$)) {
    return new datascript.lru.LRU($key_value$$, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($gen_key$$, $temp__5823__auto__$$), $gen$$, $G__65515_k$$), $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($key_gen$$, $G__65515_k$$, $gen$$), $gen$$ + 1, $limit$jscomp$15_lru$$);
  }
  $G__65515_k$$ = new datascript.lru.LRU($APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($key_value$$, $G__65515_k$$, $v$$), $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($gen_key$$, $gen$$, $G__65515_k$$), $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($key_gen$$, $G__65515_k$$, $gen$$), $gen$$ + 1, $limit$jscomp$15_lru$$);
  return datascript.lru.cleanup_lru.cljs$core$IFn$_invoke$arity$1 ? datascript.lru.cleanup_lru.cljs$core$IFn$_invoke$arity$1($G__65515_k$$) : datascript.lru.cleanup_lru.call(null, $G__65515_k$$);
};
datascript.lru.cleanup_lru = function($limit$jscomp$16_lru$$) {
  if ($APP.cljs.core.count($limit$jscomp$16_lru$$.key_value) > $limit$jscomp$16_lru$$.limit) {
    var $key_value$$ = $limit$jscomp$16_lru$$.key_value, $gen_key$$ = $limit$jscomp$16_lru$$.gen_key, $key_gen$$ = $limit$jscomp$16_lru$$.key_gen, $gen$$ = $limit$jscomp$16_lru$$.gen;
    $limit$jscomp$16_lru$$ = $limit$jscomp$16_lru$$.limit;
    var $k$$ = $APP.cljs.core.first($gen_key$$), $g$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($k$$, 0, null);
    $k$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($k$$, 1, null);
    return new datascript.lru.LRU($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($key_value$$, $k$$), $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($gen_key$$, $g$$), $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($key_gen$$, $k$$), $gen$$, $limit$jscomp$16_lru$$);
  }
  return $limit$jscomp$16_lru$$;
};
datascript.lru.lru = function($limit$$) {
  return new datascript.lru.LRU($APP.cljs.core.PersistentArrayMap.EMPTY, $APP.cljs.core.sorted_map(), $APP.cljs.core.PersistentArrayMap.EMPTY, 0, $limit$$);
};
datascript.lru.ICache = function() {
};
var datascript$lru$ICache$_get$dyn_65560 = function($this$$$, $key$$, $compute_fn$$) {
  var $m__5372__auto__$jscomp$676_m__5374__auto__$$ = datascript.lru._get[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
  if ($m__5372__auto__$jscomp$676_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$676_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$676_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($this$$$, $key$$, $compute_fn$$) : $m__5372__auto__$jscomp$676_m__5374__auto__$$.call(null, $this$$$, $key$$, $compute_fn$$);
  }
  $m__5372__auto__$jscomp$676_m__5374__auto__$$ = datascript.lru._get._;
  if ($m__5372__auto__$jscomp$676_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$676_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$676_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($this$$$, $key$$, $compute_fn$$) : $m__5372__auto__$jscomp$676_m__5374__auto__$$.call(null, $this$$$, $key$$, $compute_fn$$);
  }
  throw $APP.cljs.core.missing_protocol("ICache.-get", $this$$$);
};
datascript.lru._get = function($this$$$, $key$$, $compute_fn$$) {
  return $this$$$ != null && $this$$$.datascript$lru$ICache$_get$arity$3 != null ? $this$$$.datascript$lru$ICache$_get$arity$3($this$$$, $key$$, $compute_fn$$) : datascript$lru$ICache$_get$dyn_65560($this$$$, $key$$, $compute_fn$$);
};
datascript.lru.t_datascript$lru65532 = function($limit$$, $_STAR_impl$$, $meta65533$$) {
  this.limit = $limit$$;
  this._STAR_impl = $_STAR_impl$$;
  this.meta65533 = $meta65533$$;
  this.cljs$lang$protocol_mask$partition0$ = 393216;
  this.cljs$lang$protocol_mask$partition1$ = 0;
};
datascript.lru.t_datascript$lru65532.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($_65534$$, $meta65533__$1$$) {
  return new datascript.lru.t_datascript$lru65532(this.limit, this._STAR_impl, $meta65533__$1$$);
};
datascript.lru.t_datascript$lru65532.prototype.cljs$core$IMeta$_meta$arity$1 = function($_65534$$) {
  return this.meta65533;
};
datascript.lru.t_datascript$lru65532.prototype.datascript$lru$ICache$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.lru.t_datascript$lru65532.prototype.datascript$lru$ICache$_get$arity$3 = function($_$jscomp$1854_temp__5827__auto__$$, $key$$, $compute_fn$$) {
  $_$jscomp$1854_temp__5827__auto__$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.deref(this._STAR_impl), $key$$, null);
  if ($_$jscomp$1854_temp__5827__auto__$$ == null) {
    return $compute_fn$$ = $compute_fn$$.cljs$core$IFn$_invoke$arity$0 ? $compute_fn$$.cljs$core$IFn$_invoke$arity$0() : $compute_fn$$.call(null), $APP.cljs.core._vreset_BANG_(this._STAR_impl, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._deref(this._STAR_impl), $key$$, $compute_fn$$)), $compute_fn$$;
  }
  $APP.cljs.core._vreset_BANG_(this._STAR_impl, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._deref(this._STAR_impl), $key$$, $_$jscomp$1854_temp__5827__auto__$$));
  return $_$jscomp$1854_temp__5827__auto__$$;
};
datascript.lru.t_datascript$lru65532.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2187$limit, cljs$cst$4431$_STAR_impl, cljs$cst$4432$meta65533], null);
};
datascript.lru.t_datascript$lru65532.cljs$lang$type = !0;
datascript.lru.t_datascript$lru65532.cljs$lang$ctorStr = "datascript.lru/t_datascript$lru65532";
datascript.lru.t_datascript$lru65532.cljs$lang$ctorPrWriter = function($this__5310__auto__$$, $writer__5311__auto__$$, $opt__5312__auto__$$) {
  return $APP.cljs.core._write($writer__5311__auto__$$, "datascript.lru/t_datascript$lru65532");
};
datascript.lru.__GT_t_datascript$lru65532 = function($limit$$, $_STAR_impl$$, $meta65533$$) {
  return new datascript.lru.t_datascript$lru65532($limit$$, $_STAR_impl$$, $meta65533$$);
};
datascript.lru.cache = function($limit$$) {
  var $_STAR_impl$$ = $APP.cljs.core.volatile_BANG_(datascript.lru.lru($limit$$));
  return new datascript.lru.t_datascript$lru65532($limit$$, $_STAR_impl$$, $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.util = {};
datascript.util._STAR_debug_STAR_ = !1;
datascript.util.rand_bits = function($pow$$) {
  return $APP.cljs.core.rand_int(1 << $pow$$);
};
datascript.util.to_hex_string = function($n$jscomp$381_s$$, $l$$) {
  $n$jscomp$381_s$$ = $n$jscomp$381_s$$.toString(16);
  var $c$$ = $APP.cljs.core.count($n$jscomp$381_s$$);
  return $c$$ > $l$$ ? $APP.cljs.core.subs.cljs$core$IFn$_invoke$arity$3($n$jscomp$381_s$$, 0, $l$$) : $c$$ < $l$$ ? [$APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.apply.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.str, $APP.cljs.core.repeat.cljs$core$IFn$_invoke$arity$2($l$$ - $c$$, "0"))), $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($n$jscomp$381_s$$)].join("") : $n$jscomp$381_s$$;
};
datascript.util.squuid = function($var_args$$) {
  switch(arguments.length) {
    case 0:
      return datascript.util.squuid.cljs$core$IFn$_invoke$arity$0();
    case 1:
      return datascript.util.squuid.cljs$core$IFn$_invoke$arity$1(arguments[0]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.util.squuid.cljs$core$IFn$_invoke$arity$0 = function() {
  return datascript.util.squuid.cljs$core$IFn$_invoke$arity$1((new Date()).getTime());
};
datascript.util.squuid.cljs$core$IFn$_invoke$arity$1 = function($msec$$) {
  return $APP.cljs.core.uuid([$APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.util.to_hex_string($msec$$ / 1000 | 0, 8)), "-", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.util.to_hex_string(datascript.util.rand_bits(16), 4)), "-", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.util.to_hex_string(datascript.util.rand_bits(16) & 4095 | 16384, 4)), "-", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.util.to_hex_string(datascript.util.rand_bits(16) & 
  16383 | 32768, 4)), "-", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.util.to_hex_string(datascript.util.rand_bits(16), 4)), $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.util.to_hex_string(datascript.util.rand_bits(16), 4)), $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.util.to_hex_string(datascript.util.rand_bits(16), 4))].join(""));
};
datascript.util.squuid.cljs$lang$maxFixedArity = 1;
datascript.util.squuid_time_millis = function($uuid$$) {
  return parseInt($APP.cljs.core.subs.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($uuid$$), 0, 8), 16) * 1000;
};
datascript.util.distinct_by = function($f$$, $coll$$) {
  return $APP.cljs.core.persistent_BANG_($APP.cljs.core.second($APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($p__65639$$, $el$$) {
    var $seen$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__65639$$, 0, null), $res$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__65639$$, 1, null), $key$$ = $f$$.cljs$core$IFn$_invoke$arity$1 ? $f$$.cljs$core$IFn$_invoke$arity$1($el$$) : $f$$.call(null, $el$$);
    return $APP.cljs.core.contains_QMARK_($seen$$, $key$$) ? $p__65639$$ : new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.conj_BANG_.cljs$core$IFn$_invoke$arity$2($seen$$, $key$$), $APP.cljs.core.conj_BANG_.cljs$core$IFn$_invoke$arity$2($res$$, $el$$)], null);
  }, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.transient$($APP.cljs.core.PersistentHashSet.EMPTY), $APP.cljs.core.transient$($APP.cljs.core.PersistentVector.EMPTY)], null), $coll$$)));
};
datascript.util.find = function($pred$$, $xs$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($_$$, $x$$) {
    return $APP.cljs.core.truth_($pred$$.cljs$core$IFn$_invoke$arity$1 ? $pred$$.cljs$core$IFn$_invoke$arity$1($x$$) : $pred$$.call(null, $x$$)) ? $APP.cljs.core.reduced($x$$) : null;
  }, null, $xs$$);
};
datascript.util.single = function($coll$$) {
  return $APP.cljs.core.first($coll$$);
};
datascript.util.concatv = function($var_args$$) {
  for (var $args__5755__auto__$jscomp$275_argseq__5756__auto__$$ = [], $len__5749__auto___65688$$ = arguments.length, $i__5750__auto___65689$$ = 0;;) {
    if ($i__5750__auto___65689$$ < $len__5749__auto___65688$$) {
      $args__5755__auto__$jscomp$275_argseq__5756__auto__$$.push(arguments[$i__5750__auto___65689$$]), $i__5750__auto___65689$$ += 1;
    } else {
      break;
    }
  }
  $args__5755__auto__$jscomp$275_argseq__5756__auto__$$ = 0 < $args__5755__auto__$jscomp$275_argseq__5756__auto__$$.length ? new $APP.cljs.core.IndexedSeq($args__5755__auto__$jscomp$275_argseq__5756__auto__$$.slice(0), 0, null) : null;
  return datascript.util.concatv.cljs$core$IFn$_invoke$arity$variadic($args__5755__auto__$jscomp$275_argseq__5756__auto__$$);
};
datascript.util.concatv.cljs$core$IFn$_invoke$arity$variadic = function($xs$$) {
  return $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.PersistentVector.EMPTY, $APP.cljs.core.cat, $xs$$);
};
datascript.util.concatv.cljs$lang$maxFixedArity = 0;
datascript.util.concatv.cljs$lang$applyTo = function($seq65646$$) {
  return this.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.seq($seq65646$$));
};
datascript.util.zip = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return datascript.util.zip.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    default:
      for (var $args_arr__5774__auto__$jscomp$84_argseq__5775__auto__$$ = [], $len__5749__auto___65693$$ = arguments.length, $i__5750__auto___65694$$ = 0;;) {
        if ($i__5750__auto___65694$$ < $len__5749__auto___65693$$) {
          $args_arr__5774__auto__$jscomp$84_argseq__5775__auto__$$.push(arguments[$i__5750__auto___65694$$]), $i__5750__auto___65694$$ += 1;
        } else {
          break;
        }
      }
      $args_arr__5774__auto__$jscomp$84_argseq__5775__auto__$$ = 2 < $args_arr__5774__auto__$jscomp$84_argseq__5775__auto__$$.length ? new $APP.cljs.core.IndexedSeq($args_arr__5774__auto__$jscomp$84_argseq__5775__auto__$$.slice(2), 0, null) : null;
      return datascript.util.zip.cljs$core$IFn$_invoke$arity$variadic(arguments[0], arguments[1], $args_arr__5774__auto__$jscomp$84_argseq__5775__auto__$$);
  }
};
datascript.util.zip.cljs$core$IFn$_invoke$arity$2 = function($a$$, $b$$) {
  return $APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.vector, $a$$, $b$$);
};
datascript.util.zip.cljs$core$IFn$_invoke$arity$variadic = function($a$$, $b$$, $rest$$) {
  return $APP.cljs.core.apply.cljs$core$IFn$_invoke$arity$5($APP.cljs.core.mapv, $APP.cljs.core.vector, $a$$, $b$$, $rest$$);
};
datascript.util.zip.cljs$lang$applyTo = function($G__65661_seq65659$$) {
  var $G__65660$$ = $APP.cljs.core.first($G__65661_seq65659$$), $seq65659__$1_seq65659__$2$$ = $APP.cljs.core.next($G__65661_seq65659$$);
  $G__65661_seq65659$$ = $APP.cljs.core.first($seq65659__$1_seq65659__$2$$);
  $seq65659__$1_seq65659__$2$$ = $APP.cljs.core.next($seq65659__$1_seq65659__$2$$);
  return this.cljs$core$IFn$_invoke$arity$variadic($G__65660$$, $G__65661_seq65659$$, $seq65659__$1_seq65659__$2$$);
};
datascript.util.zip.cljs$lang$maxFixedArity = 2;
datascript.util.removem = function($key_pred$$, $m$$) {
  return $APP.cljs.core.persistent_BANG_($APP.cljs.core.reduce_kv(function($m__$1$$, $k$$, $v$$) {
    return $APP.cljs.core.truth_($key_pred$$.cljs$core$IFn$_invoke$arity$1 ? $key_pred$$.cljs$core$IFn$_invoke$arity$1($k$$) : $key_pred$$.call(null, $k$$)) ? $m__$1$$ : $APP.cljs.core.assoc_BANG_.cljs$core$IFn$_invoke$arity$3($m__$1$$, $k$$, $v$$);
  }, $APP.cljs.core.transient$($APP.cljs.core.empty($m$$)), $m$$));
};
datascript.util.conjv = $APP.cljs.core.fnil.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.conj, $APP.cljs.core.PersistentVector.EMPTY);
datascript.util.conjs = $APP.cljs.core.fnil.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.conj, $APP.cljs.core.PersistentHashSet.EMPTY);
datascript.util.reduce_indexed = function($f$$, $init$$, $xs$$) {
  return $APP.cljs.core.first($APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($idx$$, $res$jscomp$46_x$$) {
    var $acc$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($idx$$, 0, null);
    $idx$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($idx$$, 1, null);
    $res$jscomp$46_x$$ = $f$$.cljs$core$IFn$_invoke$arity$3 ? $f$$.cljs$core$IFn$_invoke$arity$3($acc$$, $res$jscomp$46_x$$, $idx$$) : $f$$.call(null, $acc$$, $res$jscomp$46_x$$, $idx$$);
    return $APP.cljs.core.reduced_QMARK_($res$jscomp$46_x$$) ? $APP.cljs.core.reduced(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$res$jscomp$46_x$$, $idx$$], null)) : new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$res$jscomp$46_x$$, $idx$$ + 1], null);
  }, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$init$$, 0], null), $xs$$));
};
$APP.me = {tonsky:{}};
$APP.me.tonsky.persistent_sorted_set = {};
$APP.me.tonsky.persistent_sorted_set.arrays = {};
$APP.me.tonsky.persistent_sorted_set.arrays.if_cljs = function($env$$, $then$$, $else$$$) {
  return $APP.cljs.core.truth_($APP.cljs$cst$176$ns.cljs$core$IFn$_invoke$arity$1($env$$)) ? $then$$ : $else$$$;
};
$APP.me.tonsky.persistent_sorted_set.arrays.make_array = function($size$$) {
  return Array($size$$);
};
$APP.me.tonsky.persistent_sorted_set.arrays.into_array = function($aseq$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($a$$, $x$$) {
    $a$$.push($x$$);
    return $a$$;
  }, [], $aseq$$);
};
$APP.me.tonsky.persistent_sorted_set.arrays.aclone = function($from$$) {
  return $from$$.slice(0);
};
$APP.me.tonsky.persistent_sorted_set.arrays.aconcat = function($a$$, $b$$) {
  return $a$$.concat($b$$);
};
$APP.me.tonsky.persistent_sorted_set.arrays.amap = function($f$$, $arr$$) {
  return $arr$$.map($f$$);
};
$APP.me.tonsky.persistent_sorted_set.arrays.asort = function($arr$$, $cmp$$) {
  return $arr$$.sort($cmp$$);
};
$APP.me.tonsky.persistent_sorted_set.arrays.array_QMARK_ = function($x$$) {
  return $APP.cljs.core._STAR_target_STAR_ === "nodejs" ? Array.isArray($x$$) : $x$$ instanceof Array;
};
$APP.me.tonsky.persistent_sorted_set.max_safe_path = 2147483648;
$APP.me.tonsky.persistent_sorted_set.bits_per_level = 5;
$APP.me.tonsky.persistent_sorted_set.max_len = 32;
$APP.me.tonsky.persistent_sorted_set.min_len = $APP.me.tonsky.persistent_sorted_set.max_len / 2;
$APP.me.tonsky.persistent_sorted_set.avg_len = $APP.me.tonsky.persistent_sorted_set.max_len + $APP.me.tonsky.persistent_sorted_set.min_len >>> 1;
$APP.me.tonsky.persistent_sorted_set.max_safe_level = 6;
$APP.me.tonsky.persistent_sorted_set.bit_mask = $APP.me.tonsky.persistent_sorted_set.max_len - 1;
$APP.me.tonsky.persistent_sorted_set.factors = $APP.me.tonsky.persistent_sorted_set.arrays.into_array($APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(function($p1__66058_SHARP_$$) {
  return Math.pow(2, $p1__66058_SHARP_$$);
}, $APP.cljs.core.range.cljs$core$IFn$_invoke$arity$3(0, 52, 5)));
$APP.me.tonsky.persistent_sorted_set.empty_path = 0;
$APP.me.tonsky.persistent_sorted_set.path_get = function($path$$, $level$$) {
  return $level$$ < $APP.me.tonsky.persistent_sorted_set.max_safe_level ? $path$$ >>> $level$$ * 5 & $APP.me.tonsky.persistent_sorted_set.bit_mask : Math.floor($path$$ / $APP.me.tonsky.persistent_sorted_set.factors[$level$$]) & $APP.me.tonsky.persistent_sorted_set.bit_mask;
};
$APP.me.tonsky.persistent_sorted_set.path_set = function($path$$, $level$$, $idx$$) {
  var $smol_QMARK_$$ = $path$$ < $APP.me.tonsky.persistent_sorted_set.max_safe_path && $level$$ < $APP.me.tonsky.persistent_sorted_set.max_safe_level, $old$$ = $APP.me.tonsky.persistent_sorted_set.path_get($path$$, $level$$);
  return $path$$ - ($smol_QMARK_$$ ? $old$$ << $level$$ * 5 : $old$$ * $APP.me.tonsky.persistent_sorted_set.factors[$level$$]) + ($smol_QMARK_$$ ? $idx$$ << $level$$ * 5 : $idx$$ * $APP.me.tonsky.persistent_sorted_set.factors[$level$$]);
};
$APP.me.tonsky.persistent_sorted_set.path_inc = function($path$$) {
  return $path$$ + 1;
};
$APP.me.tonsky.persistent_sorted_set.path_dec = function($path$$) {
  return $path$$ - 1;
};
$APP.me.tonsky.persistent_sorted_set.path_cmp = function($path1$$, $path2$$) {
  return $path1$$ - $path2$$;
};
$APP.me.tonsky.persistent_sorted_set.path_lt = function($path1$$, $path2$$) {
  return $path1$$ < $path2$$;
};
$APP.me.tonsky.persistent_sorted_set.path_lte = function($path1$$, $path2$$) {
  return $path1$$ <= $path2$$;
};
$APP.me.tonsky.persistent_sorted_set.path_eq = function($path1$$, $path2$$) {
  return $path1$$ === $path2$$;
};
$APP.me.tonsky.persistent_sorted_set.path_same_leaf = function($path1$$, $path2$$) {
  return $path1$$ < $APP.me.tonsky.persistent_sorted_set.max_safe_path && $path2$$ < $APP.me.tonsky.persistent_sorted_set.max_safe_path ? $path1$$ >>> 5 === $path2$$ >>> 5 : Math.floor($path1$$ / $APP.me.tonsky.persistent_sorted_set.max_len) === Math.floor($path2$$ / $APP.me.tonsky.persistent_sorted_set.max_len);
};
$APP.me.tonsky.persistent_sorted_set.path_str = function($G__66419_path$jscomp$81_path__$1$$) {
  for (var $G__66418_res$$ = $APP.cljs.core.List.EMPTY;;) {
    if ($APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($G__66419_path$jscomp$81_path__$1$$, 0)) {
      $G__66418_res$$ = $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($G__66418_res$$, $APP.cljs.core.mod($G__66419_path$jscomp$81_path__$1$$, $APP.me.tonsky.persistent_sorted_set.max_len)), $G__66419_path$jscomp$81_path__$1$$ = Math.floor($G__66419_path$jscomp$81_path__$1$$ / $APP.me.tonsky.persistent_sorted_set.max_len);
    } else {
      return $APP.cljs.core.vec($G__66418_res$$);
    }
  }
};
$APP.me.tonsky.persistent_sorted_set.binary_search_l = function($cmp$$, $arr$$, $m$jscomp$249_r$$, $k$$) {
  for (var $l$$ = 0, $G__66429_r__$1$$ = $APP.cljs.core.long$($m$jscomp$249_r$$);;) {
    if ($l$$ <= $G__66429_r__$1$$) {
      $m$jscomp$249_r$$ = $l$$ + $G__66429_r__$1$$ >>> 1;
      var $mk$$ = $arr$$[$m$jscomp$249_r$$];
      ($cmp$$.cljs$core$IFn$_invoke$arity$2 ? $cmp$$.cljs$core$IFn$_invoke$arity$2($mk$$, $k$$) : $cmp$$.call(null, $mk$$, $k$$)) < 0 ? $l$$ = $m$jscomp$249_r$$ + 1 : $G__66429_r__$1$$ = $m$jscomp$249_r$$ - 1;
    } else {
      return $l$$;
    }
  }
};
$APP.me.tonsky.persistent_sorted_set.binary_search_r = function($cmp$$, $arr$$, $m$jscomp$250_r$$, $k$$) {
  for (var $l$$ = 0, $G__66435_r__$1$$ = $APP.cljs.core.long$($m$jscomp$250_r$$);;) {
    if ($l$$ <= $G__66435_r__$1$$) {
      $m$jscomp$250_r$$ = $l$$ + $G__66435_r__$1$$ >>> 1;
      var $mk$$ = $arr$$[$m$jscomp$250_r$$];
      ($cmp$$.cljs$core$IFn$_invoke$arity$2 ? $cmp$$.cljs$core$IFn$_invoke$arity$2($mk$$, $k$$) : $cmp$$.call(null, $mk$$, $k$$)) > 0 ? $G__66435_r__$1$$ = $m$jscomp$250_r$$ - 1 : $l$$ = $m$jscomp$250_r$$ + 1;
    } else {
      return $l$$;
    }
  }
};
$APP.me.tonsky.persistent_sorted_set.lookup_exact = function($cmp$$, $G__66083$jscomp$inline_6767_arr$$, $key$$) {
  var $JSCompiler_temp$$ = $G__66083$jscomp$inline_6767_arr$$.length, $idx$$ = $APP.me.tonsky.persistent_sorted_set.binary_search_l($cmp$$, $G__66083$jscomp$inline_6767_arr$$, $JSCompiler_temp$$ - 1, $key$$);
  if ($JSCompiler_temp$$ = $idx$$ < $JSCompiler_temp$$) {
    $G__66083$jscomp$inline_6767_arr$$ = $G__66083$jscomp$inline_6767_arr$$[$idx$$], $JSCompiler_temp$$ = 0 === ($cmp$$.cljs$core$IFn$_invoke$arity$2 ? $cmp$$.cljs$core$IFn$_invoke$arity$2($G__66083$jscomp$inline_6767_arr$$, $key$$) : $cmp$$.call(null, $G__66083$jscomp$inline_6767_arr$$, $key$$));
  }
  return $JSCompiler_temp$$ ? $idx$$ : -1;
};
$APP.me.tonsky.persistent_sorted_set.lookup_range = function($cmp$jscomp$5_idx$$, $arr$$, $key$$) {
  var $arr_l$$ = $arr$$.length;
  $cmp$jscomp$5_idx$$ = $APP.me.tonsky.persistent_sorted_set.binary_search_l($cmp$jscomp$5_idx$$, $arr$$, $arr_l$$ - 1, $key$$);
  return $cmp$jscomp$5_idx$$ === $arr_l$$ ? -1 : $cmp$jscomp$5_idx$$;
};
$APP.me.tonsky.persistent_sorted_set.cut_n_splice = function($arr$$, $cut_from_n__5616__auto___66442$$, $cut_to_n__5616__auto___66449$$, $n__5616__auto___66438_splice_from$$, $splice_to$$, $i__65908__auto___66450_xs$$) {
  var $i__65908__auto___66443_xs_l$$ = $i__65908__auto___66450_xs$$.length, $l1$$ = $n__5616__auto___66438_splice_from$$ - $cut_from_n__5616__auto___66442$$, $l1xs$$ = $l1$$ + $i__65908__auto___66443_xs_l$$, $new_arr$$ = $APP.me.tonsky.persistent_sorted_set.arrays.make_array($l1$$ + $i__65908__auto___66443_xs_l$$ + ($cut_to_n__5616__auto___66449$$ - $splice_to$$));
  $n__5616__auto___66438_splice_from$$ -= $cut_from_n__5616__auto___66442$$;
  for (var $i__65908__auto___66439$$ = 0;;) {
    if ($i__65908__auto___66439$$ < $n__5616__auto___66438_splice_from$$) {
      $new_arr$$[$i__65908__auto___66439$$ + 0] = $arr$$[$i__65908__auto___66439$$ + $cut_from_n__5616__auto___66442$$], $i__65908__auto___66439$$ += 1;
    } else {
      break;
    }
  }
  $cut_from_n__5616__auto___66442$$ = $i__65908__auto___66443_xs_l$$ - 0;
  for ($i__65908__auto___66443_xs_l$$ = 0;;) {
    if ($i__65908__auto___66443_xs_l$$ < $cut_from_n__5616__auto___66442$$) {
      $new_arr$$[$i__65908__auto___66443_xs_l$$ + $l1$$] = $i__65908__auto___66450_xs$$[$i__65908__auto___66443_xs_l$$ + 0], $i__65908__auto___66443_xs_l$$ += 1;
    } else {
      break;
    }
  }
  $cut_to_n__5616__auto___66449$$ -= $splice_to$$;
  for ($i__65908__auto___66450_xs$$ = 0;;) {
    if ($i__65908__auto___66450_xs$$ < $cut_to_n__5616__auto___66449$$) {
      $new_arr$$[$i__65908__auto___66450_xs$$ + $l1xs$$] = $arr$$[$i__65908__auto___66450_xs$$ + $splice_to$$], $i__65908__auto___66450_xs$$ += 1;
    } else {
      break;
    }
  }
  return $new_arr$$;
};
$APP.me.tonsky.persistent_sorted_set.splice = function($arr$$, $splice_from$$, $splice_to$$, $xs$$) {
  return $APP.me.tonsky.persistent_sorted_set.cut_n_splice($arr$$, 0, $arr$$.length, $splice_from$$, $splice_to$$, $xs$$);
};
$APP.me.tonsky.persistent_sorted_set.insert = function($arr$$, $idx$$, $xs$$) {
  return $APP.me.tonsky.persistent_sorted_set.cut_n_splice($arr$$, 0, $arr$$.length, $idx$$, $idx$$, $xs$$);
};
$APP.me.tonsky.persistent_sorted_set.merge_n_split = function($a1$$, $a2$$) {
  var $a1_l$$ = $a1$$.length, $a2_l_n__5616__auto___66462_n__5616__auto___66477$$ = $a2$$.length, $r1$$ = $a1_l$$ + $a2_l_n__5616__auto___66462_n__5616__auto___66477$$, $r1_l$$ = $r1$$ >>> 1, $r2$$ = $r1$$ - $r1_l$$;
  $r1$$ = $APP.me.tonsky.persistent_sorted_set.arrays.make_array($r1_l$$);
  $r2$$ = $APP.me.tonsky.persistent_sorted_set.arrays.make_array($r2$$);
  if ($a1_l$$ <= $r1_l$$) {
    for (var $i__65908__auto___66459_n__5616__auto___66454_n__5616__auto___66468_n__5616__auto___66472$$ = $a1_l$$ - 0, $i__65908__auto___66455_i__65908__auto___66469_i__65908__auto___66473$$ = 0;;) {
      if ($i__65908__auto___66455_i__65908__auto___66469_i__65908__auto___66473$$ < $i__65908__auto___66459_n__5616__auto___66454_n__5616__auto___66468_n__5616__auto___66472$$) {
        $r1$$[$i__65908__auto___66455_i__65908__auto___66469_i__65908__auto___66473$$ + 0] = $a1$$[$i__65908__auto___66455_i__65908__auto___66469_i__65908__auto___66473$$ + 0], $i__65908__auto___66455_i__65908__auto___66469_i__65908__auto___66473$$ += 1;
      } else {
        break;
      }
    }
    $a1$$ = $r1_l$$ - $a1_l$$;
    for ($i__65908__auto___66459_n__5616__auto___66454_n__5616__auto___66468_n__5616__auto___66472$$ = 0;;) {
      if ($i__65908__auto___66459_n__5616__auto___66454_n__5616__auto___66468_n__5616__auto___66472$$ < $a1$$) {
        $r1$$[$i__65908__auto___66459_n__5616__auto___66454_n__5616__auto___66468_n__5616__auto___66472$$ + $a1_l$$] = $a2$$[$i__65908__auto___66459_n__5616__auto___66454_n__5616__auto___66468_n__5616__auto___66472$$ + 0], $i__65908__auto___66459_n__5616__auto___66454_n__5616__auto___66468_n__5616__auto___66472$$ += 1;
      } else {
        break;
      }
    }
    $a2_l_n__5616__auto___66462_n__5616__auto___66477$$ -= $r1_l$$ - $a1_l$$;
    for ($a1$$ = 0;;) {
      if ($a1$$ < $a2_l_n__5616__auto___66462_n__5616__auto___66477$$) {
        $r2$$[$a1$$ + 0] = $a2$$[$a1$$ + ($r1_l$$ - $a1_l$$)], $a1$$ += 1;
      } else {
        break;
      }
    }
  } else {
    $i__65908__auto___66459_n__5616__auto___66454_n__5616__auto___66468_n__5616__auto___66472$$ = $r1_l$$ - 0;
    for ($i__65908__auto___66455_i__65908__auto___66469_i__65908__auto___66473$$ = 0;;) {
      if ($i__65908__auto___66455_i__65908__auto___66469_i__65908__auto___66473$$ < $i__65908__auto___66459_n__5616__auto___66454_n__5616__auto___66468_n__5616__auto___66472$$) {
        $r1$$[$i__65908__auto___66455_i__65908__auto___66469_i__65908__auto___66473$$ + 0] = $a1$$[$i__65908__auto___66455_i__65908__auto___66469_i__65908__auto___66473$$ + 0], $i__65908__auto___66455_i__65908__auto___66469_i__65908__auto___66473$$ += 1;
      } else {
        break;
      }
    }
    $i__65908__auto___66459_n__5616__auto___66454_n__5616__auto___66468_n__5616__auto___66472$$ = $a1_l$$ - $r1_l$$;
    for ($i__65908__auto___66455_i__65908__auto___66469_i__65908__auto___66473$$ = 0;;) {
      if ($i__65908__auto___66455_i__65908__auto___66469_i__65908__auto___66473$$ < $i__65908__auto___66459_n__5616__auto___66454_n__5616__auto___66468_n__5616__auto___66472$$) {
        $r2$$[$i__65908__auto___66455_i__65908__auto___66469_i__65908__auto___66473$$ + 0] = $a1$$[$i__65908__auto___66455_i__65908__auto___66469_i__65908__auto___66473$$ + $r1_l$$], $i__65908__auto___66455_i__65908__auto___66469_i__65908__auto___66473$$ += 1;
      } else {
        break;
      }
    }
    $a2_l_n__5616__auto___66462_n__5616__auto___66477$$ -= 0;
    for ($a1$$ = 0;;) {
      if ($a1$$ < $a2_l_n__5616__auto___66462_n__5616__auto___66477$$) {
        $r2$$[$a1$$ + ($a1_l$$ - $r1_l$$)] = $a2$$[$a1$$ + 0], $a1$$ += 1;
      } else {
        break;
      }
    }
  }
  return [$r1$$, $r2$$];
};
$APP.me.tonsky.persistent_sorted_set.eq_arr = function($cmp$$, $a1$$, $a1_from$$, $a1_to_len$$, $a2$$, $a2_from$$, $a2_to_and__5023__auto__$jscomp$228_i$$) {
  $a1_to_len$$ -= $a1_from$$;
  if ($a2_to_and__5023__auto__$jscomp$228_i$$ = $a1_to_len$$ === $a2_to_and__5023__auto__$jscomp$228_i$$ - $a2_from$$) {
    for ($a2_to_and__5023__auto__$jscomp$228_i$$ = 0;;) {
      if ($a2_to_and__5023__auto__$jscomp$228_i$$ === $a1_to_len$$) {
        return !0;
      }
      var $G__66102$$ = $a1$$[$a2_to_and__5023__auto__$jscomp$228_i$$ + $a1_from$$], $G__66103$$ = $a2$$[$a2_to_and__5023__auto__$jscomp$228_i$$ + $a2_from$$];
      if (0 !== ($cmp$$.cljs$core$IFn$_invoke$arity$2 ? $cmp$$.cljs$core$IFn$_invoke$arity$2($G__66102$$, $G__66103$$) : $cmp$$.call(null, $G__66102$$, $G__66103$$))) {
        return !1;
      }
      $a2_to_and__5023__auto__$jscomp$228_i$$ += 1;
    }
  } else {
    return $a2_to_and__5023__auto__$jscomp$228_i$$;
  }
};
$APP.me.tonsky.persistent_sorted_set.check_n_splice = function($cmp$$, $arr$$, $from$$, $to$$, $new_arr$$) {
  return $APP.me.tonsky.persistent_sorted_set.eq_arr($cmp$$, $arr$$, $from$$, $to$$, $new_arr$$, 0, $new_arr$$.length) ? $arr$$ : $APP.me.tonsky.persistent_sorted_set.splice($arr$$, $from$$, $to$$, $new_arr$$);
};
$APP.me.tonsky.persistent_sorted_set.return_array = function($var_args$$) {
  switch(arguments.length) {
    case 1:
      return $APP.me.tonsky.persistent_sorted_set.return_array.cljs$core$IFn$_invoke$arity$1(arguments[0]);
    case 2:
      return $APP.me.tonsky.persistent_sorted_set.return_array.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return $APP.me.tonsky.persistent_sorted_set.return_array.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
$APP.me.tonsky.persistent_sorted_set.return_array.cljs$core$IFn$_invoke$arity$1 = function($a1$$) {
  return [$a1$$];
};
$APP.me.tonsky.persistent_sorted_set.return_array.cljs$core$IFn$_invoke$arity$2 = function($a1$$, $a2$$) {
  return $APP.cljs.core.truth_($a1$$) ? $APP.cljs.core.truth_($a2$$) ? [$a1$$, $a2$$] : [$a1$$] : [$a2$$];
};
$APP.me.tonsky.persistent_sorted_set.return_array.cljs$core$IFn$_invoke$arity$3 = function($a1$$, $a2$$, $a3$$) {
  return $APP.cljs.core.truth_($a1$$) ? $APP.cljs.core.truth_($a2$$) ? $APP.cljs.core.truth_($a3$$) ? [$a1$$, $a2$$, $a3$$] : [$a1$$, $a2$$] : $APP.cljs.core.truth_($a3$$) ? [$a1$$, $a3$$] : [$a1$$] : $APP.cljs.core.truth_($a2$$) ? $APP.cljs.core.truth_($a3$$) ? [$a2$$, $a3$$] : [$a2$$] : [$a3$$];
};
$APP.me.tonsky.persistent_sorted_set.return_array.cljs$lang$maxFixedArity = 3;
$APP.me.tonsky.persistent_sorted_set.INode = function() {
};
var me$tonsky$persistent_sorted_set$INode$node_lim_key$dyn_66485 = function($_$$) {
  var $m__5372__auto__$jscomp$677_m__5374__auto__$$ = $APP.me.tonsky.persistent_sorted_set.node_lim_key[$APP.goog.typeOf($_$$ == null ? null : $_$$)];
  if ($m__5372__auto__$jscomp$677_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$677_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$677_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($_$$) : $m__5372__auto__$jscomp$677_m__5374__auto__$$.call(null, $_$$);
  }
  $m__5372__auto__$jscomp$677_m__5374__auto__$$ = $APP.me.tonsky.persistent_sorted_set.node_lim_key._;
  if ($m__5372__auto__$jscomp$677_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$677_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$677_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($_$$) : $m__5372__auto__$jscomp$677_m__5374__auto__$$.call(null, $_$$);
  }
  throw $APP.cljs.core.missing_protocol("INode.node-lim-key", $_$$);
};
$APP.me.tonsky.persistent_sorted_set.node_lim_key = function($_$$) {
  return $_$$ != null && $_$$.me$tonsky$persistent_sorted_set$INode$node_lim_key$arity$1 != null ? $_$$.me$tonsky$persistent_sorted_set$INode$node_lim_key$arity$1($_$$) : me$tonsky$persistent_sorted_set$INode$node_lim_key$dyn_66485($_$$);
};
var me$tonsky$persistent_sorted_set$INode$node_len$dyn_66487 = function($_$$) {
  var $m__5372__auto__$jscomp$678_m__5374__auto__$$ = $APP.me.tonsky.persistent_sorted_set.node_len[$APP.goog.typeOf($_$$ == null ? null : $_$$)];
  if ($m__5372__auto__$jscomp$678_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$678_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$678_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($_$$) : $m__5372__auto__$jscomp$678_m__5374__auto__$$.call(null, $_$$);
  }
  $m__5372__auto__$jscomp$678_m__5374__auto__$$ = $APP.me.tonsky.persistent_sorted_set.node_len._;
  if ($m__5372__auto__$jscomp$678_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$678_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$678_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($_$$) : $m__5372__auto__$jscomp$678_m__5374__auto__$$.call(null, $_$$);
  }
  throw $APP.cljs.core.missing_protocol("INode.node-len", $_$$);
};
$APP.me.tonsky.persistent_sorted_set.node_len = function($_$$) {
  return $_$$ != null && $_$$.me$tonsky$persistent_sorted_set$INode$node_len$arity$1 != null ? $_$$.me$tonsky$persistent_sorted_set$INode$node_len$arity$1($_$$) : me$tonsky$persistent_sorted_set$INode$node_len$dyn_66487($_$$);
};
var me$tonsky$persistent_sorted_set$INode$node_merge$dyn_66488 = function($_$$, $next$$) {
  var $m__5372__auto__$jscomp$679_m__5374__auto__$$ = $APP.me.tonsky.persistent_sorted_set.node_merge[$APP.goog.typeOf($_$$ == null ? null : $_$$)];
  if ($m__5372__auto__$jscomp$679_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$679_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$679_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($_$$, $next$$) : $m__5372__auto__$jscomp$679_m__5374__auto__$$.call(null, $_$$, $next$$);
  }
  $m__5372__auto__$jscomp$679_m__5374__auto__$$ = $APP.me.tonsky.persistent_sorted_set.node_merge._;
  if ($m__5372__auto__$jscomp$679_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$679_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$679_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($_$$, $next$$) : $m__5372__auto__$jscomp$679_m__5374__auto__$$.call(null, $_$$, $next$$);
  }
  throw $APP.cljs.core.missing_protocol("INode.node-merge", $_$$);
};
$APP.me.tonsky.persistent_sorted_set.node_merge = function($_$$, $next$$) {
  return $_$$ != null && $_$$.me$tonsky$persistent_sorted_set$INode$node_merge$arity$2 != null ? $_$$.me$tonsky$persistent_sorted_set$INode$node_merge$arity$2($_$$, $next$$) : me$tonsky$persistent_sorted_set$INode$node_merge$dyn_66488($_$$, $next$$);
};
var me$tonsky$persistent_sorted_set$INode$node_merge_n_split$dyn_66489 = function($_$$, $next$$) {
  var $m__5372__auto__$jscomp$680_m__5374__auto__$$ = $APP.me.tonsky.persistent_sorted_set.node_merge_n_split[$APP.goog.typeOf($_$$ == null ? null : $_$$)];
  if ($m__5372__auto__$jscomp$680_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$680_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$680_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($_$$, $next$$) : $m__5372__auto__$jscomp$680_m__5374__auto__$$.call(null, $_$$, $next$$);
  }
  $m__5372__auto__$jscomp$680_m__5374__auto__$$ = $APP.me.tonsky.persistent_sorted_set.node_merge_n_split._;
  if ($m__5372__auto__$jscomp$680_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$680_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$680_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($_$$, $next$$) : $m__5372__auto__$jscomp$680_m__5374__auto__$$.call(null, $_$$, $next$$);
  }
  throw $APP.cljs.core.missing_protocol("INode.node-merge-n-split", $_$$);
};
$APP.me.tonsky.persistent_sorted_set.node_merge_n_split = function($_$$, $next$$) {
  return $_$$ != null && $_$$.me$tonsky$persistent_sorted_set$INode$node_merge_n_split$arity$2 != null ? $_$$.me$tonsky$persistent_sorted_set$INode$node_merge_n_split$arity$2($_$$, $next$$) : me$tonsky$persistent_sorted_set$INode$node_merge_n_split$dyn_66489($_$$, $next$$);
};
var me$tonsky$persistent_sorted_set$INode$node_lookup$dyn_66490 = function($_$$, $cmp$$, $key$$) {
  var $m__5372__auto__$jscomp$681_m__5374__auto__$$ = $APP.me.tonsky.persistent_sorted_set.node_lookup[$APP.goog.typeOf($_$$ == null ? null : $_$$)];
  if ($m__5372__auto__$jscomp$681_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$681_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$681_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($_$$, $cmp$$, $key$$) : $m__5372__auto__$jscomp$681_m__5374__auto__$$.call(null, $_$$, $cmp$$, $key$$);
  }
  $m__5372__auto__$jscomp$681_m__5374__auto__$$ = $APP.me.tonsky.persistent_sorted_set.node_lookup._;
  if ($m__5372__auto__$jscomp$681_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$681_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$681_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($_$$, $cmp$$, $key$$) : $m__5372__auto__$jscomp$681_m__5374__auto__$$.call(null, $_$$, $cmp$$, $key$$);
  }
  throw $APP.cljs.core.missing_protocol("INode.node-lookup", $_$$);
};
$APP.me.tonsky.persistent_sorted_set.node_lookup = function($_$$, $cmp$$, $key$$) {
  return $_$$ != null && $_$$.me$tonsky$persistent_sorted_set$INode$node_lookup$arity$3 != null ? $_$$.me$tonsky$persistent_sorted_set$INode$node_lookup$arity$3($_$$, $cmp$$, $key$$) : me$tonsky$persistent_sorted_set$INode$node_lookup$dyn_66490($_$$, $cmp$$, $key$$);
};
var me$tonsky$persistent_sorted_set$INode$node_conj$dyn_66492 = function($_$$, $cmp$$, $key$$) {
  var $m__5372__auto__$jscomp$682_m__5374__auto__$$ = $APP.me.tonsky.persistent_sorted_set.node_conj[$APP.goog.typeOf($_$$ == null ? null : $_$$)];
  if ($m__5372__auto__$jscomp$682_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$682_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$682_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($_$$, $cmp$$, $key$$) : $m__5372__auto__$jscomp$682_m__5374__auto__$$.call(null, $_$$, $cmp$$, $key$$);
  }
  $m__5372__auto__$jscomp$682_m__5374__auto__$$ = $APP.me.tonsky.persistent_sorted_set.node_conj._;
  if ($m__5372__auto__$jscomp$682_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$682_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$682_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($_$$, $cmp$$, $key$$) : $m__5372__auto__$jscomp$682_m__5374__auto__$$.call(null, $_$$, $cmp$$, $key$$);
  }
  throw $APP.cljs.core.missing_protocol("INode.node-conj", $_$$);
};
$APP.me.tonsky.persistent_sorted_set.node_conj = function($_$$, $cmp$$, $key$$) {
  return $_$$ != null && $_$$.me$tonsky$persistent_sorted_set$INode$node_conj$arity$3 != null ? $_$$.me$tonsky$persistent_sorted_set$INode$node_conj$arity$3($_$$, $cmp$$, $key$$) : me$tonsky$persistent_sorted_set$INode$node_conj$dyn_66492($_$$, $cmp$$, $key$$);
};
var me$tonsky$persistent_sorted_set$INode$node_disj$dyn_66494 = function($_$$, $cmp$$, $key$$, $root_QMARK_$$, $left$$, $right$$) {
  var $m__5372__auto__$jscomp$683_m__5374__auto__$$ = $APP.me.tonsky.persistent_sorted_set.node_disj[$APP.goog.typeOf($_$$ == null ? null : $_$$)];
  if ($m__5372__auto__$jscomp$683_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$683_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6 ? $m__5372__auto__$jscomp$683_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6($_$$, $cmp$$, $key$$, $root_QMARK_$$, $left$$, $right$$) : $m__5372__auto__$jscomp$683_m__5374__auto__$$.call(null, $_$$, $cmp$$, $key$$, $root_QMARK_$$, $left$$, $right$$);
  }
  $m__5372__auto__$jscomp$683_m__5374__auto__$$ = $APP.me.tonsky.persistent_sorted_set.node_disj._;
  if ($m__5372__auto__$jscomp$683_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$683_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6 ? $m__5372__auto__$jscomp$683_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6($_$$, $cmp$$, $key$$, $root_QMARK_$$, $left$$, $right$$) : $m__5372__auto__$jscomp$683_m__5374__auto__$$.call(null, $_$$, $cmp$$, $key$$, $root_QMARK_$$, $left$$, $right$$);
  }
  throw $APP.cljs.core.missing_protocol("INode.node-disj", $_$$);
};
$APP.me.tonsky.persistent_sorted_set.node_disj = function($_$$, $cmp$$, $key$$, $root_QMARK_$$, $left$$, $right$$) {
  return $_$$ != null && $_$$.me$tonsky$persistent_sorted_set$INode$node_disj$arity$6 != null ? $_$$.me$tonsky$persistent_sorted_set$INode$node_disj$arity$6($_$$, $cmp$$, $key$$, $root_QMARK_$$, $left$$, $right$$) : me$tonsky$persistent_sorted_set$INode$node_disj$dyn_66494($_$$, $cmp$$, $key$$, $root_QMARK_$$, $left$$, $right$$);
};
$APP.me.tonsky.persistent_sorted_set.rotate = function($node$jscomp$552_nodes$$, $root_QMARK_$$, $left$$, $right$$) {
  if ($APP.cljs.core.truth_($root_QMARK_$$)) {
    return $APP.me.tonsky.persistent_sorted_set.return_array.cljs$core$IFn$_invoke$arity$1($node$jscomp$552_nodes$$);
  }
  if ($APP.me.tonsky.persistent_sorted_set.node_len($node$jscomp$552_nodes$$) > $APP.me.tonsky.persistent_sorted_set.min_len) {
    return $APP.me.tonsky.persistent_sorted_set.return_array.cljs$core$IFn$_invoke$arity$3($left$$, $node$jscomp$552_nodes$$, $right$$);
  }
  if ($APP.cljs.core.truth_($APP.cljs.core.truth_($left$$) ? $APP.me.tonsky.persistent_sorted_set.node_len($left$$) <= $APP.me.tonsky.persistent_sorted_set.min_len : $left$$)) {
    return $APP.me.tonsky.persistent_sorted_set.return_array.cljs$core$IFn$_invoke$arity$2($APP.me.tonsky.persistent_sorted_set.node_merge($left$$, $node$jscomp$552_nodes$$), $right$$);
  }
  if ($APP.cljs.core.truth_($APP.cljs.core.truth_($right$$) ? $APP.me.tonsky.persistent_sorted_set.node_len($right$$) <= $APP.me.tonsky.persistent_sorted_set.min_len : $right$$)) {
    return $APP.me.tonsky.persistent_sorted_set.return_array.cljs$core$IFn$_invoke$arity$2($left$$, $APP.me.tonsky.persistent_sorted_set.node_merge($node$jscomp$552_nodes$$, $right$$));
  }
  if ($APP.cljs.core.truth_($APP.cljs.core.truth_($left$$) ? $right$$ == null || $APP.me.tonsky.persistent_sorted_set.node_len($left$$) < $APP.me.tonsky.persistent_sorted_set.node_len($right$$) : $left$$)) {
    return $node$jscomp$552_nodes$$ = $APP.me.tonsky.persistent_sorted_set.node_merge_n_split($left$$, $node$jscomp$552_nodes$$), $APP.me.tonsky.persistent_sorted_set.return_array.cljs$core$IFn$_invoke$arity$3($node$jscomp$552_nodes$$[0], $node$jscomp$552_nodes$$[1], $right$$);
  }
  $node$jscomp$552_nodes$$ = $APP.me.tonsky.persistent_sorted_set.node_merge_n_split($node$jscomp$552_nodes$$, $right$$);
  return $APP.me.tonsky.persistent_sorted_set.return_array.cljs$core$IFn$_invoke$arity$3($left$$, $node$jscomp$552_nodes$$[0], $node$jscomp$552_nodes$$[1]);
};
$APP.me.tonsky.persistent_sorted_set.Node = function($keys$$, $pointers$$) {
  this.keys = $keys$$;
  this.pointers = $pointers$$;
};
$APP.me.tonsky.persistent_sorted_set.Node.prototype.me$tonsky$persistent_sorted_set$INode$ = $APP.cljs.core.PROTOCOL_SENTINEL;
$APP.me.tonsky.persistent_sorted_set.Node.prototype.me$tonsky$persistent_sorted_set$INode$node_lim_key$arity$1 = function($_$$) {
  $_$$ = this.keys;
  return $_$$[$_$$.length - 1];
};
$APP.me.tonsky.persistent_sorted_set.Node.prototype.me$tonsky$persistent_sorted_set$INode$node_len$arity$1 = function($_$$) {
  return this.keys.length;
};
$APP.me.tonsky.persistent_sorted_set.Node.prototype.me$tonsky$persistent_sorted_set$INode$node_merge$arity$2 = function($_$$, $next$$) {
  return new $APP.me.tonsky.persistent_sorted_set.Node($APP.me.tonsky.persistent_sorted_set.arrays.aconcat(this.keys, $next$$.keys), $APP.me.tonsky.persistent_sorted_set.arrays.aconcat(this.pointers, $next$$.pointers));
};
$APP.me.tonsky.persistent_sorted_set.Node.prototype.me$tonsky$persistent_sorted_set$INode$node_merge_n_split$arity$2 = function($_$jscomp$1873_ks$$, $next$jscomp$14_ps$$) {
  $_$jscomp$1873_ks$$ = $APP.me.tonsky.persistent_sorted_set.merge_n_split(this.keys, $next$jscomp$14_ps$$.keys);
  $next$jscomp$14_ps$$ = $APP.me.tonsky.persistent_sorted_set.merge_n_split(this.pointers, $next$jscomp$14_ps$$.pointers);
  return $APP.me.tonsky.persistent_sorted_set.return_array.cljs$core$IFn$_invoke$arity$2(new $APP.me.tonsky.persistent_sorted_set.Node($_$jscomp$1873_ks$$[0], $next$jscomp$14_ps$$[0]), new $APP.me.tonsky.persistent_sorted_set.Node($_$jscomp$1873_ks$$[1], $next$jscomp$14_ps$$[1]));
};
$APP.me.tonsky.persistent_sorted_set.Node.prototype.me$tonsky$persistent_sorted_set$INode$node_lookup$arity$3 = function($_$jscomp$1874_idx$$, $cmp$$, $key$$) {
  $_$jscomp$1874_idx$$ = $APP.me.tonsky.persistent_sorted_set.lookup_range($cmp$$, this.keys, $key$$);
  return -1 === $_$jscomp$1874_idx$$ ? null : $APP.me.tonsky.persistent_sorted_set.node_lookup(this.pointers[$_$jscomp$1874_idx$$], $cmp$$, $key$$);
};
$APP.me.tonsky.persistent_sorted_set.Node.prototype.me$tonsky$persistent_sorted_set$INode$node_conj$arity$3 = function($_$jscomp$1875_idx$$, $cmp$jscomp$15_new_keys$$, $key$jscomp$252_middle$jscomp$1_nodes$$) {
  $_$jscomp$1875_idx$$ = $APP.me.tonsky.persistent_sorted_set.binary_search_l($cmp$jscomp$15_new_keys$$, this.keys, this.keys.length - 2, $key$jscomp$252_middle$jscomp$1_nodes$$);
  $key$jscomp$252_middle$jscomp$1_nodes$$ = $APP.me.tonsky.persistent_sorted_set.node_conj(this.pointers[$_$jscomp$1875_idx$$], $cmp$jscomp$15_new_keys$$, $key$jscomp$252_middle$jscomp$1_nodes$$);
  if ($APP.cljs.core.truth_($key$jscomp$252_middle$jscomp$1_nodes$$)) {
    $cmp$jscomp$15_new_keys$$ = $APP.me.tonsky.persistent_sorted_set.check_n_splice($cmp$jscomp$15_new_keys$$, this.keys, $_$jscomp$1875_idx$$, $_$jscomp$1875_idx$$ + 1, $APP.me.tonsky.persistent_sorted_set.arrays.amap($APP.me.tonsky.persistent_sorted_set.node_lim_key, $key$jscomp$252_middle$jscomp$1_nodes$$));
    $_$jscomp$1875_idx$$ = $APP.me.tonsky.persistent_sorted_set.splice(this.pointers, $_$jscomp$1875_idx$$, $_$jscomp$1875_idx$$ + 1, $key$jscomp$252_middle$jscomp$1_nodes$$);
    if ($_$jscomp$1875_idx$$.length <= $APP.me.tonsky.persistent_sorted_set.max_len) {
      return [new $APP.me.tonsky.persistent_sorted_set.Node($cmp$jscomp$15_new_keys$$, $_$jscomp$1875_idx$$)];
    }
    $key$jscomp$252_middle$jscomp$1_nodes$$ = $_$jscomp$1875_idx$$.length >>> 1;
    return [new $APP.me.tonsky.persistent_sorted_set.Node($cmp$jscomp$15_new_keys$$.slice(0, $key$jscomp$252_middle$jscomp$1_nodes$$), $_$jscomp$1875_idx$$.slice(0, $key$jscomp$252_middle$jscomp$1_nodes$$)), new $APP.me.tonsky.persistent_sorted_set.Node($cmp$jscomp$15_new_keys$$.slice($key$jscomp$252_middle$jscomp$1_nodes$$), $_$jscomp$1875_idx$$.slice($key$jscomp$252_middle$jscomp$1_nodes$$))];
  }
  return null;
};
$APP.me.tonsky.persistent_sorted_set.Node.prototype.me$tonsky$persistent_sorted_set$INode$node_disj$arity$6 = function($_$jscomp$1876_idx$$, $cmp$jscomp$16_new_keys$$, $disjned_key$jscomp$253_new_pointers$$, $root_QMARK_$$, $left$$, $right$$) {
  $_$jscomp$1876_idx$$ = $APP.me.tonsky.persistent_sorted_set.lookup_range($cmp$jscomp$16_new_keys$$, this.keys, $disjned_key$jscomp$253_new_pointers$$);
  if (-1 === $_$jscomp$1876_idx$$) {
    return null;
  }
  var $left_child_left_idx$$ = $_$jscomp$1876_idx$$ - 1 >= 0 ? this.pointers[$_$jscomp$1876_idx$$ - 1] : null, $right_child$$ = $_$jscomp$1876_idx$$ + 1 < this.pointers.length ? this.pointers[$_$jscomp$1876_idx$$ + 1] : null;
  $disjned_key$jscomp$253_new_pointers$$ = $APP.me.tonsky.persistent_sorted_set.node_disj(this.pointers[$_$jscomp$1876_idx$$], $cmp$jscomp$16_new_keys$$, $disjned_key$jscomp$253_new_pointers$$, !1, $left_child_left_idx$$, $right_child$$);
  return $APP.cljs.core.truth_($disjned_key$jscomp$253_new_pointers$$) ? ($left_child_left_idx$$ = $APP.cljs.core.truth_($left_child_left_idx$$) ? $_$jscomp$1876_idx$$ - 1 : $_$jscomp$1876_idx$$, $_$jscomp$1876_idx$$ = $APP.cljs.core.truth_($right_child$$) ? 2 + $_$jscomp$1876_idx$$ : 1 + $_$jscomp$1876_idx$$, $cmp$jscomp$16_new_keys$$ = $APP.me.tonsky.persistent_sorted_set.check_n_splice($cmp$jscomp$16_new_keys$$, this.keys, $left_child_left_idx$$, $_$jscomp$1876_idx$$, $APP.me.tonsky.persistent_sorted_set.arrays.amap($APP.me.tonsky.persistent_sorted_set.node_lim_key, 
  $disjned_key$jscomp$253_new_pointers$$)), $disjned_key$jscomp$253_new_pointers$$ = $APP.me.tonsky.persistent_sorted_set.splice(this.pointers, $left_child_left_idx$$, $_$jscomp$1876_idx$$, $disjned_key$jscomp$253_new_pointers$$), $APP.me.tonsky.persistent_sorted_set.rotate(new $APP.me.tonsky.persistent_sorted_set.Node($cmp$jscomp$16_new_keys$$, $disjned_key$jscomp$253_new_pointers$$), $root_QMARK_$$, $left$$, $right$$)) : null;
};
$APP.me.tonsky.persistent_sorted_set.Node.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$69$keys, cljs$cst$4433$pointers], null);
};
$APP.me.tonsky.persistent_sorted_set.Node.cljs$lang$type = !0;
$APP.me.tonsky.persistent_sorted_set.Node.cljs$lang$ctorStr = "me.tonsky.persistent-sorted-set/Node";
$APP.me.tonsky.persistent_sorted_set.Node.cljs$lang$ctorPrWriter = function($this__5310__auto__$$, $writer__5311__auto__$$, $opt__5312__auto__$$) {
  return $APP.cljs.core._write($writer__5311__auto__$$, "me.tonsky.persistent-sorted-set/Node");
};
$APP.me.tonsky.persistent_sorted_set.__GT_Node = function($keys$$, $pointers$$) {
  return new $APP.me.tonsky.persistent_sorted_set.Node($keys$$, $pointers$$);
};
$APP.me.tonsky.persistent_sorted_set.Leaf = function($keys$$) {
  this.keys = $keys$$;
};
$APP.me.tonsky.persistent_sorted_set.Leaf.prototype.me$tonsky$persistent_sorted_set$INode$ = $APP.cljs.core.PROTOCOL_SENTINEL;
$APP.me.tonsky.persistent_sorted_set.Leaf.prototype.me$tonsky$persistent_sorted_set$INode$node_lim_key$arity$1 = function($_$jscomp$1877_arr__65945__auto__$$) {
  $_$jscomp$1877_arr__65945__auto__$$ = this.keys;
  return $_$jscomp$1877_arr__65945__auto__$$[$_$jscomp$1877_arr__65945__auto__$$.length - 1];
};
$APP.me.tonsky.persistent_sorted_set.Leaf.prototype.me$tonsky$persistent_sorted_set$INode$node_len$arity$1 = function($_$$) {
  return this.keys.length;
};
$APP.me.tonsky.persistent_sorted_set.Leaf.prototype.me$tonsky$persistent_sorted_set$INode$node_merge$arity$2 = function($_$$, $next$$) {
  return new $APP.me.tonsky.persistent_sorted_set.Leaf($APP.me.tonsky.persistent_sorted_set.arrays.aconcat(this.keys, $next$$.keys));
};
$APP.me.tonsky.persistent_sorted_set.Leaf.prototype.me$tonsky$persistent_sorted_set$INode$node_merge_n_split$arity$2 = function($_$jscomp$1880_ks$$, $next$$) {
  $_$jscomp$1880_ks$$ = $APP.me.tonsky.persistent_sorted_set.merge_n_split(this.keys, $next$$.keys);
  return $APP.me.tonsky.persistent_sorted_set.return_array.cljs$core$IFn$_invoke$arity$2(new $APP.me.tonsky.persistent_sorted_set.Leaf($_$jscomp$1880_ks$$[0]), new $APP.me.tonsky.persistent_sorted_set.Leaf($_$jscomp$1880_ks$$[1]));
};
$APP.me.tonsky.persistent_sorted_set.Leaf.prototype.me$tonsky$persistent_sorted_set$INode$node_lookup$arity$3 = function($_$jscomp$1881_idx$$, $cmp$$, $key$$) {
  $_$jscomp$1881_idx$$ = $APP.me.tonsky.persistent_sorted_set.lookup_exact($cmp$$, this.keys, $key$$);
  return -1 === $_$jscomp$1881_idx$$ ? null : this.keys[$_$jscomp$1881_idx$$];
};
$APP.me.tonsky.persistent_sorted_set.Leaf.prototype.me$tonsky$persistent_sorted_set$INode$node_conj$arity$3 = function($_$jscomp$1882_idx$$, $cmp$jscomp$18_middle$$, $key$$) {
  $_$jscomp$1882_idx$$ = $APP.me.tonsky.persistent_sorted_set.binary_search_l($cmp$jscomp$18_middle$$, this.keys, this.keys.length - 1, $key$$);
  var $keys_l$$ = this.keys.length, $G__66173$jscomp$inline_6774_JSCompiler_temp$$;
  if ($G__66173$jscomp$inline_6774_JSCompiler_temp$$ = $_$jscomp$1882_idx$$ < $keys_l$$) {
    $G__66173$jscomp$inline_6774_JSCompiler_temp$$ = this.keys[$_$jscomp$1882_idx$$], $G__66173$jscomp$inline_6774_JSCompiler_temp$$ = 0 === ($cmp$jscomp$18_middle$$.cljs$core$IFn$_invoke$arity$2 ? $cmp$jscomp$18_middle$$.cljs$core$IFn$_invoke$arity$2($key$$, $G__66173$jscomp$inline_6774_JSCompiler_temp$$) : $cmp$jscomp$18_middle$$.call(null, $key$$, $G__66173$jscomp$inline_6774_JSCompiler_temp$$));
  }
  return $G__66173$jscomp$inline_6774_JSCompiler_temp$$ ? null : $keys_l$$ === $APP.me.tonsky.persistent_sorted_set.max_len ? ($cmp$jscomp$18_middle$$ = $keys_l$$ + 1 >>> 1, $_$jscomp$1882_idx$$ > $cmp$jscomp$18_middle$$ ? [new $APP.me.tonsky.persistent_sorted_set.Leaf(this.keys.slice(0, $cmp$jscomp$18_middle$$)), new $APP.me.tonsky.persistent_sorted_set.Leaf($APP.me.tonsky.persistent_sorted_set.cut_n_splice(this.keys, $cmp$jscomp$18_middle$$, $keys_l$$, $_$jscomp$1882_idx$$, $_$jscomp$1882_idx$$, 
  [$key$$]))] : [new $APP.me.tonsky.persistent_sorted_set.Leaf($APP.me.tonsky.persistent_sorted_set.cut_n_splice(this.keys, 0, $cmp$jscomp$18_middle$$, $_$jscomp$1882_idx$$, $_$jscomp$1882_idx$$, [$key$$])), new $APP.me.tonsky.persistent_sorted_set.Leaf(this.keys.slice($cmp$jscomp$18_middle$$, $keys_l$$))]) : [new $APP.me.tonsky.persistent_sorted_set.Leaf($APP.me.tonsky.persistent_sorted_set.splice(this.keys, $_$jscomp$1882_idx$$, $_$jscomp$1882_idx$$, [$key$$]))];
};
$APP.me.tonsky.persistent_sorted_set.Leaf.prototype.me$tonsky$persistent_sorted_set$INode$node_disj$arity$6 = function($_$jscomp$1883_idx$jscomp$206_new_keys$$, $cmp$$, $key$$, $root_QMARK_$$, $left$$, $right$$) {
  $_$jscomp$1883_idx$jscomp$206_new_keys$$ = $APP.me.tonsky.persistent_sorted_set.lookup_exact($cmp$$, this.keys, $key$$);
  if (-1 === $_$jscomp$1883_idx$jscomp$206_new_keys$$) {
    return null;
  }
  $_$jscomp$1883_idx$jscomp$206_new_keys$$ = $APP.me.tonsky.persistent_sorted_set.splice(this.keys, $_$jscomp$1883_idx$jscomp$206_new_keys$$, $_$jscomp$1883_idx$jscomp$206_new_keys$$ + 1, []);
  return $APP.me.tonsky.persistent_sorted_set.rotate(new $APP.me.tonsky.persistent_sorted_set.Leaf($_$jscomp$1883_idx$jscomp$206_new_keys$$), $root_QMARK_$$, $left$$, $right$$);
};
$APP.me.tonsky.persistent_sorted_set.Leaf.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$69$keys], null);
};
$APP.me.tonsky.persistent_sorted_set.Leaf.cljs$lang$type = !0;
$APP.me.tonsky.persistent_sorted_set.Leaf.cljs$lang$ctorStr = "me.tonsky.persistent-sorted-set/Leaf";
$APP.me.tonsky.persistent_sorted_set.Leaf.cljs$lang$ctorPrWriter = function($this__5310__auto__$$, $writer__5311__auto__$$, $opt__5312__auto__$$) {
  return $APP.cljs.core._write($writer__5311__auto__$$, "me.tonsky.persistent-sorted-set/Leaf");
};
$APP.me.tonsky.persistent_sorted_set.__GT_Leaf = function($keys$$) {
  return new $APP.me.tonsky.persistent_sorted_set.Leaf($keys$$);
};
$APP.me.tonsky.persistent_sorted_set.uninitialized_hash = null;
$APP.me.tonsky.persistent_sorted_set.BTSet = function($root$$, $shift$$, $cnt$$, $comparator$$, $meta$$, $_hash$$) {
  this.root = $root$$;
  this.shift = $shift$$;
  this.cnt = $cnt$$;
  this.comparator = $comparator$$;
  this.meta = $meta$$;
  this._hash = $_hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2297303311;
  this.cljs$lang$protocol_mask$partition1$ = 8332;
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.toString = function() {
  return $APP.cljs.core.pr_str_STAR_(this);
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.cljs$core$ILookup$_lookup$arity$2 = function($_$$, $k$$) {
  return $APP.me.tonsky.persistent_sorted_set.node_lookup(this.root, this.comparator, $k$$);
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.cljs$core$ILookup$_lookup$arity$3 = function($_$jscomp$1885_or__5025__auto__$$, $k$$, $not_found$$) {
  $_$jscomp$1885_or__5025__auto__$$ = $APP.me.tonsky.persistent_sorted_set.node_lookup(this.root, this.comparator, $k$$);
  return $APP.cljs.core.truth_($_$jscomp$1885_or__5025__auto__$$) ? $_$jscomp$1885_or__5025__auto__$$ : $not_found$$;
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this$$$, $writer$$, $opts$$) {
  return $APP.cljs.core.pr_sequential_writer($writer$$, $APP.cljs.core.pr_writer, "#{", " ", "}", $opts$$, $APP.cljs.core.seq(this));
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.cljs$core$IMeta$_meta$arity$1 = function($_$$) {
  return this.meta;
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.cljs$core$ICloneable$_clone$arity$1 = function($_$$) {
  return new $APP.me.tonsky.persistent_sorted_set.BTSet(this.root, this.shift, this.cnt, this.comparator, this.meta, this._hash);
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.cljs$core$ICounted$_count$arity$1 = function($_$$) {
  return this.cnt;
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.cljs$core$IReversible$_rseq$arity$1 = function($this$$$) {
  return $APP.cljs.core.rseq($APP.me.tonsky.persistent_sorted_set.btset_iter.cljs$core$IFn$_invoke$arity$1 ? $APP.me.tonsky.persistent_sorted_set.btset_iter.cljs$core$IFn$_invoke$arity$1(this) : $APP.me.tonsky.persistent_sorted_set.btset_iter.call(null, this));
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$141_h__5134__auto____$1$jscomp$141_this$$$) {
  $h__5134__auto__$jscomp$141_h__5134__auto____$1$jscomp$141_this$$$ = this._hash;
  return $h__5134__auto__$jscomp$141_h__5134__auto____$1$jscomp$141_this$$$ != null ? $h__5134__auto__$jscomp$141_h__5134__auto____$1$jscomp$141_this$$$ : this._hash = $h__5134__auto__$jscomp$141_h__5134__auto____$1$jscomp$141_this$$$ = $APP.cljs.core.hash_unordered_coll(this);
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this$$$, $other$$) {
  var $this$__$1$$ = this;
  return $APP.cljs.core.set_QMARK_($other$$) && this.cnt === $APP.cljs.core.count($other$$) && $APP.cljs.core.every_QMARK_(function($p1__66184_SHARP_$$) {
    return $APP.cljs.core.contains_QMARK_($this$__$1$$, $p1__66184_SHARP_$$);
  }, $other$$);
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.cljs$core$IEditableCollection$_as_transient$arity$1 = function($this$$$) {
  return this;
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.cljs$core$IEmptyableCollection$_empty$arity$1 = function($_$$) {
  return new $APP.me.tonsky.persistent_sorted_set.BTSet(new $APP.me.tonsky.persistent_sorted_set.Leaf([]), 0, 0, this.comparator, this.meta, null);
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.cljs$core$ISet$_disjoin$arity$2 = function($this$$$, $key$$) {
  return $APP.me.tonsky.persistent_sorted_set.disj.cljs$core$IFn$_invoke$arity$3 ? $APP.me.tonsky.persistent_sorted_set.disj.cljs$core$IFn$_invoke$arity$3(this, $key$$, this.comparator) : $APP.me.tonsky.persistent_sorted_set.disj.call(null, this, $key$$, this.comparator);
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.cljs$core$IReduce$_reduce$arity$2 = function($temp__5823__auto__$jscomp$238_this$$$, $f$$) {
  $temp__5823__auto__$jscomp$238_this$$$ = $APP.me.tonsky.persistent_sorted_set.btset_iter.cljs$core$IFn$_invoke$arity$1 ? $APP.me.tonsky.persistent_sorted_set.btset_iter.cljs$core$IFn$_invoke$arity$1(this) : $APP.me.tonsky.persistent_sorted_set.btset_iter.call(null, this);
  return $APP.cljs.core.truth_($temp__5823__auto__$jscomp$238_this$$$) ? $APP.cljs.core._reduce($temp__5823__auto__$jscomp$238_this$$$, $f$$) : $f$$.cljs$core$IFn$_invoke$arity$0 ? $f$$.cljs$core$IFn$_invoke$arity$0() : $f$$.call(null);
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.cljs$core$IReduce$_reduce$arity$3 = function($temp__5823__auto__$jscomp$239_this$$$, $f$$, $start$$) {
  $temp__5823__auto__$jscomp$239_this$$$ = $APP.me.tonsky.persistent_sorted_set.btset_iter.cljs$core$IFn$_invoke$arity$1 ? $APP.me.tonsky.persistent_sorted_set.btset_iter.cljs$core$IFn$_invoke$arity$1(this) : $APP.me.tonsky.persistent_sorted_set.btset_iter.call(null, this);
  return $APP.cljs.core.truth_($temp__5823__auto__$jscomp$239_this$$$) ? $APP.cljs.core._reduce($temp__5823__auto__$jscomp$239_this$$$, $f$$, $start$$) : $start$$;
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.cljs$core$ITransientCollection$_conj_BANG_$arity$2 = function($this$$$, $key$$) {
  return $APP.me.tonsky.persistent_sorted_set.conj.cljs$core$IFn$_invoke$arity$3 ? $APP.me.tonsky.persistent_sorted_set.conj.cljs$core$IFn$_invoke$arity$3(this, $key$$, this.comparator) : $APP.me.tonsky.persistent_sorted_set.conj.call(null, this, $key$$, this.comparator);
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.cljs$core$ITransientCollection$_persistent_BANG_$arity$1 = function($this$$$) {
  return this;
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this$$$) {
  return $APP.me.tonsky.persistent_sorted_set.btset_iter.cljs$core$IFn$_invoke$arity$1 ? $APP.me.tonsky.persistent_sorted_set.btset_iter.cljs$core$IFn$_invoke$arity$1(this) : $APP.me.tonsky.persistent_sorted_set.btset_iter.call(null, this);
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.cljs$core$ITransientSet$_disjoin_BANG_$arity$2 = function($this$$$, $key$$) {
  return $APP.me.tonsky.persistent_sorted_set.disj.cljs$core$IFn$_invoke$arity$3 ? $APP.me.tonsky.persistent_sorted_set.disj.cljs$core$IFn$_invoke$arity$3(this, $key$$, this.comparator) : $APP.me.tonsky.persistent_sorted_set.disj.call(null, this, $key$$, this.comparator);
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($_$$, $new_meta$$) {
  return new $APP.me.tonsky.persistent_sorted_set.BTSet(this.root, this.shift, this.cnt, this.comparator, $new_meta$$, this._hash);
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.cljs$core$ICollection$_conj$arity$2 = function($this$$$, $key$$) {
  return $APP.me.tonsky.persistent_sorted_set.conj.cljs$core$IFn$_invoke$arity$3 ? $APP.me.tonsky.persistent_sorted_set.conj.cljs$core$IFn$_invoke$arity$3(this, $key$$, this.comparator) : $APP.me.tonsky.persistent_sorted_set.conj.call(null, this, $key$$, this.comparator);
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.call = function($unused__11804__auto__$$) {
  switch(arguments.length - 1) {
    case 1:
      return this.cljs$core$IFn$_invoke$arity$1(arguments[1]);
    case 2:
      return this.cljs$core$IFn$_invoke$arity$2(arguments[1], arguments[2]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length - 1)].join(""));
  }
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.apply = function($self__$$, $args66186$$) {
  return this.call.apply(this, [this].concat($APP.cljs.core.aclone($args66186$$)));
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.cljs$core$IFn$_invoke$arity$1 = function($k$$) {
  return this.cljs$core$ILookup$_lookup$arity$2(null, $k$$);
};
$APP.me.tonsky.persistent_sorted_set.BTSet.prototype.cljs$core$IFn$_invoke$arity$2 = function($k$$, $not_found$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k$$, $not_found$$);
};
$APP.me.tonsky.persistent_sorted_set.BTSet.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 6, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$61$root, $APP.cljs$cst$60$shift, $APP.cljs$cst$59$cnt, $APP.cljs$cst$1092$comparator, $APP.cljs$cst$20$meta, $APP.cljs.core.with_meta($APP.cljs$cst$9$_hash, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$10$mutable, !0], null))], null);
};
$APP.me.tonsky.persistent_sorted_set.BTSet.cljs$lang$type = !0;
$APP.me.tonsky.persistent_sorted_set.BTSet.cljs$lang$ctorStr = "me.tonsky.persistent-sorted-set/BTSet";
$APP.me.tonsky.persistent_sorted_set.BTSet.cljs$lang$ctorPrWriter = function($this__5310__auto__$$, $writer__5311__auto__$$, $opt__5312__auto__$$) {
  return $APP.cljs.core._write($writer__5311__auto__$$, "me.tonsky.persistent-sorted-set/BTSet");
};
$APP.me.tonsky.persistent_sorted_set.__GT_BTSet = function($root$$, $shift$$, $cnt$$, $comparator$$, $meta$$, $_hash$$) {
  return new $APP.me.tonsky.persistent_sorted_set.BTSet($root$$, $shift$$, $cnt$$, $comparator$$, $meta$$, $_hash$$);
};
$APP.me.tonsky.persistent_sorted_set.keys_for = function($G__66537_set$$, $path$$) {
  for (var $level$$ = $G__66537_set$$.shift, $G__66538_node$$ = $G__66537_set$$.root;;) {
    if ($level$$ > 0) {
      $G__66537_set$$ = $level$$ - 1, $G__66538_node$$ = $G__66538_node$$.pointers[$APP.me.tonsky.persistent_sorted_set.path_get($path$$, $level$$)], $level$$ = $G__66537_set$$;
    } else {
      return $G__66538_node$$.keys;
    }
  }
};
$APP.me.tonsky.persistent_sorted_set.alter_btset = function($set$$, $root$$, $shift$$, $cnt$$) {
  return new $APP.me.tonsky.persistent_sorted_set.BTSet($root$$, $shift$$, $cnt$$, $set$$.comparator, $set$$.meta, null);
};
$APP.me.tonsky.persistent_sorted_set._next_path = function($node$$, $path$$, $level$$) {
  var $idx$$ = $APP.me.tonsky.persistent_sorted_set.path_get($path$$, $level$$);
  if ($level$$ > 0) {
    var $G__66216$$ = $node$$.pointers[$idx$$], $G__66218$$ = $level$$ - 1;
    $path$$ = $APP.me.tonsky.persistent_sorted_set._next_path.cljs$core$IFn$_invoke$arity$3 ? $APP.me.tonsky.persistent_sorted_set._next_path.cljs$core$IFn$_invoke$arity$3($G__66216$$, $path$$, $G__66218$$) : $APP.me.tonsky.persistent_sorted_set._next_path.call(null, $G__66216$$, $path$$, $G__66218$$);
    return $path$$ == null ? $idx$$ + 1 < $node$$.pointers.length ? $APP.me.tonsky.persistent_sorted_set.path_set(0, $level$$, $idx$$ + 1) : null : $APP.me.tonsky.persistent_sorted_set.path_set($path$$, $level$$, $idx$$);
  }
  return $idx$$ + 1 < $node$$.keys.length ? $APP.me.tonsky.persistent_sorted_set.path_set(0, 0, $idx$$ + 1) : null;
};
$APP.me.tonsky.persistent_sorted_set._rpath = function($node$jscomp$555_node__$1$$, $G__66540_path$jscomp$84_path__$1$$, $G__66541_level$$) {
  for (;;) {
    if ($G__66541_level$$ > 0) {
      var $G__66539_arr__65945__auto__$$ = $node$jscomp$555_node__$1$$.pointers;
      $G__66539_arr__65945__auto__$$ = $G__66539_arr__65945__auto__$$[$G__66539_arr__65945__auto__$$.length - 1];
      $G__66540_path$jscomp$84_path__$1$$ = $APP.me.tonsky.persistent_sorted_set.path_set($G__66540_path$jscomp$84_path__$1$$, $G__66541_level$$, $node$jscomp$555_node__$1$$.pointers.length - 1);
      --$G__66541_level$$;
      $node$jscomp$555_node__$1$$ = $G__66539_arr__65945__auto__$$;
    } else {
      return $APP.me.tonsky.persistent_sorted_set.path_set($G__66540_path$jscomp$84_path__$1$$, 0, $node$jscomp$555_node__$1$$.keys.length - 1);
    }
  }
};
$APP.me.tonsky.persistent_sorted_set.next_path = function($set$$, $or__5025__auto__$jscomp$449_path$$) {
  if ($or__5025__auto__$jscomp$449_path$$ < 0) {
    return 0;
  }
  $or__5025__auto__$jscomp$449_path$$ = $APP.me.tonsky.persistent_sorted_set._next_path($set$$.root, $or__5025__auto__$jscomp$449_path$$, $set$$.shift);
  return $APP.cljs.core.truth_($or__5025__auto__$jscomp$449_path$$) ? $or__5025__auto__$jscomp$449_path$$ : $APP.me.tonsky.persistent_sorted_set.path_inc($APP.me.tonsky.persistent_sorted_set._rpath($set$$.root, 0, $set$$.shift));
};
$APP.me.tonsky.persistent_sorted_set._prev_path = function($node$$, $path$$, $level$$) {
  var $idx$$ = $APP.me.tonsky.persistent_sorted_set.path_get($path$$, $level$$);
  if (0 === $level$$ && 0 === $idx$$) {
    return null;
  }
  if (0 === $level$$) {
    return $APP.me.tonsky.persistent_sorted_set.path_set(0, 0, $idx$$ - 1);
  }
  if ($idx$$ >= $APP.me.tonsky.persistent_sorted_set.node_len($node$$)) {
    return $APP.me.tonsky.persistent_sorted_set._rpath($node$$, $path$$, $level$$);
  }
  var $G__66221$jscomp$inline_6782_path_SINGLEQUOTE_$$ = $node$$.pointers[$idx$$];
  var $G__66223$$ = $level$$ - 1;
  $G__66221$jscomp$inline_6782_path_SINGLEQUOTE_$$ = $APP.me.tonsky.persistent_sorted_set._prev_path.cljs$core$IFn$_invoke$arity$3 ? $APP.me.tonsky.persistent_sorted_set._prev_path.cljs$core$IFn$_invoke$arity$3($G__66221$jscomp$inline_6782_path_SINGLEQUOTE_$$, $path$$, $G__66223$$) : $APP.me.tonsky.persistent_sorted_set._prev_path.call(null, $G__66221$jscomp$inline_6782_path_SINGLEQUOTE_$$, $path$$, $G__66223$$);
  if ($G__66221$jscomp$inline_6782_path_SINGLEQUOTE_$$ != null) {
    return $APP.me.tonsky.persistent_sorted_set.path_set($G__66221$jscomp$inline_6782_path_SINGLEQUOTE_$$, $level$$, $idx$$);
  }
  if (0 === $idx$$) {
    return null;
  }
  $node$$ = $APP.me.tonsky.persistent_sorted_set._rpath($node$$.pointers[$idx$$ - 1], $path$$, $level$$ - 1);
  return $APP.me.tonsky.persistent_sorted_set.path_set($node$$, $level$$, $idx$$ - 1);
};
$APP.me.tonsky.persistent_sorted_set.prev_path = function($or__5025__auto__$jscomp$450_set$$, $path$$) {
  if ($APP.me.tonsky.persistent_sorted_set.path_get($path$$, $or__5025__auto__$jscomp$450_set$$.shift + 1) > 0) {
    return $APP.me.tonsky.persistent_sorted_set._rpath($or__5025__auto__$jscomp$450_set$$.root, $path$$, $or__5025__auto__$jscomp$450_set$$.shift);
  }
  $or__5025__auto__$jscomp$450_set$$ = $APP.me.tonsky.persistent_sorted_set._prev_path($or__5025__auto__$jscomp$450_set$$.root, $path$$, $or__5025__auto__$jscomp$450_set$$.shift);
  return $APP.cljs.core.truth_($or__5025__auto__$jscomp$450_set$$) ? $or__5025__auto__$jscomp$450_set$$ : $APP.me.tonsky.persistent_sorted_set.path_dec(0);
};
$APP.me.tonsky.persistent_sorted_set.btset_iter = function($set$$) {
  if ($APP.me.tonsky.persistent_sorted_set.node_len($set$$.root) > 0) {
    var $right$jscomp$24_rpath$$ = $APP.me.tonsky.persistent_sorted_set._rpath($set$$.root, 0, $set$$.shift);
    $right$jscomp$24_rpath$$ = $APP.me.tonsky.persistent_sorted_set.next_path($set$$, $right$jscomp$24_rpath$$);
    return $APP.me.tonsky.persistent_sorted_set.iter.cljs$core$IFn$_invoke$arity$3 ? $APP.me.tonsky.persistent_sorted_set.iter.cljs$core$IFn$_invoke$arity$3($set$$, 0, $right$jscomp$24_rpath$$) : $APP.me.tonsky.persistent_sorted_set.iter.call(null, $set$$, 0, $right$jscomp$24_rpath$$);
  }
  return null;
};
$APP.me.tonsky.persistent_sorted_set.Chunk = function($arr$$, $off$$, $end$$) {
  this.arr = $arr$$;
  this.off = $off$$;
  this.end = $end$$;
  this.cljs$lang$protocol_mask$partition0$ = 524306;
  this.cljs$lang$protocol_mask$partition1$ = 0;
};
$APP.me.tonsky.persistent_sorted_set.Chunk.prototype.cljs$core$ICounted$_count$arity$1 = function($_$$) {
  return this.end - this.off;
};
$APP.me.tonsky.persistent_sorted_set.Chunk.prototype.cljs$core$IIndexed$_nth$arity$2 = function($this$$$, $i$$) {
  return this.arr[this.off + $i$$];
};
$APP.me.tonsky.persistent_sorted_set.Chunk.prototype.cljs$core$IIndexed$_nth$arity$3 = function($this$$$, $i$$, $not_found$$) {
  return $i$$ >= 0 && $i$$ < this.end - this.off ? this.arr[this.off + $i$$] : $not_found$$;
};
$APP.me.tonsky.persistent_sorted_set.Chunk.prototype.cljs$core$IChunk$ = $APP.cljs.core.PROTOCOL_SENTINEL;
$APP.me.tonsky.persistent_sorted_set.Chunk.prototype.cljs$core$IChunk$_drop_first$arity$1 = function($this$$$) {
  if (this.off === this.end) {
    throw Error("-drop-first of empty chunk");
  }
  return new $APP.cljs.core.ArrayChunk(this.arr, this.off + 1, this.end);
};
$APP.me.tonsky.persistent_sorted_set.Chunk.prototype.cljs$core$IReduce$_reduce$arity$2 = function($this$$$, $f$$) {
  return this.off === this.end ? $f$$.cljs$core$IFn$_invoke$arity$0 ? $f$$.cljs$core$IFn$_invoke$arity$0() : $f$$.call(null) : $APP.cljs.core._reduce(this.cljs$core$IChunk$_drop_first$arity$1(null), $f$$, this.arr[this.off]);
};
$APP.me.tonsky.persistent_sorted_set.Chunk.prototype.cljs$core$IReduce$_reduce$arity$3 = function($G__66546_n$jscomp$382_this$$$, $f$$, $G__66247$jscomp$inline_6786_start$jscomp$239_val$$) {
  for ($G__66546_n$jscomp$382_this$$$ = this.off;;) {
    if ($G__66546_n$jscomp$382_this$$$ < this.end) {
      var $G__66248$$ = this.arr[$G__66546_n$jscomp$382_this$$$];
      $G__66247$jscomp$inline_6786_start$jscomp$239_val$$ = $f$$.cljs$core$IFn$_invoke$arity$2 ? $f$$.cljs$core$IFn$_invoke$arity$2($G__66247$jscomp$inline_6786_start$jscomp$239_val$$, $G__66248$$) : $f$$.call(null, $G__66247$jscomp$inline_6786_start$jscomp$239_val$$, $G__66248$$);
      if ($APP.cljs.core.reduced_QMARK_($G__66247$jscomp$inline_6786_start$jscomp$239_val$$)) {
        return $APP.cljs.core.deref($G__66247$jscomp$inline_6786_start$jscomp$239_val$$);
      }
      $G__66546_n$jscomp$382_this$$$ += 1;
    } else {
      return $G__66247$jscomp$inline_6786_start$jscomp$239_val$$;
    }
  }
};
$APP.me.tonsky.persistent_sorted_set.Chunk.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$18$arr, $APP.cljs$cst$31$off, $APP.cljs$cst$30$end], null);
};
$APP.me.tonsky.persistent_sorted_set.Chunk.cljs$lang$type = !0;
$APP.me.tonsky.persistent_sorted_set.Chunk.cljs$lang$ctorStr = "me.tonsky.persistent-sorted-set/Chunk";
$APP.me.tonsky.persistent_sorted_set.Chunk.cljs$lang$ctorPrWriter = function($this__5310__auto__$$, $writer__5311__auto__$$, $opt__5312__auto__$$) {
  return $APP.cljs.core._write($writer__5311__auto__$$, "me.tonsky.persistent-sorted-set/Chunk");
};
$APP.me.tonsky.persistent_sorted_set.__GT_Chunk = function($arr$$, $off$$, $end$$) {
  return new $APP.me.tonsky.persistent_sorted_set.Chunk($arr$$, $off$$, $end$$);
};
$APP.me.tonsky.persistent_sorted_set.IIter = function() {
};
var me$tonsky$persistent_sorted_set$IIter$_copy$dyn_66547 = function($this$$$, $left$$, $right$$) {
  var $m__5372__auto__$jscomp$684_m__5374__auto__$$ = $APP.me.tonsky.persistent_sorted_set._copy[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
  if ($m__5372__auto__$jscomp$684_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$684_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$684_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($this$$$, $left$$, $right$$) : $m__5372__auto__$jscomp$684_m__5374__auto__$$.call(null, $this$$$, $left$$, $right$$);
  }
  $m__5372__auto__$jscomp$684_m__5374__auto__$$ = $APP.me.tonsky.persistent_sorted_set._copy._;
  if ($m__5372__auto__$jscomp$684_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$684_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$684_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($this$$$, $left$$, $right$$) : $m__5372__auto__$jscomp$684_m__5374__auto__$$.call(null, $this$$$, $left$$, $right$$);
  }
  throw $APP.cljs.core.missing_protocol("IIter.-copy", $this$$$);
};
$APP.me.tonsky.persistent_sorted_set._copy = function($this$$$, $left$$, $right$$) {
  return $this$$$ != null && $this$$$.me$tonsky$persistent_sorted_set$IIter$_copy$arity$3 != null ? $this$$$.me$tonsky$persistent_sorted_set$IIter$_copy$arity$3($this$$$, $left$$, $right$$) : me$tonsky$persistent_sorted_set$IIter$_copy$dyn_66547($this$$$, $left$$, $right$$);
};
$APP.me.tonsky.persistent_sorted_set.ISeek = function() {
};
var me$tonsky$persistent_sorted_set$ISeek$_seek$dyn_66548 = function() {
  var $G__66549$$ = null, $G__66549__2$$ = function($this$$$, $key$$) {
    var $m__5372__auto__$jscomp$685_m__5374__auto__$$ = $APP.me.tonsky.persistent_sorted_set._seek[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
    if ($m__5372__auto__$jscomp$685_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$685_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$685_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($this$$$, $key$$) : $m__5372__auto__$jscomp$685_m__5374__auto__$$.call(null, $this$$$, $key$$);
    }
    $m__5372__auto__$jscomp$685_m__5374__auto__$$ = $APP.me.tonsky.persistent_sorted_set._seek._;
    if ($m__5372__auto__$jscomp$685_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$685_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$685_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($this$$$, $key$$) : $m__5372__auto__$jscomp$685_m__5374__auto__$$.call(null, $this$$$, $key$$);
    }
    throw $APP.cljs.core.missing_protocol("ISeek.-seek", $this$$$);
  }, $G__66549__3$$ = function($this$$$, $key$$, $comparator$$) {
    var $m__5372__auto__$jscomp$686_m__5374__auto__$$ = $APP.me.tonsky.persistent_sorted_set._seek[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
    if ($m__5372__auto__$jscomp$686_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$686_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$686_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($this$$$, $key$$, $comparator$$) : $m__5372__auto__$jscomp$686_m__5374__auto__$$.call(null, $this$$$, $key$$, $comparator$$);
    }
    $m__5372__auto__$jscomp$686_m__5374__auto__$$ = $APP.me.tonsky.persistent_sorted_set._seek._;
    if ($m__5372__auto__$jscomp$686_m__5374__auto__$$ != null) {
      return $m__5372__auto__$jscomp$686_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$686_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($this$$$, $key$$, $comparator$$) : $m__5372__auto__$jscomp$686_m__5374__auto__$$.call(null, $this$$$, $key$$, $comparator$$);
    }
    throw $APP.cljs.core.missing_protocol("ISeek.-seek", $this$$$);
  };
  $G__66549$$ = function($this$$$, $key$$, $comparator$$) {
    switch(arguments.length) {
      case 2:
        return $G__66549__2$$.call(this, $this$$$, $key$$);
      case 3:
        return $G__66549__3$$.call(this, $this$$$, $key$$, $comparator$$);
    }
    throw Error("Invalid arity: " + arguments.length);
  };
  $G__66549$$.cljs$core$IFn$_invoke$arity$2 = $G__66549__2$$;
  $G__66549$$.cljs$core$IFn$_invoke$arity$3 = $G__66549__3$$;
  return $G__66549$$;
}();
$APP.me.tonsky.persistent_sorted_set._seek = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return $APP.me.tonsky.persistent_sorted_set._seek.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return $APP.me.tonsky.persistent_sorted_set._seek.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
$APP.me.tonsky.persistent_sorted_set._seek.cljs$core$IFn$_invoke$arity$2 = function($this$$$, $key$$) {
  return $this$$$ != null && $this$$$.me$tonsky$persistent_sorted_set$ISeek$_seek$arity$2 != null ? $this$$$.me$tonsky$persistent_sorted_set$ISeek$_seek$arity$2($this$$$, $key$$) : me$tonsky$persistent_sorted_set$ISeek$_seek$dyn_66548($this$$$, $key$$);
};
$APP.me.tonsky.persistent_sorted_set._seek.cljs$core$IFn$_invoke$arity$3 = function($this$$$, $key$$, $comparator$$) {
  return $this$$$ != null && $this$$$.me$tonsky$persistent_sorted_set$ISeek$_seek$arity$3 != null ? $this$$$.me$tonsky$persistent_sorted_set$ISeek$_seek$arity$3($this$$$, $key$$, $comparator$$) : me$tonsky$persistent_sorted_set$ISeek$_seek$dyn_66548($this$$$, $key$$, $comparator$$);
};
$APP.me.tonsky.persistent_sorted_set._seek.cljs$lang$maxFixedArity = 3;
$APP.me.tonsky.persistent_sorted_set.Iter = function($set$$, $left$$, $right$$, $keys$$, $idx$$) {
  this.set = $set$$;
  this.left = $left$$;
  this.right = $right$$;
  this.keys = $keys$$;
  this.idx = $idx$$;
  this.cljs$lang$protocol_mask$partition0$ = 2309488832;
  this.cljs$lang$protocol_mask$partition1$ = 1536;
};
$APP.me.tonsky.persistent_sorted_set.Iter.prototype.toString = function() {
  return $APP.cljs.core.pr_str_STAR_(this);
};
$APP.me.tonsky.persistent_sorted_set.Iter.prototype.me$tonsky$persistent_sorted_set$ISeek$ = $APP.cljs.core.PROTOCOL_SENTINEL;
$APP.me.tonsky.persistent_sorted_set.Iter.prototype.me$tonsky$persistent_sorted_set$ISeek$_seek$arity$2 = function($this$$$, $key$$) {
  return this.me$tonsky$persistent_sorted_set$ISeek$_seek$arity$3(null, $key$$, this.set.comparator);
};
$APP.me.tonsky.persistent_sorted_set.Iter.prototype.me$tonsky$persistent_sorted_set$ISeek$_seek$arity$3 = function($JSCompiler_temp_const$jscomp$1477_this$$$, $key$jscomp$267_temp__5829__auto__$$, $cmp$$) {
  if ($key$jscomp$267_temp__5829__auto__$$ == null) {
    throw Error("seek can't be called with a nil key!");
  }
  $JSCompiler_temp_const$jscomp$1477_this$$$ = $APP.cljs.core;
  var $JSCompiler_temp_const$$ = $JSCompiler_temp_const$jscomp$1477_this$$$.nat_int_QMARK_;
  var $G__66279$jscomp$inline_6789_JSCompiler_inline_result$$ = this.keys[this.idx];
  $G__66279$jscomp$inline_6789_JSCompiler_inline_result$$ = $cmp$$.cljs$core$IFn$_invoke$arity$2 ? $cmp$$.cljs$core$IFn$_invoke$arity$2($G__66279$jscomp$inline_6789_JSCompiler_inline_result$$, $key$jscomp$267_temp__5829__auto__$$) : $cmp$$.call(null, $G__66279$jscomp$inline_6789_JSCompiler_inline_result$$, $key$jscomp$267_temp__5829__auto__$$);
  if ($JSCompiler_temp_const$$.call($JSCompiler_temp_const$jscomp$1477_this$$$, $G__66279$jscomp$inline_6789_JSCompiler_inline_result$$)) {
    return this;
  }
  $key$jscomp$267_temp__5829__auto__$$ = $APP.me.tonsky.persistent_sorted_set._seek_STAR_.cljs$core$IFn$_invoke$arity$3 ? $APP.me.tonsky.persistent_sorted_set._seek_STAR_.cljs$core$IFn$_invoke$arity$3(this.set, $key$jscomp$267_temp__5829__auto__$$, $cmp$$) : $APP.me.tonsky.persistent_sorted_set._seek_STAR_.call(null, this.set, $key$jscomp$267_temp__5829__auto__$$, $cmp$$);
  return $key$jscomp$267_temp__5829__auto__$$ == null ? null : new $APP.me.tonsky.persistent_sorted_set.Iter(this.set, $key$jscomp$267_temp__5829__auto__$$, this.right, $APP.me.tonsky.persistent_sorted_set.keys_for(this.set, $key$jscomp$267_temp__5829__auto__$$), $APP.me.tonsky.persistent_sorted_set.path_get($key$jscomp$267_temp__5829__auto__$$, 0));
};
$APP.me.tonsky.persistent_sorted_set.Iter.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this$$$, $writer$$, $opts$$) {
  return $APP.cljs.core.pr_sequential_writer($writer$$, $APP.cljs.core.pr_writer, "(", " ", ")", $opts$$, $APP.cljs.core.seq(this));
};
$APP.me.tonsky.persistent_sorted_set.Iter.prototype.cljs$core$INext$_next$arity$1 = function($left_SINGLEQUOTE_$jscomp$1_this$$$) {
  if ($APP.cljs.core.truth_(this.keys)) {
    if (this.idx + 1 < this.keys.length) {
      return $left_SINGLEQUOTE_$jscomp$1_this$$$ = $APP.me.tonsky.persistent_sorted_set.path_inc(this.left), $APP.me.tonsky.persistent_sorted_set.path_lt($left_SINGLEQUOTE_$jscomp$1_this$$$, this.right) ? new $APP.me.tonsky.persistent_sorted_set.Iter(this.set, $left_SINGLEQUOTE_$jscomp$1_this$$$, this.right, this.keys, this.idx + 1) : null;
    }
    $left_SINGLEQUOTE_$jscomp$1_this$$$ = $APP.me.tonsky.persistent_sorted_set.next_path(this.set, this.left);
    return $APP.me.tonsky.persistent_sorted_set.path_lt($left_SINGLEQUOTE_$jscomp$1_this$$$, this.right) ? this.me$tonsky$persistent_sorted_set$IIter$_copy$arity$3(null, $left_SINGLEQUOTE_$jscomp$1_this$$$, this.right) : null;
  }
  return null;
};
$APP.me.tonsky.persistent_sorted_set.Iter.prototype.cljs$core$IReversible$_rseq$arity$1 = function($G__66283_this$$$) {
  if ($APP.cljs.core.truth_(this.keys)) {
    $G__66283_this$$$ = this.set;
    var $G__66284$$ = $APP.me.tonsky.persistent_sorted_set.prev_path(this.set, this.left), $G__66285$$ = $APP.me.tonsky.persistent_sorted_set.prev_path(this.set, this.right);
    return $APP.me.tonsky.persistent_sorted_set.riter.cljs$core$IFn$_invoke$arity$3 ? $APP.me.tonsky.persistent_sorted_set.riter.cljs$core$IFn$_invoke$arity$3($G__66283_this$$$, $G__66284$$, $G__66285$$) : $APP.me.tonsky.persistent_sorted_set.riter.call(null, $G__66283_this$$$, $G__66284$$, $G__66285$$);
  }
  return null;
};
$APP.me.tonsky.persistent_sorted_set.Iter.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this$$$, $other$$) {
  return $APP.cljs.core.equiv_sequential(this, $other$$);
};
$APP.me.tonsky.persistent_sorted_set.Iter.prototype.cljs$core$IReduce$_reduce$arity$2 = function($first$jscomp$10_this$$$, $f$$) {
  if (this.keys == null) {
    return $f$$.cljs$core$IFn$_invoke$arity$0 ? $f$$.cljs$core$IFn$_invoke$arity$0() : $f$$.call(null);
  }
  $first$jscomp$10_this$$$ = this.cljs$core$ISeq$_first$arity$1(null);
  var $temp__5827__auto__$$ = this.cljs$core$INext$_next$arity$1(null);
  return $temp__5827__auto__$$ == null ? $first$jscomp$10_this$$$ : $APP.cljs.core._reduce($temp__5827__auto__$$, $f$$, $first$jscomp$10_this$$$);
};
$APP.me.tonsky.persistent_sorted_set.Iter.prototype.cljs$core$IReduce$_reduce$arity$3 = function($left_SINGLEQUOTE_$jscomp$2_left__$1$jscomp$2_this$$$, $f$$, $G__66287$jscomp$inline_6792_G__66569_G__66573_acc$jscomp$60_new_acc$jscomp$1_start$$) {
  $left_SINGLEQUOTE_$jscomp$2_left__$1$jscomp$2_this$$$ = this.left;
  for (var $G__66567_G__66571_keys__$1$$ = this.keys, $G__66568_G__66572_idx__$1$$ = this.idx;;) {
    if ($G__66567_G__66571_keys__$1$$ == null) {
      return $G__66287$jscomp$inline_6792_G__66569_G__66573_acc$jscomp$60_new_acc$jscomp$1_start$$;
    }
    var $G__66288$$ = $G__66567_G__66571_keys__$1$$[$G__66568_G__66572_idx__$1$$];
    $G__66287$jscomp$inline_6792_G__66569_G__66573_acc$jscomp$60_new_acc$jscomp$1_start$$ = $f$$.cljs$core$IFn$_invoke$arity$2 ? $f$$.cljs$core$IFn$_invoke$arity$2($G__66287$jscomp$inline_6792_G__66569_G__66573_acc$jscomp$60_new_acc$jscomp$1_start$$, $G__66288$$) : $f$$.call(null, $G__66287$jscomp$inline_6792_G__66569_G__66573_acc$jscomp$60_new_acc$jscomp$1_start$$, $G__66288$$);
    if ($APP.cljs.core.reduced_QMARK_($G__66287$jscomp$inline_6792_G__66569_G__66573_acc$jscomp$60_new_acc$jscomp$1_start$$)) {
      return $APP.cljs.core.deref($G__66287$jscomp$inline_6792_G__66569_G__66573_acc$jscomp$60_new_acc$jscomp$1_start$$);
    }
    if ($G__66568_G__66572_idx__$1$$ + 1 < $G__66567_G__66571_keys__$1$$.length) {
      if ($left_SINGLEQUOTE_$jscomp$2_left__$1$jscomp$2_this$$$ = $APP.me.tonsky.persistent_sorted_set.path_inc($left_SINGLEQUOTE_$jscomp$2_left__$1$jscomp$2_this$$$), $APP.me.tonsky.persistent_sorted_set.path_lt($left_SINGLEQUOTE_$jscomp$2_left__$1$jscomp$2_this$$$, this.right)) {
        $G__66568_G__66572_idx__$1$$ += 1;
        continue;
      } else {
        return $G__66287$jscomp$inline_6792_G__66569_G__66573_acc$jscomp$60_new_acc$jscomp$1_start$$;
      }
    } else {
      if ($left_SINGLEQUOTE_$jscomp$2_left__$1$jscomp$2_this$$$ = $APP.me.tonsky.persistent_sorted_set.next_path(this.set, $left_SINGLEQUOTE_$jscomp$2_left__$1$jscomp$2_this$$$), $APP.me.tonsky.persistent_sorted_set.path_lt($left_SINGLEQUOTE_$jscomp$2_left__$1$jscomp$2_this$$$, this.right)) {
        $G__66288$$ = $left_SINGLEQUOTE_$jscomp$2_left__$1$jscomp$2_this$$$;
        $G__66567_G__66571_keys__$1$$ = $APP.me.tonsky.persistent_sorted_set.keys_for(this.set, $left_SINGLEQUOTE_$jscomp$2_left__$1$jscomp$2_this$$$);
        $G__66568_G__66572_idx__$1$$ = $APP.me.tonsky.persistent_sorted_set.path_get($left_SINGLEQUOTE_$jscomp$2_left__$1$jscomp$2_this$$$, 0);
        $left_SINGLEQUOTE_$jscomp$2_left__$1$jscomp$2_this$$$ = $G__66288$$;
        continue;
      } else {
        return $G__66287$jscomp$inline_6792_G__66569_G__66573_acc$jscomp$60_new_acc$jscomp$1_start$$;
      }
    }
    break;
  }
};
$APP.me.tonsky.persistent_sorted_set.Iter.prototype.cljs$core$ISeq$_first$arity$1 = function($this$$$) {
  return $APP.cljs.core.truth_(this.keys) ? this.keys[this.idx] : null;
};
$APP.me.tonsky.persistent_sorted_set.Iter.prototype.cljs$core$ISeq$_rest$arity$1 = function($or__5025__auto__$jscomp$451_this$$$) {
  $or__5025__auto__$jscomp$451_this$$$ = this.cljs$core$INext$_next$arity$1(null);
  return $APP.cljs.core.truth_($or__5025__auto__$jscomp$451_this$$$) ? $or__5025__auto__$jscomp$451_this$$$ : $APP.cljs.core.List.EMPTY;
};
$APP.me.tonsky.persistent_sorted_set.Iter.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this$$$) {
  return $APP.cljs.core.truth_(this.keys) ? this : null;
};
$APP.me.tonsky.persistent_sorted_set.Iter.prototype.cljs$core$IChunkedSeq$_chunked_first$arity$1 = function($end_idx_this$$$) {
  $end_idx_this$$$ = $APP.me.tonsky.persistent_sorted_set.path_same_leaf(this.left, this.right) ? $APP.me.tonsky.persistent_sorted_set.path_get(this.right, 0) : this.keys.length;
  return new $APP.me.tonsky.persistent_sorted_set.Chunk(this.keys, this.idx, $end_idx_this$$$);
};
$APP.me.tonsky.persistent_sorted_set.Iter.prototype.cljs$core$IChunkedSeq$_chunked_rest$arity$1 = function($or__5025__auto__$jscomp$452_this$$$) {
  $or__5025__auto__$jscomp$452_this$$$ = this.cljs$core$IChunkedNext$_chunked_next$arity$1(null);
  return $APP.cljs.core.truth_($or__5025__auto__$jscomp$452_this$$$) ? $or__5025__auto__$jscomp$452_this$$$ : $APP.cljs.core.List.EMPTY;
};
$APP.me.tonsky.persistent_sorted_set.Iter.prototype.me$tonsky$persistent_sorted_set$IIter$ = $APP.cljs.core.PROTOCOL_SENTINEL;
$APP.me.tonsky.persistent_sorted_set.Iter.prototype.me$tonsky$persistent_sorted_set$IIter$_copy$arity$3 = function($_$$, $l$$, $r$$) {
  return new $APP.me.tonsky.persistent_sorted_set.Iter(this.set, $l$$, $r$$, $APP.me.tonsky.persistent_sorted_set.keys_for(this.set, $l$$), $APP.me.tonsky.persistent_sorted_set.path_get($l$$, 0));
};
$APP.me.tonsky.persistent_sorted_set.Iter.prototype.cljs$core$IChunkedNext$_chunked_next$arity$1 = function($last_left_SINGLEQUOTE_$jscomp$3_this$$$) {
  $last_left_SINGLEQUOTE_$jscomp$3_this$$$ = $APP.me.tonsky.persistent_sorted_set.path_set(this.left, 0, this.keys.length - 1);
  $last_left_SINGLEQUOTE_$jscomp$3_this$$$ = $APP.me.tonsky.persistent_sorted_set.next_path(this.set, $last_left_SINGLEQUOTE_$jscomp$3_this$$$);
  return $APP.me.tonsky.persistent_sorted_set.path_lt($last_left_SINGLEQUOTE_$jscomp$3_this$$$, this.right) ? this.me$tonsky$persistent_sorted_set$IIter$_copy$arity$3(null, $last_left_SINGLEQUOTE_$jscomp$3_this$$$, this.right) : null;
};
$APP.me.tonsky.persistent_sorted_set.Iter.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1228$set, $APP.cljs$cst$92$left, $APP.cljs$cst$93$right, $APP.cljs$cst$69$keys, $APP.cljs$cst$1256$idx], null);
};
$APP.me.tonsky.persistent_sorted_set.Iter.cljs$lang$type = !0;
$APP.me.tonsky.persistent_sorted_set.Iter.cljs$lang$ctorStr = "me.tonsky.persistent-sorted-set/Iter";
$APP.me.tonsky.persistent_sorted_set.Iter.cljs$lang$ctorPrWriter = function($this__5310__auto__$$, $writer__5311__auto__$$, $opt__5312__auto__$$) {
  return $APP.cljs.core._write($writer__5311__auto__$$, "me.tonsky.persistent-sorted-set/Iter");
};
$APP.me.tonsky.persistent_sorted_set.__GT_Iter = function($set$$, $left$$, $right$$, $keys$$, $idx$$) {
  return new $APP.me.tonsky.persistent_sorted_set.Iter($set$$, $left$$, $right$$, $keys$$, $idx$$);
};
$APP.me.tonsky.persistent_sorted_set.iter = function($set$$, $left$$, $right$$) {
  return new $APP.me.tonsky.persistent_sorted_set.Iter($set$$, $left$$, $right$$, $APP.me.tonsky.persistent_sorted_set.keys_for($set$$, $left$$), $APP.me.tonsky.persistent_sorted_set.path_get($left$$, 0));
};
$APP.me.tonsky.persistent_sorted_set.ReverseIter = function($set$$, $left$$, $right$$, $keys$$, $idx$$) {
  this.set = $set$$;
  this.left = $left$$;
  this.right = $right$$;
  this.keys = $keys$$;
  this.idx = $idx$$;
  this.cljs$lang$protocol_mask$partition0$ = 2308964544;
  this.cljs$lang$protocol_mask$partition1$ = 0;
};
$APP.me.tonsky.persistent_sorted_set.ReverseIter.prototype.toString = function() {
  return $APP.cljs.core.pr_str_STAR_(this);
};
$APP.me.tonsky.persistent_sorted_set.ReverseIter.prototype.me$tonsky$persistent_sorted_set$ISeek$ = $APP.cljs.core.PROTOCOL_SENTINEL;
$APP.me.tonsky.persistent_sorted_set.ReverseIter.prototype.me$tonsky$persistent_sorted_set$ISeek$_seek$arity$2 = function($this$$$, $key$$) {
  return this.me$tonsky$persistent_sorted_set$ISeek$_seek$arity$3(null, $key$$, this.set.comparator);
};
$APP.me.tonsky.persistent_sorted_set.ReverseIter.prototype.me$tonsky$persistent_sorted_set$ISeek$_seek$arity$3 = function($JSCompiler_temp_const$jscomp$1480_this$$$, $key$$, $cmp$$) {
  if ($key$$ == null) {
    throw Error("seek can't be called with a nil key!");
  }
  $JSCompiler_temp_const$jscomp$1480_this$$$ = $APP.cljs.core;
  var $JSCompiler_temp_const$$ = $JSCompiler_temp_const$jscomp$1480_this$$$.nat_int_QMARK_;
  var $G__66298$jscomp$inline_6796_JSCompiler_inline_result$$ = this.keys[this.idx];
  $G__66298$jscomp$inline_6796_JSCompiler_inline_result$$ = $cmp$$.cljs$core$IFn$_invoke$arity$2 ? $cmp$$.cljs$core$IFn$_invoke$arity$2($key$$, $G__66298$jscomp$inline_6796_JSCompiler_inline_result$$) : $cmp$$.call(null, $key$$, $G__66298$jscomp$inline_6796_JSCompiler_inline_result$$);
  if ($JSCompiler_temp_const$$.call($JSCompiler_temp_const$jscomp$1480_this$$$, $G__66298$jscomp$inline_6796_JSCompiler_inline_result$$)) {
    return this;
  }
  $key$$ = $APP.me.tonsky.persistent_sorted_set.prev_path(this.set, $APP.me.tonsky.persistent_sorted_set._rseek_STAR_.cljs$core$IFn$_invoke$arity$3 ? $APP.me.tonsky.persistent_sorted_set._rseek_STAR_.cljs$core$IFn$_invoke$arity$3(this.set, $key$$, $cmp$$) : $APP.me.tonsky.persistent_sorted_set._rseek_STAR_.call(null, this.set, $key$$, $cmp$$));
  return $APP.cljs.core.nat_int_QMARK_($key$$) && $APP.me.tonsky.persistent_sorted_set.path_lte(this.left, $key$$) && $APP.me.tonsky.persistent_sorted_set.path_lt($key$$, this.right) ? new $APP.me.tonsky.persistent_sorted_set.ReverseIter(this.set, this.left, $key$$, $APP.me.tonsky.persistent_sorted_set.keys_for(this.set, $key$$), $APP.me.tonsky.persistent_sorted_set.path_get($key$$, 0)) : null;
};
$APP.me.tonsky.persistent_sorted_set.ReverseIter.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this$$$, $writer$$, $opts$$) {
  return $APP.cljs.core.pr_sequential_writer($writer$$, $APP.cljs.core.pr_writer, "(", " ", ")", $opts$$, $APP.cljs.core.seq(this));
};
$APP.me.tonsky.persistent_sorted_set.ReverseIter.prototype.cljs$core$INext$_next$arity$1 = function($right_SINGLEQUOTE_$jscomp$1_this$$$) {
  if ($APP.cljs.core.truth_(this.keys)) {
    if (this.idx > 0) {
      return $right_SINGLEQUOTE_$jscomp$1_this$$$ = $APP.me.tonsky.persistent_sorted_set.path_dec(this.right), $APP.me.tonsky.persistent_sorted_set.path_lt(this.left, $right_SINGLEQUOTE_$jscomp$1_this$$$) ? new $APP.me.tonsky.persistent_sorted_set.ReverseIter(this.set, this.left, $right_SINGLEQUOTE_$jscomp$1_this$$$, this.keys, this.idx - 1) : null;
    }
    $right_SINGLEQUOTE_$jscomp$1_this$$$ = $APP.me.tonsky.persistent_sorted_set.prev_path(this.set, this.right);
    return $APP.me.tonsky.persistent_sorted_set.path_lt(this.left, $right_SINGLEQUOTE_$jscomp$1_this$$$) ? this.me$tonsky$persistent_sorted_set$IIter$_copy$arity$3(null, this.left, $right_SINGLEQUOTE_$jscomp$1_this$$$) : null;
  }
  return null;
};
$APP.me.tonsky.persistent_sorted_set.ReverseIter.prototype.cljs$core$IReversible$_rseq$arity$1 = function($this$$$) {
  return $APP.cljs.core.truth_(this.keys) ? $APP.me.tonsky.persistent_sorted_set.iter(this.set, $APP.me.tonsky.persistent_sorted_set.next_path(this.set, this.left), $APP.me.tonsky.persistent_sorted_set.next_path(this.set, this.right)) : null;
};
$APP.me.tonsky.persistent_sorted_set.ReverseIter.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this$$$, $other$$) {
  return $APP.cljs.core.equiv_sequential(this, $other$$);
};
$APP.me.tonsky.persistent_sorted_set.ReverseIter.prototype.cljs$core$ISeq$_first$arity$1 = function($this$$$) {
  return $APP.cljs.core.truth_(this.keys) ? this.keys[this.idx] : null;
};
$APP.me.tonsky.persistent_sorted_set.ReverseIter.prototype.cljs$core$ISeq$_rest$arity$1 = function($or__5025__auto__$jscomp$453_this$$$) {
  $or__5025__auto__$jscomp$453_this$$$ = this.cljs$core$INext$_next$arity$1(null);
  return $APP.cljs.core.truth_($or__5025__auto__$jscomp$453_this$$$) ? $or__5025__auto__$jscomp$453_this$$$ : $APP.cljs.core.List.EMPTY;
};
$APP.me.tonsky.persistent_sorted_set.ReverseIter.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this$$$) {
  return $APP.cljs.core.truth_(this.keys) ? this : null;
};
$APP.me.tonsky.persistent_sorted_set.ReverseIter.prototype.me$tonsky$persistent_sorted_set$IIter$ = $APP.cljs.core.PROTOCOL_SENTINEL;
$APP.me.tonsky.persistent_sorted_set.ReverseIter.prototype.me$tonsky$persistent_sorted_set$IIter$_copy$arity$3 = function($_$$, $l$$, $r$$) {
  return new $APP.me.tonsky.persistent_sorted_set.ReverseIter(this.set, $l$$, $r$$, $APP.me.tonsky.persistent_sorted_set.keys_for(this.set, $r$$), $APP.me.tonsky.persistent_sorted_set.path_get($r$$, 0));
};
$APP.me.tonsky.persistent_sorted_set.ReverseIter.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1228$set, $APP.cljs$cst$92$left, $APP.cljs$cst$93$right, $APP.cljs$cst$69$keys, $APP.cljs$cst$1256$idx], null);
};
$APP.me.tonsky.persistent_sorted_set.ReverseIter.cljs$lang$type = !0;
$APP.me.tonsky.persistent_sorted_set.ReverseIter.cljs$lang$ctorStr = "me.tonsky.persistent-sorted-set/ReverseIter";
$APP.me.tonsky.persistent_sorted_set.ReverseIter.cljs$lang$ctorPrWriter = function($this__5310__auto__$$, $writer__5311__auto__$$, $opt__5312__auto__$$) {
  return $APP.cljs.core._write($writer__5311__auto__$$, "me.tonsky.persistent-sorted-set/ReverseIter");
};
$APP.me.tonsky.persistent_sorted_set.__GT_ReverseIter = function($set$$, $left$$, $right$$, $keys$$, $idx$$) {
  return new $APP.me.tonsky.persistent_sorted_set.ReverseIter($set$$, $left$$, $right$$, $keys$$, $idx$$);
};
$APP.me.tonsky.persistent_sorted_set.riter = function($set$$, $left$$, $right$$) {
  return new $APP.me.tonsky.persistent_sorted_set.ReverseIter($set$$, $left$$, $right$$, $APP.me.tonsky.persistent_sorted_set.keys_for($set$$, $right$$), $APP.me.tonsky.persistent_sorted_set.path_get($right$$, 0));
};
$APP.me.tonsky.persistent_sorted_set._distance = function($node$$, $left$jscomp$32_level__$1$$, $G__66614_res$jscomp$48_right$$, $G__66322_level$$) {
  var $G__66319_idx_l$$ = $APP.me.tonsky.persistent_sorted_set.path_get($left$jscomp$32_level__$1$$, $G__66322_level$$), $idx_r$$ = $APP.me.tonsky.persistent_sorted_set.path_get($G__66614_res$jscomp$48_right$$, $G__66322_level$$);
  if ($G__66322_level$$ > 0) {
    if ($G__66319_idx_l$$ === $idx_r$$) {
      return $G__66319_idx_l$$ = $node$$.pointers[$G__66319_idx_l$$], --$G__66322_level$$, $APP.me.tonsky.persistent_sorted_set._distance.cljs$core$IFn$_invoke$arity$4 ? $APP.me.tonsky.persistent_sorted_set._distance.cljs$core$IFn$_invoke$arity$4($G__66319_idx_l$$, $left$jscomp$32_level__$1$$, $G__66614_res$jscomp$48_right$$, $G__66322_level$$) : $APP.me.tonsky.persistent_sorted_set._distance.call(null, $G__66319_idx_l$$, $left$jscomp$32_level__$1$$, $G__66614_res$jscomp$48_right$$, $G__66322_level$$);
    }
    $left$jscomp$32_level__$1$$ = $G__66322_level$$;
    for ($G__66614_res$jscomp$48_right$$ = $idx_r$$ - $G__66319_idx_l$$;;) {
      if (0 === $left$jscomp$32_level__$1$$) {
        return $G__66614_res$jscomp$48_right$$;
      }
      $G__66614_res$jscomp$48_right$$ *= $APP.me.tonsky.persistent_sorted_set.avg_len;
      --$left$jscomp$32_level__$1$$;
    }
  } else {
    return $idx_r$$ - $G__66319_idx_l$$;
  }
};
$APP.me.tonsky.persistent_sorted_set.distance = function($set$$, $path_l$$, $path_r$$) {
  return $APP.me.tonsky.persistent_sorted_set.path_eq($path_l$$, $path_r$$) ? 0 : $APP.me.tonsky.persistent_sorted_set.path_eq($APP.me.tonsky.persistent_sorted_set.path_inc($path_l$$), $path_r$$) ? 1 : $APP.me.tonsky.persistent_sorted_set.path_eq($APP.me.tonsky.persistent_sorted_set.next_path($set$$, $path_l$$), $path_r$$) ? 1 : $APP.me.tonsky.persistent_sorted_set._distance($set$$.root, $path_l$$, $path_r$$, $set$$.shift);
};
$APP.me.tonsky.persistent_sorted_set.est_count = function($iter$$) {
  return $APP.me.tonsky.persistent_sorted_set.distance($iter$$.set, $iter$$.left, $iter$$.right);
};
$APP.me.tonsky.persistent_sorted_set._seek_STAR_ = function($G__66619_level$jscomp$66_set$$, $key$$, $comparator$$) {
  if ($key$$ == null) {
    return 0;
  }
  var $G__66617_node$$ = $G__66619_level$jscomp$66_set$$.root, $G__66618_path$$ = 0;
  for ($G__66619_level$jscomp$66_set$$ = $G__66619_level$jscomp$66_set$$.shift;;) {
    var $keys_l$$ = $APP.me.tonsky.persistent_sorted_set.node_len($G__66617_node$$);
    if (0 === $G__66619_level$jscomp$66_set$$) {
      var $idx$jscomp$213_keys$$ = $G__66617_node$$.keys;
      $idx$jscomp$213_keys$$ = $APP.me.tonsky.persistent_sorted_set.binary_search_l($comparator$$, $idx$jscomp$213_keys$$, $keys_l$$ - 1, $key$$);
      return $keys_l$$ === $idx$jscomp$213_keys$$ ? null : $APP.me.tonsky.persistent_sorted_set.path_set($G__66618_path$$, 0, $idx$jscomp$213_keys$$);
    }
    $idx$jscomp$213_keys$$ = $G__66617_node$$.keys;
    $idx$jscomp$213_keys$$ = $APP.me.tonsky.persistent_sorted_set.binary_search_l($comparator$$, $idx$jscomp$213_keys$$, $keys_l$$ - 2, $key$$);
    $G__66617_node$$ = $G__66617_node$$.pointers[$idx$jscomp$213_keys$$];
    $G__66618_path$$ = $APP.me.tonsky.persistent_sorted_set.path_set($G__66618_path$$, $G__66619_level$jscomp$66_set$$, $idx$jscomp$213_keys$$);
    --$G__66619_level$jscomp$66_set$$;
  }
};
$APP.me.tonsky.persistent_sorted_set._rseek_STAR_ = function($G__66623_level$jscomp$67_set$$, $key$$, $comparator$$) {
  if ($key$$ == null) {
    return $APP.me.tonsky.persistent_sorted_set.path_inc($APP.me.tonsky.persistent_sorted_set._rpath($G__66623_level$jscomp$67_set$$.root, 0, $G__66623_level$jscomp$67_set$$.shift));
  }
  var $node$$ = $G__66623_level$jscomp$67_set$$.root, $G__66622_path$jscomp$89_res$$ = 0;
  for ($G__66623_level$jscomp$67_set$$ = $G__66623_level$jscomp$67_set$$.shift;;) {
    var $idx$jscomp$214_keys_l$$ = $APP.me.tonsky.persistent_sorted_set.node_len($node$$);
    if (0 === $G__66623_level$jscomp$67_set$$) {
      var $keys$$ = $node$$.keys;
      $idx$jscomp$214_keys_l$$ = $APP.me.tonsky.persistent_sorted_set.binary_search_r($comparator$$, $keys$$, $idx$jscomp$214_keys_l$$ - 1, $key$$);
      return $G__66622_path$jscomp$89_res$$ = $APP.me.tonsky.persistent_sorted_set.path_set($G__66622_path$jscomp$89_res$$, 0, $idx$jscomp$214_keys_l$$);
    }
    $keys$$ = $node$$.keys;
    $idx$jscomp$214_keys_l$$ = $APP.me.tonsky.persistent_sorted_set.binary_search_r($comparator$$, $keys$$, $idx$jscomp$214_keys_l$$ - 2, $key$$);
    $G__66622_path$jscomp$89_res$$ = $APP.me.tonsky.persistent_sorted_set.path_set($G__66622_path$jscomp$89_res$$, $G__66623_level$jscomp$67_set$$, $idx$jscomp$214_keys_l$$);
    --$G__66623_level$jscomp$67_set$$;
    $node$$ = $node$$.pointers[$idx$jscomp$214_keys_l$$];
  }
};
$APP.me.tonsky.persistent_sorted_set._slice = function($set$$, $key_from_temp__5829__auto__$$, $key_to_till_path$$, $comparator$$) {
  $key_from_temp__5829__auto__$$ = $APP.me.tonsky.persistent_sorted_set._seek_STAR_($set$$, $key_from_temp__5829__auto__$$, $comparator$$);
  if ($key_from_temp__5829__auto__$$ == null) {
    return null;
  }
  $key_to_till_path$$ = $APP.me.tonsky.persistent_sorted_set._rseek_STAR_($set$$, $key_to_till_path$$, $comparator$$);
  return $APP.me.tonsky.persistent_sorted_set.path_lt($key_from_temp__5829__auto__$$, $key_to_till_path$$) ? new $APP.me.tonsky.persistent_sorted_set.Iter($set$$, $key_from_temp__5829__auto__$$, $key_to_till_path$$, $APP.me.tonsky.persistent_sorted_set.keys_for($set$$, $key_from_temp__5829__auto__$$), $APP.me.tonsky.persistent_sorted_set.path_get($key_from_temp__5829__auto__$$, 0)) : null;
};
$APP.me.tonsky.persistent_sorted_set.arr_map_inplace = function($f$$, $arr$$) {
  for (var $len$$ = $arr$$.length, $i_66625$$ = 0;;) {
    if ($i_66625$$ < $len$$) {
      var $JSCompiler_temp_const$$ = $i_66625$$;
      var $G__66330$jscomp$inline_6798_JSCompiler_inline_result$$ = $arr$$[$i_66625$$];
      $G__66330$jscomp$inline_6798_JSCompiler_inline_result$$ = $f$$.cljs$core$IFn$_invoke$arity$1 ? $f$$.cljs$core$IFn$_invoke$arity$1($G__66330$jscomp$inline_6798_JSCompiler_inline_result$$) : $f$$.call(null, $G__66330$jscomp$inline_6798_JSCompiler_inline_result$$);
      $arr$$[$JSCompiler_temp_const$$] = $G__66330$jscomp$inline_6798_JSCompiler_inline_result$$;
      $i_66625$$ += 1;
    } else {
      break;
    }
  }
  return $arr$$;
};
$APP.me.tonsky.persistent_sorted_set.arr_partition_approx = function($min_len$$, $max_len$$, $arr$$) {
  var $chunk_len$$ = $APP.me.tonsky.persistent_sorted_set.avg_len, $len$$ = $arr$$.length, $acc$$ = $APP.cljs.core.transient$($APP.cljs.core.PersistentVector.EMPTY);
  if ($len$$ > 0) {
    for (var $pos_66627$$ = 0;;) {
      var $piece_len_66630_rest_66628$$ = $len$$ - $pos_66627$$;
      if ($piece_len_66630_rest_66628$$ <= $max_len$$) {
        $APP.cljs.core.conj_BANG_.cljs$core$IFn$_invoke$arity$2($acc$$, $arr$$.slice($pos_66627$$));
        break;
      } else {
        $piece_len_66630_rest_66628$$ >= $chunk_len$$ + $min_len$$ ? ($APP.cljs.core.conj_BANG_.cljs$core$IFn$_invoke$arity$2($acc$$, $arr$$.slice($pos_66627$$, $pos_66627$$ + $chunk_len$$)), $pos_66627$$ += $chunk_len$$) : ($piece_len_66630_rest_66628$$ >>>= 1, $APP.cljs.core.conj_BANG_.cljs$core$IFn$_invoke$arity$2($acc$$, $arr$$.slice($pos_66627$$, $pos_66627$$ + $piece_len_66630_rest_66628$$)), $pos_66627$$ += $piece_len_66630_rest_66628$$);
      }
    }
  }
  return $APP.cljs.core.to_array($APP.cljs.core.persistent_BANG_($acc$$));
};
$APP.me.tonsky.persistent_sorted_set.sorted_arr_distinct_QMARK_ = function($arr$$, $cmp$$) {
  var $al$$ = $arr$$.length;
  if ($al$$ <= 1) {
    return !0;
  }
  for (var $i$$ = 1, $G__66633_p$$ = $arr$$[0];;) {
    if ($i$$ >= $al$$) {
      return !0;
    }
    var $e$$ = $arr$$[$i$$];
    if (0 === ($cmp$$.cljs$core$IFn$_invoke$arity$2 ? $cmp$$.cljs$core$IFn$_invoke$arity$2($e$$, $G__66633_p$$) : $cmp$$.call(null, $e$$, $G__66633_p$$))) {
      return !1;
    }
    $G__66633_p$$ = $e$$;
    $i$$ += 1;
  }
};
$APP.me.tonsky.persistent_sorted_set.sorted_arr_distinct = function($arr$$, $cmp$$) {
  if ($APP.me.tonsky.persistent_sorted_set.sorted_arr_distinct_QMARK_($arr$$, $cmp$$)) {
    return $arr$$;
  }
  for (var $al$$ = $arr$$.length, $G__66637_acc$$ = $APP.cljs.core.transient$(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$arr$$[0]], null)), $G__66638_i$$ = 1, $p$$ = $arr$$[0];;) {
    if ($G__66638_i$$ >= $al$$) {
      return $APP.cljs.core.into_array.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.persistent_BANG_($G__66637_acc$$));
    }
    var $G__66636_G__66639_e$$ = $arr$$[$G__66638_i$$];
    0 === ($cmp$$.cljs$core$IFn$_invoke$arity$2 ? $cmp$$.cljs$core$IFn$_invoke$arity$2($G__66636_G__66639_e$$, $p$$) : $cmp$$.call(null, $G__66636_G__66639_e$$, $p$$)) ? ($G__66638_i$$ += 1, $p$$ = $G__66636_G__66639_e$$) : ($G__66637_acc$$ = $APP.cljs.core.conj_BANG_.cljs$core$IFn$_invoke$arity$2($G__66637_acc$$, $G__66636_G__66639_e$$), $G__66638_i$$ += 1, $p$$ = $G__66636_G__66639_e$$);
  }
};
$APP.me.tonsky.persistent_sorted_set.conj = function($set$$, $key$$, $cmp$$) {
  $key$$ = $APP.me.tonsky.persistent_sorted_set.node_conj($set$$.root, $cmp$$, $key$$);
  return $key$$ == null ? $set$$ : $key$$.length === 1 ? $APP.me.tonsky.persistent_sorted_set.alter_btset($set$$, $key$$[0], $set$$.shift, $set$$.cnt + 1) : $APP.me.tonsky.persistent_sorted_set.alter_btset($set$$, new $APP.me.tonsky.persistent_sorted_set.Node($APP.me.tonsky.persistent_sorted_set.arrays.amap($APP.me.tonsky.persistent_sorted_set.node_lim_key, $key$$), $key$$), $set$$.shift + 1, $set$$.cnt + 1);
};
$APP.me.tonsky.persistent_sorted_set.disj = function($set$$, $key$jscomp$273_new_root$$, $cmp$$) {
  $key$jscomp$273_new_root$$ = $APP.me.tonsky.persistent_sorted_set.node_disj($set$$.root, $cmp$$, $key$jscomp$273_new_root$$, !0, null, null);
  if ($key$jscomp$273_new_root$$ == null) {
    return $set$$;
  }
  $key$jscomp$273_new_root$$ = $key$jscomp$273_new_root$$[0];
  return $key$jscomp$273_new_root$$ instanceof $APP.me.tonsky.persistent_sorted_set.Node && 1 === $key$jscomp$273_new_root$$.pointers.length ? $APP.me.tonsky.persistent_sorted_set.alter_btset($set$$, $key$jscomp$273_new_root$$.pointers[0], $set$$.shift - 1, $set$$.cnt - 1) : $APP.me.tonsky.persistent_sorted_set.alter_btset($set$$, $key$jscomp$273_new_root$$, $set$$.shift, $set$$.cnt - 1);
};
$APP.me.tonsky.persistent_sorted_set.slice = function($var_args$$) {
  switch(arguments.length) {
    case 3:
      return $APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    case 4:
      return $APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$4(arguments[0], arguments[1], arguments[2], arguments[3]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
$APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3 = function($set$$, $key_from$$, $key_to$$) {
  return $APP.me.tonsky.persistent_sorted_set._slice($set$$, $key_from$$, $key_to$$, $set$$.comparator);
};
$APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$4 = function($set$$, $key_from$$, $key_to$$, $comparator$$) {
  return $APP.me.tonsky.persistent_sorted_set._slice($set$$, $key_from$$, $key_to$$, $comparator$$);
};
$APP.me.tonsky.persistent_sorted_set.slice.cljs$lang$maxFixedArity = 4;
$APP.me.tonsky.persistent_sorted_set.rslice = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return $APP.me.tonsky.persistent_sorted_set.rslice.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return $APP.me.tonsky.persistent_sorted_set.rslice.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    case 4:
      return $APP.me.tonsky.persistent_sorted_set.rslice.cljs$core$IFn$_invoke$arity$4(arguments[0], arguments[1], arguments[2], arguments[3]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
$APP.me.tonsky.persistent_sorted_set.rslice.cljs$core$IFn$_invoke$arity$2 = function($G__66357_set$$, $key$$) {
  $G__66357_set$$ = $APP.me.tonsky.persistent_sorted_set._slice($G__66357_set$$, $key$$, $key$$, $G__66357_set$$.comparator);
  return $G__66357_set$$ == null ? null : $APP.cljs.core.rseq($G__66357_set$$);
};
$APP.me.tonsky.persistent_sorted_set.rslice.cljs$core$IFn$_invoke$arity$3 = function($G__66358_set$$, $key_from$$, $key_to$$) {
  $G__66358_set$$ = $APP.me.tonsky.persistent_sorted_set._slice($G__66358_set$$, $key_to$$, $key_from$$, $G__66358_set$$.comparator);
  return $G__66358_set$$ == null ? null : $APP.cljs.core.rseq($G__66358_set$$);
};
$APP.me.tonsky.persistent_sorted_set.rslice.cljs$core$IFn$_invoke$arity$4 = function($G__66359_set$$, $key_from$$, $key_to$$, $comparator$$) {
  $G__66359_set$$ = $APP.me.tonsky.persistent_sorted_set._slice($G__66359_set$$, $key_to$$, $key_from$$, $comparator$$);
  return $G__66359_set$$ == null ? null : $APP.cljs.core.rseq($G__66359_set$$);
};
$APP.me.tonsky.persistent_sorted_set.rslice.cljs$lang$maxFixedArity = 4;
$APP.me.tonsky.persistent_sorted_set.seek = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return $APP.me.tonsky.persistent_sorted_set.seek.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return $APP.me.tonsky.persistent_sorted_set.seek.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
$APP.me.tonsky.persistent_sorted_set.seek.cljs$core$IFn$_invoke$arity$2 = function($seq$$, $to$$) {
  return $APP.me.tonsky.persistent_sorted_set._seek($seq$$, $to$$);
};
$APP.me.tonsky.persistent_sorted_set.seek.cljs$core$IFn$_invoke$arity$3 = function($seq$$, $to$$, $cmp$$) {
  return $APP.me.tonsky.persistent_sorted_set._seek($seq$$, $to$$, $cmp$$);
};
$APP.me.tonsky.persistent_sorted_set.seek.cljs$lang$maxFixedArity = 3;
$APP.me.tonsky.persistent_sorted_set.from_sorted_array = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return $APP.me.tonsky.persistent_sorted_set.from_sorted_array.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return $APP.me.tonsky.persistent_sorted_set.from_sorted_array.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    case 4:
      return $APP.me.tonsky.persistent_sorted_set.from_sorted_array.cljs$core$IFn$_invoke$arity$4(arguments[0], arguments[1], arguments[2], arguments[3]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
$APP.me.tonsky.persistent_sorted_set.from_sorted_array.cljs$core$IFn$_invoke$arity$2 = function($cmp$$, $arr$$) {
  return $APP.me.tonsky.persistent_sorted_set.from_sorted_array.cljs$core$IFn$_invoke$arity$4($cmp$$, $arr$$, $arr$$.length, $APP.cljs.core.PersistentArrayMap.EMPTY);
};
$APP.me.tonsky.persistent_sorted_set.from_sorted_array.cljs$core$IFn$_invoke$arity$3 = function($cmp$$, $arr$$, $_len$$) {
  return $APP.me.tonsky.persistent_sorted_set.from_sorted_array.cljs$core$IFn$_invoke$arity$4($cmp$$, $arr$$, $_len$$, $APP.cljs.core.PersistentArrayMap.EMPTY);
};
$APP.me.tonsky.persistent_sorted_set.from_sorted_array.cljs$core$IFn$_invoke$arity$4 = function($cmp$$, $arr$$, $_len$$, $G__66648__opts_current_level$$) {
  $G__66648__opts_current_level$$ = $_len$$ = $APP.me.tonsky.persistent_sorted_set.arr_map_inplace(function($p1__66368_SHARP_$$) {
    return new $APP.me.tonsky.persistent_sorted_set.Leaf($p1__66368_SHARP_$$);
  }, $APP.me.tonsky.persistent_sorted_set.arr_partition_approx($APP.me.tonsky.persistent_sorted_set.min_len, $APP.me.tonsky.persistent_sorted_set.max_len, $arr$$));
  for (var $G__66649_shift$$ = 0;;) {
    var $G__66373$$ = $APP.cljs.core.count($G__66648__opts_current_level$$);
    switch($G__66373$$) {
      case 0:
        return new $APP.me.tonsky.persistent_sorted_set.BTSet(new $APP.me.tonsky.persistent_sorted_set.Leaf([]), 0, 0, $cmp$$, null, null);
      case 1:
        return new $APP.me.tonsky.persistent_sorted_set.BTSet($APP.cljs.core.first($G__66648__opts_current_level$$), $G__66649_shift$$, $arr$$.length, $cmp$$, null, null);
      default:
        $G__66648__opts_current_level$$ = $APP.me.tonsky.persistent_sorted_set.arr_map_inplace(function($current_level$$, $shift$$, $G__66373$$, $leaves$$) {
          return function($p1__66369_SHARP_$$) {
            return new $APP.me.tonsky.persistent_sorted_set.Node($APP.me.tonsky.persistent_sorted_set.arrays.amap($APP.me.tonsky.persistent_sorted_set.node_lim_key, $p1__66369_SHARP_$$), $p1__66369_SHARP_$$);
          };
        }($G__66648__opts_current_level$$, $G__66649_shift$$, $G__66373$$, $_len$$), $APP.me.tonsky.persistent_sorted_set.arr_partition_approx($APP.me.tonsky.persistent_sorted_set.min_len, $APP.me.tonsky.persistent_sorted_set.max_len, $G__66648__opts_current_level$$));
        $G__66649_shift$$ += 1;
        continue;
    }
    break;
  }
};
$APP.me.tonsky.persistent_sorted_set.from_sorted_array.cljs$lang$maxFixedArity = 4;
$APP.me.tonsky.persistent_sorted_set.from_sequential = function($cmp$$, $arr$jscomp$180_seq$$) {
  $arr$jscomp$180_seq$$ = $APP.me.tonsky.persistent_sorted_set.sorted_arr_distinct($APP.me.tonsky.persistent_sorted_set.arrays.asort($APP.cljs.core.into_array.cljs$core$IFn$_invoke$arity$1($arr$jscomp$180_seq$$), $cmp$$), $cmp$$);
  return $APP.me.tonsky.persistent_sorted_set.from_sorted_array.cljs$core$IFn$_invoke$arity$2($cmp$$, $arr$jscomp$180_seq$$);
};
$APP.me.tonsky.persistent_sorted_set.sorted_set_STAR_ = function($opts$$) {
  var $JSCompiler_temp_const$$ = $APP.me.tonsky.persistent_sorted_set.BTSet, $JSCompiler_temp_const$jscomp$0$$ = new $APP.me.tonsky.persistent_sorted_set.Leaf([]);
  var $JSCompiler_inline_result$jscomp$1486_or__5025__auto__$$ = cljs$cst$4434$cmp.cljs$core$IFn$_invoke$arity$1($opts$$);
  $JSCompiler_inline_result$jscomp$1486_or__5025__auto__$$ = $APP.cljs.core.truth_($JSCompiler_inline_result$jscomp$1486_or__5025__auto__$$) ? $JSCompiler_inline_result$jscomp$1486_or__5025__auto__$$ : $APP.cljs.core.compare;
  return new $JSCompiler_temp_const$$($JSCompiler_temp_const$jscomp$0$$, 0, 0, $JSCompiler_inline_result$jscomp$1486_or__5025__auto__$$, $APP.cljs$cst$2$meta.cljs$core$IFn$_invoke$arity$1($opts$$), null);
};
$APP.me.tonsky.persistent_sorted_set.sorted_set_by = function($var_args$$) {
  switch(arguments.length) {
    case 1:
      return $APP.me.tonsky.persistent_sorted_set.sorted_set_by.cljs$core$IFn$_invoke$arity$1(arguments[0]);
    default:
      for (var $args_arr__5774__auto__$jscomp$85_argseq__5775__auto__$$ = [], $len__5749__auto___66653$$ = arguments.length, $i__5750__auto___66655$$ = 0;;) {
        if ($i__5750__auto___66655$$ < $len__5749__auto___66653$$) {
          $args_arr__5774__auto__$jscomp$85_argseq__5775__auto__$$.push(arguments[$i__5750__auto___66655$$]), $i__5750__auto___66655$$ += 1;
        } else {
          break;
        }
      }
      $args_arr__5774__auto__$jscomp$85_argseq__5775__auto__$$ = 1 < $args_arr__5774__auto__$jscomp$85_argseq__5775__auto__$$.length ? new $APP.cljs.core.IndexedSeq($args_arr__5774__auto__$jscomp$85_argseq__5775__auto__$$.slice(1), 0, null) : null;
      return $APP.me.tonsky.persistent_sorted_set.sorted_set_by.cljs$core$IFn$_invoke$arity$variadic(arguments[0], $args_arr__5774__auto__$jscomp$85_argseq__5775__auto__$$);
  }
};
$APP.me.tonsky.persistent_sorted_set.sorted_set_by.cljs$core$IFn$_invoke$arity$1 = function($cmp$$) {
  return new $APP.me.tonsky.persistent_sorted_set.BTSet(new $APP.me.tonsky.persistent_sorted_set.Leaf([]), 0, 0, $cmp$$, null, null);
};
$APP.me.tonsky.persistent_sorted_set.sorted_set_by.cljs$core$IFn$_invoke$arity$variadic = function($cmp$$, $keys$$) {
  return $APP.me.tonsky.persistent_sorted_set.from_sequential($cmp$$, $keys$$);
};
$APP.me.tonsky.persistent_sorted_set.sorted_set_by.cljs$lang$applyTo = function($seq66392_seq66392__$1$$) {
  var $G__66393$$ = $APP.cljs.core.first($seq66392_seq66392__$1$$);
  $seq66392_seq66392__$1$$ = $APP.cljs.core.next($seq66392_seq66392__$1$$);
  return this.cljs$core$IFn$_invoke$arity$variadic($G__66393$$, $seq66392_seq66392__$1$$);
};
$APP.me.tonsky.persistent_sorted_set.sorted_set_by.cljs$lang$maxFixedArity = 1;
$APP.me.tonsky.persistent_sorted_set.sorted_set = function($var_args$$) {
  switch(arguments.length) {
    case 0:
      return $APP.me.tonsky.persistent_sorted_set.sorted_set.cljs$core$IFn$_invoke$arity$0();
    default:
      for (var $args_arr__5774__auto__$jscomp$86_argseq__5775__auto__$$ = [], $len__5749__auto___66662$$ = arguments.length, $i__5750__auto___66663$$ = 0;;) {
        if ($i__5750__auto___66663$$ < $len__5749__auto___66662$$) {
          $args_arr__5774__auto__$jscomp$86_argseq__5775__auto__$$.push(arguments[$i__5750__auto___66663$$]), $i__5750__auto___66663$$ += 1;
        } else {
          break;
        }
      }
      $args_arr__5774__auto__$jscomp$86_argseq__5775__auto__$$ = 0 < $args_arr__5774__auto__$jscomp$86_argseq__5775__auto__$$.length ? new $APP.cljs.core.IndexedSeq($args_arr__5774__auto__$jscomp$86_argseq__5775__auto__$$.slice(0), 0, null) : null;
      return $APP.me.tonsky.persistent_sorted_set.sorted_set.cljs$core$IFn$_invoke$arity$variadic($args_arr__5774__auto__$jscomp$86_argseq__5775__auto__$$);
  }
};
$APP.me.tonsky.persistent_sorted_set.sorted_set.cljs$core$IFn$_invoke$arity$0 = function() {
  return $APP.me.tonsky.persistent_sorted_set.sorted_set_by.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.compare);
};
$APP.me.tonsky.persistent_sorted_set.sorted_set.cljs$core$IFn$_invoke$arity$variadic = function($keys$$) {
  return $APP.me.tonsky.persistent_sorted_set.from_sequential($APP.cljs.core.compare, $keys$$);
};
$APP.me.tonsky.persistent_sorted_set.sorted_set.cljs$lang$applyTo = function($seq66398$$) {
  return this.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.seq($seq66398$$));
};
$APP.me.tonsky.persistent_sorted_set.sorted_set.cljs$lang$maxFixedArity = 0;
$APP.me.tonsky.persistent_sorted_set.settings = function($set$$) {
  return new $APP.cljs.core.PersistentArrayMap(null, 2, [cljs$cst$4435$branching_factor, $APP.me.tonsky.persistent_sorted_set.max_len, cljs$cst$4436$ref_type, $APP.cljs$cst$4437$strong], null);
};
datascript.db = {};
datascript.db.goog$module$goog$array = $APP.goog.array;
datascript.db.Exception = Error;
datascript.db.IllegalArgumentException = Error;
datascript.db.UnsupportedOperationException = Error;
datascript.db.e0 = 0;
datascript.db.tx0 = 536870912;
datascript.db.emax = 2147483647;
datascript.db.txmax = 2147483647;
datascript.db.implicit_schema = new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$2374$db_SLASH_ident, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$4438$db_SLASH_unique, cljs$cst$4439$db_DOT_unique_SLASH_identity], null)], null);
datascript.db.seqable_QMARK_ = function($x$$) {
  return typeof $x$$ !== "string" && ($APP.cljs.core.seqable_QMARK_($x$$) || $APP.me.tonsky.persistent_sorted_set.arrays.array_QMARK_($x$$));
};
datascript.db.cljs_env_QMARK_ = function($env$$) {
  return $APP.cljs.core.boolean$($APP.cljs$cst$176$ns.cljs$core$IFn$_invoke$arity$1($env$$));
};
datascript.db.combine_hashes = function($x$$, $y$$) {
  return $APP.cljs.core.hash_combine($x$$, $y$$);
};
datascript.db.hash_datom = function($d$$) {
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Not implemented: (", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.db.hash_datom), $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$2(" ", new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$d$$], null))].join(""), $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.db.equiv_datom = function($d$$, $o$$) {
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Not implemented: (", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.db.equiv_datom), $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$2(" ", new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$d$$, $o$$], null))].join(""), $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.db.seq_datom = function($d$$) {
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Not implemented: (", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.db.seq_datom), $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$2(" ", new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$d$$], null))].join(""), $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.db.nth_datom = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return datascript.db.nth_datom.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return datascript.db.nth_datom.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.db.nth_datom.cljs$core$IFn$_invoke$arity$2 = function($d$$, $i$$) {
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Not implemented: (", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.db.nth_datom), $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$2(" ", new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$d$$, $i$$], null))].join(""), $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.db.nth_datom.cljs$core$IFn$_invoke$arity$3 = function($d$$, $i$$, $not_found$$) {
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Not implemented: (", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.db.nth_datom), $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$2(" ", new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$d$$, $i$$, $not_found$$], null))].join(""), $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.db.nth_datom.cljs$lang$maxFixedArity = 3;
datascript.db.assoc_datom = function($d$$, $k$$, $v$$) {
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Not implemented: (", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.db.assoc_datom), $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$2(" ", new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$d$$, $k$$, $v$$], null))].join(""), $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.db.val_at_datom = function($d$$, $k$$, $not_found$$) {
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Not implemented: (", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.db.val_at_datom), $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$2(" ", new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$d$$, $k$$, $not_found$$], null))].join(""), $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.db.IDatom = function() {
};
var datascript$db$IDatom$datom_tx$dyn_69601 = function($this$$$) {
  var $m__5372__auto__$jscomp$687_m__5374__auto__$$ = datascript.db.datom_tx[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
  if ($m__5372__auto__$jscomp$687_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$687_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$687_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$687_m__5374__auto__$$.call(null, $this$$$);
  }
  $m__5372__auto__$jscomp$687_m__5374__auto__$$ = datascript.db.datom_tx._;
  if ($m__5372__auto__$jscomp$687_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$687_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$687_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$687_m__5374__auto__$$.call(null, $this$$$);
  }
  throw $APP.cljs.core.missing_protocol("IDatom.datom-tx", $this$$$);
};
datascript.db.datom_tx = function($this$$$) {
  return $this$$$ != null && $this$$$.datascript$db$IDatom$datom_tx$arity$1 != null ? $this$$$.datascript$db$IDatom$datom_tx$arity$1($this$$$) : datascript$db$IDatom$datom_tx$dyn_69601($this$$$);
};
var datascript$db$IDatom$datom_added$dyn_69602 = function($this$$$) {
  var $m__5372__auto__$jscomp$688_m__5374__auto__$$ = datascript.db.datom_added[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
  if ($m__5372__auto__$jscomp$688_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$688_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$688_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$688_m__5374__auto__$$.call(null, $this$$$);
  }
  $m__5372__auto__$jscomp$688_m__5374__auto__$$ = datascript.db.datom_added._;
  if ($m__5372__auto__$jscomp$688_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$688_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$688_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$688_m__5374__auto__$$.call(null, $this$$$);
  }
  throw $APP.cljs.core.missing_protocol("IDatom.datom-added", $this$$$);
};
datascript.db.datom_added = function($this$$$) {
  return $this$$$ != null && $this$$$.datascript$db$IDatom$datom_added$arity$1 != null ? $this$$$.datascript$db$IDatom$datom_added$arity$1($this$$$) : datascript$db$IDatom$datom_added$dyn_69602($this$$$);
};
var datascript$db$IDatom$datom_get_idx$dyn_69603 = function($this$$$) {
  var $m__5372__auto__$jscomp$689_m__5374__auto__$$ = datascript.db.datom_get_idx[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
  if ($m__5372__auto__$jscomp$689_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$689_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$689_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$689_m__5374__auto__$$.call(null, $this$$$);
  }
  $m__5372__auto__$jscomp$689_m__5374__auto__$$ = datascript.db.datom_get_idx._;
  if ($m__5372__auto__$jscomp$689_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$689_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$689_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$689_m__5374__auto__$$.call(null, $this$$$);
  }
  throw $APP.cljs.core.missing_protocol("IDatom.datom-get-idx", $this$$$);
};
datascript.db.datom_get_idx = function($this$$$) {
  return $this$$$ != null && $this$$$.datascript$db$IDatom$datom_get_idx$arity$1 != null ? $this$$$.datascript$db$IDatom$datom_get_idx$arity$1($this$$$) : datascript$db$IDatom$datom_get_idx$dyn_69603($this$$$);
};
var datascript$db$IDatom$datom_set_idx$dyn_69604 = function($this$$$, $value$$) {
  var $m__5372__auto__$jscomp$690_m__5374__auto__$$ = datascript.db.datom_set_idx[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
  if ($m__5372__auto__$jscomp$690_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$690_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$690_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($this$$$, $value$$) : $m__5372__auto__$jscomp$690_m__5374__auto__$$.call(null, $this$$$, $value$$);
  }
  $m__5372__auto__$jscomp$690_m__5374__auto__$$ = datascript.db.datom_set_idx._;
  if ($m__5372__auto__$jscomp$690_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$690_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$690_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($this$$$, $value$$) : $m__5372__auto__$jscomp$690_m__5374__auto__$$.call(null, $this$$$, $value$$);
  }
  throw $APP.cljs.core.missing_protocol("IDatom.datom-set-idx", $this$$$);
};
datascript.db.datom_set_idx = function($this$$$, $value$$) {
  return $this$$$ != null && $this$$$.datascript$db$IDatom$datom_set_idx$arity$2 != null ? $this$$$.datascript$db$IDatom$datom_set_idx$arity$2($this$$$, $value$$) : datascript$db$IDatom$datom_set_idx$dyn_69604($this$$$, $value$$);
};
datascript.db.Datom = function($e$$, $a$$, $v$$, $tx$$, $idx$$, $_hash$$) {
  this.e = $e$$;
  this.a = $a$$;
  this.v = $v$$;
  this.tx = $tx$$;
  this.idx = $idx$$;
  this._hash = $_hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2162164496;
  this.cljs$lang$protocol_mask$partition1$ = 0;
};
datascript.db.Datom.prototype.datascript$db$IDatom$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.db.Datom.prototype.datascript$db$IDatom$datom_tx$arity$1 = function($d$$) {
  return this.tx > 0 ? this.tx : -this.tx;
};
datascript.db.Datom.prototype.datascript$db$IDatom$datom_added$arity$1 = function($d$$) {
  return this.tx > 0;
};
datascript.db.Datom.prototype.datascript$db$IDatom$datom_get_idx$arity$1 = function($_$$) {
  return this.idx;
};
datascript.db.Datom.prototype.datascript$db$IDatom$datom_set_idx$arity$2 = function($_$$, $value$$) {
  return this.idx = $value$$ | 0;
};
datascript.db.Datom.prototype.cljs$core$IHash$_hash$arity$1 = function($d$$) {
  return this._hash === 0 ? this._hash = datascript.db.hash_datom(this) : this._hash;
};
datascript.db.Datom.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($d$$, $o$$) {
  return $o$$ instanceof datascript.db.Datom && datascript.db.equiv_datom(this, $o$$);
};
datascript.db.Datom.prototype.cljs$core$ISeqable$_seq$arity$1 = function($d$$) {
  return datascript.db.seq_datom(this);
};
datascript.db.Datom.prototype.cljs$core$ILookup$_lookup$arity$2 = function($d$$, $k$$) {
  return datascript.db.val_at_datom(this, $k$$, null);
};
datascript.db.Datom.prototype.cljs$core$ILookup$_lookup$arity$3 = function($d$$, $k$$, $nf$$) {
  return datascript.db.val_at_datom(this, $k$$, $nf$$);
};
datascript.db.Datom.prototype.cljs$core$IIndexed$_nth$arity$2 = function($this$$$, $i$$) {
  return datascript.db.nth_datom.cljs$core$IFn$_invoke$arity$2(this, $i$$);
};
datascript.db.Datom.prototype.cljs$core$IIndexed$_nth$arity$3 = function($this$$$, $i$$, $not_found$$) {
  return datascript.db.nth_datom.cljs$core$IFn$_invoke$arity$3(this, $i$$, $not_found$$);
};
datascript.db.Datom.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($d$$, $k$$, $v__$1$$) {
  return datascript.db.assoc_datom(this, $k$$, $v__$1$$);
};
datascript.db.Datom.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($d$$, $writer$$, $opts$$) {
  return $APP.cljs.core.pr_sequential_writer($writer$$, $APP.cljs.core.pr_writer, "#datascript/Datom [", " ", "]", $opts$$, new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [this.e, this.a, this.v, this.datascript$db$IDatom$datom_tx$arity$1(null), this.datascript$db$IDatom$datom_added$arity$1(null)], null));
};
datascript.db.Datom.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 6, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.with_meta($APP.cljs$cst$1242$e, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$78$tag, $APP.cljs$cst$510$number], null)), $APP.cljs$cst$1255$a, $APP.cljs$cst$57$v, $APP.cljs.core.with_meta($APP.cljs$cst$2201$tx, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$78$tag, $APP.cljs$cst$510$number], null)), $APP.cljs.core.with_meta($APP.cljs$cst$1256$idx, new $APP.cljs.core.PersistentArrayMap(null, 
  2, [$APP.cljs$cst$78$tag, $APP.cljs$cst$510$number, $APP.cljs$cst$10$mutable, !0], null)), $APP.cljs.core.with_meta($APP.cljs$cst$9$_hash, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$78$tag, $APP.cljs$cst$510$number, $APP.cljs$cst$10$mutable, !0], null))], null);
};
datascript.db.Datom.cljs$lang$type = !0;
datascript.db.Datom.cljs$lang$ctorStr = "datascript.db/Datom";
datascript.db.Datom.cljs$lang$ctorPrWriter = function($this__5310__auto__$$, $writer__5311__auto__$$, $opt__5312__auto__$$) {
  return $APP.cljs.core._write($writer__5311__auto__$$, "datascript.db/Datom");
};
datascript.db.__GT_Datom = function($e$$, $a$$, $v$$, $tx$$, $idx$$, $_hash$$) {
  return new datascript.db.Datom($e$$, $a$$, $v$$, $tx$$, $idx$$, $_hash$$);
};
$APP.goog.exportSymbol("datascript.db.Datom", datascript.db.Datom);
datascript.db.datom = function($var_args$$) {
  switch(arguments.length) {
    case 3:
      return datascript.db.datom.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    case 4:
      return datascript.db.datom.cljs$core$IFn$_invoke$arity$4(arguments[0], arguments[1], arguments[2], arguments[3]);
    case 5:
      return datascript.db.datom.cljs$core$IFn$_invoke$arity$5(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.db.datom.cljs$core$IFn$_invoke$arity$3 = function($e$$, $a$$, $v$$) {
  return new datascript.db.Datom($e$$, $a$$, $v$$, 536870912, 0, 0);
};
datascript.db.datom.cljs$core$IFn$_invoke$arity$4 = function($e$$, $a$$, $v$$, $tx$$) {
  return new datascript.db.Datom($e$$, $a$$, $v$$, $tx$$, 0, 0);
};
datascript.db.datom.cljs$core$IFn$_invoke$arity$5 = function($e$$, $a$$, $v$$, $tx$$, $added$$) {
  return new datascript.db.Datom($e$$, $a$$, $v$$, $APP.cljs.core.truth_($added$$) ? $tx$$ : -$tx$$, 0, 0);
};
datascript.db.datom.cljs$lang$maxFixedArity = 5;
datascript.db.datom_QMARK_ = function($x$$) {
  return $x$$ instanceof datascript.db.Datom;
};
datascript.db.hash_datom = function($d$$) {
  return null;
};
datascript.db.hash_datom = function($d$$) {
  return datascript.db.combine_hashes(datascript.db.combine_hashes($APP.cljs.core.hash($d$$.e), $APP.cljs.core.hash($d$$.a)), $APP.cljs.core.hash($d$$.v));
};
datascript.db.equiv_datom = function($d$$, $o$$) {
  return null;
};
datascript.db.equiv_datom = function($d$$, $o$$) {
  return $d$$.e === $o$$.e && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($d$$.a, $o$$.a) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($d$$.v, $o$$.v);
};
datascript.db.seq_datom = function($d$$) {
  return null;
};
datascript.db.seq_datom = function($d$$) {
  return new $APP.cljs.core.List(null, $d$$.e, new $APP.cljs.core.List(null, $d$$.a, new $APP.cljs.core.List(null, $d$$.v, new $APP.cljs.core.List(null, $d$$.datascript$db$IDatom$datom_tx$arity$1(null), new $APP.cljs.core.List(null, $d$$.datascript$db$IDatom$datom_added$arity$1(null), null, 1, null), 2, null), 3, null), 4, null), 5, null);
};
datascript.db.val_at_datom = function($d$$, $k$$, $not_found$$) {
  return null;
};
datascript.db.val_at_datom = function($d$$, $k$$, $not_found$$) {
  if ($k$$ instanceof $APP.cljs.core.Keyword) {
    switch($k$$ instanceof $APP.cljs.core.Keyword ? $k$$.fqn : null) {
      case "e":
        return $d$$.e;
      case "a":
        return $d$$.a;
      case "v":
        return $d$$.v;
      case "tx":
        return $d$$.datascript$db$IDatom$datom_tx$arity$1(null);
      case "added":
        return $d$$.datascript$db$IDatom$datom_added$arity$1(null);
      default:
        return $not_found$$;
    }
  } else {
    if (typeof $k$$ === "string") {
      switch($k$$) {
        case "e":
          return $d$$.e;
        case "a":
          return $d$$.a;
        case "v":
          return $d$$.v;
        case "tx":
          return $d$$.datascript$db$IDatom$datom_tx$arity$1(null);
        case "added":
          return $d$$.datascript$db$IDatom$datom_added$arity$1(null);
        default:
          return $not_found$$;
      }
    } else {
      return $not_found$$;
    }
  }
};
datascript.db.nth_datom = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return datascript.db.nth_datom.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return datascript.db.nth_datom.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.db.nth_datom.cljs$core$IFn$_invoke$arity$2 = function($d$$, $i$$) {
  return null;
};
datascript.db.nth_datom.cljs$core$IFn$_invoke$arity$3 = function($d$$, $i$$, $not_found$$) {
  return null;
};
datascript.db.nth_datom.cljs$lang$maxFixedArity = 3;
datascript.db.nth_datom = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return datascript.db.nth_datom.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return datascript.db.nth_datom.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.db.nth_datom.cljs$core$IFn$_invoke$arity$2 = function($d$$, $i$$) {
  switch($i$$) {
    case 0:
      return $d$$.e;
    case 1:
      return $d$$.a;
    case 2:
      return $d$$.v;
    case 3:
      return $d$$.datascript$db$IDatom$datom_tx$arity$1(null);
    case 4:
      return $d$$.datascript$db$IDatom$datom_added$arity$1(null);
    default:
      throw Error(["Datom/-nth: Index out of bounds: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($i$$)].join(""));
  }
};
datascript.db.nth_datom.cljs$core$IFn$_invoke$arity$3 = function($d$$, $i$$, $not_found$$) {
  switch($i$$) {
    case 0:
      return $d$$.e;
    case 1:
      return $d$$.a;
    case 2:
      return $d$$.v;
    case 3:
      return $d$$.datascript$db$IDatom$datom_tx$arity$1(null);
    case 4:
      return $d$$.datascript$db$IDatom$datom_added$arity$1(null);
    default:
      return $not_found$$;
  }
};
datascript.db.nth_datom.cljs$lang$maxFixedArity = 3;
datascript.db.assoc_datom = function($d$$, $k$$, $v$$) {
  return null;
};
datascript.db.assoc_datom = function($d$$, $k$$, $v$$) {
  switch($k$$ instanceof $APP.cljs.core.Keyword ? $k$$.fqn : null) {
    case "e":
      return datascript.db.datom.cljs$core$IFn$_invoke$arity$5($v$$, $d$$.a, $d$$.v, $d$$.datascript$db$IDatom$datom_tx$arity$1(null), $d$$.datascript$db$IDatom$datom_added$arity$1(null));
    case "a":
      return datascript.db.datom.cljs$core$IFn$_invoke$arity$5($d$$.e, $v$$, $d$$.v, $d$$.datascript$db$IDatom$datom_tx$arity$1(null), $d$$.datascript$db$IDatom$datom_added$arity$1(null));
    case "v":
      return datascript.db.datom.cljs$core$IFn$_invoke$arity$5($d$$.e, $d$$.a, $v$$, $d$$.datascript$db$IDatom$datom_tx$arity$1(null), $d$$.datascript$db$IDatom$datom_added$arity$1(null));
    case "tx":
      return datascript.db.datom.cljs$core$IFn$_invoke$arity$5($d$$.e, $d$$.a, $d$$.v, $v$$, $d$$.datascript$db$IDatom$datom_added$arity$1(null));
    case "added":
      return datascript.db.datom.cljs$core$IFn$_invoke$arity$5($d$$.e, $d$$.a, $d$$.v, $d$$.datascript$db$IDatom$datom_tx$arity$1(null), $v$$);
    default:
      throw new datascript.db.IllegalArgumentException(["invalid key for #datascript/Datom: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($k$$)].join(""));
  }
};
datascript.db.datom_from_reader = function($vec$$) {
  return $APP.cljs.core.apply.cljs$core$IFn$_invoke$arity$2(datascript.db.datom, $vec$$);
};
datascript.db.cmp = function($x$$, $y$$) {
  return $x$$ == null ? 0 : $y$$ == null ? 0 : $APP.cljs.core.long$($APP.cljs.core.compare($x$$, $y$$));
};
datascript.db.class_identical_QMARK_ = function($x$$, $y$$) {
  return $APP.cljs.core.type($x$$) === $APP.cljs.core.type($y$$);
};
datascript.db.class_compare = function($x$$, $y$$) {
  return datascript.db.goog$module$goog$array.defaultCompare($APP.cljs.core.type__GT_str($APP.cljs.core.type($x$$)), $APP.cljs.core.type__GT_str($APP.cljs.core.type($y$$)));
};
datascript.db.ihash = function($x$$) {
  return $APP.cljs.core.hash($x$$);
};
datascript.db.value_compare = function($x$$, $y$$) {
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Not implemented: (", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.db.value_compare), $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$2(" ", new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$x$$, $y$$], null))].join(""), $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.db.seq_compare = function($G__69636_G__69638_xs$jscomp$58_xs__$1$$, $G__69637_G__69639_ys$$) {
  var $cx$jscomp$2_v$jscomp$676_x$$ = $APP.cljs.core.count($G__69636_G__69638_xs$jscomp$58_xs__$1$$), $cy$jscomp$2_y$$ = $APP.cljs.core.count($G__69637_G__69639_ys$$);
  if ($cx$jscomp$2_v$jscomp$676_x$$ < $cy$jscomp$2_y$$) {
    return -1;
  }
  if ($cx$jscomp$2_v$jscomp$676_x$$ > $cy$jscomp$2_y$$) {
    return 1;
  }
  for (;;) {
    if ($APP.cljs.core.empty_QMARK_($G__69636_G__69638_xs$jscomp$58_xs__$1$$)) {
      return 0;
    }
    $cx$jscomp$2_v$jscomp$676_x$$ = $APP.cljs.core.first($G__69636_G__69638_xs$jscomp$58_xs__$1$$);
    $cy$jscomp$2_y$$ = $APP.cljs.core.first($G__69637_G__69639_ys$$);
    if ($cx$jscomp$2_v$jscomp$676_x$$ == null && $cy$jscomp$2_y$$ == null) {
      $G__69636_G__69638_xs$jscomp$58_xs__$1$$ = $APP.cljs.core.next($G__69636_G__69638_xs$jscomp$58_xs__$1$$), $G__69637_G__69639_ys$$ = $APP.cljs.core.next($G__69637_G__69639_ys$$);
    } else {
      if ($cx$jscomp$2_v$jscomp$676_x$$ == null) {
        return -1;
      }
      if ($cy$jscomp$2_y$$ == null) {
        return 1;
      }
      $cx$jscomp$2_v$jscomp$676_x$$ = datascript.db.value_compare($cx$jscomp$2_v$jscomp$676_x$$, $cy$jscomp$2_y$$);
      if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($cx$jscomp$2_v$jscomp$676_x$$, 0)) {
        $G__69636_G__69638_xs$jscomp$58_xs__$1$$ = $APP.cljs.core.next($G__69636_G__69638_xs$jscomp$58_xs__$1$$), $G__69637_G__69639_ys$$ = $APP.cljs.core.next($G__69637_G__69639_ys$$);
      } else {
        return $cx$jscomp$2_v$jscomp$676_x$$;
      }
    }
  }
};
datascript.db.value_compare = function($x$$, $y$$) {
  return null;
};
datascript.db.value_compare = function($x$$, $y$$) {
  try {
    return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($x$$, $y$$) ? 0 : $APP.cljs.core.sequential_QMARK_($x$$) && $APP.cljs.core.sequential_QMARK_($y$$) ? datascript.db.seq_compare($x$$, $y$$) : ($x$$ != null ? $x$$.cljs$lang$protocol_mask$partition1$ & 2048 || $APP.cljs.core.PROTOCOL_SENTINEL === $x$$.cljs$core$IComparable$ || ($x$$.cljs$lang$protocol_mask$partition1$ ? 0 : $APP.cljs.core.native_satisfies_QMARK_($APP.cljs.core.IComparable, $x$$)) : $APP.cljs.core.native_satisfies_QMARK_($APP.cljs.core.IComparable, 
    $x$$)) ? $APP.cljs.core._compare($x$$, $y$$) : datascript.db.class_identical_QMARK_($x$$, $y$$) ? typeof $x$$ === "number" || typeof $x$$ === "string" || $APP.cljs.core.array_QMARK_($x$$) || $x$$ === !0 || $x$$ === !1 ? datascript.db.goog$module$goog$array.defaultCompare($x$$, $y$$) : datascript.db.ihash($x$$) - datascript.db.ihash($y$$) : datascript.db.class_compare($x$$, $y$$);
  } catch ($e69209$$) {
    if ($e69209$$ instanceof Error) {
      var $e$$ = $e69209$$;
      if (datascript.db.class_identical_QMARK_($x$$, $y$$)) {
        throw $e$$;
      }
      return datascript.db.class_compare($x$$, $y$$);
    }
    throw $e69209$$;
  }
};
datascript.db.value_cmp = function($x$$, $y$$) {
  return $x$$ == null ? 0 : $y$$ == null ? 0 : datascript.db.value_compare($x$$, $y$$);
};
datascript.db.cmp_datoms_eavt = function($c__67367__auto____$3_d1$$, $d2$$) {
  var $c__67367__auto___c__67367__auto____$1_c__67367__auto____$2$$ = $c__67367__auto____$3_d1$$.e - $d2$$.e;
  return 0 === $c__67367__auto___c__67367__auto____$1_c__67367__auto____$2$$ ? ($c__67367__auto___c__67367__auto____$1_c__67367__auto____$2$$ = datascript.db.cmp($c__67367__auto____$3_d1$$.a, $d2$$.a), 0 === $c__67367__auto___c__67367__auto____$1_c__67367__auto____$2$$ ? ($c__67367__auto___c__67367__auto____$1_c__67367__auto____$2$$ = datascript.db.value_cmp($c__67367__auto____$3_d1$$.v, $d2$$.v), 0 === $c__67367__auto___c__67367__auto____$1_c__67367__auto____$2$$ ? ($c__67367__auto____$3_d1$$ = 
  $c__67367__auto____$3_d1$$.datascript$db$IDatom$datom_tx$arity$1(null) - $d2$$.datascript$db$IDatom$datom_tx$arity$1(null), 0 === $c__67367__auto____$3_d1$$ ? 0 : $c__67367__auto____$3_d1$$) : $c__67367__auto___c__67367__auto____$1_c__67367__auto____$2$$) : $c__67367__auto___c__67367__auto____$1_c__67367__auto____$2$$) : $c__67367__auto___c__67367__auto____$1_c__67367__auto____$2$$;
};
datascript.db.cmp_datoms_aevt = function($c__67367__auto____$3$jscomp$1_d1$$, $d2$$) {
  var $c__67367__auto__$jscomp$1_c__67367__auto____$1$jscomp$1_c__67367__auto____$2$$ = datascript.db.cmp($c__67367__auto____$3$jscomp$1_d1$$.a, $d2$$.a);
  return 0 === $c__67367__auto__$jscomp$1_c__67367__auto____$1$jscomp$1_c__67367__auto____$2$$ ? ($c__67367__auto__$jscomp$1_c__67367__auto____$1$jscomp$1_c__67367__auto____$2$$ = $c__67367__auto____$3$jscomp$1_d1$$.e - $d2$$.e, 0 === $c__67367__auto__$jscomp$1_c__67367__auto____$1$jscomp$1_c__67367__auto____$2$$ ? ($c__67367__auto__$jscomp$1_c__67367__auto____$1$jscomp$1_c__67367__auto____$2$$ = datascript.db.value_cmp($c__67367__auto____$3$jscomp$1_d1$$.v, $d2$$.v), 0 === $c__67367__auto__$jscomp$1_c__67367__auto____$1$jscomp$1_c__67367__auto____$2$$ ? 
  ($c__67367__auto____$3$jscomp$1_d1$$ = $c__67367__auto____$3$jscomp$1_d1$$.datascript$db$IDatom$datom_tx$arity$1(null) - $d2$$.datascript$db$IDatom$datom_tx$arity$1(null), 0 === $c__67367__auto____$3$jscomp$1_d1$$ ? 0 : $c__67367__auto____$3$jscomp$1_d1$$) : $c__67367__auto__$jscomp$1_c__67367__auto____$1$jscomp$1_c__67367__auto____$2$$) : $c__67367__auto__$jscomp$1_c__67367__auto____$1$jscomp$1_c__67367__auto____$2$$) : $c__67367__auto__$jscomp$1_c__67367__auto____$1$jscomp$1_c__67367__auto____$2$$;
};
datascript.db.cmp_datoms_avet = function($c__67367__auto____$3$jscomp$2_d1$$, $d2$$) {
  var $c__67367__auto__$jscomp$2_c__67367__auto____$1$jscomp$2_c__67367__auto____$2$$ = datascript.db.cmp($c__67367__auto____$3$jscomp$2_d1$$.a, $d2$$.a);
  return 0 === $c__67367__auto__$jscomp$2_c__67367__auto____$1$jscomp$2_c__67367__auto____$2$$ ? ($c__67367__auto__$jscomp$2_c__67367__auto____$1$jscomp$2_c__67367__auto____$2$$ = datascript.db.value_cmp($c__67367__auto____$3$jscomp$2_d1$$.v, $d2$$.v), 0 === $c__67367__auto__$jscomp$2_c__67367__auto____$1$jscomp$2_c__67367__auto____$2$$ ? ($c__67367__auto__$jscomp$2_c__67367__auto____$1$jscomp$2_c__67367__auto____$2$$ = $c__67367__auto____$3$jscomp$2_d1$$.e - $d2$$.e, 0 === $c__67367__auto__$jscomp$2_c__67367__auto____$1$jscomp$2_c__67367__auto____$2$$ ? 
  ($c__67367__auto____$3$jscomp$2_d1$$ = $c__67367__auto____$3$jscomp$2_d1$$.datascript$db$IDatom$datom_tx$arity$1(null) - $d2$$.datascript$db$IDatom$datom_tx$arity$1(null), 0 === $c__67367__auto____$3$jscomp$2_d1$$ ? 0 : $c__67367__auto____$3$jscomp$2_d1$$) : $c__67367__auto__$jscomp$2_c__67367__auto____$1$jscomp$2_c__67367__auto____$2$$) : $c__67367__auto__$jscomp$2_c__67367__auto____$1$jscomp$2_c__67367__auto____$2$$) : $c__67367__auto__$jscomp$2_c__67367__auto____$1$jscomp$2_c__67367__auto____$2$$;
};
datascript.db.cmp_attr_quick = function($a1$$, $a2$$) {
  return $a1$$ instanceof $APP.cljs.core.Keyword ? $APP.cljs.core._compare($a1$$, $a2$$) : datascript.db.goog$module$goog$array.defaultCompare($a1$$, $a2$$);
};
datascript.db.cmp_datoms_eav_quick = function($c__67367__auto____$2$jscomp$3_d1$$, $d2$$) {
  var $c__67367__auto__$jscomp$3_c__67367__auto____$1$$ = $c__67367__auto____$2$jscomp$3_d1$$.e - $d2$$.e;
  return 0 === $c__67367__auto__$jscomp$3_c__67367__auto____$1$$ ? ($c__67367__auto__$jscomp$3_c__67367__auto____$1$$ = datascript.db.cmp_attr_quick($c__67367__auto____$2$jscomp$3_d1$$.a, $d2$$.a), 0 === $c__67367__auto__$jscomp$3_c__67367__auto____$1$$ ? ($c__67367__auto____$2$jscomp$3_d1$$ = datascript.db.value_compare($c__67367__auto____$2$jscomp$3_d1$$.v, $d2$$.v), 0 === $c__67367__auto____$2$jscomp$3_d1$$ ? 0 : $c__67367__auto____$2$jscomp$3_d1$$) : $c__67367__auto__$jscomp$3_c__67367__auto____$1$$) : 
  $c__67367__auto__$jscomp$3_c__67367__auto____$1$$;
};
datascript.db.cmp_datoms_eavt_quick = function($c__67367__auto____$3$jscomp$3_d1$$, $d2$$) {
  var $c__67367__auto__$jscomp$4_c__67367__auto____$1$jscomp$4_c__67367__auto____$2$$ = $c__67367__auto____$3$jscomp$3_d1$$.e - $d2$$.e;
  return 0 === $c__67367__auto__$jscomp$4_c__67367__auto____$1$jscomp$4_c__67367__auto____$2$$ ? ($c__67367__auto__$jscomp$4_c__67367__auto____$1$jscomp$4_c__67367__auto____$2$$ = datascript.db.cmp_attr_quick($c__67367__auto____$3$jscomp$3_d1$$.a, $d2$$.a), 0 === $c__67367__auto__$jscomp$4_c__67367__auto____$1$jscomp$4_c__67367__auto____$2$$ ? ($c__67367__auto__$jscomp$4_c__67367__auto____$1$jscomp$4_c__67367__auto____$2$$ = datascript.db.value_compare($c__67367__auto____$3$jscomp$3_d1$$.v, $d2$$.v), 
  0 === $c__67367__auto__$jscomp$4_c__67367__auto____$1$jscomp$4_c__67367__auto____$2$$ ? ($c__67367__auto____$3$jscomp$3_d1$$ = $c__67367__auto____$3$jscomp$3_d1$$.datascript$db$IDatom$datom_tx$arity$1(null) - $d2$$.datascript$db$IDatom$datom_tx$arity$1(null), 0 === $c__67367__auto____$3$jscomp$3_d1$$ ? 0 : $c__67367__auto____$3$jscomp$3_d1$$) : $c__67367__auto__$jscomp$4_c__67367__auto____$1$jscomp$4_c__67367__auto____$2$$) : $c__67367__auto__$jscomp$4_c__67367__auto____$1$jscomp$4_c__67367__auto____$2$$) : 
  $c__67367__auto__$jscomp$4_c__67367__auto____$1$jscomp$4_c__67367__auto____$2$$;
};
datascript.db.cmp_datoms_aevt_quick = function($c__67367__auto____$3$jscomp$4_d1$$, $d2$$) {
  var $c__67367__auto__$jscomp$5_c__67367__auto____$1$jscomp$5_c__67367__auto____$2$$ = datascript.db.cmp_attr_quick($c__67367__auto____$3$jscomp$4_d1$$.a, $d2$$.a);
  return 0 === $c__67367__auto__$jscomp$5_c__67367__auto____$1$jscomp$5_c__67367__auto____$2$$ ? ($c__67367__auto__$jscomp$5_c__67367__auto____$1$jscomp$5_c__67367__auto____$2$$ = $c__67367__auto____$3$jscomp$4_d1$$.e - $d2$$.e, 0 === $c__67367__auto__$jscomp$5_c__67367__auto____$1$jscomp$5_c__67367__auto____$2$$ ? ($c__67367__auto__$jscomp$5_c__67367__auto____$1$jscomp$5_c__67367__auto____$2$$ = datascript.db.value_compare($c__67367__auto____$3$jscomp$4_d1$$.v, $d2$$.v), 0 === $c__67367__auto__$jscomp$5_c__67367__auto____$1$jscomp$5_c__67367__auto____$2$$ ? 
  ($c__67367__auto____$3$jscomp$4_d1$$ = $c__67367__auto____$3$jscomp$4_d1$$.datascript$db$IDatom$datom_tx$arity$1(null) - $d2$$.datascript$db$IDatom$datom_tx$arity$1(null), 0 === $c__67367__auto____$3$jscomp$4_d1$$ ? 0 : $c__67367__auto____$3$jscomp$4_d1$$) : $c__67367__auto__$jscomp$5_c__67367__auto____$1$jscomp$5_c__67367__auto____$2$$) : $c__67367__auto__$jscomp$5_c__67367__auto____$1$jscomp$5_c__67367__auto____$2$$) : $c__67367__auto__$jscomp$5_c__67367__auto____$1$jscomp$5_c__67367__auto____$2$$;
};
datascript.db.cmp_datoms_avet_quick = function($c__67367__auto____$3$jscomp$5_d1$$, $d2$$) {
  var $c__67367__auto__$jscomp$6_c__67367__auto____$1$jscomp$6_c__67367__auto____$2$$ = datascript.db.cmp_attr_quick($c__67367__auto____$3$jscomp$5_d1$$.a, $d2$$.a);
  return 0 === $c__67367__auto__$jscomp$6_c__67367__auto____$1$jscomp$6_c__67367__auto____$2$$ ? ($c__67367__auto__$jscomp$6_c__67367__auto____$1$jscomp$6_c__67367__auto____$2$$ = datascript.db.value_compare($c__67367__auto____$3$jscomp$5_d1$$.v, $d2$$.v), 0 === $c__67367__auto__$jscomp$6_c__67367__auto____$1$jscomp$6_c__67367__auto____$2$$ ? ($c__67367__auto__$jscomp$6_c__67367__auto____$1$jscomp$6_c__67367__auto____$2$$ = $c__67367__auto____$3$jscomp$5_d1$$.e - $d2$$.e, 0 === $c__67367__auto__$jscomp$6_c__67367__auto____$1$jscomp$6_c__67367__auto____$2$$ ? 
  ($c__67367__auto____$3$jscomp$5_d1$$ = $c__67367__auto____$3$jscomp$5_d1$$.datascript$db$IDatom$datom_tx$arity$1(null) - $d2$$.datascript$db$IDatom$datom_tx$arity$1(null), 0 === $c__67367__auto____$3$jscomp$5_d1$$ ? 0 : $c__67367__auto____$3$jscomp$5_d1$$) : $c__67367__auto__$jscomp$6_c__67367__auto____$1$jscomp$6_c__67367__auto____$2$$) : $c__67367__auto__$jscomp$6_c__67367__auto____$1$jscomp$6_c__67367__auto____$2$$) : $c__67367__auto__$jscomp$6_c__67367__auto____$1$jscomp$6_c__67367__auto____$2$$;
};
datascript.db.diff_sorted = function($G__69650_G__69655_G__69664_G__69669_a$jscomp$574_a__$1$$, $G__69651_G__69656_G__69665_G__69670_b$jscomp$480_b__$1$$, $cmp$$) {
  for (var $G__69647_G__69652_G__69661_G__69666_only_a$$ = $APP.cljs.core.PersistentVector.EMPTY, $G__69648_G__69653_G__69662_G__69667_only_b$$ = $APP.cljs.core.PersistentVector.EMPTY, $G__69649_G__69654_G__69663_G__69668_both$$ = $APP.cljs.core.PersistentVector.EMPTY;;) {
    if ($APP.cljs.core.empty_QMARK_($G__69650_G__69655_G__69664_G__69669_a$jscomp$574_a__$1$$)) {
      return new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.not_empty($G__69647_G__69652_G__69661_G__69666_only_a$$), $APP.cljs.core.not_empty($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($G__69648_G__69653_G__69662_G__69667_only_b$$, $G__69651_G__69656_G__69665_G__69670_b$jscomp$480_b__$1$$)), $APP.cljs.core.not_empty($G__69649_G__69654_G__69663_G__69668_both$$)], null);
    }
    if ($APP.cljs.core.empty_QMARK_($G__69651_G__69656_G__69665_G__69670_b$jscomp$480_b__$1$$)) {
      return new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.not_empty($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($G__69647_G__69652_G__69661_G__69666_only_a$$, $G__69650_G__69655_G__69664_G__69669_a$jscomp$574_a__$1$$)), $APP.cljs.core.not_empty($G__69648_G__69653_G__69662_G__69667_only_b$$), $APP.cljs.core.not_empty($G__69649_G__69654_G__69663_G__69668_both$$)], null);
    }
    var $first_a$$ = $APP.cljs.core.first($G__69650_G__69655_G__69664_G__69669_a$jscomp$574_a__$1$$), $first_b$$ = $APP.cljs.core.first($G__69651_G__69656_G__69665_G__69670_b$jscomp$480_b__$1$$);
    a: {
      try {
        var $diff$$ = $cmp$$.cljs$core$IFn$_invoke$arity$2 ? $cmp$$.cljs$core$IFn$_invoke$arity$2($first_a$$, $first_b$$) : $cmp$$.call(null, $first_a$$, $first_b$$);
        break a;
      } catch ($e69237$$) {
        if ($e69237$$ instanceof Error) {
          $diff$$ = cljs$cst$4440$incomparable;
          break a;
        } else {
          throw $e69237$$;
        }
      }
      $diff$$ = void 0;
    }
    if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($diff$$, cljs$cst$4440$incomparable)) {
      $G__69647_G__69652_G__69661_G__69666_only_a$$ = $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($G__69647_G__69652_G__69661_G__69666_only_a$$, $first_a$$), $G__69648_G__69653_G__69662_G__69667_only_b$$ = $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($G__69648_G__69653_G__69662_G__69667_only_b$$, $first_b$$), $G__69650_G__69655_G__69664_G__69669_a$jscomp$574_a__$1$$ = $APP.cljs.core.next($G__69650_G__69655_G__69664_G__69669_a$jscomp$574_a__$1$$), $G__69651_G__69656_G__69665_G__69670_b$jscomp$480_b__$1$$ = 
      $APP.cljs.core.next($G__69651_G__69656_G__69665_G__69670_b$jscomp$480_b__$1$$);
    } else {
      if ($diff$$ === 0) {
        $G__69649_G__69654_G__69663_G__69668_both$$ = $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($G__69649_G__69654_G__69663_G__69668_both$$, $first_a$$), $G__69650_G__69655_G__69664_G__69669_a$jscomp$574_a__$1$$ = $APP.cljs.core.next($G__69650_G__69655_G__69664_G__69669_a$jscomp$574_a__$1$$), $G__69651_G__69656_G__69665_G__69670_b$jscomp$480_b__$1$$ = $APP.cljs.core.next($G__69651_G__69656_G__69665_G__69670_b$jscomp$480_b__$1$$);
      } else {
        if ($diff$$ < 0) {
          $G__69647_G__69652_G__69661_G__69666_only_a$$ = $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($G__69647_G__69652_G__69661_G__69666_only_a$$, $first_a$$), $G__69650_G__69655_G__69664_G__69669_a$jscomp$574_a__$1$$ = $APP.cljs.core.next($G__69650_G__69655_G__69664_G__69669_a$jscomp$574_a__$1$$);
        } else {
          if ($diff$$ > 0) {
            $G__69648_G__69653_G__69662_G__69667_only_b$$ = $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($G__69648_G__69653_G__69662_G__69667_only_b$$, $first_b$$), $G__69651_G__69656_G__69665_G__69670_b$jscomp$480_b__$1$$ = $APP.cljs.core.next($G__69651_G__69656_G__69665_G__69670_b$jscomp$480_b__$1$$);
          } else {
            return null;
          }
        }
      }
    }
  }
};
datascript.db.hash_db = function($db$$) {
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Not implemented: (", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.db.hash_db), $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$2(" ", new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$db$$], null))].join(""), $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.db.hash_fdb = function($db$$) {
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Not implemented: (", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.db.hash_fdb), $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$2(" ", new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$db$$], null))].join(""), $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.db.equiv_db = function($db$$, $other$$) {
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Not implemented: (", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.db.equiv_db), $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$2(" ", new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$db$$, $other$$], null))].join(""), $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.db.restore_db = function($keys$$) {
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Not implemented: (", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.db.restore_db), $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$2(" ", new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$keys$$], null))].join(""), $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.db.indexing_QMARK_ = function($db$$, $attr$$) {
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Not implemented: (", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.db.indexing_QMARK_), $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$2(" ", new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$db$$, $attr$$], null))].join(""), $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.db.pr_db = function($db$$, $w$$, $opts$$) {
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Not implemented: (", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.db.pr_db), $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$2(" ", new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$db$$, $w$$, $opts$$], null))].join(""), $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.db.resolve_datom = function($db$$, $e$$, $a$$, $v$$, $t$$, $default_e$$, $default_tx$$) {
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Not implemented: (", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.db.resolve_datom), $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$2(" ", new $APP.cljs.core.PersistentVector(null, 7, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$db$$, $e$$, $a$$, $v$$, $t$$, $default_e$$, $default_tx$$], null))].join(""), $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.db.components__GT_pattern = function($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$, $default_e$$, $default_tx$$) {
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Not implemented: (", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.db.components__GT_pattern), $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$2(" ", new $APP.cljs.core.PersistentVector(null, 8, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$, $default_e$$, $default_tx$$], null))].join(""), $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.db.ISearch = function() {
};
var datascript$db$ISearch$_search$dyn_69678 = function($data$$, $pattern$$) {
  var $m__5372__auto__$jscomp$691_m__5374__auto__$$ = datascript.db._search[$APP.goog.typeOf($data$$ == null ? null : $data$$)];
  if ($m__5372__auto__$jscomp$691_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$691_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$691_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($data$$, $pattern$$) : $m__5372__auto__$jscomp$691_m__5374__auto__$$.call(null, $data$$, $pattern$$);
  }
  $m__5372__auto__$jscomp$691_m__5374__auto__$$ = datascript.db._search._;
  if ($m__5372__auto__$jscomp$691_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$691_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$691_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($data$$, $pattern$$) : $m__5372__auto__$jscomp$691_m__5374__auto__$$.call(null, $data$$, $pattern$$);
  }
  throw $APP.cljs.core.missing_protocol("ISearch.-search", $data$$);
};
datascript.db._search = function($data$$, $pattern$$) {
  return $data$$ != null && $data$$.datascript$db$ISearch$_search$arity$2 != null ? $data$$.datascript$db$ISearch$_search$arity$2($data$$, $pattern$$) : datascript$db$ISearch$_search$dyn_69678($data$$, $pattern$$);
};
datascript.db.fsearch = function($data$$, $pattern$$) {
  return $APP.cljs.core.first(datascript.db._search($data$$, $pattern$$));
};
datascript.db.IIndexAccess = function() {
};
var datascript$db$IIndexAccess$_datoms$dyn_69679 = function($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) {
  var $m__5372__auto__$jscomp$692_m__5374__auto__$$ = datascript.db._datoms[$APP.goog.typeOf($db$$ == null ? null : $db$$)];
  if ($m__5372__auto__$jscomp$692_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$692_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6 ? $m__5372__auto__$jscomp$692_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) : $m__5372__auto__$jscomp$692_m__5374__auto__$$.call(null, $db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$);
  }
  $m__5372__auto__$jscomp$692_m__5374__auto__$$ = datascript.db._datoms._;
  if ($m__5372__auto__$jscomp$692_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$692_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6 ? $m__5372__auto__$jscomp$692_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) : $m__5372__auto__$jscomp$692_m__5374__auto__$$.call(null, $db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$);
  }
  throw $APP.cljs.core.missing_protocol("IIndexAccess.-datoms", $db$$);
};
datascript.db._datoms = function($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) {
  return $db$$ != null && $db$$.datascript$db$IIndexAccess$_datoms$arity$6 != null ? $db$$.datascript$db$IIndexAccess$_datoms$arity$6($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) : datascript$db$IIndexAccess$_datoms$dyn_69679($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$);
};
var datascript$db$IIndexAccess$_seek_datoms$dyn_69682 = function($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) {
  var $m__5372__auto__$jscomp$693_m__5374__auto__$$ = datascript.db._seek_datoms[$APP.goog.typeOf($db$$ == null ? null : $db$$)];
  if ($m__5372__auto__$jscomp$693_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$693_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6 ? $m__5372__auto__$jscomp$693_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) : $m__5372__auto__$jscomp$693_m__5374__auto__$$.call(null, $db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$);
  }
  $m__5372__auto__$jscomp$693_m__5374__auto__$$ = datascript.db._seek_datoms._;
  if ($m__5372__auto__$jscomp$693_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$693_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6 ? $m__5372__auto__$jscomp$693_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) : $m__5372__auto__$jscomp$693_m__5374__auto__$$.call(null, $db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$);
  }
  throw $APP.cljs.core.missing_protocol("IIndexAccess.-seek-datoms", $db$$);
};
datascript.db._seek_datoms = function($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) {
  return $db$$ != null && $db$$.datascript$db$IIndexAccess$_seek_datoms$arity$6 != null ? $db$$.datascript$db$IIndexAccess$_seek_datoms$arity$6($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) : datascript$db$IIndexAccess$_seek_datoms$dyn_69682($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$);
};
var datascript$db$IIndexAccess$_rseek_datoms$dyn_69683 = function($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) {
  var $m__5372__auto__$jscomp$694_m__5374__auto__$$ = datascript.db._rseek_datoms[$APP.goog.typeOf($db$$ == null ? null : $db$$)];
  if ($m__5372__auto__$jscomp$694_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$694_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6 ? $m__5372__auto__$jscomp$694_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) : $m__5372__auto__$jscomp$694_m__5374__auto__$$.call(null, $db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$);
  }
  $m__5372__auto__$jscomp$694_m__5374__auto__$$ = datascript.db._rseek_datoms._;
  if ($m__5372__auto__$jscomp$694_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$694_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6 ? $m__5372__auto__$jscomp$694_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$6($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) : $m__5372__auto__$jscomp$694_m__5374__auto__$$.call(null, $db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$);
  }
  throw $APP.cljs.core.missing_protocol("IIndexAccess.-rseek-datoms", $db$$);
};
datascript.db._rseek_datoms = function($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) {
  return $db$$ != null && $db$$.datascript$db$IIndexAccess$_rseek_datoms$arity$6 != null ? $db$$.datascript$db$IIndexAccess$_rseek_datoms$arity$6($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) : datascript$db$IIndexAccess$_rseek_datoms$dyn_69683($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$);
};
var datascript$db$IIndexAccess$_index_range$dyn_69686 = function($db$$, $attr$$, $start$$, $end$$) {
  var $m__5372__auto__$jscomp$695_m__5374__auto__$$ = datascript.db._index_range[$APP.goog.typeOf($db$$ == null ? null : $db$$)];
  if ($m__5372__auto__$jscomp$695_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$695_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$695_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($db$$, $attr$$, $start$$, $end$$) : $m__5372__auto__$jscomp$695_m__5374__auto__$$.call(null, $db$$, $attr$$, $start$$, $end$$);
  }
  $m__5372__auto__$jscomp$695_m__5374__auto__$$ = datascript.db._index_range._;
  if ($m__5372__auto__$jscomp$695_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$695_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $m__5372__auto__$jscomp$695_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$4($db$$, $attr$$, $start$$, $end$$) : $m__5372__auto__$jscomp$695_m__5374__auto__$$.call(null, $db$$, $attr$$, $start$$, $end$$);
  }
  throw $APP.cljs.core.missing_protocol("IIndexAccess.-index-range", $db$$);
};
datascript.db._index_range = function($db$$, $attr$$, $start$$, $end$$) {
  return $db$$ != null && $db$$.datascript$db$IIndexAccess$_index_range$arity$4 != null ? $db$$.datascript$db$IIndexAccess$_index_range$arity$4($db$$, $attr$$, $start$$, $end$$) : datascript$db$IIndexAccess$_index_range$dyn_69686($db$$, $attr$$, $start$$, $end$$);
};
datascript.db.validate_indexed = function($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) {
  if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($index$$, $APP.cljs$cst$4441$avet)) {
    if ($c0$$ == null || datascript.db.indexing_QMARK_($db$$, $c0$$)) {
      return null;
    }
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Attribute ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$c0$$], 0)), " should be marked as :db/index true"].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4442$index_access, $APP.cljs$cst$1998$index, $APP.cljs$cst$4441$avet, cljs$cst$4443$components, new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
    [$c0$$, $c1$$, $c2$$, $c3$$], null)], null));
  }
  return null;
};
datascript.db.IDB = function() {
};
var datascript$db$IDB$_schema$dyn_69687 = function($db$$) {
  var $m__5372__auto__$jscomp$696_m__5374__auto__$$ = datascript.db._schema[$APP.goog.typeOf($db$$ == null ? null : $db$$)];
  if ($m__5372__auto__$jscomp$696_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$696_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$696_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($db$$) : $m__5372__auto__$jscomp$696_m__5374__auto__$$.call(null, $db$$);
  }
  $m__5372__auto__$jscomp$696_m__5374__auto__$$ = datascript.db._schema._;
  if ($m__5372__auto__$jscomp$696_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$696_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$696_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($db$$) : $m__5372__auto__$jscomp$696_m__5374__auto__$$.call(null, $db$$);
  }
  throw $APP.cljs.core.missing_protocol("IDB.-schema", $db$$);
};
datascript.db._schema = function($db$$) {
  return $db$$ != null && $db$$.datascript$db$IDB$_schema$arity$1 != null ? $db$$.datascript$db$IDB$_schema$arity$1($db$$) : datascript$db$IDB$_schema$dyn_69687($db$$);
};
var datascript$db$IDB$_attrs_by$dyn_69688 = function($db$$, $property$$) {
  var $m__5372__auto__$jscomp$697_m__5374__auto__$$ = datascript.db._attrs_by[$APP.goog.typeOf($db$$ == null ? null : $db$$)];
  if ($m__5372__auto__$jscomp$697_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$697_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$697_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($db$$, $property$$) : $m__5372__auto__$jscomp$697_m__5374__auto__$$.call(null, $db$$, $property$$);
  }
  $m__5372__auto__$jscomp$697_m__5374__auto__$$ = datascript.db._attrs_by._;
  if ($m__5372__auto__$jscomp$697_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$697_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$697_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($db$$, $property$$) : $m__5372__auto__$jscomp$697_m__5374__auto__$$.call(null, $db$$, $property$$);
  }
  throw $APP.cljs.core.missing_protocol("IDB.-attrs-by", $db$$);
};
datascript.db._attrs_by = function($db$$, $property$$) {
  return $db$$ != null && $db$$.datascript$db$IDB$_attrs_by$arity$2 != null ? $db$$.datascript$db$IDB$_attrs_by$arity$2($db$$, $property$$) : datascript$db$IDB$_attrs_by$dyn_69688($db$$, $property$$);
};
datascript.db.db_transient = function($db$$) {
  return $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.update.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.update.cljs$core$IFn$_invoke$arity$3($db$$, $APP.cljs$cst$4444$eavt, $APP.cljs.core.transient$), $APP.cljs$cst$4445$aevt, $APP.cljs.core.transient$), $APP.cljs$cst$4441$avet, $APP.cljs.core.transient$);
};
datascript.db.db_persistent_BANG_ = function($db$$) {
  return $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.update.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.update.cljs$core$IFn$_invoke$arity$3($db$$, $APP.cljs$cst$4444$eavt, $APP.cljs.core.persistent_BANG_), $APP.cljs$cst$4445$aevt, $APP.cljs.core.persistent_BANG_), $APP.cljs$cst$4441$avet, $APP.cljs.core.persistent_BANG_);
};
datascript.db.DB = function($schema$$, $eavt$$, $aevt$$, $avet$$, $max_eid$$, $max_tx$$, $rschema$$, $pull_patterns$$, $pull_attrs$$, $hash$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.schema = $schema$$;
  this.eavt = $eavt$$;
  this.aevt = $aevt$$;
  this.avet = $avet$$;
  this.max_eid = $max_eid$$;
  this.max_tx = $max_tx$$;
  this.rschema = $rschema$$;
  this.pull_patterns = $pull_patterns$$;
  this.pull_attrs = $pull_attrs$$;
  this.hash = $hash$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.db.DB.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.db.DB.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k69278$$, $else__5326__auto__$$) {
  switch($k69278$$ instanceof $APP.cljs.core.Keyword ? $k69278$$.fqn : null) {
    case "schema":
      return this.schema;
    case "eavt":
      return this.eavt;
    case "aevt":
      return this.aevt;
    case "avet":
      return this.avet;
    case "max-eid":
      return this.max_eid;
    case "max-tx":
      return this.max_tx;
    case "rschema":
      return this.rschema;
    case "pull-patterns":
      return this.pull_patterns;
    case "pull-attrs":
      return this.pull_attrs;
    case "hash":
      return this.hash;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k69278$$, $else__5326__auto__$$);
  }
};
datascript.db.DB.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__69292_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__69292_v__5348__auto__$$, 0, null);
    $p__69292_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__69292_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__69292_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__69292_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.db.DB.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.db.DB{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 10, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1410$schema, this.schema], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$4444$eavt, this.eavt], null), new $APP.cljs.core.PersistentVector(null, 
  2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$4445$aevt, this.aevt], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$4441$avet, this.avet], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$4446$max_eid, this.max_eid], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$4447$max_tx, this.max_tx], 
  null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$4448$rschema, this.rschema], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4449$pull_patterns, this.pull_patterns], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4450$pull_attrs, this.pull_attrs], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
  [$APP.cljs$cst$4451$hash, this.hash], null)], null), this.__extmap));
};
datascript.db.DB.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__69277$$) {
  return new $APP.cljs.core.RecordIter(0, this, 10, new $APP.cljs.core.PersistentVector(null, 10, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1410$schema, $APP.cljs$cst$4444$eavt, $APP.cljs$cst$4445$aevt, $APP.cljs$cst$4441$avet, $APP.cljs$cst$4446$max_eid, $APP.cljs$cst$4447$max_tx, $APP.cljs$cst$4448$rschema, cljs$cst$4449$pull_patterns, cljs$cst$4450$pull_attrs, $APP.cljs$cst$4451$hash], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.db.DB.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.db.DB.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.db.DB(this.schema, this.eavt, this.aevt, this.avet, this.max_eid, this.max_tx, this.rschema, this.pull_patterns, this.pull_attrs, this.hash, this.__meta, this.__extmap, this.__hash);
};
datascript.db.DB.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 10 + $APP.cljs.core.count(this.__extmap);
};
datascript.db.DB.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$142_h__5134__auto____$1$jscomp$142_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$142_h__5134__auto____$1$jscomp$142_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$142_h__5134__auto____$1$jscomp$142_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$142_h__5134__auto____$1$jscomp$142_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$142_h__5134__auto____$1$jscomp$142_this__5319__auto__$$ = -1515640948 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.db.DB.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this69279$$, $other69280$$) {
  return $other69280$$ != null && this.constructor === $other69280$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.schema, $other69280$$.schema) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.eavt, $other69280$$.eavt) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.aevt, $other69280$$.aevt) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.avet, $other69280$$.avet) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.max_eid, $other69280$$.max_eid) && 
  $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.max_tx, $other69280$$.max_tx) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.rschema, $other69280$$.rschema) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.pull_patterns, $other69280$$.pull_patterns) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.pull_attrs, $other69280$$.pull_attrs) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.hash, $other69280$$.hash) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, 
  $other69280$$.__extmap);
};
datascript.db.DB.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 10, [$APP.cljs$cst$1410$schema, null, $APP.cljs$cst$4447$max_tx, null, $APP.cljs$cst$4451$hash, null, $APP.cljs$cst$4445$aevt, null, $APP.cljs$cst$4441$avet, null, $APP.cljs$cst$4446$max_eid, null, $APP.cljs$cst$4444$eavt, null, cljs$cst$4450$pull_attrs, null, cljs$cst$4449$pull_patterns, null, $APP.cljs$cst$4448$rschema, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, 
  this), this.__meta), $k__5334__auto__$$) : new datascript.db.DB(this.schema, this.eavt, this.aevt, this.avet, this.max_eid, this.max_tx, this.rschema, this.pull_patterns, this.pull_attrs, this.hash, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.db.DB.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k69278$$) {
  switch($k69278$$ instanceof $APP.cljs.core.Keyword ? $k69278$$.fqn : null) {
    case "schema":
    case "eavt":
    case "aevt":
    case "avet":
    case "max-eid":
    case "max-tx":
    case "rschema":
    case "pull-patterns":
    case "pull-attrs":
    case "hash":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k69278$$);
  }
};
datascript.db.DB.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__69329_this__5331__auto__$$, $k__5332__auto__$$, $G__69277$$) {
  $pred__69329_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__69329_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__69329_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$1410$schema, $k__5332__auto__$$) : $pred__69329_this__5331__auto__$$.call(null, $APP.cljs$cst$1410$schema, $k__5332__auto__$$)) ? new datascript.db.DB($G__69277$$, this.eavt, this.aevt, this.avet, this.max_eid, this.max_tx, this.rschema, this.pull_patterns, this.pull_attrs, this.hash, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__69329_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? 
  $pred__69329_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4444$eavt, $k__5332__auto__$$) : $pred__69329_this__5331__auto__$$.call(null, $APP.cljs$cst$4444$eavt, $k__5332__auto__$$)) ? new datascript.db.DB(this.schema, $G__69277$$, this.aevt, this.avet, this.max_eid, this.max_tx, this.rschema, this.pull_patterns, this.pull_attrs, this.hash, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__69329_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__69329_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4445$aevt, 
  $k__5332__auto__$$) : $pred__69329_this__5331__auto__$$.call(null, $APP.cljs$cst$4445$aevt, $k__5332__auto__$$)) ? new datascript.db.DB(this.schema, this.eavt, $G__69277$$, this.avet, this.max_eid, this.max_tx, this.rschema, this.pull_patterns, this.pull_attrs, this.hash, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__69329_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__69329_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4441$avet, $k__5332__auto__$$) : 
  $pred__69329_this__5331__auto__$$.call(null, $APP.cljs$cst$4441$avet, $k__5332__auto__$$)) ? new datascript.db.DB(this.schema, this.eavt, this.aevt, $G__69277$$, this.max_eid, this.max_tx, this.rschema, this.pull_patterns, this.pull_attrs, this.hash, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__69329_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__69329_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4446$max_eid, $k__5332__auto__$$) : $pred__69329_this__5331__auto__$$.call(null, 
  $APP.cljs$cst$4446$max_eid, $k__5332__auto__$$)) ? new datascript.db.DB(this.schema, this.eavt, this.aevt, this.avet, $G__69277$$, this.max_tx, this.rschema, this.pull_patterns, this.pull_attrs, this.hash, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__69329_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__69329_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4447$max_tx, $k__5332__auto__$$) : $pred__69329_this__5331__auto__$$.call(null, $APP.cljs$cst$4447$max_tx, 
  $k__5332__auto__$$)) ? new datascript.db.DB(this.schema, this.eavt, this.aevt, this.avet, this.max_eid, $G__69277$$, this.rschema, this.pull_patterns, this.pull_attrs, this.hash, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__69329_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__69329_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4448$rschema, $k__5332__auto__$$) : $pred__69329_this__5331__auto__$$.call(null, $APP.cljs$cst$4448$rschema, $k__5332__auto__$$)) ? 
  new datascript.db.DB(this.schema, this.eavt, this.aevt, this.avet, this.max_eid, this.max_tx, $G__69277$$, this.pull_patterns, this.pull_attrs, this.hash, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__69329_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__69329_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4449$pull_patterns, $k__5332__auto__$$) : $pred__69329_this__5331__auto__$$.call(null, cljs$cst$4449$pull_patterns, $k__5332__auto__$$)) ? new datascript.db.DB(this.schema, 
  this.eavt, this.aevt, this.avet, this.max_eid, this.max_tx, this.rschema, $G__69277$$, this.pull_attrs, this.hash, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__69329_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__69329_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4450$pull_attrs, $k__5332__auto__$$) : $pred__69329_this__5331__auto__$$.call(null, cljs$cst$4450$pull_attrs, $k__5332__auto__$$)) ? new datascript.db.DB(this.schema, this.eavt, this.aevt, 
  this.avet, this.max_eid, this.max_tx, this.rschema, this.pull_patterns, $G__69277$$, this.hash, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__69329_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__69329_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4451$hash, $k__5332__auto__$$) : $pred__69329_this__5331__auto__$$.call(null, $APP.cljs$cst$4451$hash, $k__5332__auto__$$)) ? new datascript.db.DB(this.schema, this.eavt, this.aevt, this.avet, this.max_eid, 
  this.max_tx, this.rschema, this.pull_patterns, this.pull_attrs, $G__69277$$, this.__meta, this.__extmap, null) : new datascript.db.DB(this.schema, this.eavt, this.aevt, this.avet, this.max_eid, this.max_tx, this.rschema, this.pull_patterns, this.pull_attrs, this.hash, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__69277$$), null);
};
datascript.db.DB.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 10, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$1410$schema, this.schema, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$4444$eavt, this.eavt, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$4445$aevt, this.aevt, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$4441$avet, this.avet, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$4446$max_eid, 
  this.max_eid, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$4447$max_tx, this.max_tx, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$4448$rschema, this.rschema, null), new $APP.cljs.core.MapEntry(cljs$cst$4449$pull_patterns, this.pull_patterns, null), new $APP.cljs.core.MapEntry(cljs$cst$4450$pull_attrs, this.pull_attrs, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$4451$hash, this.hash, null)], null), this.__extmap));
};
datascript.db.DB.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__69277$$) {
  return new datascript.db.DB(this.schema, this.eavt, this.aevt, this.avet, this.max_eid, this.max_tx, this.rschema, this.pull_patterns, this.pull_attrs, this.hash, $G__69277$$, this.__extmap, this.__hash);
};
datascript.db.DB.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.db.DB.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 10, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1399$schema, cljs$cst$4452$eavt, cljs$cst$4453$aevt, cljs$cst$4454$avet, cljs$cst$4455$max_eid, cljs$cst$4456$max_tx, cljs$cst$4457$rschema, cljs$cst$4458$pull_patterns, cljs$cst$4459$pull_attrs, $APP.cljs$cst$909$hash], null);
};
datascript.db.DB.cljs$lang$type = !0;
datascript.db.DB.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.db/DB", null, 1, null);
};
datascript.db.DB.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.db/DB");
};
datascript.db.__GT_DB = function($schema__$1$$, $eavt$$, $aevt$$, $avet$$, $max_eid$$, $max_tx$$, $rschema$$, $pull_patterns$$, $pull_attrs$$, $hash$$) {
  return new datascript.db.DB($schema__$1$$, $eavt$$, $aevt$$, $avet$$, $max_eid$$, $max_tx$$, $rschema$$, $pull_patterns$$, $pull_attrs$$, $hash$$, null, null, null);
};
datascript.db.map__GT_DB = function($G__69281$$) {
  var $G__69344$jscomp$inline_6805_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__69281$$, $APP.cljs$cst$1410$schema, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$4444$eavt, $APP.cljs$cst$4445$aevt, $APP.cljs$cst$4441$avet, $APP.cljs$cst$4446$max_eid, $APP.cljs$cst$4447$max_tx, $APP.cljs$cst$4448$rschema, cljs$cst$4449$pull_patterns, cljs$cst$4450$pull_attrs, $APP.cljs$cst$4451$hash], 0));
  $G__69344$jscomp$inline_6805_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__69281$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__69344$jscomp$inline_6805_extmap__5365__auto__$$) : $G__69344$jscomp$inline_6805_extmap__5365__auto__$$;
  return new datascript.db.DB($APP.cljs$cst$1410$schema.cljs$core$IFn$_invoke$arity$1($G__69281$$), $APP.cljs$cst$4444$eavt.cljs$core$IFn$_invoke$arity$1($G__69281$$), $APP.cljs$cst$4445$aevt.cljs$core$IFn$_invoke$arity$1($G__69281$$), $APP.cljs$cst$4441$avet.cljs$core$IFn$_invoke$arity$1($G__69281$$), $APP.cljs$cst$4446$max_eid.cljs$core$IFn$_invoke$arity$1($G__69281$$), $APP.cljs$cst$4447$max_tx.cljs$core$IFn$_invoke$arity$1($G__69281$$), $APP.cljs$cst$4448$rschema.cljs$core$IFn$_invoke$arity$1($G__69281$$), 
  cljs$cst$4449$pull_patterns.cljs$core$IFn$_invoke$arity$1($G__69281$$), cljs$cst$4450$pull_attrs.cljs$core$IFn$_invoke$arity$1($G__69281$$), $APP.cljs$cst$4451$hash.cljs$core$IFn$_invoke$arity$1($G__69281$$), null, $APP.cljs.core.not_empty($G__69344$jscomp$inline_6805_extmap__5365__auto__$$), null);
};
datascript.db.DB.prototype.clojure$data$Diff$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.db.DB.prototype.clojure$data$Diff$diff_similar$arity$2 = function($a$$, $b$$) {
  return datascript.db.diff_sorted(this.eavt, $APP.cljs$cst$4444$eavt.cljs$core$IFn$_invoke$arity$1($b$$), datascript.db.cmp_datoms_eav_quick);
};
datascript.db.DB.prototype.cljs$core$IPrintWithWriter$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.db.DB.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($db$$, $w$$, $opts$$) {
  return datascript.db.pr_db(this, $w$$, $opts$$);
};
datascript.db.DB.prototype.cljs$core$ICounted$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.db.DB.prototype.cljs$core$ICounted$_count$arity$1 = function($db$$) {
  return $APP.cljs.core.count(this.eavt);
};
datascript.db.DB.prototype.cljs$core$IReversible$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.db.DB.prototype.cljs$core$IReversible$_rseq$arity$1 = function($db$$) {
  return $APP.cljs.core._rseq(this.eavt);
};
datascript.db.DB.prototype.cljs$core$IHash$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.db.DB.prototype.cljs$core$IHash$_hash$arity$1 = function($db$$) {
  return datascript.db.hash_db(this);
};
datascript.db.DB.prototype.cljs$core$IEquiv$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.db.DB.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($db$$, $other$$) {
  return datascript.db.equiv_db(this, $other$$);
};
datascript.db.DB.prototype.cljs$core$IEditableCollection$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.db.DB.prototype.cljs$core$IEditableCollection$_as_transient$arity$1 = function($db$$) {
  return datascript.db.db_transient(this);
};
datascript.db.DB.prototype.cljs$core$IEmptyableCollection$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.db.DB.prototype.cljs$core$IEmptyableCollection$_empty$arity$1 = function($db$$) {
  return $APP.cljs.core.with_meta(datascript.db.restore_db(new $APP.cljs.core.PersistentArrayMap(null, 5, [$APP.cljs$cst$1410$schema, this.schema, $APP.cljs$cst$4448$rschema, this.rschema, $APP.cljs$cst$4444$eavt, $APP.cljs.core.empty(this.eavt), $APP.cljs$cst$4445$aevt, $APP.cljs.core.empty(this.aevt), $APP.cljs$cst$4441$avet, $APP.cljs.core.empty(this.avet)], null)), $APP.cljs.core.meta(this));
};
datascript.db.DB.prototype.cljs$core$ITransientCollection$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.db.DB.prototype.cljs$core$ITransientCollection$_conj_BANG_$arity$2 = function($db$$, $key$$) {
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("datascript.DB/conj! is not supported", $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.db.DB.prototype.cljs$core$ITransientCollection$_persistent_BANG_$arity$1 = function($db$$) {
  return datascript.db.db_persistent_BANG_(this);
};
datascript.db.DB.prototype.clojure$data$EqualityPartition$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.db.DB.prototype.clojure$data$EqualityPartition$equality_partition$arity$1 = function($x$$) {
  return cljs$cst$4460$datascript_SLASH_db;
};
datascript.db.DB.prototype.datascript$db$IIndexAccess$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.db.DB.prototype.datascript$db$IIndexAccess$_datoms$arity$6 = function($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) {
  datascript.db.validate_indexed(this, $index$$, $c0$$, $c1$$, $c2$$, $c3$$);
  return $APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2(this, $index$$), datascript.db.components__GT_pattern(this, $index$$, $c0$$, $c1$$, $c2$$, $c3$$, 0, 536870912), datascript.db.components__GT_pattern(this, $index$$, $c0$$, $c1$$, $c2$$, $c3$$, 2147483647, 2147483647));
};
datascript.db.DB.prototype.datascript$db$IIndexAccess$_seek_datoms$arity$6 = function($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) {
  datascript.db.validate_indexed(this, $index$$, $c0$$, $c1$$, $c2$$, $c3$$);
  return $APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2(this, $index$$), datascript.db.components__GT_pattern(this, $index$$, $c0$$, $c1$$, $c2$$, $c3$$, 0, 536870912), datascript.db.datom.cljs$core$IFn$_invoke$arity$4(2147483647, null, null, 2147483647));
};
datascript.db.DB.prototype.datascript$db$IIndexAccess$_rseek_datoms$arity$6 = function($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) {
  datascript.db.validate_indexed(this, $index$$, $c0$$, $c1$$, $c2$$, $c3$$);
  return $APP.me.tonsky.persistent_sorted_set.rslice.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2(this, $index$$), datascript.db.components__GT_pattern(this, $index$$, $c0$$, $c1$$, $c2$$, $c3$$, 2147483647, 2147483647), datascript.db.datom.cljs$core$IFn$_invoke$arity$4(0, null, null, 536870912));
};
datascript.db.DB.prototype.datascript$db$IIndexAccess$_index_range$arity$4 = function($at__67599__auto___69727_db$$, $attr$$, $start$$, $end$$) {
  datascript.db.validate_indexed(this, $APP.cljs$cst$4441$avet, $attr$$, null, null, null);
  if (!($attr$$ instanceof $APP.cljs.core.Keyword || typeof $attr$$ === "string")) {
    throw $at__67599__auto___69727_db$$ = new $APP.cljs.core.List(null, cljs$cst$4461$_index_range, new $APP.cljs.core.List(null, $APP.cljs$cst$2542$db, new $APP.cljs.core.List(null, $attr$$, new $APP.cljs.core.List(null, $start$$, new $APP.cljs.core.List(null, $end$$, null, 1, null), 2, null), 3, null), 4, null), 5, null), $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Bad entity attribute ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$attr$$], 
    0)), " at ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$at__67599__auto___69727_db$$], 0)), ", expected keyword or string"].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [cljs$cst$4462$attribute, $attr$$, $APP.cljs$cst$4463$context, $at__67599__auto___69727_db$$, $APP.cljs$cst$1404$error, cljs$cst$4464$transact_SLASH_syntax], null));
  }
  return $APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3(this.avet, datascript.db.resolve_datom(this, null, $attr$$, $start$$, null, 0, 536870912), datascript.db.resolve_datom(this, null, $attr$$, $end$$, null, 2147483647, 2147483647));
};
datascript.db.DB.prototype.datascript$db$IDB$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.db.DB.prototype.datascript$db$IDB$_schema$arity$1 = function($db$$) {
  return this.schema;
};
datascript.db.DB.prototype.datascript$db$IDB$_attrs_by$arity$2 = function($db$$, $property$$) {
  $db$$ = this.rschema;
  return $db$$.cljs$core$IFn$_invoke$arity$1 ? $db$$.cljs$core$IFn$_invoke$arity$1($property$$) : $db$$.call(null, $property$$);
};
datascript.db.DB.prototype.datascript$db$ISearch$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.db.DB.prototype.datascript$db$ISearch$_search$arity$2 = function($db$jscomp$50_e$$, $eavt$jscomp$2_pattern$$) {
  $db$jscomp$50_e$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($eavt$jscomp$2_pattern$$, 0, null);
  var $a$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($eavt$jscomp$2_pattern$$, 1, null), $v$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($eavt$jscomp$2_pattern$$, 2, null), $tx$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($eavt$jscomp$2_pattern$$, 3, null);
  $eavt$jscomp$2_pattern$$ = this.eavt;
  var $aevt$$ = this.aevt, $avet$$ = this.avet, $pred$$ = function($p1__69271_SHARP_$$) {
    return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($v$$, $p1__69271_SHARP_$$);
  };
  $APP.cljs.core.contains_QMARK_(datascript.db._attrs_by(this, $APP.cljs$cst$4465$db_DOT_cardinality_SLASH_many), $a$$);
  return $APP.cljs.core.truth_($db$jscomp$50_e$$) ? $APP.cljs.core.truth_($a$$) ? $v$$ != null ? $APP.cljs.core.truth_($tx$$) ? $APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3($eavt$jscomp$2_pattern$$, datascript.db.datom.cljs$core$IFn$_invoke$arity$4($db$jscomp$50_e$$, $a$$, $v$$, $tx$$), datascript.db.datom.cljs$core$IFn$_invoke$arity$4($db$jscomp$50_e$$, $a$$, $v$$, $tx$$)) : $APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3($eavt$jscomp$2_pattern$$, 
  datascript.db.datom.cljs$core$IFn$_invoke$arity$4($db$jscomp$50_e$$, $a$$, $v$$, 536870912), datascript.db.datom.cljs$core$IFn$_invoke$arity$4($db$jscomp$50_e$$, $a$$, $v$$, 2147483647)) : $APP.cljs.core.truth_($tx$$) ? $APP.cljs.core.__GT_Eduction($APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$1(function($d$$) {
    return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($tx$$, $d$$.datascript$db$IDatom$datom_tx$arity$1(null));
  }), $APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3($eavt$jscomp$2_pattern$$, datascript.db.datom.cljs$core$IFn$_invoke$arity$4($db$jscomp$50_e$$, $a$$, null, 536870912), datascript.db.datom.cljs$core$IFn$_invoke$arity$4($db$jscomp$50_e$$, $a$$, null, 2147483647))) : $APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3($eavt$jscomp$2_pattern$$, datascript.db.datom.cljs$core$IFn$_invoke$arity$4($db$jscomp$50_e$$, $a$$, null, 536870912), datascript.db.datom.cljs$core$IFn$_invoke$arity$4($db$jscomp$50_e$$, 
  $a$$, null, 2147483647)) : $v$$ != null ? $APP.cljs.core.truth_($tx$$) ? $APP.cljs.core.__GT_Eduction($APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$1(function($d$$) {
    return $pred$$($d$$.v) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($tx$$, $d$$.datascript$db$IDatom$datom_tx$arity$1(null));
  }), $APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3($eavt$jscomp$2_pattern$$, datascript.db.datom.cljs$core$IFn$_invoke$arity$4($db$jscomp$50_e$$, null, null, 536870912), datascript.db.datom.cljs$core$IFn$_invoke$arity$4($db$jscomp$50_e$$, null, null, 2147483647))) : $APP.cljs.core.__GT_Eduction($APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$1(function($d$$) {
    return $pred$$($d$$.v);
  }), $APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3($eavt$jscomp$2_pattern$$, datascript.db.datom.cljs$core$IFn$_invoke$arity$4($db$jscomp$50_e$$, null, null, 536870912), datascript.db.datom.cljs$core$IFn$_invoke$arity$4($db$jscomp$50_e$$, null, null, 2147483647))) : $APP.cljs.core.truth_($tx$$) ? $APP.cljs.core.__GT_Eduction($APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$1(function($d$$) {
    return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($tx$$, $d$$.datascript$db$IDatom$datom_tx$arity$1(null));
  }), $APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3($eavt$jscomp$2_pattern$$, datascript.db.datom.cljs$core$IFn$_invoke$arity$4($db$jscomp$50_e$$, null, null, 536870912), datascript.db.datom.cljs$core$IFn$_invoke$arity$4($db$jscomp$50_e$$, null, null, 2147483647))) : $APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3($eavt$jscomp$2_pattern$$, datascript.db.datom.cljs$core$IFn$_invoke$arity$4($db$jscomp$50_e$$, null, null, 536870912), datascript.db.datom.cljs$core$IFn$_invoke$arity$4($db$jscomp$50_e$$, 
  null, null, 2147483647)) : $APP.cljs.core.truth_($a$$) ? $v$$ != null ? $APP.cljs.core.truth_($tx$$) ? datascript.db.indexing_QMARK_(this, $a$$) ? $APP.cljs.core.__GT_Eduction($APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$1(function($d$$) {
    return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($tx$$, $d$$.datascript$db$IDatom$datom_tx$arity$1(null));
  }), $APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3($avet$$, datascript.db.datom.cljs$core$IFn$_invoke$arity$4(0, $a$$, $v$$, 536870912), datascript.db.datom.cljs$core$IFn$_invoke$arity$4(2147483647, $a$$, $v$$, 2147483647))) : $APP.cljs.core.__GT_Eduction($APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$1(function($d$$) {
    return $pred$$($d$$.v) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($tx$$, $d$$.datascript$db$IDatom$datom_tx$arity$1(null));
  }), $APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3($aevt$$, datascript.db.datom.cljs$core$IFn$_invoke$arity$4(0, $a$$, null, 536870912), datascript.db.datom.cljs$core$IFn$_invoke$arity$4(2147483647, $a$$, null, 2147483647))) : datascript.db.indexing_QMARK_(this, $a$$) ? $APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3($avet$$, datascript.db.datom.cljs$core$IFn$_invoke$arity$4(0, $a$$, $v$$, 536870912), datascript.db.datom.cljs$core$IFn$_invoke$arity$4(2147483647, 
  $a$$, $v$$, 2147483647)) : $APP.cljs.core.__GT_Eduction($APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$1(function($d$$) {
    return $pred$$($d$$.v);
  }), $APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3($aevt$$, datascript.db.datom.cljs$core$IFn$_invoke$arity$4(0, $a$$, null, 536870912), datascript.db.datom.cljs$core$IFn$_invoke$arity$4(2147483647, $a$$, null, 2147483647))) : $APP.cljs.core.truth_($tx$$) ? $APP.cljs.core.__GT_Eduction($APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$1(function($d$$) {
    return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($tx$$, $d$$.datascript$db$IDatom$datom_tx$arity$1(null));
  }), $APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3($aevt$$, datascript.db.datom.cljs$core$IFn$_invoke$arity$4(0, $a$$, null, 536870912), datascript.db.datom.cljs$core$IFn$_invoke$arity$4(2147483647, $a$$, null, 2147483647))) : $APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3($aevt$$, datascript.db.datom.cljs$core$IFn$_invoke$arity$4(0, $a$$, null, 536870912), datascript.db.datom.cljs$core$IFn$_invoke$arity$4(2147483647, $a$$, null, 2147483647)) : 
  $v$$ != null ? $APP.cljs.core.truth_($tx$$) ? $APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2(function($d$$) {
    return $pred$$($d$$.v) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($tx$$, $d$$.datascript$db$IDatom$datom_tx$arity$1(null));
  }, $eavt$jscomp$2_pattern$$) : $APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2(function($d$$) {
    return $pred$$($d$$.v);
  }, $eavt$jscomp$2_pattern$$) : $APP.cljs.core.truth_($tx$$) ? $APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2(function($d$$) {
    return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($tx$$, $d$$.datascript$db$IDatom$datom_tx$arity$1(null));
  }, $eavt$jscomp$2_pattern$$) : $eavt$jscomp$2_pattern$$;
};
datascript.db.db_QMARK_ = function($x$$) {
  var $and__5023__auto__$jscomp$232_and__5023__auto____$1$$ = $x$$ != null ? $APP.cljs.core.PROTOCOL_SENTINEL === $x$$.datascript$db$ISearch$ ? !0 : $x$$.cljs$lang$protocol_mask$partition$ ? !1 : $APP.cljs.core.native_satisfies_QMARK_(datascript.db.ISearch, $x$$) : $APP.cljs.core.native_satisfies_QMARK_(datascript.db.ISearch, $x$$);
  return $and__5023__auto__$jscomp$232_and__5023__auto____$1$$ ? ($and__5023__auto__$jscomp$232_and__5023__auto____$1$$ = $x$$ != null ? $APP.cljs.core.PROTOCOL_SENTINEL === $x$$.datascript$db$IIndexAccess$ ? !0 : $x$$.cljs$lang$protocol_mask$partition$ ? !1 : $APP.cljs.core.native_satisfies_QMARK_(datascript.db.IIndexAccess, $x$$) : $APP.cljs.core.native_satisfies_QMARK_(datascript.db.IIndexAccess, $x$$)) ? $x$$ != null ? $APP.cljs.core.PROTOCOL_SENTINEL === $x$$.datascript$db$IDB$ ? !0 : $x$$.cljs$lang$protocol_mask$partition$ ? 
  !1 : $APP.cljs.core.native_satisfies_QMARK_(datascript.db.IDB, $x$$) : $APP.cljs.core.native_satisfies_QMARK_(datascript.db.IDB, $x$$) : $and__5023__auto__$jscomp$232_and__5023__auto____$1$$ : $and__5023__auto__$jscomp$232_and__5023__auto____$1$$;
};
datascript.db.FilteredDB = function($unfiltered_db$$, $pred$$, $hash$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.unfiltered_db = $unfiltered_db$$;
  this.pred = $pred$$;
  this.hash = $hash$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.db.FilteredDB.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.db.FilteredDB.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k69357$$, $else__5326__auto__$$) {
  switch($k69357$$ instanceof $APP.cljs.core.Keyword ? $k69357$$.fqn : null) {
    case "unfiltered-db":
      return this.unfiltered_db;
    case "pred":
      return this.pred;
    case "hash":
      return this.hash;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k69357$$, $else__5326__auto__$$);
  }
};
datascript.db.FilteredDB.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__69362_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__69362_v__5348__auto__$$, 0, null);
    $p__69362_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__69362_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__69362_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__69362_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.db.FilteredDB.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.db.FilteredDB{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4466$unfiltered_db, this.unfiltered_db], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1826$pred, this.pred], null), 
  new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$4451$hash, this.hash], null)], null), this.__extmap));
};
datascript.db.FilteredDB.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__69356$$) {
  return new $APP.cljs.core.RecordIter(0, this, 3, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4466$unfiltered_db, $APP.cljs$cst$1826$pred, $APP.cljs$cst$4451$hash], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.db.FilteredDB.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.db.FilteredDB.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.db.FilteredDB(this.unfiltered_db, this.pred, this.hash, this.__meta, this.__extmap, this.__hash);
};
datascript.db.FilteredDB.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 3 + $APP.cljs.core.count(this.__extmap);
};
datascript.db.FilteredDB.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$143_h__5134__auto____$1$jscomp$143_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$143_h__5134__auto____$1$jscomp$143_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$143_h__5134__auto____$1$jscomp$143_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$143_h__5134__auto____$1$jscomp$143_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$143_h__5134__auto____$1$jscomp$143_this__5319__auto__$$ = -351969977 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.db.FilteredDB.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this69358$$, $other69359$$) {
  return $other69359$$ != null && this.constructor === $other69359$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.unfiltered_db, $other69359$$.unfiltered_db) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.pred, $other69359$$.pred) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.hash, $other69359$$.hash) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other69359$$.__extmap);
};
datascript.db.FilteredDB.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$4451$hash, null, $APP.cljs$cst$1826$pred, null, cljs$cst$4466$unfiltered_db, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.db.FilteredDB(this.unfiltered_db, 
  this.pred, this.hash, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.db.FilteredDB.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k69357$$) {
  switch($k69357$$ instanceof $APP.cljs.core.Keyword ? $k69357$$.fqn : null) {
    case "unfiltered-db":
    case "pred":
    case "hash":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k69357$$);
  }
};
datascript.db.FilteredDB.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__69367_this__5331__auto__$$, $k__5332__auto__$$, $G__69356$$) {
  $pred__69367_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__69367_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__69367_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4466$unfiltered_db, $k__5332__auto__$$) : $pred__69367_this__5331__auto__$$.call(null, cljs$cst$4466$unfiltered_db, $k__5332__auto__$$)) ? new datascript.db.FilteredDB($G__69356$$, this.pred, this.hash, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__69367_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__69367_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$1826$pred, 
  $k__5332__auto__$$) : $pred__69367_this__5331__auto__$$.call(null, $APP.cljs$cst$1826$pred, $k__5332__auto__$$)) ? new datascript.db.FilteredDB(this.unfiltered_db, $G__69356$$, this.hash, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__69367_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__69367_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4451$hash, $k__5332__auto__$$) : $pred__69367_this__5331__auto__$$.call(null, $APP.cljs$cst$4451$hash, $k__5332__auto__$$)) ? 
  new datascript.db.FilteredDB(this.unfiltered_db, this.pred, $G__69356$$, this.__meta, this.__extmap, null) : new datascript.db.FilteredDB(this.unfiltered_db, this.pred, this.hash, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__69356$$), null);
};
datascript.db.FilteredDB.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry(cljs$cst$4466$unfiltered_db, this.unfiltered_db, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$1826$pred, this.pred, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$4451$hash, this.hash, null)], null), this.__extmap));
};
datascript.db.FilteredDB.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__69356$$) {
  return new datascript.db.FilteredDB(this.unfiltered_db, this.pred, this.hash, $G__69356$$, this.__extmap, this.__hash);
};
datascript.db.FilteredDB.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.db.FilteredDB.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4467$unfiltered_db, $APP.cljs$cst$1244$pred, $APP.cljs$cst$909$hash], null);
};
datascript.db.FilteredDB.cljs$lang$type = !0;
datascript.db.FilteredDB.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.db/FilteredDB", null, 1, null);
};
datascript.db.FilteredDB.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.db/FilteredDB");
};
datascript.db.__GT_FilteredDB = function($unfiltered_db$$, $pred$$, $hash$$) {
  return new datascript.db.FilteredDB($unfiltered_db$$, $pred$$, $hash$$, null, null, null);
};
datascript.db.map__GT_FilteredDB = function($G__69360$$) {
  var $G__69370$jscomp$inline_6807_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__69360$$, cljs$cst$4466$unfiltered_db, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$1826$pred, $APP.cljs$cst$4451$hash], 0));
  $G__69370$jscomp$inline_6807_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__69360$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__69370$jscomp$inline_6807_extmap__5365__auto__$$) : $G__69370$jscomp$inline_6807_extmap__5365__auto__$$;
  return new datascript.db.FilteredDB(cljs$cst$4466$unfiltered_db.cljs$core$IFn$_invoke$arity$1($G__69360$$), $APP.cljs$cst$1826$pred.cljs$core$IFn$_invoke$arity$1($G__69360$$), $APP.cljs$cst$4451$hash.cljs$core$IFn$_invoke$arity$1($G__69360$$), null, $APP.cljs.core.not_empty($G__69370$jscomp$inline_6807_extmap__5365__auto__$$), null);
};
datascript.db.FilteredDB.prototype.cljs$core$ILookup$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.db.FilteredDB.prototype.cljs$core$ILookup$_lookup$arity$2 = function($_$$, $___$1$$) {
  throw Error("-lookup is not supported on FilteredDB");
};
datascript.db.FilteredDB.prototype.cljs$core$ILookup$_lookup$arity$3 = function($_$$, $___$1$$, $___$2$$) {
  throw Error("-lookup is not supported on FilteredDB");
};
datascript.db.FilteredDB.prototype.cljs$core$IPrintWithWriter$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.db.FilteredDB.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($db$$, $w$$, $opts$$) {
  return datascript.db.pr_db(this, $w$$, $opts$$);
};
datascript.db.FilteredDB.prototype.cljs$core$ICounted$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.db.FilteredDB.prototype.cljs$core$ICounted$_count$arity$1 = function($db$$) {
  return $APP.cljs.core.count(datascript.db._datoms(this, $APP.cljs$cst$4444$eavt, null, null, null, null));
};
datascript.db.FilteredDB.prototype.cljs$core$IHash$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.db.FilteredDB.prototype.cljs$core$IHash$_hash$arity$1 = function($db$$) {
  return datascript.db.hash_fdb(this);
};
datascript.db.FilteredDB.prototype.cljs$core$IEquiv$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.db.FilteredDB.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($db$$, $other$$) {
  return datascript.db.equiv_db(this, $other$$);
};
datascript.db.FilteredDB.prototype.cljs$core$IEmptyableCollection$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.db.FilteredDB.prototype.cljs$core$IEmptyableCollection$_empty$arity$1 = function($_$$) {
  throw Error("-empty is not supported on FilteredDB");
};
datascript.db.FilteredDB.prototype.cljs$core$IAssociative$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.db.FilteredDB.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($_$$, $___$1$$) {
  throw Error("-contains-key? is not supported on FilteredDB");
};
datascript.db.FilteredDB.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($_$$, $___$1$$, $___$2$$) {
  throw Error("-assoc is not supported on FilteredDB");
};
datascript.db.FilteredDB.prototype.datascript$db$IIndexAccess$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.db.FilteredDB.prototype.datascript$db$IIndexAccess$_datoms$arity$6 = function($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) {
  return $APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2(this.pred, datascript.db._datoms(this.unfiltered_db, $index$$, $c0$$, $c1$$, $c2$$, $c3$$));
};
datascript.db.FilteredDB.prototype.datascript$db$IIndexAccess$_seek_datoms$arity$6 = function($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) {
  return $APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2(this.pred, datascript.db._seek_datoms(this.unfiltered_db, $index$$, $c0$$, $c1$$, $c2$$, $c3$$));
};
datascript.db.FilteredDB.prototype.datascript$db$IIndexAccess$_rseek_datoms$arity$6 = function($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) {
  return $APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2(this.pred, datascript.db._rseek_datoms(this.unfiltered_db, $index$$, $c0$$, $c1$$, $c2$$, $c3$$));
};
datascript.db.FilteredDB.prototype.datascript$db$IIndexAccess$_index_range$arity$4 = function($db$$, $attr$$, $start$$, $end$$) {
  return $APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2(this.pred, datascript.db._index_range(this.unfiltered_db, $attr$$, $start$$, $end$$));
};
datascript.db.FilteredDB.prototype.datascript$db$IDB$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.db.FilteredDB.prototype.datascript$db$IDB$_schema$arity$1 = function($db$$) {
  return datascript.db._schema(this.unfiltered_db);
};
datascript.db.FilteredDB.prototype.datascript$db$IDB$_attrs_by$arity$2 = function($db$$, $property$$) {
  return datascript.db._attrs_by(this.unfiltered_db, $property$$);
};
datascript.db.FilteredDB.prototype.datascript$db$ISearch$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.db.FilteredDB.prototype.datascript$db$ISearch$_search$arity$2 = function($db$$, $pattern$$) {
  return $APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2(this.pred, datascript.db._search(this.unfiltered_db, $pattern$$));
};
datascript.db.unfiltered_db = function($db$$) {
  return $db$$ instanceof datascript.db.FilteredDB ? $db$$.unfiltered_db : $db$$;
};
datascript.db.attr__GT_properties = function($k$$, $v$$) {
  switch($v$$ instanceof $APP.cljs.core.Keyword ? $v$$.fqn : null) {
    case "db.unique/identity":
      return new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$4438$db_SLASH_unique, cljs$cst$4439$db_DOT_unique_SLASH_identity, cljs$cst$4468$db_SLASH_index], null);
    case "db.unique/value":
      return new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$4438$db_SLASH_unique, cljs$cst$4469$db_DOT_unique_SLASH_value, cljs$cst$4468$db_SLASH_index], null);
    case "db.cardinality/many":
      return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$4465$db_DOT_cardinality_SLASH_many], null);
    case "db.type/ref":
      return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$4470$db_DOT_type_SLASH_ref, cljs$cst$4468$db_SLASH_index], null);
    default:
      return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$4471$db_SLASH_isComponent, $k$$) && $v$$ === !0 ? new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4471$db_SLASH_isComponent], null) : $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$4468$db_SLASH_index, $k$$) && $v$$ === !0 ? new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4468$db_SLASH_index], null) : $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$4472$db_SLASH_tupleAttrs, 
      $k$$) ? new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4473$db_DOT_type_SLASH_tuple, cljs$cst$4468$db_SLASH_index], null) : $APP.cljs.core.PersistentVector.EMPTY;
  }
};
datascript.db.attr_tuples = function($schema__$1$$, $rschema$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($m$$, $tuple_attr$$) {
    return datascript.util.reduce_indexed(function($m__$1$$, $src_attr$$, $idx$$) {
      return $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$5($m__$1$$, $src_attr$$, $APP.cljs.core.assoc, $tuple_attr$$, $idx$$);
    }, $m$$, cljs$cst$4472$db_SLASH_tupleAttrs.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($schema__$1$$, $tuple_attr$$)));
  }, $APP.cljs.core.PersistentArrayMap.EMPTY, cljs$cst$4473$db_DOT_type_SLASH_tuple.cljs$core$IFn$_invoke$arity$1($rschema$$));
};
datascript.db.rschema = function($schema__$1$$) {
  var $rschema$$ = $APP.cljs.core.reduce_kv(function($rschema$$, $attr$$, $attr_schema$$) {
    return $APP.cljs.core.reduce_kv(function($rschema__$1$$, $key$$, $value$$) {
      return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($rschema__$2$$, $prop$$) {
        return $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$4($rschema__$2$$, $prop$$, datascript.util.conjs, $attr$$);
      }, $rschema__$1$$, datascript.db.attr__GT_properties($key$$, $value$$));
    }, $rschema$$, $attr_schema$$);
  }, $APP.cljs.core.PersistentArrayMap.EMPTY, $schema__$1$$);
  return $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($rschema$$, cljs$cst$4474$db_SLASH_attrTuples, datascript.db.attr_tuples($schema__$1$$, $rschema$$));
};
datascript.db.validate_schema_key = function($a$$, $k$$, $v$$, $expected$$) {
  if ($v$$ == null || $APP.cljs.core.contains_QMARK_($expected$$, $v$$)) {
    return null;
  }
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Bad attribute specification for ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.PersistentArrayMap.createAsIfByAssoc([$a$$, $APP.cljs.core.PersistentArrayMap.createAsIfByAssoc([$k$$, $v$$])])], 0)), ", expected one of ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($expected$$)].join(""), new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$1404$error, 
  cljs$cst$4475$schema_SLASH_validation, cljs$cst$4462$attribute, $a$$, $APP.cljs$cst$2004$key, $k$$, $APP.cljs$cst$1429$value, $v$$], null));
};
datascript.db.validate_schema = function($schema__$1$$) {
  for (var $G__69815_seq__69372_seq__69372__$1$$ = $APP.cljs.core.seq($schema__$1$$), $c__5548__auto__$$ = null, $G__69817_G__69854_attrs_69830_count__69374_seq__69406_69836_seq__69406_69852__$1_temp__5825__auto___69850__$1$$ = 0, $G__69855_attr_69858_chunk__69408_69837_i__69375$$ = 0;;) {
    if ($G__69855_attr_69858_chunk__69408_69837_i__69375$$ < $G__69817_G__69854_attrs_69830_count__69374_seq__69406_69836_seq__69406_69852__$1_temp__5825__auto___69850__$1$$) {
      var $G__69856_c__5548__auto___69853_count__69409_69838_ex_data_69786_ex_data_69859__$1_vec__69394$$ = $c__5548__auto__$$.cljs$core$IIndexed$_nth$arity$2(null, $G__69855_attr_69858_chunk__69408_69837_i__69375$$), $G__69816_a$jscomp$579_temp__5825__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__69856_c__5548__auto___69853_count__69409_69838_ex_data_69786_ex_data_69859__$1_vec__69394$$, 0, null), $kv$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__69856_c__5548__auto___69853_count__69409_69838_ex_data_69786_ex_data_69859__$1_vec__69394$$, 
      1, null), $comp_QMARK__69781$$ = cljs$cst$4471$db_SLASH_isComponent.cljs$core$IFn$_invoke$arity$2($kv$$, !1);
      datascript.db.validate_schema_key($G__69816_a$jscomp$579_temp__5825__auto__$$, cljs$cst$4471$db_SLASH_isComponent, cljs$cst$4471$db_SLASH_isComponent.cljs$core$IFn$_invoke$arity$1($kv$$), new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [!0, null, !1, null], null), null));
      if ($APP.cljs.core.truth_(function() {
        var $and__5023__auto__$$ = $comp_QMARK__69781$$;
        return $APP.cljs.core.truth_($and__5023__auto__$$) ? $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$4476$db_SLASH_valueType.cljs$core$IFn$_invoke$arity$1($kv$$), $APP.cljs$cst$4470$db_DOT_type_SLASH_ref) : $and__5023__auto__$$;
      }())) {
        throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Bad attribute specification for ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69816_a$jscomp$579_temp__5825__auto__$$], 0)), ": {:db/isComponent true} should also have {:db/valueType :db.type/ref}"].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4475$schema_SLASH_validation, cljs$cst$4462$attribute, $G__69816_a$jscomp$579_temp__5825__auto__$$, 
        $APP.cljs$cst$2004$key, cljs$cst$4471$db_SLASH_isComponent], null));
      }
      datascript.db.validate_schema_key($G__69816_a$jscomp$579_temp__5825__auto__$$, $APP.cljs$cst$4438$db_SLASH_unique, $APP.cljs$cst$4438$db_SLASH_unique.cljs$core$IFn$_invoke$arity$1($kv$$), new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [cljs$cst$4439$db_DOT_unique_SLASH_identity, null, cljs$cst$4469$db_DOT_unique_SLASH_value, null], null), null));
      datascript.db.validate_schema_key($G__69816_a$jscomp$579_temp__5825__auto__$$, cljs$cst$4476$db_SLASH_valueType, cljs$cst$4476$db_SLASH_valueType.cljs$core$IFn$_invoke$arity$1($kv$$), new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [cljs$cst$4473$db_DOT_type_SLASH_tuple, null, $APP.cljs$cst$4470$db_DOT_type_SLASH_ref, null], null), null));
      datascript.db.validate_schema_key($G__69816_a$jscomp$579_temp__5825__auto__$$, cljs$cst$4477$db_SLASH_cardinality, cljs$cst$4477$db_SLASH_cardinality.cljs$core$IFn$_invoke$arity$1($kv$$), new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$4465$db_DOT_cardinality_SLASH_many, null, cljs$cst$4478$db_DOT_cardinality_SLASH_one, null], null), null));
      if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$4473$db_DOT_type_SLASH_tuple, cljs$cst$4476$db_SLASH_valueType.cljs$core$IFn$_invoke$arity$1($kv$$)) && !$APP.cljs.core.contains_QMARK_($kv$$, cljs$cst$4472$db_SLASH_tupleAttrs)) {
        throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Bad attribute specification for ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69816_a$jscomp$579_temp__5825__auto__$$], 0)), ": {:db/valueType :db.type/tuple} should also have :db/tupleAttrs"].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4475$schema_SLASH_validation, cljs$cst$4462$attribute, $G__69816_a$jscomp$579_temp__5825__auto__$$, 
        $APP.cljs$cst$2004$key, cljs$cst$4476$db_SLASH_valueType], null));
      }
      if ($APP.cljs.core.contains_QMARK_($kv$$, cljs$cst$4472$db_SLASH_tupleAttrs)) {
        $G__69856_c__5548__auto___69853_count__69409_69838_ex_data_69786_ex_data_69859__$1_vec__69394$$ = new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4475$schema_SLASH_validation, cljs$cst$4462$attribute, $G__69816_a$jscomp$579_temp__5825__auto__$$, $APP.cljs$cst$2004$key, cljs$cst$4472$db_SLASH_tupleAttrs], null);
        if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4465$db_DOT_cardinality_SLASH_many, cljs$cst$4477$db_SLASH_cardinality.cljs$core$IFn$_invoke$arity$1($kv$$))) {
          throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69816_a$jscomp$579_temp__5825__auto__$$], 0)), " has :db/tupleAttrs, must be :db.cardinality/one"].join(""), $G__69856_c__5548__auto___69853_count__69409_69838_ex_data_69786_ex_data_69859__$1_vec__69394$$);
        }
        var $G__69801_attrs_69787_i__69410_69839_seq__69397_69788_seq__69397_69799__$1_temp__5825__auto___69798$$ = cljs$cst$4472$db_SLASH_tupleAttrs.cljs$core$IFn$_invoke$arity$1($kv$$);
        if (!$APP.cljs.core.sequential_QMARK_($G__69801_attrs_69787_i__69410_69839_seq__69397_69788_seq__69397_69799__$1_temp__5825__auto___69798$$)) {
          throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69816_a$jscomp$579_temp__5825__auto__$$], 0)), " :db/tupleAttrs must be a sequential collection, got: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69801_attrs_69787_i__69410_69839_seq__69397_69788_seq__69397_69799__$1_temp__5825__auto___69798$$], 
          0))].join(""), $G__69856_c__5548__auto___69853_count__69409_69838_ex_data_69786_ex_data_69859__$1_vec__69394$$);
        }
        if ($APP.cljs.core.empty_QMARK_($G__69801_attrs_69787_i__69410_69839_seq__69397_69788_seq__69397_69799__$1_temp__5825__auto___69798$$)) {
          throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69816_a$jscomp$579_temp__5825__auto__$$], 0)), " :db/tupleAttrs can’t be empty"].join(""), $G__69856_c__5548__auto___69853_count__69409_69838_ex_data_69786_ex_data_69859__$1_vec__69394$$);
        }
        $G__69801_attrs_69787_i__69410_69839_seq__69397_69788_seq__69397_69799__$1_temp__5825__auto___69798$$ = $APP.cljs.core.seq($G__69801_attrs_69787_i__69410_69839_seq__69397_69788_seq__69397_69799__$1_temp__5825__auto___69798$$);
        for (var $G__69802_attr_69805_attr_69840_chunk__69399_69789$$ = null, $G__69803_c__5548__auto___69800_count__69400_69790_ex_data_69806__$1_ex_data_69842__$1$$ = 0, $i__69401_69791$$ = 0;;) {
          if ($i__69401_69791$$ < $G__69803_c__5548__auto___69800_count__69400_69790_ex_data_69806__$1_ex_data_69842__$1$$) {
            var $attr_69792$$ = $G__69802_attr_69805_attr_69840_chunk__69399_69789$$.cljs$core$IIndexed$_nth$arity$2(null, $i__69401_69791$$), $ex_data_69793__$1$$ = $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($G__69856_c__5548__auto___69853_count__69409_69838_ex_data_69786_ex_data_69859__$1_vec__69394$$, $APP.cljs$cst$1429$value, $attr_69792$$);
            if ($APP.cljs.core.contains_QMARK_($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($schema__$1$$, $attr_69792$$), cljs$cst$4472$db_SLASH_tupleAttrs)) {
              throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69816_a$jscomp$579_temp__5825__auto__$$], 0)), " :db/tupleAttrs can’t depend on another tuple attribute: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$attr_69792$$], 0))].join(""), $ex_data_69793__$1$$);
            }
            if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4465$db_DOT_cardinality_SLASH_many, cljs$cst$4477$db_SLASH_cardinality.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($schema__$1$$, $attr_69792$$)))) {
              throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69816_a$jscomp$579_temp__5825__auto__$$], 0)), " :db/tupleAttrs can’t depend on :db.cardinality/many attribute: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$attr_69792$$], 0))].join(""), $ex_data_69793__$1$$);
            }
            $i__69401_69791$$ += 1;
          } else {
            if ($G__69801_attrs_69787_i__69410_69839_seq__69397_69788_seq__69397_69799__$1_temp__5825__auto___69798$$ = $APP.cljs.core.seq($G__69801_attrs_69787_i__69410_69839_seq__69397_69788_seq__69397_69799__$1_temp__5825__auto___69798$$)) {
              if ($APP.cljs.core.chunked_seq_QMARK_($G__69801_attrs_69787_i__69410_69839_seq__69397_69788_seq__69397_69799__$1_temp__5825__auto___69798$$)) {
                $G__69803_c__5548__auto___69800_count__69400_69790_ex_data_69806__$1_ex_data_69842__$1$$ = $APP.cljs.core.chunk_first($G__69801_attrs_69787_i__69410_69839_seq__69397_69788_seq__69397_69799__$1_temp__5825__auto___69798$$), $G__69801_attrs_69787_i__69410_69839_seq__69397_69788_seq__69397_69799__$1_temp__5825__auto___69798$$ = $APP.cljs.core.chunk_rest($G__69801_attrs_69787_i__69410_69839_seq__69397_69788_seq__69397_69799__$1_temp__5825__auto___69798$$), $G__69802_attr_69805_attr_69840_chunk__69399_69789$$ = 
                $G__69803_c__5548__auto___69800_count__69400_69790_ex_data_69806__$1_ex_data_69842__$1$$, $G__69803_c__5548__auto___69800_count__69400_69790_ex_data_69806__$1_ex_data_69842__$1$$ = $APP.cljs.core.count($G__69803_c__5548__auto___69800_count__69400_69790_ex_data_69806__$1_ex_data_69842__$1$$);
              } else {
                $G__69802_attr_69805_attr_69840_chunk__69399_69789$$ = $APP.cljs.core.first($G__69801_attrs_69787_i__69410_69839_seq__69397_69788_seq__69397_69799__$1_temp__5825__auto___69798$$);
                $G__69803_c__5548__auto___69800_count__69400_69790_ex_data_69806__$1_ex_data_69842__$1$$ = $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($G__69856_c__5548__auto___69853_count__69409_69838_ex_data_69786_ex_data_69859__$1_vec__69394$$, $APP.cljs$cst$1429$value, $G__69802_attr_69805_attr_69840_chunk__69399_69789$$);
                if ($APP.cljs.core.contains_QMARK_($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($schema__$1$$, $G__69802_attr_69805_attr_69840_chunk__69399_69789$$), cljs$cst$4472$db_SLASH_tupleAttrs)) {
                  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69816_a$jscomp$579_temp__5825__auto__$$], 0)), " :db/tupleAttrs can’t depend on another tuple attribute: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69802_attr_69805_attr_69840_chunk__69399_69789$$], 0))].join(""), $G__69803_c__5548__auto___69800_count__69400_69790_ex_data_69806__$1_ex_data_69842__$1$$);
                }
                if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4465$db_DOT_cardinality_SLASH_many, cljs$cst$4477$db_SLASH_cardinality.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($schema__$1$$, $G__69802_attr_69805_attr_69840_chunk__69399_69789$$)))) {
                  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69816_a$jscomp$579_temp__5825__auto__$$], 0)), " :db/tupleAttrs can’t depend on :db.cardinality/many attribute: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69802_attr_69805_attr_69840_chunk__69399_69789$$], 0))].join(""), $G__69803_c__5548__auto___69800_count__69400_69790_ex_data_69806__$1_ex_data_69842__$1$$);
                }
                $G__69801_attrs_69787_i__69410_69839_seq__69397_69788_seq__69397_69799__$1_temp__5825__auto___69798$$ = $APP.cljs.core.next($G__69801_attrs_69787_i__69410_69839_seq__69397_69788_seq__69397_69799__$1_temp__5825__auto___69798$$);
                $G__69802_attr_69805_attr_69840_chunk__69399_69789$$ = null;
                $G__69803_c__5548__auto___69800_count__69400_69790_ex_data_69806__$1_ex_data_69842__$1$$ = 0;
              }
              $i__69401_69791$$ = 0;
            } else {
              break;
            }
          }
        }
      }
      $G__69855_attr_69858_chunk__69408_69837_i__69375$$ += 1;
    } else {
      if ($G__69816_a$jscomp$579_temp__5825__auto__$$ = $APP.cljs.core.seq($G__69815_seq__69372_seq__69372__$1$$)) {
        $G__69815_seq__69372_seq__69372__$1$$ = $G__69816_a$jscomp$579_temp__5825__auto__$$;
        if ($APP.cljs.core.chunked_seq_QMARK_($G__69815_seq__69372_seq__69372__$1$$)) {
          $c__5548__auto__$$ = $APP.cljs.core.chunk_first($G__69815_seq__69372_seq__69372__$1$$), $G__69815_seq__69372_seq__69372__$1$$ = $APP.cljs.core.chunk_rest($G__69815_seq__69372_seq__69372__$1$$), $G__69816_a$jscomp$579_temp__5825__auto__$$ = $c__5548__auto__$$, $G__69817_G__69854_attrs_69830_count__69374_seq__69406_69836_seq__69406_69852__$1_temp__5825__auto___69850__$1$$ = $APP.cljs.core.count($c__5548__auto__$$), $c__5548__auto__$$ = $G__69816_a$jscomp$579_temp__5825__auto__$$;
        } else {
          $c__5548__auto__$$ = $APP.cljs.core.first($G__69815_seq__69372_seq__69372__$1$$);
          $G__69816_a$jscomp$579_temp__5825__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($c__5548__auto__$$, 0, null);
          $kv$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($c__5548__auto__$$, 1, null);
          var $comp_QMARK__69823$$ = cljs$cst$4471$db_SLASH_isComponent.cljs$core$IFn$_invoke$arity$2($kv$$, !1);
          datascript.db.validate_schema_key($G__69816_a$jscomp$579_temp__5825__auto__$$, cljs$cst$4471$db_SLASH_isComponent, cljs$cst$4471$db_SLASH_isComponent.cljs$core$IFn$_invoke$arity$1($kv$$), new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [!0, null, !1, null], null), null));
          if ($APP.cljs.core.truth_(function() {
            var $and__5023__auto__$$ = $comp_QMARK__69823$$;
            return $APP.cljs.core.truth_($and__5023__auto__$$) ? $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$4476$db_SLASH_valueType.cljs$core$IFn$_invoke$arity$1($kv$$), $APP.cljs$cst$4470$db_DOT_type_SLASH_ref) : $and__5023__auto__$$;
          }())) {
            throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Bad attribute specification for ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69816_a$jscomp$579_temp__5825__auto__$$], 0)), ": {:db/isComponent true} should also have {:db/valueType :db.type/ref}"].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4475$schema_SLASH_validation, cljs$cst$4462$attribute, $G__69816_a$jscomp$579_temp__5825__auto__$$, 
            $APP.cljs$cst$2004$key, cljs$cst$4471$db_SLASH_isComponent], null));
          }
          datascript.db.validate_schema_key($G__69816_a$jscomp$579_temp__5825__auto__$$, $APP.cljs$cst$4438$db_SLASH_unique, $APP.cljs$cst$4438$db_SLASH_unique.cljs$core$IFn$_invoke$arity$1($kv$$), new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [cljs$cst$4439$db_DOT_unique_SLASH_identity, null, cljs$cst$4469$db_DOT_unique_SLASH_value, null], null), null));
          datascript.db.validate_schema_key($G__69816_a$jscomp$579_temp__5825__auto__$$, cljs$cst$4476$db_SLASH_valueType, cljs$cst$4476$db_SLASH_valueType.cljs$core$IFn$_invoke$arity$1($kv$$), new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [cljs$cst$4473$db_DOT_type_SLASH_tuple, null, $APP.cljs$cst$4470$db_DOT_type_SLASH_ref, null], null), null));
          datascript.db.validate_schema_key($G__69816_a$jscomp$579_temp__5825__auto__$$, cljs$cst$4477$db_SLASH_cardinality, cljs$cst$4477$db_SLASH_cardinality.cljs$core$IFn$_invoke$arity$1($kv$$), new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$4465$db_DOT_cardinality_SLASH_many, null, cljs$cst$4478$db_DOT_cardinality_SLASH_one, null], null), null));
          if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$4473$db_DOT_type_SLASH_tuple, cljs$cst$4476$db_SLASH_valueType.cljs$core$IFn$_invoke$arity$1($kv$$)) && !$APP.cljs.core.contains_QMARK_($kv$$, cljs$cst$4472$db_SLASH_tupleAttrs)) {
            throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Bad attribute specification for ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69816_a$jscomp$579_temp__5825__auto__$$], 0)), ": {:db/valueType :db.type/tuple} should also have :db/tupleAttrs"].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4475$schema_SLASH_validation, cljs$cst$4462$attribute, $G__69816_a$jscomp$579_temp__5825__auto__$$, 
            $APP.cljs$cst$2004$key, cljs$cst$4476$db_SLASH_valueType], null));
          }
          if ($APP.cljs.core.contains_QMARK_($kv$$, cljs$cst$4472$db_SLASH_tupleAttrs)) {
            $c__5548__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4475$schema_SLASH_validation, cljs$cst$4462$attribute, $G__69816_a$jscomp$579_temp__5825__auto__$$, $APP.cljs$cst$2004$key, cljs$cst$4472$db_SLASH_tupleAttrs], null);
            if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4465$db_DOT_cardinality_SLASH_many, cljs$cst$4477$db_SLASH_cardinality.cljs$core$IFn$_invoke$arity$1($kv$$))) {
              throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69816_a$jscomp$579_temp__5825__auto__$$], 0)), " has :db/tupleAttrs, must be :db.cardinality/one"].join(""), $c__5548__auto__$$);
            }
            $G__69817_G__69854_attrs_69830_count__69374_seq__69406_69836_seq__69406_69852__$1_temp__5825__auto___69850__$1$$ = cljs$cst$4472$db_SLASH_tupleAttrs.cljs$core$IFn$_invoke$arity$1($kv$$);
            if (!$APP.cljs.core.sequential_QMARK_($G__69817_G__69854_attrs_69830_count__69374_seq__69406_69836_seq__69406_69852__$1_temp__5825__auto___69850__$1$$)) {
              throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69816_a$jscomp$579_temp__5825__auto__$$], 0)), " :db/tupleAttrs must be a sequential collection, got: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69817_G__69854_attrs_69830_count__69374_seq__69406_69836_seq__69406_69852__$1_temp__5825__auto___69850__$1$$], 
              0))].join(""), $c__5548__auto__$$);
            }
            if ($APP.cljs.core.empty_QMARK_($G__69817_G__69854_attrs_69830_count__69374_seq__69406_69836_seq__69406_69852__$1_temp__5825__auto___69850__$1$$)) {
              throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69816_a$jscomp$579_temp__5825__auto__$$], 0)), " :db/tupleAttrs can’t be empty"].join(""), $c__5548__auto__$$);
            }
            $G__69817_G__69854_attrs_69830_count__69374_seq__69406_69836_seq__69406_69852__$1_temp__5825__auto___69850__$1$$ = $APP.cljs.core.seq($G__69817_G__69854_attrs_69830_count__69374_seq__69406_69836_seq__69406_69852__$1_temp__5825__auto___69850__$1$$);
            $G__69855_attr_69858_chunk__69408_69837_i__69375$$ = null;
            for ($G__69801_attrs_69787_i__69410_69839_seq__69397_69788_seq__69397_69799__$1_temp__5825__auto___69798$$ = $G__69856_c__5548__auto___69853_count__69409_69838_ex_data_69786_ex_data_69859__$1_vec__69394$$ = 0;;) {
              if ($G__69801_attrs_69787_i__69410_69839_seq__69397_69788_seq__69397_69799__$1_temp__5825__auto___69798$$ < $G__69856_c__5548__auto___69853_count__69409_69838_ex_data_69786_ex_data_69859__$1_vec__69394$$) {
                $G__69802_attr_69805_attr_69840_chunk__69399_69789$$ = $G__69855_attr_69858_chunk__69408_69837_i__69375$$.cljs$core$IIndexed$_nth$arity$2(null, $G__69801_attrs_69787_i__69410_69839_seq__69397_69788_seq__69397_69799__$1_temp__5825__auto___69798$$);
                $G__69803_c__5548__auto___69800_count__69400_69790_ex_data_69806__$1_ex_data_69842__$1$$ = $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($c__5548__auto__$$, $APP.cljs$cst$1429$value, $G__69802_attr_69805_attr_69840_chunk__69399_69789$$);
                if ($APP.cljs.core.contains_QMARK_($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($schema__$1$$, $G__69802_attr_69805_attr_69840_chunk__69399_69789$$), cljs$cst$4472$db_SLASH_tupleAttrs)) {
                  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69816_a$jscomp$579_temp__5825__auto__$$], 0)), " :db/tupleAttrs can’t depend on another tuple attribute: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69802_attr_69805_attr_69840_chunk__69399_69789$$], 0))].join(""), $G__69803_c__5548__auto___69800_count__69400_69790_ex_data_69806__$1_ex_data_69842__$1$$);
                }
                if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4465$db_DOT_cardinality_SLASH_many, cljs$cst$4477$db_SLASH_cardinality.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($schema__$1$$, $G__69802_attr_69805_attr_69840_chunk__69399_69789$$)))) {
                  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69816_a$jscomp$579_temp__5825__auto__$$], 0)), " :db/tupleAttrs can’t depend on :db.cardinality/many attribute: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69802_attr_69805_attr_69840_chunk__69399_69789$$], 0))].join(""), $G__69803_c__5548__auto___69800_count__69400_69790_ex_data_69806__$1_ex_data_69842__$1$$);
                }
                $G__69801_attrs_69787_i__69410_69839_seq__69397_69788_seq__69397_69799__$1_temp__5825__auto___69798$$ += 1;
              } else {
                if ($G__69817_G__69854_attrs_69830_count__69374_seq__69406_69836_seq__69406_69852__$1_temp__5825__auto___69850__$1$$ = $APP.cljs.core.seq($G__69817_G__69854_attrs_69830_count__69374_seq__69406_69836_seq__69406_69852__$1_temp__5825__auto___69850__$1$$)) {
                  if ($APP.cljs.core.chunked_seq_QMARK_($G__69817_G__69854_attrs_69830_count__69374_seq__69406_69836_seq__69406_69852__$1_temp__5825__auto___69850__$1$$)) {
                    $G__69856_c__5548__auto___69853_count__69409_69838_ex_data_69786_ex_data_69859__$1_vec__69394$$ = $APP.cljs.core.chunk_first($G__69817_G__69854_attrs_69830_count__69374_seq__69406_69836_seq__69406_69852__$1_temp__5825__auto___69850__$1$$), $G__69817_G__69854_attrs_69830_count__69374_seq__69406_69836_seq__69406_69852__$1_temp__5825__auto___69850__$1$$ = $APP.cljs.core.chunk_rest($G__69817_G__69854_attrs_69830_count__69374_seq__69406_69836_seq__69406_69852__$1_temp__5825__auto___69850__$1$$), 
                    $G__69855_attr_69858_chunk__69408_69837_i__69375$$ = $G__69856_c__5548__auto___69853_count__69409_69838_ex_data_69786_ex_data_69859__$1_vec__69394$$, $G__69856_c__5548__auto___69853_count__69409_69838_ex_data_69786_ex_data_69859__$1_vec__69394$$ = $APP.cljs.core.count($G__69856_c__5548__auto___69853_count__69409_69838_ex_data_69786_ex_data_69859__$1_vec__69394$$);
                  } else {
                    $G__69855_attr_69858_chunk__69408_69837_i__69375$$ = $APP.cljs.core.first($G__69817_G__69854_attrs_69830_count__69374_seq__69406_69836_seq__69406_69852__$1_temp__5825__auto___69850__$1$$);
                    $G__69856_c__5548__auto___69853_count__69409_69838_ex_data_69786_ex_data_69859__$1_vec__69394$$ = $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($c__5548__auto__$$, $APP.cljs$cst$1429$value, $G__69855_attr_69858_chunk__69408_69837_i__69375$$);
                    if ($APP.cljs.core.contains_QMARK_($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($schema__$1$$, $G__69855_attr_69858_chunk__69408_69837_i__69375$$), cljs$cst$4472$db_SLASH_tupleAttrs)) {
                      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69816_a$jscomp$579_temp__5825__auto__$$], 0)), " :db/tupleAttrs can’t depend on another tuple attribute: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69855_attr_69858_chunk__69408_69837_i__69375$$], 0))].join(""), $G__69856_c__5548__auto___69853_count__69409_69838_ex_data_69786_ex_data_69859__$1_vec__69394$$);
                    }
                    if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4465$db_DOT_cardinality_SLASH_many, cljs$cst$4477$db_SLASH_cardinality.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($schema__$1$$, $G__69855_attr_69858_chunk__69408_69837_i__69375$$)))) {
                      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69816_a$jscomp$579_temp__5825__auto__$$], 0)), " :db/tupleAttrs can’t depend on :db.cardinality/many attribute: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69855_attr_69858_chunk__69408_69837_i__69375$$], 0))].join(""), $G__69856_c__5548__auto___69853_count__69409_69838_ex_data_69786_ex_data_69859__$1_vec__69394$$);
                    }
                    $G__69817_G__69854_attrs_69830_count__69374_seq__69406_69836_seq__69406_69852__$1_temp__5825__auto___69850__$1$$ = $APP.cljs.core.next($G__69817_G__69854_attrs_69830_count__69374_seq__69406_69836_seq__69406_69852__$1_temp__5825__auto___69850__$1$$);
                    $G__69855_attr_69858_chunk__69408_69837_i__69375$$ = null;
                    $G__69856_c__5548__auto___69853_count__69409_69838_ex_data_69786_ex_data_69859__$1_vec__69394$$ = 0;
                  }
                  $G__69801_attrs_69787_i__69410_69839_seq__69397_69788_seq__69397_69799__$1_temp__5825__auto___69798$$ = 0;
                } else {
                  break;
                }
              }
            }
          }
          $G__69815_seq__69372_seq__69372__$1$$ = $APP.cljs.core.next($G__69815_seq__69372_seq__69372__$1$$);
          $c__5548__auto__$$ = null;
          $G__69817_G__69854_attrs_69830_count__69374_seq__69406_69836_seq__69406_69852__$1_temp__5825__auto___69850__$1$$ = 0;
        }
        $G__69855_attr_69858_chunk__69408_69837_i__69375$$ = 0;
      } else {
        return null;
      }
    }
  }
};
datascript.db.empty_db = function($schema__$1$$, $opts$$) {
  datascript.db.validate_schema($schema__$1$$);
  return datascript.db.map__GT_DB($APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$1410$schema, $APP.cljs$cst$4447$max_tx, $APP.cljs$cst$4451$hash, $APP.cljs$cst$4445$aevt, $APP.cljs$cst$4441$avet, $APP.cljs$cst$4446$max_eid, $APP.cljs$cst$4444$eavt, cljs$cst$4450$pull_attrs, cljs$cst$4449$pull_patterns, $APP.cljs$cst$4448$rschema], [$schema__$1$$, 536870912, $APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1(0), $APP.me.tonsky.persistent_sorted_set.sorted_set_STAR_($APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($opts$$, 
  cljs$cst$4434$cmp, datascript.db.cmp_datoms_aevt)), $APP.me.tonsky.persistent_sorted_set.sorted_set_STAR_($APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($opts$$, cljs$cst$4434$cmp, datascript.db.cmp_datoms_avet)), 0, $APP.me.tonsky.persistent_sorted_set.sorted_set_STAR_($APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($opts$$, cljs$cst$4434$cmp, datascript.db.cmp_datoms_eavt)), datascript.lru.cache(100), datascript.lru.cache(100), datascript.db.rschema($APP.cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new $APP.cljs.core.PersistentArrayMap(null, 
  1, [$APP.cljs$cst$2374$db_SLASH_ident, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$4438$db_SLASH_unique, cljs$cst$4439$db_DOT_unique_SLASH_identity], null)], null), $schema__$1$$], 0)))]));
};
datascript.db.init_max_eid = function($refs_rschema$$, $eavt$$, $avet$$) {
  var $max$$ = function($p1__69413_SHARP_$$, $p2__69412_SHARP_$$) {
    var $JSCompiler_temp_const$$ = $APP.cljs.core, $JSCompiler_temp_const$jscomp$0$$ = $JSCompiler_temp_const$$.truth_;
    var $JSCompiler_inline_result$$ = $APP.cljs.core.truth_($p2__69412_SHARP_$$) ? $p2__69412_SHARP_$$ > $p1__69413_SHARP_$$ : $p2__69412_SHARP_$$;
    return $JSCompiler_temp_const$jscomp$0$$.call($JSCompiler_temp_const$$, $JSCompiler_inline_result$$) ? $p2__69412_SHARP_$$ : $p1__69413_SHARP_$$;
  }, $max_eid$jscomp$2_res$$ = function() {
    var $G__69414_G__69414__$1$$ = $APP.me.tonsky.persistent_sorted_set.rslice.cljs$core$IFn$_invoke$arity$3($eavt$$, datascript.db.datom.cljs$core$IFn$_invoke$arity$4(536870911, null, null, 2147483647), datascript.db.datom.cljs$core$IFn$_invoke$arity$4(0, null, null, 536870912));
    $G__69414_G__69414__$1$$ = $G__69414_G__69414__$1$$ == null ? null : $APP.cljs.core.first($G__69414_G__69414__$1$$);
    return $G__69414_G__69414__$1$$ == null ? null : $APP.cljs$cst$1628$e.cljs$core$IFn$_invoke$arity$1($G__69414_G__69414__$1$$);
  }();
  $max_eid$jscomp$2_res$$ = $max$$(0, $max_eid$jscomp$2_res$$);
  $refs_rschema$$ = $APP.cljs$cst$4470$db_DOT_type_SLASH_ref.cljs$core$IFn$_invoke$arity$1($refs_rschema$$);
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($res__$1$$, $G__69415$jscomp$inline_6812_G__69415__$1$jscomp$inline_6813_JSCompiler_inline_result$jscomp$1490_attr$$) {
    $G__69415$jscomp$inline_6812_G__69415__$1$jscomp$inline_6813_JSCompiler_inline_result$jscomp$1490_attr$$ = $APP.me.tonsky.persistent_sorted_set.rslice.cljs$core$IFn$_invoke$arity$3($avet$$, datascript.db.datom.cljs$core$IFn$_invoke$arity$4(536870911, $G__69415$jscomp$inline_6812_G__69415__$1$jscomp$inline_6813_JSCompiler_inline_result$jscomp$1490_attr$$, 536870911, 2147483647), datascript.db.datom.cljs$core$IFn$_invoke$arity$4(0, $G__69415$jscomp$inline_6812_G__69415__$1$jscomp$inline_6813_JSCompiler_inline_result$jscomp$1490_attr$$, 
    0, 536870912));
    $G__69415$jscomp$inline_6812_G__69415__$1$jscomp$inline_6813_JSCompiler_inline_result$jscomp$1490_attr$$ = $G__69415$jscomp$inline_6812_G__69415__$1$jscomp$inline_6813_JSCompiler_inline_result$jscomp$1490_attr$$ == null ? null : $APP.cljs.core.first($G__69415$jscomp$inline_6812_G__69415__$1$jscomp$inline_6813_JSCompiler_inline_result$jscomp$1490_attr$$);
    $G__69415$jscomp$inline_6812_G__69415__$1$jscomp$inline_6813_JSCompiler_inline_result$jscomp$1490_attr$$ = $G__69415$jscomp$inline_6812_G__69415__$1$jscomp$inline_6813_JSCompiler_inline_result$jscomp$1490_attr$$ == null ? null : $APP.cljs$cst$1438$v.cljs$core$IFn$_invoke$arity$1($G__69415$jscomp$inline_6812_G__69415__$1$jscomp$inline_6813_JSCompiler_inline_result$jscomp$1490_attr$$);
    return $max$$($res__$1$$, $G__69415$jscomp$inline_6812_G__69415__$1$jscomp$inline_6813_JSCompiler_inline_result$jscomp$1490_attr$$);
  }, $max_eid$jscomp$2_res$$, $refs_rschema$$);
};
datascript.db.init_db = function($avet_arr_avet_datoms_datoms_max_eid$$, $schema__$1$$, $avet$jscomp$4_opts$$) {
  var $rschema$$ = $APP.cljs.core.first($APP.cljs.core.drop_while.cljs$core$IFn$_invoke$arity$2(datascript.db.datom_QMARK_, $avet_arr_avet_datoms_datoms_max_eid$$));
  if ($rschema$$ != null) {
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["init-db expects list of Datoms, got ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.type($rschema$$)], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$1404$error, cljs$cst$4479$init_db], null));
  }
  datascript.db.validate_schema($schema__$1$$);
  $rschema$$ = datascript.db.rschema($APP.cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$2374$db_SLASH_ident, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$4438$db_SLASH_unique, cljs$cst$4439$db_DOT_unique_SLASH_identity], null)], null), $schema__$1$$], 0)));
  var $indexed$$ = cljs$cst$4468$db_SLASH_index.cljs$core$IFn$_invoke$arity$1($rschema$$), $aevt$jscomp$3_arr$$ = $APP.me.tonsky.persistent_sorted_set.arrays.array_QMARK_($avet_arr_avet_datoms_datoms_max_eid$$) ? $avet_arr_avet_datoms_datoms_max_eid$$ : $APP.me.tonsky.persistent_sorted_set.arrays.into_array($avet_arr_avet_datoms_datoms_max_eid$$);
  $APP.me.tonsky.persistent_sorted_set.arrays.asort($aevt$jscomp$3_arr$$, datascript.db.cmp_datoms_eavt_quick);
  var $eavt$$ = $APP.me.tonsky.persistent_sorted_set.from_sorted_array.cljs$core$IFn$_invoke$arity$4(datascript.db.cmp_datoms_eavt, $aevt$jscomp$3_arr$$, $aevt$jscomp$3_arr$$.length, $avet$jscomp$4_opts$$);
  $APP.me.tonsky.persistent_sorted_set.arrays.asort($aevt$jscomp$3_arr$$, datascript.db.cmp_datoms_aevt_quick);
  $aevt$jscomp$3_arr$$ = $APP.me.tonsky.persistent_sorted_set.from_sorted_array.cljs$core$IFn$_invoke$arity$4(datascript.db.cmp_datoms_aevt, $aevt$jscomp$3_arr$$, $aevt$jscomp$3_arr$$.length, $avet$jscomp$4_opts$$);
  $avet_arr_avet_datoms_datoms_max_eid$$ = $APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2(function($d$$) {
    return $APP.cljs.core.contains_QMARK_($indexed$$, $d$$.a);
  }, $avet_arr_avet_datoms_datoms_max_eid$$);
  $avet_arr_avet_datoms_datoms_max_eid$$ = $APP.cljs.core.to_array($avet_arr_avet_datoms_datoms_max_eid$$);
  $APP.me.tonsky.persistent_sorted_set.arrays.asort($avet_arr_avet_datoms_datoms_max_eid$$, datascript.db.cmp_datoms_avet_quick);
  $avet$jscomp$4_opts$$ = $APP.me.tonsky.persistent_sorted_set.from_sorted_array.cljs$core$IFn$_invoke$arity$4(datascript.db.cmp_datoms_avet, $avet_arr_avet_datoms_datoms_max_eid$$, $avet_arr_avet_datoms_datoms_max_eid$$.length, $avet$jscomp$4_opts$$);
  $avet_arr_avet_datoms_datoms_max_eid$$ = datascript.db.init_max_eid($rschema$$, $eavt$$, $avet$jscomp$4_opts$$);
  var $max_tx$$ = $APP.cljs.core.transduce.cljs$core$IFn$_invoke$arity$4($APP.cljs.core.map.cljs$core$IFn$_invoke$arity$1(function($d$$) {
    return $d$$.datascript$db$IDatom$datom_tx$arity$1(null);
  }), $APP.cljs.core.max, 536870912, $eavt$$);
  return datascript.db.map__GT_DB($APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$1410$schema, $APP.cljs$cst$4447$max_tx, $APP.cljs$cst$4451$hash, $APP.cljs$cst$4445$aevt, $APP.cljs$cst$4441$avet, $APP.cljs$cst$4446$max_eid, $APP.cljs$cst$4444$eavt, cljs$cst$4450$pull_attrs, cljs$cst$4449$pull_patterns, $APP.cljs$cst$4448$rschema], [$schema__$1$$, $max_tx$$, $APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1(0), $aevt$jscomp$3_arr$$, $avet$jscomp$4_opts$$, $avet_arr_avet_datoms_datoms_max_eid$$, 
  $eavt$$, datascript.lru.cache(100), datascript.lru.cache(100), $rschema$$]));
};
datascript.db.restore_db = function($map__69418__$1_p__69417$$) {
  $map__69418__$1_p__69417$$ = $APP.cljs.core.__destructure_map($map__69418__$1_p__69417$$);
  $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__69418__$1_p__69417$$, $APP.cljs$cst$1410$schema);
  $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__69418__$1_p__69417$$, $APP.cljs$cst$4444$eavt);
  $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__69418__$1_p__69417$$, $APP.cljs$cst$4445$aevt);
  $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__69418__$1_p__69417$$, $APP.cljs$cst$4441$avet);
  $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__69418__$1_p__69417$$, $APP.cljs$cst$4446$max_eid);
  $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__69418__$1_p__69417$$, $APP.cljs$cst$4447$max_tx);
  return null;
};
datascript.db.restore_db = function($p__69419_schema__$1$$) {
  var $JSCompiler_inline_result$jscomp$10224_map__69420__$1_or__5025__auto__$$ = $APP.cljs.core.__destructure_map($p__69419_schema__$1$$);
  $p__69419_schema__$1$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($JSCompiler_inline_result$jscomp$10224_map__69420__$1_or__5025__auto__$$, $APP.cljs$cst$1410$schema);
  var $eavt$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($JSCompiler_inline_result$jscomp$10224_map__69420__$1_or__5025__auto__$$, $APP.cljs$cst$4444$eavt), $aevt$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($JSCompiler_inline_result$jscomp$10224_map__69420__$1_or__5025__auto__$$, $APP.cljs$cst$4445$aevt), $avet$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($JSCompiler_inline_result$jscomp$10224_map__69420__$1_or__5025__auto__$$, $APP.cljs$cst$4441$avet), $JSCompiler_temp_const$jscomp$10217_max_eid$$ = 
  $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($JSCompiler_inline_result$jscomp$10224_map__69420__$1_or__5025__auto__$$, $APP.cljs$cst$4446$max_eid), $JSCompiler_temp_const$jscomp$10219_max_tx$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($JSCompiler_inline_result$jscomp$10224_map__69420__$1_or__5025__auto__$$, $APP.cljs$cst$4447$max_tx), $JSCompiler_temp_const$$ = datascript.db, $JSCompiler_temp_const$jscomp$0$$ = $JSCompiler_temp_const$$.map__GT_DB, $JSCompiler_temp_const$jscomp$1$$ = 
  $APP.cljs.core.PersistentHashMap, $JSCompiler_temp_const$jscomp$2$$ = $JSCompiler_temp_const$jscomp$1$$.fromArrays;
  $JSCompiler_temp_const$jscomp$10219_max_tx$$ = $APP.cljs.core.truth_($JSCompiler_temp_const$jscomp$10219_max_tx$$) ? $JSCompiler_temp_const$jscomp$10219_max_tx$$ : 536870912;
  var $JSCompiler_temp_const$jscomp$3$$ = $APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1(0);
  $JSCompiler_temp_const$jscomp$10217_max_eid$$ = $APP.cljs.core.truth_($JSCompiler_temp_const$jscomp$10217_max_eid$$) ? $JSCompiler_temp_const$jscomp$10217_max_eid$$ : 0;
  var $JSCompiler_temp_const$jscomp$4$$ = datascript.lru.cache(100), $JSCompiler_temp_const$jscomp$5$$ = datascript.lru.cache(100);
  $JSCompiler_inline_result$jscomp$10224_map__69420__$1_or__5025__auto__$$ = $APP.cljs$cst$4448$rschema.cljs$core$IFn$_invoke$arity$1($JSCompiler_inline_result$jscomp$10224_map__69420__$1_or__5025__auto__$$);
  $JSCompiler_inline_result$jscomp$10224_map__69420__$1_or__5025__auto__$$ = $APP.cljs.core.truth_($JSCompiler_inline_result$jscomp$10224_map__69420__$1_or__5025__auto__$$) ? $JSCompiler_inline_result$jscomp$10224_map__69420__$1_or__5025__auto__$$ : datascript.db.rschema($APP.cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$2374$db_SLASH_ident, new $APP.cljs.core.PersistentArrayMap(null, 
  1, [$APP.cljs$cst$4438$db_SLASH_unique, cljs$cst$4439$db_DOT_unique_SLASH_identity], null)], null), $p__69419_schema__$1$$], 0)));
  return $JSCompiler_temp_const$jscomp$0$$.call($JSCompiler_temp_const$$, $JSCompiler_temp_const$jscomp$2$$.call($JSCompiler_temp_const$jscomp$1$$, [$APP.cljs$cst$1410$schema, $APP.cljs$cst$4447$max_tx, $APP.cljs$cst$4451$hash, $APP.cljs$cst$4445$aevt, $APP.cljs$cst$4441$avet, $APP.cljs$cst$4446$max_eid, $APP.cljs$cst$4444$eavt, cljs$cst$4450$pull_attrs, cljs$cst$4449$pull_patterns, $APP.cljs$cst$4448$rschema], [$p__69419_schema__$1$$, $JSCompiler_temp_const$jscomp$10219_max_tx$$, $JSCompiler_temp_const$jscomp$3$$, 
  $aevt$$, $avet$$, $JSCompiler_temp_const$jscomp$10217_max_eid$$, $eavt$$, $JSCompiler_temp_const$jscomp$4$$, $JSCompiler_temp_const$jscomp$5$$, $JSCompiler_inline_result$jscomp$10224_map__69420__$1_or__5025__auto__$$]));
};
datascript.db.with_schema = function($db$$, $schema__$1$$) {
  return $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic($db$$, $APP.cljs$cst$1410$schema, $schema__$1$$, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$4448$rschema, datascript.db.rschema($APP.cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$2374$db_SLASH_ident, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$4438$db_SLASH_unique, 
  cljs$cst$4439$db_DOT_unique_SLASH_identity], null)], null), $schema__$1$$], 0))), cljs$cst$4449$pull_patterns, datascript.lru.cache(100), cljs$cst$4450$pull_attrs, datascript.lru.cache(100), $APP.cljs$cst$4451$hash, $APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1(0)], 0));
};
datascript.db.equiv_db_index = function($G__69894_x$jscomp$1258_xs$$, $G__69895_y$jscomp$452_ys$$) {
  $G__69894_x$jscomp$1258_xs$$ = $APP.cljs.core.seq($G__69894_x$jscomp$1258_xs$$);
  for ($G__69895_y$jscomp$452_ys$$ = $APP.cljs.core.seq($G__69895_y$jscomp$452_ys$$);;) {
    if ($G__69894_x$jscomp$1258_xs$$ == null) {
      return $G__69895_y$jscomp$452_ys$$ == null;
    }
    if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.first($G__69894_x$jscomp$1258_xs$$), $APP.cljs.core.first($G__69895_y$jscomp$452_ys$$))) {
      $G__69894_x$jscomp$1258_xs$$ = $APP.cljs.core.next($G__69894_x$jscomp$1258_xs$$), $G__69895_y$jscomp$452_ys$$ = $APP.cljs.core.next($G__69895_y$jscomp$452_ys$$);
    } else {
      return !1;
    }
  }
};
datascript.db.hash_db = function($db$$) {
  return null;
};
datascript.db.hash_db = function($db$$) {
  var $h$$ = $APP.cljs.core.deref($db$$.hash);
  return $h$$ === 0 ? $APP.cljs.core.reset_BANG_($db$$.hash, datascript.db.combine_hashes($APP.cljs.core.hash($db$$.schema), $APP.cljs.core.hash($db$$.eavt))) : $h$$;
};
datascript.db.hash_fdb = function($db$$) {
  return null;
};
datascript.db.hash_fdb = function($db$$) {
  var $datoms__$1_h$$ = $APP.cljs.core.deref($db$$.hash);
  (function() {
    var $or__5025__auto__$$ = datascript.db._datoms($db$$, $APP.cljs$cst$4444$eavt, null, null, null, null);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs.core.PersistentHashSet.EMPTY;
  })();
  return $datoms__$1_h$$ === 0 ? ($datoms__$1_h$$ = function() {
    var $or__5025__auto__$$ = datascript.db._datoms($db$$, $APP.cljs$cst$4444$eavt, null, null, null, null);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs.core.PersistentHashSet.EMPTY;
  }(), $APP.cljs.core.reset_BANG_($db$$.hash, datascript.db.combine_hashes($APP.cljs.core.hash(datascript.db._schema($db$$)), $APP.cljs.core.hash_unordered_coll($datoms__$1_h$$)))) : $datoms__$1_h$$;
};
datascript.db.equiv_db = function($db$$, $other$$) {
  return null;
};
datascript.db.equiv_db = function($db$$, $other$$) {
  return ($other$$ instanceof datascript.db.DB || $other$$ instanceof datascript.db.FilteredDB) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(datascript.db._schema($db$$), datascript.db._schema($other$$)) && datascript.db.equiv_db_index(datascript.db._datoms($db$$, $APP.cljs$cst$4444$eavt, null, null, null, null), datascript.db._datoms($other$$, $APP.cljs$cst$4444$eavt, null, null, null, null));
};
datascript.db.pr_db = function($db$$, $w$$, $opts$$) {
  return null;
};
datascript.db.pr_db = function($db$$, $w$$, $opts$$) {
  $APP.cljs.core._write($w$$, "#datascript/DB {");
  $APP.cljs.core._write($w$$, ":schema ");
  $APP.cljs.core.pr_writer(datascript.db._schema($db$$), $w$$, $opts$$);
  $APP.cljs.core._write($w$$, ", :datoms ");
  $APP.cljs.core.pr_sequential_writer($w$$, function($d$$, $w__$1$$, $opts__$1$$) {
    return $APP.cljs.core.pr_sequential_writer($w__$1$$, $APP.cljs.core.pr_writer, "[", " ", "]", $opts__$1$$, new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$d$$.e, $d$$.a, $d$$.v, datascript.db.datom_tx($d$$)], null));
  }, "[", " ", "]", $opts$$, datascript.db._datoms($db$$, $APP.cljs$cst$4444$eavt, null, null, null, null));
  return $APP.cljs.core._write($w$$, "}");
};
datascript.db.db_from_reader = function($p__69421_schema__$1$$) {
  var $datoms$$ = $APP.cljs.core.__destructure_map($p__69421_schema__$1$$);
  $p__69421_schema__$1$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($datoms$$, $APP.cljs$cst$1410$schema);
  $datoms$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($datoms$$, cljs$cst$4480$datoms);
  return datascript.db.init_db($APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(function($p__69423_tx$$) {
    var $e$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__69423_tx$$, 0, null), $a$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__69423_tx$$, 1, null), $v$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__69423_tx$$, 2, null);
    $p__69423_tx$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__69423_tx$$, 3, null);
    return datascript.db.datom.cljs$core$IFn$_invoke$arity$4($e$$, $a$$, $v$$, $p__69423_tx$$);
  }, $datoms$$), $p__69421_schema__$1$$, $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.db.entid_strict = function($db$$, $eid$$) {
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Not implemented: (", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.db.entid_strict), $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$2(" ", new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$db$$, $eid$$], null))].join(""), $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.db.ref_QMARK_ = function($db$$, $attr$$) {
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Not implemented: (", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.db.ref_QMARK_), $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$2(" ", new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$db$$, $attr$$], null))].join(""), $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.db.resolve_datom = function($db$$, $e$$, $a$$, $v$$, $t$$, $default_e$$, $default_tx$$) {
  return null;
};
datascript.db.resolve_datom = function($at__67599__auto___69947_db$$, $e$$, $a$$, $v$$, $t$$, $default_e$$, $default_tx$$) {
  if ($a$$ != null && !($a$$ instanceof $APP.cljs.core.Keyword || typeof $a$$ === "string")) {
    throw $at__67599__auto___69947_db$$ = new $APP.cljs.core.List(null, cljs$cst$4481$resolve_datom, new $APP.cljs.core.List(null, $APP.cljs$cst$2542$db, new $APP.cljs.core.List(null, $e$$, new $APP.cljs.core.List(null, $a$$, new $APP.cljs.core.List(null, $v$$, new $APP.cljs.core.List(null, $t$$, null, 1, null), 2, null), 3, null), 4, null), 5, null), 6, null), $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Bad entity attribute ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$a$$], 
    0)), " at ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$at__67599__auto___69947_db$$], 0)), ", expected keyword or string"].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [cljs$cst$4462$attribute, $a$$, $APP.cljs$cst$4463$context, $at__67599__auto___69947_db$$, $APP.cljs$cst$1404$error, cljs$cst$4464$transact_SLASH_syntax], null));
  }
  return datascript.db.datom.cljs$core$IFn$_invoke$arity$4($e$$ != null ? datascript.db.entid_strict($at__67599__auto___69947_db$$, $e$$) : $default_e$$, $a$$, $v$$ != null && datascript.db.ref_QMARK_($at__67599__auto___69947_db$$, $a$$) ? datascript.db.entid_strict($at__67599__auto___69947_db$$, $v$$) : $v$$, $t$$ != null ? datascript.db.entid_strict($at__67599__auto___69947_db$$, $t$$) : $default_tx$$);
};
datascript.db.components__GT_pattern = function($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$, $default_e$$, $default_tx$$) {
  return null;
};
datascript.db.components__GT_pattern = function($db$$, $G__69427__$1_index$$, $c0$$, $c1$$, $c2$$, $c3$$, $default_e$$, $default_tx$$) {
  $G__69427__$1_index$$ = $G__69427__$1_index$$ instanceof $APP.cljs.core.Keyword ? $G__69427__$1_index$$.fqn : null;
  switch($G__69427__$1_index$$) {
    case "eavt":
      return datascript.db.resolve_datom($db$$, $c0$$, $c1$$, $c2$$, $c3$$, $default_e$$, $default_tx$$);
    case "aevt":
      return datascript.db.resolve_datom($db$$, $c1$$, $c0$$, $c2$$, $c3$$, $default_e$$, $default_tx$$);
    case "avet":
      return datascript.db.resolve_datom($db$$, $c2$$, $c0$$, $c1$$, $c3$$, $default_e$$, $default_tx$$);
    default:
      throw Error(["No matching clause: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($G__69427__$1_index$$)].join(""));
  }
};
datascript.db.find_datom = function($db$jscomp$78_to$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) {
  datascript.db.validate_indexed($db$jscomp$78_to$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$);
  var $G__69428__$1$jscomp$inline_6816_set$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($db$jscomp$78_to$$, $index$$), $cmp$$ = $G__69428__$1$jscomp$inline_6816_set$$.comparator, $G__69428__$2$jscomp$inline_6817_datom_from$$ = datascript.db.components__GT_pattern($db$jscomp$78_to$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$, 0, 536870912);
  $db$jscomp$78_to$$ = datascript.db.components__GT_pattern($db$jscomp$78_to$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$, 2147483647, 2147483647);
  $G__69428__$1$jscomp$inline_6816_set$$ = $G__69428__$1$jscomp$inline_6816_set$$ == null ? null : $APP.cljs.core.seq($G__69428__$1$jscomp$inline_6816_set$$);
  $G__69428__$2$jscomp$inline_6817_datom_from$$ = $G__69428__$1$jscomp$inline_6816_set$$ == null ? null : $APP.me.tonsky.persistent_sorted_set.seek.cljs$core$IFn$_invoke$arity$2($G__69428__$1$jscomp$inline_6816_set$$, $G__69428__$2$jscomp$inline_6817_datom_from$$);
  $G__69428__$2$jscomp$inline_6817_datom_from$$ = $G__69428__$2$jscomp$inline_6817_datom_from$$ == null ? null : $APP.cljs.core.first($G__69428__$2$jscomp$inline_6817_datom_from$$);
  return $G__69428__$2$jscomp$inline_6817_datom_from$$ != null && 0 <= ($cmp$$.cljs$core$IFn$_invoke$arity$2 ? $cmp$$.cljs$core$IFn$_invoke$arity$2($db$jscomp$78_to$$, $G__69428__$2$jscomp$inline_6817_datom_from$$) : $cmp$$.call(null, $db$jscomp$78_to$$, $G__69428__$2$jscomp$inline_6817_datom_from$$)) ? $G__69428__$2$jscomp$inline_6817_datom_from$$ : null;
};
datascript.db.TxReport = function($db_before$$, $db_after$$, $tx_data$$, $tempids$$, $tx_meta$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.db_before = $db_before$$;
  this.db_after = $db_after$$;
  this.tx_data = $tx_data$$;
  this.tempids = $tempids$$;
  this.tx_meta = $tx_meta$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.db.TxReport.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.db.TxReport.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k69430$$, $else__5326__auto__$$) {
  switch($k69430$$ instanceof $APP.cljs.core.Keyword ? $k69430$$.fqn : null) {
    case "db-before":
      return this.db_before;
    case "db-after":
      return this.db_after;
    case "tx-data":
      return this.tx_data;
    case "tempids":
      return this.tempids;
    case "tx-meta":
      return this.tx_meta;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k69430$$, $else__5326__auto__$$);
  }
};
datascript.db.TxReport.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__69435_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__69435_v__5348__auto__$$, 0, null);
    $p__69435_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__69435_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__69435_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__69435_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.db.TxReport.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.db.TxReport{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2507$db_before, this.db_before], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2508$db_after, this.db_after], null), 
  new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2500$tx_data, this.tx_data], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2509$tempids, this.tempids], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4482$tx_meta, this.tx_meta], null)], null), this.__extmap));
};
datascript.db.TxReport.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__69429$$) {
  return new $APP.cljs.core.RecordIter(0, this, 5, new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2507$db_before, $APP.cljs$cst$2508$db_after, $APP.cljs$cst$2500$tx_data, $APP.cljs$cst$2509$tempids, cljs$cst$4482$tx_meta], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.db.TxReport.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.db.TxReport.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.db.TxReport(this.db_before, this.db_after, this.tx_data, this.tempids, this.tx_meta, this.__meta, this.__extmap, this.__hash);
};
datascript.db.TxReport.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 5 + $APP.cljs.core.count(this.__extmap);
};
datascript.db.TxReport.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$144_h__5134__auto____$1$jscomp$144_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$144_h__5134__auto____$1$jscomp$144_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$144_h__5134__auto____$1$jscomp$144_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$144_h__5134__auto____$1$jscomp$144_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$144_h__5134__auto____$1$jscomp$144_this__5319__auto__$$ = -2022644885 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.db.TxReport.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this69431$$, $other69432$$) {
  return $other69432$$ != null && this.constructor === $other69432$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.db_before, $other69432$$.db_before) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.db_after, $other69432$$.db_after) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.tx_data, $other69432$$.tx_data) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.tempids, $other69432$$.tempids) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.tx_meta, 
  $other69432$$.tx_meta) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other69432$$.__extmap);
};
datascript.db.TxReport.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 5, [$APP.cljs$cst$2509$tempids, null, $APP.cljs$cst$2508$db_after, null, $APP.cljs$cst$2507$db_before, null, $APP.cljs$cst$2500$tx_data, null, cljs$cst$4482$tx_meta, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, 
  this), this.__meta), $k__5334__auto__$$) : new datascript.db.TxReport(this.db_before, this.db_after, this.tx_data, this.tempids, this.tx_meta, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.db.TxReport.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k69430$$) {
  switch($k69430$$ instanceof $APP.cljs.core.Keyword ? $k69430$$.fqn : null) {
    case "db-before":
    case "db-after":
    case "tx-data":
    case "tempids":
    case "tx-meta":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k69430$$);
  }
};
datascript.db.TxReport.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__69440_this__5331__auto__$$, $k__5332__auto__$$, $G__69429$$) {
  $pred__69440_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__69440_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__69440_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2507$db_before, $k__5332__auto__$$) : $pred__69440_this__5331__auto__$$.call(null, $APP.cljs$cst$2507$db_before, $k__5332__auto__$$)) ? new datascript.db.TxReport($G__69429$$, this.db_after, this.tx_data, this.tempids, this.tx_meta, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__69440_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? 
  $pred__69440_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2508$db_after, $k__5332__auto__$$) : $pred__69440_this__5331__auto__$$.call(null, $APP.cljs$cst$2508$db_after, $k__5332__auto__$$)) ? new datascript.db.TxReport(this.db_before, $G__69429$$, this.tx_data, this.tempids, this.tx_meta, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__69440_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__69440_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2500$tx_data, 
  $k__5332__auto__$$) : $pred__69440_this__5331__auto__$$.call(null, $APP.cljs$cst$2500$tx_data, $k__5332__auto__$$)) ? new datascript.db.TxReport(this.db_before, this.db_after, $G__69429$$, this.tempids, this.tx_meta, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__69440_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__69440_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2509$tempids, $k__5332__auto__$$) : $pred__69440_this__5331__auto__$$.call(null, 
  $APP.cljs$cst$2509$tempids, $k__5332__auto__$$)) ? new datascript.db.TxReport(this.db_before, this.db_after, this.tx_data, $G__69429$$, this.tx_meta, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__69440_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__69440_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4482$tx_meta, $k__5332__auto__$$) : $pred__69440_this__5331__auto__$$.call(null, cljs$cst$4482$tx_meta, $k__5332__auto__$$)) ? new datascript.db.TxReport(this.db_before, 
  this.db_after, this.tx_data, this.tempids, $G__69429$$, this.__meta, this.__extmap, null) : new datascript.db.TxReport(this.db_before, this.db_after, this.tx_data, this.tempids, this.tx_meta, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__69429$$), null);
};
datascript.db.TxReport.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$2507$db_before, this.db_before, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$2508$db_after, this.db_after, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$2500$tx_data, this.tx_data, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$2509$tempids, this.tempids, null), new $APP.cljs.core.MapEntry(cljs$cst$4482$tx_meta, 
  this.tx_meta, null)], null), this.__extmap));
};
datascript.db.TxReport.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__69429$$) {
  return new datascript.db.TxReport(this.db_before, this.db_after, this.tx_data, this.tempids, this.tx_meta, $G__69429$$, this.__extmap, this.__hash);
};
datascript.db.TxReport.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.db.TxReport.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4483$db_before, cljs$cst$4484$db_after, cljs$cst$4485$tx_data, cljs$cst$4486$tempids, cljs$cst$4487$tx_meta], null);
};
datascript.db.TxReport.cljs$lang$type = !0;
datascript.db.TxReport.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.db/TxReport", null, 1, null);
};
datascript.db.TxReport.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.db/TxReport");
};
datascript.db.__GT_TxReport = function($db_before$$, $db_after$$, $tx_data$$, $tempids$$, $tx_meta$$) {
  return new datascript.db.TxReport($db_before$$, $db_after$$, $tx_data$$, $tempids$$, $tx_meta$$, null, null, null);
};
datascript.db.map__GT_TxReport = function($G__69433$$) {
  var $G__69443$jscomp$inline_6819_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__69433$$, $APP.cljs$cst$2507$db_before, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$2508$db_after, $APP.cljs$cst$2500$tx_data, $APP.cljs$cst$2509$tempids, cljs$cst$4482$tx_meta], 0));
  $G__69443$jscomp$inline_6819_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__69433$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__69443$jscomp$inline_6819_extmap__5365__auto__$$) : $G__69443$jscomp$inline_6819_extmap__5365__auto__$$;
  return new datascript.db.TxReport($APP.cljs$cst$2507$db_before.cljs$core$IFn$_invoke$arity$1($G__69433$$), $APP.cljs$cst$2508$db_after.cljs$core$IFn$_invoke$arity$1($G__69433$$), $APP.cljs$cst$2500$tx_data.cljs$core$IFn$_invoke$arity$1($G__69433$$), $APP.cljs$cst$2509$tempids.cljs$core$IFn$_invoke$arity$1($G__69433$$), cljs$cst$4482$tx_meta.cljs$core$IFn$_invoke$arity$1($G__69433$$), null, $APP.cljs.core.not_empty($G__69443$jscomp$inline_6819_extmap__5365__auto__$$), null);
};
datascript.db.is_attr_QMARK_ = function($db$$, $attr$$, $property$$) {
  return null;
};
datascript.db.is_attr_QMARK_ = function($db$$, $attr$$, $property$$) {
  return $APP.cljs.core.contains_QMARK_(datascript.db._attrs_by($db$$, $property$$), $attr$$);
};
datascript.db.multival_QMARK_ = function($db$$, $attr$$) {
  return null;
};
datascript.db.multival_QMARK_ = function($db$$, $attr$$) {
  return datascript.db.is_attr_QMARK_($db$$, $attr$$, $APP.cljs$cst$4465$db_DOT_cardinality_SLASH_many);
};
datascript.db.multi_value_QMARK_ = function($db$$, $attr$$, $value$$) {
  return null;
};
datascript.db.multi_value_QMARK_ = function($db$$, $attr$$, $value$$) {
  return datascript.db.is_attr_QMARK_($db$$, $attr$$, $APP.cljs$cst$4465$db_DOT_cardinality_SLASH_many) && ($APP.me.tonsky.persistent_sorted_set.arrays.array_QMARK_($value$$) || $APP.cljs.core.coll_QMARK_($value$$) && !$APP.cljs.core.map_QMARK_($value$$));
};
datascript.db.ref_QMARK_ = function($db$$, $attr$$) {
  return null;
};
datascript.db.ref_QMARK_ = function($db$$, $attr$$) {
  return datascript.db.is_attr_QMARK_($db$$, $attr$$, $APP.cljs$cst$4470$db_DOT_type_SLASH_ref);
};
datascript.db.component_QMARK_ = function($db$$, $attr$$) {
  return null;
};
datascript.db.component_QMARK_ = function($db$$, $attr$$) {
  return datascript.db.is_attr_QMARK_($db$$, $attr$$, cljs$cst$4471$db_SLASH_isComponent);
};
datascript.db.indexing_QMARK_ = function($db$$, $attr$$) {
  return null;
};
datascript.db.indexing_QMARK_ = function($db$$, $attr$$) {
  return datascript.db.is_attr_QMARK_($db$$, $attr$$, cljs$cst$4468$db_SLASH_index);
};
datascript.db.tuple_QMARK_ = function($db$$, $attr$$) {
  return null;
};
datascript.db.tuple_QMARK_ = function($db$$, $attr$$) {
  return datascript.db.is_attr_QMARK_($db$$, $attr$$, cljs$cst$4473$db_DOT_type_SLASH_tuple);
};
datascript.db.tuple_source_QMARK_ = function($db$$, $attr$$) {
  return null;
};
datascript.db.tuple_source_QMARK_ = function($db$$, $attr$$) {
  return datascript.db.is_attr_QMARK_($db$$, $attr$$, cljs$cst$4474$db_SLASH_attrTuples);
};
datascript.db.reverse_ref_QMARK_ = function($attr$$) {
  return null;
};
datascript.db.reverse_ref_QMARK_ = function($attr$$) {
  if ($attr$$ instanceof $APP.cljs.core.Keyword) {
    return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2("_", $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.name($attr$$), 0));
  }
  if (typeof $attr$$ === "string") {
    return $APP.cljs.core.boolean$($APP.cljs.core.re_matches(/(?:([^\/]+)\/)?_([^\/]+)/, $attr$$));
  }
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Bad attribute type: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$attr$$], 0)), ", expected keyword or string"].join(""), new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4464$transact_SLASH_syntax, cljs$cst$4462$attribute, $attr$$], null));
};
datascript.db.reverse_ref = function($attr$jscomp$38_ns$$) {
  if ($attr$jscomp$38_ns$$ instanceof $APP.cljs.core.Keyword) {
    return datascript.db.reverse_ref_QMARK_($attr$jscomp$38_ns$$) ? $APP.cljs.core.keyword.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.namespace($attr$jscomp$38_ns$$), $APP.cljs.core.subs.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.name($attr$jscomp$38_ns$$), 1)) : $APP.cljs.core.keyword.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.namespace($attr$jscomp$38_ns$$), ["_", $APP.cljs.core.name($attr$jscomp$38_ns$$)].join(""));
  }
  if (typeof $attr$jscomp$38_ns$$ === "string") {
    var $name$$ = $APP.cljs.core.re_matches(/(?:([^\/]+)\/)?([^\/]+)/, $attr$jscomp$38_ns$$);
    $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($name$$, 0, null);
    $attr$jscomp$38_ns$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($name$$, 1, null);
    $name$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($name$$, 2, null);
    return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2("_", $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2($name$$, 0)) ? $APP.cljs.core.truth_($attr$jscomp$38_ns$$) ? [$APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($attr$jscomp$38_ns$$), "/", $APP.cljs.core.subs.cljs$core$IFn$_invoke$arity$2($name$$, 1)].join("") : $APP.cljs.core.subs.cljs$core$IFn$_invoke$arity$2($name$$, 1) : $APP.cljs.core.truth_($attr$jscomp$38_ns$$) ? [$APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($attr$jscomp$38_ns$$), 
    "/_", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($name$$)].join("") : ["_", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($name$$)].join("");
  }
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Bad attribute type: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$attr$jscomp$38_ns$$], 0)), ", expected keyword or string"].join(""), new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4464$transact_SLASH_syntax, cljs$cst$4462$attribute, $attr$jscomp$38_ns$$], null));
};
datascript.db.resolve_tuple_refs = function($db$$, $a$$, $vs$$) {
  return $APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$3(function($a__$1$$, $v$$) {
    return datascript.db.ref_QMARK_($db$$, $a__$1$$) && $APP.cljs.core.sequential_QMARK_($v$$) ? datascript.db.entid_strict($db$$, $v$$) : $v$$;
  }, cljs$cst$4472$db_SLASH_tupleAttrs.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2(datascript.db._schema($db$$), $a$$)), $vs$$);
};
datascript.db.entid = function($db$$, $eid$$) {
  return null;
};
datascript.db.entid = function($G__69967_db$$, $G__69968_eid$$) {
  for (;;) {
    if (typeof $G__69968_eid$$ === "number" && $G__69968_eid$$ > 0) {
      if ($G__69968_eid$$ > 2147483647) {
        throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Highest supported entity id is ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([2147483647], 0)), ", got ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69968_eid$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4488$entity_id, $APP.cljs$cst$1429$value, 
        $G__69968_eid$$], null));
      }
      return $G__69968_eid$$;
    }
    if ($APP.cljs.core.sequential_QMARK_($G__69968_eid$$)) {
      var $value$$ = $G__69968_eid$$, $attr$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($value$$, 0, null);
      $value$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($value$$, 1, null);
      if ($APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.count($G__69968_eid$$), 2)) {
        throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Lookup ref should contain 2 elements: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69968_eid$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4489$lookup_ref_SLASH_syntax, cljs$cst$4488$entity_id, $G__69968_eid$$], null));
      }
      if (datascript.db.is_attr_QMARK_($G__69967_db$$, $attr$$, $APP.cljs$cst$4438$db_SLASH_unique)) {
        return datascript.db.tuple_QMARK_($G__69967_db$$, $attr$$) ? ($G__69968_eid$$ = datascript.db.resolve_tuple_refs($G__69967_db$$, $attr$$, $value$$), $APP.cljs$cst$1628$e.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first(datascript.db._datoms($G__69967_db$$, $APP.cljs$cst$4441$avet, $attr$$, $G__69968_eid$$, null, null)))) : $value$$ == null ? null : $APP.cljs$cst$1628$e.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first(datascript.db._datoms($G__69967_db$$, $APP.cljs$cst$4441$avet, $attr$$, 
        $value$$, null, null)));
      }
      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Lookup ref attribute should be marked as :db/unique: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69968_eid$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4490$lookup_ref_SLASH_unique, cljs$cst$4488$entity_id, $G__69968_eid$$], null));
    }
    if ($APP.cljs.core.array_QMARK_($G__69968_eid$$)) {
      $G__69968_eid$$ = $APP.cljs.core.array_seq.cljs$core$IFn$_invoke$arity$1($G__69968_eid$$);
    } else {
      if ($G__69968_eid$$ instanceof $APP.cljs.core.Keyword) {
        return $APP.cljs$cst$1628$e.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first(datascript.db._datoms($G__69967_db$$, $APP.cljs$cst$4441$avet, $APP.cljs$cst$2374$db_SLASH_ident, $G__69968_eid$$, null, null)));
      }
      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Expected number or lookup ref for entity id, got ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__69968_eid$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4491$entity_id_SLASH_syntax, cljs$cst$4488$entity_id, $G__69968_eid$$], null));
    }
  }
};
datascript.db.numeric_eid_exists_QMARK_ = function($db$$, $eid$$) {
  return null;
};
datascript.db.numeric_eid_exists_QMARK_ = function($db$$, $eid$$) {
  return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($eid$$, $APP.cljs$cst$1628$e.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first(datascript.db._seek_datoms($db$$, $APP.cljs$cst$4444$eavt, $eid$$, null, null, null))));
};
datascript.db.entid_strict = function($db$$, $eid$$) {
  return null;
};
datascript.db.entid_strict = function($db$jscomp$101_or__5025__auto__$$, $eid$$) {
  $db$jscomp$101_or__5025__auto__$$ = datascript.db.entid($db$jscomp$101_or__5025__auto__$$, $eid$$);
  if ($APP.cljs.core.truth_($db$jscomp$101_or__5025__auto__$$)) {
    return $db$jscomp$101_or__5025__auto__$$;
  }
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Nothing found for entity id ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$eid$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4492$entity_id_SLASH_missing, cljs$cst$4488$entity_id, $eid$$], null));
};
datascript.db.entid_some = function($db$$, $eid$$) {
  return null;
};
datascript.db.entid_some = function($db$$, $eid$$) {
  return $eid$$ != null ? datascript.db.entid_strict($db$$, $eid$$) : null;
};
datascript.db._STAR_last_auto_tempid = $APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1(0);
datascript.db.AutoTempid = function($id$$) {
  this.id = $id$$;
  this.cljs$lang$protocol_mask$partition0$ = 2147483648;
  this.cljs$lang$protocol_mask$partition1$ = 0;
};
datascript.db.AutoTempid.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($d$$, $writer$$, $opts$$) {
  return $APP.cljs.core.pr_sequential_writer($writer$$, $APP.cljs.core.pr_writer, "#datascript/AutoTempid [", " ", "]", $opts$$, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [this.id], null));
};
datascript.db.AutoTempid.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1850$id], null);
};
datascript.db.AutoTempid.cljs$lang$type = !0;
datascript.db.AutoTempid.cljs$lang$ctorStr = "datascript.db/AutoTempid";
datascript.db.AutoTempid.cljs$lang$ctorPrWriter = function($this__5310__auto__$$, $writer__5311__auto__$$, $opt__5312__auto__$$) {
  return $APP.cljs.core._write($writer__5311__auto__$$, "datascript.db/AutoTempid");
};
datascript.db.__GT_AutoTempid = function($id$$) {
  return new datascript.db.AutoTempid($id$$);
};
datascript.db.auto_tempid = function() {
  return new datascript.db.AutoTempid($APP.cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$2(datascript.db._STAR_last_auto_tempid, $APP.cljs.core.inc));
};
datascript.db.auto_tempid_QMARK_ = function($x$$) {
  return null;
};
datascript.db.auto_tempid_QMARK_ = function($x$$) {
  return $x$$ instanceof datascript.db.AutoTempid;
};
datascript.db.assoc_auto_tempids = function($db$$, $tx_data$$) {
  return function $datascript$db$assoc_auto_tempids_$_iter__69450$$($s__69451$$) {
    return new $APP.cljs.core.LazySeq(null, function() {
      for (;;) {
        var $temp__5825__auto__$$ = $APP.cljs.core.seq($s__69451$$);
        if ($temp__5825__auto__$$) {
          var $s__69451__$2$$ = $temp__5825__auto__$$;
          if ($APP.cljs.core.chunked_seq_QMARK_($s__69451__$2$$)) {
            var $c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__69451__$2$$), $size__5502__auto__$$ = $APP.cljs.core.count($c__5501__auto__$$), $b__69453$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
            return function() {
              for (var $i__69452$$ = 0;;) {
                if ($i__69452$$ < $size__5502__auto__$$) {
                  var $entity$$ = $APP.cljs.core._nth($c__5501__auto__$$, $i__69452$$);
                  $APP.cljs.core.chunk_append($b__69453$$, $APP.cljs.core.map_QMARK_($entity$$) ? $APP.cljs.core.reduce_kv(function($i__69452$$, $entity$$, $c__5501__auto__$$, $size__5502__auto__$$, $b__69453$$, $s__69451__$2$$, $temp__5825__auto__$$) {
                    return function($entity__$1$$, $a$$, $v$$) {
                      return $a$$ instanceof $APP.cljs.core.Keyword || typeof $a$$ === "string" ? datascript.db.ref_QMARK_($db$$, $a$$) && datascript.db.multi_value_QMARK_($db$$, $a$$, $v$$) ? $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($entity__$1$$, $a$$, datascript.db.assoc_auto_tempids.cljs$core$IFn$_invoke$arity$2 ? datascript.db.assoc_auto_tempids.cljs$core$IFn$_invoke$arity$2($db$$, $v$$) : datascript.db.assoc_auto_tempids.call(null, $db$$, $v$$)) : datascript.db.ref_QMARK_($db$$, $a$$) ? 
                      $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($entity__$1$$, $a$$, $APP.cljs.core.first(function() {
                        var $G__69455$$ = new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$v$$], null);
                        return datascript.db.assoc_auto_tempids.cljs$core$IFn$_invoke$arity$2 ? datascript.db.assoc_auto_tempids.cljs$core$IFn$_invoke$arity$2($db$$, $G__69455$$) : datascript.db.assoc_auto_tempids.call(null, $db$$, $G__69455$$);
                      }())) : datascript.db.reverse_ref_QMARK_($a$$) && $APP.cljs.core.sequential_QMARK_($v$$) ? $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($entity__$1$$, $a$$, datascript.db.assoc_auto_tempids.cljs$core$IFn$_invoke$arity$2 ? datascript.db.assoc_auto_tempids.cljs$core$IFn$_invoke$arity$2($db$$, $v$$) : datascript.db.assoc_auto_tempids.call(null, $db$$, $v$$)) : datascript.db.reverse_ref_QMARK_($a$$) ? $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($entity__$1$$, $a$$, 
                      $APP.cljs.core.first(function() {
                        var $G__69457$$ = new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$v$$], null);
                        return datascript.db.assoc_auto_tempids.cljs$core$IFn$_invoke$arity$2 ? datascript.db.assoc_auto_tempids.cljs$core$IFn$_invoke$arity$2($db$$, $G__69457$$) : datascript.db.assoc_auto_tempids.call(null, $db$$, $G__69457$$);
                      }())) : $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($entity__$1$$, $a$$, $v$$) : $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($entity__$1$$, $a$$, $v$$);
                    };
                  }($i__69452$$, $entity$$, $c__5501__auto__$$, $size__5502__auto__$$, $b__69453$$, $s__69451__$2$$, $temp__5825__auto__$$), $APP.cljs.core.PersistentArrayMap.EMPTY, $APP.cljs.core.contains_QMARK_($entity$$, $APP.cljs$cst$2432$db_SLASH_id) ? $entity$$ : $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($entity$$, $APP.cljs$cst$2432$db_SLASH_id, datascript.db.auto_tempid())) : function() {
                    var $G__69458$$ = $APP.cljs.core.volatile_BANG_(null);
                    if (function() {
                      var $and__5023__auto__$$ = $APP.cljs.core.sequential_QMARK_($entity$$);
                      if ($and__5023__auto__$$) {
                        $and__5023__auto__$$ = $APP.cljs.core.vreset_BANG_($G__69458$$, $entity$$);
                        var $op$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($and__5023__auto__$$, 0, null);
                        $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($and__5023__auto__$$, 1, null);
                        var $a$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($and__5023__auto__$$, 2, null);
                        $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($and__5023__auto__$$, 3, null);
                        return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2193$db_SLASH_add, $op$$) && datascript.db.ref_QMARK_($db$$, $a$$) && !0;
                      }
                      return $and__5023__auto__$$;
                    }()) {
                      var $vec__69462$$ = $APP.cljs.core.deref($G__69458$$), $op$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69462$$, 0, null), $e$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69462$$, 1, null), $a$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69462$$, 2, null), $v$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69462$$, 3, null);
                      return datascript.db.multi_value_QMARK_($db$$, $a$$, $v$$) ? new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$op$$, $e$$, $a$$, datascript.db.assoc_auto_tempids.cljs$core$IFn$_invoke$arity$2 ? datascript.db.assoc_auto_tempids.cljs$core$IFn$_invoke$arity$2($db$$, $v$$) : datascript.db.assoc_auto_tempids.call(null, $db$$, $v$$)], null) : new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$op$$, 
                      $e$$, $a$$, $APP.cljs.core.first(function() {
                        var $G__69466$$ = new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$v$$], null);
                        return datascript.db.assoc_auto_tempids.cljs$core$IFn$_invoke$arity$2 ? datascript.db.assoc_auto_tempids.cljs$core$IFn$_invoke$arity$2($db$$, $G__69466$$) : datascript.db.assoc_auto_tempids.call(null, $db$$, $G__69466$$);
                      }())], null);
                    }
                    return $entity$$;
                  }());
                  $i__69452$$ += 1;
                } else {
                  return !0;
                }
              }
            }() ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__69453$$), $datascript$db$assoc_auto_tempids_$_iter__69450$$($APP.cljs.core.chunk_rest($s__69451__$2$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__69453$$), null);
          }
          var $entity$$ = $APP.cljs.core.first($s__69451__$2$$);
          return $APP.cljs.core.cons($APP.cljs.core.map_QMARK_($entity$$) ? $APP.cljs.core.reduce_kv(function($entity$$, $s__69451__$2$$, $temp__5825__auto__$$) {
            return function($entity__$1$$, $a$$, $v$$) {
              return $a$$ instanceof $APP.cljs.core.Keyword || typeof $a$$ === "string" ? datascript.db.ref_QMARK_($db$$, $a$$) && datascript.db.multi_value_QMARK_($db$$, $a$$, $v$$) ? $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($entity__$1$$, $a$$, datascript.db.assoc_auto_tempids.cljs$core$IFn$_invoke$arity$2 ? datascript.db.assoc_auto_tempids.cljs$core$IFn$_invoke$arity$2($db$$, $v$$) : datascript.db.assoc_auto_tempids.call(null, $db$$, $v$$)) : datascript.db.ref_QMARK_($db$$, $a$$) ? $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($entity__$1$$, 
              $a$$, $APP.cljs.core.first(function() {
                var $G__69468$$ = new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$v$$], null);
                return datascript.db.assoc_auto_tempids.cljs$core$IFn$_invoke$arity$2 ? datascript.db.assoc_auto_tempids.cljs$core$IFn$_invoke$arity$2($db$$, $G__69468$$) : datascript.db.assoc_auto_tempids.call(null, $db$$, $G__69468$$);
              }())) : datascript.db.reverse_ref_QMARK_($a$$) && $APP.cljs.core.sequential_QMARK_($v$$) ? $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($entity__$1$$, $a$$, datascript.db.assoc_auto_tempids.cljs$core$IFn$_invoke$arity$2 ? datascript.db.assoc_auto_tempids.cljs$core$IFn$_invoke$arity$2($db$$, $v$$) : datascript.db.assoc_auto_tempids.call(null, $db$$, $v$$)) : datascript.db.reverse_ref_QMARK_($a$$) ? $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($entity__$1$$, $a$$, $APP.cljs.core.first(function() {
                var $G__69470$$ = new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$v$$], null);
                return datascript.db.assoc_auto_tempids.cljs$core$IFn$_invoke$arity$2 ? datascript.db.assoc_auto_tempids.cljs$core$IFn$_invoke$arity$2($db$$, $G__69470$$) : datascript.db.assoc_auto_tempids.call(null, $db$$, $G__69470$$);
              }())) : $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($entity__$1$$, $a$$, $v$$) : $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($entity__$1$$, $a$$, $v$$);
            };
          }($entity$$, $s__69451__$2$$, $temp__5825__auto__$$), $APP.cljs.core.PersistentArrayMap.EMPTY, $APP.cljs.core.contains_QMARK_($entity$$, $APP.cljs$cst$2432$db_SLASH_id) ? $entity$$ : $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($entity$$, $APP.cljs$cst$2432$db_SLASH_id, datascript.db.auto_tempid())) : function() {
            var $G__69471$$ = $APP.cljs.core.volatile_BANG_(null);
            if (function() {
              var $and__5023__auto__$$ = $APP.cljs.core.sequential_QMARK_($entity$$);
              if ($and__5023__auto__$$) {
                $and__5023__auto__$$ = $APP.cljs.core.vreset_BANG_($G__69471$$, $entity$$);
                var $op$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($and__5023__auto__$$, 0, null);
                $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($and__5023__auto__$$, 1, null);
                var $a$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($and__5023__auto__$$, 2, null);
                $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($and__5023__auto__$$, 3, null);
                return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2193$db_SLASH_add, $op$$) && datascript.db.ref_QMARK_($db$$, $a$$) && !0;
              }
              return $and__5023__auto__$$;
            }()) {
              var $vec__69475$$ = $APP.cljs.core.deref($G__69471$$), $op$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69475$$, 0, null), $e$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69475$$, 1, null), $a$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69475$$, 2, null), $v$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69475$$, 3, null);
              return datascript.db.multi_value_QMARK_($db$$, $a$$, $v$$) ? new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$op$$, $e$$, $a$$, datascript.db.assoc_auto_tempids.cljs$core$IFn$_invoke$arity$2 ? datascript.db.assoc_auto_tempids.cljs$core$IFn$_invoke$arity$2($db$$, $v$$) : datascript.db.assoc_auto_tempids.call(null, $db$$, $v$$)], null) : new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$op$$, $e$$, 
              $a$$, $APP.cljs.core.first(function() {
                var $G__69479$$ = new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$v$$], null);
                return datascript.db.assoc_auto_tempids.cljs$core$IFn$_invoke$arity$2 ? datascript.db.assoc_auto_tempids.cljs$core$IFn$_invoke$arity$2($db$$, $G__69479$$) : datascript.db.assoc_auto_tempids.call(null, $db$$, $G__69479$$);
              }())], null);
            }
            return $entity$$;
          }(), $datascript$db$assoc_auto_tempids_$_iter__69450$$($APP.cljs.core.rest($s__69451__$2$$)));
        }
        return null;
      }
    }, null, null);
  }($tx_data$$);
};
datascript.db.validate_datom = function($db$jscomp$105_temp__5829__auto__$$, $datom$$) {
  var $JSCompiler_temp_const$$ = $APP.cljs.core, $JSCompiler_temp_const$jscomp$0$$ = $JSCompiler_temp_const$$.truth_;
  var $JSCompiler_inline_result$jscomp$1493_and__5023__auto__$$ = $datom$$.datascript$db$IDatom$datom_added$arity$1(null);
  $JSCompiler_inline_result$jscomp$1493_and__5023__auto__$$ = $APP.cljs.core.truth_($JSCompiler_inline_result$jscomp$1493_and__5023__auto__$$) ? datascript.db.is_attr_QMARK_($db$jscomp$105_temp__5829__auto__$$, $datom$$.a, $APP.cljs$cst$4438$db_SLASH_unique) : $JSCompiler_inline_result$jscomp$1493_and__5023__auto__$$;
  if ($JSCompiler_temp_const$jscomp$0$$.call($JSCompiler_temp_const$$, $JSCompiler_inline_result$jscomp$1493_and__5023__auto__$$)) {
    $db$jscomp$105_temp__5829__auto__$$ = $APP.cljs.core.not_empty(datascript.db._datoms($db$jscomp$105_temp__5829__auto__$$, $APP.cljs$cst$4441$avet, $datom$$.a, $datom$$.v, null, null));
    if ($db$jscomp$105_temp__5829__auto__$$ == null) {
      return null;
    }
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Cannot add ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$datom$$], 0)), " because of unique constraint: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$db$jscomp$105_temp__5829__auto__$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4493$transact_SLASH_unique, 
    cljs$cst$4462$attribute, $datom$$.a, cljs$cst$4494$datom, $datom$$], null));
  }
  return null;
};
datascript.db.current_tx = function($report$$) {
  return $APP.cljs.core.long$($APP.cljs$cst$4447$max_tx.cljs$core$IFn$_invoke$arity$1($APP.cljs$cst$2507$db_before.cljs$core$IFn$_invoke$arity$1($report$$))) + 1;
};
datascript.db.next_eid = function($db$$) {
  return $APP.cljs.core.long$($APP.cljs$cst$4446$max_eid.cljs$core$IFn$_invoke$arity$1($db$$)) + 1;
};
datascript.db.tx_id_QMARK_ = function($e$$) {
  return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($e$$, cljs$cst$4495$db_SLASH_current_tx) || $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($e$$, ":db/current-tx") || $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($e$$, "datomic.tx") || $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($e$$, "datascript.tx");
};
datascript.db.tempid_QMARK_ = function($x$$) {
  return typeof $x$$ === "number" && $x$$ < 0 || typeof $x$$ === "string" || datascript.db.auto_tempid_QMARK_($x$$);
};
datascript.db.new_eid_QMARK_ = function($db$$, $eid$$) {
  return $eid$$ > $APP.cljs$cst$4446$max_eid.cljs$core$IFn$_invoke$arity$1($db$$) && $eid$$ < 536870912;
};
datascript.db.advance_max_eid = function($db$$, $eid$$) {
  return datascript.db.new_eid_QMARK_($db$$, $eid$$) ? $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($db$$, $APP.cljs$cst$4446$max_eid, $eid$$) : $db$$;
};
datascript.db.allocate_eid = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return datascript.db.allocate_eid.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return datascript.db.allocate_eid.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.db.allocate_eid.cljs$core$IFn$_invoke$arity$2 = function($report$$, $eid$$) {
  return $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$4($report$$, $APP.cljs$cst$2508$db_after, datascript.db.advance_max_eid, $eid$$);
};
datascript.db.allocate_eid.cljs$core$IFn$_invoke$arity$3 = function($G__69483__$3_report$$, $e$$, $eid$$) {
  var $G__69483__$1_G__69483__$2$$ = datascript.db.tx_id_QMARK_($e$$) ? $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$6($APP.cljs.core.update.cljs$core$IFn$_invoke$arity$5($G__69483__$3_report$$, $APP.cljs$cst$2509$tempids, $APP.cljs.core.assoc, $e$$, $eid$$), cljs$cst$4496$datascript_DOT_db_SLASH_reverse_tempids, $APP.cljs.core.update, $eid$$, datascript.util.conjs, $e$$) : $G__69483__$3_report$$;
  $G__69483__$1_G__69483__$2$$ = datascript.db.tempid_QMARK_($e$$) ? $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$6($APP.cljs.core.update.cljs$core$IFn$_invoke$arity$5($G__69483__$1_G__69483__$2$$, $APP.cljs$cst$2509$tempids, $APP.cljs.core.assoc, $e$$, $eid$$), cljs$cst$4496$datascript_DOT_db_SLASH_reverse_tempids, $APP.cljs.core.update, $eid$$, datascript.util.conjs, $e$$) : $G__69483__$1_G__69483__$2$$;
  $G__69483__$3_report$$ = !datascript.db.tempid_QMARK_($e$$) && datascript.db.new_eid_QMARK_($APP.cljs$cst$2508$db_after.cljs$core$IFn$_invoke$arity$1($G__69483__$3_report$$), $eid$$) ? $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$5($G__69483__$1_G__69483__$2$$, $APP.cljs$cst$2509$tempids, $APP.cljs.core.assoc, $eid$$, $eid$$) : $G__69483__$1_G__69483__$2$$;
  return $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$4($G__69483__$3_report$$, $APP.cljs$cst$2508$db_after, datascript.db.advance_max_eid, $eid$$);
};
datascript.db.allocate_eid.cljs$lang$maxFixedArity = 3;
datascript.db.with_datom = function($G__69484__$1_G__69484__$2_G__69485__$1_G__69485__$2_db$$, $datom$jscomp$2_temp__5827__auto__$$) {
  datascript.db.validate_datom($G__69484__$1_G__69484__$2_G__69485__$1_G__69485__$2_db$$, $datom$jscomp$2_temp__5827__auto__$$);
  var $G__69484__$3_G__69484__$4_G__69485__$3_indexing_QMARK_$$ = datascript.db.indexing_QMARK_($G__69484__$1_G__69484__$2_G__69485__$1_G__69485__$2_db$$, $datom$jscomp$2_temp__5827__auto__$$.a);
  if ($APP.cljs.core.truth_($datom$jscomp$2_temp__5827__auto__$$.datascript$db$IDatom$datom_added$arity$1(null))) {
    return $G__69484__$1_G__69484__$2_G__69485__$1_G__69485__$2_db$$ = $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$5($G__69484__$1_G__69484__$2_G__69485__$1_G__69485__$2_db$$, $APP.cljs$cst$4444$eavt, $APP.me.tonsky.persistent_sorted_set.conj, $datom$jscomp$2_temp__5827__auto__$$, datascript.db.cmp_datoms_eavt_quick), $G__69484__$1_G__69484__$2_G__69485__$1_G__69485__$2_db$$ = $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$5($G__69484__$1_G__69484__$2_G__69485__$1_G__69485__$2_db$$, $APP.cljs$cst$4445$aevt, 
    $APP.me.tonsky.persistent_sorted_set.conj, $datom$jscomp$2_temp__5827__auto__$$, datascript.db.cmp_datoms_aevt_quick), $G__69484__$3_G__69484__$4_G__69485__$3_indexing_QMARK_$$ = $G__69484__$3_G__69484__$4_G__69485__$3_indexing_QMARK_$$ ? $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$5($G__69484__$1_G__69484__$2_G__69485__$1_G__69485__$2_db$$, $APP.cljs$cst$4441$avet, $APP.me.tonsky.persistent_sorted_set.conj, $datom$jscomp$2_temp__5827__auto__$$, datascript.db.cmp_datoms_avet_quick) : $G__69484__$1_G__69484__$2_G__69485__$1_G__69485__$2_db$$, 
    $G__69484__$3_G__69484__$4_G__69485__$3_indexing_QMARK_$$ = datascript.db.advance_max_eid($G__69484__$3_G__69484__$4_G__69485__$3_indexing_QMARK_$$, $datom$jscomp$2_temp__5827__auto__$$.e), $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($G__69484__$3_G__69484__$4_G__69485__$3_indexing_QMARK_$$, $APP.cljs$cst$4451$hash, $APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1(0));
  }
  $datom$jscomp$2_temp__5827__auto__$$ = datascript.db.fsearch($G__69484__$1_G__69484__$2_G__69485__$1_G__69485__$2_db$$, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$datom$jscomp$2_temp__5827__auto__$$.e, $datom$jscomp$2_temp__5827__auto__$$.a, $datom$jscomp$2_temp__5827__auto__$$.v], null));
  if ($datom$jscomp$2_temp__5827__auto__$$ == null) {
    return $G__69484__$1_G__69484__$2_G__69485__$1_G__69485__$2_db$$;
  }
  $G__69484__$1_G__69484__$2_G__69485__$1_G__69485__$2_db$$ = $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$5($G__69484__$1_G__69484__$2_G__69485__$1_G__69485__$2_db$$, $APP.cljs$cst$4444$eavt, $APP.me.tonsky.persistent_sorted_set.disj, $datom$jscomp$2_temp__5827__auto__$$, datascript.db.cmp_datoms_eavt_quick);
  $G__69484__$1_G__69484__$2_G__69485__$1_G__69485__$2_db$$ = $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$5($G__69484__$1_G__69484__$2_G__69485__$1_G__69485__$2_db$$, $APP.cljs$cst$4445$aevt, $APP.me.tonsky.persistent_sorted_set.disj, $datom$jscomp$2_temp__5827__auto__$$, datascript.db.cmp_datoms_aevt_quick);
  $G__69484__$3_G__69484__$4_G__69485__$3_indexing_QMARK_$$ = $G__69484__$3_G__69484__$4_G__69485__$3_indexing_QMARK_$$ ? $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$5($G__69484__$1_G__69484__$2_G__69485__$1_G__69485__$2_db$$, $APP.cljs$cst$4441$avet, $APP.me.tonsky.persistent_sorted_set.disj, $datom$jscomp$2_temp__5827__auto__$$, datascript.db.cmp_datoms_avet_quick) : $G__69484__$1_G__69484__$2_G__69485__$1_G__69485__$2_db$$;
  return $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($G__69484__$3_G__69484__$4_G__69485__$3_indexing_QMARK_$$, $APP.cljs$cst$4451$hash, $APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1(0));
};
datascript.db.queue_tuple = function($queue$$, $tuple$$, $idx$$, $db$$, $e$jscomp$348_or__5025__auto____$1$$, $a$jscomp$590_or__5025__auto__$$, $v$$) {
  $a$jscomp$590_or__5025__auto__$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($queue$$, $tuple$$);
  $APP.cljs.core.truth_($a$jscomp$590_or__5025__auto__$$) ? $db$$ = $a$jscomp$590_or__5025__auto__$$ : ($e$jscomp$348_or__5025__auto____$1$$ = $APP.cljs$cst$1438$v.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first(datascript.db._datoms($db$$, $APP.cljs$cst$4444$eavt, $e$jscomp$348_or__5025__auto____$1$$, $tuple$$, null, null))), $db$$ = $APP.cljs.core.truth_($e$jscomp$348_or__5025__auto____$1$$) ? $e$jscomp$348_or__5025__auto____$1$$ : $APP.cljs.core.vec($APP.cljs.core.repeat.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.count(cljs$cst$4472$db_SLASH_tupleAttrs.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2(datascript.db._schema($db$$), 
  $tuple$$))), null)));
  $idx$$ = $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($db$$, $idx$$, $v$$);
  return $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($queue$$, $tuple$$, $idx$$);
};
datascript.db.queue_tuples = function($queue$$, $tuples$$, $db$$, $e$$, $a$$, $v$$) {
  return $APP.cljs.core.reduce_kv(function($queue__$1$$, $tuple$$, $idx$$) {
    return datascript.db.queue_tuple($queue__$1$$, $tuple$$, $idx$$, $db$$, $e$$, $a$$, $v$$);
  }, $queue$$, $tuples$$);
};
datascript.db.transact_report = function($report$$, $datom$jscomp$3_v$$) {
  var $db$$ = $APP.cljs$cst$2508$db_after.cljs$core$IFn$_invoke$arity$1($report$$), $a$$ = $APP.cljs$cst$2200$a.cljs$core$IFn$_invoke$arity$1($datom$jscomp$3_v$$);
  $report$$ = $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$4($APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($report$$, $APP.cljs$cst$2508$db_after, datascript.db.with_datom($db$$, $datom$jscomp$3_v$$)), $APP.cljs$cst$2500$tx_data, $APP.cljs.core.conj, $datom$jscomp$3_v$$);
  if (datascript.db.tuple_source_QMARK_($db$$, $a$$)) {
    var $e$$ = $APP.cljs$cst$1628$e.cljs$core$IFn$_invoke$arity$1($datom$jscomp$3_v$$);
    $datom$jscomp$3_v$$ = $APP.cljs.core.truth_(datascript.db.datom_added($datom$jscomp$3_v$$)) ? $APP.cljs$cst$1438$v.cljs$core$IFn$_invoke$arity$1($datom$jscomp$3_v$$) : null;
    var $or__5025__auto__$jscomp$inline_6823_queue$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2(cljs$cst$4497$datascript_DOT_db_SLASH_queued_tuples.cljs$core$IFn$_invoke$arity$1($report$$), $e$$);
    $or__5025__auto__$jscomp$inline_6823_queue$$ = $APP.cljs.core.truth_($or__5025__auto__$jscomp$inline_6823_queue$$) ? $or__5025__auto__$jscomp$inline_6823_queue$$ : $APP.cljs.core.PersistentArrayMap.EMPTY;
    var $tuples$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2(datascript.db._attrs_by($db$$, cljs$cst$4474$db_SLASH_attrTuples), $a$$);
    $db$$ = datascript.db.queue_tuples($or__5025__auto__$jscomp$inline_6823_queue$$, $tuples$$, $db$$, $e$$, $a$$, $datom$jscomp$3_v$$);
    return $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$5($report$$, cljs$cst$4497$datascript_DOT_db_SLASH_queued_tuples, $APP.cljs.core.assoc, $e$$, $db$$);
  }
  return $report$$;
};
datascript.db.resolve_upserts = function($db$$, $entity$$) {
  var $temp__5827__auto__$$ = $APP.cljs.core.not_empty(datascript.db._attrs_by($db$$, cljs$cst$4439$db_DOT_unique_SLASH_identity));
  if ($temp__5827__auto__$$ == null) {
    return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$entity$$, null], null);
  }
  var $resolve$$ = function($a$$, $v$$) {
    return datascript.db.ref_QMARK_($db$$, $a$$) ? datascript.db.tempid_QMARK_($v$$) ? null : $APP.cljs$cst$1628$e.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first(datascript.db._datoms($db$$, $APP.cljs$cst$4441$avet, $a$$, datascript.db.entid($db$$, $v$$), null, null))) : $APP.cljs$cst$1628$e.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first(datascript.db._datoms($db$$, $APP.cljs$cst$4441$avet, $a$$, $v$$, null, null)));
  }, $split$$ = function($a$$, $vs$$) {
    return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($acc$$, $v$$) {
      var $temp__5827__auto____$1$$ = $resolve$$($a$$, $v$$);
      return $temp__5827__auto____$1$$ == null ? $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$4($acc$$, 0, $APP.cljs.core.conj, $v$$) : $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$5($acc$$, 1, $APP.cljs.core.assoc, $v$$, $temp__5827__auto____$1$$);
    }, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.PersistentVector.EMPTY, $APP.cljs.core.PersistentArrayMap.EMPTY], null), $vs$$);
  };
  return $APP.cljs.core.reduce_kv(function($p__69486_upserts$$, $a$$, $insert_v$$) {
    var $entity_SINGLEQUOTE_$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__69486_upserts$$, 0, null);
    $p__69486_upserts$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__69486_upserts$$, 1, null);
    if (!($a$$ instanceof $APP.cljs.core.Keyword || typeof $a$$ === "string")) {
      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Bad entity attribute ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$a$$], 0)), " at ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$entity$$], 0)), ", expected keyword or string"].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [cljs$cst$4462$attribute, $a$$, $APP.cljs$cst$4463$context, 
      $entity$$, $APP.cljs$cst$1404$error, cljs$cst$4464$transact_SLASH_syntax], null));
    }
    if ($insert_v$$ == null) {
      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Cannot store nil as a value at ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$entity$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1429$value, null, $APP.cljs$cst$4463$context, $entity$$, $APP.cljs$cst$1404$error, cljs$cst$4464$transact_SLASH_syntax], null));
    }
    if ($APP.cljs.core.contains_QMARK_($temp__5827__auto__$$, $a$$)) {
      if (datascript.db.multi_value_QMARK_($db$$, $a$$, $insert_v$$)) {
        var $temp__5827__auto____$1$$ = $split$$($a$$, $insert_v$$);
        $insert_v$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($temp__5827__auto____$1$$, 0, null);
        $temp__5827__auto____$1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($temp__5827__auto____$1$$, 1, null);
        return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.empty_QMARK_($insert_v$$) ? $entity_SINGLEQUOTE_$$ : $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($entity_SINGLEQUOTE_$$, $a$$, $insert_v$$), $APP.cljs.core.empty_QMARK_($temp__5827__auto____$1$$) ? $p__69486_upserts$$ : $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($p__69486_upserts$$, $a$$, $temp__5827__auto____$1$$)], null);
      }
      $temp__5827__auto____$1$$ = $resolve$$($a$$, $insert_v$$);
      return $temp__5827__auto____$1$$ == null ? new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($entity_SINGLEQUOTE_$$, $a$$, $insert_v$$), $p__69486_upserts$$], null) : new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$entity_SINGLEQUOTE_$$, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($p__69486_upserts$$, $a$$, $APP.cljs.core.PersistentArrayMap.createAsIfByAssoc([$insert_v$$, 
      $temp__5827__auto____$1$$]))], null);
    }
    return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($entity_SINGLEQUOTE_$$, $a$$, $insert_v$$), $p__69486_upserts$$], null);
  }, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.PersistentArrayMap.EMPTY, $APP.cljs.core.PersistentArrayMap.EMPTY], null), $entity$$);
};
datascript.db.validate_upserts = function($e1$jscomp$7_eid$jscomp$16_entity$$, $a1$jscomp$499_upsert_id_upserts$$) {
  var $e2$jscomp$4_upsert_ids_v$$ = $APP.cljs.core.reduce_kv(function($m$$, $a$$, $v__GT_e$$) {
    return $APP.cljs.core.reduce_kv(function($m__$1$$, $v$$, $e$$) {
      return $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($m__$1$$, $e$$, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$a$$, $v$$], null));
    }, $m$$, $v__GT_e$$);
  }, $APP.cljs.core.PersistentArrayMap.EMPTY, $a1$jscomp$499_upsert_id_upserts$$);
  if (2 <= $APP.cljs.core.count($e2$jscomp$4_upsert_ids_v$$)) {
    $a1$jscomp$499_upsert_id_upserts$$ = $APP.cljs.core.first($e2$jscomp$4_upsert_ids_v$$);
    $e1$jscomp$7_eid$jscomp$16_entity$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($a1$jscomp$499_upsert_id_upserts$$, 0, null);
    var $a$jscomp$596_v1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($a1$jscomp$499_upsert_id_upserts$$, 1, null);
    $a1$jscomp$499_upsert_id_upserts$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($a$jscomp$596_v1$$, 0, null);
    $a$jscomp$596_v1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($a$jscomp$596_v1$$, 1, null);
    var $a2$$ = $APP.cljs.core.second($e2$jscomp$4_upsert_ids_v$$);
    $e2$jscomp$4_upsert_ids_v$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($a2$$, 0, null);
    var $v2$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($a2$$, 1, null);
    $a2$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($v2$$, 0, null);
    $v2$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($v2$$, 1, null);
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Conflicting upserts: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$a1$jscomp$499_upsert_id_upserts$$, $a$jscomp$596_v1$$], null)], 0)), " resolves to ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$e1$jscomp$7_eid$jscomp$16_entity$$], 
    0)), ", but ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$a2$$, $v2$$], null)], 0)), " resolves to ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$e2$jscomp$4_upsert_ids_v$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, 
    cljs$cst$4498$transact_SLASH_upsert, cljs$cst$4499$assertion, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$e1$jscomp$7_eid$jscomp$16_entity$$, $a1$jscomp$499_upsert_id_upserts$$, $a$jscomp$596_v1$$], null), cljs$cst$4500$conflict, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$e2$jscomp$4_upsert_ids_v$$, $a2$$, $v2$$], null)], null));
  }
  $a$jscomp$596_v1$$ = $APP.cljs.core.first($e2$jscomp$4_upsert_ids_v$$);
  $a1$jscomp$499_upsert_id_upserts$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($a$jscomp$596_v1$$, 0, null);
  $e2$jscomp$4_upsert_ids_v$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($a$jscomp$596_v1$$, 1, null);
  $a$jscomp$596_v1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($e2$jscomp$4_upsert_ids_v$$, 0, null);
  $e2$jscomp$4_upsert_ids_v$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($e2$jscomp$4_upsert_ids_v$$, 1, null);
  $e1$jscomp$7_eid$jscomp$16_entity$$ = $APP.cljs$cst$2432$db_SLASH_id.cljs$core$IFn$_invoke$arity$1($e1$jscomp$7_eid$jscomp$16_entity$$);
  if ($a1$jscomp$499_upsert_id_upserts$$ != null && $e1$jscomp$7_eid$jscomp$16_entity$$ != null && !datascript.db.tempid_QMARK_($e1$jscomp$7_eid$jscomp$16_entity$$) && $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($a1$jscomp$499_upsert_id_upserts$$, $e1$jscomp$7_eid$jscomp$16_entity$$)) {
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Conflicting upsert: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$a$jscomp$596_v1$$, $e2$jscomp$4_upsert_ids_v$$], null)], 0)), " resolves to ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$a1$jscomp$499_upsert_id_upserts$$], 
    0)), ", but entity already has :db/id ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$e1$jscomp$7_eid$jscomp$16_entity$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4498$transact_SLASH_upsert, cljs$cst$4499$assertion, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$a1$jscomp$499_upsert_id_upserts$$, $a$jscomp$596_v1$$, $e2$jscomp$4_upsert_ids_v$$], 
    null), cljs$cst$4500$conflict, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$2432$db_SLASH_id, $e1$jscomp$7_eid$jscomp$16_entity$$], null)], null));
  }
  return $a1$jscomp$499_upsert_id_upserts$$;
};
datascript.db.maybe_wrap_multival = function($db$$, $a$$, $vs$$) {
  return datascript.db.reverse_ref_QMARK_($a$$) || datascript.db.multival_QMARK_($db$$, $a$$) ? $APP.me.tonsky.persistent_sorted_set.arrays.array_QMARK_($vs$$) || $APP.cljs.core.coll_QMARK_($vs$$) && !$APP.cljs.core.map_QMARK_($vs$$) ? $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.count($vs$$), 2) && datascript.db.is_attr_QMARK_($db$$, $APP.cljs.core.first($vs$$), cljs$cst$4439$db_DOT_unique_SLASH_identity) ? new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
  [$vs$$], null) : $vs$$ : new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$vs$$], null) : new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$vs$$], null);
};
datascript.db.explode = function($db$$, $entity$$) {
  var $eid$$ = $APP.cljs$cst$2432$db_SLASH_id.cljs$core$IFn$_invoke$arity$1($entity$$), $a_PLUS_vs$$ = $APP.cljs.core.apply.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.concat, $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($acc$$, $p__69513_vs$$) {
    var $a$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__69513_vs$$, 0, null);
    $p__69513_vs$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__69513_vs$$, 1, null);
    return $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$4($acc$$, datascript.db.tuple_QMARK_($db$$, $a$$) ? 1 : 0, $APP.cljs.core.conj, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$a$$, $p__69513_vs$$], null));
  }, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.PersistentVector.EMPTY, $APP.cljs.core.PersistentVector.EMPTY], null), $entity$$));
  return function $datascript$db$explode_$_iter__69517$$($s__69518$$) {
    return new $APP.cljs.core.LazySeq(null, function() {
      for (var $s__69518__$1$$ = $s__69518$$;;) {
        var $fs__5500__auto__$jscomp$239_iterys__5499__auto__$jscomp$239_temp__5825__auto__$$ = $APP.cljs.core.seq($s__69518__$1$$);
        if ($fs__5500__auto__$jscomp$239_iterys__5499__auto__$jscomp$239_temp__5825__auto__$$) {
          var $xs__6385__auto__$$ = $fs__5500__auto__$jscomp$239_iterys__5499__auto__$jscomp$239_temp__5825__auto__$$, $vec__69523$$ = $APP.cljs.core.first($xs__6385__auto__$$), $a$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69523$$, 0, null), $vs$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69523$$, 1, null);
          if ($APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($a$$, $APP.cljs$cst$2432$db_SLASH_id)) {
            var $_$$ = function() {
              var $attr__67598__auto__$$ = $a$$;
              if ($attr__67598__auto__$$ instanceof $APP.cljs.core.Keyword || typeof $attr__67598__auto__$$ === "string") {
                return null;
              }
              var $at__67599__auto__$$ = $APP.cljs.core.PersistentArrayMap.createAsIfByAssoc([$APP.cljs$cst$2432$db_SLASH_id, $eid$$, $a$$, $vs$$]);
              throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Bad entity attribute ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$attr__67598__auto__$$], 0)), " at ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$at__67599__auto__$$], 0)), ", expected keyword or string"].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [cljs$cst$4462$attribute, 
              $attr__67598__auto__$$, $APP.cljs$cst$4463$context, $at__67599__auto__$$, $APP.cljs$cst$1404$error, cljs$cst$4464$transact_SLASH_syntax], null));
            }(), $reverse_QMARK_$$ = datascript.db.reverse_ref_QMARK_($a$$), $straight_a$$ = $reverse_QMARK_$$ ? datascript.db.reverse_ref($a$$) : $a$$;
            if ($reverse_QMARK_$$ && !datascript.db.ref_QMARK_($db$$, $straight_a$$)) {
              throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Bad attribute ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$a$$], 0)), ": reverse attribute name requires {:db/valueType :db.type/ref} in schema"].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4464$transact_SLASH_syntax, cljs$cst$4462$attribute, $a$$, $APP.cljs$cst$4463$context, $APP.cljs.core.PersistentArrayMap.createAsIfByAssoc([$APP.cljs$cst$2432$db_SLASH_id, 
              $eid$$, $a$$, $vs$$])], null));
            }
            $fs__5500__auto__$jscomp$239_iterys__5499__auto__$jscomp$239_temp__5825__auto__$$ = function($s__69518__$1$$, $_$$, $reverse_QMARK_$$, $straight_a$$, $___$1$$, $vec__69523$$, $a$$, $vs$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $eid$$, $a_PLUS_vs$$) {
              return function $datascript$db$explode_$_iter__69517_$_iter__69519$$($s__69520$$) {
                return new $APP.cljs.core.LazySeq(null, function($s__69518__$1$$, $_$$, $reverse_QMARK_$$, $straight_a$$, $___$1$$, $vec__69523$$, $a$$, $vs$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $eid$$, $a_PLUS_vs$$) {
                  return function() {
                    for (;;) {
                      var $s__69520__$2_temp__5825__auto____$1$$ = $APP.cljs.core.seq($s__69520$$);
                      if ($s__69520__$2_temp__5825__auto____$1$$) {
                        if ($APP.cljs.core.chunked_seq_QMARK_($s__69520__$2_temp__5825__auto____$1$$)) {
                          var $JSCompiler_inline_result$jscomp$1495_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__69520__$2_temp__5825__auto____$1$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1495_c__5501__auto__$$), $b__69522_v$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
                          a: {
                            for (var $i__69521$$ = 0;;) {
                              if ($i__69521$$ < $size__5502__auto__$$) {
                                var $v$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1495_c__5501__auto__$$, $i__69521$$);
                                $APP.cljs.core.chunk_append($b__69522_v$$, datascript.db.ref_QMARK_($db$$, $straight_a$$) && $APP.cljs.core.map_QMARK_($v$$) ? $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($v$$, datascript.db.reverse_ref($a$$), $eid$$) : $reverse_QMARK_$$ ? new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2193$db_SLASH_add, $v$$, $straight_a$$, $eid$$], null) : new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
                                [$APP.cljs$cst$2193$db_SLASH_add, $eid$$, $straight_a$$, $v$$], null));
                                $i__69521$$ += 1;
                              } else {
                                $JSCompiler_inline_result$jscomp$1495_c__5501__auto__$$ = !0;
                                break a;
                              }
                            }
                            $JSCompiler_inline_result$jscomp$1495_c__5501__auto__$$ = void 0;
                          }
                          return $JSCompiler_inline_result$jscomp$1495_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__69522_v$$), $datascript$db$explode_$_iter__69517_$_iter__69519$$($APP.cljs.core.chunk_rest($s__69520__$2_temp__5825__auto____$1$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__69522_v$$), null);
                        }
                        $b__69522_v$$ = $APP.cljs.core.first($s__69520__$2_temp__5825__auto____$1$$);
                        return $APP.cljs.core.cons(datascript.db.ref_QMARK_($db$$, $straight_a$$) && $APP.cljs.core.map_QMARK_($b__69522_v$$) ? $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($b__69522_v$$, datascript.db.reverse_ref($a$$), $eid$$) : $reverse_QMARK_$$ ? new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2193$db_SLASH_add, $b__69522_v$$, $straight_a$$, $eid$$], null) : new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
                        [$APP.cljs$cst$2193$db_SLASH_add, $eid$$, $straight_a$$, $b__69522_v$$], null), $datascript$db$explode_$_iter__69517_$_iter__69519$$($APP.cljs.core.rest($s__69520__$2_temp__5825__auto____$1$$)));
                      }
                      return null;
                    }
                  };
                }($s__69518__$1$$, $_$$, $reverse_QMARK_$$, $straight_a$$, $___$1$$, $vec__69523$$, $a$$, $vs$$, $xs__6385__auto__$$, $temp__5825__auto__$$, $eid$$, $a_PLUS_vs$$), null, null);
              };
            }($s__69518__$1$$, $_$$, $reverse_QMARK_$$, $straight_a$$, null, $vec__69523$$, $a$$, $vs$$, $xs__6385__auto__$$, $fs__5500__auto__$jscomp$239_iterys__5499__auto__$jscomp$239_temp__5825__auto__$$, $eid$$, $a_PLUS_vs$$);
            if ($fs__5500__auto__$jscomp$239_iterys__5499__auto__$jscomp$239_temp__5825__auto__$$ = $APP.cljs.core.seq($fs__5500__auto__$jscomp$239_iterys__5499__auto__$jscomp$239_temp__5825__auto__$$(datascript.db.maybe_wrap_multival($db$$, $a$$, $vs$$)))) {
              return $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($fs__5500__auto__$jscomp$239_iterys__5499__auto__$jscomp$239_temp__5825__auto__$$, $datascript$db$explode_$_iter__69517$$($APP.cljs.core.rest($s__69518__$1$$)));
            }
          }
          $s__69518__$1$$ = $APP.cljs.core.rest($s__69518__$1$$);
        } else {
          return null;
        }
      }
    }, null, null);
  }($a_PLUS_vs$$);
};
datascript.db.transact_add = function($report$$, $p__69526_tx__$1$$) {
  $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__69526_tx__$1$$, 0, null);
  var $e$jscomp$354_e__$1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__69526_tx__$1$$, 1, null), $a$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__69526_tx__$1$$, 2, null), $v$jscomp$701_v__$1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__69526_tx__$1$$, 3, null), $db$jscomp$116_old_datom_tx$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__69526_tx__$1$$, 4, null);
  if (!($a$$ instanceof $APP.cljs.core.Keyword || typeof $a$$ === "string")) {
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Bad entity attribute ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$a$$], 0)), " at ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$p__69526_tx__$1$$], 0)), ", expected keyword or string"].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [cljs$cst$4462$attribute, $a$$, $APP.cljs$cst$4463$context, 
    $p__69526_tx__$1$$, $APP.cljs$cst$1404$error, cljs$cst$4464$transact_SLASH_syntax], null));
  }
  if ($v$jscomp$701_v__$1$$ == null) {
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Cannot store nil as a value at ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$p__69526_tx__$1$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1429$value, null, $APP.cljs$cst$4463$context, $p__69526_tx__$1$$, $APP.cljs$cst$1404$error, cljs$cst$4464$transact_SLASH_syntax], null));
  }
  $p__69526_tx__$1$$ = $APP.cljs.core.truth_($db$jscomp$116_old_datom_tx$$) ? $db$jscomp$116_old_datom_tx$$ : datascript.db.current_tx($report$$);
  $db$jscomp$116_old_datom_tx$$ = $APP.cljs$cst$2508$db_after.cljs$core$IFn$_invoke$arity$1($report$$);
  $e$jscomp$354_e__$1$$ = datascript.db.entid_strict($db$jscomp$116_old_datom_tx$$, $e$jscomp$354_e__$1$$);
  $v$jscomp$701_v__$1$$ = datascript.db.ref_QMARK_($db$jscomp$116_old_datom_tx$$, $a$$) ? datascript.db.entid_strict($db$jscomp$116_old_datom_tx$$, $v$jscomp$701_v__$1$$) : $v$jscomp$701_v__$1$$;
  var $new_datom$$ = datascript.db.datom.cljs$core$IFn$_invoke$arity$4($e$jscomp$354_e__$1$$, $a$$, $v$jscomp$701_v__$1$$, $p__69526_tx__$1$$);
  $db$jscomp$116_old_datom_tx$$ = datascript.db.multival_QMARK_($db$jscomp$116_old_datom_tx$$, $a$$) ? datascript.db.fsearch($db$jscomp$116_old_datom_tx$$, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$e$jscomp$354_e__$1$$, $a$$, $v$jscomp$701_v__$1$$], null)) : datascript.db.fsearch($db$jscomp$116_old_datom_tx$$, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$e$jscomp$354_e__$1$$, $a$$], null));
  return $db$jscomp$116_old_datom_tx$$ == null ? datascript.db.transact_report($report$$, $new_datom$$) : $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($db$jscomp$116_old_datom_tx$$.v, $v$jscomp$701_v__$1$$) ? $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$4($report$$, cljs$cst$4501$datascript_DOT_db_SLASH_tx_redundant, datascript.util.conjv, $new_datom$$) : datascript.db.transact_report(datascript.db.transact_report($report$$, datascript.db.datom.cljs$core$IFn$_invoke$arity$5($e$jscomp$354_e__$1$$, 
  $a$$, $db$jscomp$116_old_datom_tx$$.v, $p__69526_tx__$1$$, !1)), $new_datom$$);
};
datascript.db.transact_retract_datom = function($report$$, $d$$) {
  var $tx$$ = datascript.db.current_tx($report$$);
  return datascript.db.transact_report($report$$, datascript.db.datom.cljs$core$IFn$_invoke$arity$5($d$$.e, $d$$.a, $d$$.v, $tx$$, !1));
};
datascript.db.retract_components = function($db$$, $datoms$$) {
  return $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.PersistentHashSet.EMPTY, $APP.cljs.core.comp.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$1(function($d$$) {
    return datascript.db.component_QMARK_($db$$, $d$$.a);
  }), $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$1(function($d$$) {
    return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4502$db_DOT_fn_SLASH_retractEntity, $d$$.v], null);
  })), $datoms$$);
};
datascript.db.transact_tx_data_impl = function($initial_report$$, $initial_es$$) {
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Not implemented: (", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.db.transact_tx_data_impl), $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$2(" ", new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$initial_report$$, $initial_es$$], null))].join(""), $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.db.retry_with_tempid = function($initial_report$jscomp$1_report_SINGLEQUOTE_$$, $report$$, $es$$, $tempid$$, $upserted_eid$$) {
  var $temp__5827__auto__$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2(cljs$cst$4503$datascript_DOT_db_SLASH_upserted_tempids.cljs$core$IFn$_invoke$arity$1($initial_report$jscomp$1_report_SINGLEQUOTE_$$), $tempid$$);
  if ($temp__5827__auto__$$ == null) {
    return $report$$ = $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($APP.cljs$cst$2509$tempids.cljs$core$IFn$_invoke$arity$1($report$$), $tempid$$, $upserted_eid$$), $initial_report$jscomp$1_report_SINGLEQUOTE_$$ = $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$5($APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($initial_report$jscomp$1_report_SINGLEQUOTE_$$, $APP.cljs$cst$2509$tempids, $report$$), cljs$cst$4503$datascript_DOT_db_SLASH_upserted_tempids, $APP.cljs.core.assoc, $tempid$$, 
    $upserted_eid$$), datascript.db.transact_tx_data_impl($initial_report$jscomp$1_report_SINGLEQUOTE_$$, $es$$);
  }
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Conflicting upsert: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$tempid$$], 0)), " resolves both to ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$upserted_eid$$], 0)), " and ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$temp__5827__auto__$$], 
  0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$1404$error, cljs$cst$4498$transact_SLASH_upsert], null));
};
datascript.db.builtin_fn_QMARK_ = new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 8, [cljs$cst$4504$db_DOT_fn_SLASH_call, null, cljs$cst$4505$db_SLASH_cas, null, cljs$cst$4502$db_DOT_fn_SLASH_retractEntity, null, cljs$cst$4506$db_SLASH_retractEntity, null, $APP.cljs$cst$2194$db_SLASH_retract, null, cljs$cst$4507$db_DOT_fn_SLASH_retractAttribute, null, cljs$cst$4508$db_DOT_fn_SLASH_cas, null, $APP.cljs$cst$2193$db_SLASH_add, null], null), null);
datascript.db.flush_tuples = function($report$$) {
  var $db$$ = $APP.cljs$cst$2508$db_after.cljs$core$IFn$_invoke$arity$1($report$$);
  return $APP.cljs.core.reduce_kv(function($entities$$, $eid$$, $tuples_PLUS_values$$) {
    return $APP.cljs.core.reduce_kv(function($entities__$1$$, $tuple$$, $value$$) {
      $value$$ = $APP.cljs.core.every_QMARK_($APP.cljs.core.nil_QMARK_, $value$$) ? null : $value$$;
      var $current$$ = $APP.cljs$cst$1438$v.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first(datascript.db._datoms($db$$, $APP.cljs$cst$4444$eavt, $eid$$, $tuple$$, null, null)));
      return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($value$$, $current$$) ? $entities__$1$$ : $value$$ == null ? $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($entities__$1$$, $APP.cljs.core.with_meta(new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2194$db_SLASH_retract, $eid$$, $tuple$$, $current$$], null), new $APP.cljs.core.PersistentArrayMap(null, 1, [cljs$cst$4509$datascript_DOT_db_SLASH_internal, !0], null))) : $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($entities__$1$$, 
      $APP.cljs.core.with_meta(new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2193$db_SLASH_add, $eid$$, $tuple$$, $value$$], null), new $APP.cljs.core.PersistentArrayMap(null, 1, [cljs$cst$4509$datascript_DOT_db_SLASH_internal, !0], null)));
    }, $entities$$, $tuples_PLUS_values$$);
  }, $APP.cljs.core.PersistentVector.EMPTY, cljs$cst$4497$datascript_DOT_db_SLASH_queued_tuples.cljs$core$IFn$_invoke$arity$1($report$$));
};
datascript.db.check_value_tempids = function($report$$) {
  var $reduce_fn$jscomp$3_temp__5823__auto__$$ = cljs$cst$4510$datascript_DOT_db_SLASH_value_tempids.cljs$core$IFn$_invoke$arity$1($report$$);
  if ($APP.cljs.core.truth_($reduce_fn$jscomp$3_temp__5823__auto__$$)) {
    var $all_tempids_unused$$ = $APP.cljs.core.transient$($reduce_fn$jscomp$3_temp__5823__auto__$$);
    $reduce_fn$jscomp$3_temp__5823__auto__$$ = function($tempids__$1$$, $datom$$) {
      return $APP.cljs.core.truth_(datascript.db.datom_added($datom$$)) ? $APP.cljs.core.dissoc_BANG_.cljs$core$IFn$_invoke$arity$2($tempids__$1$$, $APP.cljs$cst$1628$e.cljs$core$IFn$_invoke$arity$1($datom$$)) : $tempids__$1$$;
    };
    $all_tempids_unused$$ = $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($reduce_fn$jscomp$3_temp__5823__auto__$$, $all_tempids_unused$$, $APP.cljs$cst$2500$tx_data.cljs$core$IFn$_invoke$arity$1($report$$));
    $reduce_fn$jscomp$3_temp__5823__auto__$$ = $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($reduce_fn$jscomp$3_temp__5823__auto__$$, $all_tempids_unused$$, cljs$cst$4501$datascript_DOT_db_SLASH_tx_redundant.cljs$core$IFn$_invoke$arity$1($report$$));
    if ($APP.cljs.core.count($reduce_fn$jscomp$3_temp__5823__auto__$$) === 0) {
      return $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($report$$, cljs$cst$4510$datascript_DOT_db_SLASH_value_tempids, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$4501$datascript_DOT_db_SLASH_tx_redundant], 0));
    }
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Tempids used only as value in transaction: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.sort.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.vals($APP.cljs.core.persistent_BANG_($reduce_fn$jscomp$3_temp__5823__auto__$$)))], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4464$transact_SLASH_syntax, $APP.cljs$cst$2509$tempids, 
    $reduce_fn$jscomp$3_temp__5823__auto__$$], null));
  }
  return $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($report$$, cljs$cst$4510$datascript_DOT_db_SLASH_value_tempids, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$4501$datascript_DOT_db_SLASH_tx_redundant], 0));
};
datascript.db.transact_tx_data_impl = function($initial_report$$, $initial_es$$) {
  return null;
};
datascript.db.transact_tx_data_impl = function($initial_report$$, $initial_es$$) {
  for (var $has_tuples_QMARK_$$ = !$APP.cljs.core.empty_QMARK_(datascript.db._attrs_by($APP.cljs$cst$2508$db_after.cljs$core$IFn$_invoke$arity$1($initial_report$$), cljs$cst$4473$db_DOT_type_SLASH_tuple)), $initial_es_SINGLEQUOTE_$$ = $has_tuples_QMARK_$$ ? $APP.cljs.core.interleave.cljs$core$IFn$_invoke$arity$2($initial_es$$, $APP.cljs.core.repeat.cljs$core$IFn$_invoke$arity$1(cljs$cst$4511$datascript_DOT_db_SLASH_flush_tuples)) : $initial_es$$, $report$$ = $initial_report$$, $es$$ = $initial_es_SINGLEQUOTE_$$;;) {
    if ($APP.cljs.core.empty_QMARK_($es$$)) {
      return $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$5($APP.cljs.core.update.cljs$core$IFn$_invoke$arity$5($APP.cljs.core.update.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(datascript.db.check_value_tempids($report$$), cljs$cst$4503$datascript_DOT_db_SLASH_upserted_tempids), cljs$cst$4496$datascript_DOT_db_SLASH_reverse_tempids), $APP.cljs$cst$2509$tempids, function($report$$, $es$$, $initial_report_SINGLEQUOTE_$$, 
      $has_tuples_QMARK_$$, $initial_es_SINGLEQUOTE_$$) {
        return function($p1__69530_SHARP_$$) {
          return datascript.util.removem(datascript.db.auto_tempid_QMARK_, $p1__69530_SHARP_$$);
        };
      }($report$$, $es$$, $initial_report$$, $has_tuples_QMARK_$$, $initial_es_SINGLEQUOTE_$$)), $APP.cljs$cst$2509$tempids, $APP.cljs.core.assoc, cljs$cst$4495$db_SLASH_current_tx, datascript.db.current_tx($report$$)), $APP.cljs$cst$2508$db_after, $APP.cljs.core.update, $APP.cljs$cst$4447$max_tx, $APP.cljs.core.inc);
    }
    var $vec__69556$$ = $es$$, $seq__69557$$ = $APP.cljs.core.seq($vec__69556$$), $first__69558$$ = $APP.cljs.core.first($seq__69557$$), $seq__69557__$1$$ = $APP.cljs.core.next($seq__69557$$), $entity$$ = $first__69558$$, $entities$$ = $seq__69557__$1$$;
    if ($entity$$ == null) {
      $es$$ = $entities$$;
    } else {
      if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$4511$datascript_DOT_db_SLASH_flush_tuples, $entity$$)) {
        if ($APP.cljs.core.contains_QMARK_($report$$, cljs$cst$4497$datascript_DOT_db_SLASH_queued_tuples)) {
          var $G__70017$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($report$$, cljs$cst$4497$datascript_DOT_db_SLASH_queued_tuples), $G__70018$$ = $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(datascript.db.flush_tuples($report$$), $entities$$);
          $report$$ = $G__70017$$;
          $es$$ = $G__70018$$;
        } else {
          $es$$ = $entities$$;
        }
      } else {
        var $db$$ = $APP.cljs$cst$2508$db_after.cljs$core$IFn$_invoke$arity$1($report$$), $tempids$$ = $APP.cljs$cst$2509$tempids.cljs$core$IFn$_invoke$arity$1($report$$);
        if ($APP.cljs.core.map_QMARK_($entity$$)) {
          var $old_eid$$ = $APP.cljs$cst$2432$db_SLASH_id.cljs$core$IFn$_invoke$arity$1($entity$$);
          if (datascript.db.tx_id_QMARK_($old_eid$$)) {
            var $id$$ = datascript.db.current_tx($report$$), $G__70021$$ = datascript.db.allocate_eid.cljs$core$IFn$_invoke$arity$3($report$$, $old_eid$$, $id$$), $G__70022$$ = $APP.cljs.core.cons($APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($entity$$, $APP.cljs$cst$2432$db_SLASH_id, $id$$), $entities$$);
            $report$$ = $G__70021$$;
            $es$$ = $G__70022$$;
            continue;
          } else {
            if ($APP.cljs.core.sequential_QMARK_($old_eid$$)) {
              $id$$ = datascript.db.entid_strict($db$$, $old_eid$$);
              var $G__70023$$ = $report$$, $G__70024$$ = $APP.cljs.core.cons($APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($entity$$, $APP.cljs$cst$2432$db_SLASH_id, $id$$), $entities$$);
              $report$$ = $G__70023$$;
              $es$$ = $G__70024$$;
              continue;
            } else {
              var $vec__69559$$ = datascript.db.resolve_upserts($db$$, $entity$$), $entity_SINGLEQUOTE_$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69559$$, 0, null), $upserts$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69559$$, 1, null), $upserted_eid$$ = datascript.db.validate_upserts($entity_SINGLEQUOTE_$$, $upserts$$);
              if ($upserted_eid$$ != null) {
                if (datascript.db.tempid_QMARK_($old_eid$$) && $APP.cljs.core.contains_QMARK_($tempids$$, $old_eid$$) && $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($upserted_eid$$, $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($tempids$$, $old_eid$$))) {
                  return datascript.db.retry_with_tempid($initial_report$$, $report$$, $initial_es$$, $old_eid$$, $upserted_eid$$);
                }
                var $G__70025$$ = $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$4(datascript.db.allocate_eid.cljs$core$IFn$_invoke$arity$3($report$$, $old_eid$$, $upserted_eid$$), cljs$cst$4501$datascript_DOT_db_SLASH_tx_redundant, datascript.util.conjv, datascript.db.datom.cljs$core$IFn$_invoke$arity$4($upserted_eid$$, null, null, 536870912)), $G__70026$$ = $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(datascript.db.explode($db$$, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($entity_SINGLEQUOTE_$$, 
                $APP.cljs$cst$2432$db_SLASH_id, $upserted_eid$$)), $entities$$);
                $report$$ = $G__70025$$;
                $es$$ = $G__70026$$;
                continue;
              } else {
                if (typeof $old_eid$$ === "number" || $old_eid$$ == null || typeof $old_eid$$ === "string" || datascript.db.auto_tempid_QMARK_($old_eid$$)) {
                  var $G__70027$$ = $report$$, $G__70028$$ = $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(datascript.db.explode($db$$, $entity$$), $entities$$);
                  $report$$ = $G__70027$$;
                  $es$$ = $G__70028$$;
                  continue;
                } else {
                  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Expected number, string or lookup ref for :db/id, got ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$old_eid$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4491$entity_id_SLASH_syntax, $APP.cljs$cst$2488$entity, $entity$$], null));
                }
              }
            }
          }
        } else {
          if ($APP.cljs.core.sequential_QMARK_($entity$$)) {
            var $vec__69562$$ = $entity$$, $op$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69562$$, 0, null), $e$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69562$$, 1, null), $a$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69562$$, 2, null), $v$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69562$$, 3, null);
            if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($op$$, cljs$cst$4504$db_DOT_fn_SLASH_call)) {
              var $seq__69566$$ = $APP.cljs.core.seq($entity$$), $first__69567$$ = $APP.cljs.core.first($seq__69566$$), $seq__69566__$1$$ = $APP.cljs.core.next($seq__69566$$), $_$$ = $first__69567$$, $first__69567__$1$$ = $APP.cljs.core.first($seq__69566__$1$$), $args$$ = $APP.cljs.core.next($seq__69566__$1$$), $G__70031$$ = $report$$, $G__70032$$ = $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(datascript.db.assoc_auto_tempids($db$$, $APP.cljs.core.apply.cljs$core$IFn$_invoke$arity$3($first__69567__$1$$, 
              $db$$, $args$$)), $entities$$);
              $report$$ = $G__70031$$;
              $es$$ = $G__70032$$;
              continue;
            } else {
              if ($op$$ instanceof $APP.cljs.core.Keyword && $APP.cljs.core.not(datascript.db.builtin_fn_QMARK_.cljs$core$IFn$_invoke$arity$1 ? datascript.db.builtin_fn_QMARK_.cljs$core$IFn$_invoke$arity$1($op$$) : datascript.db.builtin_fn_QMARK_.call(null, $op$$))) {
                var $temp__5827__auto__$$ = datascript.db.entid($db$$, $op$$);
                if ($temp__5827__auto__$$ == null) {
                  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Can’t find entity for transaction fn ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$op$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4464$transact_SLASH_syntax, $APP.cljs$cst$4512$operation, cljs$cst$4504$db_DOT_fn_SLASH_call, $APP.cljs$cst$2500$tx_data, $entity$$], null));
                }
                var $fun$$ = $APP.cljs$cst$1438$v.cljs$core$IFn$_invoke$arity$1(datascript.db.fsearch($db$$, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$temp__5827__auto__$$, cljs$cst$4513$db_SLASH_fn], null)));
                $args$$ = $APP.cljs.core.next($entity$$);
                if ($APP.cljs.core.fn_QMARK_($fun$$)) {
                  var $G__70033$$ = $report$$, $G__70034$$ = $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.apply.cljs$core$IFn$_invoke$arity$3($fun$$, $db$$, $args$$), $entities$$);
                  $report$$ = $G__70033$$;
                  $es$$ = $G__70034$$;
                  continue;
                } else {
                  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Entity ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$op$$], 0)), " expected to have :db/fn attribute with fn? value"].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4464$transact_SLASH_syntax, $APP.cljs$cst$4512$operation, cljs$cst$4504$db_DOT_fn_SLASH_call, $APP.cljs$cst$2500$tx_data, $entity$$], null));
                }
              } else {
                if (datascript.db.tempid_QMARK_($e$$) && $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($op$$, $APP.cljs$cst$2193$db_SLASH_add)) {
                  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Can't use tempid in '", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$entity$$], 0)), "'. Tempids are allowed in :db/add only"].join(""), new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4464$transact_SLASH_syntax, $APP.cljs$cst$2297$op, $entity$$], null));
                }
                if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($op$$, cljs$cst$4508$db_DOT_fn_SLASH_cas) || $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($op$$, cljs$cst$4505$db_SLASH_cas)) {
                  var $vec__69568$$ = $entity$$;
                  $_$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69568$$, 0, null);
                  var $e__$1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69568$$, 1, null), $a__$1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69568$$, 2, null), $ov$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69568$$, 3, null), $nv$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69568$$, 4, null), $e__$2$$ = datascript.db.entid_strict($db$$, $e__$1$$), $___$1$$ = function() {
                    var $attr__67598__auto__$$ = $a__$1$$;
                    if ($attr__67598__auto__$$ instanceof $APP.cljs.core.Keyword || typeof $attr__67598__auto__$$ === "string") {
                      return null;
                    }
                    var $at__67599__auto__$$ = $entity$$;
                    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Bad entity attribute ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$attr__67598__auto__$$], 0)), " at ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$at__67599__auto__$$], 0)), ", expected keyword or string"].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [cljs$cst$4462$attribute, 
                    $attr__67598__auto__$$, $APP.cljs$cst$4463$context, $at__67599__auto__$$, $APP.cljs$cst$1404$error, cljs$cst$4464$transact_SLASH_syntax], null));
                  }(), $ov__$1$$ = datascript.db.ref_QMARK_($db$$, $a__$1$$) ? datascript.db.entid_strict($db$$, $ov$$) : $ov$$, $nv__$1$$ = datascript.db.ref_QMARK_($db$$, $a__$1$$) ? datascript.db.entid_strict($db$$, $nv$$) : $nv$$, $___$2$$ = $nv__$1$$ == null ? function() {
                    var $at__67605__auto__$$ = $entity$$;
                    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Cannot store nil as a value at ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$at__67605__auto__$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1429$value, null, $APP.cljs$cst$4463$context, $at__67605__auto__$$, $APP.cljs$cst$1404$error, cljs$cst$4464$transact_SLASH_syntax], null));
                  }() : null, $datoms$$ = $APP.cljs.core.vec(datascript.db._search($db$$, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$e__$2$$, $a__$1$$], null)));
                  if (datascript.db.multival_QMARK_($db$$, $a__$1$$)) {
                    if ($APP.cljs.core.truth_($APP.cljs.core.some(function($report$$, $es$$, $vec__69568$$, $_$$, $e__$1$$, $a__$1$$, $ov$$, $nv$$, $e__$2$$, $___$1$$, $ov__$1$$, $nv__$1$$, $___$2$$, $datoms$$, $vec__69562$$, $op$$, $e$$, $a$$, $v$$, $db$$, $tempids$$, $vec__69556$$, $seq__69557$$, $first__69558$$, $seq__69557__$1$$, $entity$$, $entities$$, $initial_report_SINGLEQUOTE_$$, $has_tuples_QMARK_$$, $initial_es_SINGLEQUOTE_$$) {
                      return function($d$$) {
                        return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($d$$.v, $ov__$1$$);
                      };
                    }($report$$, $es$$, $vec__69568$$, $_$$, $e__$1$$, $a__$1$$, $ov$$, $nv$$, $e__$2$$, $___$1$$, $ov__$1$$, $nv__$1$$, $___$2$$, $datoms$$, $vec__69562$$, $op$$, $e$$, $a$$, $v$$, $db$$, $tempids$$, $vec__69556$$, $seq__69557$$, $first__69558$$, $seq__69557__$1$$, $entity$$, $entities$$, $initial_report$$, $has_tuples_QMARK_$$, $initial_es_SINGLEQUOTE_$$), $datoms$$))) {
                      var $G__70035$$ = datascript.db.transact_add($report$$, new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2193$db_SLASH_add, $e__$2$$, $a__$1$$, $nv__$1$$], null)), $G__70036$$ = $entities$$;
                      $report$$ = $G__70035$$;
                      $es$$ = $G__70036$$;
                      continue;
                    } else {
                      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([":db.fn/cas failed on datom [", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$e__$2$$], 0)), " ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$a__$1$$], 0)), " ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$1438$v, 
                      $datoms$$)], 0)), "], expected ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$ov__$1$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$1404$error, cljs$cst$4514$transact_SLASH_cas, cljs$cst$4515$old, $datoms$$, cljs$cst$4516$expected, $ov__$1$$, $APP.cljs$cst$4517$new, $nv__$1$$], null));
                    }
                  } else {
                    var $v__$1$$ = $APP.cljs$cst$1438$v.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first($datoms$$));
                    if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($v__$1$$, $ov__$1$$)) {
                      var $G__70039$$ = datascript.db.transact_add($report$$, new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2193$db_SLASH_add, $e__$2$$, $a__$1$$, $nv__$1$$], null)), $G__70040$$ = $entities$$;
                      $report$$ = $G__70039$$;
                      $es$$ = $G__70040$$;
                      continue;
                    } else {
                      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([":db.fn/cas failed on datom [", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$e__$2$$], 0)), " ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$a__$1$$], 0)), " ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$v__$1$$], 
                      0)), "], expected ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$ov__$1$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$1404$error, cljs$cst$4514$transact_SLASH_cas, cljs$cst$4515$old, $APP.cljs.core.first($datoms$$), cljs$cst$4516$expected, $ov__$1$$, $APP.cljs$cst$4517$new, $nv__$1$$], null));
                    }
                  }
                } else {
                  if (datascript.db.tx_id_QMARK_($e$$)) {
                    var $G__70042$$ = datascript.db.allocate_eid.cljs$core$IFn$_invoke$arity$3($report$$, $e$$, datascript.db.current_tx($report$$)), $G__70043$$ = $APP.cljs.core.cons(new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$op$$, datascript.db.current_tx($report$$), $a$$, $v$$], null), $entities$$);
                    $report$$ = $G__70042$$;
                    $es$$ = $G__70043$$;
                    continue;
                  } else {
                    if (datascript.db.ref_QMARK_($db$$, $a$$) && datascript.db.tx_id_QMARK_($v$$)) {
                      var $G__70051$$ = datascript.db.allocate_eid.cljs$core$IFn$_invoke$arity$3($report$$, $v$$, datascript.db.current_tx($report$$)), $G__70052$$ = $APP.cljs.core.cons(new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$op$$, $e$$, $a$$, datascript.db.current_tx($report$$)], null), $entities$$);
                      $report$$ = $G__70051$$;
                      $es$$ = $G__70052$$;
                      continue;
                    } else {
                      if (datascript.db.ref_QMARK_($db$$, $a$$) && datascript.db.tempid_QMARK_($v$$)) {
                        $temp__5827__auto__$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($tempids$$, $v$$);
                        if ($temp__5827__auto__$$ == null) {
                          var $resolved$$ = datascript.db.next_eid($db$$), $report_SINGLEQUOTE_$$ = $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$5(datascript.db.allocate_eid.cljs$core$IFn$_invoke$arity$3($report$$, $v$$, $resolved$$), cljs$cst$4510$datascript_DOT_db_SLASH_value_tempids, $APP.cljs.core.assoc, $resolved$$, $v$$), $G__70054$$ = $es$$;
                          $report$$ = $report_SINGLEQUOTE_$$;
                          $es$$ = $G__70054$$;
                        } else {
                          $resolved$$ = $temp__5827__auto__$$;
                          var $G__70059$$ = $report_SINGLEQUOTE_$$ = $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$5($report$$, cljs$cst$4510$datascript_DOT_db_SLASH_value_tempids, $APP.cljs.core.assoc, $resolved$$, $v$$), $G__70060$$ = $APP.cljs.core.cons(new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$op$$, $e$$, $a$$, $resolved$$], null), $entities$$);
                          $report$$ = $G__70059$$;
                          $es$$ = $G__70060$$;
                        }
                        continue;
                      } else {
                        var $G__69571$$ = $APP.cljs.core.volatile_BANG_(null);
                        if (function() {
                          var $and__5023__auto__$jscomp$239_and__5023__auto____$1$jscomp$50_and__5023__auto____$2$jscomp$14_v_SINGLEQUOTE_$$ = $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($op$$, $APP.cljs$cst$2193$db_SLASH_add) || $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($op$$, $APP.cljs$cst$2194$db_SLASH_retract);
                          return $and__5023__auto__$jscomp$239_and__5023__auto____$1$jscomp$50_and__5023__auto____$2$jscomp$14_v_SINGLEQUOTE_$$ ? ($and__5023__auto__$jscomp$239_and__5023__auto____$1$jscomp$50_and__5023__auto____$2$jscomp$14_v_SINGLEQUOTE_$$ = $APP.cljs.core.not(cljs$cst$4509$datascript_DOT_db_SLASH_internal.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.meta($entity$$)))) ? ($and__5023__auto__$jscomp$239_and__5023__auto____$1$jscomp$50_and__5023__auto____$2$jscomp$14_v_SINGLEQUOTE_$$ = 
                          datascript.db.tuple_QMARK_($db$$, $a$$)) ? ($and__5023__auto__$jscomp$239_and__5023__auto____$1$jscomp$50_and__5023__auto____$2$jscomp$14_v_SINGLEQUOTE_$$ = $APP.cljs.core.vreset_BANG_($G__69571$$, datascript.db.resolve_tuple_refs($db$$, $a$$, $v$$)), $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($v$$, $and__5023__auto__$jscomp$239_and__5023__auto____$1$jscomp$50_and__5023__auto____$2$jscomp$14_v_SINGLEQUOTE_$$) && !0) : $and__5023__auto__$jscomp$239_and__5023__auto____$1$jscomp$50_and__5023__auto____$2$jscomp$14_v_SINGLEQUOTE_$$ : 
                          $and__5023__auto__$jscomp$239_and__5023__auto____$1$jscomp$50_and__5023__auto____$2$jscomp$14_v_SINGLEQUOTE_$$ : $and__5023__auto__$jscomp$239_and__5023__auto____$1$jscomp$50_and__5023__auto____$2$jscomp$14_v_SINGLEQUOTE_$$;
                        }()) {
                          var $v_SINGLEQUOTE_$$ = $APP.cljs.core.deref($G__69571$$), $G__70064$$ = $report$$, $G__70065$$ = $APP.cljs.core.cons(new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$op$$, $e$$, $a$$, $v_SINGLEQUOTE_$$], null), $entities$$);
                          $report$$ = $G__70064$$;
                          $es$$ = $G__70065$$;
                          continue;
                        } else {
                          if (datascript.db.tempid_QMARK_($e$$)) {
                            $upserted_eid$$ = datascript.db.is_attr_QMARK_($db$$, $a$$, cljs$cst$4439$db_DOT_unique_SLASH_identity) ? $APP.cljs$cst$1628$e.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first(datascript.db._datoms($db$$, $APP.cljs$cst$4441$avet, $a$$, $v$$, null, null))) : null;
                            var $allocated_eid$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($tempids$$, $e$$);
                            if ($APP.cljs.core.truth_(function() {
                              var $and__5023__auto__$jscomp$240_and__5023__auto____$1$$ = $upserted_eid$$;
                              return $APP.cljs.core.truth_($and__5023__auto__$jscomp$240_and__5023__auto____$1$$) ? ($and__5023__auto__$jscomp$240_and__5023__auto____$1$$ = $allocated_eid$$, $APP.cljs.core.truth_($and__5023__auto__$jscomp$240_and__5023__auto____$1$$) ? $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($upserted_eid$$, $allocated_eid$$) : $and__5023__auto__$jscomp$240_and__5023__auto____$1$$) : $and__5023__auto__$jscomp$240_and__5023__auto____$1$$;
                            }())) {
                              return datascript.db.retry_with_tempid($initial_report$$, $report$$, $initial_es$$, $e$$, $upserted_eid$$);
                            }
                            var $eid$$ = function() {
                              var $or__5025__auto__$jscomp$464_or__5025__auto____$1$$ = $upserted_eid$$;
                              if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$464_or__5025__auto____$1$$)) {
                                return $or__5025__auto__$jscomp$464_or__5025__auto____$1$$;
                              }
                              $or__5025__auto__$jscomp$464_or__5025__auto____$1$$ = $allocated_eid$$;
                              return $APP.cljs.core.truth_($or__5025__auto__$jscomp$464_or__5025__auto____$1$$) ? $or__5025__auto__$jscomp$464_or__5025__auto____$1$$ : datascript.db.next_eid($db$$);
                            }(), $G__70071$$ = datascript.db.allocate_eid.cljs$core$IFn$_invoke$arity$3($report$$, $e$$, $eid$$), $G__70072$$ = $APP.cljs.core.cons(new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$op$$, $eid$$, $a$$, $v$$], null), $entities$$);
                            $report$$ = $G__70071$$;
                            $es$$ = $G__70072$$;
                            continue;
                          } else {
                            var $G__69572$$ = $APP.cljs.core.volatile_BANG_(null);
                            if ($APP.cljs.core.truth_(function() {
                              var $and__5023__auto__$jscomp$241_and__5023__auto____$1$jscomp$52_upserted_eid$$ = datascript.db.is_attr_QMARK_($db$$, $a$$, cljs$cst$4439$db_DOT_unique_SLASH_identity);
                              if ($and__5023__auto__$jscomp$241_and__5023__auto____$1$jscomp$52_upserted_eid$$) {
                                if ($and__5023__auto__$jscomp$241_and__5023__auto____$1$jscomp$52_upserted_eid$$ = $APP.cljs.core.contains_QMARK_(cljs$cst$4496$datascript_DOT_db_SLASH_reverse_tempids.cljs$core$IFn$_invoke$arity$1($report$$), $e$$)) {
                                  $and__5023__auto__$jscomp$241_and__5023__auto____$1$jscomp$52_upserted_eid$$ = $APP.cljs.core.vreset_BANG_($G__69572$$, $APP.cljs$cst$1628$e.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first(datascript.db._datoms($db$$, $APP.cljs$cst$4441$avet, $a$$, $v$$, null, null))));
                                  var $and__5023__auto____$2$$ = $e$$;
                                  return $APP.cljs.core.truth_($and__5023__auto____$2$$) ? $APP.cljs.core.truth_($and__5023__auto__$jscomp$241_and__5023__auto____$1$jscomp$52_upserted_eid$$) ? $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($e$$, $and__5023__auto__$jscomp$241_and__5023__auto____$1$jscomp$52_upserted_eid$$) && !0 : $and__5023__auto__$jscomp$241_and__5023__auto____$1$jscomp$52_upserted_eid$$ : $and__5023__auto____$2$$;
                                }
                                return $and__5023__auto__$jscomp$241_and__5023__auto____$1$jscomp$52_upserted_eid$$;
                              }
                              return $and__5023__auto__$jscomp$241_and__5023__auto____$1$jscomp$52_upserted_eid$$;
                            }())) {
                              $upserted_eid$$ = $APP.cljs.core.deref($G__69572$$);
                              var $tempids__$1$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2(cljs$cst$4496$datascript_DOT_db_SLASH_reverse_tempids.cljs$core$IFn$_invoke$arity$1($report$$), $e$$), $tempid$$ = datascript.util.find(function($report$$, $es$$, $tempids__$1$$, $upserted_eid$$, $G__69572$$, $G__69571$$, $vec__69562$$, $op$$, $e$$, $a$$, $v$$, $db$$, $tempids$$, $vec__69556$$, $seq__69557$$, $first__69558$$, $seq__69557__$1$$, $entity$$, $entities$$, $initial_report_SINGLEQUOTE_$$, 
                              $has_tuples_QMARK_$$, $initial_es_SINGLEQUOTE_$$) {
                                return function($p1__69531_SHARP_$$) {
                                  return !$APP.cljs.core.contains_QMARK_(cljs$cst$4503$datascript_DOT_db_SLASH_upserted_tempids.cljs$core$IFn$_invoke$arity$1($report$$), $p1__69531_SHARP_$$);
                                };
                              }($report$$, $es$$, $tempids__$1$$, $upserted_eid$$, $G__69572$$, $G__69571$$, $vec__69562$$, $op$$, $e$$, $a$$, $v$$, $db$$, $tempids$$, $vec__69556$$, $seq__69557$$, $first__69558$$, $seq__69557__$1$$, $entity$$, $entities$$, $initial_report$$, $has_tuples_QMARK_$$, $initial_es_SINGLEQUOTE_$$), $tempids__$1$$);
                              if ($APP.cljs.core.truth_($tempid$$)) {
                                return datascript.db.retry_with_tempid($initial_report$$, $report$$, $initial_es$$, $tempid$$, $upserted_eid$$);
                              }
                              throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Conflicting upsert: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$e$$], 0)), " resolves to ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$upserted_eid$$], 0)), " via ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$entity$$], 
                              0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$1404$error, cljs$cst$4498$transact_SLASH_upsert], null));
                            }
                            if ($APP.cljs.core.not(cljs$cst$4509$datascript_DOT_db_SLASH_internal.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.meta($entity$$))) && datascript.db.tuple_QMARK_($db$$, $a$$)) {
                              var $tuple_attrs$$ = $APP.cljs.core.get_in.cljs$core$IFn$_invoke$arity$2($db$$, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1410$schema, $a$$, cljs$cst$4472$db_SLASH_tupleAttrs], null));
                              if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.count($tuple_attrs$$), $APP.cljs.core.count($v$$)) && $APP.cljs.core.every_QMARK_($APP.cljs.core.some_QMARK_, $v$$) && $APP.cljs.core.every_QMARK_(function($report$$, $es$$, $tuple_attrs$$, $G__69572$$, $G__69571$$, $vec__69562$$, $op$$, $e$$, $a$$, $v$$, $db$$, $tempids$$, $vec__69556$$, $seq__69557$$, $first__69558$$, $seq__69557__$1$$, $entity$$, $entities$$, $initial_report_SINGLEQUOTE_$$, $has_tuples_QMARK_$$, 
                              $initial_es_SINGLEQUOTE_$$) {
                                return function($p__69573_tuple_value$$) {
                                  var $db_value_tuple_attr$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__69573_tuple_value$$, 0, null);
                                  $p__69573_tuple_value$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__69573_tuple_value$$, 1, null);
                                  $db_value_tuple_attr$$ = $APP.cljs$cst$1438$v.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first(datascript.db._datoms($db$$, $APP.cljs$cst$4444$eavt, $e$$, $db_value_tuple_attr$$, null, null)));
                                  return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($p__69573_tuple_value$$, $db_value_tuple_attr$$);
                                };
                              }($report$$, $es$$, $tuple_attrs$$, $G__69572$$, $G__69571$$, $vec__69562$$, $op$$, $e$$, $a$$, $v$$, $db$$, $tempids$$, $vec__69556$$, $seq__69557$$, $first__69558$$, $seq__69557__$1$$, $entity$$, $entities$$, $initial_report$$, $has_tuples_QMARK_$$, $initial_es_SINGLEQUOTE_$$), $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.vector, $tuple_attrs$$, $v$$))) {
                                $es$$ = $entities$$;
                                continue;
                              } else {
                                throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Can’t modify tuple attrs directly: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$entity$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4464$transact_SLASH_syntax, $APP.cljs$cst$2500$tx_data, $entity$$], null));
                              }
                            } else {
                              if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($op$$, $APP.cljs$cst$2193$db_SLASH_add)) {
                                var $G__70096$$ = datascript.db.transact_add($report$$, $entity$$), $G__70098$$ = $entities$$;
                                $report$$ = $G__70096$$;
                                $es$$ = $G__70098$$;
                                continue;
                              } else {
                                if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($op$$, $APP.cljs$cst$2194$db_SLASH_retract) && $v$$ != null) {
                                  $temp__5827__auto__$$ = datascript.db.entid($db$$, $e$$);
                                  if ($temp__5827__auto__$$ == null) {
                                    $es$$ = $entities$$;
                                  } else {
                                    $e__$1$$ = $temp__5827__auto__$$;
                                    $v__$1$$ = datascript.db.ref_QMARK_($db$$, $a$$) ? datascript.db.entid_strict($db$$, $v$$) : $v$$;
                                    var $attr__67598__auto___70104$$ = $a$$;
                                    if (!($attr__67598__auto___70104$$ instanceof $APP.cljs.core.Keyword || typeof $attr__67598__auto___70104$$ === "string")) {
                                      var $at__67599__auto___70105$$ = $entity$$;
                                      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Bad entity attribute ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$attr__67598__auto___70104$$], 0)), " at ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$at__67599__auto___70105$$], 0)), ", expected keyword or string"].join(""), new $APP.cljs.core.PersistentArrayMap(null, 
                                      3, [cljs$cst$4462$attribute, $attr__67598__auto___70104$$, $APP.cljs$cst$4463$context, $at__67599__auto___70105$$, $APP.cljs$cst$1404$error, cljs$cst$4464$transact_SLASH_syntax], null));
                                    }
                                    if ($v__$1$$ == null) {
                                      var $at__67605__auto___70106$$ = $entity$$;
                                      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Cannot store nil as a value at ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$at__67605__auto___70106$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1429$value, null, $APP.cljs$cst$4463$context, $at__67605__auto___70106$$, $APP.cljs$cst$1404$error, cljs$cst$4464$transact_SLASH_syntax], null));
                                    }
                                    var $temp__5827__auto____$1$$ = datascript.db.fsearch($db$$, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$e__$1$$, $a$$, $v__$1$$], null));
                                    if ($temp__5827__auto____$1$$ == null) {
                                      $es$$ = $entities$$;
                                    } else {
                                      var $G__70112$$ = datascript.db.transact_retract_datom($report$$, $temp__5827__auto____$1$$), $G__70113$$ = $entities$$;
                                      $report$$ = $G__70112$$;
                                      $es$$ = $G__70113$$;
                                    }
                                  }
                                  continue;
                                } else {
                                  if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($op$$, cljs$cst$4507$db_DOT_fn_SLASH_retractAttribute) || $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($op$$, $APP.cljs$cst$2194$db_SLASH_retract)) {
                                    $temp__5827__auto__$$ = datascript.db.entid($db$$, $e$$);
                                    if ($temp__5827__auto__$$ == null) {
                                      $es$$ = $entities$$;
                                    } else {
                                      $e__$1$$ = $temp__5827__auto__$$;
                                      $_$$ = function() {
                                        var $attr__67598__auto__$$ = $a$$;
                                        if ($attr__67598__auto__$$ instanceof $APP.cljs.core.Keyword || typeof $attr__67598__auto__$$ === "string") {
                                          return null;
                                        }
                                        var $at__67599__auto__$$ = $entity$$;
                                        throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Bad entity attribute ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$attr__67598__auto__$$], 0)), " at ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$at__67599__auto__$$], 0)), ", expected keyword or string"].join(""), new $APP.cljs.core.PersistentArrayMap(null, 
                                        3, [cljs$cst$4462$attribute, $attr__67598__auto__$$, $APP.cljs$cst$4463$context, $at__67599__auto__$$, $APP.cljs$cst$1404$error, cljs$cst$4464$transact_SLASH_syntax], null));
                                      }();
                                      $datoms$$ = $APP.cljs.core.vec(datascript.db._search($db$$, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$e__$1$$, $a$$], null)));
                                      var $G__70116$$ = $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(datascript.db.transact_retract_datom, $report$$, $datoms$$), $G__70117$$ = $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(datascript.db.retract_components($db$$, $datoms$$), $entities$$);
                                      $report$$ = $G__70116$$;
                                      $es$$ = $G__70117$$;
                                    }
                                    continue;
                                  } else {
                                    if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($op$$, cljs$cst$4502$db_DOT_fn_SLASH_retractEntity) || $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($op$$, cljs$cst$4506$db_SLASH_retractEntity)) {
                                      $temp__5827__auto__$$ = datascript.db.entid($db$$, $e$$);
                                      if ($temp__5827__auto__$$ == null) {
                                        $es$$ = $entities$$;
                                      } else {
                                        $e__$1$$ = $temp__5827__auto__$$;
                                        var $e_datoms$$ = $APP.cljs.core.vec(datascript.db._search($db$$, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$e__$1$$], null))), $v_datoms$$ = $APP.cljs.core.vec($APP.cljs.core.mapcat.cljs$core$IFn$_invoke$arity$variadic(function($report$$, $es$$, $e_datoms$$, $e__$1$$, $temp__5827__auto__$$, $G__69572$$, $G__69571$$, $vec__69562$$, $op$$, $e$$, $a$$, $v$$, $db$$, $tempids$$, $vec__69556$$, $seq__69557$$, $first__69558$$, 
                                        $seq__69557__$1$$, $entity$$, $entities$$, $initial_report_SINGLEQUOTE_$$, $has_tuples_QMARK_$$, $initial_es_SINGLEQUOTE_$$) {
                                          return function($a__$1$$) {
                                            return datascript.db._search($db$$, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [null, $a__$1$$, $e__$1$$], null));
                                          };
                                        }($report$$, $es$$, $e_datoms$$, $e__$1$$, $temp__5827__auto__$$, $G__69572$$, $G__69571$$, $vec__69562$$, $op$$, $e$$, $a$$, $v$$, $db$$, $tempids$$, $vec__69556$$, $seq__69557$$, $first__69558$$, $seq__69557__$1$$, $entity$$, $entities$$, $initial_report$$, $has_tuples_QMARK_$$, $initial_es_SINGLEQUOTE_$$), $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([datascript.db._attrs_by($db$$, $APP.cljs$cst$4470$db_DOT_type_SLASH_ref)], 0))), $G__70120$$ = 
                                        $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(datascript.db.transact_retract_datom, $report$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($e_datoms$$, $v_datoms$$)), $G__70121$$ = $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(datascript.db.retract_components($db$$, $e_datoms$$), $entities$$);
                                        $report$$ = $G__70120$$;
                                        $es$$ = $G__70121$$;
                                      }
                                      continue;
                                    } else {
                                      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Unknown operation at ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$entity$$], 0)), ", expected :db/add, :db/retract, :db.fn/call, :db.fn/retractAttribute, :db.fn/retractEntity or an ident corresponding to an installed transaction function (e.g. {:db/ident \x3ckeyword\x3e :db/fn \x3cIfn\x3e}, usage of :db/ident requires {:db/unique :db.unique/identity} in schema)"].join(""), 
                                      new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4464$transact_SLASH_syntax, $APP.cljs$cst$4512$operation, $op$$, $APP.cljs$cst$2500$tx_data, $entity$$], null));
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          } else {
            if (datascript.db.datom_QMARK_($entity$$)) {
              var $vec__69577$$ = $entity$$;
              $e$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69577$$, 0, null);
              $a$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69577$$, 1, null);
              $v$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69577$$, 2, null);
              var $tx$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69577$$, 3, null), $added$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69577$$, 4, null);
              if ($APP.cljs.core.truth_($added$$)) {
                var $G__70122$$ = datascript.db.transact_add($report$$, new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2193$db_SLASH_add, $e$$, $a$$, $v$$, $tx$$], null)), $G__70123$$ = $entities$$;
                $report$$ = $G__70122$$;
                $es$$ = $G__70123$$;
              } else {
                var $G__70124$$ = $report$$, $G__70125$$ = $APP.cljs.core.cons(new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2194$db_SLASH_retract, $e$$, $a$$, $v$$], null), $entities$$);
                $report$$ = $G__70124$$;
                $es$$ = $G__70125$$;
              }
              continue;
            } else {
              throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Bad entity type at ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$entity$$], 0)), ", expected map or vector"].join(""), new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4464$transact_SLASH_syntax, $APP.cljs$cst$2500$tx_data, $entity$$], null));
            }
          }
        }
        break;
      }
    }
  }
};
datascript.db.transact_tx_data = function($report$$, $es$$) {
  if ($es$$ != null && !$APP.cljs.core.sequential_QMARK_($es$$)) {
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Bad transaction data ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$es$$], 0)), ", expected sequential collection"].join(""), new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4464$transact_SLASH_syntax, $APP.cljs$cst$2500$tx_data, $es$$], null));
  }
  $es$$ = datascript.db.assoc_auto_tempids($APP.cljs$cst$2507$db_before.cljs$core$IFn$_invoke$arity$1($report$$), $es$$);
  return datascript.db.transact_tx_data_impl($report$$, $es$$);
};
datascript.storage = {};
datascript.storage.storage = function($db$$) {
  return null;
};
datascript.storage.store = function($var_args$$) {
  switch(arguments.length) {
    case 1:
      return datascript.storage.store.cljs$core$IFn$_invoke$arity$1(arguments[0]);
    case 2:
      return datascript.storage.store.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.storage.store.cljs$core$IFn$_invoke$arity$1 = function($db$$) {
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Not implemented: (storage/store db)", $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.storage.store.cljs$core$IFn$_invoke$arity$2 = function($db$$, $storage$$) {
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Not implemented: (storage/store db storage)", $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.storage.store.cljs$lang$maxFixedArity = 2;
datascript.storage.maybe_adapt_storage = function($opts$$) {
  return $opts$$;
};
var extend_clj = {core:{}};
extend_clj.core.IAtom3 = function() {
};
var extend_clj$core$IAtom3$deref_impl$dyn_69340 = function($this$$$) {
  var $m__5372__auto__$jscomp$698_m__5374__auto__$$ = extend_clj.core.deref_impl[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
  if ($m__5372__auto__$jscomp$698_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$698_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$698_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$698_m__5374__auto__$$.call(null, $this$$$);
  }
  $m__5372__auto__$jscomp$698_m__5374__auto__$$ = extend_clj.core.deref_impl._;
  if ($m__5372__auto__$jscomp$698_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$698_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$698_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$698_m__5374__auto__$$.call(null, $this$$$);
  }
  throw $APP.cljs.core.missing_protocol("IAtom3.deref-impl", $this$$$);
};
extend_clj.core.deref_impl = function($this$$$) {
  return $this$$$ != null && $this$$$.extend_clj$core$IAtom3$deref_impl$arity$1 != null ? $this$$$.extend_clj$core$IAtom3$deref_impl$arity$1($this$$$) : extend_clj$core$IAtom3$deref_impl$dyn_69340($this$$$);
};
var extend_clj$core$IAtom3$compare_and_set_impl$dyn_69341 = function($this$$$, $oldv$$, $newv$$) {
  var $m__5372__auto__$jscomp$699_m__5374__auto__$$ = extend_clj.core.compare_and_set_impl[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
  if ($m__5372__auto__$jscomp$699_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$699_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$699_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($this$$$, $oldv$$, $newv$$) : $m__5372__auto__$jscomp$699_m__5374__auto__$$.call(null, $this$$$, $oldv$$, $newv$$);
  }
  $m__5372__auto__$jscomp$699_m__5374__auto__$$ = extend_clj.core.compare_and_set_impl._;
  if ($m__5372__auto__$jscomp$699_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$699_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$699_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($this$$$, $oldv$$, $newv$$) : $m__5372__auto__$jscomp$699_m__5374__auto__$$.call(null, $this$$$, $oldv$$, $newv$$);
  }
  throw $APP.cljs.core.missing_protocol("IAtom3.compare-and-set-impl", $this$$$);
};
extend_clj.core.compare_and_set_impl = function($this$$$, $oldv$$, $newv$$) {
  return $this$$$ != null && $this$$$.extend_clj$core$IAtom3$compare_and_set_impl$arity$3 != null ? $this$$$.extend_clj$core$IAtom3$compare_and_set_impl$arity$3($this$$$, $oldv$$, $newv$$) : extend_clj$core$IAtom3$compare_and_set_impl$dyn_69341($this$$$, $oldv$$, $newv$$);
};
var extend_clj$core$IAtom3$validate$dyn_69342 = function($this$$$, $validator$$, $value$$) {
  var $m__5372__auto__$jscomp$700_m__5374__auto__$$ = extend_clj.core.validate[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
  if ($m__5372__auto__$jscomp$700_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$700_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$700_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($this$$$, $validator$$, $value$$) : $m__5372__auto__$jscomp$700_m__5374__auto__$$.call(null, $this$$$, $validator$$, $value$$);
  }
  $m__5372__auto__$jscomp$700_m__5374__auto__$$ = extend_clj.core.validate._;
  if ($m__5372__auto__$jscomp$700_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$700_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$700_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($this$$$, $validator$$, $value$$) : $m__5372__auto__$jscomp$700_m__5374__auto__$$.call(null, $this$$$, $validator$$, $value$$);
  }
  throw $APP.cljs.core.missing_protocol("IAtom3.validate", $this$$$);
};
extend_clj.core.validate = function($this$$$, $validator$$, $value$$) {
  return $this$$$ != null && $this$$$.extend_clj$core$IAtom3$validate$arity$3 != null ? $this$$$.extend_clj$core$IAtom3$validate$arity$3($this$$$, $validator$$, $value$$) : extend_clj$core$IAtom3$validate$dyn_69342($this$$$, $validator$$, $value$$);
};
var extend_clj$core$IAtom3$notify_watches$dyn_69343 = function($this$$$, $oldv$$, $newv$$) {
  var $m__5372__auto__$jscomp$701_m__5374__auto__$$ = extend_clj.core.notify_watches[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
  if ($m__5372__auto__$jscomp$701_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$701_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$701_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($this$$$, $oldv$$, $newv$$) : $m__5372__auto__$jscomp$701_m__5374__auto__$$.call(null, $this$$$, $oldv$$, $newv$$);
  }
  $m__5372__auto__$jscomp$701_m__5374__auto__$$ = extend_clj.core.notify_watches._;
  if ($m__5372__auto__$jscomp$701_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$701_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$701_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($this$$$, $oldv$$, $newv$$) : $m__5372__auto__$jscomp$701_m__5374__auto__$$.call(null, $this$$$, $oldv$$, $newv$$);
  }
  throw $APP.cljs.core.missing_protocol("IAtom3.notify-watches", $this$$$);
};
extend_clj.core.notify_watches = function($this$$$, $oldv$$, $newv$$) {
  return $this$$$ != null && $this$$$.extend_clj$core$IAtom3$notify_watches$arity$3 != null ? $this$$$.extend_clj$core$IAtom3$notify_watches$arity$3($this$$$, $oldv$$, $newv$$) : extend_clj$core$IAtom3$notify_watches$dyn_69343($this$$$, $oldv$$, $newv$$);
};
var extend_clj$core$IAtom3$swap_STAR_$dyn_69345 = function($this$$$, $f$$, $args$$) {
  var $m__5372__auto__$jscomp$702_m__5374__auto__$$ = extend_clj.core.swap_STAR_[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
  if ($m__5372__auto__$jscomp$702_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$702_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$702_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($this$$$, $f$$, $args$$) : $m__5372__auto__$jscomp$702_m__5374__auto__$$.call(null, $this$$$, $f$$, $args$$);
  }
  $m__5372__auto__$jscomp$702_m__5374__auto__$$ = extend_clj.core.swap_STAR_._;
  if ($m__5372__auto__$jscomp$702_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$702_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$702_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($this$$$, $f$$, $args$$) : $m__5372__auto__$jscomp$702_m__5374__auto__$$.call(null, $this$$$, $f$$, $args$$);
  }
  throw $APP.cljs.core.missing_protocol("IAtom3.swap*", $this$$$);
};
extend_clj.core.swap_STAR_ = function($this$$$, $f$$, $args$$) {
  return $this$$$ != null && $this$$$.extend_clj$core$IAtom3$swap_STAR_$arity$3 != null ? $this$$$.extend_clj$core$IAtom3$swap_STAR_$arity$3($this$$$, $f$$, $args$$) : extend_clj$core$IAtom3$swap_STAR_$dyn_69345($this$$$, $f$$, $args$$);
};
datascript.conn = {};
datascript.conn.Conn = function($atom$$, $validator$$, $watches$$, $meta$$) {
  this.atom = $atom$$;
  this.validator = $validator$$;
  this.watches = $watches$$;
  this.meta = $meta$$;
  this.cljs$lang$protocol_mask$partition1$ = 98306;
  this.cljs$lang$protocol_mask$partition0$ = 6455552;
};
datascript.conn.Conn.prototype.equiv = function($other__69169__auto__$$) {
  return this.cljs$core$IEquiv$_equiv$arity$2(null, $other__69169__auto__$$);
};
datascript.conn.Conn.prototype.cljs$core$IWatchable$_notify_watches$arity$3 = function($G__69773_seq__69580_seq__69580__$1_temp__5825__auto__$jscomp$921_this__69168__auto__$$, $oldv__69176__auto__$$, $newv__69171__auto__$$) {
  $G__69773_seq__69580_seq__69580__$1_temp__5825__auto__$jscomp$921_this__69168__auto__$$ = $APP.cljs.core.seq(this.watches);
  for (var $c__5548__auto__$$ = null, $G__69775_count__69582$$ = 0, $i__69583$$ = 0;;) {
    if ($i__69583$$ < $G__69775_count__69582$$) {
      var $f__69172__auto___vec__69594$$ = $c__5548__auto__$$.cljs$core$IIndexed$_nth$arity$2(null, $i__69583$$), $G__69774_k__69177__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($f__69172__auto___vec__69594$$, 0, null);
      $f__69172__auto___vec__69594$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($f__69172__auto___vec__69594$$, 1, null);
      $f__69172__auto___vec__69594$$.cljs$core$IFn$_invoke$arity$4 ? $f__69172__auto___vec__69594$$.cljs$core$IFn$_invoke$arity$4($G__69774_k__69177__auto__$$, this, $oldv__69176__auto__$$, $newv__69171__auto__$$) : $f__69172__auto___vec__69594$$.call(null, $G__69774_k__69177__auto__$$, this, $oldv__69176__auto__$$, $newv__69171__auto__$$);
      $i__69583$$ += 1;
    } else {
      if ($G__69773_seq__69580_seq__69580__$1_temp__5825__auto__$jscomp$921_this__69168__auto__$$ = $APP.cljs.core.seq($G__69773_seq__69580_seq__69580__$1_temp__5825__auto__$jscomp$921_this__69168__auto__$$)) {
        $APP.cljs.core.chunked_seq_QMARK_($G__69773_seq__69580_seq__69580__$1_temp__5825__auto__$jscomp$921_this__69168__auto__$$) ? ($c__5548__auto__$$ = $APP.cljs.core.chunk_first($G__69773_seq__69580_seq__69580__$1_temp__5825__auto__$jscomp$921_this__69168__auto__$$), $G__69773_seq__69580_seq__69580__$1_temp__5825__auto__$jscomp$921_this__69168__auto__$$ = $APP.cljs.core.chunk_rest($G__69773_seq__69580_seq__69580__$1_temp__5825__auto__$jscomp$921_this__69168__auto__$$), $G__69774_k__69177__auto__$$ = 
        $c__5548__auto__$$, $G__69775_count__69582$$ = $APP.cljs.core.count($c__5548__auto__$$), $c__5548__auto__$$ = $G__69774_k__69177__auto__$$) : ($c__5548__auto__$$ = $APP.cljs.core.first($G__69773_seq__69580_seq__69580__$1_temp__5825__auto__$jscomp$921_this__69168__auto__$$), $G__69774_k__69177__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($c__5548__auto__$$, 0, null), $f__69172__auto___vec__69594$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($c__5548__auto__$$, 1, null), 
        $f__69172__auto___vec__69594$$.cljs$core$IFn$_invoke$arity$4 ? $f__69172__auto___vec__69594$$.cljs$core$IFn$_invoke$arity$4($G__69774_k__69177__auto__$$, this, $oldv__69176__auto__$$, $newv__69171__auto__$$) : $f__69172__auto___vec__69594$$.call(null, $G__69774_k__69177__auto__$$, this, $oldv__69176__auto__$$, $newv__69171__auto__$$), $G__69773_seq__69580_seq__69580__$1_temp__5825__auto__$jscomp$921_this__69168__auto__$$ = $APP.cljs.core.next($G__69773_seq__69580_seq__69580__$1_temp__5825__auto__$jscomp$921_this__69168__auto__$$), 
        $c__5548__auto__$$ = null, $G__69775_count__69582$$ = 0), $i__69583$$ = 0;
      } else {
        return null;
      }
    }
  }
};
datascript.conn.Conn.prototype.cljs$core$IWatchable$_add_watch$arity$3 = function($this__69168__auto__$$, $key__69178__auto__$$, $f__69172__auto__$$) {
  this.watches = $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.watches, $key__69178__auto__$$, $f__69172__auto__$$);
  return this;
};
datascript.conn.Conn.prototype.cljs$core$IWatchable$_remove_watch$arity$2 = function($this__69168__auto__$$, $key__69178__auto__$$) {
  return this.watches = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.watches, $key__69178__auto__$$);
};
datascript.conn.Conn.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($o__69170__auto__$$, $other__69169__auto__$$) {
  return this === $other__69169__auto__$$;
};
datascript.conn.Conn.prototype.cljs$core$IHash$_hash$arity$1 = function($this__69168__auto__$$) {
  return $APP.goog.getUid(this);
};
datascript.conn.Conn.prototype.cljs$core$IReset$_reset_BANG_$arity$2 = function($this__69168__auto__$$, $newv__69171__auto__$$) {
  return $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2(this.extend_clj$core$IAtom3$swap_STAR_$arity$3(null, $APP.cljs.core.constantly($newv__69171__auto__$$), $APP.cljs.core.List.EMPTY), 1);
};
datascript.conn.Conn.prototype.cljs$core$ISwap$_swap_BANG_$arity$2 = function($this__69168__auto__$$, $f__69172__auto__$$) {
  return $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2(this.extend_clj$core$IAtom3$swap_STAR_$arity$3(null, $f__69172__auto__$$, $APP.cljs.core.List.EMPTY), 1);
};
datascript.conn.Conn.prototype.cljs$core$ISwap$_swap_BANG_$arity$3 = function($this__69168__auto__$$, $f__69172__auto__$$, $a__69173__auto__$$) {
  return $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2(this.extend_clj$core$IAtom3$swap_STAR_$arity$3(null, $f__69172__auto__$$, new $APP.cljs.core.List(null, $a__69173__auto__$$, null, 1, null)), 1);
};
datascript.conn.Conn.prototype.cljs$core$ISwap$_swap_BANG_$arity$4 = function($this__69168__auto__$$, $f__69172__auto__$$, $a__69173__auto__$$, $b__69174__auto__$$) {
  return $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2(this.extend_clj$core$IAtom3$swap_STAR_$arity$3(null, $f__69172__auto__$$, new $APP.cljs.core.List(null, $a__69173__auto__$$, new $APP.cljs.core.List(null, $b__69174__auto__$$, null, 1, null), 2, null)), 1);
};
datascript.conn.Conn.prototype.cljs$core$ISwap$_swap_BANG_$arity$5 = function($this__69168__auto__$$, $f__69172__auto__$$, $a__69173__auto__$$, $b__69174__auto__$$, $xs__69175__auto__$$) {
  return $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2(this.extend_clj$core$IAtom3$swap_STAR_$arity$3(null, $f__69172__auto__$$, $APP.cljs.core.cons($a__69173__auto__$$, $APP.cljs.core.cons($b__69174__auto__$$, $xs__69175__auto__$$))), 1);
};
datascript.conn.Conn.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__69168__auto__$$) {
  return this.meta;
};
datascript.conn.Conn.prototype.cljs$core$IDeref$_deref$arity$1 = function($this__69168__auto__$$) {
  return this.extend_clj$core$IAtom3$deref_impl$arity$1(null);
};
datascript.conn.Conn.prototype.extend_clj$core$IAtom3$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.conn.Conn.prototype.extend_clj$core$IAtom3$validate$arity$3 = function($this__69168__auto__$$, $validator__69181__auto__$$, $value__69182__auto__$$) {
  if ($validator__69181__auto__$$ != null) {
    if ($APP.cljs.core.truth_($validator__69181__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $validator__69181__auto__$$.cljs$core$IFn$_invoke$arity$1($value__69182__auto__$$) : $validator__69181__auto__$$.call(null, $value__69182__auto__$$))) {
      return null;
    }
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Invalid reference state", new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$1429$value, $value__69182__auto__$$], null));
  }
  return null;
};
datascript.conn.Conn.prototype.extend_clj$core$IAtom3$notify_watches$arity$3 = function($G__69819_seq__69605_seq__69605__$1_temp__5825__auto__$jscomp$922_this__69168__auto__$$, $oldv__69176__auto__$$, $newv__69171__auto__$$) {
  $G__69819_seq__69605_seq__69605__$1_temp__5825__auto__$jscomp$922_this__69168__auto__$$ = $APP.cljs.core.seq(this.watches);
  for (var $c__5548__auto__$$ = null, $G__69821_count__69607$$ = 0, $i__69608$$ = 0;;) {
    if ($i__69608$$ < $G__69821_count__69607$$) {
      var $vec__69620_w__69183__auto__$$ = $c__5548__auto__$$.cljs$core$IIndexed$_nth$arity$2(null, $i__69608$$), $G__69820_k__69177__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69620_w__69183__auto__$$, 0, null);
      $vec__69620_w__69183__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__69620_w__69183__auto__$$, 1, null);
      $vec__69620_w__69183__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $vec__69620_w__69183__auto__$$.cljs$core$IFn$_invoke$arity$4($G__69820_k__69177__auto__$$, this, $oldv__69176__auto__$$, $newv__69171__auto__$$) : $vec__69620_w__69183__auto__$$.call(null, $G__69820_k__69177__auto__$$, this, $oldv__69176__auto__$$, $newv__69171__auto__$$);
      $i__69608$$ += 1;
    } else {
      if ($G__69819_seq__69605_seq__69605__$1_temp__5825__auto__$jscomp$922_this__69168__auto__$$ = $APP.cljs.core.seq($G__69819_seq__69605_seq__69605__$1_temp__5825__auto__$jscomp$922_this__69168__auto__$$)) {
        $APP.cljs.core.chunked_seq_QMARK_($G__69819_seq__69605_seq__69605__$1_temp__5825__auto__$jscomp$922_this__69168__auto__$$) ? ($c__5548__auto__$$ = $APP.cljs.core.chunk_first($G__69819_seq__69605_seq__69605__$1_temp__5825__auto__$jscomp$922_this__69168__auto__$$), $G__69819_seq__69605_seq__69605__$1_temp__5825__auto__$jscomp$922_this__69168__auto__$$ = $APP.cljs.core.chunk_rest($G__69819_seq__69605_seq__69605__$1_temp__5825__auto__$jscomp$922_this__69168__auto__$$), $G__69820_k__69177__auto__$$ = 
        $c__5548__auto__$$, $G__69821_count__69607$$ = $APP.cljs.core.count($c__5548__auto__$$), $c__5548__auto__$$ = $G__69820_k__69177__auto__$$) : ($c__5548__auto__$$ = $APP.cljs.core.first($G__69819_seq__69605_seq__69605__$1_temp__5825__auto__$jscomp$922_this__69168__auto__$$), $G__69820_k__69177__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($c__5548__auto__$$, 0, null), $vec__69620_w__69183__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($c__5548__auto__$$, 1, null), 
        $vec__69620_w__69183__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $vec__69620_w__69183__auto__$$.cljs$core$IFn$_invoke$arity$4($G__69820_k__69177__auto__$$, this, $oldv__69176__auto__$$, $newv__69171__auto__$$) : $vec__69620_w__69183__auto__$$.call(null, $G__69820_k__69177__auto__$$, this, $oldv__69176__auto__$$, $newv__69171__auto__$$), $G__69819_seq__69605_seq__69605__$1_temp__5825__auto__$jscomp$922_this__69168__auto__$$ = $APP.cljs.core.next($G__69819_seq__69605_seq__69605__$1_temp__5825__auto__$jscomp$922_this__69168__auto__$$), 
        $c__5548__auto__$$ = null, $G__69821_count__69607$$ = 0), $i__69608$$ = 0;
      } else {
        return null;
      }
    }
  }
};
datascript.conn.Conn.prototype.extend_clj$core$IAtom3$swap_STAR_$arity$3 = function($oldv__69176__auto__$jscomp$2_this__69168__auto__$$, $f__69172__auto__$jscomp$6_newv__69171__auto__$$, $args__69184__auto__$$) {
  $oldv__69176__auto__$jscomp$2_this__69168__auto__$$ = $APP.cljs.core.deref(this);
  $f__69172__auto__$jscomp$6_newv__69171__auto__$$ = $APP.cljs.core.apply.cljs$core$IFn$_invoke$arity$3($f__69172__auto__$jscomp$6_newv__69171__auto__$$, $oldv__69176__auto__$jscomp$2_this__69168__auto__$$, $args__69184__auto__$$);
  this.extend_clj$core$IAtom3$validate$arity$3(null, this.validator, $f__69172__auto__$jscomp$6_newv__69171__auto__$$);
  this.extend_clj$core$IAtom3$compare_and_set_impl$arity$3(null, $oldv__69176__auto__$jscomp$2_this__69168__auto__$$, $f__69172__auto__$jscomp$6_newv__69171__auto__$$);
  this.extend_clj$core$IAtom3$notify_watches$arity$3(null, $oldv__69176__auto__$jscomp$2_this__69168__auto__$$, $f__69172__auto__$jscomp$6_newv__69171__auto__$$);
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$oldv__69176__auto__$jscomp$2_this__69168__auto__$$, $f__69172__auto__$jscomp$6_newv__69171__auto__$$], null);
};
datascript.conn.Conn.prototype.extend_clj$core$IAtom3$deref_impl$arity$1 = function($this$$$) {
  return $APP.cljs$cst$2457$db.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.deref(this.atom));
};
datascript.conn.Conn.prototype.extend_clj$core$IAtom3$compare_and_set_impl$arity$3 = function($this$$$, $oldv$$, $newv$$) {
  return $APP.cljs.core.compare_and_set_BANG_(this.atom, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.deref(this.atom), $APP.cljs$cst$2457$db, $oldv$$), $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.deref(this.atom), $APP.cljs$cst$2457$db, $newv$$));
};
datascript.conn.Conn.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__69168__auto__$$, $k__69177__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__69177__auto__$$, null);
};
datascript.conn.Conn.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__69168__auto__$$, $k__69177__auto__$$, $not_found__69179__auto__$$) {
  switch($k__69177__auto__$$ instanceof $APP.cljs.core.Keyword ? $k__69177__auto__$$.fqn : null) {
    case "atom":
      return this.atom;
    default:
      return $not_found__69179__auto__$$;
  }
};
datascript.conn.Conn.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$885$atom, $APP.cljs$cst$45$validator, $APP.cljs$cst$46$watches, $APP.cljs$cst$20$meta], null);
};
datascript.conn.Conn.cljs$lang$type = !0;
datascript.conn.Conn.cljs$lang$ctorStr = "datascript.conn/Conn";
datascript.conn.Conn.cljs$lang$ctorPrWriter = function($this__5310__auto__$$, $writer__5311__auto__$$, $opt__5312__auto__$$) {
  return $APP.cljs.core._write($writer__5311__auto__$$, "datascript.conn/Conn");
};
datascript.conn.__GT_Conn = function($atom$$, $validator$$, $watches$$, $meta$$) {
  return new datascript.conn.Conn($atom$$, $validator$$, $watches$$, $meta$$);
};
datascript.conn.__GT_Conn = function($var_args$$) {
  switch(arguments.length) {
    case 1:
      return datascript.conn.__GT_Conn.cljs$core$IFn$_invoke$arity$1(arguments[0]);
    default:
      for (var $args_arr__5774__auto__$jscomp$87_argseq__5775__auto__$$ = [], $len__5749__auto___69833$$ = arguments.length, $i__5750__auto___69834$$ = 0;;) {
        if ($i__5750__auto___69834$$ < $len__5749__auto___69833$$) {
          $args_arr__5774__auto__$jscomp$87_argseq__5775__auto__$$.push(arguments[$i__5750__auto___69834$$]), $i__5750__auto___69834$$ += 1;
        } else {
          break;
        }
      }
      $args_arr__5774__auto__$jscomp$87_argseq__5775__auto__$$ = 1 < $args_arr__5774__auto__$jscomp$87_argseq__5775__auto__$$.length ? new $APP.cljs.core.IndexedSeq($args_arr__5774__auto__$jscomp$87_argseq__5775__auto__$$.slice(1), 0, null) : null;
      return datascript.conn.__GT_Conn.cljs$core$IFn$_invoke$arity$variadic(arguments[0], $args_arr__5774__auto__$jscomp$87_argseq__5775__auto__$$);
  }
};
datascript.conn.__GT_Conn.cljs$core$IFn$_invoke$arity$1 = function($atom$$) {
  return new datascript.conn.Conn($atom$$, null, $APP.cljs.core.PersistentArrayMap.EMPTY, $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.conn.__GT_Conn.cljs$core$IFn$_invoke$arity$variadic = function($atom$$, $opts__69186__auto___rest__69185__auto___temp__5829__auto___69844$$) {
  $opts__69186__auto___rest__69185__auto___temp__5829__auto___69844$$ = $APP.cljs.core.apply.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.array_map, $opts__69186__auto___rest__69185__auto___temp__5829__auto___69844$$);
  $atom$$ = new datascript.conn.Conn($atom$$, null, $APP.cljs.core.PersistentArrayMap.EMPTY, $APP.cljs.core.PersistentArrayMap.EMPTY);
  var $temp__5829__auto___69841$$ = $APP.cljs$cst$47$validator.cljs$core$IFn$_invoke$arity$1($opts__69186__auto___rest__69185__auto___temp__5829__auto___69844$$);
  $temp__5829__auto___69841$$ != null && ($atom$$.extend_clj$core$IAtom3$validate$arity$3(null, $temp__5829__auto___69841$$, $APP.cljs.core.deref($atom$$)), $atom$$.validator = $temp__5829__auto___69841$$);
  $opts__69186__auto___rest__69185__auto___temp__5829__auto___69844$$ = $APP.cljs$cst$2$meta.cljs$core$IFn$_invoke$arity$1($opts__69186__auto___rest__69185__auto___temp__5829__auto___69844$$);
  $opts__69186__auto___rest__69185__auto___temp__5829__auto___69844$$ != null && $APP.cljs.core.reset_meta_BANG_($atom$$, $opts__69186__auto___rest__69185__auto___temp__5829__auto___69844$$);
  return $atom$$;
};
datascript.conn.__GT_Conn.cljs$lang$applyTo = function($seq69641_seq69641__$1$$) {
  var $G__69642$$ = $APP.cljs.core.first($seq69641_seq69641__$1$$);
  $seq69641_seq69641__$1$$ = $APP.cljs.core.next($seq69641_seq69641__$1$$);
  return this.cljs$core$IFn$_invoke$arity$variadic($G__69642$$, $seq69641_seq69641__$1$$);
};
datascript.conn.__GT_Conn.cljs$lang$maxFixedArity = 1;
datascript.conn.make_conn = function($G__69644_opts$$) {
  $G__69644_opts$$ = $APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1($G__69644_opts$$);
  return datascript.conn.__GT_Conn.cljs$core$IFn$_invoke$arity$1 ? datascript.conn.__GT_Conn.cljs$core$IFn$_invoke$arity$1($G__69644_opts$$) : datascript.conn.__GT_Conn.call(null, $G__69644_opts$$);
};
datascript.conn.with$ = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return datascript.conn.with$.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return datascript.conn.with$.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.conn.with$.cljs$core$IFn$_invoke$arity$2 = function($db$$, $tx_data$$) {
  return datascript.conn.with$.cljs$core$IFn$_invoke$arity$3($db$$, $tx_data$$, null);
};
datascript.conn.with$.cljs$core$IFn$_invoke$arity$3 = function($db$$, $tx_data$$, $tx_meta$$) {
  if ($db$$ instanceof datascript.db.FilteredDB) {
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Filtered DB cannot be modified", new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$1404$error, cljs$cst$4518$transaction_SLASH_filtered], null));
  }
  return datascript.db.transact_tx_data(datascript.db.__GT_TxReport($db$$, $db$$, $APP.cljs.core.PersistentVector.EMPTY, $APP.cljs.core.PersistentArrayMap.EMPTY, $tx_meta$$), $tx_data$$);
};
datascript.conn.with$.cljs$lang$maxFixedArity = 3;
datascript.conn.db_with = function($db$$, $tx_data$$) {
  return $APP.cljs$cst$2508$db_after.cljs$core$IFn$_invoke$arity$1(datascript.conn.with$.cljs$core$IFn$_invoke$arity$2($db$$, $tx_data$$));
};
datascript.conn.conn_QMARK_ = function($conn$jscomp$8_temp__5827__auto__$$) {
  var $and__5023__auto__$$ = $conn$jscomp$8_temp__5827__auto__$$ != null ? $conn$jscomp$8_temp__5827__auto__$$.cljs$lang$protocol_mask$partition0$ & 32768 || $APP.cljs.core.PROTOCOL_SENTINEL === $conn$jscomp$8_temp__5827__auto__$$.cljs$core$IDeref$ ? !0 : $conn$jscomp$8_temp__5827__auto__$$.cljs$lang$protocol_mask$partition0$ ? !1 : $APP.cljs.core.native_satisfies_QMARK_($APP.cljs.core.IDeref, $conn$jscomp$8_temp__5827__auto__$$) : $APP.cljs.core.native_satisfies_QMARK_($APP.cljs.core.IDeref, $conn$jscomp$8_temp__5827__auto__$$);
  return $and__5023__auto__$$ ? ($conn$jscomp$8_temp__5827__auto__$$ = $APP.cljs.core.deref($conn$jscomp$8_temp__5827__auto__$$), $conn$jscomp$8_temp__5827__auto__$$ == null ? !0 : datascript.db.db_QMARK_($conn$jscomp$8_temp__5827__auto__$$)) : $and__5023__auto__$$;
};
datascript.conn.conn_from_db = function($db$$) {
  if (datascript.storage.storage($db$$) == null) {
    return datascript.conn.make_conn(new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$2457$db, $db$$], null));
  }
  datascript.storage.store.cljs$core$IFn$_invoke$arity$1($db$$);
  return datascript.conn.make_conn(new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$2457$db, $db$$, cljs$cst$4519$tx_tail, $APP.cljs.core.PersistentVector.EMPTY, cljs$cst$4520$db_last_stored, $db$$], null));
};
datascript.conn.conn_from_datoms = function($var_args$$) {
  switch(arguments.length) {
    case 1:
      return datascript.conn.conn_from_datoms.cljs$core$IFn$_invoke$arity$1(arguments[0]);
    case 2:
      return datascript.conn.conn_from_datoms.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return datascript.conn.conn_from_datoms.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.conn.conn_from_datoms.cljs$core$IFn$_invoke$arity$1 = function($datoms$$) {
  return datascript.conn.conn_from_db(datascript.db.init_db($datoms$$, null, $APP.cljs.core.PersistentArrayMap.EMPTY));
};
datascript.conn.conn_from_datoms.cljs$core$IFn$_invoke$arity$2 = function($datoms$$, $schema__$1$$) {
  return datascript.conn.conn_from_db(datascript.db.init_db($datoms$$, $schema__$1$$, $APP.cljs.core.PersistentArrayMap.EMPTY));
};
datascript.conn.conn_from_datoms.cljs$core$IFn$_invoke$arity$3 = function($datoms$$, $schema__$1$$, $opts$$) {
  return datascript.conn.conn_from_db(datascript.db.init_db($datoms$$, $schema__$1$$, datascript.storage.maybe_adapt_storage($opts$$)));
};
datascript.conn.conn_from_datoms.cljs$lang$maxFixedArity = 3;
datascript.conn.create_conn = function($var_args$$) {
  switch(arguments.length) {
    case 0:
      return datascript.conn.create_conn.cljs$core$IFn$_invoke$arity$0();
    case 1:
      return datascript.conn.create_conn.cljs$core$IFn$_invoke$arity$1(arguments[0]);
    case 2:
      return datascript.conn.create_conn.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.conn.create_conn.cljs$core$IFn$_invoke$arity$0 = function() {
  return datascript.conn.conn_from_db(datascript.db.empty_db(null, $APP.cljs.core.PersistentArrayMap.EMPTY));
};
datascript.conn.create_conn.cljs$core$IFn$_invoke$arity$1 = function($schema__$1$$) {
  return datascript.conn.conn_from_db(datascript.db.empty_db($schema__$1$$, $APP.cljs.core.PersistentArrayMap.EMPTY));
};
datascript.conn.create_conn.cljs$core$IFn$_invoke$arity$2 = function($schema__$1$$, $opts$$) {
  return datascript.conn.conn_from_db(datascript.db.empty_db($schema__$1$$, datascript.storage.maybe_adapt_storage($opts$$)));
};
datascript.conn.create_conn.cljs$lang$maxFixedArity = 2;
datascript.conn._transact_BANG_ = function($conn$$, $tx_data$$, $tx_meta$$) {
  var $_STAR_report$$ = $APP.cljs.core.volatile_BANG_(null);
  $APP.cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$2($conn$$, function($db$jscomp$132_r$$) {
    $db$jscomp$132_r$$ = datascript.conn.with$.cljs$core$IFn$_invoke$arity$3($db$jscomp$132_r$$, $tx_data$$, $tx_meta$$);
    $APP.cljs.core.vreset_BANG_($_STAR_report$$, $db$jscomp$132_r$$);
    return $APP.cljs$cst$2508$db_after.cljs$core$IFn$_invoke$arity$1($db$jscomp$132_r$$);
  });
  return $APP.cljs.core.deref($_STAR_report$$);
};
datascript.conn.transact_BANG_ = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return datascript.conn.transact_BANG_.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return datascript.conn.transact_BANG_.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.conn.transact_BANG_.cljs$core$IFn$_invoke$arity$2 = function($conn$$, $tx_data$$) {
  return datascript.conn.transact_BANG_.cljs$core$IFn$_invoke$arity$3($conn$$, $tx_data$$, null);
};
datascript.conn.transact_BANG_.cljs$core$IFn$_invoke$arity$3 = function($G__69890_conn$$, $report$jscomp$16_tx_data$$, $G__69891_callback_69898_chunk__69693_69876_tx_meta$$) {
  $report$jscomp$16_tx_data$$ = datascript.conn._transact_BANG_($G__69890_conn$$, $report$jscomp$16_tx_data$$, $G__69891_callback_69898_chunk__69693_69876_tx_meta$$);
  $G__69890_conn$$ = $APP.cljs.core.seq($APP.cljs$cst$2040$listeners.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.deref($APP.cljs$cst$1671$atom.cljs$core$IFn$_invoke$arity$1($G__69890_conn$$))));
  $G__69891_callback_69898_chunk__69693_69876_tx_meta$$ = null;
  for (var $G__69892_c__5548__auto___69889_count__69694_69877$$ = 0, $i__69695_69878$$ = 0;;) {
    if ($i__69695_69878$$ < $G__69892_c__5548__auto___69889_count__69694_69877$$) {
      var $callback_69882_vec__69702_69880$$ = $G__69891_callback_69898_chunk__69693_69876_tx_meta$$.cljs$core$IIndexed$_nth$arity$2(null, $i__69695_69878$$);
      $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($callback_69882_vec__69702_69880$$, 0, null);
      $callback_69882_vec__69702_69880$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($callback_69882_vec__69702_69880$$, 1, null);
      $callback_69882_vec__69702_69880$$.cljs$core$IFn$_invoke$arity$1 ? $callback_69882_vec__69702_69880$$.cljs$core$IFn$_invoke$arity$1($report$jscomp$16_tx_data$$) : $callback_69882_vec__69702_69880$$.call(null, $report$jscomp$16_tx_data$$);
      $i__69695_69878$$ += 1;
    } else {
      if ($G__69890_conn$$ = $APP.cljs.core.seq($G__69890_conn$$)) {
        $APP.cljs.core.chunked_seq_QMARK_($G__69890_conn$$) ? ($G__69892_c__5548__auto___69889_count__69694_69877$$ = $APP.cljs.core.chunk_first($G__69890_conn$$), $G__69890_conn$$ = $APP.cljs.core.chunk_rest($G__69890_conn$$), $G__69891_callback_69898_chunk__69693_69876_tx_meta$$ = $G__69892_c__5548__auto___69889_count__69694_69877$$, $G__69892_c__5548__auto___69889_count__69694_69877$$ = $APP.cljs.core.count($G__69892_c__5548__auto___69889_count__69694_69877$$)) : ($G__69891_callback_69898_chunk__69693_69876_tx_meta$$ = 
        $APP.cljs.core.first($G__69890_conn$$), $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__69891_callback_69898_chunk__69693_69876_tx_meta$$, 0, null), $G__69891_callback_69898_chunk__69693_69876_tx_meta$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__69891_callback_69898_chunk__69693_69876_tx_meta$$, 1, null), $G__69891_callback_69898_chunk__69693_69876_tx_meta$$.cljs$core$IFn$_invoke$arity$1 ? $G__69891_callback_69898_chunk__69693_69876_tx_meta$$.cljs$core$IFn$_invoke$arity$1($report$jscomp$16_tx_data$$) : 
        $G__69891_callback_69898_chunk__69693_69876_tx_meta$$.call(null, $report$jscomp$16_tx_data$$), $G__69890_conn$$ = $APP.cljs.core.next($G__69890_conn$$), $G__69891_callback_69898_chunk__69693_69876_tx_meta$$ = null, $G__69892_c__5548__auto___69889_count__69694_69877$$ = 0), $i__69695_69878$$ = 0;
      } else {
        break;
      }
    }
  }
  return $report$jscomp$16_tx_data$$;
};
datascript.conn.transact_BANG_.cljs$lang$maxFixedArity = 3;
datascript.conn.reset_conn_BANG_ = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return datascript.conn.reset_conn_BANG_.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return datascript.conn.reset_conn_BANG_.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.conn.reset_conn_BANG_.cljs$core$IFn$_invoke$arity$2 = function($conn$$, $db$$) {
  return datascript.conn.reset_conn_BANG_.cljs$core$IFn$_invoke$arity$3($conn$$, $db$$, null);
};
datascript.conn.reset_conn_BANG_.cljs$core$IFn$_invoke$arity$3 = function($G__69920_conn$$, $db$$, $report$jscomp$17_tx_meta$$) {
  var $G__69921_callback_69926_chunk__69729_69907_db_before$$ = $APP.cljs.core.deref($G__69920_conn$$);
  $report$jscomp$17_tx_meta$$ = datascript.db.map__GT_TxReport(new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$2507$db_before, $G__69921_callback_69926_chunk__69729_69907_db_before$$, $APP.cljs$cst$2508$db_after, $db$$, $APP.cljs$cst$2500$tx_data, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.truth_($G__69921_callback_69926_chunk__69729_69907_db_before$$) ? $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(function($p1__69710_SHARP_$$) {
    return $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($p1__69710_SHARP_$$, $APP.cljs$cst$1369$added, !1);
  }, datascript.db._datoms($G__69921_callback_69926_chunk__69729_69907_db_before$$, $APP.cljs$cst$4444$eavt, null, null, null, null)) : null, datascript.db._datoms($db$$, $APP.cljs$cst$4444$eavt, null, null, null, null)), cljs$cst$4482$tx_meta, $report$jscomp$17_tx_meta$$], null));
  datascript.storage.storage($G__69921_callback_69926_chunk__69729_69907_db_before$$) == null ? $APP.cljs.core.reset_BANG_($G__69920_conn$$, $db$$) : (datascript.storage.store.cljs$core$IFn$_invoke$arity$1($db$$), $APP.cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$variadic($APP.cljs$cst$1671$atom.cljs$core$IFn$_invoke$arity$1($G__69920_conn$$), $APP.cljs.core.assoc, $APP.cljs$cst$2457$db, $db$$, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$4519$tx_tail, $APP.cljs.core.PersistentVector.EMPTY, 
  cljs$cst$4520$db_last_stored, $db$$], 0)));
  $G__69920_conn$$ = $APP.cljs.core.seq($APP.cljs$cst$2040$listeners.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.deref($APP.cljs$cst$1671$atom.cljs$core$IFn$_invoke$arity$1($G__69920_conn$$))));
  $G__69921_callback_69926_chunk__69729_69907_db_before$$ = null;
  for (var $G__69922_c__5548__auto___69919_count__69730_69908$$ = 0, $i__69731_69909$$ = 0;;) {
    if ($i__69731_69909$$ < $G__69922_c__5548__auto___69919_count__69730_69908$$) {
      var $callback_69912_vec__69745_69910$$ = $G__69921_callback_69926_chunk__69729_69907_db_before$$.cljs$core$IIndexed$_nth$arity$2(null, $i__69731_69909$$);
      $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($callback_69912_vec__69745_69910$$, 0, null);
      $callback_69912_vec__69745_69910$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($callback_69912_vec__69745_69910$$, 1, null);
      $callback_69912_vec__69745_69910$$.cljs$core$IFn$_invoke$arity$1 ? $callback_69912_vec__69745_69910$$.cljs$core$IFn$_invoke$arity$1($report$jscomp$17_tx_meta$$) : $callback_69912_vec__69745_69910$$.call(null, $report$jscomp$17_tx_meta$$);
      $i__69731_69909$$ += 1;
    } else {
      if ($G__69920_conn$$ = $APP.cljs.core.seq($G__69920_conn$$)) {
        $APP.cljs.core.chunked_seq_QMARK_($G__69920_conn$$) ? ($G__69922_c__5548__auto___69919_count__69730_69908$$ = $APP.cljs.core.chunk_first($G__69920_conn$$), $G__69920_conn$$ = $APP.cljs.core.chunk_rest($G__69920_conn$$), $G__69921_callback_69926_chunk__69729_69907_db_before$$ = $G__69922_c__5548__auto___69919_count__69730_69908$$, $G__69922_c__5548__auto___69919_count__69730_69908$$ = $APP.cljs.core.count($G__69922_c__5548__auto___69919_count__69730_69908$$)) : ($G__69921_callback_69926_chunk__69729_69907_db_before$$ = 
        $APP.cljs.core.first($G__69920_conn$$), $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__69921_callback_69926_chunk__69729_69907_db_before$$, 0, null), $G__69921_callback_69926_chunk__69729_69907_db_before$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__69921_callback_69926_chunk__69729_69907_db_before$$, 1, null), $G__69921_callback_69926_chunk__69729_69907_db_before$$.cljs$core$IFn$_invoke$arity$1 ? $G__69921_callback_69926_chunk__69729_69907_db_before$$.cljs$core$IFn$_invoke$arity$1($report$jscomp$17_tx_meta$$) : 
        $G__69921_callback_69926_chunk__69729_69907_db_before$$.call(null, $report$jscomp$17_tx_meta$$), $G__69920_conn$$ = $APP.cljs.core.next($G__69920_conn$$), $G__69921_callback_69926_chunk__69729_69907_db_before$$ = null, $G__69922_c__5548__auto___69919_count__69730_69908$$ = 0), $i__69731_69909$$ = 0;
      } else {
        break;
      }
    }
  }
  return $db$$;
};
datascript.conn.reset_conn_BANG_.cljs$lang$maxFixedArity = 3;
datascript.conn.reset_schema_BANG_ = function($conn$$, $schema__$1$$) {
  return $APP.cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$3($conn$$, datascript.db.with_schema, $schema__$1$$);
};
datascript.conn.listen_BANG_ = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return datascript.conn.listen_BANG_.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return datascript.conn.listen_BANG_.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.conn.listen_BANG_.cljs$core$IFn$_invoke$arity$2 = function($conn$$, $callback$$) {
  return datascript.conn.listen_BANG_.cljs$core$IFn$_invoke$arity$3($conn$$, $APP.cljs.core.rand.cljs$core$IFn$_invoke$arity$0(), $callback$$);
};
datascript.conn.listen_BANG_.cljs$core$IFn$_invoke$arity$3 = function($conn$$, $key$$, $callback$$) {
  $APP.cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$variadic($APP.cljs$cst$1671$atom.cljs$core$IFn$_invoke$arity$1($conn$$), $APP.cljs.core.update, $APP.cljs$cst$2040$listeners, $APP.cljs.core.assoc, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$key$$, $callback$$], 0));
  return $key$$;
};
datascript.conn.listen_BANG_.cljs$lang$maxFixedArity = 3;
datascript.conn.unlisten_BANG_ = function($conn$$, $key$$) {
  return $APP.cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$variadic($APP.cljs$cst$1671$atom.cljs$core$IFn$_invoke$arity$1($conn$$), $APP.cljs.core.update, $APP.cljs$cst$2040$listeners, $APP.cljs.core.dissoc, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$key$$], 0));
};
datascript.impl = {};
datascript.impl.entity = {};
datascript.impl.entity.entid = function($db$$, $eid$$) {
  return typeof $eid$$ === "number" || $APP.cljs.core.sequential_QMARK_($eid$$) || $eid$$ instanceof $APP.cljs.core.Keyword ? datascript.db.entid($db$$, $eid$$) : null;
};
datascript.impl.entity.entity = function($db$$, $eid$jscomp$24_temp__5825__auto__$$) {
  $eid$jscomp$24_temp__5825__auto__$$ = datascript.impl.entity.entid($db$$, $eid$jscomp$24_temp__5825__auto__$$);
  if ($APP.cljs.core.truth_($eid$jscomp$24_temp__5825__auto__$$) && datascript.db.numeric_eid_exists_QMARK_($db$$, $eid$jscomp$24_temp__5825__auto__$$)) {
    var $G__69586$$ = $APP.cljs.core.volatile_BANG_(!1), $G__69587$$ = $APP.cljs.core.volatile_BANG_($APP.cljs.core.PersistentArrayMap.EMPTY);
    return datascript.impl.entity.__GT_Entity.cljs$core$IFn$_invoke$arity$4 ? datascript.impl.entity.__GT_Entity.cljs$core$IFn$_invoke$arity$4($db$$, $eid$jscomp$24_temp__5825__auto__$$, $G__69586$$, $G__69587$$) : datascript.impl.entity.__GT_Entity.call(null, $db$$, $eid$jscomp$24_temp__5825__auto__$$, $G__69586$$, $G__69587$$);
  }
  return null;
};
datascript.impl.entity.entity_attr = function($db$$, $a$$, $datoms$$) {
  return datascript.db.multival_QMARK_($db$$, $a$$) ? datascript.db.ref_QMARK_($db$$, $a$$) ? $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($p1__69613_SHARP_$$, $p2__69614_SHARP_$$) {
    return $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($p1__69613_SHARP_$$, datascript.impl.entity.entity($db$$, $APP.cljs$cst$1438$v.cljs$core$IFn$_invoke$arity$1($p2__69614_SHARP_$$)));
  }, $APP.cljs.core.PersistentHashSet.EMPTY, $datoms$$) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($p1__69615_SHARP_$$, $p2__69616_SHARP_$$) {
    return $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($p1__69615_SHARP_$$, $APP.cljs$cst$1438$v.cljs$core$IFn$_invoke$arity$1($p2__69616_SHARP_$$));
  }, $APP.cljs.core.PersistentHashSet.EMPTY, $datoms$$) : datascript.db.ref_QMARK_($db$$, $a$$) ? datascript.impl.entity.entity($db$$, $APP.cljs$cst$1438$v.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first($datoms$$))) : $APP.cljs$cst$1438$v.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first($datoms$$));
};
datascript.impl.entity._lookup_backwards = function($db$$, $eid$jscomp$25_temp__5823__auto__$$, $attr$$, $not_found$$) {
  $eid$jscomp$25_temp__5823__auto__$$ = $APP.cljs.core.not_empty(datascript.db._search($db$$, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [null, $attr$$, $eid$jscomp$25_temp__5823__auto__$$], null)));
  return $APP.cljs.core.truth_($eid$jscomp$25_temp__5823__auto__$$) ? datascript.db.component_QMARK_($db$$, $attr$$) ? datascript.impl.entity.entity($db$$, $APP.cljs$cst$1628$e.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first($eid$jscomp$25_temp__5823__auto__$$))) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($p1__69623_SHARP_$$, $p2__69624_SHARP_$$) {
    return $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($p1__69623_SHARP_$$, datascript.impl.entity.entity($db$$, $APP.cljs$cst$1628$e.cljs$core$IFn$_invoke$arity$1($p2__69624_SHARP_$$)));
  }, $APP.cljs.core.PersistentHashSet.EMPTY, $eid$jscomp$25_temp__5823__auto__$$) : $not_found$$;
};
datascript.impl.entity.multival__GT_js = function($val$$) {
  return $APP.cljs.core.truth_($val$$) ? $APP.cljs.core.to_array($val$$) : null;
};
datascript.impl.entity.js_seq = function($e$$) {
  datascript.impl.entity.touch.cljs$core$IFn$_invoke$arity$1 ? datascript.impl.entity.touch.cljs$core$IFn$_invoke$arity$1($e$$) : datascript.impl.entity.touch.call(null, $e$$);
  return function $datascript$impl$entity$js_seq_$_iter__69657$$($s__69658$$) {
    return new $APP.cljs.core.LazySeq(null, function() {
      for (;;) {
        var $s__69658__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__69658$$);
        if ($s__69658__$2_temp__5825__auto__$$) {
          if ($APP.cljs.core.chunked_seq_QMARK_($s__69658__$2_temp__5825__auto__$$)) {
            var $JSCompiler_inline_result$jscomp$1496_c__5501__auto__$jscomp$252_v$$ = $APP.cljs.core.chunk_first($s__69658__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1496_c__5501__auto__$jscomp$252_v$$), $a$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
            a: {
              for (var $i__69659$$ = 0;;) {
                if ($i__69659$$ < $size__5502__auto__$$) {
                  var $v$jscomp$inline_6835_vec__69671$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1496_c__5501__auto__$jscomp$252_v$$, $i__69659$$), $a$jscomp$0$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($v$jscomp$inline_6835_vec__69671$$, 0, null);
                  $v$jscomp$inline_6835_vec__69671$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($v$jscomp$inline_6835_vec__69671$$, 1, null);
                  $APP.cljs.core.chunk_append($a$$, datascript.db.multival_QMARK_($e$$.db, $a$jscomp$0$$) ? new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$a$jscomp$0$$, datascript.impl.entity.multival__GT_js($v$jscomp$inline_6835_vec__69671$$)], null) : new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$a$jscomp$0$$, $v$jscomp$inline_6835_vec__69671$$], null));
                  $i__69659$$ += 1;
                } else {
                  $JSCompiler_inline_result$jscomp$1496_c__5501__auto__$jscomp$252_v$$ = !0;
                  break a;
                }
              }
              $JSCompiler_inline_result$jscomp$1496_c__5501__auto__$jscomp$252_v$$ = void 0;
            }
            return $JSCompiler_inline_result$jscomp$1496_c__5501__auto__$jscomp$252_v$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($a$$), $datascript$impl$entity$js_seq_$_iter__69657$$($APP.cljs.core.chunk_rest($s__69658__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($a$$), null);
          }
          $JSCompiler_inline_result$jscomp$1496_c__5501__auto__$jscomp$252_v$$ = $APP.cljs.core.first($s__69658__$2_temp__5825__auto__$$);
          $a$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_inline_result$jscomp$1496_c__5501__auto__$jscomp$252_v$$, 0, null);
          $JSCompiler_inline_result$jscomp$1496_c__5501__auto__$jscomp$252_v$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_inline_result$jscomp$1496_c__5501__auto__$jscomp$252_v$$, 1, null);
          return $APP.cljs.core.cons(datascript.db.multival_QMARK_($e$$.db, $a$$) ? new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$a$$, datascript.impl.entity.multival__GT_js($JSCompiler_inline_result$jscomp$1496_c__5501__auto__$jscomp$252_v$$)], null) : new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$a$$, $JSCompiler_inline_result$jscomp$1496_c__5501__auto__$jscomp$252_v$$], null), $datascript$impl$entity$js_seq_$_iter__69657$$($APP.cljs.core.rest($s__69658__$2_temp__5825__auto__$$)));
        }
        return null;
      }
    }, null, null);
  }($APP.cljs.core.deref($e$$.cache));
};
$APP.cljs.core.ES6Iterator.prototype[$APP.cljs.core.ITER_SYMBOL] = function() {
  return this;
};
$APP.cljs.core.ES6EntriesIterator.prototype[$APP.cljs.core.ITER_SYMBOL] = function() {
  return this;
};
datascript.impl.entity.Entity = function($db$$, $eid$$, $touched$$, $cache$$) {
  this.db = $db$$;
  this.eid = $eid$$;
  this.touched = $touched$$;
  this.cache = $cache$$;
  this.cljs$lang$protocol_mask$partition0$ = 2162164483;
  this.cljs$lang$protocol_mask$partition1$ = 0;
};
datascript.impl.entity.Entity.prototype.entry_set = function() {
  return $APP.cljs.core.to_array($APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.to_array, datascript.impl.entity.js_seq(this)));
};
datascript.impl.entity.Entity.prototype.forEach = function() {
  var $G__69933$$ = null, $G__69933__1$$ = function($f$$) {
    for (var $G__69938_seq__69713_seq__69713__$1_temp__5825__auto__$$ = $APP.cljs.core.seq(datascript.impl.entity.js_seq(this)), $c__5548__auto__$$ = null, $G__69940_count__69715$$ = 0, $i__69716$$ = 0;;) {
      if ($i__69716$$ < $G__69940_count__69715$$) {
        var $v$$ = $c__5548__auto__$$.cljs$core$IIndexed$_nth$arity$2(null, $i__69716$$), $G__69939_a$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($v$$, 0, null);
        $v$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($v$$, 1, null);
        $f$$.cljs$core$IFn$_invoke$arity$3 ? $f$$.cljs$core$IFn$_invoke$arity$3($v$$, $G__69939_a$$, this) : $f$$.call(null, $v$$, $G__69939_a$$, this);
        $i__69716$$ += 1;
      } else {
        if ($G__69938_seq__69713_seq__69713__$1_temp__5825__auto__$$ = $APP.cljs.core.seq($G__69938_seq__69713_seq__69713__$1_temp__5825__auto__$$)) {
          $APP.cljs.core.chunked_seq_QMARK_($G__69938_seq__69713_seq__69713__$1_temp__5825__auto__$$) ? ($c__5548__auto__$$ = $APP.cljs.core.chunk_first($G__69938_seq__69713_seq__69713__$1_temp__5825__auto__$$), $G__69938_seq__69713_seq__69713__$1_temp__5825__auto__$$ = $APP.cljs.core.chunk_rest($G__69938_seq__69713_seq__69713__$1_temp__5825__auto__$$), $G__69939_a$$ = $c__5548__auto__$$, $G__69940_count__69715$$ = $APP.cljs.core.count($c__5548__auto__$$), $c__5548__auto__$$ = $G__69939_a$$) : ($c__5548__auto__$$ = 
          $APP.cljs.core.first($G__69938_seq__69713_seq__69713__$1_temp__5825__auto__$$), $G__69939_a$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($c__5548__auto__$$, 0, null), $v$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($c__5548__auto__$$, 1, null), $f$$.cljs$core$IFn$_invoke$arity$3 ? $f$$.cljs$core$IFn$_invoke$arity$3($v$$, $G__69939_a$$, this) : $f$$.call(null, $v$$, $G__69939_a$$, this), $G__69938_seq__69713_seq__69713__$1_temp__5825__auto__$$ = $APP.cljs.core.next($G__69938_seq__69713_seq__69713__$1_temp__5825__auto__$$), 
          $c__5548__auto__$$ = null, $G__69940_count__69715$$ = 0), $i__69716$$ = 0;
        } else {
          return null;
        }
      }
    }
  }, $G__69933__2$$ = function($f$$, $use_as_this$$) {
    for (var $G__69952_seq__69738_seq__69738__$1_temp__5825__auto__$$ = $APP.cljs.core.seq(datascript.impl.entity.js_seq(this)), $c__5548__auto__$$ = null, $G__69954_count__69740$$ = 0, $i__69741$$ = 0;;) {
      if ($i__69741$$ < $G__69954_count__69740$$) {
        var $v$$ = $c__5548__auto__$$.cljs$core$IIndexed$_nth$arity$2(null, $i__69741$$), $G__69953_a$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($v$$, 0, null);
        $v$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($v$$, 1, null);
        $f$$.call($use_as_this$$, $v$$, $G__69953_a$$, this);
        $i__69741$$ += 1;
      } else {
        if ($G__69952_seq__69738_seq__69738__$1_temp__5825__auto__$$ = $APP.cljs.core.seq($G__69952_seq__69738_seq__69738__$1_temp__5825__auto__$$)) {
          $APP.cljs.core.chunked_seq_QMARK_($G__69952_seq__69738_seq__69738__$1_temp__5825__auto__$$) ? ($c__5548__auto__$$ = $APP.cljs.core.chunk_first($G__69952_seq__69738_seq__69738__$1_temp__5825__auto__$$), $G__69952_seq__69738_seq__69738__$1_temp__5825__auto__$$ = $APP.cljs.core.chunk_rest($G__69952_seq__69738_seq__69738__$1_temp__5825__auto__$$), $G__69953_a$$ = $c__5548__auto__$$, $G__69954_count__69740$$ = $APP.cljs.core.count($c__5548__auto__$$), $c__5548__auto__$$ = $G__69953_a$$) : ($c__5548__auto__$$ = 
          $APP.cljs.core.first($G__69952_seq__69738_seq__69738__$1_temp__5825__auto__$$), $G__69953_a$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($c__5548__auto__$$, 0, null), $v$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($c__5548__auto__$$, 1, null), $f$$.call($use_as_this$$, $v$$, $G__69953_a$$, this), $G__69952_seq__69738_seq__69738__$1_temp__5825__auto__$$ = $APP.cljs.core.next($G__69952_seq__69738_seq__69738__$1_temp__5825__auto__$$), $c__5548__auto__$$ = null, $G__69954_count__69740$$ = 
          0), $i__69741$$ = 0;
        } else {
          return null;
        }
      }
    }
  };
  $G__69933$$ = function($f$$, $use_as_this$$) {
    switch(arguments.length) {
      case 1:
        return $G__69933__1$$.call(this, $f$$);
      case 2:
        return $G__69933__2$$.call(this, $f$$, $use_as_this$$);
    }
    throw Error("Invalid arity: " + arguments.length);
  };
  $G__69933$$.cljs$core$IFn$_invoke$arity$1 = $G__69933__1$$;
  $G__69933$$.cljs$core$IFn$_invoke$arity$2 = $G__69933__2$$;
  return $G__69933$$;
}();
datascript.impl.entity.Entity.prototype.get = function($attr$$) {
  if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($attr$$, ":db/id")) {
    return this.eid;
  }
  if (datascript.db.reverse_ref_QMARK_($attr$$)) {
    return datascript.impl.entity.multival__GT_js(datascript.impl.entity._lookup_backwards(this.db, this.eid, datascript.db.reverse_ref($attr$$), null));
  }
  var $G__69767$$ = datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$2 ? datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$2(this, $attr$$) : datascript.impl.entity.lookup_entity.call(null, this, $attr$$);
  return datascript.db.multival_QMARK_(this.db, $attr$$) ? datascript.impl.entity.multival__GT_js($G__69767$$) : $G__69767$$;
};
datascript.impl.entity.Entity.prototype.key_set = function() {
  return $APP.cljs.core.to_array($APP.cljs.core.keys(this));
};
datascript.impl.entity.Entity.prototype.entries = function() {
  return $APP.cljs.core.es6_entries_iterator(datascript.impl.entity.js_seq(this));
};
datascript.impl.entity.Entity.prototype.value_set = function() {
  return $APP.cljs.core.to_array($APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.second, datascript.impl.entity.js_seq(this)));
};
datascript.impl.entity.Entity.prototype.toString = function() {
  return $APP.cljs.core.pr_str_STAR_(this);
};
datascript.impl.entity.Entity.prototype.keys = function() {
  return $APP.cljs.core.es6_iterator($APP.cljs.core.keys(this));
};
datascript.impl.entity.Entity.prototype.values = function() {
  return $APP.cljs.core.es6_iterator($APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.second, datascript.impl.entity.js_seq(this)));
};
datascript.impl.entity.Entity.prototype.equiv = function($other$$) {
  return datascript.impl.entity.equiv_entity.cljs$core$IFn$_invoke$arity$2 ? datascript.impl.entity.equiv_entity.cljs$core$IFn$_invoke$arity$2(this, $other$$) : datascript.impl.entity.equiv_entity.call(null, this, $other$$);
};
datascript.impl.entity.Entity.prototype.has = function($attr$$) {
  return this.get($attr$$) != null;
};
datascript.impl.entity.Entity.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this$$$, $attr$$) {
  return datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$3 ? datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$3(this, $attr$$, null) : datascript.impl.entity.lookup_entity.call(null, this, $attr$$, null);
};
datascript.impl.entity.Entity.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this$$$, $attr$$, $not_found$$) {
  return datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$3 ? datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$3(this, $attr$$, $not_found$$) : datascript.impl.entity.lookup_entity.call(null, this, $attr$$, $not_found$$);
};
datascript.impl.entity.Entity.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($_$$, $writer$$, $opts$$) {
  return $APP.cljs.core._pr_writer($APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.deref(this.cache), $APP.cljs$cst$2432$db_SLASH_id, this.eid), $writer$$, $opts$$);
};
datascript.impl.entity.Entity.prototype.cljs$core$ICounted$_count$arity$1 = function($this$$$) {
  datascript.impl.entity.touch.cljs$core$IFn$_invoke$arity$1 ? datascript.impl.entity.touch.cljs$core$IFn$_invoke$arity$1(this) : datascript.impl.entity.touch.call(null, this);
  return $APP.cljs.core.count($APP.cljs.core.deref(this.cache));
};
datascript.impl.entity.Entity.prototype.cljs$core$IHash$_hash$arity$1 = function($this$$$) {
  return datascript.impl.entity.hash_entity.cljs$core$IFn$_invoke$arity$1 ? datascript.impl.entity.hash_entity.cljs$core$IFn$_invoke$arity$1(this) : datascript.impl.entity.hash_entity.call(null, this);
};
datascript.impl.entity.Entity.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this$$$, $o$$) {
  return datascript.impl.entity.equiv_entity.cljs$core$IFn$_invoke$arity$2 ? datascript.impl.entity.equiv_entity.cljs$core$IFn$_invoke$arity$2(this, $o$$) : datascript.impl.entity.equiv_entity.call(null, this, $o$$);
};
datascript.impl.entity.Entity.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this$$$, $k$$) {
  return $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$4521$datascript_DOT_impl_DOT_entity_SLASH_nf, datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$3 ? datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$3(this, $k$$, cljs$cst$4521$datascript_DOT_impl_DOT_entity_SLASH_nf) : datascript.impl.entity.lookup_entity.call(null, this, $k$$, cljs$cst$4521$datascript_DOT_impl_DOT_entity_SLASH_nf));
};
datascript.impl.entity.Entity.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this$$$) {
  datascript.impl.entity.touch.cljs$core$IFn$_invoke$arity$1 ? datascript.impl.entity.touch.cljs$core$IFn$_invoke$arity$1(this) : datascript.impl.entity.touch.call(null, this);
  return $APP.cljs.core.seq($APP.cljs.core.deref(this.cache));
};
datascript.impl.entity.Entity.prototype.call = function($unused__11804__auto__$$) {
  switch(arguments.length - 1) {
    case 1:
      return this.cljs$core$IFn$_invoke$arity$1(arguments[1]);
    case 2:
      return this.cljs$core$IFn$_invoke$arity$2(arguments[1], arguments[2]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length - 1)].join(""));
  }
};
datascript.impl.entity.Entity.prototype.apply = function($self__$$, $args69705$$) {
  return this.call.apply(this, [this].concat($APP.cljs.core.aclone($args69705$$)));
};
datascript.impl.entity.Entity.prototype.cljs$core$IFn$_invoke$arity$1 = function($k$$) {
  return datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$2 ? datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$2(this, $k$$) : datascript.impl.entity.lookup_entity.call(null, this, $k$$);
};
datascript.impl.entity.Entity.prototype.cljs$core$IFn$_invoke$arity$2 = function($k$$, $not_found$$) {
  return datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$3 ? datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$3(this, $k$$, $not_found$$) : datascript.impl.entity.lookup_entity.call(null, this, $k$$, $not_found$$);
};
datascript.impl.entity.Entity.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2542$db, cljs$cst$4522$eid, cljs$cst$4523$touched, $APP.cljs$cst$2184$cache], null);
};
datascript.impl.entity.Entity.cljs$lang$type = !0;
datascript.impl.entity.Entity.cljs$lang$ctorStr = "datascript.impl.entity/Entity";
datascript.impl.entity.Entity.cljs$lang$ctorPrWriter = function($this__5310__auto__$$, $writer__5311__auto__$$, $opt__5312__auto__$$) {
  return $APP.cljs.core._write($writer__5311__auto__$$, "datascript.impl.entity/Entity");
};
datascript.impl.entity.__GT_Entity = function($db$$, $eid$$, $touched$$, $cache$$) {
  return new datascript.impl.entity.Entity($db$$, $eid$$, $touched$$, $cache$$);
};
datascript.impl.entity.entity_QMARK_ = function($x$$) {
  return $x$$ instanceof datascript.impl.entity.Entity;
};
datascript.impl.entity.Entity.prototype[$APP.cljs.core.ITER_SYMBOL] = function() {
  return this.entries();
};
datascript.impl.entity.equiv_entity = function($this$$$, $that$$) {
  return $that$$ instanceof datascript.impl.entity.Entity && $this$$$.db === $that$$.db && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($this$$$.eid, $that$$.eid);
};
datascript.impl.entity.hash_entity = function($e$$) {
  return datascript.db.combine_hashes($APP.cljs.core.hash($e$$.eid), $APP.goog.getUid($e$$.db));
};
datascript.impl.entity.lookup_entity = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$2 = function($this$$$, $attr$$) {
  return datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$3($this$$$, $attr$$, null);
};
datascript.impl.entity.lookup_entity.cljs$core$IFn$_invoke$arity$3 = function($this$$$, $attr$$, $not_found$jscomp$92_value$$) {
  if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($attr$$, $APP.cljs$cst$2432$db_SLASH_id)) {
    return $this$$$.eid;
  }
  if (datascript.db.reverse_ref_QMARK_($attr$$)) {
    return datascript.impl.entity._lookup_backwards($this$$$.db, $this$$$.eid, datascript.db.reverse_ref($attr$$), $not_found$jscomp$92_value$$);
  }
  var $fexpr__69879$jscomp$inline_6838_temp__5827__auto__$jscomp$14_temp__5827__auto____$1$$ = $APP.cljs.core.deref($this$$$.cache);
  $fexpr__69879$jscomp$inline_6838_temp__5827__auto__$jscomp$14_temp__5827__auto____$1$$ = $fexpr__69879$jscomp$inline_6838_temp__5827__auto__$jscomp$14_temp__5827__auto____$1$$.cljs$core$IFn$_invoke$arity$1 ? $fexpr__69879$jscomp$inline_6838_temp__5827__auto__$jscomp$14_temp__5827__auto____$1$$.cljs$core$IFn$_invoke$arity$1($attr$$) : $fexpr__69879$jscomp$inline_6838_temp__5827__auto__$jscomp$14_temp__5827__auto____$1$$.call(null, $attr$$);
  if ($fexpr__69879$jscomp$inline_6838_temp__5827__auto__$jscomp$14_temp__5827__auto____$1$$ == null) {
    if ($APP.cljs.core.truth_($APP.cljs.core.deref($this$$$.touched))) {
      return $not_found$jscomp$92_value$$;
    }
    $fexpr__69879$jscomp$inline_6838_temp__5827__auto__$jscomp$14_temp__5827__auto____$1$$ = $APP.cljs.core.not_empty(datascript.db._search($this$$$.db, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$this$$$.eid, $attr$$], null)));
    if ($fexpr__69879$jscomp$inline_6838_temp__5827__auto__$jscomp$14_temp__5827__auto____$1$$ == null) {
      return $not_found$jscomp$92_value$$;
    }
    $not_found$jscomp$92_value$$ = datascript.impl.entity.entity_attr($this$$$.db, $attr$$, $fexpr__69879$jscomp$inline_6838_temp__5827__auto__$jscomp$14_temp__5827__auto____$1$$);
    $APP.cljs.core.vreset_BANG_($this$$$.cache, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.deref($this$$$.cache), $attr$$, $not_found$jscomp$92_value$$));
    return $not_found$jscomp$92_value$$;
  }
  return $fexpr__69879$jscomp$inline_6838_temp__5827__auto__$jscomp$14_temp__5827__auto____$1$$;
};
datascript.impl.entity.lookup_entity.cljs$lang$maxFixedArity = 3;
datascript.impl.entity.touch_components = function($db$$, $a__GT_v$$) {
  return $APP.cljs.core.reduce_kv(function($acc$$, $a$$, $v$$) {
    return $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($acc$$, $a$$, datascript.db.component_QMARK_($db$$, $a$$) ? datascript.db.multival_QMARK_($db$$, $a$$) ? $APP.cljs.core.set($APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(datascript.impl.entity.touch, $v$$)) : datascript.impl.entity.touch.cljs$core$IFn$_invoke$arity$1 ? datascript.impl.entity.touch.cljs$core$IFn$_invoke$arity$1($v$$) : datascript.impl.entity.touch.call(null, $v$$) : $v$$);
  }, $APP.cljs.core.PersistentArrayMap.EMPTY, $a__GT_v$$);
};
datascript.impl.entity.datoms__GT_cache = function($db$$, $datoms$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($acc$$, $part$$) {
    var $a$$ = $APP.cljs$cst$2200$a.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first($part$$));
    return $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($acc$$, $a$$, datascript.impl.entity.entity_attr($db$$, $a$$, $part$$));
  }, $APP.cljs.core.PersistentArrayMap.EMPTY, $APP.cljs.core.partition_by.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2200$a, $datoms$$));
};
datascript.impl.entity.touch = function($e$$) {
  if ($e$$ != null) {
    if (!$APP.cljs.core.truth_($APP.cljs.core.deref($e$$.touched))) {
      var $temp__5825__auto___69964$$ = $APP.cljs.core.not_empty(datascript.db._search($e$$.db, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$e$$.eid], null)));
      $APP.cljs.core.truth_($temp__5825__auto___69964$$) && ($APP.cljs.core.vreset_BANG_($e$$.cache, datascript.impl.entity.touch_components($e$$.db, datascript.impl.entity.datoms__GT_cache($e$$.db, $temp__5825__auto___69964$$))), $APP.cljs.core.vreset_BANG_($e$$.touched, !0));
    }
    return $e$$;
  }
  return null;
};
$APP.goog.exportSymbol("datascript.impl.entity.Entity", datascript.impl.entity.Entity);
datascript.built_ins = {};
datascript.built_ins._differ_QMARK_ = function($var_args$$) {
  for (var $args__5755__auto__$jscomp$276_argseq__5756__auto__$$ = [], $len__5749__auto___70037$$ = arguments.length, $i__5750__auto___70038$$ = 0;;) {
    if ($i__5750__auto___70038$$ < $len__5749__auto___70037$$) {
      $args__5755__auto__$jscomp$276_argseq__5756__auto__$$.push(arguments[$i__5750__auto___70038$$]), $i__5750__auto___70038$$ += 1;
    } else {
      break;
    }
  }
  $args__5755__auto__$jscomp$276_argseq__5756__auto__$$ = 0 < $args__5755__auto__$jscomp$276_argseq__5756__auto__$$.length ? new $APP.cljs.core.IndexedSeq($args__5755__auto__$jscomp$276_argseq__5756__auto__$$.slice(0), 0, null) : null;
  return datascript.built_ins._differ_QMARK_.cljs$core$IFn$_invoke$arity$variadic($args__5755__auto__$jscomp$276_argseq__5756__auto__$$);
};
datascript.built_ins._differ_QMARK_.cljs$core$IFn$_invoke$arity$variadic = function($xs$$) {
  var $l$$ = $APP.cljs.core.count($xs$$);
  return $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.take.cljs$core$IFn$_invoke$arity$2($l$$ / 2, $xs$$), $APP.cljs.core.drop.cljs$core$IFn$_invoke$arity$2($l$$ / 2, $xs$$));
};
datascript.built_ins._differ_QMARK_.cljs$lang$maxFixedArity = 0;
datascript.built_ins._differ_QMARK_.cljs$lang$applyTo = function($seq69969$$) {
  return this.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.seq($seq69969$$));
};
datascript.built_ins._get_else = function($db$jscomp$144_temp__5827__auto__$$, $e$$, $a$$, $else_val$$) {
  if ($else_val$$ == null) {
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("get-else: nil default value is not supported", new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$1404$error, cljs$cst$4524$query_SLASH_where], null));
  }
  $db$jscomp$144_temp__5827__auto__$$ = $APP.cljs.core.first(datascript.db._search($db$jscomp$144_temp__5827__auto__$$, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [datascript.db.entid($db$jscomp$144_temp__5827__auto__$$, $e$$), $a$$], null)));
  return $db$jscomp$144_temp__5827__auto__$$ == null ? $else_val$$ : $APP.cljs$cst$1438$v.cljs$core$IFn$_invoke$arity$1($db$jscomp$144_temp__5827__auto__$$);
};
datascript.built_ins._get_some = function($var_args$$) {
  for (var $args__5755__auto__$jscomp$277_argseq__5756__auto__$$ = [], $len__5749__auto___70044$$ = arguments.length, $i__5750__auto___70045$$ = 0;;) {
    if ($i__5750__auto___70045$$ < $len__5749__auto___70044$$) {
      $args__5755__auto__$jscomp$277_argseq__5756__auto__$$.push(arguments[$i__5750__auto___70045$$]), $i__5750__auto___70045$$ += 1;
    } else {
      break;
    }
  }
  $args__5755__auto__$jscomp$277_argseq__5756__auto__$$ = 2 < $args__5755__auto__$jscomp$277_argseq__5756__auto__$$.length ? new $APP.cljs.core.IndexedSeq($args__5755__auto__$jscomp$277_argseq__5756__auto__$$.slice(2), 0, null) : null;
  return datascript.built_ins._get_some.cljs$core$IFn$_invoke$arity$variadic(arguments[0], arguments[1], $args__5755__auto__$jscomp$277_argseq__5756__auto__$$);
};
datascript.built_ins._get_some.cljs$core$IFn$_invoke$arity$variadic = function($db$$, $e$$, $as$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($_$jscomp$1911_temp__5829__auto__$$, $a$$) {
    $_$jscomp$1911_temp__5829__auto__$$ = $APP.cljs.core.first(datascript.db._search($db$$, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [datascript.db.entid($db$$, $e$$), $a$$], null)));
    return $_$jscomp$1911_temp__5829__auto__$$ == null ? null : $APP.cljs.core.reduced(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2200$a.cljs$core$IFn$_invoke$arity$1($_$jscomp$1911_temp__5829__auto__$$), $APP.cljs$cst$1438$v.cljs$core$IFn$_invoke$arity$1($_$jscomp$1911_temp__5829__auto__$$)], null));
  }, null, $as$$);
};
datascript.built_ins._get_some.cljs$lang$maxFixedArity = 2;
datascript.built_ins._get_some.cljs$lang$applyTo = function($G__69972_seq69970$$) {
  var $G__69971$$ = $APP.cljs.core.first($G__69972_seq69970$$), $seq69970__$1_seq69970__$2$$ = $APP.cljs.core.next($G__69972_seq69970$$);
  $G__69972_seq69970$$ = $APP.cljs.core.first($seq69970__$1_seq69970__$2$$);
  $seq69970__$1_seq69970__$2$$ = $APP.cljs.core.next($seq69970__$1_seq69970__$2$$);
  return this.cljs$core$IFn$_invoke$arity$variadic($G__69971$$, $G__69972_seq69970$$, $seq69970__$1_seq69970__$2$$);
};
datascript.built_ins._missing_QMARK_ = function($db$$, $e$$, $a$$) {
  return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2(datascript.impl.entity.entity($db$$, $e$$), $a$$) == null;
};
datascript.built_ins.and_fn = function($var_args$$) {
  for (var $args__5755__auto__$jscomp$278_argseq__5756__auto__$$ = [], $len__5749__auto___70055$$ = arguments.length, $i__5750__auto___70057$$ = 0;;) {
    if ($i__5750__auto___70057$$ < $len__5749__auto___70055$$) {
      $args__5755__auto__$jscomp$278_argseq__5756__auto__$$.push(arguments[$i__5750__auto___70057$$]), $i__5750__auto___70057$$ += 1;
    } else {
      break;
    }
  }
  $args__5755__auto__$jscomp$278_argseq__5756__auto__$$ = 0 < $args__5755__auto__$jscomp$278_argseq__5756__auto__$$.length ? new $APP.cljs.core.IndexedSeq($args__5755__auto__$jscomp$278_argseq__5756__auto__$$.slice(0), 0, null) : null;
  return datascript.built_ins.and_fn.cljs$core$IFn$_invoke$arity$variadic($args__5755__auto__$jscomp$278_argseq__5756__auto__$$);
};
datascript.built_ins.and_fn.cljs$core$IFn$_invoke$arity$variadic = function($args$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($a$$, $b$$) {
    return $APP.cljs.core.truth_($b$$) ? $b$$ : $APP.cljs.core.reduced($b$$);
  }, !0, $args$$);
};
datascript.built_ins.and_fn.cljs$lang$maxFixedArity = 0;
datascript.built_ins.and_fn.cljs$lang$applyTo = function($seq69974$$) {
  return this.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.seq($seq69974$$));
};
datascript.built_ins.or_fn = function($var_args$$) {
  for (var $args__5755__auto__$jscomp$279_argseq__5756__auto__$$ = [], $len__5749__auto___70061$$ = arguments.length, $i__5750__auto___70062$$ = 0;;) {
    if ($i__5750__auto___70062$$ < $len__5749__auto___70061$$) {
      $args__5755__auto__$jscomp$279_argseq__5756__auto__$$.push(arguments[$i__5750__auto___70062$$]), $i__5750__auto___70062$$ += 1;
    } else {
      break;
    }
  }
  $args__5755__auto__$jscomp$279_argseq__5756__auto__$$ = 0 < $args__5755__auto__$jscomp$279_argseq__5756__auto__$$.length ? new $APP.cljs.core.IndexedSeq($args__5755__auto__$jscomp$279_argseq__5756__auto__$$.slice(0), 0, null) : null;
  return datascript.built_ins.or_fn.cljs$core$IFn$_invoke$arity$variadic($args__5755__auto__$jscomp$279_argseq__5756__auto__$$);
};
datascript.built_ins.or_fn.cljs$core$IFn$_invoke$arity$variadic = function($args$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($a$$, $b$$) {
    return $APP.cljs.core.truth_($b$$) ? $APP.cljs.core.reduced($b$$) : $b$$;
  }, null, $args$$);
};
datascript.built_ins.or_fn.cljs$lang$maxFixedArity = 0;
datascript.built_ins.or_fn.cljs$lang$applyTo = function($seq69975$$) {
  return this.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.seq($seq69975$$));
};
datascript.built_ins.less = function($var_args$$) {
  switch(arguments.length) {
    case 1:
      return datascript.built_ins.less.cljs$core$IFn$_invoke$arity$1(arguments[0]);
    case 2:
      return datascript.built_ins.less.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    default:
      for (var $args_arr__5774__auto__$jscomp$88_argseq__5775__auto__$$ = [], $len__5749__auto___70067$$ = arguments.length, $i__5750__auto___70068$$ = 0;;) {
        if ($i__5750__auto___70068$$ < $len__5749__auto___70067$$) {
          $args_arr__5774__auto__$jscomp$88_argseq__5775__auto__$$.push(arguments[$i__5750__auto___70068$$]), $i__5750__auto___70068$$ += 1;
        } else {
          break;
        }
      }
      $args_arr__5774__auto__$jscomp$88_argseq__5775__auto__$$ = 2 < $args_arr__5774__auto__$jscomp$88_argseq__5775__auto__$$.length ? new $APP.cljs.core.IndexedSeq($args_arr__5774__auto__$jscomp$88_argseq__5775__auto__$$.slice(2), 0, null) : null;
      return datascript.built_ins.less.cljs$core$IFn$_invoke$arity$variadic(arguments[0], arguments[1], $args_arr__5774__auto__$jscomp$88_argseq__5775__auto__$$);
  }
};
datascript.built_ins.less.cljs$core$IFn$_invoke$arity$1 = function($x$$) {
  return !0;
};
datascript.built_ins.less.cljs$core$IFn$_invoke$arity$2 = function($x$$, $y$$) {
  return datascript.db.value_compare($x$$, $y$$) < 0;
};
datascript.built_ins.less.cljs$core$IFn$_invoke$arity$variadic = function($G__70073_x$$, $G__70074_y$$, $G__70075_more$$) {
  for (;;) {
    if (datascript.built_ins.less.cljs$core$IFn$_invoke$arity$2($G__70073_x$$, $G__70074_y$$)) {
      if ($APP.cljs.core.next($G__70075_more$$)) {
        $G__70073_x$$ = $G__70074_y$$;
        $G__70074_y$$ = $APP.cljs.core.first($G__70075_more$$);
        $G__70075_more$$ = $APP.cljs.core.next($G__70075_more$$);
        continue;
      } else {
        return datascript.built_ins.less.cljs$core$IFn$_invoke$arity$2($G__70074_y$$, $APP.cljs.core.first($G__70075_more$$));
      }
    } else {
      return !1;
    }
    break;
  }
};
datascript.built_ins.less.cljs$lang$applyTo = function($G__69979_seq69977$$) {
  var $G__69978$$ = $APP.cljs.core.first($G__69979_seq69977$$), $seq69977__$1_seq69977__$2$$ = $APP.cljs.core.next($G__69979_seq69977$$);
  $G__69979_seq69977$$ = $APP.cljs.core.first($seq69977__$1_seq69977__$2$$);
  $seq69977__$1_seq69977__$2$$ = $APP.cljs.core.next($seq69977__$1_seq69977__$2$$);
  return this.cljs$core$IFn$_invoke$arity$variadic($G__69978$$, $G__69979_seq69977$$, $seq69977__$1_seq69977__$2$$);
};
datascript.built_ins.less.cljs$lang$maxFixedArity = 2;
datascript.built_ins.greater = function($var_args$$) {
  switch(arguments.length) {
    case 1:
      return datascript.built_ins.greater.cljs$core$IFn$_invoke$arity$1(arguments[0]);
    case 2:
      return datascript.built_ins.greater.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    default:
      for (var $args_arr__5774__auto__$jscomp$89_argseq__5775__auto__$$ = [], $len__5749__auto___70077$$ = arguments.length, $i__5750__auto___70078$$ = 0;;) {
        if ($i__5750__auto___70078$$ < $len__5749__auto___70077$$) {
          $args_arr__5774__auto__$jscomp$89_argseq__5775__auto__$$.push(arguments[$i__5750__auto___70078$$]), $i__5750__auto___70078$$ += 1;
        } else {
          break;
        }
      }
      $args_arr__5774__auto__$jscomp$89_argseq__5775__auto__$$ = 2 < $args_arr__5774__auto__$jscomp$89_argseq__5775__auto__$$.length ? new $APP.cljs.core.IndexedSeq($args_arr__5774__auto__$jscomp$89_argseq__5775__auto__$$.slice(2), 0, null) : null;
      return datascript.built_ins.greater.cljs$core$IFn$_invoke$arity$variadic(arguments[0], arguments[1], $args_arr__5774__auto__$jscomp$89_argseq__5775__auto__$$);
  }
};
datascript.built_ins.greater.cljs$core$IFn$_invoke$arity$1 = function($x$$) {
  return !0;
};
datascript.built_ins.greater.cljs$core$IFn$_invoke$arity$2 = function($x$$, $y$$) {
  return datascript.db.value_compare($x$$, $y$$) > 0;
};
datascript.built_ins.greater.cljs$core$IFn$_invoke$arity$variadic = function($G__70084_x$$, $G__70085_y$$, $G__70086_more$$) {
  for (;;) {
    if (datascript.built_ins.greater.cljs$core$IFn$_invoke$arity$2($G__70084_x$$, $G__70085_y$$)) {
      if ($APP.cljs.core.next($G__70086_more$$)) {
        $G__70084_x$$ = $G__70085_y$$;
        $G__70085_y$$ = $APP.cljs.core.first($G__70086_more$$);
        $G__70086_more$$ = $APP.cljs.core.next($G__70086_more$$);
        continue;
      } else {
        return datascript.built_ins.greater.cljs$core$IFn$_invoke$arity$2($G__70085_y$$, $APP.cljs.core.first($G__70086_more$$));
      }
    } else {
      return !1;
    }
    break;
  }
};
datascript.built_ins.greater.cljs$lang$applyTo = function($G__69984_seq69982$$) {
  var $G__69983$$ = $APP.cljs.core.first($G__69984_seq69982$$), $seq69982__$1_seq69982__$2$$ = $APP.cljs.core.next($G__69984_seq69982$$);
  $G__69984_seq69982$$ = $APP.cljs.core.first($seq69982__$1_seq69982__$2$$);
  $seq69982__$1_seq69982__$2$$ = $APP.cljs.core.next($seq69982__$1_seq69982__$2$$);
  return this.cljs$core$IFn$_invoke$arity$variadic($G__69983$$, $G__69984_seq69982$$, $seq69982__$1_seq69982__$2$$);
};
datascript.built_ins.greater.cljs$lang$maxFixedArity = 2;
datascript.built_ins.less_equal = function($var_args$$) {
  switch(arguments.length) {
    case 1:
      return datascript.built_ins.less_equal.cljs$core$IFn$_invoke$arity$1(arguments[0]);
    case 2:
      return datascript.built_ins.less_equal.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    default:
      for (var $args_arr__5774__auto__$jscomp$90_argseq__5775__auto__$$ = [], $len__5749__auto___70088$$ = arguments.length, $i__5750__auto___70089$$ = 0;;) {
        if ($i__5750__auto___70089$$ < $len__5749__auto___70088$$) {
          $args_arr__5774__auto__$jscomp$90_argseq__5775__auto__$$.push(arguments[$i__5750__auto___70089$$]), $i__5750__auto___70089$$ += 1;
        } else {
          break;
        }
      }
      $args_arr__5774__auto__$jscomp$90_argseq__5775__auto__$$ = 2 < $args_arr__5774__auto__$jscomp$90_argseq__5775__auto__$$.length ? new $APP.cljs.core.IndexedSeq($args_arr__5774__auto__$jscomp$90_argseq__5775__auto__$$.slice(2), 0, null) : null;
      return datascript.built_ins.less_equal.cljs$core$IFn$_invoke$arity$variadic(arguments[0], arguments[1], $args_arr__5774__auto__$jscomp$90_argseq__5775__auto__$$);
  }
};
datascript.built_ins.less_equal.cljs$core$IFn$_invoke$arity$1 = function($x$$) {
  return !0;
};
datascript.built_ins.less_equal.cljs$core$IFn$_invoke$arity$2 = function($x$$, $y$$) {
  return !(datascript.db.value_compare($x$$, $y$$) > 0);
};
datascript.built_ins.less_equal.cljs$core$IFn$_invoke$arity$variadic = function($G__70093_x$$, $G__70094_y$$, $G__70095_more$$) {
  for (;;) {
    if (datascript.built_ins.less_equal.cljs$core$IFn$_invoke$arity$2($G__70093_x$$, $G__70094_y$$)) {
      if ($APP.cljs.core.next($G__70095_more$$)) {
        $G__70093_x$$ = $G__70094_y$$;
        $G__70094_y$$ = $APP.cljs.core.first($G__70095_more$$);
        $G__70095_more$$ = $APP.cljs.core.next($G__70095_more$$);
        continue;
      } else {
        return datascript.built_ins.less_equal.cljs$core$IFn$_invoke$arity$2($G__70094_y$$, $APP.cljs.core.first($G__70095_more$$));
      }
    } else {
      return !1;
    }
    break;
  }
};
datascript.built_ins.less_equal.cljs$lang$applyTo = function($G__69990_seq69988$$) {
  var $G__69989$$ = $APP.cljs.core.first($G__69990_seq69988$$), $seq69988__$1_seq69988__$2$$ = $APP.cljs.core.next($G__69990_seq69988$$);
  $G__69990_seq69988$$ = $APP.cljs.core.first($seq69988__$1_seq69988__$2$$);
  $seq69988__$1_seq69988__$2$$ = $APP.cljs.core.next($seq69988__$1_seq69988__$2$$);
  return this.cljs$core$IFn$_invoke$arity$variadic($G__69989$$, $G__69990_seq69988$$, $seq69988__$1_seq69988__$2$$);
};
datascript.built_ins.less_equal.cljs$lang$maxFixedArity = 2;
datascript.built_ins.greater_equal = function($var_args$$) {
  switch(arguments.length) {
    case 1:
      return datascript.built_ins.greater_equal.cljs$core$IFn$_invoke$arity$1(arguments[0]);
    case 2:
      return datascript.built_ins.greater_equal.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    default:
      for (var $args_arr__5774__auto__$jscomp$91_argseq__5775__auto__$$ = [], $len__5749__auto___70099$$ = arguments.length, $i__5750__auto___70100$$ = 0;;) {
        if ($i__5750__auto___70100$$ < $len__5749__auto___70099$$) {
          $args_arr__5774__auto__$jscomp$91_argseq__5775__auto__$$.push(arguments[$i__5750__auto___70100$$]), $i__5750__auto___70100$$ += 1;
        } else {
          break;
        }
      }
      $args_arr__5774__auto__$jscomp$91_argseq__5775__auto__$$ = 2 < $args_arr__5774__auto__$jscomp$91_argseq__5775__auto__$$.length ? new $APP.cljs.core.IndexedSeq($args_arr__5774__auto__$jscomp$91_argseq__5775__auto__$$.slice(2), 0, null) : null;
      return datascript.built_ins.greater_equal.cljs$core$IFn$_invoke$arity$variadic(arguments[0], arguments[1], $args_arr__5774__auto__$jscomp$91_argseq__5775__auto__$$);
  }
};
datascript.built_ins.greater_equal.cljs$core$IFn$_invoke$arity$1 = function($x$$) {
  return !0;
};
datascript.built_ins.greater_equal.cljs$core$IFn$_invoke$arity$2 = function($x$$, $y$$) {
  return !(datascript.db.value_compare($x$$, $y$$) < 0);
};
datascript.built_ins.greater_equal.cljs$core$IFn$_invoke$arity$variadic = function($G__70107_x$$, $G__70108_y$$, $G__70109_more$$) {
  for (;;) {
    if (datascript.built_ins.greater_equal.cljs$core$IFn$_invoke$arity$2($G__70107_x$$, $G__70108_y$$)) {
      if ($APP.cljs.core.next($G__70109_more$$)) {
        $G__70107_x$$ = $G__70108_y$$;
        $G__70108_y$$ = $APP.cljs.core.first($G__70109_more$$);
        $G__70109_more$$ = $APP.cljs.core.next($G__70109_more$$);
        continue;
      } else {
        return datascript.built_ins.greater_equal.cljs$core$IFn$_invoke$arity$2($G__70108_y$$, $APP.cljs.core.first($G__70109_more$$));
      }
    } else {
      return !1;
    }
    break;
  }
};
datascript.built_ins.greater_equal.cljs$lang$applyTo = function($G__69998_seq69996$$) {
  var $G__69997$$ = $APP.cljs.core.first($G__69998_seq69996$$), $seq69996__$1_seq69996__$2$$ = $APP.cljs.core.next($G__69998_seq69996$$);
  $G__69998_seq69996$$ = $APP.cljs.core.first($seq69996__$1_seq69996__$2$$);
  $seq69996__$1_seq69996__$2$$ = $APP.cljs.core.next($seq69996__$1_seq69996__$2$$);
  return this.cljs$core$IFn$_invoke$arity$variadic($G__69997$$, $G__69998_seq69996$$, $seq69996__$1_seq69996__$2$$);
};
datascript.built_ins.greater_equal.cljs$lang$maxFixedArity = 2;
datascript.built_ins.query_fns = $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$844$true_QMARK_, $APP.cljs$cst$408$and, $APP.cljs$cst$869$odd_QMARK_, cljs$cst$4525$get_else, $APP.cljs$cst$682$_GT__EQ_, $APP.cljs$cst$879$print_str, $APP.cljs$cst$662$_GT_, $APP.cljs$cst$25$count, cljs$cst$4526$get_some, $APP.cljs$cst$674$nil_QMARK_, cljs$cst$4527$untuple, $APP.cljs$cst$689$inc, $APP.cljs$cst$220$_SLASH_, $APP.cljs$cst$657$quot, $APP.cljs$cst$939$false_QMARK_, $APP.cljs$cst$946$not, $APP.cljs$cst$961$identity, 
cljs$cst$4528$_differ_QMARK_, $APP.cljs$cst$2379$tuple, $APP.cljs$cst$974$re_seq, $APP.cljs$cst$648$_LT__EQ_, cljs$cst$4529$clojure_DOT_string_SLASH_starts_with_QMARK_, $APP.cljs$cst$626$_EQ_, $APP.cljs$cst$651$min, $APP.cljs$cst$690$_PLUS_, $APP.cljs$cst$7$name, cljs$cst$4530$missing_QMARK_, cljs$cst$4531$ground, $APP.cljs$cst$1015$rand_int, $APP.cljs$cst$1016$complement, $APP.cljs$cst$696$_EQ__EQ_, $APP.cljs$cst$99$hash_map, $APP.cljs$cst$698$compare, $APP.cljs$cst$1038$range, $APP.cljs$cst$695$max, 
$APP.cljs$cst$1045$empty_QMARK_, $APP.cljs$cst$650$_STAR_, $APP.cljs$cst$1049$pr_str, $APP.cljs$cst$2268$println_str, $APP.cljs$cst$20$meta, $APP.cljs$cst$670$zero_QMARK_, cljs$cst$4532$_BANG__EQ_, $APP.cljs$cst$1079$prn_str, $APP.cljs$cst$629$dec, $APP.cljs$cst$1099$re_pattern, $APP.cljs$cst$1104$vector, $APP.cljs$cst$1108$not_EQ_, $APP.cljs$cst$435$get, $APP.cljs$cst$8$str, $APP.cljs$cst$630$_LT_, $APP.cljs$cst$382$namespace, $APP.cljs$cst$1126$keyword, $APP.cljs$cst$668$_, $APP.cljs$cst$1134$some_QMARK_, 
$APP.cljs$cst$636$pos_QMARK_, $APP.cljs$cst$1136$rand, $APP.cljs$cst$1137$re_matches, $APP.cljs$cst$1143$list, $APP.cljs$cst$1152$contains_QMARK_, cljs$cst$4533$clojure_DOT_string_SLASH_ends_with_QMARK_, $APP.cljs$cst$1170$subs, $APP.cljs$cst$1173$mod, cljs$cst$4534$clojure_DOT_string_SLASH_includes_QMARK_, $APP.cljs$cst$1189$array_map, $APP.cljs$cst$672$rem, $APP.cljs$cst$1205$even_QMARK_, $APP.cljs$cst$420$type, $APP.cljs$cst$641$neg_QMARK_, cljs$cst$4535$clojure_DOT_string_SLASH_blank_QMARK_, 
$APP.cljs$cst$1215$not_empty, $APP.cljs$cst$403$or, $APP.cljs$cst$678$identical_QMARK_, $APP.cljs$cst$1228$set, $APP.cljs$cst$1232$re_find], [$APP.cljs.core.true_QMARK_, datascript.built_ins.and_fn, $APP.cljs.core.odd_QMARK_, datascript.built_ins._get_else, datascript.built_ins.greater_equal, $APP.cljs.core.print_str, datascript.built_ins.greater, $APP.cljs.core.count, datascript.built_ins._get_some, $APP.cljs.core.nil_QMARK_, $APP.cljs.core.identity, $APP.cljs.core.inc, $APP.cljs.core._SLASH_, $APP.cljs.core.quot, 
$APP.cljs.core.false_QMARK_, $APP.cljs.core.not, $APP.cljs.core.identity, datascript.built_ins._differ_QMARK_, $APP.cljs.core.vector, $APP.cljs.core.re_seq, datascript.built_ins.less_equal, $APP.clojure.string.starts_with_QMARK_, $APP.cljs.core._EQ_, $APP.cljs.core.min, $APP.cljs.core._PLUS_, $APP.cljs.core.name, datascript.built_ins._missing_QMARK_, $APP.cljs.core.identity, $APP.cljs.core.rand_int, $APP.cljs.core.complement, $APP.cljs.core._EQ__EQ_, $APP.cljs.core.hash_map, $APP.cljs.core.compare, 
$APP.cljs.core.range, $APP.cljs.core.max, $APP.cljs.core.empty_QMARK_, $APP.cljs.core._STAR_, $APP.cljs.core.pr_str, $APP.cljs.core.println_str, $APP.cljs.core.meta, $APP.cljs.core.zero_QMARK_, $APP.cljs.core.not_EQ_, $APP.cljs.core.prn_str, $APP.cljs.core.dec, $APP.cljs.core.re_pattern, $APP.cljs.core.vector, $APP.cljs.core.not_EQ_, $APP.cljs.core.get, $APP.cljs.core.str, datascript.built_ins.less, $APP.cljs.core.namespace, $APP.cljs.core.keyword, $APP.cljs.core._, $APP.cljs.core.some_QMARK_, $APP.cljs.core.pos_QMARK_, 
$APP.cljs.core.rand, $APP.cljs.core.re_matches, $APP.cljs.core.list, $APP.cljs.core.contains_QMARK_, $APP.clojure.string.ends_with_QMARK_, $APP.cljs.core.subs, $APP.cljs.core.mod, $APP.clojure.string.includes_QMARK_, $APP.cljs.core.array_map, $APP.cljs.core.rem, $APP.cljs.core.even_QMARK_, $APP.cljs.core.type, $APP.cljs.core.neg_QMARK_, $APP.clojure.string.blank_QMARK_, $APP.cljs.core.not_empty, datascript.built_ins.or_fn, $APP.cljs.core.identical_QMARK_, $APP.cljs.core.set, $APP.cljs.core.re_find]);
datascript.built_ins.aggregate_sum = function($coll$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._PLUS_, 0, $coll$$);
};
datascript.built_ins.aggregate_avg = function($coll$$) {
  return datascript.built_ins.aggregate_sum($coll$$) / $APP.cljs.core.count($coll$$);
};
datascript.built_ins.aggregate_median = function($coll$jscomp$923_size$$) {
  var $terms$$ = $APP.cljs.core.sort.cljs$core$IFn$_invoke$arity$1($coll$jscomp$923_size$$);
  $coll$jscomp$923_size$$ = $APP.cljs.core.count($coll$jscomp$923_size$$);
  var $med$$ = $coll$jscomp$923_size$$ >> 1, $G__70000$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2($terms$$, $med$$);
  return $APP.cljs.core.even_QMARK_($coll$jscomp$923_size$$) ? ($G__70000$$ + $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2($terms$$, $med$$ - 1)) / 2 : $G__70000$$;
};
datascript.built_ins.aggregate_variance = function($coll$$) {
  var $mean$$ = datascript.built_ins.aggregate_avg($coll$$);
  return datascript.built_ins.aggregate_sum(function() {
    return function $datascript$built_ins$aggregate_variance_$_iter__70002$$($s__70003$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (;;) {
          var $s__70003__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__70003$$);
          if ($s__70003__$2_temp__5825__auto__$$) {
            if ($APP.cljs.core.chunked_seq_QMARK_($s__70003__$2_temp__5825__auto__$$)) {
              var $JSCompiler_inline_result$jscomp$1497_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__70003__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1497_c__5501__auto__$$), $b__70005_delta$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
              a: {
                for (var $i__70004$$ = 0;;) {
                  if ($i__70004$$ < $size__5502__auto__$$) {
                    var $delta$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1497_c__5501__auto__$$, $i__70004$$) - $mean$$;
                    $APP.cljs.core.chunk_append($b__70005_delta$$, $delta$$ * $delta$$);
                    $i__70004$$ += 1;
                  } else {
                    $JSCompiler_inline_result$jscomp$1497_c__5501__auto__$$ = !0;
                    break a;
                  }
                }
                $JSCompiler_inline_result$jscomp$1497_c__5501__auto__$$ = void 0;
              }
              return $JSCompiler_inline_result$jscomp$1497_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__70005_delta$$), $datascript$built_ins$aggregate_variance_$_iter__70002$$($APP.cljs.core.chunk_rest($s__70003__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__70005_delta$$), null);
            }
            $b__70005_delta$$ = $APP.cljs.core.first($s__70003__$2_temp__5825__auto__$$) - $mean$$;
            return $APP.cljs.core.cons($b__70005_delta$$ * $b__70005_delta$$, $datascript$built_ins$aggregate_variance_$_iter__70002$$($APP.cljs.core.rest($s__70003__$2_temp__5825__auto__$$)));
          }
          return null;
        }
      }, null, null);
    }($coll$$);
  }()) / $APP.cljs.core.count($coll$$);
};
datascript.built_ins.aggregate_stddev = function($coll$$) {
  return Math.sqrt(datascript.built_ins.aggregate_variance($coll$$));
};
datascript.built_ins.aggregate_min = function($var_args$$) {
  switch(arguments.length) {
    case 1:
      return datascript.built_ins.aggregate_min.cljs$core$IFn$_invoke$arity$1(arguments[0]);
    case 2:
      return datascript.built_ins.aggregate_min.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.built_ins.aggregate_min.cljs$core$IFn$_invoke$arity$1 = function($coll$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($acc$$, $x$$) {
    return $APP.cljs.core.compare($x$$, $acc$$) < 0 ? $x$$ : $acc$$;
  }, $APP.cljs.core.first($coll$$), $APP.cljs.core.next($coll$$));
};
datascript.built_ins.aggregate_min.cljs$core$IFn$_invoke$arity$2 = function($n$$, $coll$$) {
  return $APP.cljs.core.vec($APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($acc$$, $x$$) {
    return $APP.cljs.core.count($acc$$) < $n$$ ? $APP.cljs.core.sort.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.compare, $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($acc$$, $x$$)) : $APP.cljs.core.compare($x$$, $APP.cljs.core.last($acc$$)) < 0 ? $APP.cljs.core.sort.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.compare, $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.butlast($acc$$), $x$$)) : $acc$$;
  }, $APP.cljs.core.PersistentVector.EMPTY, $coll$$));
};
datascript.built_ins.aggregate_min.cljs$lang$maxFixedArity = 2;
datascript.built_ins.aggregate_max = function($var_args$$) {
  switch(arguments.length) {
    case 1:
      return datascript.built_ins.aggregate_max.cljs$core$IFn$_invoke$arity$1(arguments[0]);
    case 2:
      return datascript.built_ins.aggregate_max.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.built_ins.aggregate_max.cljs$core$IFn$_invoke$arity$1 = function($coll$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($acc$$, $x$$) {
    return $APP.cljs.core.compare($x$$, $acc$$) > 0 ? $x$$ : $acc$$;
  }, $APP.cljs.core.first($coll$$), $APP.cljs.core.next($coll$$));
};
datascript.built_ins.aggregate_max.cljs$core$IFn$_invoke$arity$2 = function($n$$, $coll$$) {
  return $APP.cljs.core.vec($APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($acc$$, $x$$) {
    return $APP.cljs.core.count($acc$$) < $n$$ ? $APP.cljs.core.sort.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.compare, $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($acc$$, $x$$)) : $APP.cljs.core.compare($x$$, $APP.cljs.core.first($acc$$)) > 0 ? $APP.cljs.core.sort.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.compare, $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.next($acc$$), $x$$)) : $acc$$;
  }, $APP.cljs.core.PersistentVector.EMPTY, $coll$$));
};
datascript.built_ins.aggregate_max.cljs$lang$maxFixedArity = 2;
datascript.built_ins.aggregate_rand = function($var_args$$) {
  switch(arguments.length) {
    case 1:
      return datascript.built_ins.aggregate_rand.cljs$core$IFn$_invoke$arity$1(arguments[0]);
    case 2:
      return datascript.built_ins.aggregate_rand.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.built_ins.aggregate_rand.cljs$core$IFn$_invoke$arity$1 = function($coll$$) {
  return $APP.cljs.core.rand_nth($coll$$);
};
datascript.built_ins.aggregate_rand.cljs$core$IFn$_invoke$arity$2 = function($n$$, $coll$$) {
  return $APP.cljs.core.vec($APP.cljs.core.repeatedly.cljs$core$IFn$_invoke$arity$2($n$$, function() {
    return $APP.cljs.core.rand_nth($coll$$);
  }));
};
datascript.built_ins.aggregate_rand.cljs$lang$maxFixedArity = 2;
datascript.built_ins.aggregate_sample = function($n$$, $coll$$) {
  return $APP.cljs.core.vec($APP.cljs.core.take.cljs$core$IFn$_invoke$arity$2($n$$, $APP.cljs.core.shuffle($coll$$)));
};
datascript.built_ins.aggregate_count_distinct = function($coll$$) {
  return $APP.cljs.core.count($APP.cljs.core.distinct.cljs$core$IFn$_invoke$arity$1($coll$$));
};
datascript.built_ins.aggregates = $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$2345$variance, $APP.cljs$cst$25$count, $APP.cljs$cst$2347$median, $APP.cljs$cst$2343$sum, $APP.cljs$cst$651$min, $APP.cljs$cst$695$max, $APP.cljs$cst$2348$count_distinct, $APP.cljs$cst$1054$distinct, $APP.cljs$cst$2349$avg, $APP.cljs$cst$2344$stddev, $APP.cljs$cst$1136$rand, $APP.cljs$cst$2346$sample], [datascript.built_ins.aggregate_variance, $APP.cljs.core.count, datascript.built_ins.aggregate_median, datascript.built_ins.aggregate_sum, 
datascript.built_ins.aggregate_min, datascript.built_ins.aggregate_max, datascript.built_ins.aggregate_count_distinct, $APP.cljs.core.set, datascript.built_ins.aggregate_avg, datascript.built_ins.aggregate_stddev, datascript.built_ins.aggregate_rand, datascript.built_ins.aggregate_sample]);
datascript.pull_parser = {};
datascript.pull_parser.PullAttr = function($as$$, $default$$$, $limit$$, $name$$, $pattern$$, $recursion_limit$$, $recursive_QMARK_$$, $reverse_QMARK_$$, $xform$$, $multival_QMARK_$$, $ref_QMARK_$$, $component_QMARK_$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.as = $as$$;
  this.default$ = $default$$$;
  this.limit = $limit$$;
  this.name = $name$$;
  this.pattern = $pattern$$;
  this.recursion_limit = $recursion_limit$$;
  this.recursive_QMARK_ = $recursive_QMARK_$$;
  this.reverse_QMARK_ = $reverse_QMARK_$$;
  this.xform = $xform$$;
  this.multival_QMARK_ = $multival_QMARK_$$;
  this.ref_QMARK_ = $ref_QMARK_$$;
  this.component_QMARK_ = $component_QMARK_$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.pull_parser.PullAttr.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.pull_parser.PullAttr.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k70048$$, $else__5326__auto__$$) {
  switch($k70048$$ instanceof $APP.cljs.core.Keyword ? $k70048$$.fqn : null) {
    case "as":
      return this.as;
    case "default":
      return this.default$;
    case "limit":
      return this.limit;
    case "name":
      return this.name;
    case "pattern":
      return this.pattern;
    case "recursion-limit":
      return this.recursion_limit;
    case "recursive?":
      return this.recursive_QMARK_;
    case "reverse?":
      return this.reverse_QMARK_;
    case "xform":
      return this.xform;
    case "multival?":
      return this.multival_QMARK_;
    case "ref?":
      return this.ref_QMARK_;
    case "component?":
      return this.component_QMARK_;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k70048$$, $else__5326__auto__$$);
  }
};
datascript.pull_parser.PullAttr.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__70079_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__70079_v__5348__auto__$$, 0, null);
    $p__70079_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__70079_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__70079_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__70079_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.pull_parser.PullAttr.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.pull-parser.PullAttr{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 12, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$265$as, this.as], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$205$default, this.default$], null), new $APP.cljs.core.PersistentVector(null, 
  2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$4300$limit, this.limit], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$272$name, this.name], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2381$pattern, this.pattern], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4536$recursion_limit, 
  this.recursion_limit], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4537$recursive_QMARK_, this.recursive_QMARK_], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$4538$reverse_QMARK_, this.reverse_QMARK_], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$4539$xform, this.xform], null), new $APP.cljs.core.PersistentVector(null, 
  2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4540$multival_QMARK_, this.multival_QMARK_], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4541$ref_QMARK_, this.ref_QMARK_], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4542$component_QMARK_, this.component_QMARK_], null)], null), this.__extmap));
};
datascript.pull_parser.PullAttr.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__70047$$) {
  return new $APP.cljs.core.RecordIter(0, this, 12, new $APP.cljs.core.PersistentVector(null, 12, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$265$as, $APP.cljs$cst$205$default, $APP.cljs$cst$4300$limit, $APP.cljs$cst$272$name, $APP.cljs$cst$2381$pattern, cljs$cst$4536$recursion_limit, cljs$cst$4537$recursive_QMARK_, $APP.cljs$cst$4538$reverse_QMARK_, $APP.cljs$cst$4539$xform, cljs$cst$4540$multival_QMARK_, cljs$cst$4541$ref_QMARK_, cljs$cst$4542$component_QMARK_], null), $APP.cljs.core.truth_(this.__extmap) ? 
  $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.pull_parser.PullAttr.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.pull_parser.PullAttr.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.pull_parser.PullAttr(this.as, this.default$, this.limit, this.name, this.pattern, this.recursion_limit, this.recursive_QMARK_, this.reverse_QMARK_, this.xform, this.multival_QMARK_, this.ref_QMARK_, this.component_QMARK_, this.__meta, this.__extmap, this.__hash);
};
datascript.pull_parser.PullAttr.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 12 + $APP.cljs.core.count(this.__extmap);
};
datascript.pull_parser.PullAttr.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$145_h__5134__auto____$1$jscomp$145_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$145_h__5134__auto____$1$jscomp$145_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$145_h__5134__auto____$1$jscomp$145_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$145_h__5134__auto____$1$jscomp$145_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$145_h__5134__auto____$1$jscomp$145_this__5319__auto__$$ = -1743810262 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.pull_parser.PullAttr.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this70049$$, $other70050$$) {
  return $other70050$$ != null && this.constructor === $other70050$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.as, $other70050$$.as) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.default, $other70050$$.default) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.limit, $other70050$$.limit) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.name, $other70050$$.name) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.pattern, $other70050$$.pattern) && 
  $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.recursion_limit, $other70050$$.recursion_limit) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.recursive_QMARK_, $other70050$$.recursive_QMARK_) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.reverse_QMARK_, $other70050$$.reverse_QMARK_) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.xform, $other70050$$.xform) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.multival_QMARK_, $other70050$$.multival_QMARK_) && 
  $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.ref_QMARK_, $other70050$$.ref_QMARK_) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.component_QMARK_, $other70050$$.component_QMARK_) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other70050$$.__extmap);
};
datascript.pull_parser.PullAttr.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 12, [$APP.cljs$cst$4539$xform, null, $APP.cljs$cst$4300$limit, null, $APP.cljs$cst$4538$reverse_QMARK_, null, cljs$cst$4536$recursion_limit, null, $APP.cljs$cst$205$default, null, $APP.cljs$cst$272$name, null, $APP.cljs$cst$265$as, null, cljs$cst$4537$recursive_QMARK_, null, cljs$cst$4542$component_QMARK_, null, cljs$cst$4541$ref_QMARK_, null, cljs$cst$4540$multival_QMARK_, 
  null, $APP.cljs$cst$2381$pattern, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.pull_parser.PullAttr(this.as, this.default$, this.limit, this.name, this.pattern, this.recursion_limit, this.recursive_QMARK_, this.reverse_QMARK_, this.xform, this.multival_QMARK_, this.ref_QMARK_, 
  this.component_QMARK_, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.pull_parser.PullAttr.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k70048$$) {
  switch($k70048$$ instanceof $APP.cljs.core.Keyword ? $k70048$$.fqn : null) {
    case "as":
    case "default":
    case "limit":
    case "name":
    case "pattern":
    case "recursion-limit":
    case "recursive?":
    case "reverse?":
    case "xform":
    case "multival?":
    case "ref?":
    case "component?":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k70048$$);
  }
};
datascript.pull_parser.PullAttr.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__70131_this__5331__auto__$$, $k__5332__auto__$$, $G__70047$$) {
  $pred__70131_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__70131_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__70131_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$265$as, $k__5332__auto__$$) : $pred__70131_this__5331__auto__$$.call(null, $APP.cljs$cst$265$as, $k__5332__auto__$$)) ? new datascript.pull_parser.PullAttr($G__70047$$, this.default$, this.limit, this.name, this.pattern, this.recursion_limit, this.recursive_QMARK_, this.reverse_QMARK_, this.xform, this.multival_QMARK_, this.ref_QMARK_, 
  this.component_QMARK_, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__70131_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__70131_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$205$default, $k__5332__auto__$$) : $pred__70131_this__5331__auto__$$.call(null, $APP.cljs$cst$205$default, $k__5332__auto__$$)) ? new datascript.pull_parser.PullAttr(this.as, $G__70047$$, this.limit, this.name, this.pattern, this.recursion_limit, this.recursive_QMARK_, this.reverse_QMARK_, 
  this.xform, this.multival_QMARK_, this.ref_QMARK_, this.component_QMARK_, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__70131_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__70131_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4300$limit, $k__5332__auto__$$) : $pred__70131_this__5331__auto__$$.call(null, $APP.cljs$cst$4300$limit, $k__5332__auto__$$)) ? new datascript.pull_parser.PullAttr(this.as, this.default$, $G__70047$$, this.name, this.pattern, 
  this.recursion_limit, this.recursive_QMARK_, this.reverse_QMARK_, this.xform, this.multival_QMARK_, this.ref_QMARK_, this.component_QMARK_, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__70131_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__70131_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$272$name, $k__5332__auto__$$) : $pred__70131_this__5331__auto__$$.call(null, $APP.cljs$cst$272$name, $k__5332__auto__$$)) ? new datascript.pull_parser.PullAttr(this.as, 
  this.default$, this.limit, $G__70047$$, this.pattern, this.recursion_limit, this.recursive_QMARK_, this.reverse_QMARK_, this.xform, this.multival_QMARK_, this.ref_QMARK_, this.component_QMARK_, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__70131_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__70131_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2381$pattern, $k__5332__auto__$$) : $pred__70131_this__5331__auto__$$.call(null, $APP.cljs$cst$2381$pattern, 
  $k__5332__auto__$$)) ? new datascript.pull_parser.PullAttr(this.as, this.default$, this.limit, this.name, $G__70047$$, this.recursion_limit, this.recursive_QMARK_, this.reverse_QMARK_, this.xform, this.multival_QMARK_, this.ref_QMARK_, this.component_QMARK_, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__70131_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__70131_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4536$recursion_limit, $k__5332__auto__$$) : 
  $pred__70131_this__5331__auto__$$.call(null, cljs$cst$4536$recursion_limit, $k__5332__auto__$$)) ? new datascript.pull_parser.PullAttr(this.as, this.default$, this.limit, this.name, this.pattern, $G__70047$$, this.recursive_QMARK_, this.reverse_QMARK_, this.xform, this.multival_QMARK_, this.ref_QMARK_, this.component_QMARK_, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__70131_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__70131_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4537$recursive_QMARK_, 
  $k__5332__auto__$$) : $pred__70131_this__5331__auto__$$.call(null, cljs$cst$4537$recursive_QMARK_, $k__5332__auto__$$)) ? new datascript.pull_parser.PullAttr(this.as, this.default$, this.limit, this.name, this.pattern, this.recursion_limit, $G__70047$$, this.reverse_QMARK_, this.xform, this.multival_QMARK_, this.ref_QMARK_, this.component_QMARK_, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__70131_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__70131_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4538$reverse_QMARK_, 
  $k__5332__auto__$$) : $pred__70131_this__5331__auto__$$.call(null, $APP.cljs$cst$4538$reverse_QMARK_, $k__5332__auto__$$)) ? new datascript.pull_parser.PullAttr(this.as, this.default$, this.limit, this.name, this.pattern, this.recursion_limit, this.recursive_QMARK_, $G__70047$$, this.xform, this.multival_QMARK_, this.ref_QMARK_, this.component_QMARK_, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__70131_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__70131_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4539$xform, 
  $k__5332__auto__$$) : $pred__70131_this__5331__auto__$$.call(null, $APP.cljs$cst$4539$xform, $k__5332__auto__$$)) ? new datascript.pull_parser.PullAttr(this.as, this.default$, this.limit, this.name, this.pattern, this.recursion_limit, this.recursive_QMARK_, this.reverse_QMARK_, $G__70047$$, this.multival_QMARK_, this.ref_QMARK_, this.component_QMARK_, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__70131_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__70131_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4540$multival_QMARK_, 
  $k__5332__auto__$$) : $pred__70131_this__5331__auto__$$.call(null, cljs$cst$4540$multival_QMARK_, $k__5332__auto__$$)) ? new datascript.pull_parser.PullAttr(this.as, this.default$, this.limit, this.name, this.pattern, this.recursion_limit, this.recursive_QMARK_, this.reverse_QMARK_, this.xform, $G__70047$$, this.ref_QMARK_, this.component_QMARK_, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__70131_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__70131_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4541$ref_QMARK_, 
  $k__5332__auto__$$) : $pred__70131_this__5331__auto__$$.call(null, cljs$cst$4541$ref_QMARK_, $k__5332__auto__$$)) ? new datascript.pull_parser.PullAttr(this.as, this.default$, this.limit, this.name, this.pattern, this.recursion_limit, this.recursive_QMARK_, this.reverse_QMARK_, this.xform, this.multival_QMARK_, $G__70047$$, this.component_QMARK_, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__70131_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__70131_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4542$component_QMARK_, 
  $k__5332__auto__$$) : $pred__70131_this__5331__auto__$$.call(null, cljs$cst$4542$component_QMARK_, $k__5332__auto__$$)) ? new datascript.pull_parser.PullAttr(this.as, this.default$, this.limit, this.name, this.pattern, this.recursion_limit, this.recursive_QMARK_, this.reverse_QMARK_, this.xform, this.multival_QMARK_, this.ref_QMARK_, $G__70047$$, this.__meta, this.__extmap, null) : new datascript.pull_parser.PullAttr(this.as, this.default$, this.limit, this.name, this.pattern, this.recursion_limit, 
  this.recursive_QMARK_, this.reverse_QMARK_, this.xform, this.multival_QMARK_, this.ref_QMARK_, this.component_QMARK_, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__70047$$), null);
};
datascript.pull_parser.PullAttr.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 12, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$265$as, this.as, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$205$default, this.default$, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$4300$limit, this.limit, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$272$name, this.name, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$2381$pattern, 
  this.pattern, null), new $APP.cljs.core.MapEntry(cljs$cst$4536$recursion_limit, this.recursion_limit, null), new $APP.cljs.core.MapEntry(cljs$cst$4537$recursive_QMARK_, this.recursive_QMARK_, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$4538$reverse_QMARK_, this.reverse_QMARK_, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$4539$xform, this.xform, null), new $APP.cljs.core.MapEntry(cljs$cst$4540$multival_QMARK_, this.multival_QMARK_, null), new $APP.cljs.core.MapEntry(cljs$cst$4541$ref_QMARK_, 
  this.ref_QMARK_, null), new $APP.cljs.core.MapEntry(cljs$cst$4542$component_QMARK_, this.component_QMARK_, null)], null), this.__extmap));
};
datascript.pull_parser.PullAttr.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__70047$$) {
  return new datascript.pull_parser.PullAttr(this.as, this.default$, this.limit, this.name, this.pattern, this.recursion_limit, this.recursive_QMARK_, this.reverse_QMARK_, this.xform, this.multival_QMARK_, this.ref_QMARK_, this.component_QMARK_, $G__70047$$, this.__extmap, this.__hash);
};
datascript.pull_parser.PullAttr.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.pull_parser.PullAttr.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 12, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$4543$as, $APP.cljs$cst$505$default, $APP.cljs$cst$2187$limit, $APP.cljs$cst$7$name, $APP.cljs$cst$2203$pattern, cljs$cst$4544$recursion_limit, $APP.cljs$cst$4545$recursive_QMARK_, cljs$cst$4546$reverse_QMARK_, $APP.cljs$cst$113$xform, cljs$cst$4547$multival_QMARK_, cljs$cst$4548$ref_QMARK_, cljs$cst$4549$component_QMARK_], null);
};
datascript.pull_parser.PullAttr.cljs$lang$type = !0;
datascript.pull_parser.PullAttr.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.pull-parser/PullAttr", null, 1, null);
};
datascript.pull_parser.PullAttr.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.pull-parser/PullAttr");
};
datascript.pull_parser.__GT_PullAttr = function($as$$, $default$$$, $limit$$, $name$$, $pattern$$, $recursion_limit$$, $recursive_QMARK_$$, $reverse_QMARK_$$, $xform$$, $multival_QMARK_$$, $ref_QMARK_$$, $component_QMARK_$$) {
  return new datascript.pull_parser.PullAttr($as$$, $default$$$, $limit$$, $name$$, $pattern$$, $recursion_limit$$, $recursive_QMARK_$$, $reverse_QMARK_$$, $xform$$, $multival_QMARK_$$, $ref_QMARK_$$, $component_QMARK_$$, null, null, null);
};
datascript.pull_parser.map__GT_PullAttr = function($G__70056$$) {
  var $G__70134$jscomp$inline_6845_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__70056$$, $APP.cljs$cst$265$as, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$205$default, $APP.cljs$cst$4300$limit, $APP.cljs$cst$272$name, $APP.cljs$cst$2381$pattern, cljs$cst$4536$recursion_limit, cljs$cst$4537$recursive_QMARK_, $APP.cljs$cst$4538$reverse_QMARK_, $APP.cljs$cst$4539$xform, cljs$cst$4540$multival_QMARK_, cljs$cst$4541$ref_QMARK_, cljs$cst$4542$component_QMARK_], 
  0));
  $G__70134$jscomp$inline_6845_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__70056$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__70134$jscomp$inline_6845_extmap__5365__auto__$$) : $G__70134$jscomp$inline_6845_extmap__5365__auto__$$;
  return new datascript.pull_parser.PullAttr($APP.cljs$cst$265$as.cljs$core$IFn$_invoke$arity$1($G__70056$$), $APP.cljs$cst$205$default.cljs$core$IFn$_invoke$arity$1($G__70056$$), $APP.cljs$cst$4300$limit.cljs$core$IFn$_invoke$arity$1($G__70056$$), $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($G__70056$$), $APP.cljs$cst$2381$pattern.cljs$core$IFn$_invoke$arity$1($G__70056$$), cljs$cst$4536$recursion_limit.cljs$core$IFn$_invoke$arity$1($G__70056$$), cljs$cst$4537$recursive_QMARK_.cljs$core$IFn$_invoke$arity$1($G__70056$$), 
  $APP.cljs$cst$4538$reverse_QMARK_.cljs$core$IFn$_invoke$arity$1($G__70056$$), $APP.cljs$cst$4539$xform.cljs$core$IFn$_invoke$arity$1($G__70056$$), cljs$cst$4540$multival_QMARK_.cljs$core$IFn$_invoke$arity$1($G__70056$$), cljs$cst$4541$ref_QMARK_.cljs$core$IFn$_invoke$arity$1($G__70056$$), cljs$cst$4542$component_QMARK_.cljs$core$IFn$_invoke$arity$1($G__70056$$), null, $APP.cljs.core.not_empty($G__70134$jscomp$inline_6845_extmap__5365__auto__$$), null);
};
datascript.pull_parser.PullPattern = function($attrs$$, $first_attr$$, $last_attr$$, $reverse_attrs$$, $wildcard_QMARK_$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.attrs = $attrs$$;
  this.first_attr = $first_attr$$;
  this.last_attr = $last_attr$$;
  this.reverse_attrs = $reverse_attrs$$;
  this.wildcard_QMARK_ = $wildcard_QMARK_$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.pull_parser.PullPattern.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.pull_parser.PullPattern.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k70136$$, $else__5326__auto__$$) {
  switch($k70136$$ instanceof $APP.cljs.core.Keyword ? $k70136$$.fqn : null) {
    case "attrs":
      return this.attrs;
    case "first-attr":
      return this.first_attr;
    case "last-attr":
      return this.last_attr;
    case "reverse-attrs":
      return this.reverse_attrs;
    case "wildcard?":
      return this.wildcard_QMARK_;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k70136$$, $else__5326__auto__$$);
  }
};
datascript.pull_parser.PullPattern.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__70141_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__70141_v__5348__auto__$$, 0, null);
    $p__70141_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__70141_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__70141_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__70141_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.pull_parser.PullPattern.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.pull-parser.PullPattern{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2743$attrs, this.attrs], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4550$first_attr, this.first_attr], null), 
  new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4551$last_attr, this.last_attr], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4552$reverse_attrs, this.reverse_attrs], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4553$wildcard_QMARK_, this.wildcard_QMARK_], null)], null), this.__extmap));
};
datascript.pull_parser.PullPattern.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__70135$$) {
  return new $APP.cljs.core.RecordIter(0, this, 5, new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2743$attrs, cljs$cst$4550$first_attr, cljs$cst$4551$last_attr, cljs$cst$4552$reverse_attrs, cljs$cst$4553$wildcard_QMARK_], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.pull_parser.PullPattern.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.pull_parser.PullPattern.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.pull_parser.PullPattern(this.attrs, this.first_attr, this.last_attr, this.reverse_attrs, this.wildcard_QMARK_, this.__meta, this.__extmap, this.__hash);
};
datascript.pull_parser.PullPattern.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 5 + $APP.cljs.core.count(this.__extmap);
};
datascript.pull_parser.PullPattern.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$146_h__5134__auto____$1$jscomp$146_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$146_h__5134__auto____$1$jscomp$146_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$146_h__5134__auto____$1$jscomp$146_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$146_h__5134__auto____$1$jscomp$146_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$146_h__5134__auto____$1$jscomp$146_this__5319__auto__$$ = -795554044 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.pull_parser.PullPattern.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this70137$$, $other70138$$) {
  return $other70138$$ != null && this.constructor === $other70138$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.attrs, $other70138$$.attrs) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.first_attr, $other70138$$.first_attr) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.last_attr, $other70138$$.last_attr) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.reverse_attrs, $other70138$$.reverse_attrs) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.wildcard_QMARK_, 
  $other70138$$.wildcard_QMARK_) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other70138$$.__extmap);
};
datascript.pull_parser.PullPattern.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 5, [cljs$cst$4552$reverse_attrs, null, cljs$cst$4550$first_attr, null, $APP.cljs$cst$2743$attrs, null, cljs$cst$4553$wildcard_QMARK_, null, cljs$cst$4551$last_attr, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, 
  this), this.__meta), $k__5334__auto__$$) : new datascript.pull_parser.PullPattern(this.attrs, this.first_attr, this.last_attr, this.reverse_attrs, this.wildcard_QMARK_, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.pull_parser.PullPattern.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k70136$$) {
  switch($k70136$$ instanceof $APP.cljs.core.Keyword ? $k70136$$.fqn : null) {
    case "attrs":
    case "first-attr":
    case "last-attr":
    case "reverse-attrs":
    case "wildcard?":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k70136$$);
  }
};
datascript.pull_parser.PullPattern.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__70146_this__5331__auto__$$, $k__5332__auto__$$, $G__70135$$) {
  $pred__70146_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__70146_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__70146_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2743$attrs, $k__5332__auto__$$) : $pred__70146_this__5331__auto__$$.call(null, $APP.cljs$cst$2743$attrs, $k__5332__auto__$$)) ? new datascript.pull_parser.PullPattern($G__70135$$, this.first_attr, this.last_attr, this.reverse_attrs, this.wildcard_QMARK_, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__70146_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? 
  $pred__70146_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4550$first_attr, $k__5332__auto__$$) : $pred__70146_this__5331__auto__$$.call(null, cljs$cst$4550$first_attr, $k__5332__auto__$$)) ? new datascript.pull_parser.PullPattern(this.attrs, $G__70135$$, this.last_attr, this.reverse_attrs, this.wildcard_QMARK_, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__70146_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__70146_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4551$last_attr, 
  $k__5332__auto__$$) : $pred__70146_this__5331__auto__$$.call(null, cljs$cst$4551$last_attr, $k__5332__auto__$$)) ? new datascript.pull_parser.PullPattern(this.attrs, this.first_attr, $G__70135$$, this.reverse_attrs, this.wildcard_QMARK_, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__70146_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__70146_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4552$reverse_attrs, $k__5332__auto__$$) : $pred__70146_this__5331__auto__$$.call(null, 
  cljs$cst$4552$reverse_attrs, $k__5332__auto__$$)) ? new datascript.pull_parser.PullPattern(this.attrs, this.first_attr, this.last_attr, $G__70135$$, this.wildcard_QMARK_, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__70146_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__70146_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4553$wildcard_QMARK_, $k__5332__auto__$$) : $pred__70146_this__5331__auto__$$.call(null, cljs$cst$4553$wildcard_QMARK_, $k__5332__auto__$$)) ? 
  new datascript.pull_parser.PullPattern(this.attrs, this.first_attr, this.last_attr, this.reverse_attrs, $G__70135$$, this.__meta, this.__extmap, null) : new datascript.pull_parser.PullPattern(this.attrs, this.first_attr, this.last_attr, this.reverse_attrs, this.wildcard_QMARK_, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__70135$$), null);
};
datascript.pull_parser.PullPattern.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$2743$attrs, this.attrs, null), new $APP.cljs.core.MapEntry(cljs$cst$4550$first_attr, this.first_attr, null), new $APP.cljs.core.MapEntry(cljs$cst$4551$last_attr, this.last_attr, null), new $APP.cljs.core.MapEntry(cljs$cst$4552$reverse_attrs, this.reverse_attrs, null), new $APP.cljs.core.MapEntry(cljs$cst$4553$wildcard_QMARK_, 
  this.wildcard_QMARK_, null)], null), this.__extmap));
};
datascript.pull_parser.PullPattern.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__70135$$) {
  return new datascript.pull_parser.PullPattern(this.attrs, this.first_attr, this.last_attr, this.reverse_attrs, this.wildcard_QMARK_, $G__70135$$, this.__extmap, this.__hash);
};
datascript.pull_parser.PullPattern.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.pull_parser.PullPattern.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$3017$attrs, cljs$cst$4554$first_attr, cljs$cst$4555$last_attr, cljs$cst$4556$reverse_attrs, cljs$cst$4557$wildcard_QMARK_], null);
};
datascript.pull_parser.PullPattern.cljs$lang$type = !0;
datascript.pull_parser.PullPattern.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.pull-parser/PullPattern", null, 1, null);
};
datascript.pull_parser.PullPattern.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.pull-parser/PullPattern");
};
datascript.pull_parser.__GT_PullPattern = function($attrs$$, $first_attr$$, $last_attr$$, $reverse_attrs$$, $wildcard_QMARK_$$) {
  return new datascript.pull_parser.PullPattern($attrs$$, $first_attr$$, $last_attr$$, $reverse_attrs$$, $wildcard_QMARK_$$, null, null, null);
};
datascript.pull_parser.map__GT_PullPattern = function($G__70139$$) {
  var $G__70149$jscomp$inline_6847_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__70139$$, $APP.cljs$cst$2743$attrs, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$4550$first_attr, cljs$cst$4551$last_attr, cljs$cst$4552$reverse_attrs, cljs$cst$4553$wildcard_QMARK_], 0));
  $G__70149$jscomp$inline_6847_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__70139$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__70149$jscomp$inline_6847_extmap__5365__auto__$$) : $G__70149$jscomp$inline_6847_extmap__5365__auto__$$;
  return new datascript.pull_parser.PullPattern($APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($G__70139$$), cljs$cst$4550$first_attr.cljs$core$IFn$_invoke$arity$1($G__70139$$), cljs$cst$4551$last_attr.cljs$core$IFn$_invoke$arity$1($G__70139$$), cljs$cst$4552$reverse_attrs.cljs$core$IFn$_invoke$arity$1($G__70139$$), cljs$cst$4553$wildcard_QMARK_.cljs$core$IFn$_invoke$arity$1($G__70139$$), null, $APP.cljs.core.not_empty($G__70149$jscomp$inline_6847_extmap__5365__auto__$$), null);
};
datascript.pull_parser.default_db_id_attr = datascript.pull_parser.map__GT_PullAttr(new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$272$name, $APP.cljs$cst$2432$db_SLASH_id, $APP.cljs$cst$265$as, $APP.cljs$cst$2432$db_SLASH_id, $APP.cljs$cst$4539$xform, $APP.cljs.core.identity], null));
datascript.pull_parser.default_pattern_ref = datascript.pull_parser.map__GT_PullPattern(new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$2743$attrs, new $APP.cljs.core.List(null, datascript.pull_parser.default_db_id_attr, null, 1, null)], null));
datascript.pull_parser.default_pattern_component = $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(datascript.pull_parser.default_pattern_ref, cljs$cst$4553$wildcard_QMARK_, !0);
datascript.pull_parser.check = function($cond$$, $expected$$, $fragment$$) {
  if ($APP.cljs.core.truth_($cond$$)) {
    return null;
  }
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Expected ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($expected$$), ", got: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$fragment$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4558$parser_SLASH_pull, cljs$cst$4559$fragment, $fragment$$], null));
};
datascript.pull_parser.parse_attr_name = function($db$jscomp$147_multival_QMARK_$$, $attr_spec$$) {
  var $reverse_QMARK_$$ = datascript.db.reverse_ref_QMARK_($attr_spec$$), $name$$ = $reverse_QMARK_$$ ? datascript.db.reverse_ref($attr_spec$$) : $attr_spec$$, $ref_QMARK_$$ = datascript.db.ref_QMARK_($db$jscomp$147_multival_QMARK_$$, $name$$), $component_QMARK_$$ = datascript.db.component_QMARK_($db$jscomp$147_multival_QMARK_$$, $name$$);
  $db$jscomp$147_multival_QMARK_$$ = datascript.db.multival_QMARK_($db$jscomp$147_multival_QMARK_$$, $name$$);
  var $JSCompiler_temp_const$$ = datascript.pull_parser, $JSCompiler_temp_const$jscomp$0$$ = $JSCompiler_temp_const$$.map__GT_PullAttr, $JSCompiler_temp_const$jscomp$1$$ = $APP.cljs.core.PersistentHashMap, $JSCompiler_temp_const$jscomp$2$$ = $JSCompiler_temp_const$jscomp$1$$.fromArrays, $JSCompiler_temp_const$jscomp$3$$ = $APP.cljs.core.identity;
  if ($reverse_QMARK_$$) {
    datascript.pull_parser.check($ref_QMARK_$$, "reverse attribute having :db.type/ref", $attr_spec$$);
    var $JSCompiler_temp$$ = !0;
  } else {
    $JSCompiler_temp$$ = null;
  }
  return $JSCompiler_temp_const$jscomp$0$$.call($JSCompiler_temp_const$$, $JSCompiler_temp_const$jscomp$2$$.call($JSCompiler_temp_const$jscomp$1$$, [$APP.cljs$cst$4539$xform, $APP.cljs$cst$4300$limit, $APP.cljs$cst$4538$reverse_QMARK_, $APP.cljs$cst$272$name, $APP.cljs$cst$265$as, cljs$cst$4542$component_QMARK_, cljs$cst$4541$ref_QMARK_, cljs$cst$4540$multival_QMARK_, $APP.cljs$cst$2381$pattern], [$JSCompiler_temp_const$jscomp$3$$, $db$jscomp$147_multival_QMARK_$$ ? 1000 : null, $JSCompiler_temp$$, 
  $name$$, $attr_spec$$, $component_QMARK_$$ ? !0 : null, $ref_QMARK_$$ ? !0 : null, $db$jscomp$147_multival_QMARK_$$ ? !0 : null, $ref_QMARK_$$ ? $reverse_QMARK_$$ ? datascript.pull_parser.default_pattern_ref : $component_QMARK_$$ ? datascript.pull_parser.default_pattern_component : datascript.pull_parser.default_pattern_ref : null]));
};
datascript.pull_parser.check_limit = function($db$$, $pull_attr$$, $limit$$) {
  datascript.pull_parser.check(typeof $limit$$ === "number" && $limit$$ > 0 || $limit$$ == null, "(positive-number | nil)", $limit$$);
  return datascript.pull_parser.check(datascript.db.multival_QMARK_($db$$, $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($pull_attr$$)), "limit attribute having :db.cardinality/many", $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($pull_attr$$));
};
datascript.pull_parser.resolve_xform = function($sym_or_fn$$) {
  var $or__5025__auto__$jscomp$465_or__5025__auto____$1$$ = $APP.cljs.core.fn_QMARK_($sym_or_fn$$) ? $sym_or_fn$$ : null;
  if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$465_or__5025__auto____$1$$)) {
    return $or__5025__auto__$jscomp$465_or__5025__auto____$1$$;
  }
  $or__5025__auto__$jscomp$465_or__5025__auto____$1$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2(datascript.built_ins.query_fns, $sym_or_fn$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$465_or__5025__auto____$1$$)) {
    return $or__5025__auto__$jscomp$465_or__5025__auto____$1$$;
  }
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Can't resolve symbol ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$sym_or_fn$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4558$parser_SLASH_pull, cljs$cst$4559$fragment, $sym_or_fn$$], null));
};
datascript.pull_parser.parse_attr_expr = function($db$$, $attr_spec$$) {
  var $temp__5829__auto__$$ = function() {
    var $G__70151$$ = $APP.cljs.core.first($attr_spec$$);
    return datascript.pull_parser.parse_attr_spec.cljs$core$IFn$_invoke$arity$2 ? datascript.pull_parser.parse_attr_spec.cljs$core$IFn$_invoke$arity$2($db$$, $G__70151$$) : datascript.pull_parser.parse_attr_spec.call(null, $db$$, $G__70151$$);
  }();
  if ($temp__5829__auto__$$ == null) {
    return null;
  }
  datascript.pull_parser.check($APP.cljs.core.even_QMARK_($APP.cljs.core.count($APP.cljs.core.next($attr_spec$$))), "even number of opts", $attr_spec$$);
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($pull_attr__$1$$, $p__70152_value$$) {
    var $key$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__70152_value$$, 0, null);
    $p__70152_value$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__70152_value$$, 1, null);
    switch($key$$ instanceof $APP.cljs.core.Keyword ? $key$$.fqn : null) {
      case "as":
        return $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($pull_attr__$1$$, $APP.cljs$cst$265$as, $p__70152_value$$);
      case "limit":
        return datascript.pull_parser.check_limit($db$$, $pull_attr__$1$$, $p__70152_value$$), $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($pull_attr__$1$$, $APP.cljs$cst$4300$limit, $p__70152_value$$);
      case "default":
        return $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($pull_attr__$1$$, $APP.cljs$cst$205$default, $p__70152_value$$);
      case "xform":
        return $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($pull_attr__$1$$, $APP.cljs$cst$4539$xform, datascript.pull_parser.resolve_xform($p__70152_value$$));
      default:
        return datascript.pull_parser.check(!1, "one of :as, :limit, :default, :xform", $attr_spec$$);
    }
  }, $temp__5829__auto__$$, $APP.cljs.core.partition.cljs$core$IFn$_invoke$arity$2(2, $APP.cljs.core.next($attr_spec$$)));
};
datascript.pull_parser.parse_legacy_limit_expr = function($db$$, $attr_spec$jscomp$2_limit$$) {
  var $JSCompiler_temp_const$jscomp$1505_attr$jscomp$47_pull_attr$$ = $APP.cljs.core, $JSCompiler_temp_const$$ = $JSCompiler_temp_const$jscomp$1505_attr$jscomp$47_pull_attr$$.truth_;
  var $G__70158$jscomp$inline_6850_JSCompiler_inline_result$$ = $APP.cljs.core.first($attr_spec$jscomp$2_limit$$);
  var $fexpr__70157$$ = new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$2187$limit, null, "limit", null], null), null);
  $G__70158$jscomp$inline_6850_JSCompiler_inline_result$$ = $fexpr__70157$$.cljs$core$IFn$_invoke$arity$1 ? $fexpr__70157$$.cljs$core$IFn$_invoke$arity$1($G__70158$jscomp$inline_6850_JSCompiler_inline_result$$) : $fexpr__70157$$.call(null, $G__70158$jscomp$inline_6850_JSCompiler_inline_result$$);
  return $JSCompiler_temp_const$$.call($JSCompiler_temp_const$jscomp$1505_attr$jscomp$47_pull_attr$$, $G__70158$jscomp$inline_6850_JSCompiler_inline_result$$) ? (datascript.pull_parser.check($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.count($attr_spec$jscomp$2_limit$$), 3), "['limit attr-name (positive-number | nil)]", $attr_spec$jscomp$2_limit$$), $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($attr_spec$jscomp$2_limit$$, 0, null), $JSCompiler_temp_const$jscomp$1505_attr$jscomp$47_pull_attr$$ = 
  $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($attr_spec$jscomp$2_limit$$, 1, null), $attr_spec$jscomp$2_limit$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($attr_spec$jscomp$2_limit$$, 2, null), $JSCompiler_temp_const$jscomp$1505_attr$jscomp$47_pull_attr$$ = datascript.pull_parser.parse_attr_spec.cljs$core$IFn$_invoke$arity$2 ? datascript.pull_parser.parse_attr_spec.cljs$core$IFn$_invoke$arity$2($db$$, $JSCompiler_temp_const$jscomp$1505_attr$jscomp$47_pull_attr$$) : datascript.pull_parser.parse_attr_spec.call(null, 
  $db$$, $JSCompiler_temp_const$jscomp$1505_attr$jscomp$47_pull_attr$$), datascript.pull_parser.check_limit($db$$, $JSCompiler_temp_const$jscomp$1505_attr$jscomp$47_pull_attr$$, $attr_spec$jscomp$2_limit$$), $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($JSCompiler_temp_const$jscomp$1505_attr$jscomp$47_pull_attr$$, $APP.cljs$cst$4300$limit, $attr_spec$jscomp$2_limit$$)) : null;
};
datascript.pull_parser.parse_legacy_default_expr = function($db$jscomp$151_pull_attr$$, $attr_spec$jscomp$3_default$$$) {
  var $JSCompiler_temp_const$jscomp$1508_attr$$ = $APP.cljs.core, $JSCompiler_temp_const$$ = $JSCompiler_temp_const$jscomp$1508_attr$$.truth_;
  var $G__70163$jscomp$inline_6853_JSCompiler_inline_result$$ = $APP.cljs.core.first($attr_spec$jscomp$3_default$$$);
  var $fexpr__70162$$ = new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$505$default, null, "default", null], null), null);
  $G__70163$jscomp$inline_6853_JSCompiler_inline_result$$ = $fexpr__70162$$.cljs$core$IFn$_invoke$arity$1 ? $fexpr__70162$$.cljs$core$IFn$_invoke$arity$1($G__70163$jscomp$inline_6853_JSCompiler_inline_result$$) : $fexpr__70162$$.call(null, $G__70163$jscomp$inline_6853_JSCompiler_inline_result$$);
  return $JSCompiler_temp_const$$.call($JSCompiler_temp_const$jscomp$1508_attr$$, $G__70163$jscomp$inline_6853_JSCompiler_inline_result$$) ? (datascript.pull_parser.check($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.count($attr_spec$jscomp$3_default$$$), 3), "['default attr-name any-value]", $attr_spec$jscomp$3_default$$$), $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($attr_spec$jscomp$3_default$$$, 0, null), $JSCompiler_temp_const$jscomp$1508_attr$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($attr_spec$jscomp$3_default$$$, 
  1, null), $attr_spec$jscomp$3_default$$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($attr_spec$jscomp$3_default$$$, 2, null), $db$jscomp$151_pull_attr$$ = datascript.pull_parser.parse_attr_spec.cljs$core$IFn$_invoke$arity$2 ? datascript.pull_parser.parse_attr_spec.cljs$core$IFn$_invoke$arity$2($db$jscomp$151_pull_attr$$, $JSCompiler_temp_const$jscomp$1508_attr$$) : datascript.pull_parser.parse_attr_spec.call(null, $db$jscomp$151_pull_attr$$, $JSCompiler_temp_const$jscomp$1508_attr$$), $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($db$jscomp$151_pull_attr$$, 
  $APP.cljs$cst$205$default, $attr_spec$jscomp$3_default$$$)) : null;
};
datascript.pull_parser.parse_attr_spec = function($db$jscomp$152_or__5025__auto____$2$$, $attr_spec$$) {
  var $JSCompiler_temp$jscomp$1510_JSCompiler_temp$jscomp$1511_JSCompiler_temp_const$jscomp$1513_or__5025__auto__$jscomp$466_or__5025__auto____$1$$;
  if (!($JSCompiler_temp$jscomp$1510_JSCompiler_temp$jscomp$1511_JSCompiler_temp_const$jscomp$1513_or__5025__auto__$jscomp$466_or__5025__auto____$1$$ = $attr_spec$$ instanceof $APP.cljs.core.Keyword) && ($JSCompiler_temp$jscomp$1510_JSCompiler_temp$jscomp$1511_JSCompiler_temp_const$jscomp$1513_or__5025__auto__$jscomp$466_or__5025__auto____$1$$ = typeof $attr_spec$$ === "string")) {
    $JSCompiler_temp$jscomp$1510_JSCompiler_temp$jscomp$1511_JSCompiler_temp_const$jscomp$1513_or__5025__auto__$jscomp$466_or__5025__auto____$1$$ = $APP.cljs.core;
    var $JSCompiler_temp_const$$ = $JSCompiler_temp$jscomp$1510_JSCompiler_temp$jscomp$1511_JSCompiler_temp_const$jscomp$1513_or__5025__auto__$jscomp$466_or__5025__auto____$1$$.not;
    var $JSCompiler_inline_result$jscomp$1514_fexpr__70167$$ = new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, ["limit", null, "default", null], null), null);
    $JSCompiler_inline_result$jscomp$1514_fexpr__70167$$ = $JSCompiler_inline_result$jscomp$1514_fexpr__70167$$.cljs$core$IFn$_invoke$arity$1 ? $JSCompiler_inline_result$jscomp$1514_fexpr__70167$$.cljs$core$IFn$_invoke$arity$1($attr_spec$$) : $JSCompiler_inline_result$jscomp$1514_fexpr__70167$$.call(null, $attr_spec$$);
    $JSCompiler_temp$jscomp$1510_JSCompiler_temp$jscomp$1511_JSCompiler_temp_const$jscomp$1513_or__5025__auto__$jscomp$466_or__5025__auto____$1$$ = $JSCompiler_temp_const$$.call($JSCompiler_temp$jscomp$1510_JSCompiler_temp$jscomp$1511_JSCompiler_temp_const$jscomp$1513_or__5025__auto__$jscomp$466_or__5025__auto____$1$$, $JSCompiler_inline_result$jscomp$1514_fexpr__70167$$);
  }
  if ($JSCompiler_temp$jscomp$1510_JSCompiler_temp$jscomp$1511_JSCompiler_temp_const$jscomp$1513_or__5025__auto__$jscomp$466_or__5025__auto____$1$$) {
    return datascript.pull_parser.parse_attr_name($db$jscomp$152_or__5025__auto____$2$$, $attr_spec$$);
  }
  if ($APP.cljs.core.sequential_QMARK_($attr_spec$$)) {
    $JSCompiler_temp$jscomp$1510_JSCompiler_temp$jscomp$1511_JSCompiler_temp_const$jscomp$1513_or__5025__auto__$jscomp$466_or__5025__auto____$1$$ = datascript.pull_parser.parse_attr_expr($db$jscomp$152_or__5025__auto____$2$$, $attr_spec$$);
    if ($APP.cljs.core.truth_($JSCompiler_temp$jscomp$1510_JSCompiler_temp$jscomp$1511_JSCompiler_temp_const$jscomp$1513_or__5025__auto__$jscomp$466_or__5025__auto____$1$$)) {
      return $JSCompiler_temp$jscomp$1510_JSCompiler_temp$jscomp$1511_JSCompiler_temp_const$jscomp$1513_or__5025__auto__$jscomp$466_or__5025__auto____$1$$;
    }
    $JSCompiler_temp$jscomp$1510_JSCompiler_temp$jscomp$1511_JSCompiler_temp_const$jscomp$1513_or__5025__auto__$jscomp$466_or__5025__auto____$1$$ = datascript.pull_parser.parse_legacy_limit_expr($db$jscomp$152_or__5025__auto____$2$$, $attr_spec$$);
    if ($APP.cljs.core.truth_($JSCompiler_temp$jscomp$1510_JSCompiler_temp$jscomp$1511_JSCompiler_temp_const$jscomp$1513_or__5025__auto__$jscomp$466_or__5025__auto____$1$$)) {
      return $JSCompiler_temp$jscomp$1510_JSCompiler_temp$jscomp$1511_JSCompiler_temp_const$jscomp$1513_or__5025__auto__$jscomp$466_or__5025__auto____$1$$;
    }
    $db$jscomp$152_or__5025__auto____$2$$ = datascript.pull_parser.parse_legacy_default_expr($db$jscomp$152_or__5025__auto____$2$$, $attr_spec$$);
    return $APP.cljs.core.truth_($db$jscomp$152_or__5025__auto____$2$$) ? $db$jscomp$152_or__5025__auto____$2$$ : datascript.pull_parser.check(!1, "[attr-name attr-option+] | ['limit attr-name (positive-num | nil)] | ['default attr-name any-val]", $attr_spec$$);
  }
  return null;
};
datascript.pull_parser.parse_map_spec = function($db$$, $attr_spec$$, $pattern$$) {
  var $pull_attr$$ = datascript.pull_parser.parse_attr_spec($db$$, $attr_spec$$);
  datascript.pull_parser.check($pull_attr$$ != null, "attr-name | attr-expr", $attr_spec$$);
  datascript.pull_parser.check(datascript.db.ref_QMARK_($db$$, $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($pull_attr$$)), "attribute having :db.type/ref", $attr_spec$$);
  return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$1481$_DOT__DOT__DOT_, $pattern$$) || $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2("...", $pattern$$) ? $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic($pull_attr$$, $APP.cljs$cst$2381$pattern, null, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$4537$recursive_QMARK_, !0, cljs$cst$4536$recursion_limit, null], 0)) : typeof $pattern$$ === "number" ? (datascript.pull_parser.check($pattern$$ > 0, 
  "(positive-num | ...)", $APP.cljs.core.PersistentArrayMap.createAsIfByAssoc([$attr_spec$$, $pattern$$])), $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic($pull_attr$$, $APP.cljs$cst$2381$pattern, null, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$4537$recursive_QMARK_, !0, cljs$cst$4536$recursion_limit, $pattern$$], 0))) : $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($pull_attr$$, $APP.cljs$cst$2381$pattern, datascript.pull_parser.parse_pattern.cljs$core$IFn$_invoke$arity$2 ? 
  datascript.pull_parser.parse_pattern.cljs$core$IFn$_invoke$arity$2($db$$, $pattern$$) : datascript.pull_parser.parse_pattern.call(null, $db$$, $pattern$$));
};
datascript.pull_parser.index_of = function($pred$$, $xs$$) {
  return $APP.cljs.core.some(function($idx$$) {
    var $x$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($idx$$, 0, null);
    $idx$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($idx$$, 1, null);
    return $APP.cljs.core.truth_($pred$$.cljs$core$IFn$_invoke$arity$1 ? $pred$$.cljs$core$IFn$_invoke$arity$1($x$$) : $pred$$.call(null, $x$$)) ? $idx$$ : null;
  }, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.vector, $xs$$, $APP.cljs.core.range.cljs$core$IFn$_invoke$arity$0()));
};
datascript.pull_parser.conj_attr = function($pull_pattern$$, $pull_attr$$) {
  var $pattern_attr$$ = $APP.cljs.core.truth_($APP.cljs$cst$4538$reverse_QMARK_.cljs$core$IFn$_invoke$arity$1($pull_attr$$)) ? cljs$cst$4552$reverse_attrs : $APP.cljs$cst$2743$attrs, $temp__5827__auto__$$ = datascript.pull_parser.index_of(function($p1__70178_SHARP_$$) {
    return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$265$as.cljs$core$IFn$_invoke$arity$1($p1__70178_SHARP_$$), $APP.cljs$cst$265$as.cljs$core$IFn$_invoke$arity$1($pull_attr$$));
  }, $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($pull_pattern$$, $pattern_attr$$));
  return $temp__5827__auto__$$ == null ? $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$4($pull_pattern$$, $pattern_attr$$, $APP.cljs.core.conj, $pull_attr$$) : $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$5($pull_pattern$$, $pattern_attr$$, $APP.cljs.core.assoc, $temp__5827__auto__$$, $pull_attr$$);
};
datascript.pull_parser.parse_pattern = function($db$$, $G__70331_G__70335_G__70337_key_fn$jscomp$1_pattern$$) {
  datascript.pull_parser.check($APP.cljs.core.sequential_QMARK_($G__70331_G__70335_G__70337_key_fn$jscomp$1_pattern$$), "pattern to be sequential?", $G__70331_G__70335_G__70337_key_fn$jscomp$1_pattern$$);
  for (var $result$$ = datascript.pull_parser.map__GT_PullPattern(new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$2743$attrs, $APP.cljs.core.PersistentVector.EMPTY, cljs$cst$4552$reverse_attrs, $APP.cljs.core.PersistentVector.EMPTY, cljs$cst$4553$wildcard_QMARK_, null], null));;) {
    if ($APP.cljs.core.empty_QMARK_($G__70331_G__70335_G__70337_key_fn$jscomp$1_pattern$$)) {
      var $G__70332_G__70336_G__70338_attrs$jscomp$13_attrs__$1$jscomp$1_attrs__$2_pull_attr$$ = $result$$.attrs, $db_id_QMARK_$$ = function($pattern__$1$$, $result$$, $attrs$$) {
        return function($G__70203_attr$$) {
          $G__70203_attr$$ = $G__70203_attr$$.name;
          var $fexpr__70202$$ = new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$2432$db_SLASH_id, null, ":db/id", null], null), null);
          return $fexpr__70202$$.cljs$core$IFn$_invoke$arity$1 ? $fexpr__70202$$.cljs$core$IFn$_invoke$arity$1($G__70203_attr$$) : $fexpr__70202$$.call(null, $G__70203_attr$$);
        };
      }($G__70331_G__70335_G__70337_key_fn$jscomp$1_pattern$$, $result$$, $G__70332_G__70336_G__70338_attrs$jscomp$13_attrs__$1$jscomp$1_attrs__$2_pull_attr$$);
      $G__70331_G__70335_G__70337_key_fn$jscomp$1_pattern$$ = function($pattern__$1$$, $result$$, $attrs$$, $db_id_QMARK_$$) {
        return function($attr$jscomp$50_name$$) {
          $attr$jscomp$50_name$$ = $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($attr$jscomp$50_name$$);
          return $attr$jscomp$50_name$$ instanceof $APP.cljs.core.Keyword ? $attr$jscomp$50_name$$ : $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(":", $APP.cljs.core.subs.cljs$core$IFn$_invoke$arity$3($attr$jscomp$50_name$$, 0, 1)) ? $APP.cljs.core.keyword.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.subs.cljs$core$IFn$_invoke$arity$2($attr$jscomp$50_name$$, 1)) : $APP.cljs.core.keyword.cljs$core$IFn$_invoke$arity$1($attr$jscomp$50_name$$);
        };
      }($G__70331_G__70335_G__70337_key_fn$jscomp$1_pattern$$, $result$$, $G__70332_G__70336_G__70338_attrs$jscomp$13_attrs__$1$jscomp$1_attrs__$2_pull_attr$$, $db_id_QMARK_$$);
      $G__70332_G__70336_G__70338_attrs$jscomp$13_attrs__$1$jscomp$1_attrs__$2_pull_attr$$ = $APP.cljs.core.truth_(function() {
        var $and__5023__auto__$$ = $result$$.wildcard_QMARK_;
        return $APP.cljs.core.truth_($and__5023__auto__$$) ? $APP.cljs.core.not($APP.cljs.core.some($db_id_QMARK_$$, $result$$.attrs)) : $and__5023__auto__$$;
      }()) ? $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($G__70332_G__70336_G__70338_attrs$jscomp$13_attrs__$1$jscomp$1_attrs__$2_pull_attr$$, datascript.pull_parser.default_db_id_attr) : $G__70332_G__70336_G__70338_attrs$jscomp$13_attrs__$1$jscomp$1_attrs__$2_pull_attr$$;
      $G__70332_G__70336_G__70338_attrs$jscomp$13_attrs__$1$jscomp$1_attrs__$2_pull_attr$$ = $APP.cljs.core.list_STAR_.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.sort_by.cljs$core$IFn$_invoke$arity$2($G__70331_G__70335_G__70337_key_fn$jscomp$1_pattern$$, $G__70332_G__70336_G__70338_attrs$jscomp$13_attrs__$1$jscomp$1_attrs__$2_pull_attr$$));
      var $datom_attrs_last_attr$$ = $APP.cljs.core.remove.cljs$core$IFn$_invoke$arity$2($db_id_QMARK_$$, $G__70332_G__70336_G__70338_attrs$jscomp$13_attrs__$1$jscomp$1_attrs__$2_pull_attr$$), $attr_spec$jscomp$6_first_attr$$ = $APP.cljs.core.first($datom_attrs_last_attr$$);
      $datom_attrs_last_attr$$ = $APP.cljs.core.last($datom_attrs_last_attr$$);
      return datascript.pull_parser.map__GT_PullPattern(new $APP.cljs.core.PersistentArrayMap(null, 5, [$APP.cljs$cst$2743$attrs, $G__70332_G__70336_G__70338_attrs$jscomp$13_attrs__$1$jscomp$1_attrs__$2_pull_attr$$, cljs$cst$4550$first_attr, $attr_spec$jscomp$6_first_attr$$, cljs$cst$4551$last_attr, $datom_attrs_last_attr$$, cljs$cst$4552$reverse_attrs, $APP.cljs.core.list_STAR_.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.sort_by.cljs$core$IFn$_invoke$arity$2($G__70331_G__70335_G__70337_key_fn$jscomp$1_pattern$$, 
      $result$$.reverse_attrs)), cljs$cst$4553$wildcard_QMARK_, $result$$.wildcard_QMARK_], null));
    }
    $attr_spec$jscomp$6_first_attr$$ = $APP.cljs.core.first($G__70331_G__70335_G__70337_key_fn$jscomp$1_pattern$$);
    if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$650$_STAR_, $attr_spec$jscomp$6_first_attr$$) || $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2("*", $attr_spec$jscomp$6_first_attr$$) || $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4288$_STAR_, $attr_spec$jscomp$6_first_attr$$)) {
      $G__70331_G__70335_G__70337_key_fn$jscomp$1_pattern$$ = $APP.cljs.core.next($G__70331_G__70335_G__70337_key_fn$jscomp$1_pattern$$), $result$$ = $G__70332_G__70336_G__70338_attrs$jscomp$13_attrs__$1$jscomp$1_attrs__$2_pull_attr$$ = $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($result$$, cljs$cst$4553$wildcard_QMARK_, !0);
    } else {
      if ($APP.cljs.core.map_QMARK_($attr_spec$jscomp$6_first_attr$$)) {
        $G__70332_G__70336_G__70338_attrs$jscomp$13_attrs__$1$jscomp$1_attrs__$2_pull_attr$$ = $APP.cljs.core.reduce_kv(function($pattern__$1$$, $result$$, $attr_spec$$) {
          return function($result__$1$$, $attr_spec__$1$$, $pattern__$2$$) {
            return datascript.pull_parser.conj_attr($result__$1$$, datascript.pull_parser.parse_map_spec($db$$, $attr_spec__$1$$, $pattern__$2$$));
          };
        }($G__70331_G__70335_G__70337_key_fn$jscomp$1_pattern$$, $result$$, $attr_spec$jscomp$6_first_attr$$), $result$$, $attr_spec$jscomp$6_first_attr$$), $G__70331_G__70335_G__70337_key_fn$jscomp$1_pattern$$ = $APP.cljs.core.next($G__70331_G__70335_G__70337_key_fn$jscomp$1_pattern$$), $result$$ = $G__70332_G__70336_G__70338_attrs$jscomp$13_attrs__$1$jscomp$1_attrs__$2_pull_attr$$;
      } else {
        $G__70332_G__70336_G__70338_attrs$jscomp$13_attrs__$1$jscomp$1_attrs__$2_pull_attr$$ = datascript.pull_parser.parse_attr_spec($db$$, $attr_spec$jscomp$6_first_attr$$);
        if ($G__70332_G__70336_G__70338_attrs$jscomp$13_attrs__$1$jscomp$1_attrs__$2_pull_attr$$ == null) {
          return datascript.pull_parser.check(!1, "attr-name | attr-expr | map-spec | *", $attr_spec$jscomp$6_first_attr$$);
        }
        $G__70331_G__70335_G__70337_key_fn$jscomp$1_pattern$$ = $APP.cljs.core.next($G__70331_G__70335_G__70337_key_fn$jscomp$1_pattern$$);
        $result$$ = $G__70332_G__70336_G__70338_attrs$jscomp$13_attrs__$1$jscomp$1_attrs__$2_pull_attr$$ = datascript.pull_parser.conj_attr($result$$, $G__70332_G__70336_G__70338_attrs$jscomp$13_attrs__$1$jscomp$1_attrs__$2_pull_attr$$);
      }
    }
  }
};
datascript.pull_api = {};
datascript.pull_api.first_seq = function($xs$$) {
  return $xs$$ == null ? null : $APP.cljs.core._first($xs$$);
};
datascript.pull_api.next_seq = function($xs$$) {
  return $xs$$ == null ? null : $APP.cljs.core._next($xs$$);
};
datascript.pull_api.conj_seq = function($xs$$, $x$$) {
  return $xs$$ == null ? new $APP.cljs.core.List(null, $x$$, null, 1, null) : $APP.cljs.core._conj($xs$$, $x$$);
};
datascript.pull_api.assoc_some_BANG_ = function($m$$, $k$$, $v$$) {
  return $v$$ == null ? $m$$ : $APP.cljs.core.assoc_BANG_.cljs$core$IFn$_invoke$arity$3($m$$, $k$$, $v$$);
};
datascript.pull_api.conj_some_BANG_ = function($xs$$, $v$$) {
  return $v$$ == null ? $xs$$ : $APP.cljs.core.conj_BANG_.cljs$core$IFn$_invoke$arity$2($xs$$, $v$$);
};
datascript.pull_api.Context = function($db$$, $visitor$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.db = $db$$;
  this.visitor = $visitor$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.pull_api.Context.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.pull_api.Context.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k71824$$, $else__5326__auto__$$) {
  switch($k71824$$ instanceof $APP.cljs.core.Keyword ? $k71824$$.fqn : null) {
    case "db":
      return this.db;
    case "visitor":
      return this.visitor;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k71824$$, $else__5326__auto__$$);
  }
};
datascript.pull_api.Context.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__71840_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__71840_v__5348__auto__$$, 0, null);
    $p__71840_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__71840_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__71840_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__71840_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.pull_api.Context.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.pull-api.Context{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2457$db, this.db], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4560$visitor, this.visitor], null)], null), this.__extmap));
};
datascript.pull_api.Context.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__71823$$) {
  return new $APP.cljs.core.RecordIter(0, this, 2, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2457$db, cljs$cst$4560$visitor], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.pull_api.Context.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.pull_api.Context.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.pull_api.Context(this.db, this.visitor, this.__meta, this.__extmap, this.__hash);
};
datascript.pull_api.Context.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 2 + $APP.cljs.core.count(this.__extmap);
};
datascript.pull_api.Context.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$147_h__5134__auto____$1$jscomp$147_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$147_h__5134__auto____$1$jscomp$147_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$147_h__5134__auto____$1$jscomp$147_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$147_h__5134__auto____$1$jscomp$147_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$147_h__5134__auto____$1$jscomp$147_this__5319__auto__$$ = 1727735959 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.pull_api.Context.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this71825$$, $other71826$$) {
  return $other71826$$ != null && this.constructor === $other71826$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.db, $other71826$$.db) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.visitor, $other71826$$.visitor) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other71826$$.__extmap);
};
datascript.pull_api.Context.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$2457$db, null, cljs$cst$4560$visitor, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.pull_api.Context(this.db, this.visitor, this.__meta, 
  $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.pull_api.Context.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k71824$$) {
  switch($k71824$$ instanceof $APP.cljs.core.Keyword ? $k71824$$.fqn : null) {
    case "db":
    case "visitor":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k71824$$);
  }
};
datascript.pull_api.Context.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__71858_this__5331__auto__$$, $k__5332__auto__$$, $G__71823$$) {
  $pred__71858_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__71858_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__71858_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2457$db, $k__5332__auto__$$) : $pred__71858_this__5331__auto__$$.call(null, $APP.cljs$cst$2457$db, $k__5332__auto__$$)) ? new datascript.pull_api.Context($G__71823$$, this.visitor, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__71858_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__71858_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4560$visitor, 
  $k__5332__auto__$$) : $pred__71858_this__5331__auto__$$.call(null, cljs$cst$4560$visitor, $k__5332__auto__$$)) ? new datascript.pull_api.Context(this.db, $G__71823$$, this.__meta, this.__extmap, null) : new datascript.pull_api.Context(this.db, this.visitor, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__71823$$), null);
};
datascript.pull_api.Context.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$2457$db, this.db, null), new $APP.cljs.core.MapEntry(cljs$cst$4560$visitor, this.visitor, null)], null), this.__extmap));
};
datascript.pull_api.Context.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__71823$$) {
  return new datascript.pull_api.Context(this.db, this.visitor, $G__71823$$, this.__extmap, this.__hash);
};
datascript.pull_api.Context.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.pull_api.Context.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2542$db, cljs$cst$4561$visitor], null);
};
datascript.pull_api.Context.cljs$lang$type = !0;
datascript.pull_api.Context.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.pull-api/Context", null, 1, null);
};
datascript.pull_api.Context.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.pull-api/Context");
};
datascript.pull_api.__GT_Context = function($db$$, $visitor$$) {
  return new datascript.pull_api.Context($db$$, $visitor$$, null, null, null);
};
datascript.pull_api.map__GT_Context = function($G__71827$$) {
  var $G__71870$jscomp$inline_6858_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__71827$$, $APP.cljs$cst$2457$db, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$4560$visitor], 0));
  $G__71870$jscomp$inline_6858_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__71827$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__71870$jscomp$inline_6858_extmap__5365__auto__$$) : $G__71870$jscomp$inline_6858_extmap__5365__auto__$$;
  return new datascript.pull_api.Context($APP.cljs$cst$2457$db.cljs$core$IFn$_invoke$arity$1($G__71827$$), cljs$cst$4560$visitor.cljs$core$IFn$_invoke$arity$1($G__71827$$), null, $APP.cljs.core.not_empty($G__71870$jscomp$inline_6858_extmap__5365__auto__$$), null);
};
datascript.pull_api.visit = function($context$jscomp$16_temp__5829__auto__$$, $pattern$$, $e$$, $a$$, $v$$) {
  $context$jscomp$16_temp__5829__auto__$$ = $context$jscomp$16_temp__5829__auto__$$.visitor;
  return $context$jscomp$16_temp__5829__auto__$$ == null ? null : $context$jscomp$16_temp__5829__auto__$$.cljs$core$IFn$_invoke$arity$4 ? $context$jscomp$16_temp__5829__auto__$$.cljs$core$IFn$_invoke$arity$4($pattern$$, $e$$, $a$$, $v$$) : $context$jscomp$16_temp__5829__auto__$$.call(null, $pattern$$, $e$$, $a$$, $v$$);
};
datascript.pull_api.IFrame = function() {
};
var datascript$pull_api$IFrame$_merge$dyn_72226 = function($this$$$, $result$$) {
  var $m__5372__auto__$jscomp$703_m__5374__auto__$$ = datascript.pull_api._merge[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
  if ($m__5372__auto__$jscomp$703_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$703_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$703_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($this$$$, $result$$) : $m__5372__auto__$jscomp$703_m__5374__auto__$$.call(null, $this$$$, $result$$);
  }
  $m__5372__auto__$jscomp$703_m__5374__auto__$$ = datascript.pull_api._merge._;
  if ($m__5372__auto__$jscomp$703_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$703_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$703_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($this$$$, $result$$) : $m__5372__auto__$jscomp$703_m__5374__auto__$$.call(null, $this$$$, $result$$);
  }
  throw $APP.cljs.core.missing_protocol("IFrame.-merge", $this$$$);
};
datascript.pull_api._merge = function($this$$$, $result$$) {
  return $this$$$ != null && $this$$$.datascript$pull_api$IFrame$_merge$arity$2 != null ? $this$$$.datascript$pull_api$IFrame$_merge$arity$2($this$$$, $result$$) : datascript$pull_api$IFrame$_merge$dyn_72226($this$$$, $result$$);
};
var datascript$pull_api$IFrame$_run$dyn_72227 = function($this$$$, $context$$) {
  var $m__5372__auto__$jscomp$704_m__5374__auto__$$ = datascript.pull_api._run[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
  if ($m__5372__auto__$jscomp$704_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$704_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$704_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($this$$$, $context$$) : $m__5372__auto__$jscomp$704_m__5374__auto__$$.call(null, $this$$$, $context$$);
  }
  $m__5372__auto__$jscomp$704_m__5374__auto__$$ = datascript.pull_api._run._;
  if ($m__5372__auto__$jscomp$704_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$704_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$704_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($this$$$, $context$$) : $m__5372__auto__$jscomp$704_m__5374__auto__$$.call(null, $this$$$, $context$$);
  }
  throw $APP.cljs.core.missing_protocol("IFrame.-run", $this$$$);
};
datascript.pull_api._run = function($this$$$, $context$$) {
  return $this$$$ != null && $this$$$.datascript$pull_api$IFrame$_run$arity$2 != null ? $this$$$.datascript$pull_api$IFrame$_run$arity$2($this$$$, $context$$) : datascript$pull_api$IFrame$_run$dyn_72227($this$$$, $context$$);
};
var datascript$pull_api$IFrame$_str$dyn_72228 = function($this$$$) {
  var $m__5372__auto__$jscomp$705_m__5374__auto__$$ = datascript.pull_api._str[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
  if ($m__5372__auto__$jscomp$705_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$705_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$705_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$705_m__5374__auto__$$.call(null, $this$$$);
  }
  $m__5372__auto__$jscomp$705_m__5374__auto__$$ = datascript.pull_api._str._;
  if ($m__5372__auto__$jscomp$705_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$705_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$705_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$705_m__5374__auto__$$.call(null, $this$$$);
  }
  throw $APP.cljs.core.missing_protocol("IFrame.-str", $this$$$);
};
datascript.pull_api._str = function($this$$$) {
  return $this$$$ != null && $this$$$.datascript$pull_api$IFrame$_str$arity$1 != null ? $this$$$.datascript$pull_api$IFrame$_str$arity$1($this$$$) : datascript$pull_api$IFrame$_str$dyn_72228($this$$$);
};
datascript.pull_api.attr_str = function($attr$$) {
  var $or__5025__auto__$$ = $APP.cljs$cst$265$as.cljs$core$IFn$_invoke$arity$1($attr$$);
  return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($attr$$);
};
datascript.pull_api.ResultFrame = function($value$$, $datoms$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.value = $value$$;
  this.datoms = $datoms$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.pull_api.ResultFrame.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.pull_api.ResultFrame.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k71880$$, $else__5326__auto__$$) {
  switch($k71880$$ instanceof $APP.cljs.core.Keyword ? $k71880$$.fqn : null) {
    case "value":
      return this.value;
    case "datoms":
      return this.datoms;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k71880$$, $else__5326__auto__$$);
  }
};
datascript.pull_api.ResultFrame.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__71885_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__71885_v__5348__auto__$$, 0, null);
    $p__71885_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__71885_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__71885_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__71885_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.pull_api.ResultFrame.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.pull-api.ResultFrame{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1429$value, this.value], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4480$datoms, this.datoms], null)], null), 
  this.__extmap));
};
datascript.pull_api.ResultFrame.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__71879$$) {
  return new $APP.cljs.core.RecordIter(0, this, 2, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1429$value, cljs$cst$4480$datoms], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.pull_api.ResultFrame.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.pull_api.ResultFrame.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.pull_api.ResultFrame(this.value, this.datoms, this.__meta, this.__extmap, this.__hash);
};
datascript.pull_api.ResultFrame.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 2 + $APP.cljs.core.count(this.__extmap);
};
datascript.pull_api.ResultFrame.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$148_h__5134__auto____$1$jscomp$148_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$148_h__5134__auto____$1$jscomp$148_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$148_h__5134__auto____$1$jscomp$148_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$148_h__5134__auto____$1$jscomp$148_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$148_h__5134__auto____$1$jscomp$148_this__5319__auto__$$ = 836381841 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.pull_api.ResultFrame.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this71881$$, $other71882$$) {
  return $other71882$$ != null && this.constructor === $other71882$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.value, $other71882$$.value) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.datoms, $other71882$$.datoms) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other71882$$.__extmap);
};
datascript.pull_api.ResultFrame.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1429$value, null, cljs$cst$4480$datoms, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.pull_api.ResultFrame(this.value, this.datoms, 
  this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.pull_api.ResultFrame.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k71880$$) {
  switch($k71880$$ instanceof $APP.cljs.core.Keyword ? $k71880$$.fqn : null) {
    case "value":
    case "datoms":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k71880$$);
  }
};
datascript.pull_api.ResultFrame.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__71905_this__5331__auto__$$, $k__5332__auto__$$, $G__71879$$) {
  $pred__71905_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__71905_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__71905_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$1429$value, $k__5332__auto__$$) : $pred__71905_this__5331__auto__$$.call(null, $APP.cljs$cst$1429$value, $k__5332__auto__$$)) ? new datascript.pull_api.ResultFrame($G__71879$$, this.datoms, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__71905_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__71905_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4480$datoms, 
  $k__5332__auto__$$) : $pred__71905_this__5331__auto__$$.call(null, cljs$cst$4480$datoms, $k__5332__auto__$$)) ? new datascript.pull_api.ResultFrame(this.value, $G__71879$$, this.__meta, this.__extmap, null) : new datascript.pull_api.ResultFrame(this.value, this.datoms, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__71879$$), null);
};
datascript.pull_api.ResultFrame.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$1429$value, this.value, null), new $APP.cljs.core.MapEntry(cljs$cst$4480$datoms, this.datoms, null)], null), this.__extmap));
};
datascript.pull_api.ResultFrame.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__71879$$) {
  return new datascript.pull_api.ResultFrame(this.value, this.datoms, $G__71879$$, this.__extmap, this.__hash);
};
datascript.pull_api.ResultFrame.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.pull_api.ResultFrame.prototype.datascript$pull_api$IFrame$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.pull_api.ResultFrame.prototype.datascript$pull_api$IFrame$_str$arity$1 = function($this$$$) {
  return ["ResultFrame\x3cvalue\x3d", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(this.value), "\x3e"].join("");
};
datascript.pull_api.ResultFrame.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$15$value, cljs$cst$4562$datoms], null);
};
datascript.pull_api.ResultFrame.cljs$lang$type = !0;
datascript.pull_api.ResultFrame.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.pull-api/ResultFrame", null, 1, null);
};
datascript.pull_api.ResultFrame.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.pull-api/ResultFrame");
};
datascript.pull_api.__GT_ResultFrame = function($value$$, $datoms$$) {
  return new datascript.pull_api.ResultFrame($value$$, $datoms$$, null, null, null);
};
datascript.pull_api.map__GT_ResultFrame = function($G__71883$$) {
  var $G__71920$jscomp$inline_6860_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__71883$$, $APP.cljs$cst$1429$value, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$4480$datoms], 0));
  $G__71920$jscomp$inline_6860_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__71883$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__71920$jscomp$inline_6860_extmap__5365__auto__$$) : $G__71920$jscomp$inline_6860_extmap__5365__auto__$$;
  return new datascript.pull_api.ResultFrame($APP.cljs$cst$1429$value.cljs$core$IFn$_invoke$arity$1($G__71883$$), cljs$cst$4480$datoms.cljs$core$IFn$_invoke$arity$1($G__71883$$), null, $APP.cljs.core.not_empty($G__71920$jscomp$inline_6860_extmap__5365__auto__$$), null);
};
datascript.pull_api.MultivalAttrFrame = function($acc$$, $attr$$, $datoms$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.acc = $acc$$;
  this.attr = $attr$$;
  this.datoms = $datoms$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.pull_api.MultivalAttrFrame.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.pull_api.MultivalAttrFrame.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k71922$$, $else__5326__auto__$$) {
  switch($k71922$$ instanceof $APP.cljs.core.Keyword ? $k71922$$.fqn : null) {
    case "acc":
      return this.acc;
    case "attr":
      return this.attr;
    case "datoms":
      return this.datoms;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k71922$$, $else__5326__auto__$$);
  }
};
datascript.pull_api.MultivalAttrFrame.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__71932_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__71932_v__5348__auto__$$, 0, null);
    $p__71932_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__71932_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__71932_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__71932_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.pull_api.MultivalAttrFrame.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.pull-api.MultivalAttrFrame{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$4563$acc, this.acc], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$3020$attr, this.attr], null), new $APP.cljs.core.PersistentVector(null, 
  2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4480$datoms, this.datoms], null)], null), this.__extmap));
};
datascript.pull_api.MultivalAttrFrame.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__71921$$) {
  return new $APP.cljs.core.RecordIter(0, this, 3, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$4563$acc, $APP.cljs$cst$3020$attr, cljs$cst$4480$datoms], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.pull_api.MultivalAttrFrame.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.pull_api.MultivalAttrFrame.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.pull_api.MultivalAttrFrame(this.acc, this.attr, this.datoms, this.__meta, this.__extmap, this.__hash);
};
datascript.pull_api.MultivalAttrFrame.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 3 + $APP.cljs.core.count(this.__extmap);
};
datascript.pull_api.MultivalAttrFrame.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$149_h__5134__auto____$1$jscomp$149_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$149_h__5134__auto____$1$jscomp$149_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$149_h__5134__auto____$1$jscomp$149_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$149_h__5134__auto____$1$jscomp$149_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$149_h__5134__auto____$1$jscomp$149_this__5319__auto__$$ = 1829867699 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.pull_api.MultivalAttrFrame.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this71923$$, $other71924$$) {
  return $other71924$$ != null && this.constructor === $other71924$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.acc, $other71924$$.acc) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.attr, $other71924$$.attr) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.datoms, $other71924$$.datoms) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other71924$$.__extmap);
};
datascript.pull_api.MultivalAttrFrame.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$4563$acc, null, cljs$cst$4480$datoms, null, $APP.cljs$cst$3020$attr, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.pull_api.MultivalAttrFrame(this.acc, 
  this.attr, this.datoms, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.pull_api.MultivalAttrFrame.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k71922$$) {
  switch($k71922$$ instanceof $APP.cljs.core.Keyword ? $k71922$$.fqn : null) {
    case "acc":
    case "attr":
    case "datoms":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k71922$$);
  }
};
datascript.pull_api.MultivalAttrFrame.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__71941_this__5331__auto__$$, $k__5332__auto__$$, $G__71921$$) {
  $pred__71941_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__71941_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__71941_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4563$acc, $k__5332__auto__$$) : $pred__71941_this__5331__auto__$$.call(null, $APP.cljs$cst$4563$acc, $k__5332__auto__$$)) ? new datascript.pull_api.MultivalAttrFrame($G__71921$$, this.attr, this.datoms, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__71941_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? 
  $pred__71941_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$3020$attr, $k__5332__auto__$$) : $pred__71941_this__5331__auto__$$.call(null, $APP.cljs$cst$3020$attr, $k__5332__auto__$$)) ? new datascript.pull_api.MultivalAttrFrame(this.acc, $G__71921$$, this.datoms, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__71941_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__71941_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4480$datoms, $k__5332__auto__$$) : 
  $pred__71941_this__5331__auto__$$.call(null, cljs$cst$4480$datoms, $k__5332__auto__$$)) ? new datascript.pull_api.MultivalAttrFrame(this.acc, this.attr, $G__71921$$, this.__meta, this.__extmap, null) : new datascript.pull_api.MultivalAttrFrame(this.acc, this.attr, this.datoms, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__71921$$), null);
};
datascript.pull_api.MultivalAttrFrame.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$4563$acc, this.acc, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$3020$attr, this.attr, null), new $APP.cljs.core.MapEntry(cljs$cst$4480$datoms, this.datoms, null)], null), this.__extmap));
};
datascript.pull_api.MultivalAttrFrame.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__71921$$) {
  return new datascript.pull_api.MultivalAttrFrame(this.acc, this.attr, this.datoms, $G__71921$$, this.__extmap, this.__hash);
};
datascript.pull_api.MultivalAttrFrame.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.pull_api.MultivalAttrFrame.prototype.datascript$pull_api$IFrame$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.pull_api.MultivalAttrFrame.prototype.datascript$pull_api$IFrame$_run$arity$2 = function($G__72244_datom$jscomp$7_datom__$1_this$$$, $G__72245_context$$) {
  for (var $self__$$ = this, $acc__$1$$ = $self__$$.acc, $datoms__$1$$ = $self__$$.datoms;;) {
    $G__72244_datom$jscomp$7_datom__$1_this$$$ = datascript.pull_api.first_seq($datoms__$1$$);
    if ($G__72244_datom$jscomp$7_datom__$1_this$$$ == null || $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($G__72244_datom$jscomp$7_datom__$1_this$$$.a, $self__$$.attr.name)) {
      return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new datascript.pull_api.ResultFrame($APP.cljs.core.not_empty($APP.cljs.core.persistent_BANG_($acc__$1$$)), function() {
        var $or__5025__auto__$$ = $datoms__$1$$;
        return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs.core.List.EMPTY;
      }(), null, null, null)], null);
    }
    if ($APP.cljs.core.truth_(function() {
      var $and__5023__auto__$$ = $self__$$.attr.limit;
      return $APP.cljs.core.truth_($and__5023__auto__$$) ? $APP.cljs.core.count($acc__$1$$) >= $self__$$.attr.limit && !0 : $and__5023__auto__$$;
    }())) {
      for (var $datoms__$2$$ = $datoms__$1$$;;) {
        $G__72244_datom$jscomp$7_datom__$1_this$$$ = datascript.pull_api.first_seq($datoms__$2$$);
        if ($G__72244_datom$jscomp$7_datom__$1_this$$$ == null || $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($G__72244_datom$jscomp$7_datom__$1_this$$$.a, $self__$$.attr.name)) {
          return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new datascript.pull_api.ResultFrame($APP.cljs.core.persistent_BANG_($acc__$1$$), function() {
            var $or__5025__auto__$$ = $datoms__$2$$;
            return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs.core.List.EMPTY;
          }(), null, null, null)], null);
        }
        $datoms__$2$$ = datascript.pull_api.next_seq($datoms__$2$$);
      }
      break;
    } else {
      $G__72244_datom$jscomp$7_datom__$1_this$$$ = $APP.cljs.core.conj_BANG_.cljs$core$IFn$_invoke$arity$2($acc__$1$$, $G__72244_datom$jscomp$7_datom__$1_this$$$.v), $G__72245_context$$ = datascript.pull_api.next_seq($datoms__$1$$), $acc__$1$$ = $G__72244_datom$jscomp$7_datom__$1_this$$$, $datoms__$1$$ = $G__72245_context$$;
    }
  }
};
datascript.pull_api.MultivalAttrFrame.prototype.datascript$pull_api$IFrame$_str$arity$1 = function($this$$$) {
  return ["MultivalAttrFrame\x3cattr\x3d", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.pull_api.attr_str(this.attr)), "\x3e"].join("");
};
datascript.pull_api.MultivalAttrFrame.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2947$acc, $APP.cljs.core.with_meta($APP.cljs$cst$3012$attr, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$78$tag, cljs$cst$4564$PullAttr], null)), cljs$cst$4562$datoms], null);
};
datascript.pull_api.MultivalAttrFrame.cljs$lang$type = !0;
datascript.pull_api.MultivalAttrFrame.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.pull-api/MultivalAttrFrame", null, 1, null);
};
datascript.pull_api.MultivalAttrFrame.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.pull-api/MultivalAttrFrame");
};
datascript.pull_api.__GT_MultivalAttrFrame = function($acc$$, $attr$$, $datoms$$) {
  return new datascript.pull_api.MultivalAttrFrame($acc$$, $attr$$, $datoms$$, null, null, null);
};
datascript.pull_api.map__GT_MultivalAttrFrame = function($G__71926$$) {
  var $G__71958$jscomp$inline_6862_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__71926$$, $APP.cljs$cst$4563$acc, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$3020$attr, cljs$cst$4480$datoms], 0));
  $G__71958$jscomp$inline_6862_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__71926$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__71958$jscomp$inline_6862_extmap__5365__auto__$$) : $G__71958$jscomp$inline_6862_extmap__5365__auto__$$;
  return new datascript.pull_api.MultivalAttrFrame($APP.cljs$cst$4563$acc.cljs$core$IFn$_invoke$arity$1($G__71926$$), $APP.cljs$cst$3020$attr.cljs$core$IFn$_invoke$arity$1($G__71926$$), cljs$cst$4480$datoms.cljs$core$IFn$_invoke$arity$1($G__71926$$), null, $APP.cljs.core.not_empty($G__71958$jscomp$inline_6862_extmap__5365__auto__$$), null);
};
datascript.pull_api.MultivalRefAttrFrame = function($seen$$, $recursion_limits$$, $acc$$, $pattern$$, $attr$$, $datoms$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.seen = $seen$$;
  this.recursion_limits = $recursion_limits$$;
  this.acc = $acc$$;
  this.pattern = $pattern$$;
  this.attr = $attr$$;
  this.datoms = $datoms$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.pull_api.MultivalRefAttrFrame.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.pull_api.MultivalRefAttrFrame.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k71960$$, $else__5326__auto__$$) {
  switch($k71960$$ instanceof $APP.cljs.core.Keyword ? $k71960$$.fqn : null) {
    case "seen":
      return this.seen;
    case "recursion-limits":
      return this.recursion_limits;
    case "acc":
      return this.acc;
    case "pattern":
      return this.pattern;
    case "attr":
      return this.attr;
    case "datoms":
      return this.datoms;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k71960$$, $else__5326__auto__$$);
  }
};
datascript.pull_api.MultivalRefAttrFrame.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__71965_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__71965_v__5348__auto__$$, 0, null);
    $p__71965_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__71965_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__71965_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__71965_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.pull_api.MultivalRefAttrFrame.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.pull-api.MultivalRefAttrFrame{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 6, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2720$seen, this.seen], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4565$recursion_limits, this.recursion_limits], 
  null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$4563$acc, this.acc], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2381$pattern, this.pattern], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$3020$attr, this.attr], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
  [cljs$cst$4480$datoms, this.datoms], null)], null), this.__extmap));
};
datascript.pull_api.MultivalRefAttrFrame.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__71959$$) {
  return new $APP.cljs.core.RecordIter(0, this, 6, new $APP.cljs.core.PersistentVector(null, 6, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2720$seen, cljs$cst$4565$recursion_limits, $APP.cljs$cst$4563$acc, $APP.cljs$cst$2381$pattern, $APP.cljs$cst$3020$attr, cljs$cst$4480$datoms], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.pull_api.MultivalRefAttrFrame.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.pull_api.MultivalRefAttrFrame.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.pull_api.MultivalRefAttrFrame(this.seen, this.recursion_limits, this.acc, this.pattern, this.attr, this.datoms, this.__meta, this.__extmap, this.__hash);
};
datascript.pull_api.MultivalRefAttrFrame.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 6 + $APP.cljs.core.count(this.__extmap);
};
datascript.pull_api.MultivalRefAttrFrame.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$150_h__5134__auto____$1$jscomp$150_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$150_h__5134__auto____$1$jscomp$150_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$150_h__5134__auto____$1$jscomp$150_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$150_h__5134__auto____$1$jscomp$150_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$150_h__5134__auto____$1$jscomp$150_this__5319__auto__$$ = 1769511936 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.pull_api.MultivalRefAttrFrame.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this71961$$, $other71962$$) {
  return $other71962$$ != null && this.constructor === $other71962$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.seen, $other71962$$.seen) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.recursion_limits, $other71962$$.recursion_limits) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.acc, $other71962$$.acc) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.pattern, $other71962$$.pattern) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.attr, 
  $other71962$$.attr) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.datoms, $other71962$$.datoms) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other71962$$.__extmap);
};
datascript.pull_api.MultivalRefAttrFrame.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 6, [$APP.cljs$cst$4563$acc, null, $APP.cljs$cst$2720$seen, null, cljs$cst$4565$recursion_limits, null, cljs$cst$4480$datoms, null, $APP.cljs$cst$2381$pattern, null, $APP.cljs$cst$3020$attr, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, 
  this), this.__meta), $k__5334__auto__$$) : new datascript.pull_api.MultivalRefAttrFrame(this.seen, this.recursion_limits, this.acc, this.pattern, this.attr, this.datoms, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.pull_api.MultivalRefAttrFrame.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k71960$$) {
  switch($k71960$$ instanceof $APP.cljs.core.Keyword ? $k71960$$.fqn : null) {
    case "seen":
    case "recursion-limits":
    case "acc":
    case "pattern":
    case "attr":
    case "datoms":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k71960$$);
  }
};
datascript.pull_api.MultivalRefAttrFrame.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__71982_this__5331__auto__$$, $k__5332__auto__$$, $G__71959$$) {
  $pred__71982_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__71982_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__71982_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2720$seen, $k__5332__auto__$$) : $pred__71982_this__5331__auto__$$.call(null, $APP.cljs$cst$2720$seen, $k__5332__auto__$$)) ? new datascript.pull_api.MultivalRefAttrFrame($G__71959$$, this.recursion_limits, this.acc, this.pattern, this.attr, this.datoms, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__71982_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? 
  $pred__71982_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4565$recursion_limits, $k__5332__auto__$$) : $pred__71982_this__5331__auto__$$.call(null, cljs$cst$4565$recursion_limits, $k__5332__auto__$$)) ? new datascript.pull_api.MultivalRefAttrFrame(this.seen, $G__71959$$, this.acc, this.pattern, this.attr, this.datoms, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__71982_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__71982_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4563$acc, 
  $k__5332__auto__$$) : $pred__71982_this__5331__auto__$$.call(null, $APP.cljs$cst$4563$acc, $k__5332__auto__$$)) ? new datascript.pull_api.MultivalRefAttrFrame(this.seen, this.recursion_limits, $G__71959$$, this.pattern, this.attr, this.datoms, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__71982_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__71982_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2381$pattern, $k__5332__auto__$$) : $pred__71982_this__5331__auto__$$.call(null, 
  $APP.cljs$cst$2381$pattern, $k__5332__auto__$$)) ? new datascript.pull_api.MultivalRefAttrFrame(this.seen, this.recursion_limits, this.acc, $G__71959$$, this.attr, this.datoms, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__71982_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__71982_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$3020$attr, $k__5332__auto__$$) : $pred__71982_this__5331__auto__$$.call(null, $APP.cljs$cst$3020$attr, $k__5332__auto__$$)) ? 
  new datascript.pull_api.MultivalRefAttrFrame(this.seen, this.recursion_limits, this.acc, this.pattern, $G__71959$$, this.datoms, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__71982_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__71982_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4480$datoms, $k__5332__auto__$$) : $pred__71982_this__5331__auto__$$.call(null, cljs$cst$4480$datoms, $k__5332__auto__$$)) ? new datascript.pull_api.MultivalRefAttrFrame(this.seen, 
  this.recursion_limits, this.acc, this.pattern, this.attr, $G__71959$$, this.__meta, this.__extmap, null) : new datascript.pull_api.MultivalRefAttrFrame(this.seen, this.recursion_limits, this.acc, this.pattern, this.attr, this.datoms, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__71959$$), null);
};
datascript.pull_api.MultivalRefAttrFrame.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 6, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$2720$seen, this.seen, null), new $APP.cljs.core.MapEntry(cljs$cst$4565$recursion_limits, this.recursion_limits, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$4563$acc, this.acc, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$2381$pattern, this.pattern, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$3020$attr, 
  this.attr, null), new $APP.cljs.core.MapEntry(cljs$cst$4480$datoms, this.datoms, null)], null), this.__extmap));
};
datascript.pull_api.MultivalRefAttrFrame.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__71959$$) {
  return new datascript.pull_api.MultivalRefAttrFrame(this.seen, this.recursion_limits, this.acc, this.pattern, this.attr, this.datoms, $G__71959$$, this.__extmap, this.__hash);
};
datascript.pull_api.MultivalRefAttrFrame.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.pull_api.MultivalRefAttrFrame.prototype.datascript$pull_api$IFrame$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.pull_api.MultivalRefAttrFrame.prototype.datascript$pull_api$IFrame$_merge$arity$2 = function($this$$$, $result$$) {
  return new datascript.pull_api.MultivalRefAttrFrame(this.seen, this.recursion_limits, datascript.pull_api.conj_some_BANG_(this.acc, $result$$.value), this.pattern, this.attr, datascript.pull_api.next_seq(this.datoms), null, null, null);
};
datascript.pull_api.MultivalRefAttrFrame.prototype.datascript$pull_api$IFrame$_run$arity$2 = function($datom$jscomp$8_id$jscomp$98_this$$$, $context$jscomp$20_datom__$1$$) {
  var $self__$$ = this;
  $datom$jscomp$8_id$jscomp$98_this$$$ = datascript.pull_api.first_seq($self__$$.datoms);
  if ($datom$jscomp$8_id$jscomp$98_this$$$ == null || $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($datom$jscomp$8_id$jscomp$98_this$$$.a, $self__$$.attr.name)) {
    return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new datascript.pull_api.ResultFrame($APP.cljs.core.not_empty($APP.cljs.core.persistent_BANG_($self__$$.acc)), function() {
      var $or__5025__auto__$$ = $self__$$.datoms;
      return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs.core.List.EMPTY;
    }(), null, null, null)], null);
  }
  if ($APP.cljs.core.truth_(function() {
    var $and__5023__auto__$$ = $self__$$.attr.limit;
    return $APP.cljs.core.truth_($and__5023__auto__$$) ? $APP.cljs.core.count($self__$$.acc) >= $self__$$.attr.limit && !0 : $and__5023__auto__$$;
  }())) {
    for (var $datoms__$1$$ = $self__$$.datoms;;) {
      $context$jscomp$20_datom__$1$$ = datascript.pull_api.first_seq($datoms__$1$$);
      if ($context$jscomp$20_datom__$1$$ == null || $APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($context$jscomp$20_datom__$1$$.a, $self__$$.attr.name)) {
        return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new datascript.pull_api.ResultFrame($APP.cljs.core.persistent_BANG_($self__$$.acc), function() {
          var $or__5025__auto__$$ = $datoms__$1$$;
          return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs.core.List.EMPTY;
        }(), null, null, null)], null);
      }
      $datoms__$1$$ = datascript.pull_api.next_seq($datoms__$1$$);
    }
  } else {
    return $datom$jscomp$8_id$jscomp$98_this$$$ = $APP.cljs.core.truth_($self__$$.attr.reverse_QMARK_) ? $datom$jscomp$8_id$jscomp$98_this$$$.e : $datom$jscomp$8_id$jscomp$98_this$$$.v, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [this, datascript.pull_api.ref_frame.cljs$core$IFn$_invoke$arity$6 ? datascript.pull_api.ref_frame.cljs$core$IFn$_invoke$arity$6($context$jscomp$20_datom__$1$$, $self__$$.seen, $self__$$.recursion_limits, $self__$$.pattern, 
    $self__$$.attr, $datom$jscomp$8_id$jscomp$98_this$$$) : datascript.pull_api.ref_frame.call(null, $context$jscomp$20_datom__$1$$, $self__$$.seen, $self__$$.recursion_limits, $self__$$.pattern, $self__$$.attr, $datom$jscomp$8_id$jscomp$98_this$$$)], null);
  }
};
datascript.pull_api.MultivalRefAttrFrame.prototype.datascript$pull_api$IFrame$_str$arity$1 = function($this$$$) {
  return ["MultivalAttrFrame\x3cattr\x3d", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.pull_api.attr_str(this.attr)), "\x3e"].join("");
};
datascript.pull_api.MultivalRefAttrFrame.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 6, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$88$seen, cljs$cst$4566$recursion_limits, $APP.cljs$cst$2947$acc, $APP.cljs$cst$2203$pattern, $APP.cljs.core.with_meta($APP.cljs$cst$3012$attr, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$78$tag, cljs$cst$4564$PullAttr], null)), cljs$cst$4562$datoms], null);
};
datascript.pull_api.MultivalRefAttrFrame.cljs$lang$type = !0;
datascript.pull_api.MultivalRefAttrFrame.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.pull-api/MultivalRefAttrFrame", null, 1, null);
};
datascript.pull_api.MultivalRefAttrFrame.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.pull-api/MultivalRefAttrFrame");
};
datascript.pull_api.__GT_MultivalRefAttrFrame = function($seen$$, $recursion_limits$$, $acc$$, $pattern$$, $attr$$, $datoms$$) {
  return new datascript.pull_api.MultivalRefAttrFrame($seen$$, $recursion_limits$$, $acc$$, $pattern$$, $attr$$, $datoms$$, null, null, null);
};
datascript.pull_api.map__GT_MultivalRefAttrFrame = function($G__71963$$) {
  var $G__71993$jscomp$inline_6864_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__71963$$, $APP.cljs$cst$2720$seen, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$4565$recursion_limits, $APP.cljs$cst$4563$acc, $APP.cljs$cst$2381$pattern, $APP.cljs$cst$3020$attr, cljs$cst$4480$datoms], 0));
  $G__71993$jscomp$inline_6864_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__71963$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__71993$jscomp$inline_6864_extmap__5365__auto__$$) : $G__71993$jscomp$inline_6864_extmap__5365__auto__$$;
  return new datascript.pull_api.MultivalRefAttrFrame($APP.cljs$cst$2720$seen.cljs$core$IFn$_invoke$arity$1($G__71963$$), cljs$cst$4565$recursion_limits.cljs$core$IFn$_invoke$arity$1($G__71963$$), $APP.cljs$cst$4563$acc.cljs$core$IFn$_invoke$arity$1($G__71963$$), $APP.cljs$cst$2381$pattern.cljs$core$IFn$_invoke$arity$1($G__71963$$), $APP.cljs$cst$3020$attr.cljs$core$IFn$_invoke$arity$1($G__71963$$), cljs$cst$4480$datoms.cljs$core$IFn$_invoke$arity$1($G__71963$$), null, $APP.cljs.core.not_empty($G__71993$jscomp$inline_6864_extmap__5365__auto__$$), 
  null);
};
datascript.pull_api.AttrsFrame = function($seen$$, $recursion_limits$$, $acc$$, $pattern$$, $attr$$, $attrs$$, $datoms$$, $id$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.seen = $seen$$;
  this.recursion_limits = $recursion_limits$$;
  this.acc = $acc$$;
  this.pattern = $pattern$$;
  this.attr = $attr$$;
  this.attrs = $attrs$$;
  this.datoms = $datoms$$;
  this.id = $id$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.pull_api.AttrsFrame.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.pull_api.AttrsFrame.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k71995$$, $else__5326__auto__$$) {
  switch($k71995$$ instanceof $APP.cljs.core.Keyword ? $k71995$$.fqn : null) {
    case "seen":
      return this.seen;
    case "recursion-limits":
      return this.recursion_limits;
    case "acc":
      return this.acc;
    case "pattern":
      return this.pattern;
    case "attr":
      return this.attr;
    case "attrs":
      return this.attrs;
    case "datoms":
      return this.datoms;
    case "id":
      return this.id;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k71995$$, $else__5326__auto__$$);
  }
};
datascript.pull_api.AttrsFrame.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72009_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72009_v__5348__auto__$$, 0, null);
    $p__72009_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72009_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72009_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72009_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.pull_api.AttrsFrame.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.pull-api.AttrsFrame{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 8, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2720$seen, this.seen], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4565$recursion_limits, this.recursion_limits], 
  null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$4563$acc, this.acc], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2381$pattern, this.pattern], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$3020$attr, this.attr], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
  [$APP.cljs$cst$2743$attrs, this.attrs], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4480$datoms, this.datoms], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id, this.id], null)], null), this.__extmap));
};
datascript.pull_api.AttrsFrame.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__71994$$) {
  return new $APP.cljs.core.RecordIter(0, this, 8, new $APP.cljs.core.PersistentVector(null, 8, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2720$seen, cljs$cst$4565$recursion_limits, $APP.cljs$cst$4563$acc, $APP.cljs$cst$2381$pattern, $APP.cljs$cst$3020$attr, $APP.cljs$cst$2743$attrs, cljs$cst$4480$datoms, $APP.cljs$cst$396$id], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.pull_api.AttrsFrame.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.pull_api.AttrsFrame.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.pull_api.AttrsFrame(this.seen, this.recursion_limits, this.acc, this.pattern, this.attr, this.attrs, this.datoms, this.id, this.__meta, this.__extmap, this.__hash);
};
datascript.pull_api.AttrsFrame.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 8 + $APP.cljs.core.count(this.__extmap);
};
datascript.pull_api.AttrsFrame.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$151_h__5134__auto____$1$jscomp$151_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$151_h__5134__auto____$1$jscomp$151_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$151_h__5134__auto____$1$jscomp$151_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$151_h__5134__auto____$1$jscomp$151_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$151_h__5134__auto____$1$jscomp$151_this__5319__auto__$$ = 1127179791 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.pull_api.AttrsFrame.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this71996$$, $other71997$$) {
  return $other71997$$ != null && this.constructor === $other71997$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.seen, $other71997$$.seen) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.recursion_limits, $other71997$$.recursion_limits) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.acc, $other71997$$.acc) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.pattern, $other71997$$.pattern) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.attr, 
  $other71997$$.attr) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.attrs, $other71997$$.attrs) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.datoms, $other71997$$.datoms) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.id, $other71997$$.id) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other71997$$.__extmap);
};
datascript.pull_api.AttrsFrame.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 8, [$APP.cljs$cst$4563$acc, null, $APP.cljs$cst$2720$seen, null, $APP.cljs$cst$396$id, null, cljs$cst$4565$recursion_limits, null, $APP.cljs$cst$2743$attrs, null, cljs$cst$4480$datoms, null, $APP.cljs$cst$2381$pattern, null, $APP.cljs$cst$3020$attr, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, 
  this), this.__meta), $k__5334__auto__$$) : new datascript.pull_api.AttrsFrame(this.seen, this.recursion_limits, this.acc, this.pattern, this.attr, this.attrs, this.datoms, this.id, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.pull_api.AttrsFrame.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k71995$$) {
  switch($k71995$$ instanceof $APP.cljs.core.Keyword ? $k71995$$.fqn : null) {
    case "seen":
    case "recursion-limits":
    case "acc":
    case "pattern":
    case "attr":
    case "attrs":
    case "datoms":
    case "id":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k71995$$);
  }
};
datascript.pull_api.AttrsFrame.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72023_this__5331__auto__$$, $k__5332__auto__$$, $G__71994$$) {
  $pred__72023_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72023_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72023_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2720$seen, $k__5332__auto__$$) : $pred__72023_this__5331__auto__$$.call(null, $APP.cljs$cst$2720$seen, $k__5332__auto__$$)) ? new datascript.pull_api.AttrsFrame($G__71994$$, this.recursion_limits, this.acc, this.pattern, this.attr, this.attrs, this.datoms, this.id, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72023_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? 
  $pred__72023_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4565$recursion_limits, $k__5332__auto__$$) : $pred__72023_this__5331__auto__$$.call(null, cljs$cst$4565$recursion_limits, $k__5332__auto__$$)) ? new datascript.pull_api.AttrsFrame(this.seen, $G__71994$$, this.acc, this.pattern, this.attr, this.attrs, this.datoms, this.id, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72023_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72023_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4563$acc, 
  $k__5332__auto__$$) : $pred__72023_this__5331__auto__$$.call(null, $APP.cljs$cst$4563$acc, $k__5332__auto__$$)) ? new datascript.pull_api.AttrsFrame(this.seen, this.recursion_limits, $G__71994$$, this.pattern, this.attr, this.attrs, this.datoms, this.id, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72023_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72023_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2381$pattern, $k__5332__auto__$$) : $pred__72023_this__5331__auto__$$.call(null, 
  $APP.cljs$cst$2381$pattern, $k__5332__auto__$$)) ? new datascript.pull_api.AttrsFrame(this.seen, this.recursion_limits, this.acc, $G__71994$$, this.attr, this.attrs, this.datoms, this.id, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72023_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72023_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$3020$attr, $k__5332__auto__$$) : $pred__72023_this__5331__auto__$$.call(null, $APP.cljs$cst$3020$attr, $k__5332__auto__$$)) ? 
  new datascript.pull_api.AttrsFrame(this.seen, this.recursion_limits, this.acc, this.pattern, $G__71994$$, this.attrs, this.datoms, this.id, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72023_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72023_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2743$attrs, $k__5332__auto__$$) : $pred__72023_this__5331__auto__$$.call(null, $APP.cljs$cst$2743$attrs, $k__5332__auto__$$)) ? new datascript.pull_api.AttrsFrame(this.seen, 
  this.recursion_limits, this.acc, this.pattern, this.attr, $G__71994$$, this.datoms, this.id, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72023_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72023_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4480$datoms, $k__5332__auto__$$) : $pred__72023_this__5331__auto__$$.call(null, cljs$cst$4480$datoms, $k__5332__auto__$$)) ? new datascript.pull_api.AttrsFrame(this.seen, this.recursion_limits, this.acc, this.pattern, 
  this.attr, this.attrs, $G__71994$$, this.id, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72023_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72023_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$396$id, $k__5332__auto__$$) : $pred__72023_this__5331__auto__$$.call(null, $APP.cljs$cst$396$id, $k__5332__auto__$$)) ? new datascript.pull_api.AttrsFrame(this.seen, this.recursion_limits, this.acc, this.pattern, this.attr, this.attrs, this.datoms, $G__71994$$, 
  this.__meta, this.__extmap, null) : new datascript.pull_api.AttrsFrame(this.seen, this.recursion_limits, this.acc, this.pattern, this.attr, this.attrs, this.datoms, this.id, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__71994$$), null);
};
datascript.pull_api.AttrsFrame.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 8, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$2720$seen, this.seen, null), new $APP.cljs.core.MapEntry(cljs$cst$4565$recursion_limits, this.recursion_limits, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$4563$acc, this.acc, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$2381$pattern, this.pattern, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$3020$attr, 
  this.attr, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$2743$attrs, this.attrs, null), new $APP.cljs.core.MapEntry(cljs$cst$4480$datoms, this.datoms, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$396$id, this.id, null)], null), this.__extmap));
};
datascript.pull_api.AttrsFrame.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__71994$$) {
  return new datascript.pull_api.AttrsFrame(this.seen, this.recursion_limits, this.acc, this.pattern, this.attr, this.attrs, this.datoms, this.id, $G__71994$$, this.__extmap, this.__hash);
};
datascript.pull_api.AttrsFrame.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.pull_api.AttrsFrame.prototype.datascript$pull_api$IFrame$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.pull_api.AttrsFrame.prototype.datascript$pull_api$IFrame$_merge$arity$2 = function($this$$$, $result$$) {
  var $self__$$ = this;
  return new datascript.pull_api.AttrsFrame($self__$$.seen, $self__$$.recursion_limits, datascript.pull_api.assoc_some_BANG_($self__$$.acc, $self__$$.attr.as, function() {
    var $G__72027$$ = $result$$.value, $fexpr__72026$$ = $self__$$.attr.xform;
    return $fexpr__72026$$.cljs$core$IFn$_invoke$arity$1 ? $fexpr__72026$$.cljs$core$IFn$_invoke$arity$1($G__72027$$) : $fexpr__72026$$.call(null, $G__72027$$);
  }()), $self__$$.pattern, datascript.pull_api.first_seq($self__$$.attrs), datascript.pull_api.next_seq($self__$$.attrs), $APP.cljs.core.not_empty(function() {
    var $or__5025__auto__$$ = $result$$.datoms;
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : datascript.pull_api.next_seq($self__$$.datoms);
  }()), $self__$$.id, null, null, null);
};
datascript.pull_api.AttrsFrame.prototype.datascript$pull_api$IFrame$_run$arity$2 = function($G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$, $context$$) {
  var $self__$$ = this, $acc__$1$$ = $self__$$.acc, $attr__$1$$ = $self__$$.attr;
  $G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$ = $self__$$.attrs;
  for (var $G__72279_G__72283_G__72287_G__72291_G__72295_G__72300_G__72304_G__72311_datoms__$1$$ = $self__$$.datoms;;) {
    if ($G__72279_G__72283_G__72287_G__72291_G__72295_G__72300_G__72304_G__72311_datoms__$1$$ == null && $attr__$1$$ == null) {
      return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [function() {
        var $G__72059$$ = $self__$$.seen, $G__72060$$ = $self__$$.recursion_limits, $G__72061$$ = $acc__$1$$, $G__72062$$ = $self__$$.pattern, $G__72063$$ = datascript.pull_api.first_seq($self__$$.pattern.reverse_attrs), $G__72064$$ = datascript.pull_api.next_seq($self__$$.pattern.reverse_attrs), $G__72065$$ = $self__$$.id;
        return datascript.pull_api.__GT_ReverseAttrsFrame.cljs$core$IFn$_invoke$arity$7 ? datascript.pull_api.__GT_ReverseAttrsFrame.cljs$core$IFn$_invoke$arity$7($G__72059$$, $G__72060$$, $G__72061$$, $G__72062$$, $G__72063$$, $G__72064$$, $G__72065$$) : datascript.pull_api.__GT_ReverseAttrsFrame.call(null, $G__72059$$, $G__72060$$, $G__72061$$, $G__72062$$, $G__72063$$, $G__72064$$, $G__72065$$);
      }()], null);
    }
    if ($attr__$1$$ != null && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2432$db_SLASH_id, $attr__$1$$.name)) {
      var $G__72276_G__72280_G__72284_G__72288_G__72292_G__72297_G__72301_G__72308_temp__5827__auto__$$ = $APP.cljs.core.assoc_BANG_.cljs$core$IFn$_invoke$arity$3($acc__$1$$, $attr__$1$$.as, function() {
        var $fexpr__72066$$ = $attr__$1$$.xform;
        return $fexpr__72066$$.cljs$core$IFn$_invoke$arity$1 ? $fexpr__72066$$.cljs$core$IFn$_invoke$arity$1($self__$$.id) : $fexpr__72066$$.call(null, $self__$$.id);
      }()), $G__72277_G__72281_G__72285_G__72289_G__72293_G__72298_G__72302_G__72309_datom_attr$$ = datascript.pull_api.first_seq($G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$);
      $G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$ = datascript.pull_api.next_seq($G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$);
      $acc__$1$$ = $G__72276_G__72280_G__72284_G__72288_G__72292_G__72297_G__72301_G__72308_temp__5827__auto__$$;
      $attr__$1$$ = $G__72277_G__72281_G__72285_G__72289_G__72293_G__72298_G__72302_G__72309_datom_attr$$;
    } else {
      var $datom$$ = datascript.pull_api.first_seq($G__72279_G__72283_G__72287_G__72291_G__72295_G__72300_G__72304_G__72311_datoms__$1$$), $cmp$$ = $APP.cljs.core.truth_(function() {
        var $and__5023__auto__$$ = $datom$$;
        return $APP.cljs.core.truth_($and__5023__auto__$$) ? $attr__$1$$ : $and__5023__auto__$$;
      }()) ? $APP.cljs.core.compare($attr__$1$$.name, $datom$$.a) : null, $attr_ahead_QMARK_$$ = function() {
        var $and__5023__auto__$jscomp$247_or__5025__auto__$$ = $attr__$1$$ == null;
        if ($and__5023__auto__$jscomp$247_or__5025__auto__$$) {
          return $and__5023__auto__$jscomp$247_or__5025__auto__$$;
        }
        $and__5023__auto__$jscomp$247_or__5025__auto__$$ = $cmp$$;
        return $APP.cljs.core.truth_($and__5023__auto__$jscomp$247_or__5025__auto__$$) ? $cmp$$ > 0 : $and__5023__auto__$jscomp$247_or__5025__auto__$$;
      }(), $datom_ahead_QMARK_$$ = function() {
        var $and__5023__auto__$jscomp$248_or__5025__auto__$$ = $datom$$ == null;
        if ($and__5023__auto__$jscomp$248_or__5025__auto__$$) {
          return $and__5023__auto__$jscomp$248_or__5025__auto__$$;
        }
        $and__5023__auto__$jscomp$248_or__5025__auto__$$ = $cmp$$;
        return $APP.cljs.core.truth_($and__5023__auto__$jscomp$248_or__5025__auto__$$) ? $cmp$$ < 0 : $and__5023__auto__$jscomp$248_or__5025__auto__$$;
      }();
      if ($APP.cljs.core.truth_(function() {
        var $and__5023__auto__$jscomp$249_and__5023__auto____$1$jscomp$53_and__5023__auto____$2$$ = $self__$$.pattern.wildcard_QMARK_;
        return $APP.cljs.core.truth_($and__5023__auto__$jscomp$249_and__5023__auto____$1$jscomp$53_and__5023__auto____$2$$) ? ($and__5023__auto__$jscomp$249_and__5023__auto____$1$jscomp$53_and__5023__auto____$2$$ = $datom$$ != null) ? ($and__5023__auto__$jscomp$249_and__5023__auto____$1$jscomp$53_and__5023__auto____$2$$ = $attr_ahead_QMARK_$$, $APP.cljs.core.truth_($and__5023__auto__$jscomp$249_and__5023__auto____$1$jscomp$53_and__5023__auto____$2$$) ? !0 : $and__5023__auto__$jscomp$249_and__5023__auto____$1$jscomp$53_and__5023__auto____$2$$) : 
        $and__5023__auto__$jscomp$249_and__5023__auto____$1$jscomp$53_and__5023__auto____$2$$ : $and__5023__auto__$jscomp$249_and__5023__auto____$1$jscomp$53_and__5023__auto____$2$$;
      }())) {
        $G__72277_G__72281_G__72285_G__72289_G__72293_G__72298_G__72302_G__72309_datom_attr$$ = datascript.lru._get(datascript.db.unfiltered_db($context$$.db).pull_attrs, $datom$$.a, function($acc__$1$$, $attr__$1$$, $attrs__$1$$, $datoms__$1$$, $datom$$, $cmp$$, $attr_ahead_QMARK_$$, $datom_ahead_QMARK_$$, $this$__$1$$) {
          return function() {
            return datascript.pull_parser.parse_attr_name($context$$.db, $datom$$.a);
          };
        }($acc__$1$$, $attr__$1$$, $G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$, $G__72279_G__72283_G__72287_G__72291_G__72295_G__72300_G__72304_G__72311_datoms__$1$$, $datom$$, $cmp$$, $attr_ahead_QMARK_$$, $datom_ahead_QMARK_$$, this)), $G__72276_G__72280_G__72284_G__72288_G__72292_G__72297_G__72301_G__72308_temp__5827__auto__$$ = $acc__$1$$, $G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$ = 
        $APP.cljs.core.truth_($attr__$1$$) ? datascript.pull_api.conj_seq($G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$, $attr__$1$$) : null, $acc__$1$$ = $G__72276_G__72280_G__72284_G__72288_G__72292_G__72297_G__72301_G__72308_temp__5827__auto__$$, $attr__$1$$ = $G__72277_G__72281_G__72285_G__72289_G__72293_G__72298_G__72302_G__72309_datom_attr$$;
      } else {
        if ($APP.cljs.core.truth_($attr_ahead_QMARK_$$)) {
          $G__72276_G__72280_G__72284_G__72288_G__72292_G__72297_G__72301_G__72308_temp__5827__auto__$$ = $acc__$1$$, $G__72277_G__72281_G__72285_G__72289_G__72293_G__72298_G__72302_G__72309_datom_attr$$ = $attr__$1$$, $G__72279_G__72283_G__72287_G__72291_G__72295_G__72300_G__72304_G__72311_datoms__$1$$ = datascript.pull_api.next_seq($G__72279_G__72283_G__72287_G__72291_G__72295_G__72300_G__72304_G__72311_datoms__$1$$), $acc__$1$$ = $G__72276_G__72280_G__72284_G__72288_G__72292_G__72297_G__72301_G__72308_temp__5827__auto__$$, 
          $attr__$1$$ = $G__72277_G__72281_G__72285_G__72289_G__72293_G__72298_G__72302_G__72309_datom_attr$$;
        } else {
          if (datascript.pull_api.visit($context$$, cljs$cst$4567$db_DOT_pull_SLASH_attr, $self__$$.id, $attr__$1$$.name, null), $APP.cljs.core.truth_(function() {
            var $and__5023__auto__$$ = $datom_ahead_QMARK_$$;
            return $APP.cljs.core.truth_($and__5023__auto__$$) ? $attr__$1$$ == null && !0 : $and__5023__auto__$$;
          }())) {
            $G__72276_G__72280_G__72284_G__72288_G__72292_G__72297_G__72301_G__72308_temp__5827__auto__$$ = $acc__$1$$, $G__72277_G__72281_G__72285_G__72289_G__72293_G__72298_G__72302_G__72309_datom_attr$$ = datascript.pull_api.first_seq($G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$), $G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$ = datascript.pull_api.next_seq($G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$), 
            $acc__$1$$ = $G__72276_G__72280_G__72284_G__72288_G__72292_G__72297_G__72301_G__72308_temp__5827__auto__$$, $attr__$1$$ = $G__72277_G__72281_G__72285_G__72289_G__72293_G__72298_G__72302_G__72309_datom_attr$$;
          } else {
            if ($APP.cljs.core.truth_(function() {
              var $and__5023__auto__$$ = $datom_ahead_QMARK_$$;
              return $APP.cljs.core.truth_($and__5023__auto__$$) ? $APP.cljs$cst$205$default.cljs$core$IFn$_invoke$arity$1($attr__$1$$) != null && !0 : $and__5023__auto__$$;
            }())) {
              $G__72276_G__72280_G__72284_G__72288_G__72292_G__72297_G__72301_G__72308_temp__5827__auto__$$ = $APP.cljs.core.assoc_BANG_.cljs$core$IFn$_invoke$arity$3($acc__$1$$, $attr__$1$$.as, $APP.cljs$cst$205$default.cljs$core$IFn$_invoke$arity$1($attr__$1$$)), $G__72277_G__72281_G__72285_G__72289_G__72293_G__72298_G__72302_G__72309_datom_attr$$ = datascript.pull_api.first_seq($G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$), $G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$ = 
              datascript.pull_api.next_seq($G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$), $acc__$1$$ = $G__72276_G__72280_G__72284_G__72288_G__72292_G__72297_G__72301_G__72308_temp__5827__auto__$$, $attr__$1$$ = $G__72277_G__72281_G__72285_G__72289_G__72293_G__72298_G__72302_G__72309_datom_attr$$;
            } else {
              if ($APP.cljs.core.truth_($datom_ahead_QMARK_$$)) {
                $G__72276_G__72280_G__72284_G__72288_G__72292_G__72297_G__72301_G__72308_temp__5827__auto__$$ = function() {
                  var $fexpr__72071$$ = $attr__$1$$.xform;
                  return $fexpr__72071$$.cljs$core$IFn$_invoke$arity$1 ? $fexpr__72071$$.cljs$core$IFn$_invoke$arity$1(null) : $fexpr__72071$$.call(null, null);
                }(), $G__72276_G__72280_G__72284_G__72288_G__72292_G__72297_G__72301_G__72308_temp__5827__auto__$$ == null ? ($G__72276_G__72280_G__72284_G__72288_G__72292_G__72297_G__72301_G__72308_temp__5827__auto__$$ = $acc__$1$$, $G__72277_G__72281_G__72285_G__72289_G__72293_G__72298_G__72302_G__72309_datom_attr$$ = datascript.pull_api.first_seq($G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$), $G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$ = 
                datascript.pull_api.next_seq($G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$), $acc__$1$$ = $G__72276_G__72280_G__72284_G__72288_G__72292_G__72297_G__72301_G__72308_temp__5827__auto__$$, $attr__$1$$ = $G__72277_G__72281_G__72285_G__72289_G__72293_G__72298_G__72302_G__72309_datom_attr$$) : ($G__72276_G__72280_G__72284_G__72288_G__72292_G__72297_G__72301_G__72308_temp__5827__auto__$$ = $APP.cljs.core.assoc_BANG_.cljs$core$IFn$_invoke$arity$3($acc__$1$$, 
                $attr__$1$$.as, $G__72276_G__72280_G__72284_G__72288_G__72292_G__72297_G__72301_G__72308_temp__5827__auto__$$), $G__72277_G__72281_G__72285_G__72289_G__72293_G__72298_G__72302_G__72309_datom_attr$$ = datascript.pull_api.first_seq($G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$), $G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$ = datascript.pull_api.next_seq($G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$), 
                $acc__$1$$ = $G__72276_G__72280_G__72284_G__72288_G__72292_G__72297_G__72301_G__72308_temp__5827__auto__$$, $attr__$1$$ = $G__72277_G__72281_G__72285_G__72289_G__72293_G__72298_G__72302_G__72309_datom_attr$$);
              } else {
                if ($APP.cljs.core.truth_(function() {
                  var $and__5023__auto__$jscomp$252_and__5023__auto____$1$$ = $attr__$1$$.multival_QMARK_;
                  return $APP.cljs.core.truth_($and__5023__auto__$jscomp$252_and__5023__auto____$1$$) ? ($and__5023__auto__$jscomp$252_and__5023__auto____$1$$ = $attr__$1$$.ref_QMARK_, $APP.cljs.core.truth_($and__5023__auto__$jscomp$252_and__5023__auto____$1$$) ? !0 : $and__5023__auto__$jscomp$252_and__5023__auto____$1$$) : $and__5023__auto__$jscomp$252_and__5023__auto____$1$$;
                }())) {
                  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new datascript.pull_api.AttrsFrame($self__$$.seen, $self__$$.recursion_limits, $acc__$1$$, $self__$$.pattern, $attr__$1$$, $G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$, $G__72279_G__72283_G__72287_G__72291_G__72295_G__72300_G__72304_G__72311_datoms__$1$$, $self__$$.id, null, null, null), new datascript.pull_api.MultivalRefAttrFrame($self__$$.seen, 
                  $self__$$.recursion_limits, $APP.cljs.core.transient$($APP.cljs.core.PersistentVector.EMPTY), $self__$$.pattern, $attr__$1$$, $G__72279_G__72283_G__72287_G__72291_G__72295_G__72300_G__72304_G__72311_datoms__$1$$, null, null, null)], null);
                }
                if ($APP.cljs.core.truth_($attr__$1$$.multival_QMARK_)) {
                  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new datascript.pull_api.AttrsFrame($self__$$.seen, $self__$$.recursion_limits, $acc__$1$$, $self__$$.pattern, $attr__$1$$, $G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$, $G__72279_G__72283_G__72287_G__72291_G__72295_G__72300_G__72304_G__72311_datoms__$1$$, $self__$$.id, null, null, null), new datascript.pull_api.MultivalAttrFrame($APP.cljs.core.transient$($APP.cljs.core.PersistentVector.EMPTY), 
                  $attr__$1$$, $G__72279_G__72283_G__72287_G__72291_G__72295_G__72300_G__72304_G__72311_datoms__$1$$, null, null, null)], null);
                }
                if ($APP.cljs.core.truth_($attr__$1$$.ref_QMARK_)) {
                  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new datascript.pull_api.AttrsFrame($self__$$.seen, $self__$$.recursion_limits, $acc__$1$$, $self__$$.pattern, $attr__$1$$, $G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$, $G__72279_G__72283_G__72287_G__72291_G__72295_G__72300_G__72304_G__72311_datoms__$1$$, $self__$$.id, null, null, null), function() {
                    var $G__72073$$ = $self__$$.seen, $G__72074$$ = $self__$$.recursion_limits, $G__72075$$ = $self__$$.pattern, $G__72076$$ = $attr__$1$$, $G__72077$$ = $datom$$.v;
                    return datascript.pull_api.ref_frame.cljs$core$IFn$_invoke$arity$6 ? datascript.pull_api.ref_frame.cljs$core$IFn$_invoke$arity$6($context$$, $G__72073$$, $G__72074$$, $G__72075$$, $G__72076$$, $G__72077$$) : datascript.pull_api.ref_frame.call(null, $context$$, $G__72073$$, $G__72074$$, $G__72075$$, $G__72076$$, $G__72077$$);
                  }()], null);
                }
                $G__72276_G__72280_G__72284_G__72288_G__72292_G__72297_G__72301_G__72308_temp__5827__auto__$$ = $APP.cljs.core.assoc_BANG_.cljs$core$IFn$_invoke$arity$3($acc__$1$$, $attr__$1$$.as, function() {
                  var $G__72079$$ = $datom$$.v, $fexpr__72078$$ = $attr__$1$$.xform;
                  return $fexpr__72078$$.cljs$core$IFn$_invoke$arity$1 ? $fexpr__72078$$.cljs$core$IFn$_invoke$arity$1($G__72079$$) : $fexpr__72078$$.call(null, $G__72079$$);
                }());
                $G__72277_G__72281_G__72285_G__72289_G__72293_G__72298_G__72302_G__72309_datom_attr$$ = datascript.pull_api.first_seq($G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$);
                $G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$ = datascript.pull_api.next_seq($G__72278_G__72282_G__72286_G__72290_G__72294_G__72299_G__72303_G__72310_attrs__$1$jscomp$2_this$$$);
                $G__72279_G__72283_G__72287_G__72291_G__72295_G__72300_G__72304_G__72311_datoms__$1$$ = datascript.pull_api.next_seq($G__72279_G__72283_G__72287_G__72291_G__72295_G__72300_G__72304_G__72311_datoms__$1$$);
                $acc__$1$$ = $G__72276_G__72280_G__72284_G__72288_G__72292_G__72297_G__72301_G__72308_temp__5827__auto__$$;
                $attr__$1$$ = $G__72277_G__72281_G__72285_G__72289_G__72293_G__72298_G__72302_G__72309_datom_attr$$;
              }
            }
          }
        }
      }
    }
  }
};
datascript.pull_api.AttrsFrame.prototype.datascript$pull_api$IFrame$_str$arity$1 = function($this$$$) {
  return ["AttrsFrame\x3cid\x3d", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(this.id), ", attr\x3d", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.pull_api.attr_str(this.attr)), ", attrs\x3d", $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$2(" ", $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(datascript.pull_api.attr_str, this.attrs)), "\x3e"].join("");
};
datascript.pull_api.AttrsFrame.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 8, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$88$seen, cljs$cst$4566$recursion_limits, $APP.cljs$cst$2947$acc, $APP.cljs.core.with_meta($APP.cljs$cst$2203$pattern, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$78$tag, cljs$cst$4568$PullPattern], null)), $APP.cljs.core.with_meta($APP.cljs$cst$3012$attr, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$78$tag, cljs$cst$4564$PullAttr], null)), $APP.cljs$cst$3017$attrs, 
  cljs$cst$4562$datoms, $APP.cljs$cst$1850$id], null);
};
datascript.pull_api.AttrsFrame.cljs$lang$type = !0;
datascript.pull_api.AttrsFrame.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.pull-api/AttrsFrame", null, 1, null);
};
datascript.pull_api.AttrsFrame.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.pull-api/AttrsFrame");
};
datascript.pull_api.__GT_AttrsFrame = function($seen$$, $recursion_limits$$, $acc$$, $pattern$$, $attr$$, $attrs$$, $datoms$$, $id$$) {
  return new datascript.pull_api.AttrsFrame($seen$$, $recursion_limits$$, $acc$$, $pattern$$, $attr$$, $attrs$$, $datoms$$, $id$$, null, null, null);
};
datascript.pull_api.map__GT_AttrsFrame = function($G__71998$$) {
  var $G__72080$jscomp$inline_6866_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__71998$$, $APP.cljs$cst$2720$seen, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$4565$recursion_limits, $APP.cljs$cst$4563$acc, $APP.cljs$cst$2381$pattern, $APP.cljs$cst$3020$attr, $APP.cljs$cst$2743$attrs, cljs$cst$4480$datoms, $APP.cljs$cst$396$id], 0));
  $G__72080$jscomp$inline_6866_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__71998$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72080$jscomp$inline_6866_extmap__5365__auto__$$) : $G__72080$jscomp$inline_6866_extmap__5365__auto__$$;
  return new datascript.pull_api.AttrsFrame($APP.cljs$cst$2720$seen.cljs$core$IFn$_invoke$arity$1($G__71998$$), cljs$cst$4565$recursion_limits.cljs$core$IFn$_invoke$arity$1($G__71998$$), $APP.cljs$cst$4563$acc.cljs$core$IFn$_invoke$arity$1($G__71998$$), $APP.cljs$cst$2381$pattern.cljs$core$IFn$_invoke$arity$1($G__71998$$), $APP.cljs$cst$3020$attr.cljs$core$IFn$_invoke$arity$1($G__71998$$), $APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($G__71998$$), cljs$cst$4480$datoms.cljs$core$IFn$_invoke$arity$1($G__71998$$), 
  $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($G__71998$$), null, $APP.cljs.core.not_empty($G__72080$jscomp$inline_6866_extmap__5365__auto__$$), null);
};
datascript.pull_api.ReverseAttrsFrame = function($seen$$, $recursion_limits$$, $acc$$, $pattern$$, $attr$$, $attrs$$, $id$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.seen = $seen$$;
  this.recursion_limits = $recursion_limits$$;
  this.acc = $acc$$;
  this.pattern = $pattern$$;
  this.attr = $attr$$;
  this.attrs = $attrs$$;
  this.id = $id$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.pull_api.ReverseAttrsFrame.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.pull_api.ReverseAttrsFrame.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72082$$, $else__5326__auto__$$) {
  switch($k72082$$ instanceof $APP.cljs.core.Keyword ? $k72082$$.fqn : null) {
    case "seen":
      return this.seen;
    case "recursion-limits":
      return this.recursion_limits;
    case "acc":
      return this.acc;
    case "pattern":
      return this.pattern;
    case "attr":
      return this.attr;
    case "attrs":
      return this.attrs;
    case "id":
      return this.id;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72082$$, $else__5326__auto__$$);
  }
};
datascript.pull_api.ReverseAttrsFrame.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72088_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72088_v__5348__auto__$$, 0, null);
    $p__72088_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72088_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72088_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72088_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.pull_api.ReverseAttrsFrame.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.pull-api.ReverseAttrsFrame{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 7, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2720$seen, this.seen], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4565$recursion_limits, this.recursion_limits], 
  null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$4563$acc, this.acc], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2381$pattern, this.pattern], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$3020$attr, this.attr], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
  [$APP.cljs$cst$2743$attrs, this.attrs], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$396$id, this.id], null)], null), this.__extmap));
};
datascript.pull_api.ReverseAttrsFrame.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72081$$) {
  return new $APP.cljs.core.RecordIter(0, this, 7, new $APP.cljs.core.PersistentVector(null, 7, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2720$seen, cljs$cst$4565$recursion_limits, $APP.cljs$cst$4563$acc, $APP.cljs$cst$2381$pattern, $APP.cljs$cst$3020$attr, $APP.cljs$cst$2743$attrs, $APP.cljs$cst$396$id], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.pull_api.ReverseAttrsFrame.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.pull_api.ReverseAttrsFrame.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.pull_api.ReverseAttrsFrame(this.seen, this.recursion_limits, this.acc, this.pattern, this.attr, this.attrs, this.id, this.__meta, this.__extmap, this.__hash);
};
datascript.pull_api.ReverseAttrsFrame.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 7 + $APP.cljs.core.count(this.__extmap);
};
datascript.pull_api.ReverseAttrsFrame.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$152_h__5134__auto____$1$jscomp$152_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$152_h__5134__auto____$1$jscomp$152_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$152_h__5134__auto____$1$jscomp$152_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$152_h__5134__auto____$1$jscomp$152_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$152_h__5134__auto____$1$jscomp$152_this__5319__auto__$$ = 470210558 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.pull_api.ReverseAttrsFrame.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72083$$, $other72084$$) {
  return $other72084$$ != null && this.constructor === $other72084$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.seen, $other72084$$.seen) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.recursion_limits, $other72084$$.recursion_limits) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.acc, $other72084$$.acc) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.pattern, $other72084$$.pattern) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.attr, 
  $other72084$$.attr) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.attrs, $other72084$$.attrs) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.id, $other72084$$.id) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72084$$.__extmap);
};
datascript.pull_api.ReverseAttrsFrame.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 7, [$APP.cljs$cst$4563$acc, null, $APP.cljs$cst$2720$seen, null, $APP.cljs$cst$396$id, null, cljs$cst$4565$recursion_limits, null, $APP.cljs$cst$2743$attrs, null, $APP.cljs$cst$2381$pattern, null, $APP.cljs$cst$3020$attr, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, 
  this), this.__meta), $k__5334__auto__$$) : new datascript.pull_api.ReverseAttrsFrame(this.seen, this.recursion_limits, this.acc, this.pattern, this.attr, this.attrs, this.id, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.pull_api.ReverseAttrsFrame.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72082$$) {
  switch($k72082$$ instanceof $APP.cljs.core.Keyword ? $k72082$$.fqn : null) {
    case "seen":
    case "recursion-limits":
    case "acc":
    case "pattern":
    case "attr":
    case "attrs":
    case "id":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72082$$);
  }
};
datascript.pull_api.ReverseAttrsFrame.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72106_this__5331__auto__$$, $k__5332__auto__$$, $G__72081$$) {
  $pred__72106_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72106_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72106_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2720$seen, $k__5332__auto__$$) : $pred__72106_this__5331__auto__$$.call(null, $APP.cljs$cst$2720$seen, $k__5332__auto__$$)) ? new datascript.pull_api.ReverseAttrsFrame($G__72081$$, this.recursion_limits, this.acc, this.pattern, this.attr, this.attrs, this.id, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72106_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? 
  $pred__72106_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4565$recursion_limits, $k__5332__auto__$$) : $pred__72106_this__5331__auto__$$.call(null, cljs$cst$4565$recursion_limits, $k__5332__auto__$$)) ? new datascript.pull_api.ReverseAttrsFrame(this.seen, $G__72081$$, this.acc, this.pattern, this.attr, this.attrs, this.id, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72106_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72106_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4563$acc, 
  $k__5332__auto__$$) : $pred__72106_this__5331__auto__$$.call(null, $APP.cljs$cst$4563$acc, $k__5332__auto__$$)) ? new datascript.pull_api.ReverseAttrsFrame(this.seen, this.recursion_limits, $G__72081$$, this.pattern, this.attr, this.attrs, this.id, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72106_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72106_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2381$pattern, $k__5332__auto__$$) : $pred__72106_this__5331__auto__$$.call(null, 
  $APP.cljs$cst$2381$pattern, $k__5332__auto__$$)) ? new datascript.pull_api.ReverseAttrsFrame(this.seen, this.recursion_limits, this.acc, $G__72081$$, this.attr, this.attrs, this.id, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72106_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72106_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$3020$attr, $k__5332__auto__$$) : $pred__72106_this__5331__auto__$$.call(null, $APP.cljs$cst$3020$attr, $k__5332__auto__$$)) ? 
  new datascript.pull_api.ReverseAttrsFrame(this.seen, this.recursion_limits, this.acc, this.pattern, $G__72081$$, this.attrs, this.id, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72106_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72106_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2743$attrs, $k__5332__auto__$$) : $pred__72106_this__5331__auto__$$.call(null, $APP.cljs$cst$2743$attrs, $k__5332__auto__$$)) ? new datascript.pull_api.ReverseAttrsFrame(this.seen, 
  this.recursion_limits, this.acc, this.pattern, this.attr, $G__72081$$, this.id, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72106_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72106_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$396$id, $k__5332__auto__$$) : $pred__72106_this__5331__auto__$$.call(null, $APP.cljs$cst$396$id, $k__5332__auto__$$)) ? new datascript.pull_api.ReverseAttrsFrame(this.seen, this.recursion_limits, this.acc, this.pattern, 
  this.attr, this.attrs, $G__72081$$, this.__meta, this.__extmap, null) : new datascript.pull_api.ReverseAttrsFrame(this.seen, this.recursion_limits, this.acc, this.pattern, this.attr, this.attrs, this.id, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__72081$$), null);
};
datascript.pull_api.ReverseAttrsFrame.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 7, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$2720$seen, this.seen, null), new $APP.cljs.core.MapEntry(cljs$cst$4565$recursion_limits, this.recursion_limits, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$4563$acc, this.acc, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$2381$pattern, this.pattern, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$3020$attr, 
  this.attr, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$2743$attrs, this.attrs, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$396$id, this.id, null)], null), this.__extmap));
};
datascript.pull_api.ReverseAttrsFrame.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72081$$) {
  return new datascript.pull_api.ReverseAttrsFrame(this.seen, this.recursion_limits, this.acc, this.pattern, this.attr, this.attrs, this.id, $G__72081$$, this.__extmap, this.__hash);
};
datascript.pull_api.ReverseAttrsFrame.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.pull_api.ReverseAttrsFrame.prototype.datascript$pull_api$IFrame$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.pull_api.ReverseAttrsFrame.prototype.datascript$pull_api$IFrame$_merge$arity$2 = function($JSCompiler_temp_const$jscomp$1521_this$$$, $G__72114$jscomp$inline_6868_JSCompiler_inline_result$jscomp$1522_result$$) {
  $JSCompiler_temp_const$jscomp$1521_this$$$ = datascript.pull_api.ReverseAttrsFrame;
  var $JSCompiler_temp_const$$ = this.seen, $JSCompiler_temp_const$jscomp$0$$ = this.recursion_limits, $JSCompiler_temp_const$jscomp$1$$ = datascript.pull_api, $JSCompiler_temp_const$jscomp$2$$ = $JSCompiler_temp_const$jscomp$1$$.assoc_some_BANG_, $JSCompiler_temp_const$jscomp$3$$ = this.acc, $JSCompiler_temp_const$jscomp$4$$ = this.attr.as;
  $G__72114$jscomp$inline_6868_JSCompiler_inline_result$jscomp$1522_result$$ = $G__72114$jscomp$inline_6868_JSCompiler_inline_result$jscomp$1522_result$$.value;
  var $fexpr__72113$$ = this.attr.xform;
  $G__72114$jscomp$inline_6868_JSCompiler_inline_result$jscomp$1522_result$$ = $fexpr__72113$$.cljs$core$IFn$_invoke$arity$1 ? $fexpr__72113$$.cljs$core$IFn$_invoke$arity$1($G__72114$jscomp$inline_6868_JSCompiler_inline_result$jscomp$1522_result$$) : $fexpr__72113$$.call(null, $G__72114$jscomp$inline_6868_JSCompiler_inline_result$jscomp$1522_result$$);
  return new $JSCompiler_temp_const$jscomp$1521_this$$$($JSCompiler_temp_const$$, $JSCompiler_temp_const$jscomp$0$$, $JSCompiler_temp_const$jscomp$2$$.call($JSCompiler_temp_const$jscomp$1$$, $JSCompiler_temp_const$jscomp$3$$, $JSCompiler_temp_const$jscomp$4$$, $G__72114$jscomp$inline_6868_JSCompiler_inline_result$jscomp$1522_result$$), this.pattern, datascript.pull_api.first_seq(this.attrs), datascript.pull_api.next_seq(this.attrs), this.id, null, null, null);
};
datascript.pull_api.ReverseAttrsFrame.prototype.datascript$pull_api$IFrame$_run$arity$2 = function($G__72138$jscomp$inline_6875_G__72333_G__72337_attr__$1$jscomp$2_this$$$, $G__72134$jscomp$inline_6871_JSCompiler_inline_result$jscomp$1526_context$$) {
  var $JSCompiler_temp_const$jscomp$1523_acc__$1$$ = this.acc;
  $G__72138$jscomp$inline_6875_G__72333_G__72337_attr__$1$jscomp$2_this$$$ = this.attr;
  for (var $G__72135$jscomp$inline_6872_attrs__$1$$ = this.attrs;;) {
    if ($G__72138$jscomp$inline_6875_G__72333_G__72337_attr__$1$jscomp$2_this$$$ == null) {
      return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new datascript.pull_api.ResultFrame($APP.cljs.core.not_empty($APP.cljs.core.persistent_BANG_($JSCompiler_temp_const$jscomp$1523_acc__$1$$)), null, null, null, null)], null);
    }
    var $G__72334_G__72338_JSCompiler_temp_const$jscomp$1525_name$$ = $G__72138$jscomp$inline_6875_G__72333_G__72337_attr__$1$jscomp$2_this$$$.name, $G__72332_G__72336_JSCompiler_temp_const$jscomp$1524_db$$ = $G__72134$jscomp$inline_6871_JSCompiler_inline_result$jscomp$1526_context$$.db, $G__72139$jscomp$inline_6876_datoms$$ = $G__72332_G__72336_JSCompiler_temp_const$jscomp$1524_db$$ instanceof datascript.db.DB ? $APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3($G__72332_G__72336_JSCompiler_temp_const$jscomp$1524_db$$.avet, 
    datascript.db.datom.cljs$core$IFn$_invoke$arity$4(0, $G__72334_G__72338_JSCompiler_temp_const$jscomp$1525_name$$, this.id, 536870912), datascript.db.datom.cljs$core$IFn$_invoke$arity$4(2147483647, $G__72334_G__72338_JSCompiler_temp_const$jscomp$1525_name$$, this.id, 2147483647)) : datascript.db._search($G__72332_G__72336_JSCompiler_temp_const$jscomp$1524_db$$, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [null, $G__72334_G__72338_JSCompiler_temp_const$jscomp$1525_name$$, 
    this.id], null));
    datascript.pull_api.visit($G__72134$jscomp$inline_6871_JSCompiler_inline_result$jscomp$1526_context$$, cljs$cst$4569$db_DOT_pull_SLASH_reverse, null, $G__72334_G__72338_JSCompiler_temp_const$jscomp$1525_name$$, this.id);
    if ($APP.cljs.core.empty_QMARK_($G__72139$jscomp$inline_6876_datoms$$) && $APP.cljs$cst$205$default.cljs$core$IFn$_invoke$arity$1($G__72138$jscomp$inline_6875_G__72333_G__72337_attr__$1$jscomp$2_this$$$) != null) {
      $G__72332_G__72336_JSCompiler_temp_const$jscomp$1524_db$$ = $APP.cljs.core.assoc_BANG_.cljs$core$IFn$_invoke$arity$3($JSCompiler_temp_const$jscomp$1523_acc__$1$$, $G__72138$jscomp$inline_6875_G__72333_G__72337_attr__$1$jscomp$2_this$$$.as, $APP.cljs$cst$205$default.cljs$core$IFn$_invoke$arity$1($G__72138$jscomp$inline_6875_G__72333_G__72337_attr__$1$jscomp$2_this$$$)), $G__72138$jscomp$inline_6875_G__72333_G__72337_attr__$1$jscomp$2_this$$$ = datascript.pull_api.first_seq($G__72135$jscomp$inline_6872_attrs__$1$$), 
      $G__72334_G__72338_JSCompiler_temp_const$jscomp$1525_name$$ = datascript.pull_api.next_seq($G__72135$jscomp$inline_6872_attrs__$1$$), $JSCompiler_temp_const$jscomp$1523_acc__$1$$ = $G__72332_G__72336_JSCompiler_temp_const$jscomp$1524_db$$, $G__72135$jscomp$inline_6872_attrs__$1$$ = $G__72334_G__72338_JSCompiler_temp_const$jscomp$1525_name$$;
    } else {
      if ($APP.cljs.core.empty_QMARK_($G__72139$jscomp$inline_6876_datoms$$)) {
        $G__72332_G__72336_JSCompiler_temp_const$jscomp$1524_db$$ = $JSCompiler_temp_const$jscomp$1523_acc__$1$$, $G__72138$jscomp$inline_6875_G__72333_G__72337_attr__$1$jscomp$2_this$$$ = datascript.pull_api.first_seq($G__72135$jscomp$inline_6872_attrs__$1$$), $G__72334_G__72338_JSCompiler_temp_const$jscomp$1525_name$$ = datascript.pull_api.next_seq($G__72135$jscomp$inline_6872_attrs__$1$$), $JSCompiler_temp_const$jscomp$1523_acc__$1$$ = $G__72332_G__72336_JSCompiler_temp_const$jscomp$1524_db$$, 
        $G__72135$jscomp$inline_6872_attrs__$1$$ = $G__72334_G__72338_JSCompiler_temp_const$jscomp$1525_name$$;
      } else {
        if ($APP.cljs.core.truth_($G__72138$jscomp$inline_6875_G__72333_G__72337_attr__$1$jscomp$2_this$$$.component_QMARK_)) {
          $G__72334_G__72338_JSCompiler_temp_const$jscomp$1525_name$$ = $APP.cljs.core.PersistentVector;
          $G__72332_G__72336_JSCompiler_temp_const$jscomp$1524_db$$ = $APP.cljs.core.PersistentVector.EMPTY_NODE;
          $JSCompiler_temp_const$jscomp$1523_acc__$1$$ = new datascript.pull_api.ReverseAttrsFrame(this.seen, this.recursion_limits, $JSCompiler_temp_const$jscomp$1523_acc__$1$$, this.pattern, $G__72138$jscomp$inline_6875_G__72333_G__72337_attr__$1$jscomp$2_this$$$, $G__72135$jscomp$inline_6872_attrs__$1$$, this.id, null, null, null);
          $G__72135$jscomp$inline_6872_attrs__$1$$ = this.seen;
          var $G__72136$$ = this.recursion_limits, $G__72137$$ = this.pattern;
          $G__72139$jscomp$inline_6876_datoms$$ = datascript.pull_api.first_seq($G__72139$jscomp$inline_6876_datoms$$).e;
          $G__72134$jscomp$inline_6871_JSCompiler_inline_result$jscomp$1526_context$$ = datascript.pull_api.ref_frame.cljs$core$IFn$_invoke$arity$6 ? datascript.pull_api.ref_frame.cljs$core$IFn$_invoke$arity$6($G__72134$jscomp$inline_6871_JSCompiler_inline_result$jscomp$1526_context$$, $G__72135$jscomp$inline_6872_attrs__$1$$, $G__72136$$, $G__72137$$, $G__72138$jscomp$inline_6875_G__72333_G__72337_attr__$1$jscomp$2_this$$$, $G__72139$jscomp$inline_6876_datoms$$) : datascript.pull_api.ref_frame.call(null, 
          $G__72134$jscomp$inline_6871_JSCompiler_inline_result$jscomp$1526_context$$, $G__72135$jscomp$inline_6872_attrs__$1$$, $G__72136$$, $G__72137$$, $G__72138$jscomp$inline_6875_G__72333_G__72337_attr__$1$jscomp$2_this$$$, $G__72139$jscomp$inline_6876_datoms$$);
          return new $G__72334_G__72338_JSCompiler_temp_const$jscomp$1525_name$$(null, 2, 5, $G__72332_G__72336_JSCompiler_temp_const$jscomp$1524_db$$, [$JSCompiler_temp_const$jscomp$1523_acc__$1$$, $G__72134$jscomp$inline_6871_JSCompiler_inline_result$jscomp$1526_context$$], null);
        }
        return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new datascript.pull_api.ReverseAttrsFrame(this.seen, this.recursion_limits, $JSCompiler_temp_const$jscomp$1523_acc__$1$$, this.pattern, $G__72138$jscomp$inline_6875_G__72333_G__72337_attr__$1$jscomp$2_this$$$, $G__72135$jscomp$inline_6872_attrs__$1$$, this.id, null, null, null), new datascript.pull_api.MultivalRefAttrFrame(this.seen, this.recursion_limits, $APP.cljs.core.transient$($APP.cljs.core.PersistentVector.EMPTY), 
        this.pattern, $G__72138$jscomp$inline_6875_G__72333_G__72337_attr__$1$jscomp$2_this$$$, $G__72139$jscomp$inline_6876_datoms$$, null, null, null)], null);
      }
    }
  }
};
datascript.pull_api.ReverseAttrsFrame.prototype.datascript$pull_api$IFrame$_str$arity$1 = function($this$$$) {
  return ["ReverseAttrsFrame\x3cid\x3d", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(this.id), ", attr\x3d", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(datascript.pull_api.attr_str(this.attr)), ", attrs\x3d", $APP.clojure.string.join.cljs$core$IFn$_invoke$arity$2(" ", $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(datascript.pull_api.attr_str, this.attrs)), "\x3e"].join("");
};
datascript.pull_api.ReverseAttrsFrame.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 7, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$88$seen, cljs$cst$4566$recursion_limits, $APP.cljs$cst$2947$acc, $APP.cljs$cst$2203$pattern, $APP.cljs.core.with_meta($APP.cljs$cst$3012$attr, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$78$tag, cljs$cst$4564$PullAttr], null)), $APP.cljs$cst$3017$attrs, $APP.cljs$cst$1850$id], null);
};
datascript.pull_api.ReverseAttrsFrame.cljs$lang$type = !0;
datascript.pull_api.ReverseAttrsFrame.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.pull-api/ReverseAttrsFrame", null, 1, null);
};
datascript.pull_api.ReverseAttrsFrame.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.pull-api/ReverseAttrsFrame");
};
datascript.pull_api.__GT_ReverseAttrsFrame = function($seen$$, $recursion_limits$$, $acc$$, $pattern$$, $attr$$, $attrs$$, $id$$) {
  return new datascript.pull_api.ReverseAttrsFrame($seen$$, $recursion_limits$$, $acc$$, $pattern$$, $attr$$, $attrs$$, $id$$, null, null, null);
};
datascript.pull_api.map__GT_ReverseAttrsFrame = function($G__72086$$) {
  var $G__72146$jscomp$inline_6878_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__72086$$, $APP.cljs$cst$2720$seen, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$4565$recursion_limits, $APP.cljs$cst$4563$acc, $APP.cljs$cst$2381$pattern, $APP.cljs$cst$3020$attr, $APP.cljs$cst$2743$attrs, $APP.cljs$cst$396$id], 0));
  $G__72146$jscomp$inline_6878_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72086$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72146$jscomp$inline_6878_extmap__5365__auto__$$) : $G__72146$jscomp$inline_6878_extmap__5365__auto__$$;
  return new datascript.pull_api.ReverseAttrsFrame($APP.cljs$cst$2720$seen.cljs$core$IFn$_invoke$arity$1($G__72086$$), cljs$cst$4565$recursion_limits.cljs$core$IFn$_invoke$arity$1($G__72086$$), $APP.cljs$cst$4563$acc.cljs$core$IFn$_invoke$arity$1($G__72086$$), $APP.cljs$cst$2381$pattern.cljs$core$IFn$_invoke$arity$1($G__72086$$), $APP.cljs$cst$3020$attr.cljs$core$IFn$_invoke$arity$1($G__72086$$), $APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($G__72086$$), $APP.cljs$cst$396$id.cljs$core$IFn$_invoke$arity$1($G__72086$$), 
  null, $APP.cljs.core.not_empty($G__72146$jscomp$inline_6878_extmap__5365__auto__$$), null);
};
datascript.pull_api.auto_expanding_QMARK_ = function($attr$$) {
  var $and__5023__auto__$jscomp$253_or__5025__auto__$$ = $attr$$.recursive_QMARK_;
  if ($APP.cljs.core.truth_($and__5023__auto__$jscomp$253_or__5025__auto__$$)) {
    return $and__5023__auto__$jscomp$253_or__5025__auto__$$;
  }
  $and__5023__auto__$jscomp$253_or__5025__auto__$$ = $attr$$.component_QMARK_;
  return $APP.cljs.core.truth_($and__5023__auto__$jscomp$253_or__5025__auto__$$) ? $attr$$.pattern.wildcard_QMARK_ : $and__5023__auto__$jscomp$253_or__5025__auto__$$;
};
datascript.pull_api.ref_frame = function($context$$, $seen$$, $recursion_limits$$, $G__72153_G__72158_pattern$$, $attr$$, $id$$) {
  if ($APP.cljs.core.not(datascript.pull_api.auto_expanding_QMARK_($attr$$))) {
    return $G__72153_G__72158_pattern$$ = $attr$$.pattern, datascript.pull_api.attrs_frame.cljs$core$IFn$_invoke$arity$5 ? datascript.pull_api.attrs_frame.cljs$core$IFn$_invoke$arity$5($context$$, $seen$$, $recursion_limits$$, $G__72153_G__72158_pattern$$, $id$$) : datascript.pull_api.attrs_frame.call(null, $context$$, $seen$$, $recursion_limits$$, $G__72153_G__72158_pattern$$, $id$$);
  }
  if ($APP.cljs.core.truth_($seen$$.cljs$core$IFn$_invoke$arity$1 ? $seen$$.cljs$core$IFn$_invoke$arity$1($id$$) : $seen$$.call(null, $id$$))) {
    return new datascript.pull_api.ResultFrame(new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$2432$db_SLASH_id, $id$$], null), null, null, null, null);
  }
  var $lim$$ = $recursion_limits$$.cljs$core$IFn$_invoke$arity$1 ? $recursion_limits$$.cljs$core$IFn$_invoke$arity$1($attr$$) : $recursion_limits$$.call(null, $attr$$), $JSCompiler_temp_const$$ = $APP.cljs.core, $JSCompiler_temp_const$jscomp$0$$ = $JSCompiler_temp_const$$.truth_;
  var $JSCompiler_inline_result$$ = $APP.cljs.core.truth_($lim$$) ? $lim$$ <= 0 && !0 : $lim$$;
  if ($JSCompiler_temp_const$jscomp$0$$.call($JSCompiler_temp_const$$, $JSCompiler_inline_result$$)) {
    return new datascript.pull_api.ResultFrame(null, null, null, null, null);
  }
  $seen$$ = $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($seen$$, $id$$);
  $recursion_limits$$ = $APP.cljs.core.truth_($lim$$) ? $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$3($recursion_limits$$, $attr$$, $APP.cljs.core.dec) : $APP.cljs.core.truth_($attr$$.recursion_limit) ? $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($recursion_limits$$, $attr$$, $attr$$.recursion_limit - 1) : $recursion_limits$$;
  $G__72153_G__72158_pattern$$ = $APP.cljs.core.truth_($attr$$.recursive_QMARK_) ? $G__72153_G__72158_pattern$$ : $attr$$.pattern;
  return datascript.pull_api.attrs_frame.cljs$core$IFn$_invoke$arity$5 ? datascript.pull_api.attrs_frame.cljs$core$IFn$_invoke$arity$5($context$$, $seen$$, $recursion_limits$$, $G__72153_G__72158_pattern$$, $id$$) : datascript.pull_api.attrs_frame.call(null, $context$$, $seen$$, $recursion_limits$$, $G__72153_G__72158_pattern$$, $id$$);
};
datascript.pull_api.attrs_frame = function($context$$, $seen$$, $recursion_limits$$, $pattern$$, $id$$) {
  var $db$$ = $context$$.db, $datoms$$ = function() {
    var $JSCompiler_temp_const$jscomp$1531_from$$ = $APP.cljs.core, $JSCompiler_temp_const$jscomp$1530_to$$ = $JSCompiler_temp_const$jscomp$1531_from$$.truth_;
    var $JSCompiler_inline_result$jscomp$1532_and__5023__auto__$$ = $pattern$$.wildcard_QMARK_;
    $JSCompiler_inline_result$jscomp$1532_and__5023__auto__$$ = $APP.cljs.core.truth_($JSCompiler_inline_result$jscomp$1532_and__5023__auto__$$) ? $db$$ instanceof datascript.db.DB && !0 : $JSCompiler_inline_result$jscomp$1532_and__5023__auto__$$;
    if ($JSCompiler_temp_const$jscomp$1530_to$$.call($JSCompiler_temp_const$jscomp$1531_from$$, $JSCompiler_inline_result$jscomp$1532_and__5023__auto__$$)) {
      return $APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3($db$$.eavt, datascript.db.datom.cljs$core$IFn$_invoke$arity$4($id$$, null, null, 536870912), datascript.db.datom.cljs$core$IFn$_invoke$arity$4($id$$, null, null, 2147483647));
    }
    if ($APP.cljs.core.truth_($pattern$$.wildcard_QMARK_)) {
      return datascript.db._search($db$$, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$id$$], null));
    }
    if ($pattern$$.first_attr == null) {
      return null;
    }
    $JSCompiler_temp_const$jscomp$1531_from$$ = $pattern$$.first_attr.name;
    $JSCompiler_temp_const$jscomp$1530_to$$ = $pattern$$.last_attr.name;
    return $db$$ instanceof datascript.db.DB ? $APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$3($db$$.eavt, datascript.db.datom.cljs$core$IFn$_invoke$arity$4($id$$, $JSCompiler_temp_const$jscomp$1531_from$$, null, 536870912), datascript.db.datom.cljs$core$IFn$_invoke$arity$4($id$$, $JSCompiler_temp_const$jscomp$1530_to$$, null, 2147483647)) : datascript.db._seek_datoms($db$$, $APP.cljs$cst$4444$eavt, $id$$, null, null, null);
  }();
  $APP.cljs.core.truth_($pattern$$.wildcard_QMARK_) && datascript.pull_api.visit($context$$, cljs$cst$4570$db_DOT_pull_SLASH_wildcard, $id$$, null, null);
  return new datascript.pull_api.AttrsFrame($seen$$, $recursion_limits$$, $APP.cljs.core.transient$($APP.cljs.core.PersistentArrayMap.EMPTY), $pattern$$, datascript.pull_api.first_seq($pattern$$.attrs), datascript.pull_api.next_seq($pattern$$.attrs), $datoms$$, $id$$, null, null, null);
};
datascript.pull_api.pull_impl = function($context$$, $id$jscomp$105_last$jscomp$1_temp__5829__auto__$$) {
  var $map__72174__$1_pattern$jscomp$50_penultimate_stack$$ = $APP.cljs.core.__destructure_map($context$$);
  $context$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__72174__$1_pattern$jscomp$50_penultimate_stack$$, $APP.cljs$cst$4463$context);
  $map__72174__$1_pattern$jscomp$50_penultimate_stack$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__72174__$1_pattern$jscomp$50_penultimate_stack$$, $APP.cljs$cst$2381$pattern);
  $id$jscomp$105_last$jscomp$1_temp__5829__auto__$$ = datascript.db.entid($context$$.db, $id$jscomp$105_last$jscomp$1_temp__5829__auto__$$);
  if ($id$jscomp$105_last$jscomp$1_temp__5829__auto__$$ == null) {
    return null;
  }
  for ($map__72174__$1_pattern$jscomp$50_penultimate_stack$$ = new $APP.cljs.core.List(null, datascript.pull_api.attrs_frame($context$$, $APP.cljs.core.PersistentHashSet.EMPTY, $APP.cljs.core.PersistentArrayMap.EMPTY, $map__72174__$1_pattern$jscomp$50_penultimate_stack$$, $id$jscomp$105_last$jscomp$1_temp__5829__auto__$$), null, 1, null);;) {
    $id$jscomp$105_last$jscomp$1_temp__5829__auto__$$ = datascript.pull_api.first_seq($map__72174__$1_pattern$jscomp$50_penultimate_stack$$);
    var $stack_SINGLEQUOTE__stack_SINGLEQUOTE__SINGLEQUOTE_$$ = datascript.pull_api.next_seq($map__72174__$1_pattern$jscomp$50_penultimate_stack$$);
    if ($id$jscomp$105_last$jscomp$1_temp__5829__auto__$$ instanceof datascript.pull_api.ResultFrame) {
      if ($stack_SINGLEQUOTE__stack_SINGLEQUOTE__SINGLEQUOTE_$$ == null) {
        return $id$jscomp$105_last$jscomp$1_temp__5829__auto__$$.value;
      }
      $map__72174__$1_pattern$jscomp$50_penultimate_stack$$ = datascript.pull_api.first_seq($stack_SINGLEQUOTE__stack_SINGLEQUOTE__SINGLEQUOTE_$$);
      $stack_SINGLEQUOTE__stack_SINGLEQUOTE__SINGLEQUOTE_$$ = datascript.pull_api.next_seq($stack_SINGLEQUOTE__stack_SINGLEQUOTE__SINGLEQUOTE_$$);
      $map__72174__$1_pattern$jscomp$50_penultimate_stack$$ = datascript.pull_api.conj_seq($stack_SINGLEQUOTE__stack_SINGLEQUOTE__SINGLEQUOTE_$$, datascript.pull_api._merge($map__72174__$1_pattern$jscomp$50_penultimate_stack$$, $id$jscomp$105_last$jscomp$1_temp__5829__auto__$$));
    } else {
      $map__72174__$1_pattern$jscomp$50_penultimate_stack$$ = $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(datascript.pull_api.conj_seq, $stack_SINGLEQUOTE__stack_SINGLEQUOTE__SINGLEQUOTE_$$, datascript.pull_api._run($id$jscomp$105_last$jscomp$1_temp__5829__auto__$$, $context$$));
    }
  }
};
datascript.pull_api.parse_opts = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return datascript.pull_api.parse_opts.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return datascript.pull_api.parse_opts.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.pull_api.parse_opts.cljs$core$IFn$_invoke$arity$2 = function($db$$, $pattern$$) {
  return datascript.pull_api.parse_opts.cljs$core$IFn$_invoke$arity$3($db$$, $pattern$$, null);
};
datascript.pull_api.parse_opts.cljs$core$IFn$_invoke$arity$3 = function($db$$, $pattern$$, $map__72190__$1_p__72189_visitor$$) {
  $map__72190__$1_p__72189_visitor$$ = $APP.cljs.core.__destructure_map($map__72190__$1_p__72189_visitor$$);
  $map__72190__$1_p__72189_visitor$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__72190__$1_p__72189_visitor$$, cljs$cst$4560$visitor);
  return new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$2381$pattern, datascript.lru._get(datascript.db.unfiltered_db($db$$).pull_patterns, $pattern$$, function() {
    return datascript.pull_parser.parse_pattern($db$$, $pattern$$);
  }), $APP.cljs$cst$4463$context, new datascript.pull_api.Context($db$$, $map__72190__$1_p__72189_visitor$$, null, null, null)], null);
};
datascript.pull_api.parse_opts.cljs$lang$maxFixedArity = 3;
datascript.pull_api.pull = function($var_args$$) {
  switch(arguments.length) {
    case 3:
      return datascript.pull_api.pull.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    case 4:
      return datascript.pull_api.pull.cljs$core$IFn$_invoke$arity$4(arguments[0], arguments[1], arguments[2], arguments[3]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.pull_api.pull.cljs$core$IFn$_invoke$arity$3 = function($db$$, $pattern$$, $id$$) {
  return datascript.pull_api.pull.cljs$core$IFn$_invoke$arity$4($db$$, $pattern$$, $id$$, $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.pull_api.pull.cljs$core$IFn$_invoke$arity$4 = function($db$jscomp$162_parsed_opts$$, $pattern$$, $id$$, $opts$$) {
  $db$jscomp$162_parsed_opts$$ = datascript.pull_api.parse_opts.cljs$core$IFn$_invoke$arity$3($db$jscomp$162_parsed_opts$$, $pattern$$, $opts$$);
  return datascript.pull_api.pull_impl($db$jscomp$162_parsed_opts$$, $id$$);
};
datascript.pull_api.pull.cljs$lang$maxFixedArity = 4;
datascript.pull_api.pull_many = function($var_args$$) {
  switch(arguments.length) {
    case 3:
      return datascript.pull_api.pull_many.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    case 4:
      return datascript.pull_api.pull_many.cljs$core$IFn$_invoke$arity$4(arguments[0], arguments[1], arguments[2], arguments[3]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.pull_api.pull_many.cljs$core$IFn$_invoke$arity$3 = function($db$$, $pattern$$, $ids$$) {
  return datascript.pull_api.pull_many.cljs$core$IFn$_invoke$arity$4($db$$, $pattern$$, $ids$$, $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.pull_api.pull_many.cljs$core$IFn$_invoke$arity$4 = function($db$$, $pattern$$, $ids$$, $opts$$) {
  var $parsed_opts$$ = datascript.pull_api.parse_opts.cljs$core$IFn$_invoke$arity$3($db$$, $pattern$$, $opts$$);
  return $APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2(function($p1__72199_SHARP_$$) {
    return datascript.pull_api.pull_impl($parsed_opts$$, $p1__72199_SHARP_$$);
  }, $ids$$);
};
datascript.pull_api.pull_many.cljs$lang$maxFixedArity = 4;
datascript.serialize = {};
datascript.serialize.marker_kw = 0;
datascript.serialize.marker_other = 1;
datascript.serialize.marker_inf = 2;
datascript.serialize.marker_minus_inf = 3;
datascript.serialize.marker_nan = 4;
datascript.serialize.if_cljs = function($env$$, $then$$, $else$$$) {
  return $APP.cljs.core.truth_($APP.cljs$cst$176$ns.cljs$core$IFn$_invoke$arity$1($env$$)) ? $then$$ : $else$$$;
};
datascript.serialize.array_get = function($d$$, $i$$) {
  return $APP.cljs.core.array_QMARK_($d$$) ? $d$$[$i$$] : $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2($d$$, $i$$);
};
datascript.serialize.dict_get = function($d$$, $k$$) {
  return $APP.cljs.core.map_QMARK_($d$$) ? $d$$.cljs$core$IFn$_invoke$arity$1 ? $d$$.cljs$core$IFn$_invoke$arity$1($k$$) : $d$$.call(null, $k$$) : $d$$[$k$$];
};
datascript.serialize.array_QMARK_ = function($a$$) {
  return $APP.cljs.core.array_QMARK_($a$$) || $APP.cljs.core.vector_QMARK_($a$$);
};
datascript.serialize.amap = function($f$$, $xs$$) {
  var $arr$$ = Array($APP.cljs.core.count($xs$$));
  $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($idx$$, $x$$) {
    $arr$$[$idx$$] = $f$$.cljs$core$IFn$_invoke$arity$1 ? $f$$.cljs$core$IFn$_invoke$arity$1($x$$) : $f$$.call(null, $x$$);
    return $idx$$ + 1;
  }, 0, $xs$$);
  return $arr$$;
};
datascript.serialize.amap_indexed = function($f$$, $xs$$) {
  var $arr$$ = Array($APP.cljs.core.count($xs$$));
  $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($idx$$, $x$$) {
    $arr$$[$idx$$] = $f$$.cljs$core$IFn$_invoke$arity$2 ? $f$$.cljs$core$IFn$_invoke$arity$2($idx$$, $x$$) : $f$$.call(null, $idx$$, $x$$);
    return $idx$$ + 1;
  }, 0, $xs$$);
  return $arr$$;
};
datascript.serialize.attr_comparator = function($d1$$, $d2$$) {
  return $d2$$.a == null ? -1 : $APP.cljs.core.compare($d1$$.a, $d2$$.a) <= 0 ? -1 : 1;
};
datascript.serialize.all_attrs = function($db$$) {
  if ($APP.cljs.core.empty_QMARK_($APP.cljs$cst$4445$aevt.cljs$core$IFn$_invoke$arity$1($db$$))) {
    return $APP.cljs.core.PersistentVector.EMPTY;
  }
  for (var $attrs$$ = $APP.cljs.core.transient$(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2200$a.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first($APP.cljs$cst$4445$aevt.cljs$core$IFn$_invoke$arity$1($db$$)))], null));;) {
    var $attr$jscomp$62_left$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2($attrs$$, $APP.cljs.core.count($attrs$$) - 1);
    $attr$jscomp$62_left$$ = datascript.db.datom.cljs$core$IFn$_invoke$arity$3(0, $attr$jscomp$62_left$$, null);
    var $right$$ = datascript.db.datom.cljs$core$IFn$_invoke$arity$3(2147483647, null, null);
    $attr$jscomp$62_left$$ = $APP.cljs$cst$2200$a.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first($APP.me.tonsky.persistent_sorted_set.slice.cljs$core$IFn$_invoke$arity$4($APP.cljs$cst$4445$aevt.cljs$core$IFn$_invoke$arity$1($db$$), $attr$jscomp$62_left$$, $right$$, datascript.serialize.attr_comparator)));
    if ($attr$jscomp$62_left$$ != null) {
      $attrs$$ = $APP.cljs.core.conj_BANG_.cljs$core$IFn$_invoke$arity$2($attrs$$, $attr$jscomp$62_left$$);
    } else {
      return $APP.cljs.core.persistent_BANG_($attrs$$);
    }
  }
};
datascript.serialize.freeze_kw = $APP.cljs.core.str;
datascript.serialize.thaw_kw = function($s$$) {
  return $APP.clojure.string.starts_with_QMARK_($s$$, ":") ? $APP.cljs.core.keyword.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.subs.cljs$core$IFn$_invoke$arity$2($s$$, 1)) : $s$$;
};
datascript.serialize.serializable_impl = function($db$$, $eavt$$) {
  $eavt$$ = $APP.cljs.core.__destructure_map($eavt$$);
  var $freeze_fn$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3($eavt$$, cljs$cst$4571$freeze_fn, $APP.cljs.core.pr_str), $freeze_kw_kws$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3($eavt$$, cljs$cst$4572$freeze_kw, datascript.serialize.freeze_kw);
  if ($APP.cljs.core.truth_(datascript.storage.storage($db$$))) {
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("serializable doesn't work with databases that have :storage", $APP.cljs.core.PersistentArrayMap.EMPTY);
  }
  var $attrs$jscomp$21_attrs__$1$$ = datascript.serialize.all_attrs($db$$), $attrs_map$$ = $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.vector, $attrs$jscomp$21_attrs__$1$$, $APP.cljs.core.range.cljs$core$IFn$_invoke$arity$0())), $_STAR_kws$$ = $APP.cljs.core.volatile_BANG_($APP.cljs.core.transient$($APP.cljs.core.PersistentVector.EMPTY)), $_STAR_kw_map$$ = $APP.cljs.core.volatile_BANG_($APP.cljs.core.transient$($APP.cljs.core.PersistentArrayMap.EMPTY)), 
  $write_v$$ = function($idx$jscomp$inline_9834_v$$) {
    if (typeof $idx$jscomp$inline_9834_v$$ === "string") {
      return $idx$jscomp$inline_9834_v$$;
    }
    if (typeof $idx$jscomp$inline_9834_v$$ === "number") {
      return Infinity === $idx$jscomp$inline_9834_v$$ ? [2] : -Infinity === $idx$jscomp$inline_9834_v$$ ? [3] : $APP.cljs.core.truth_(isNaN($idx$jscomp$inline_9834_v$$)) ? [4] : $idx$jscomp$inline_9834_v$$;
    }
    if ($APP.cljs.core.boolean_QMARK_($idx$jscomp$inline_9834_v$$)) {
      return $idx$jscomp$inline_9834_v$$;
    }
    if ($idx$jscomp$inline_9834_v$$ instanceof $APP.cljs.core.Keyword) {
      var $idx$jscomp$inline_9837_keywords$jscomp$inline_9836_or__5025__auto__$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.deref($_STAR_kw_map$$), $idx$jscomp$inline_9834_v$$);
      $APP.cljs.core.truth_($idx$jscomp$inline_9837_keywords$jscomp$inline_9836_or__5025__auto__$$) ? $idx$jscomp$inline_9834_v$$ = $idx$jscomp$inline_9837_keywords$jscomp$inline_9836_or__5025__auto__$$ : ($idx$jscomp$inline_9837_keywords$jscomp$inline_9836_or__5025__auto__$$ = $_STAR_kws$$.cljs$core$IVolatile$_vreset_BANG_$arity$2(null, $APP.cljs.core.conj_BANG_.cljs$core$IFn$_invoke$arity$2($_STAR_kws$$.cljs$core$IDeref$_deref$arity$1(null), $idx$jscomp$inline_9834_v$$)), $idx$jscomp$inline_9837_keywords$jscomp$inline_9836_or__5025__auto__$$ = 
      $APP.cljs.core.count($idx$jscomp$inline_9837_keywords$jscomp$inline_9836_or__5025__auto__$$) - 1, $_STAR_kw_map$$.cljs$core$IVolatile$_vreset_BANG_$arity$2(null, $APP.cljs.core.assoc_BANG_.cljs$core$IFn$_invoke$arity$3($_STAR_kw_map$$.cljs$core$IDeref$_deref$arity$1(null), $idx$jscomp$inline_9834_v$$, $idx$jscomp$inline_9837_keywords$jscomp$inline_9836_or__5025__auto__$$)), $idx$jscomp$inline_9834_v$$ = $idx$jscomp$inline_9837_keywords$jscomp$inline_9836_or__5025__auto__$$);
      return [0, $idx$jscomp$inline_9834_v$$];
    }
    return [1, $freeze_fn$$.cljs$core$IFn$_invoke$arity$1 ? $freeze_fn$$.cljs$core$IFn$_invoke$arity$1($idx$jscomp$inline_9834_v$$) : $freeze_fn$$.call(null, $idx$jscomp$inline_9834_v$$)];
  };
  $eavt$$ = datascript.serialize.amap_indexed(function($e$jscomp$368_idx$$, $d$$) {
    $d$$.datascript$db$IDatom$datom_set_idx$arity$2(null, $e$jscomp$368_idx$$);
    $e$jscomp$368_idx$$ = $d$$.e;
    var $G__70582$jscomp$inline_6890_a$$ = $d$$.a;
    $G__70582$jscomp$inline_6890_a$$ = $attrs_map$$.cljs$core$IFn$_invoke$arity$1 ? $attrs_map$$.cljs$core$IFn$_invoke$arity$1($G__70582$jscomp$inline_6890_a$$) : $attrs_map$$.call(null, $G__70582$jscomp$inline_6890_a$$);
    var $v$$ = $write_v$$($d$$.v);
    return [$e$jscomp$368_idx$$, $G__70582$jscomp$inline_6890_a$$, $v$$, $d$$.tx - 536870912];
  }, $APP.cljs$cst$4444$eavt.cljs$core$IFn$_invoke$arity$1($db$$));
  var $aevt$$ = datascript.serialize.amap_indexed(function($_$$, $d$$) {
    return $d$$.datascript$db$IDatom$datom_get_idx$arity$1(null);
  }, $APP.cljs$cst$4445$aevt.cljs$core$IFn$_invoke$arity$1($db$$)), $avet$$ = datascript.serialize.amap_indexed(function($_$$, $d$$) {
    return $d$$.datascript$db$IDatom$datom_get_idx$arity$1(null);
  }, $APP.cljs$cst$4441$avet.cljs$core$IFn$_invoke$arity$1($db$$)), $schema__$1$$ = function() {
    var $G__70586$$ = $APP.cljs$cst$1410$schema.cljs$core$IFn$_invoke$arity$1($db$$);
    return $freeze_fn$$.cljs$core$IFn$_invoke$arity$1 ? $freeze_fn$$.cljs$core$IFn$_invoke$arity$1($G__70586$$) : $freeze_fn$$.call(null, $G__70586$$);
  }();
  $attrs$jscomp$21_attrs__$1$$ = datascript.serialize.amap($freeze_kw_kws$$, $attrs$jscomp$21_attrs__$1$$);
  $freeze_kw_kws$$ = datascript.serialize.amap($freeze_kw_kws$$, $APP.cljs.core.persistent_BANG_($APP.cljs.core.deref($_STAR_kws$$)));
  return {count:$APP.cljs.core.count($APP.cljs$cst$4444$eavt.cljs$core$IFn$_invoke$arity$1($db$$)), tx0:536870912, "max-eid":$APP.cljs$cst$4446$max_eid.cljs$core$IFn$_invoke$arity$1($db$$), "max-tx":$APP.cljs$cst$4447$max_tx.cljs$core$IFn$_invoke$arity$1($db$$), schema:$schema__$1$$, attrs:$attrs$jscomp$21_attrs__$1$$, keywords:$freeze_kw_kws$$, eavt:$eavt$$, aevt:$aevt$$, avet:$avet$$};
};
datascript.serialize.serializable = function($var_args$$) {
  switch(arguments.length) {
    case 1:
      return datascript.serialize.serializable.cljs$core$IFn$_invoke$arity$1(arguments[0]);
    case 2:
      return datascript.serialize.serializable.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.serialize.serializable.cljs$core$IFn$_invoke$arity$1 = function($db$$) {
  return datascript.serialize.serializable_impl($db$$, $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.serialize.serializable.cljs$core$IFn$_invoke$arity$2 = function($db$$, $opts$$) {
  return datascript.serialize.serializable_impl($db$$, $opts$$);
};
datascript.serialize.serializable.cljs$lang$maxFixedArity = 2;
datascript.serialize.from_serializable = function($var_args$$) {
  switch(arguments.length) {
    case 1:
      return datascript.serialize.from_serializable.cljs$core$IFn$_invoke$arity$1(arguments[0]);
    case 2:
      return datascript.serialize.from_serializable.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.serialize.from_serializable.cljs$core$IFn$_invoke$arity$1 = function($from$$) {
  return datascript.serialize.from_serializable.cljs$core$IFn$_invoke$arity$2($from$$, $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.serialize.from_serializable.cljs$core$IFn$_invoke$arity$2 = function($from$$, $map__70620__$1_p__70618_settings$$) {
  $map__70620__$1_p__70618_settings$$ = $APP.cljs.core.__destructure_map($map__70620__$1_p__70618_settings$$);
  var $thaw_fn$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3($map__70620__$1_p__70618_settings$$, cljs$cst$4573$thaw_fn, $APP.clojure.edn.read_string), $aevt$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3($map__70620__$1_p__70618_settings$$, cljs$cst$4574$thaw_kw, datascript.serialize.thaw_kw), $tx0$$ = datascript.serialize.dict_get($from$$, "tx0"), $schema__$1$$ = function() {
    var $G__70624$$ = datascript.serialize.dict_get($from$$, "schema");
    return $thaw_fn$$.cljs$core$IFn$_invoke$arity$1 ? $thaw_fn$$.cljs$core$IFn$_invoke$arity$1($G__70624$$) : $thaw_fn$$.call(null, $G__70624$$);
  }();
  (function() {
    var $fexpr__70625$$ = new $APP.cljs.core.Var(function() {
      return datascript.db.validate_schema;
    }, cljs$cst$4575$datascript_DOT_db_SLASH_validate_schema, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$271$private, $APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [!0, cljs$cst$4576$datascript_DOT_db, cljs$cst$4577$validate_schema, "datascript/db.cljc", 23, 1, 928, 928, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 
    1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1399$schema], null)), null, $APP.cljs.core.truth_(datascript.db.validate_schema) ? datascript.db.validate_schema.cljs$lang$test : null]));
    return $fexpr__70625$$.cljs$core$IFn$_invoke$arity$1 ? $fexpr__70625$$.cljs$core$IFn$_invoke$arity$1($schema__$1$$) : $fexpr__70625$$.call(null, $schema__$1$$);
  })();
  var $attrs$$ = $APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2($aevt$$, datascript.serialize.dict_get($from$$, "attrs")), $keywords$$ = $APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2($aevt$$, datascript.serialize.dict_get($from$$, "keywords")), $eavt$$ = datascript.serialize.amap(function($arr$jscomp$184_tx$$) {
    var $e$$ = datascript.serialize.array_get($arr$jscomp$184_tx$$, 0), $a$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2($attrs$$, datascript.serialize.array_get($arr$jscomp$184_tx$$, 1)), $v$$ = datascript.serialize.array_get($arr$jscomp$184_tx$$, 2);
    if (typeof $v$$ === "number") {
      var $JSCompiler_temp$jscomp$1534_JSCompiler_temp$jscomp$1535_JSCompiler_temp$jscomp$1536_JSCompiler_temp$jscomp$1537_v__$1$$ = $v$$;
    } else {
      if (typeof $v$$ === "string") {
        $JSCompiler_temp$jscomp$1534_JSCompiler_temp$jscomp$1535_JSCompiler_temp$jscomp$1536_JSCompiler_temp$jscomp$1537_v__$1$$ = $v$$;
      } else {
        if ($APP.cljs.core.boolean_QMARK_($v$$)) {
          $JSCompiler_temp$jscomp$1534_JSCompiler_temp$jscomp$1535_JSCompiler_temp$jscomp$1536_JSCompiler_temp$jscomp$1537_v__$1$$ = $v$$;
        } else {
          if (datascript.serialize.array_QMARK_($v$$)) {
            $JSCompiler_temp$jscomp$1534_JSCompiler_temp$jscomp$1535_JSCompiler_temp$jscomp$1536_JSCompiler_temp$jscomp$1537_v__$1$$ = function() {
              var $G__70634_marker$$ = datascript.serialize.array_get($v$$, 0), $pred__70629$$ = $APP.cljs.core._EQ__EQ_;
              if ($APP.cljs.core.truth_($pred__70629$$.cljs$core$IFn$_invoke$arity$2 ? $pred__70629$$.cljs$core$IFn$_invoke$arity$2(0, $G__70634_marker$$) : $pred__70629$$.call(null, 0, $G__70634_marker$$))) {
                return $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2($keywords$$, datascript.serialize.array_get($v$$, 1));
              }
              if ($APP.cljs.core.truth_($pred__70629$$.cljs$core$IFn$_invoke$arity$2 ? $pred__70629$$.cljs$core$IFn$_invoke$arity$2(1, $G__70634_marker$$) : $pred__70629$$.call(null, 1, $G__70634_marker$$))) {
                return $G__70634_marker$$ = datascript.serialize.array_get($v$$, 1), $thaw_fn$$.cljs$core$IFn$_invoke$arity$1 ? $thaw_fn$$.cljs$core$IFn$_invoke$arity$1($G__70634_marker$$) : $thaw_fn$$.call(null, $G__70634_marker$$);
              }
              if ($APP.cljs.core.truth_($pred__70629$$.cljs$core$IFn$_invoke$arity$2 ? $pred__70629$$.cljs$core$IFn$_invoke$arity$2(2, $G__70634_marker$$) : $pred__70629$$.call(null, 2, $G__70634_marker$$))) {
                return Infinity;
              }
              if ($APP.cljs.core.truth_($pred__70629$$.cljs$core$IFn$_invoke$arity$2 ? $pred__70629$$.cljs$core$IFn$_invoke$arity$2(3, $G__70634_marker$$) : $pred__70629$$.call(null, 3, $G__70634_marker$$))) {
                return -Infinity;
              }
              if ($APP.cljs.core.truth_($pred__70629$$.cljs$core$IFn$_invoke$arity$2 ? $pred__70629$$.cljs$core$IFn$_invoke$arity$2(4, $G__70634_marker$$) : $pred__70629$$.call(null, 4, $G__70634_marker$$))) {
                return NaN;
              }
              throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Unexpected value marker ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__70634_marker$$], 0)), " in ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$v$$], 0))], 0))].join(""), 
              new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4578$serialize, $APP.cljs$cst$1429$value, $v$$], null));
            }();
          } else {
            throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Unexpected value type ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.type($v$$)], 0)), " (", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$v$$], 0))], 0)), ")"].join(""), 
            new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4578$serialize, $APP.cljs$cst$1429$value, $v$$], null));
          }
        }
      }
    }
    $arr$jscomp$184_tx$$ = $tx0$$ + datascript.serialize.array_get($arr$jscomp$184_tx$$, 3);
    return datascript.db.datom.cljs$core$IFn$_invoke$arity$4($e$$, $a$$, $JSCompiler_temp$jscomp$1534_JSCompiler_temp$jscomp$1535_JSCompiler_temp$jscomp$1536_JSCompiler_temp$jscomp$1537_v__$1$$, $arr$jscomp$184_tx$$);
  }, datascript.serialize.dict_get($from$$, "eavt"));
  $aevt$$ = function() {
    var $G__70645$$ = datascript.serialize.dict_get($from$$, "aevt");
    return $G__70645$$ == null ? null : datascript.serialize.amap(function($p1__70608_SHARP_$$) {
      return $eavt$$[$p1__70608_SHARP_$$];
    }, $G__70645$$);
  }();
  var $avet$$ = function() {
    var $G__70649$$ = datascript.serialize.dict_get($from$$, "avet");
    return $G__70649$$ == null ? null : datascript.serialize.amap(function($p1__70609_SHARP_$$) {
      return $eavt$$[$p1__70609_SHARP_$$];
    }, $G__70649$$);
  }();
  $map__70620__$1_p__70618_settings$$ = $APP.cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new $APP.cljs.core.PersistentArrayMap(null, 2, [cljs$cst$4435$branching_factor, datascript.serialize.dict_get($from$$, "branching-factor"), cljs$cst$4436$ref_type, function() {
    var $G__70650$$ = datascript.serialize.dict_get($from$$, "ref-type");
    return $G__70650$$ == null ? null : $APP.cljs.core.keyword.cljs$core$IFn$_invoke$arity$1($G__70650$$);
  }()], null), $APP.cljs.core.select_keys($map__70620__$1_p__70618_settings$$, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4435$branching_factor, cljs$cst$4436$ref_type], null))], 0));
  return datascript.db.restore_db(new $APP.cljs.core.PersistentArrayMap(null, 6, [$APP.cljs$cst$1410$schema, $schema__$1$$, $APP.cljs$cst$4444$eavt, $APP.me.tonsky.persistent_sorted_set.from_sorted_array.cljs$core$IFn$_invoke$arity$4(datascript.db.cmp_datoms_eavt, $eavt$$, $eavt$$.length, $map__70620__$1_p__70618_settings$$), $APP.cljs$cst$4445$aevt, $APP.me.tonsky.persistent_sorted_set.from_sorted_array.cljs$core$IFn$_invoke$arity$4(datascript.db.cmp_datoms_aevt, $aevt$$, $aevt$$.length, $map__70620__$1_p__70618_settings$$), 
  $APP.cljs$cst$4441$avet, $APP.me.tonsky.persistent_sorted_set.from_sorted_array.cljs$core$IFn$_invoke$arity$4(datascript.db.cmp_datoms_avet, $avet$$, $avet$$.length, $map__70620__$1_p__70618_settings$$), $APP.cljs$cst$4446$max_eid, datascript.serialize.dict_get($from$$, "max-eid"), $APP.cljs$cst$4447$max_tx, datascript.serialize.dict_get($from$$, "max-tx")], null));
};
datascript.serialize.from_serializable.cljs$lang$maxFixedArity = 2;
datascript.parser = {};
datascript.parser.ITraversable = function() {
};
var datascript$parser$ITraversable$_collect$dyn_72723 = function($_$$, $pred$$, $acc$$) {
  var $m__5372__auto__$jscomp$706_m__5374__auto__$$ = datascript.parser._collect[$APP.goog.typeOf($_$$ == null ? null : $_$$)];
  if ($m__5372__auto__$jscomp$706_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$706_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$706_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($_$$, $pred$$, $acc$$) : $m__5372__auto__$jscomp$706_m__5374__auto__$$.call(null, $_$$, $pred$$, $acc$$);
  }
  $m__5372__auto__$jscomp$706_m__5374__auto__$$ = datascript.parser._collect._;
  if ($m__5372__auto__$jscomp$706_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$706_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$706_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($_$$, $pred$$, $acc$$) : $m__5372__auto__$jscomp$706_m__5374__auto__$$.call(null, $_$$, $pred$$, $acc$$);
  }
  throw $APP.cljs.core.missing_protocol("ITraversable.-collect", $_$$);
};
datascript.parser._collect = function($_$$, $pred$$, $acc$$) {
  return $_$$ != null && $_$$.datascript$parser$ITraversable$_collect$arity$3 != null ? $_$$.datascript$parser$ITraversable$_collect$arity$3($_$$, $pred$$, $acc$$) : datascript$parser$ITraversable$_collect$dyn_72723($_$$, $pred$$, $acc$$);
};
var datascript$parser$ITraversable$_collect_vars$dyn_72728 = function($_$$, $acc$$) {
  var $m__5372__auto__$jscomp$707_m__5374__auto__$$ = datascript.parser._collect_vars[$APP.goog.typeOf($_$$ == null ? null : $_$$)];
  if ($m__5372__auto__$jscomp$707_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$707_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$707_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($_$$, $acc$$) : $m__5372__auto__$jscomp$707_m__5374__auto__$$.call(null, $_$$, $acc$$);
  }
  $m__5372__auto__$jscomp$707_m__5374__auto__$$ = datascript.parser._collect_vars._;
  if ($m__5372__auto__$jscomp$707_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$707_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$707_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($_$$, $acc$$) : $m__5372__auto__$jscomp$707_m__5374__auto__$$.call(null, $_$$, $acc$$);
  }
  throw $APP.cljs.core.missing_protocol("ITraversable.-collect-vars", $_$$);
};
datascript.parser._collect_vars = function($_$$, $acc$$) {
  return $_$$ != null && $_$$.datascript$parser$ITraversable$_collect_vars$arity$2 != null ? $_$$.datascript$parser$ITraversable$_collect_vars$arity$2($_$$, $acc$$) : datascript$parser$ITraversable$_collect_vars$dyn_72728($_$$, $acc$$);
};
var datascript$parser$ITraversable$_postwalk$dyn_72729 = function($_$$, $f$$) {
  var $m__5372__auto__$jscomp$708_m__5374__auto__$$ = datascript.parser._postwalk[$APP.goog.typeOf($_$$ == null ? null : $_$$)];
  if ($m__5372__auto__$jscomp$708_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$708_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$708_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($_$$, $f$$) : $m__5372__auto__$jscomp$708_m__5374__auto__$$.call(null, $_$$, $f$$);
  }
  $m__5372__auto__$jscomp$708_m__5374__auto__$$ = datascript.parser._postwalk._;
  if ($m__5372__auto__$jscomp$708_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$708_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$708_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($_$$, $f$$) : $m__5372__auto__$jscomp$708_m__5374__auto__$$.call(null, $_$$, $f$$);
  }
  throw $APP.cljs.core.missing_protocol("ITraversable.-postwalk", $_$$);
};
datascript.parser._postwalk = function($_$$, $f$$) {
  return $_$$ != null && $_$$.datascript$parser$ITraversable$_postwalk$arity$2 != null ? $_$$.datascript$parser$ITraversable$_postwalk$arity$2($_$$, $f$$) : datascript$parser$ITraversable$_postwalk$dyn_72729($_$$, $f$$);
};
datascript.parser.of_size_QMARK_ = function($form$$, $size$$) {
  return $APP.cljs.core.sequential_QMARK_($form$$) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.count($form$$), $size$$);
};
datascript.parser.parse_seq = function($parse_el$$, $form$$) {
  return $APP.cljs.core.sequential_QMARK_($form$$) ? $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($p1__71839_SHARP_$$, $p2__71838_SHARP__temp__5823__auto__$$) {
    $p2__71838_SHARP__temp__5823__auto__$$ = $parse_el$$.cljs$core$IFn$_invoke$arity$1 ? $parse_el$$.cljs$core$IFn$_invoke$arity$1($p2__71838_SHARP__temp__5823__auto__$$) : $parse_el$$.call(null, $p2__71838_SHARP__temp__5823__auto__$$);
    return $APP.cljs.core.truth_($p2__71838_SHARP__temp__5823__auto__$$) ? $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($p1__71839_SHARP_$$, $p2__71838_SHARP__temp__5823__auto__$$) : $APP.cljs.core.reduced(null);
  }, $APP.cljs.core.PersistentVector.EMPTY, $form$$) : null;
};
datascript.parser.collect = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return datascript.parser.collect.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.parser.collect.cljs$core$IFn$_invoke$arity$2 = function($pred$$, $form$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred$$, $form$$, $APP.cljs.core.PersistentVector.EMPTY);
};
datascript.parser.collect.cljs$core$IFn$_invoke$arity$3 = function($pred$$, $form$$, $acc$$) {
  return $APP.cljs.core.truth_($pred$$.cljs$core$IFn$_invoke$arity$1 ? $pred$$.cljs$core$IFn$_invoke$arity$1($form$$) : $pred$$.call(null, $form$$)) ? $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($acc$$, $form$$) : ($form$$ != null ? $APP.cljs.core.PROTOCOL_SENTINEL === $form$$.datascript$parser$ITraversable$ || ($form$$.cljs$lang$protocol_mask$partition$ ? 0 : $APP.cljs.core.native_satisfies_QMARK_(datascript.parser.ITraversable, $form$$)) : $APP.cljs.core.native_satisfies_QMARK_(datascript.parser.ITraversable, 
  $form$$)) ? datascript.parser._collect($form$$, $pred$$, $acc$$) : datascript.db.seqable_QMARK_($form$$) ? $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($acc__$1$$, $form__$1$$) {
    return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred$$, $form__$1$$, $acc__$1$$);
  }, $acc$$, $form$$) : $acc$$;
};
datascript.parser.collect.cljs$lang$maxFixedArity = 3;
datascript.parser.distinct_QMARK_ = function($coll$$) {
  var $or__5025__auto__$$ = $APP.cljs.core.empty_QMARK_($coll$$);
  return $or__5025__auto__$$ ? $or__5025__auto__$$ : $APP.cljs.core.apply.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.distinct_QMARK_, $coll$$);
};
datascript.parser.postwalk = function($G__71850_G__71851_G__71857_G__71861_form$$, $f$$) {
  return ($G__71850_G__71851_G__71857_G__71861_form$$ != null ? $APP.cljs.core.PROTOCOL_SENTINEL === $G__71850_G__71851_G__71857_G__71861_form$$.datascript$parser$ITraversable$ || ($G__71850_G__71851_G__71857_G__71861_form$$.cljs$lang$protocol_mask$partition$ ? 0 : $APP.cljs.core.native_satisfies_QMARK_(datascript.parser.ITraversable, $G__71850_G__71851_G__71857_G__71861_form$$)) : $APP.cljs.core.native_satisfies_QMARK_(datascript.parser.ITraversable, $G__71850_G__71851_G__71857_G__71861_form$$)) ? 
  ($G__71850_G__71851_G__71857_G__71861_form$$ = datascript.parser._postwalk($G__71850_G__71851_G__71857_G__71861_form$$, $f$$), $f$$.cljs$core$IFn$_invoke$arity$1 ? $f$$.cljs$core$IFn$_invoke$arity$1($G__71850_G__71851_G__71857_G__71861_form$$) : $f$$.call(null, $G__71850_G__71851_G__71857_G__71861_form$$)) : $APP.cljs.core.map_QMARK_($G__71850_G__71851_G__71857_G__71861_form$$) ? ($G__71850_G__71851_G__71857_G__71861_form$$ = $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($form__$1$$, 
  $p__71852_v$$) {
    var $k$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__71852_v$$, 0, null);
    $p__71852_v$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__71852_v$$, 1, null);
    return $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($form__$1$$, $k$$, datascript.parser.postwalk.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.postwalk.cljs$core$IFn$_invoke$arity$2($p__71852_v$$, $f$$) : datascript.parser.postwalk.call(null, $p__71852_v$$, $f$$));
  }, $G__71850_G__71851_G__71857_G__71861_form$$, $G__71850_G__71851_G__71857_G__71861_form$$), $f$$.cljs$core$IFn$_invoke$arity$1 ? $f$$.cljs$core$IFn$_invoke$arity$1($G__71850_G__71851_G__71857_G__71861_form$$) : $f$$.call(null, $G__71850_G__71851_G__71857_G__71861_form$$)) : $APP.cljs.core.seq_QMARK_($G__71850_G__71851_G__71857_G__71861_form$$) ? ($G__71850_G__71851_G__71857_G__71861_form$$ = $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(function($p1__71847_SHARP_$$) {
    return datascript.parser.postwalk.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.postwalk.cljs$core$IFn$_invoke$arity$2($p1__71847_SHARP_$$, $f$$) : datascript.parser.postwalk.call(null, $p1__71847_SHARP_$$, $f$$);
  }, $G__71850_G__71851_G__71857_G__71861_form$$), $f$$.cljs$core$IFn$_invoke$arity$1 ? $f$$.cljs$core$IFn$_invoke$arity$1($G__71850_G__71851_G__71857_G__71861_form$$) : $f$$.call(null, $G__71850_G__71851_G__71857_G__71861_form$$)) : $APP.cljs.core.coll_QMARK_($G__71850_G__71851_G__71857_G__71861_form$$) ? ($G__71850_G__71851_G__71857_G__71861_form$$ = $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.empty($G__71850_G__71851_G__71857_G__71861_form$$), $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(function($p1__71848_SHARP_$$) {
    return datascript.parser.postwalk.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.postwalk.cljs$core$IFn$_invoke$arity$2($p1__71848_SHARP_$$, $f$$) : datascript.parser.postwalk.call(null, $p1__71848_SHARP_$$, $f$$);
  }, $G__71850_G__71851_G__71857_G__71861_form$$)), $f$$.cljs$core$IFn$_invoke$arity$1 ? $f$$.cljs$core$IFn$_invoke$arity$1($G__71850_G__71851_G__71857_G__71861_form$$) : $f$$.call(null, $G__71850_G__71851_G__71857_G__71861_form$$)) : $f$$.cljs$core$IFn$_invoke$arity$1 ? $f$$.cljs$core$IFn$_invoke$arity$1($G__71850_G__71851_G__71857_G__71861_form$$) : $f$$.call(null, $G__71850_G__71851_G__71857_G__71861_form$$);
};
datascript.parser.with_source = function($obj$$, $source$$) {
  return $APP.cljs.core.with_meta($obj$$, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$193$source, $source$$], null));
};
datascript.parser.source = function($obj$$) {
  var $or__5025__auto__$$ = $APP.cljs$cst$193$source.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.meta($obj$$));
  return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $obj$$;
};
datascript.parser.Placeholder = function($__meta$$, $__extmap$$, $__hash$$) {
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.Placeholder.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.Placeholder.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k71866$$, $else__5326__auto__$$) {
  return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k71866$$, $else__5326__auto__$$);
};
datascript.parser.Placeholder.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__71872_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__71872_v__5348__auto__$$, 0, null);
    $p__71872_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__71872_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__71872_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__71872_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.Placeholder.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.Placeholder{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentVector.EMPTY, this.__extmap));
};
datascript.parser.Placeholder.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__71865$$) {
  return new $APP.cljs.core.RecordIter(0, this, 0, $APP.cljs.core.PersistentVector.EMPTY, $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.Placeholder.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.Placeholder.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.Placeholder(this.__meta, this.__extmap, this.__hash);
};
datascript.parser.Placeholder.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 0 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.Placeholder.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$153_h__5134__auto____$1$jscomp$153_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$153_h__5134__auto____$1$jscomp$153_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$153_h__5134__auto____$1$jscomp$153_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$153_h__5134__auto____$1$jscomp$153_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$153_h__5134__auto____$1$jscomp$153_this__5319__auto__$$ = -528488587 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.Placeholder.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this71867$$, $other71868$$) {
  return $other71868$$ != null && this.constructor === $other71868$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other71868$$.__extmap);
};
datascript.parser.Placeholder.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_($APP.cljs.core.PersistentHashSet.EMPTY, $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.Placeholder(this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.parser.Placeholder.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k71866$$) {
  return $APP.cljs.core.contains_QMARK_(this.__extmap, $k71866$$);
};
datascript.parser.Placeholder.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($this__5331__auto__$$, $k__5332__auto__$$, $G__71865$$) {
  return new datascript.parser.Placeholder(this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__71865$$), null);
};
datascript.parser.Placeholder.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentVector.EMPTY, this.__extmap));
};
datascript.parser.Placeholder.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__71865$$) {
  return new datascript.parser.Placeholder($G__71865$$, this.__extmap, this.__hash);
};
datascript.parser.Placeholder.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.Placeholder.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.Placeholder.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto___this__70593__auto__$$, $f71862_temp__5823__auto__$$) {
  $new__70594__auto___this__70593__auto__$$ = new datascript.parser.Placeholder(null, null, null);
  $f71862_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f71862_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto___this__70593__auto__$$, $f71862_temp__5823__auto__$$) : $new__70594__auto___this__70593__auto__$$;
};
datascript.parser.Placeholder.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred71863$$, $acc71864$$) {
  return $acc71864$$;
};
datascript.parser.Placeholder.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($___70597__auto__$$, $acc71864$$) {
  return $acc71864$$;
};
datascript.parser.Placeholder.getBasis = function() {
  return $APP.cljs.core.PersistentVector.EMPTY;
};
datascript.parser.Placeholder.cljs$lang$type = !0;
datascript.parser.Placeholder.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/Placeholder", null, 1, null);
};
datascript.parser.Placeholder.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/Placeholder");
};
datascript.parser.__GT_Placeholder = function() {
  return new datascript.parser.Placeholder(null, null, null);
};
datascript.parser.map__GT_Placeholder = function($G__71869_extmap__5365__auto__$$) {
  var $G__71889$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$1($G__71869_extmap__5365__auto__$$);
  $G__71869_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__71869_extmap__5365__auto__$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__71889$$) : $G__71889$$;
  return new datascript.parser.Placeholder(null, $APP.cljs.core.not_empty($G__71869_extmap__5365__auto__$$), null);
};
datascript.parser.Variable = function($symbol$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.symbol = $symbol$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.Variable.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.Variable.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k71894$$, $else__5326__auto__$$) {
  switch($k71894$$ instanceof $APP.cljs.core.Keyword ? $k71894$$.fqn : null) {
    case "symbol":
      return this.symbol;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k71894$$, $else__5326__auto__$$);
  }
};
datascript.parser.Variable.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__71899_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__71899_v__5348__auto__$$, 0, null);
    $p__71899_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__71899_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__71899_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__71899_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.Variable.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.Variable{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$219$symbol, this.symbol], null)], null), this.__extmap));
};
datascript.parser.Variable.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__71893$$) {
  return new $APP.cljs.core.RecordIter(0, this, 1, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$219$symbol], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.Variable.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.Variable.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.Variable(this.symbol, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.Variable.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 1 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.Variable.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$154_h__5134__auto____$1$jscomp$154_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$154_h__5134__auto____$1$jscomp$154_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$154_h__5134__auto____$1$jscomp$154_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$154_h__5134__auto____$1$jscomp$154_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$154_h__5134__auto____$1$jscomp$154_this__5319__auto__$$ = 736891289 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.Variable.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this71895$$, $other71896$$) {
  return $other71896$$ != null && this.constructor === $other71896$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.symbol, $other71896$$.symbol) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other71896$$.__extmap);
};
datascript.parser.Variable.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$219$symbol, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.Variable(this.symbol, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, 
  $k__5334__auto__$$)), null);
};
datascript.parser.Variable.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k71894$$) {
  switch($k71894$$ instanceof $APP.cljs.core.Keyword ? $k71894$$.fqn : null) {
    case "symbol":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k71894$$);
  }
};
datascript.parser.Variable.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__71908_this__5331__auto__$$, $k__5332__auto__$$, $G__71893$$) {
  $pred__71908_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__71908_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__71908_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$219$symbol, $k__5332__auto__$$) : $pred__71908_this__5331__auto__$$.call(null, $APP.cljs$cst$219$symbol, $k__5332__auto__$$)) ? new datascript.parser.Variable($G__71893$$, this.__meta, this.__extmap, null) : new datascript.parser.Variable(this.symbol, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, 
  $k__5332__auto__$$, $G__71893$$), null);
};
datascript.parser.Variable.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$219$symbol, this.symbol, null)], null), this.__extmap));
};
datascript.parser.Variable.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__71893$$) {
  return new datascript.parser.Variable(this.symbol, $G__71893$$, this.__extmap, this.__hash);
};
datascript.parser.Variable.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.Variable.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.Variable.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$1_this__70593__auto__$$, $f71890_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$1_this__70593__auto__$$ = new datascript.parser.Variable(datascript.parser.postwalk(this.symbol, $f71890_temp__5823__auto__$$), null, null, null);
  $f71890_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f71890_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$1_this__70593__auto__$$, $f71890_temp__5823__auto__$$) : $new__70594__auto__$jscomp$1_this__70593__auto__$$;
};
datascript.parser.Variable.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred71891$$, $acc71892$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred71891$$, this.symbol, $acc71892$$);
};
datascript.parser.Variable.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($___70597__auto__$$, $acc71892$$) {
  return datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($acc71892$$, this.symbol) : datascript.parser.collect_vars_acc.call(null, $acc71892$$, this.symbol);
};
datascript.parser.Variable.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1172$symbol], null);
};
datascript.parser.Variable.cljs$lang$type = !0;
datascript.parser.Variable.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/Variable", null, 1, null);
};
datascript.parser.Variable.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/Variable");
};
datascript.parser.__GT_Variable = function($symbol$$) {
  return new datascript.parser.Variable($symbol$$, null, null, null);
};
datascript.parser.map__GT_Variable = function($G__71897$$) {
  var $G__71911$jscomp$inline_6895_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($G__71897$$, $APP.cljs$cst$219$symbol);
  $G__71911$jscomp$inline_6895_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__71897$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__71911$jscomp$inline_6895_extmap__5365__auto__$$) : $G__71911$jscomp$inline_6895_extmap__5365__auto__$$;
  return new datascript.parser.Variable($APP.cljs$cst$219$symbol.cljs$core$IFn$_invoke$arity$1($G__71897$$), null, $APP.cljs.core.not_empty($G__71911$jscomp$inline_6895_extmap__5365__auto__$$), null);
};
datascript.parser.SrcVar = function($symbol$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.symbol = $symbol$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.SrcVar.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.SrcVar.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k71916$$, $else__5326__auto__$$) {
  switch($k71916$$ instanceof $APP.cljs.core.Keyword ? $k71916$$.fqn : null) {
    case "symbol":
      return this.symbol;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k71916$$, $else__5326__auto__$$);
  }
};
datascript.parser.SrcVar.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__71927_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__71927_v__5348__auto__$$, 0, null);
    $p__71927_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__71927_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__71927_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__71927_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.SrcVar.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.SrcVar{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$219$symbol, this.symbol], null)], null), this.__extmap));
};
datascript.parser.SrcVar.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__71915$$) {
  return new $APP.cljs.core.RecordIter(0, this, 1, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$219$symbol], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.SrcVar.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.SrcVar.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.SrcVar(this.symbol, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.SrcVar.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 1 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.SrcVar.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$155_h__5134__auto____$1$jscomp$155_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$155_h__5134__auto____$1$jscomp$155_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$155_h__5134__auto____$1$jscomp$155_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$155_h__5134__auto____$1$jscomp$155_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$155_h__5134__auto____$1$jscomp$155_this__5319__auto__$$ = -1648766309 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.SrcVar.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this71917$$, $other71918$$) {
  return $other71918$$ != null && this.constructor === $other71918$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.symbol, $other71918$$.symbol) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other71918$$.__extmap);
};
datascript.parser.SrcVar.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$219$symbol, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.SrcVar(this.symbol, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, 
  $k__5334__auto__$$)), null);
};
datascript.parser.SrcVar.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k71916$$) {
  switch($k71916$$ instanceof $APP.cljs.core.Keyword ? $k71916$$.fqn : null) {
    case "symbol":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k71916$$);
  }
};
datascript.parser.SrcVar.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__71937_this__5331__auto__$$, $k__5332__auto__$$, $G__71915$$) {
  $pred__71937_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__71937_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__71937_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$219$symbol, $k__5332__auto__$$) : $pred__71937_this__5331__auto__$$.call(null, $APP.cljs$cst$219$symbol, $k__5332__auto__$$)) ? new datascript.parser.SrcVar($G__71915$$, this.__meta, this.__extmap, null) : new datascript.parser.SrcVar(this.symbol, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, 
  $k__5332__auto__$$, $G__71915$$), null);
};
datascript.parser.SrcVar.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$219$symbol, this.symbol, null)], null), this.__extmap));
};
datascript.parser.SrcVar.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__71915$$) {
  return new datascript.parser.SrcVar(this.symbol, $G__71915$$, this.__extmap, this.__hash);
};
datascript.parser.SrcVar.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.SrcVar.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.SrcVar.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$2_this__70593__auto__$$, $f71912_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$2_this__70593__auto__$$ = new datascript.parser.SrcVar(datascript.parser.postwalk(this.symbol, $f71912_temp__5823__auto__$$), null, null, null);
  $f71912_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f71912_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$2_this__70593__auto__$$, $f71912_temp__5823__auto__$$) : $new__70594__auto__$jscomp$2_this__70593__auto__$$;
};
datascript.parser.SrcVar.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred71913$$, $acc71914$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred71913$$, this.symbol, $acc71914$$);
};
datascript.parser.SrcVar.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($___70597__auto__$$, $acc71914$$) {
  return datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($acc71914$$, this.symbol) : datascript.parser.collect_vars_acc.call(null, $acc71914$$, this.symbol);
};
datascript.parser.SrcVar.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1172$symbol], null);
};
datascript.parser.SrcVar.cljs$lang$type = !0;
datascript.parser.SrcVar.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/SrcVar", null, 1, null);
};
datascript.parser.SrcVar.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/SrcVar");
};
datascript.parser.__GT_SrcVar = function($symbol$$) {
  return new datascript.parser.SrcVar($symbol$$, null, null, null);
};
datascript.parser.map__GT_SrcVar = function($G__71919$$) {
  var $G__71944$jscomp$inline_6897_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($G__71919$$, $APP.cljs$cst$219$symbol);
  $G__71944$jscomp$inline_6897_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__71919$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__71944$jscomp$inline_6897_extmap__5365__auto__$$) : $G__71944$jscomp$inline_6897_extmap__5365__auto__$$;
  return new datascript.parser.SrcVar($APP.cljs$cst$219$symbol.cljs$core$IFn$_invoke$arity$1($G__71919$$), null, $APP.cljs.core.not_empty($G__71944$jscomp$inline_6897_extmap__5365__auto__$$), null);
};
datascript.parser.DefaultSrc = function($__meta$$, $__extmap$$, $__hash$$) {
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.DefaultSrc.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.DefaultSrc.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k71949$$, $else__5326__auto__$$) {
  return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k71949$$, $else__5326__auto__$$);
};
datascript.parser.DefaultSrc.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__71954_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__71954_v__5348__auto__$$, 0, null);
    $p__71954_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__71954_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__71954_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__71954_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.DefaultSrc.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.DefaultSrc{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentVector.EMPTY, this.__extmap));
};
datascript.parser.DefaultSrc.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__71948$$) {
  return new $APP.cljs.core.RecordIter(0, this, 0, $APP.cljs.core.PersistentVector.EMPTY, $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.DefaultSrc.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.DefaultSrc.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.DefaultSrc(this.__meta, this.__extmap, this.__hash);
};
datascript.parser.DefaultSrc.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 0 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.DefaultSrc.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$156_h__5134__auto____$1$jscomp$156_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$156_h__5134__auto____$1$jscomp$156_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$156_h__5134__auto____$1$jscomp$156_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$156_h__5134__auto____$1$jscomp$156_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$156_h__5134__auto____$1$jscomp$156_this__5319__auto__$$ = -350962559 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.DefaultSrc.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this71950$$, $other71951$$) {
  return $other71951$$ != null && this.constructor === $other71951$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other71951$$.__extmap);
};
datascript.parser.DefaultSrc.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_($APP.cljs.core.PersistentHashSet.EMPTY, $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.DefaultSrc(this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.parser.DefaultSrc.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k71949$$) {
  return $APP.cljs.core.contains_QMARK_(this.__extmap, $k71949$$);
};
datascript.parser.DefaultSrc.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($this__5331__auto__$$, $k__5332__auto__$$, $G__71948$$) {
  return new datascript.parser.DefaultSrc(this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__71948$$), null);
};
datascript.parser.DefaultSrc.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentVector.EMPTY, this.__extmap));
};
datascript.parser.DefaultSrc.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__71948$$) {
  return new datascript.parser.DefaultSrc($G__71948$$, this.__extmap, this.__hash);
};
datascript.parser.DefaultSrc.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.DefaultSrc.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.DefaultSrc.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$3_this__70593__auto__$$, $f71945_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$3_this__70593__auto__$$ = new datascript.parser.DefaultSrc(null, null, null);
  $f71945_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f71945_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$3_this__70593__auto__$$, $f71945_temp__5823__auto__$$) : $new__70594__auto__$jscomp$3_this__70593__auto__$$;
};
datascript.parser.DefaultSrc.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred71946$$, $acc71947$$) {
  return $acc71947$$;
};
datascript.parser.DefaultSrc.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($___70597__auto__$$, $acc71947$$) {
  return $acc71947$$;
};
datascript.parser.DefaultSrc.getBasis = function() {
  return $APP.cljs.core.PersistentVector.EMPTY;
};
datascript.parser.DefaultSrc.cljs$lang$type = !0;
datascript.parser.DefaultSrc.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/DefaultSrc", null, 1, null);
};
datascript.parser.DefaultSrc.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/DefaultSrc");
};
datascript.parser.__GT_DefaultSrc = function() {
  return new datascript.parser.DefaultSrc(null, null, null);
};
datascript.parser.map__GT_DefaultSrc = function($G__71952_extmap__5365__auto__$$) {
  var $G__71972$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$1($G__71952_extmap__5365__auto__$$);
  $G__71952_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__71952_extmap__5365__auto__$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__71972$$) : $G__71972$$;
  return new datascript.parser.DefaultSrc(null, $APP.cljs.core.not_empty($G__71952_extmap__5365__auto__$$), null);
};
datascript.parser.RulesVar = function($__meta$$, $__extmap$$, $__hash$$) {
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.RulesVar.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.RulesVar.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k71977$$, $else__5326__auto__$$) {
  return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k71977$$, $else__5326__auto__$$);
};
datascript.parser.RulesVar.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__71986_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__71986_v__5348__auto__$$, 0, null);
    $p__71986_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__71986_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__71986_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__71986_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.RulesVar.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.RulesVar{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentVector.EMPTY, this.__extmap));
};
datascript.parser.RulesVar.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__71976$$) {
  return new $APP.cljs.core.RecordIter(0, this, 0, $APP.cljs.core.PersistentVector.EMPTY, $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.RulesVar.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.RulesVar.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.RulesVar(this.__meta, this.__extmap, this.__hash);
};
datascript.parser.RulesVar.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 0 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.RulesVar.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$157_h__5134__auto____$1$jscomp$157_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$157_h__5134__auto____$1$jscomp$157_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$157_h__5134__auto____$1$jscomp$157_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$157_h__5134__auto____$1$jscomp$157_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$157_h__5134__auto____$1$jscomp$157_this__5319__auto__$$ = -1504050517 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.RulesVar.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this71978$$, $other71979$$) {
  return $other71979$$ != null && this.constructor === $other71979$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other71979$$.__extmap);
};
datascript.parser.RulesVar.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_($APP.cljs.core.PersistentHashSet.EMPTY, $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.RulesVar(this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.parser.RulesVar.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k71977$$) {
  return $APP.cljs.core.contains_QMARK_(this.__extmap, $k71977$$);
};
datascript.parser.RulesVar.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($this__5331__auto__$$, $k__5332__auto__$$, $G__71976$$) {
  return new datascript.parser.RulesVar(this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__71976$$), null);
};
datascript.parser.RulesVar.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentVector.EMPTY, this.__extmap));
};
datascript.parser.RulesVar.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__71976$$) {
  return new datascript.parser.RulesVar($G__71976$$, this.__extmap, this.__hash);
};
datascript.parser.RulesVar.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.RulesVar.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.RulesVar.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$4_this__70593__auto__$$, $f71973_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$4_this__70593__auto__$$ = new datascript.parser.RulesVar(null, null, null);
  $f71973_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f71973_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$4_this__70593__auto__$$, $f71973_temp__5823__auto__$$) : $new__70594__auto__$jscomp$4_this__70593__auto__$$;
};
datascript.parser.RulesVar.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred71974$$, $acc71975$$) {
  return $acc71975$$;
};
datascript.parser.RulesVar.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($___70597__auto__$$, $acc71975$$) {
  return $acc71975$$;
};
datascript.parser.RulesVar.getBasis = function() {
  return $APP.cljs.core.PersistentVector.EMPTY;
};
datascript.parser.RulesVar.cljs$lang$type = !0;
datascript.parser.RulesVar.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/RulesVar", null, 1, null);
};
datascript.parser.RulesVar.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/RulesVar");
};
datascript.parser.__GT_RulesVar = function() {
  return new datascript.parser.RulesVar(null, null, null);
};
datascript.parser.map__GT_RulesVar = function($G__71980_extmap__5365__auto__$$) {
  var $G__71999$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$1($G__71980_extmap__5365__auto__$$);
  $G__71980_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__71980_extmap__5365__auto__$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__71999$$) : $G__71999$$;
  return new datascript.parser.RulesVar(null, $APP.cljs.core.not_empty($G__71980_extmap__5365__auto__$$), null);
};
datascript.parser.Constant = function($value$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.value = $value$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.Constant.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.Constant.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72004$$, $else__5326__auto__$$) {
  switch($k72004$$ instanceof $APP.cljs.core.Keyword ? $k72004$$.fqn : null) {
    case "value":
      return this.value;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72004$$, $else__5326__auto__$$);
  }
};
datascript.parser.Constant.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72014_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72014_v__5348__auto__$$, 0, null);
    $p__72014_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72014_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72014_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72014_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.Constant.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.Constant{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1429$value, this.value], null)], null), this.__extmap));
};
datascript.parser.Constant.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72003$$) {
  return new $APP.cljs.core.RecordIter(0, this, 1, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1429$value], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.Constant.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.Constant.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.Constant(this.value, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.Constant.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 1 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.Constant.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$158_h__5134__auto____$1$jscomp$158_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$158_h__5134__auto____$1$jscomp$158_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$158_h__5134__auto____$1$jscomp$158_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$158_h__5134__auto____$1$jscomp$158_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$158_h__5134__auto____$1$jscomp$158_this__5319__auto__$$ = -812884714 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.Constant.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72005$$, $other72006$$) {
  return $other72006$$ != null && this.constructor === $other72006$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.value, $other72006$$.value) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72006$$.__extmap);
};
datascript.parser.Constant.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$1429$value, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.Constant(this.value, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, 
  $k__5334__auto__$$)), null);
};
datascript.parser.Constant.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72004$$) {
  switch($k72004$$ instanceof $APP.cljs.core.Keyword ? $k72004$$.fqn : null) {
    case "value":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72004$$);
  }
};
datascript.parser.Constant.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72019_this__5331__auto__$$, $k__5332__auto__$$, $G__72003$$) {
  $pred__72019_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72019_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72019_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$1429$value, $k__5332__auto__$$) : $pred__72019_this__5331__auto__$$.call(null, $APP.cljs$cst$1429$value, $k__5332__auto__$$)) ? new datascript.parser.Constant($G__72003$$, this.__meta, this.__extmap, null) : new datascript.parser.Constant(this.value, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, 
  $k__5332__auto__$$, $G__72003$$), null);
};
datascript.parser.Constant.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$1429$value, this.value, null)], null), this.__extmap));
};
datascript.parser.Constant.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72003$$) {
  return new datascript.parser.Constant(this.value, $G__72003$$, this.__extmap, this.__hash);
};
datascript.parser.Constant.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.Constant.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.Constant.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$5_this__70593__auto__$$, $f72000_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$5_this__70593__auto__$$ = new datascript.parser.Constant(datascript.parser.postwalk(this.value, $f72000_temp__5823__auto__$$), null, null, null);
  $f72000_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f72000_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$5_this__70593__auto__$$, $f72000_temp__5823__auto__$$) : $new__70594__auto__$jscomp$5_this__70593__auto__$$;
};
datascript.parser.Constant.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred72001$$, $acc72002$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72001$$, this.value, $acc72002$$);
};
datascript.parser.Constant.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($___70597__auto__$$, $acc72002$$) {
  return datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($acc72002$$, this.value) : datascript.parser.collect_vars_acc.call(null, $acc72002$$, this.value);
};
datascript.parser.Constant.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$15$value], null);
};
datascript.parser.Constant.cljs$lang$type = !0;
datascript.parser.Constant.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/Constant", null, 1, null);
};
datascript.parser.Constant.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/Constant");
};
datascript.parser.__GT_Constant = function($value$$) {
  return new datascript.parser.Constant($value$$, null, null, null);
};
datascript.parser.map__GT_Constant = function($G__72007$$) {
  var $G__72028$jscomp$inline_6903_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($G__72007$$, $APP.cljs$cst$1429$value);
  $G__72028$jscomp$inline_6903_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72007$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72028$jscomp$inline_6903_extmap__5365__auto__$$) : $G__72028$jscomp$inline_6903_extmap__5365__auto__$$;
  return new datascript.parser.Constant($APP.cljs$cst$1429$value.cljs$core$IFn$_invoke$arity$1($G__72007$$), null, $APP.cljs.core.not_empty($G__72028$jscomp$inline_6903_extmap__5365__auto__$$), null);
};
datascript.parser.PlainSymbol = function($symbol$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.symbol = $symbol$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.PlainSymbol.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.PlainSymbol.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72040$$, $else__5326__auto__$$) {
  switch($k72040$$ instanceof $APP.cljs.core.Keyword ? $k72040$$.fqn : null) {
    case "symbol":
      return this.symbol;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72040$$, $else__5326__auto__$$);
  }
};
datascript.parser.PlainSymbol.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72046_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72046_v__5348__auto__$$, 0, null);
    $p__72046_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72046_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72046_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72046_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.PlainSymbol.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.PlainSymbol{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$219$symbol, this.symbol], null)], null), this.__extmap));
};
datascript.parser.PlainSymbol.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72039$$) {
  return new $APP.cljs.core.RecordIter(0, this, 1, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$219$symbol], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.PlainSymbol.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.PlainSymbol.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.PlainSymbol(this.symbol, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.PlainSymbol.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 1 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.PlainSymbol.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$159_h__5134__auto____$1$jscomp$159_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$159_h__5134__auto____$1$jscomp$159_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$159_h__5134__auto____$1$jscomp$159_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$159_h__5134__auto____$1$jscomp$159_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$159_h__5134__auto____$1$jscomp$159_this__5319__auto__$$ = 1509921913 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.PlainSymbol.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72041$$, $other72042$$) {
  return $other72042$$ != null && this.constructor === $other72042$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.symbol, $other72042$$.symbol) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72042$$.__extmap);
};
datascript.parser.PlainSymbol.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$219$symbol, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.PlainSymbol(this.symbol, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, 
  $k__5334__auto__$$)), null);
};
datascript.parser.PlainSymbol.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72040$$) {
  switch($k72040$$ instanceof $APP.cljs.core.Keyword ? $k72040$$.fqn : null) {
    case "symbol":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72040$$);
  }
};
datascript.parser.PlainSymbol.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72068_this__5331__auto__$$, $k__5332__auto__$$, $G__72039$$) {
  $pred__72068_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72068_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72068_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$219$symbol, $k__5332__auto__$$) : $pred__72068_this__5331__auto__$$.call(null, $APP.cljs$cst$219$symbol, $k__5332__auto__$$)) ? new datascript.parser.PlainSymbol($G__72039$$, this.__meta, this.__extmap, null) : new datascript.parser.PlainSymbol(this.symbol, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, 
  $k__5332__auto__$$, $G__72039$$), null);
};
datascript.parser.PlainSymbol.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$219$symbol, this.symbol, null)], null), this.__extmap));
};
datascript.parser.PlainSymbol.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72039$$) {
  return new datascript.parser.PlainSymbol(this.symbol, $G__72039$$, this.__extmap, this.__hash);
};
datascript.parser.PlainSymbol.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.PlainSymbol.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.PlainSymbol.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$6_this__70593__auto__$$, $f72029_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$6_this__70593__auto__$$ = new datascript.parser.PlainSymbol(datascript.parser.postwalk(this.symbol, $f72029_temp__5823__auto__$$), null, null, null);
  $f72029_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f72029_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$6_this__70593__auto__$$, $f72029_temp__5823__auto__$$) : $new__70594__auto__$jscomp$6_this__70593__auto__$$;
};
datascript.parser.PlainSymbol.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred72030$$, $acc72031$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72030$$, this.symbol, $acc72031$$);
};
datascript.parser.PlainSymbol.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($___70597__auto__$$, $acc72031$$) {
  return datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($acc72031$$, this.symbol) : datascript.parser.collect_vars_acc.call(null, $acc72031$$, this.symbol);
};
datascript.parser.PlainSymbol.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1172$symbol], null);
};
datascript.parser.PlainSymbol.cljs$lang$type = !0;
datascript.parser.PlainSymbol.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/PlainSymbol", null, 1, null);
};
datascript.parser.PlainSymbol.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/PlainSymbol");
};
datascript.parser.__GT_PlainSymbol = function($symbol$$) {
  return new datascript.parser.PlainSymbol($symbol$$, null, null, null);
};
datascript.parser.map__GT_PlainSymbol = function($G__72043$$) {
  var $G__72085$jscomp$inline_6905_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($G__72043$$, $APP.cljs$cst$219$symbol);
  $G__72085$jscomp$inline_6905_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72043$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72085$jscomp$inline_6905_extmap__5365__auto__$$) : $G__72085$jscomp$inline_6905_extmap__5365__auto__$$;
  return new datascript.parser.PlainSymbol($APP.cljs$cst$219$symbol.cljs$core$IFn$_invoke$arity$1($G__72043$$), null, $APP.cljs.core.not_empty($G__72085$jscomp$inline_6905_extmap__5365__auto__$$), null);
};
datascript.parser.parse_placeholder = function($form$$) {
  return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$312$_, $form$$) ? new datascript.parser.Placeholder(null, null, null) : null;
};
datascript.parser.parse_variable = function($form$$) {
  return $form$$ instanceof $APP.cljs.core.Symbol && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.first($APP.cljs.core.name($form$$)), "?") ? new datascript.parser.Variable($form$$, null, null, null) : null;
};
datascript.parser.parse_var_required = function($form$$) {
  var $or__5025__auto__$$ = datascript.parser.parse_variable($form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$$)) {
    return $or__5025__auto__$$;
  }
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Cannot parse var, expected symbol starting with ?, got: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$form$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4579$parser_SLASH_rule_var, $APP.cljs$cst$179$form, $form$$], null));
};
datascript.parser.parse_src_var = function($form$$) {
  return $form$$ instanceof $APP.cljs.core.Symbol && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.first($APP.cljs.core.name($form$$)), "$") ? new datascript.parser.SrcVar($form$$, null, null, null) : null;
};
datascript.parser.parse_rules_var = function($form$$) {
  return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$561$_PERCENT_, $form$$) ? new datascript.parser.RulesVar(null, null, null) : null;
};
datascript.parser.parse_constant = function($form$$) {
  return $form$$ instanceof $APP.cljs.core.Symbol && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.first($APP.cljs.core.name($form$$)), "?") ? null : new datascript.parser.Constant($form$$, null, null, null);
};
datascript.parser.parse_plain_symbol = function($form$$) {
  return $form$$ instanceof $APP.cljs.core.Symbol && $APP.cljs.core.not(datascript.parser.parse_variable($form$$)) && $APP.cljs.core.not(datascript.parser.parse_src_var($form$$)) && $APP.cljs.core.not(datascript.parser.parse_rules_var($form$$)) && $APP.cljs.core.not(datascript.parser.parse_placeholder($form$$)) ? new datascript.parser.PlainSymbol($form$$, null, null, null) : null;
};
datascript.parser.parse_plain_variable = function($form$$) {
  return $APP.cljs.core.truth_(datascript.parser.parse_plain_symbol($form$$)) ? new datascript.parser.Variable($form$$, null, null, null) : null;
};
datascript.parser.parse_fn_arg = function($form$$) {
  var $or__5025__auto__$jscomp$480_or__5025__auto____$1$$ = datascript.parser.parse_variable($form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$480_or__5025__auto____$1$$)) {
    return $or__5025__auto__$jscomp$480_or__5025__auto____$1$$;
  }
  $or__5025__auto__$jscomp$480_or__5025__auto____$1$$ = datascript.parser.parse_src_var($form$$);
  return $APP.cljs.core.truth_($or__5025__auto__$jscomp$480_or__5025__auto____$1$$) ? $or__5025__auto__$jscomp$480_or__5025__auto____$1$$ : datascript.parser.parse_constant($form$$);
};
datascript.parser.RuleVars = function($required$$, $free$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.required = $required$$;
  this.free = $free$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.RuleVars.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.RuleVars.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72096$$, $else__5326__auto__$$) {
  switch($k72096$$ instanceof $APP.cljs.core.Keyword ? $k72096$$.fqn : null) {
    case "required":
      return this.required;
    case "free":
      return this.free;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72096$$, $else__5326__auto__$$);
  }
};
datascript.parser.RuleVars.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72101_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72101_v__5348__auto__$$, 0, null);
    $p__72101_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72101_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72101_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72101_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.RuleVars.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.RuleVars{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4580$required, this.required], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4581$free, this.free], null)], null), this.__extmap));
};
datascript.parser.RuleVars.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72095$$) {
  return new $APP.cljs.core.RecordIter(0, this, 2, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4580$required, cljs$cst$4581$free], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.RuleVars.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.RuleVars.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.RuleVars(this.required, this.free, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.RuleVars.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 2 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.RuleVars.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$160_h__5134__auto____$1$jscomp$160_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$160_h__5134__auto____$1$jscomp$160_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$160_h__5134__auto____$1$jscomp$160_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$160_h__5134__auto____$1$jscomp$160_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$160_h__5134__auto____$1$jscomp$160_this__5319__auto__$$ = 892963297 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.RuleVars.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72097$$, $other72098$$) {
  return $other72098$$ != null && this.constructor === $other72098$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.required, $other72098$$.required) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.free, $other72098$$.free) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72098$$.__extmap);
};
datascript.parser.RuleVars.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [cljs$cst$4581$free, null, cljs$cst$4580$required, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.RuleVars(this.required, this.free, this.__meta, 
  $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.parser.RuleVars.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72096$$) {
  switch($k72096$$ instanceof $APP.cljs.core.Keyword ? $k72096$$.fqn : null) {
    case "required":
    case "free":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72096$$);
  }
};
datascript.parser.RuleVars.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72110_this__5331__auto__$$, $k__5332__auto__$$, $G__72095$$) {
  $pred__72110_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72110_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72110_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4580$required, $k__5332__auto__$$) : $pred__72110_this__5331__auto__$$.call(null, cljs$cst$4580$required, $k__5332__auto__$$)) ? new datascript.parser.RuleVars($G__72095$$, this.free, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72110_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72110_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4581$free, 
  $k__5332__auto__$$) : $pred__72110_this__5331__auto__$$.call(null, cljs$cst$4581$free, $k__5332__auto__$$)) ? new datascript.parser.RuleVars(this.required, $G__72095$$, this.__meta, this.__extmap, null) : new datascript.parser.RuleVars(this.required, this.free, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__72095$$), null);
};
datascript.parser.RuleVars.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry(cljs$cst$4580$required, this.required, null), new $APP.cljs.core.MapEntry(cljs$cst$4581$free, this.free, null)], null), this.__extmap));
};
datascript.parser.RuleVars.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72095$$) {
  return new datascript.parser.RuleVars(this.required, this.free, $G__72095$$, this.__extmap, this.__hash);
};
datascript.parser.RuleVars.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.RuleVars.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.RuleVars.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$7_this__70593__auto__$$, $f72092_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$7_this__70593__auto__$$ = new datascript.parser.RuleVars(datascript.parser.postwalk(this.required, $f72092_temp__5823__auto__$$), datascript.parser.postwalk(this.free, $f72092_temp__5823__auto__$$), null, null, null);
  $f72092_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f72092_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$7_this__70593__auto__$$, $f72092_temp__5823__auto__$$) : $new__70594__auto__$jscomp$7_this__70593__auto__$$;
};
datascript.parser.RuleVars.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred72093$$, $acc72094$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72093$$, this.free, datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72093$$, this.required, $acc72094$$));
};
datascript.parser.RuleVars.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($G__72115____70597__auto__$$, $G__72116_acc72094$$) {
  $G__72115____70597__auto__$$ = datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72116_acc72094$$, this.required) : datascript.parser.collect_vars_acc.call(null, $G__72116_acc72094$$, this.required);
  $G__72116_acc72094$$ = this.free;
  return datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72115____70597__auto__$$, $G__72116_acc72094$$) : datascript.parser.collect_vars_acc.call(null, $G__72115____70597__auto__$$, $G__72116_acc72094$$);
};
datascript.parser.RuleVars.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4582$required, cljs$cst$4583$free], null);
};
datascript.parser.RuleVars.cljs$lang$type = !0;
datascript.parser.RuleVars.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/RuleVars", null, 1, null);
};
datascript.parser.RuleVars.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/RuleVars");
};
datascript.parser.__GT_RuleVars = function($required$$, $free$$) {
  return new datascript.parser.RuleVars($required$$, $free$$, null, null, null);
};
datascript.parser.map__GT_RuleVars = function($G__72099$$) {
  var $G__72117$jscomp$inline_6907_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__72099$$, cljs$cst$4580$required, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$4581$free], 0));
  $G__72117$jscomp$inline_6907_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72099$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72117$jscomp$inline_6907_extmap__5365__auto__$$) : $G__72117$jscomp$inline_6907_extmap__5365__auto__$$;
  return new datascript.parser.RuleVars(cljs$cst$4580$required.cljs$core$IFn$_invoke$arity$1($G__72099$$), cljs$cst$4581$free.cljs$core$IFn$_invoke$arity$1($G__72099$$), null, $APP.cljs.core.not_empty($G__72117$jscomp$inline_6907_extmap__5365__auto__$$), null);
};
datascript.parser.parse_rule_vars = function($form$$) {
  if ($APP.cljs.core.sequential_QMARK_($form$$)) {
    var $free_STAR__rest$$ = $APP.cljs.core.sequential_QMARK_($APP.cljs.core.first($form$$)) ? new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.first($form$$), $APP.cljs.core.next($form$$)], null) : new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [null, $form$$], null), $required$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($free_STAR__rest$$, 0, null);
    $free_STAR__rest$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($free_STAR__rest$$, 1, null);
    $required$$ = datascript.parser.parse_seq(datascript.parser.parse_var_required, $required$$);
    $free_STAR__rest$$ = datascript.parser.parse_seq(datascript.parser.parse_var_required, $free_STAR__rest$$);
    if ($APP.cljs.core.empty_QMARK_($required$$) && $APP.cljs.core.empty_QMARK_($free_STAR__rest$$)) {
      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Cannot parse rule-vars, expected [ variable+ | ([ variable+ ] variable*) ]", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4584$parser_SLASH_rule_vars, $APP.cljs$cst$179$form, $form$$], null));
    }
    if (!$APP.cljs.core.truth_(datascript.parser.distinct_QMARK_($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($required$$, $free_STAR__rest$$)))) {
      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Rule variables should be distinct", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4584$parser_SLASH_rule_vars, $APP.cljs$cst$179$form, $form$$], null));
    }
    return new datascript.parser.RuleVars($required$$, $free_STAR__rest$$, null, null, null);
  }
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Cannot parse rule-vars, expected [ variable+ | ([ variable+ ] variable*) ]", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4584$parser_SLASH_rule_vars, $APP.cljs$cst$179$form, $form$$], null));
};
datascript.parser.flatten_rule_vars = function($rule_vars$$) {
  return $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.truth_(cljs$cst$4580$required.cljs$core$IFn$_invoke$arity$1($rule_vars$$)) ? new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$219$symbol, cljs$cst$4580$required.cljs$core$IFn$_invoke$arity$1($rule_vars$$))], null) : null, $APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$219$symbol, cljs$cst$4581$free.cljs$core$IFn$_invoke$arity$1($rule_vars$$)));
};
datascript.parser.rule_vars_arity = function($rule_vars$$) {
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.count(cljs$cst$4580$required.cljs$core$IFn$_invoke$arity$1($rule_vars$$)), $APP.cljs.core.count(cljs$cst$4581$free.cljs$core$IFn$_invoke$arity$1($rule_vars$$))], null);
};
datascript.parser.BindIgnore = function($__meta$$, $__extmap$$, $__hash$$) {
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.BindIgnore.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.BindIgnore.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72131$$, $else__5326__auto__$$) {
  return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72131$$, $else__5326__auto__$$);
};
datascript.parser.BindIgnore.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72142_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72142_v__5348__auto__$$, 0, null);
    $p__72142_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72142_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72142_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72142_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.BindIgnore.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.BindIgnore{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentVector.EMPTY, this.__extmap));
};
datascript.parser.BindIgnore.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72130$$) {
  return new $APP.cljs.core.RecordIter(0, this, 0, $APP.cljs.core.PersistentVector.EMPTY, $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.BindIgnore.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.BindIgnore.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.BindIgnore(this.__meta, this.__extmap, this.__hash);
};
datascript.parser.BindIgnore.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 0 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.BindIgnore.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$161_h__5134__auto____$1$jscomp$161_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$161_h__5134__auto____$1$jscomp$161_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$161_h__5134__auto____$1$jscomp$161_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$161_h__5134__auto____$1$jscomp$161_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$161_h__5134__auto____$1$jscomp$161_this__5319__auto__$$ = -890522983 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.BindIgnore.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72132$$, $other72133$$) {
  return $other72133$$ != null && this.constructor === $other72133$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72133$$.__extmap);
};
datascript.parser.BindIgnore.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_($APP.cljs.core.PersistentHashSet.EMPTY, $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.BindIgnore(this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.parser.BindIgnore.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72131$$) {
  return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72131$$);
};
datascript.parser.BindIgnore.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($this__5331__auto__$$, $k__5332__auto__$$, $G__72130$$) {
  return new datascript.parser.BindIgnore(this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__72130$$), null);
};
datascript.parser.BindIgnore.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentVector.EMPTY, this.__extmap));
};
datascript.parser.BindIgnore.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72130$$) {
  return new datascript.parser.BindIgnore($G__72130$$, this.__extmap, this.__hash);
};
datascript.parser.BindIgnore.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.BindIgnore.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.BindIgnore.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$8_this__70593__auto__$$, $f72127_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$8_this__70593__auto__$$ = new datascript.parser.BindIgnore(null, null, null);
  $f72127_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f72127_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$8_this__70593__auto__$$, $f72127_temp__5823__auto__$$) : $new__70594__auto__$jscomp$8_this__70593__auto__$$;
};
datascript.parser.BindIgnore.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred72128$$, $acc72129$$) {
  return $acc72129$$;
};
datascript.parser.BindIgnore.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($___70597__auto__$$, $acc72129$$) {
  return $acc72129$$;
};
datascript.parser.BindIgnore.getBasis = function() {
  return $APP.cljs.core.PersistentVector.EMPTY;
};
datascript.parser.BindIgnore.cljs$lang$type = !0;
datascript.parser.BindIgnore.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/BindIgnore", null, 1, null);
};
datascript.parser.BindIgnore.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/BindIgnore");
};
datascript.parser.__GT_BindIgnore = function() {
  return new datascript.parser.BindIgnore(null, null, null);
};
datascript.parser.map__GT_BindIgnore = function($G__72140_extmap__5365__auto__$$) {
  var $G__72160$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$1($G__72140_extmap__5365__auto__$$);
  $G__72140_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72140_extmap__5365__auto__$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72160$$) : $G__72160$$;
  return new datascript.parser.BindIgnore(null, $APP.cljs.core.not_empty($G__72140_extmap__5365__auto__$$), null);
};
datascript.parser.BindScalar = function($variable$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.variable = $variable$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.BindScalar.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.BindScalar.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72165$$, $else__5326__auto__$$) {
  switch($k72165$$ instanceof $APP.cljs.core.Keyword ? $k72165$$.fqn : null) {
    case "variable":
      return this.variable;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72165$$, $else__5326__auto__$$);
  }
};
datascript.parser.BindScalar.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72170_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72170_v__5348__auto__$$, 0, null);
    $p__72170_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72170_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72170_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72170_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.BindScalar.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.BindScalar{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4585$variable, this.variable], null)], null), this.__extmap));
};
datascript.parser.BindScalar.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72164$$) {
  return new $APP.cljs.core.RecordIter(0, this, 1, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4585$variable], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.BindScalar.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.BindScalar.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.BindScalar(this.variable, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.BindScalar.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 1 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.BindScalar.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$162_h__5134__auto____$1$jscomp$162_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$162_h__5134__auto____$1$jscomp$162_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$162_h__5134__auto____$1$jscomp$162_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$162_h__5134__auto____$1$jscomp$162_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$162_h__5134__auto____$1$jscomp$162_this__5319__auto__$$ = -1522792445 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.BindScalar.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72166$$, $other72167$$) {
  return $other72167$$ != null && this.constructor === $other72167$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.variable, $other72167$$.variable) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72167$$.__extmap);
};
datascript.parser.BindScalar.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 1, [cljs$cst$4585$variable, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.BindScalar(this.variable, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, 
  $k__5334__auto__$$)), null);
};
datascript.parser.BindScalar.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72165$$) {
  switch($k72165$$ instanceof $APP.cljs.core.Keyword ? $k72165$$.fqn : null) {
    case "variable":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72165$$);
  }
};
datascript.parser.BindScalar.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72176_this__5331__auto__$$, $k__5332__auto__$$, $G__72164$$) {
  $pred__72176_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72176_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72176_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4585$variable, $k__5332__auto__$$) : $pred__72176_this__5331__auto__$$.call(null, cljs$cst$4585$variable, $k__5332__auto__$$)) ? new datascript.parser.BindScalar($G__72164$$, this.__meta, this.__extmap, null) : new datascript.parser.BindScalar(this.variable, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, 
  $k__5332__auto__$$, $G__72164$$), null);
};
datascript.parser.BindScalar.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry(cljs$cst$4585$variable, this.variable, null)], null), this.__extmap));
};
datascript.parser.BindScalar.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72164$$) {
  return new datascript.parser.BindScalar(this.variable, $G__72164$$, this.__extmap, this.__hash);
};
datascript.parser.BindScalar.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.BindScalar.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.BindScalar.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$9_this__70593__auto__$$, $f72161_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$9_this__70593__auto__$$ = new datascript.parser.BindScalar(datascript.parser.postwalk(this.variable, $f72161_temp__5823__auto__$$), null, null, null);
  $f72161_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f72161_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$9_this__70593__auto__$$, $f72161_temp__5823__auto__$$) : $new__70594__auto__$jscomp$9_this__70593__auto__$$;
};
datascript.parser.BindScalar.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred72162$$, $acc72163$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72162$$, this.variable, $acc72163$$);
};
datascript.parser.BindScalar.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($___70597__auto__$$, $acc72163$$) {
  return datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($acc72163$$, this.variable) : datascript.parser.collect_vars_acc.call(null, $acc72163$$, this.variable);
};
datascript.parser.BindScalar.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4586$variable], null);
};
datascript.parser.BindScalar.cljs$lang$type = !0;
datascript.parser.BindScalar.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/BindScalar", null, 1, null);
};
datascript.parser.BindScalar.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/BindScalar");
};
datascript.parser.__GT_BindScalar = function($variable$$) {
  return new datascript.parser.BindScalar($variable$$, null, null, null);
};
datascript.parser.map__GT_BindScalar = function($G__72168$$) {
  var $G__72181$jscomp$inline_6911_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($G__72168$$, cljs$cst$4585$variable);
  $G__72181$jscomp$inline_6911_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72168$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72181$jscomp$inline_6911_extmap__5365__auto__$$) : $G__72181$jscomp$inline_6911_extmap__5365__auto__$$;
  return new datascript.parser.BindScalar(cljs$cst$4585$variable.cljs$core$IFn$_invoke$arity$1($G__72168$$), null, $APP.cljs.core.not_empty($G__72181$jscomp$inline_6911_extmap__5365__auto__$$), null);
};
datascript.parser.BindTuple = function($bindings$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.bindings = $bindings$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.BindTuple.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.BindTuple.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72186$$, $else__5326__auto__$$) {
  switch($k72186$$ instanceof $APP.cljs.core.Keyword ? $k72186$$.fqn : null) {
    case "bindings":
      return this.bindings;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72186$$, $else__5326__auto__$$);
  }
};
datascript.parser.BindTuple.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72195_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72195_v__5348__auto__$$, 0, null);
    $p__72195_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72195_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72195_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72195_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.BindTuple.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.BindTuple{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$394$bindings, this.bindings], null)], null), this.__extmap));
};
datascript.parser.BindTuple.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72185$$) {
  return new $APP.cljs.core.RecordIter(0, this, 1, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$394$bindings], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.BindTuple.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.BindTuple.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.BindTuple(this.bindings, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.BindTuple.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 1 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.BindTuple.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$163_h__5134__auto____$1$jscomp$163_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$163_h__5134__auto____$1$jscomp$163_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$163_h__5134__auto____$1$jscomp$163_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$163_h__5134__auto____$1$jscomp$163_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$163_h__5134__auto____$1$jscomp$163_this__5319__auto__$$ = -1637239347 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.BindTuple.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72187$$, $other72188$$) {
  return $other72188$$ != null && this.constructor === $other72188$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.bindings, $other72188$$.bindings) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72188$$.__extmap);
};
datascript.parser.BindTuple.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$394$bindings, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.BindTuple(this.bindings, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, 
  $k__5334__auto__$$)), null);
};
datascript.parser.BindTuple.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72186$$) {
  switch($k72186$$ instanceof $APP.cljs.core.Keyword ? $k72186$$.fqn : null) {
    case "bindings":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72186$$);
  }
};
datascript.parser.BindTuple.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72203_this__5331__auto__$$, $k__5332__auto__$$, $G__72185$$) {
  $pred__72203_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72203_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72203_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$394$bindings, $k__5332__auto__$$) : $pred__72203_this__5331__auto__$$.call(null, $APP.cljs$cst$394$bindings, $k__5332__auto__$$)) ? new datascript.parser.BindTuple($G__72185$$, this.__meta, this.__extmap, null) : new datascript.parser.BindTuple(this.bindings, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, 
  $k__5332__auto__$$, $G__72185$$), null);
};
datascript.parser.BindTuple.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$394$bindings, this.bindings, null)], null), this.__extmap));
};
datascript.parser.BindTuple.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72185$$) {
  return new datascript.parser.BindTuple(this.bindings, $G__72185$$, this.__extmap, this.__hash);
};
datascript.parser.BindTuple.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.BindTuple.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.BindTuple.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$10_this__70593__auto__$$, $f72182_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$10_this__70593__auto__$$ = new datascript.parser.BindTuple(datascript.parser.postwalk(this.bindings, $f72182_temp__5823__auto__$$), null, null, null);
  $f72182_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f72182_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$10_this__70593__auto__$$, $f72182_temp__5823__auto__$$) : $new__70594__auto__$jscomp$10_this__70593__auto__$$;
};
datascript.parser.BindTuple.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred72183$$, $acc72184$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72183$$, this.bindings, $acc72184$$);
};
datascript.parser.BindTuple.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($___70597__auto__$$, $acc72184$$) {
  return datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($acc72184$$, this.bindings) : datascript.parser.collect_vars_acc.call(null, $acc72184$$, this.bindings);
};
datascript.parser.BindTuple.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$375$bindings], null);
};
datascript.parser.BindTuple.cljs$lang$type = !0;
datascript.parser.BindTuple.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/BindTuple", null, 1, null);
};
datascript.parser.BindTuple.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/BindTuple");
};
datascript.parser.__GT_BindTuple = function($bindings$$) {
  return new datascript.parser.BindTuple($bindings$$, null, null, null);
};
datascript.parser.map__GT_BindTuple = function($G__72191$$) {
  var $G__72206$jscomp$inline_6913_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($G__72191$$, $APP.cljs$cst$394$bindings);
  $G__72206$jscomp$inline_6913_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72191$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72206$jscomp$inline_6913_extmap__5365__auto__$$) : $G__72206$jscomp$inline_6913_extmap__5365__auto__$$;
  return new datascript.parser.BindTuple($APP.cljs$cst$394$bindings.cljs$core$IFn$_invoke$arity$1($G__72191$$), null, $APP.cljs.core.not_empty($G__72206$jscomp$inline_6913_extmap__5365__auto__$$), null);
};
datascript.parser.BindColl = function($binding$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.binding = $binding$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.BindColl.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.BindColl.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72211$$, $else__5326__auto__$$) {
  switch($k72211$$ instanceof $APP.cljs.core.Keyword ? $k72211$$.fqn : null) {
    case "binding":
      return this.binding;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72211$$, $else__5326__auto__$$);
  }
};
datascript.parser.BindColl.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72217_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72217_v__5348__auto__$$, 0, null);
    $p__72217_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72217_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72217_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72217_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.BindColl.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.BindColl{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$4587$binding, this.binding], null)], null), this.__extmap));
};
datascript.parser.BindColl.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72210$$) {
  return new $APP.cljs.core.RecordIter(0, this, 1, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$4587$binding], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.BindColl.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.BindColl.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.BindColl(this.binding, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.BindColl.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 1 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.BindColl.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$164_h__5134__auto____$1$jscomp$164_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$164_h__5134__auto____$1$jscomp$164_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$164_h__5134__auto____$1$jscomp$164_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$164_h__5134__auto____$1$jscomp$164_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$164_h__5134__auto____$1$jscomp$164_this__5319__auto__$$ = -1930368089 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.BindColl.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72212$$, $other72213$$) {
  return $other72213$$ != null && this.constructor === $other72213$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.binding, $other72213$$.binding) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72213$$.__extmap);
};
datascript.parser.BindColl.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$4587$binding, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.BindColl(this.binding, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, 
  $k__5334__auto__$$)), null);
};
datascript.parser.BindColl.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72211$$) {
  switch($k72211$$ instanceof $APP.cljs.core.Keyword ? $k72211$$.fqn : null) {
    case "binding":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72211$$);
  }
};
datascript.parser.BindColl.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72223_this__5331__auto__$$, $k__5332__auto__$$, $G__72210$$) {
  $pred__72223_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72223_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72223_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4587$binding, $k__5332__auto__$$) : $pred__72223_this__5331__auto__$$.call(null, $APP.cljs$cst$4587$binding, $k__5332__auto__$$)) ? new datascript.parser.BindColl($G__72210$$, this.__meta, this.__extmap, null) : new datascript.parser.BindColl(this.binding, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, 
  $k__5332__auto__$$, $G__72210$$), null);
};
datascript.parser.BindColl.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$4587$binding, this.binding, null)], null), this.__extmap));
};
datascript.parser.BindColl.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72210$$) {
  return new datascript.parser.BindColl(this.binding, $G__72210$$, this.__extmap, this.__hash);
};
datascript.parser.BindColl.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.BindColl.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.BindColl.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$11_this__70593__auto__$$, $f72207_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$11_this__70593__auto__$$ = new datascript.parser.BindColl(datascript.parser.postwalk(this.binding, $f72207_temp__5823__auto__$$), null, null, null);
  $f72207_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f72207_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$11_this__70593__auto__$$, $f72207_temp__5823__auto__$$) : $new__70594__auto__$jscomp$11_this__70593__auto__$$;
};
datascript.parser.BindColl.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred72208$$, $acc72209$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72208$$, this.binding, $acc72209$$);
};
datascript.parser.BindColl.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($___70597__auto__$$, $acc72209$$) {
  return datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($acc72209$$, this.binding) : datascript.parser.collect_vars_acc.call(null, $acc72209$$, this.binding);
};
datascript.parser.BindColl.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1183$binding], null);
};
datascript.parser.BindColl.cljs$lang$type = !0;
datascript.parser.BindColl.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/BindColl", null, 1, null);
};
datascript.parser.BindColl.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/BindColl");
};
datascript.parser.__GT_BindColl = function($binding$$) {
  return new datascript.parser.BindColl($binding$$, null, null, null);
};
datascript.parser.map__GT_BindColl = function($G__72214$$) {
  var $G__72230$jscomp$inline_6915_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($G__72214$$, $APP.cljs$cst$4587$binding);
  $G__72230$jscomp$inline_6915_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72214$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72230$jscomp$inline_6915_extmap__5365__auto__$$) : $G__72230$jscomp$inline_6915_extmap__5365__auto__$$;
  return new datascript.parser.BindColl($APP.cljs$cst$4587$binding.cljs$core$IFn$_invoke$arity$1($G__72214$$), null, $APP.cljs.core.not_empty($G__72230$jscomp$inline_6915_extmap__5365__auto__$$), null);
};
datascript.parser.parse_bind_ignore = function($form$$) {
  return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$312$_, $form$$) ? datascript.parser.with_source(new datascript.parser.BindIgnore(null, null, null), $form$$) : null;
};
datascript.parser.parse_bind_scalar = function($form$$) {
  var $temp__5825__auto__$$ = datascript.parser.parse_variable($form$$);
  return $APP.cljs.core.truth_($temp__5825__auto__$$) ? datascript.parser.with_source(new datascript.parser.BindScalar($temp__5825__auto__$$, null, null, null), $form$$) : null;
};
datascript.parser.parse_bind_coll = function($form$$) {
  if (datascript.parser.of_size_QMARK_($form$$, 2) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.second($form$$), $APP.cljs$cst$1481$_DOT__DOT__DOT_)) {
    var $G__72231$jscomp$inline_6917_temp__5823__auto__$$ = $APP.cljs.core.first($form$$);
    $G__72231$jscomp$inline_6917_temp__5823__auto__$$ = datascript.parser.parse_binding.cljs$core$IFn$_invoke$arity$1 ? datascript.parser.parse_binding.cljs$core$IFn$_invoke$arity$1($G__72231$jscomp$inline_6917_temp__5823__auto__$$) : datascript.parser.parse_binding.call(null, $G__72231$jscomp$inline_6917_temp__5823__auto__$$);
    if ($APP.cljs.core.truth_($G__72231$jscomp$inline_6917_temp__5823__auto__$$)) {
      return datascript.parser.with_source(new datascript.parser.BindColl($G__72231$jscomp$inline_6917_temp__5823__auto__$$, null, null, null), $form$$);
    }
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Cannot parse collection binding", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4588$parser_SLASH_binding, $APP.cljs$cst$179$form, $form$$], null));
  }
  return null;
};
datascript.parser.parse_tuple_el = function($form$$) {
  var $or__5025__auto__$$ = datascript.parser.parse_bind_ignore($form$$);
  return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : datascript.parser.parse_binding.cljs$core$IFn$_invoke$arity$1 ? datascript.parser.parse_binding.cljs$core$IFn$_invoke$arity$1($form$$) : datascript.parser.parse_binding.call(null, $form$$);
};
datascript.parser.parse_bind_tuple = function($form$$) {
  var $temp__5825__auto__$$ = datascript.parser.parse_seq(datascript.parser.parse_tuple_el, $form$$);
  if ($APP.cljs.core.truth_($temp__5825__auto__$$)) {
    if ($APP.cljs.core.empty_QMARK_($temp__5825__auto__$$)) {
      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Tuple binding cannot be empty", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4588$parser_SLASH_binding, $APP.cljs$cst$179$form, $form$$], null));
    }
    return datascript.parser.with_source(new datascript.parser.BindTuple($temp__5825__auto__$$, null, null, null), $form$$);
  }
  return null;
};
datascript.parser.parse_bind_rel = function($form$$) {
  return datascript.parser.of_size_QMARK_($form$$, 1) && $APP.cljs.core.sequential_QMARK_($APP.cljs.core.first($form$$)) ? datascript.parser.with_source(new datascript.parser.BindColl(datascript.parser.parse_bind_tuple($APP.cljs.core.first($form$$)), null, null, null), $form$$) : null;
};
datascript.parser.parse_binding = function($form$$) {
  var $or__5025__auto__$jscomp$482_or__5025__auto____$1$jscomp$76_or__5025__auto____$2$jscomp$21_or__5025__auto____$3$jscomp$7_or__5025__auto____$4$$ = datascript.parser.parse_bind_coll($form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$482_or__5025__auto____$1$jscomp$76_or__5025__auto____$2$jscomp$21_or__5025__auto____$3$jscomp$7_or__5025__auto____$4$$)) {
    return $or__5025__auto__$jscomp$482_or__5025__auto____$1$jscomp$76_or__5025__auto____$2$jscomp$21_or__5025__auto____$3$jscomp$7_or__5025__auto____$4$$;
  }
  $or__5025__auto__$jscomp$482_or__5025__auto____$1$jscomp$76_or__5025__auto____$2$jscomp$21_or__5025__auto____$3$jscomp$7_or__5025__auto____$4$$ = datascript.parser.parse_bind_rel($form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$482_or__5025__auto____$1$jscomp$76_or__5025__auto____$2$jscomp$21_or__5025__auto____$3$jscomp$7_or__5025__auto____$4$$)) {
    return $or__5025__auto__$jscomp$482_or__5025__auto____$1$jscomp$76_or__5025__auto____$2$jscomp$21_or__5025__auto____$3$jscomp$7_or__5025__auto____$4$$;
  }
  $or__5025__auto__$jscomp$482_or__5025__auto____$1$jscomp$76_or__5025__auto____$2$jscomp$21_or__5025__auto____$3$jscomp$7_or__5025__auto____$4$$ = datascript.parser.parse_bind_tuple($form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$482_or__5025__auto____$1$jscomp$76_or__5025__auto____$2$jscomp$21_or__5025__auto____$3$jscomp$7_or__5025__auto____$4$$)) {
    return $or__5025__auto__$jscomp$482_or__5025__auto____$1$jscomp$76_or__5025__auto____$2$jscomp$21_or__5025__auto____$3$jscomp$7_or__5025__auto____$4$$;
  }
  $or__5025__auto__$jscomp$482_or__5025__auto____$1$jscomp$76_or__5025__auto____$2$jscomp$21_or__5025__auto____$3$jscomp$7_or__5025__auto____$4$$ = datascript.parser.parse_bind_ignore($form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$482_or__5025__auto____$1$jscomp$76_or__5025__auto____$2$jscomp$21_or__5025__auto____$3$jscomp$7_or__5025__auto____$4$$)) {
    return $or__5025__auto__$jscomp$482_or__5025__auto____$1$jscomp$76_or__5025__auto____$2$jscomp$21_or__5025__auto____$3$jscomp$7_or__5025__auto____$4$$;
  }
  $or__5025__auto__$jscomp$482_or__5025__auto____$1$jscomp$76_or__5025__auto____$2$jscomp$21_or__5025__auto____$3$jscomp$7_or__5025__auto____$4$$ = datascript.parser.parse_bind_scalar($form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$482_or__5025__auto____$1$jscomp$76_or__5025__auto____$2$jscomp$21_or__5025__auto____$3$jscomp$7_or__5025__auto____$4$$)) {
    return $or__5025__auto__$jscomp$482_or__5025__auto____$1$jscomp$76_or__5025__auto____$2$jscomp$21_or__5025__auto____$3$jscomp$7_or__5025__auto____$4$$;
  }
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Cannot parse binding, expected (bind-scalar | bind-tuple | bind-coll | bind-rel)", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4588$parser_SLASH_binding, $APP.cljs$cst$179$form, $form$$], null));
};
datascript.parser.IFindVars = function() {
};
var datascript$parser$IFindVars$_find_vars$dyn_72823 = function($this$$$) {
  var $m__5372__auto__$jscomp$709_m__5374__auto__$$ = datascript.parser._find_vars[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
  if ($m__5372__auto__$jscomp$709_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$709_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$709_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$709_m__5374__auto__$$.call(null, $this$$$);
  }
  $m__5372__auto__$jscomp$709_m__5374__auto__$$ = datascript.parser._find_vars._;
  if ($m__5372__auto__$jscomp$709_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$709_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$709_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$709_m__5374__auto__$$.call(null, $this$$$);
  }
  throw $APP.cljs.core.missing_protocol("IFindVars.-find-vars", $this$$$);
};
datascript.parser._find_vars = function($this$$$) {
  return $this$$$ != null && $this$$$.datascript$parser$IFindVars$_find_vars$arity$1 != null ? $this$$$.datascript$parser$IFindVars$_find_vars$arity$1($this$$$) : datascript$parser$IFindVars$_find_vars$dyn_72823($this$$$);
};
datascript.parser.Variable.prototype.datascript$parser$IFindVars$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.Variable.prototype.datascript$parser$IFindVars$_find_vars$arity$1 = function($this$$$) {
  return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [this.symbol], null);
};
datascript.parser.Aggregate = function($fn$$, $args$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.fn = $fn$$;
  this.args = $args$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.Aggregate.prototype.datascript$parser$IFindVars$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.Aggregate.prototype.datascript$parser$IFindVars$_find_vars$arity$1 = function($_$$) {
  return datascript.parser._find_vars($APP.cljs.core.last(this.args));
};
datascript.parser.Aggregate.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.Aggregate.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72239$$, $else__5326__auto__$$) {
  switch($k72239$$ instanceof $APP.cljs.core.Keyword ? $k72239$$.fqn : null) {
    case "fn":
      return this.fn;
    case "args":
      return this.args;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72239$$, $else__5326__auto__$$);
  }
};
datascript.parser.Aggregate.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72248_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72248_v__5348__auto__$$, 0, null);
    $p__72248_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72248_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72248_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72248_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.Aggregate.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.Aggregate{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$329$fn, this.fn], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$255$args, this.args], null)], null), this.__extmap));
};
datascript.parser.Aggregate.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72238$$) {
  return new $APP.cljs.core.RecordIter(0, this, 2, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$329$fn, $APP.cljs$cst$255$args], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.Aggregate.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.Aggregate.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.Aggregate(this.fn, this.args, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.Aggregate.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 2 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.Aggregate.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$165_h__5134__auto____$1$jscomp$165_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$165_h__5134__auto____$1$jscomp$165_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$165_h__5134__auto____$1$jscomp$165_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$165_h__5134__auto____$1$jscomp$165_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$165_h__5134__auto____$1$jscomp$165_this__5319__auto__$$ = -91097383 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.Aggregate.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72240$$, $other72241$$) {
  return $other72241$$ != null && this.constructor === $other72241$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.fn, $other72241$$.fn) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.args, $other72241$$.args) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72241$$.__extmap);
};
datascript.parser.Aggregate.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$255$args, null, $APP.cljs$cst$329$fn, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.Aggregate(this.fn, this.args, this.__meta, 
  $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.parser.Aggregate.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72239$$) {
  switch($k72239$$ instanceof $APP.cljs.core.Keyword ? $k72239$$.fqn : null) {
    case "fn":
    case "args":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72239$$);
  }
};
datascript.parser.Aggregate.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72255_this__5331__auto__$$, $k__5332__auto__$$, $G__72238$$) {
  $pred__72255_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72255_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72255_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$329$fn, $k__5332__auto__$$) : $pred__72255_this__5331__auto__$$.call(null, $APP.cljs$cst$329$fn, $k__5332__auto__$$)) ? new datascript.parser.Aggregate($G__72238$$, this.args, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72255_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72255_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$255$args, 
  $k__5332__auto__$$) : $pred__72255_this__5331__auto__$$.call(null, $APP.cljs$cst$255$args, $k__5332__auto__$$)) ? new datascript.parser.Aggregate(this.fn, $G__72238$$, this.__meta, this.__extmap, null) : new datascript.parser.Aggregate(this.fn, this.args, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__72238$$), null);
};
datascript.parser.Aggregate.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$329$fn, this.fn, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$255$args, this.args, null)], null), this.__extmap));
};
datascript.parser.Aggregate.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72238$$) {
  return new datascript.parser.Aggregate(this.fn, this.args, $G__72238$$, this.__extmap, this.__hash);
};
datascript.parser.Aggregate.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.Aggregate.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.Aggregate.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$12_this__70593__auto__$$, $f72235_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$12_this__70593__auto__$$ = new datascript.parser.Aggregate(datascript.parser.postwalk(this.fn, $f72235_temp__5823__auto__$$), datascript.parser.postwalk(this.args, $f72235_temp__5823__auto__$$), null, null, null);
  $f72235_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f72235_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$12_this__70593__auto__$$, $f72235_temp__5823__auto__$$) : $new__70594__auto__$jscomp$12_this__70593__auto__$$;
};
datascript.parser.Aggregate.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred72236$$, $acc72237$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72236$$, this.args, datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72236$$, this.fn, $acc72237$$));
};
datascript.parser.Aggregate.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($G__72259____70597__auto__$$, $G__72260_acc72237$$) {
  $G__72259____70597__auto__$$ = datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72260_acc72237$$, this.fn) : datascript.parser.collect_vars_acc.call(null, $G__72260_acc72237$$, this.fn);
  $G__72260_acc72237$$ = this.args;
  return datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72259____70597__auto__$$, $G__72260_acc72237$$) : datascript.parser.collect_vars_acc.call(null, $G__72259____70597__auto__$$, $G__72260_acc72237$$);
};
datascript.parser.Aggregate.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$28$fn, $APP.cljs$cst$1246$args], null);
};
datascript.parser.Aggregate.cljs$lang$type = !0;
datascript.parser.Aggregate.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/Aggregate", null, 1, null);
};
datascript.parser.Aggregate.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/Aggregate");
};
datascript.parser.__GT_Aggregate = function($fn$$, $args$$) {
  return new datascript.parser.Aggregate($fn$$, $args$$, null, null, null);
};
datascript.parser.map__GT_Aggregate = function($G__72242$$) {
  var $G__72261$jscomp$inline_6919_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__72242$$, $APP.cljs$cst$329$fn, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$255$args], 0));
  $G__72261$jscomp$inline_6919_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72242$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72261$jscomp$inline_6919_extmap__5365__auto__$$) : $G__72261$jscomp$inline_6919_extmap__5365__auto__$$;
  return new datascript.parser.Aggregate($APP.cljs$cst$329$fn.cljs$core$IFn$_invoke$arity$1($G__72242$$), $APP.cljs$cst$255$args.cljs$core$IFn$_invoke$arity$1($G__72242$$), null, $APP.cljs.core.not_empty($G__72261$jscomp$inline_6919_extmap__5365__auto__$$), null);
};
datascript.parser.Pull = function($source$$, $variable$$, $pattern$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.source = $source$$;
  this.variable = $variable$$;
  this.pattern = $pattern$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.Pull.prototype.datascript$parser$IFindVars$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.Pull.prototype.datascript$parser$IFindVars$_find_vars$arity$1 = function($_$$) {
  return datascript.parser._find_vars(this.variable);
};
datascript.parser.Pull.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.Pull.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72267$$, $else__5326__auto__$$) {
  switch($k72267$$ instanceof $APP.cljs.core.Keyword ? $k72267$$.fqn : null) {
    case "source":
      return this.source;
    case "variable":
      return this.variable;
    case "pattern":
      return this.pattern;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72267$$, $else__5326__auto__$$);
  }
};
datascript.parser.Pull.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72272_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72272_v__5348__auto__$$, 0, null);
    $p__72272_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72272_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72272_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72272_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.Pull.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.Pull{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$193$source, this.source], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4585$variable, this.variable], null), new $APP.cljs.core.PersistentVector(null, 
  2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2381$pattern, this.pattern], null)], null), this.__extmap));
};
datascript.parser.Pull.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72266$$) {
  return new $APP.cljs.core.RecordIter(0, this, 3, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$193$source, cljs$cst$4585$variable, $APP.cljs$cst$2381$pattern], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.Pull.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.Pull.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.Pull(this.source, this.variable, this.pattern, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.Pull.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 3 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.Pull.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$166_h__5134__auto____$1$jscomp$166_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$166_h__5134__auto____$1$jscomp$166_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$166_h__5134__auto____$1$jscomp$166_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$166_h__5134__auto____$1$jscomp$166_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$166_h__5134__auto____$1$jscomp$166_this__5319__auto__$$ = -2108867663 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.Pull.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72268$$, $other72269$$) {
  return $other72269$$ != null && this.constructor === $other72269$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.source, $other72269$$.source) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.variable, $other72269$$.variable) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.pattern, $other72269$$.pattern) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72269$$.__extmap);
};
datascript.parser.Pull.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 3, [cljs$cst$4585$variable, null, $APP.cljs$cst$193$source, null, $APP.cljs$cst$2381$pattern, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.Pull(this.source, 
  this.variable, this.pattern, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.parser.Pull.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72267$$) {
  switch($k72267$$ instanceof $APP.cljs.core.Keyword ? $k72267$$.fqn : null) {
    case "source":
    case "variable":
    case "pattern":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72267$$);
  }
};
datascript.parser.Pull.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72305_this__5331__auto__$$, $k__5332__auto__$$, $G__72266$$) {
  $pred__72305_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72305_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72305_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$193$source, $k__5332__auto__$$) : $pred__72305_this__5331__auto__$$.call(null, $APP.cljs$cst$193$source, $k__5332__auto__$$)) ? new datascript.parser.Pull($G__72266$$, this.variable, this.pattern, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72305_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72305_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4585$variable, 
  $k__5332__auto__$$) : $pred__72305_this__5331__auto__$$.call(null, cljs$cst$4585$variable, $k__5332__auto__$$)) ? new datascript.parser.Pull(this.source, $G__72266$$, this.pattern, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72305_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72305_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2381$pattern, $k__5332__auto__$$) : $pred__72305_this__5331__auto__$$.call(null, $APP.cljs$cst$2381$pattern, $k__5332__auto__$$)) ? 
  new datascript.parser.Pull(this.source, this.variable, $G__72266$$, this.__meta, this.__extmap, null) : new datascript.parser.Pull(this.source, this.variable, this.pattern, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__72266$$), null);
};
datascript.parser.Pull.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$193$source, this.source, null), new $APP.cljs.core.MapEntry(cljs$cst$4585$variable, this.variable, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$2381$pattern, this.pattern, null)], null), this.__extmap));
};
datascript.parser.Pull.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72266$$) {
  return new datascript.parser.Pull(this.source, this.variable, this.pattern, $G__72266$$, this.__extmap, this.__hash);
};
datascript.parser.Pull.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.Pull.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.Pull.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$13_this__70593__auto__$$, $f72263_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$13_this__70593__auto__$$ = new datascript.parser.Pull(datascript.parser.postwalk(this.source, $f72263_temp__5823__auto__$$), datascript.parser.postwalk(this.variable, $f72263_temp__5823__auto__$$), datascript.parser.postwalk(this.pattern, $f72263_temp__5823__auto__$$), null, null, null);
  $f72263_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f72263_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$13_this__70593__auto__$$, $f72263_temp__5823__auto__$$) : $new__70594__auto__$jscomp$13_this__70593__auto__$$;
};
datascript.parser.Pull.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred72264$$, $acc72265$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72264$$, this.pattern, datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72264$$, this.variable, datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72264$$, this.source, $acc72265$$)));
};
datascript.parser.Pull.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($G__72312_G__72314$jscomp$inline_6921____70597__auto__$$, $G__72313_G__72315$jscomp$inline_6922_acc72265$$) {
  $G__72312_G__72314$jscomp$inline_6921____70597__auto__$$ = datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72313_G__72315$jscomp$inline_6922_acc72265$$, this.source) : datascript.parser.collect_vars_acc.call(null, $G__72313_G__72315$jscomp$inline_6922_acc72265$$, this.source);
  $G__72313_G__72315$jscomp$inline_6922_acc72265$$ = this.variable;
  $G__72312_G__72314$jscomp$inline_6921____70597__auto__$$ = datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72312_G__72314$jscomp$inline_6921____70597__auto__$$, $G__72313_G__72315$jscomp$inline_6922_acc72265$$) : datascript.parser.collect_vars_acc.call(null, $G__72312_G__72314$jscomp$inline_6921____70597__auto__$$, $G__72313_G__72315$jscomp$inline_6922_acc72265$$);
  $G__72313_G__72315$jscomp$inline_6922_acc72265$$ = this.pattern;
  return datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72312_G__72314$jscomp$inline_6921____70597__auto__$$, $G__72313_G__72315$jscomp$inline_6922_acc72265$$) : datascript.parser.collect_vars_acc.call(null, $G__72312_G__72314$jscomp$inline_6921____70597__auto__$$, $G__72313_G__72315$jscomp$inline_6922_acc72265$$);
};
datascript.parser.Pull.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$358$source, cljs$cst$4586$variable, $APP.cljs$cst$2203$pattern], null);
};
datascript.parser.Pull.cljs$lang$type = !0;
datascript.parser.Pull.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/Pull", null, 1, null);
};
datascript.parser.Pull.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/Pull");
};
datascript.parser.__GT_Pull = function($source$$, $variable$$, $pattern$$) {
  return new datascript.parser.Pull($source$$, $variable$$, $pattern$$, null, null, null);
};
datascript.parser.map__GT_Pull = function($G__72270$$) {
  var $G__72317$jscomp$inline_6924_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__72270$$, $APP.cljs$cst$193$source, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$4585$variable, $APP.cljs$cst$2381$pattern], 0));
  $G__72317$jscomp$inline_6924_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72270$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72317$jscomp$inline_6924_extmap__5365__auto__$$) : $G__72317$jscomp$inline_6924_extmap__5365__auto__$$;
  return new datascript.parser.Pull($APP.cljs$cst$193$source.cljs$core$IFn$_invoke$arity$1($G__72270$$), cljs$cst$4585$variable.cljs$core$IFn$_invoke$arity$1($G__72270$$), $APP.cljs$cst$2381$pattern.cljs$core$IFn$_invoke$arity$1($G__72270$$), null, $APP.cljs.core.not_empty($G__72317$jscomp$inline_6924_extmap__5365__auto__$$), null);
};
datascript.parser.IFindElements = function() {
};
var datascript$parser$IFindElements$find_elements$dyn_72835 = function($this$$$) {
  var $m__5372__auto__$jscomp$710_m__5374__auto__$$ = datascript.parser.find_elements[$APP.goog.typeOf($this$$$ == null ? null : $this$$$)];
  if ($m__5372__auto__$jscomp$710_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$710_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$710_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$710_m__5374__auto__$$.call(null, $this$$$);
  }
  $m__5372__auto__$jscomp$710_m__5374__auto__$$ = datascript.parser.find_elements._;
  if ($m__5372__auto__$jscomp$710_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$710_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $m__5372__auto__$jscomp$710_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$1($this$$$) : $m__5372__auto__$jscomp$710_m__5374__auto__$$.call(null, $this$$$);
  }
  throw $APP.cljs.core.missing_protocol("IFindElements.find-elements", $this$$$);
};
datascript.parser.find_elements = function($this$$$) {
  return $this$$$ != null && $this$$$.datascript$parser$IFindElements$find_elements$arity$1 != null ? $this$$$.datascript$parser$IFindElements$find_elements$arity$1($this$$$) : datascript$parser$IFindElements$find_elements$dyn_72835($this$$$);
};
datascript.parser.FindRel = function($elements$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.elements = $elements$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.FindRel.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.FindRel.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72322$$, $else__5326__auto__$$) {
  switch($k72322$$ instanceof $APP.cljs.core.Keyword ? $k72322$$.fqn : null) {
    case "elements":
      return this.elements;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72322$$, $else__5326__auto__$$);
  }
};
datascript.parser.FindRel.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72328_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72328_v__5348__auto__$$, 0, null);
    $p__72328_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72328_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72328_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72328_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.FindRel.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.FindRel{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1422$elements, this.elements], null)], null), this.__extmap));
};
datascript.parser.FindRel.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72321$$) {
  return new $APP.cljs.core.RecordIter(0, this, 1, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1422$elements], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.FindRel.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.FindRel.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.FindRel(this.elements, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.FindRel.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 1 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.FindRel.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$167_h__5134__auto____$1$jscomp$167_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$167_h__5134__auto____$1$jscomp$167_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$167_h__5134__auto____$1$jscomp$167_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$167_h__5134__auto____$1$jscomp$167_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$167_h__5134__auto____$1$jscomp$167_this__5319__auto__$$ = 744809563 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.FindRel.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72323$$, $other72324$$) {
  return $other72324$$ != null && this.constructor === $other72324$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.elements, $other72324$$.elements) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72324$$.__extmap);
};
datascript.parser.FindRel.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$1422$elements, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.FindRel(this.elements, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, 
  $k__5334__auto__$$)), null);
};
datascript.parser.FindRel.prototype.datascript$parser$IFindElements$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.FindRel.prototype.datascript$parser$IFindElements$find_elements$arity$1 = function($_$$) {
  return this.elements;
};
datascript.parser.FindRel.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72322$$) {
  switch($k72322$$ instanceof $APP.cljs.core.Keyword ? $k72322$$.fqn : null) {
    case "elements":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72322$$);
  }
};
datascript.parser.FindRel.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72339_this__5331__auto__$$, $k__5332__auto__$$, $G__72321$$) {
  $pred__72339_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72339_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72339_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$1422$elements, $k__5332__auto__$$) : $pred__72339_this__5331__auto__$$.call(null, $APP.cljs$cst$1422$elements, $k__5332__auto__$$)) ? new datascript.parser.FindRel($G__72321$$, this.__meta, this.__extmap, null) : new datascript.parser.FindRel(this.elements, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, 
  $k__5332__auto__$$, $G__72321$$), null);
};
datascript.parser.FindRel.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$1422$elements, this.elements, null)], null), this.__extmap));
};
datascript.parser.FindRel.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72321$$) {
  return new datascript.parser.FindRel(this.elements, $G__72321$$, this.__extmap, this.__hash);
};
datascript.parser.FindRel.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.FindRel.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.FindRel.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$14_this__70593__auto__$$, $f72318_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$14_this__70593__auto__$$ = new datascript.parser.FindRel(datascript.parser.postwalk(this.elements, $f72318_temp__5823__auto__$$), null, null, null);
  $f72318_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f72318_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$14_this__70593__auto__$$, $f72318_temp__5823__auto__$$) : $new__70594__auto__$jscomp$14_this__70593__auto__$$;
};
datascript.parser.FindRel.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred72319$$, $acc72320$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72319$$, this.elements, $acc72320$$);
};
datascript.parser.FindRel.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($___70597__auto__$$, $acc72320$$) {
  return datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($acc72320$$, this.elements) : datascript.parser.collect_vars_acc.call(null, $acc72320$$, this.elements);
};
datascript.parser.FindRel.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1425$elements], null);
};
datascript.parser.FindRel.cljs$lang$type = !0;
datascript.parser.FindRel.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/FindRel", null, 1, null);
};
datascript.parser.FindRel.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/FindRel");
};
datascript.parser.__GT_FindRel = function($elements$$) {
  return new datascript.parser.FindRel($elements$$, null, null, null);
};
datascript.parser.map__GT_FindRel = function($G__72325$$) {
  var $G__72342$jscomp$inline_6926_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($G__72325$$, $APP.cljs$cst$1422$elements);
  $G__72342$jscomp$inline_6926_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72325$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72342$jscomp$inline_6926_extmap__5365__auto__$$) : $G__72342$jscomp$inline_6926_extmap__5365__auto__$$;
  return new datascript.parser.FindRel($APP.cljs$cst$1422$elements.cljs$core$IFn$_invoke$arity$1($G__72325$$), null, $APP.cljs.core.not_empty($G__72342$jscomp$inline_6926_extmap__5365__auto__$$), null);
};
datascript.parser.FindColl = function($element$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.element = $element$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.FindColl.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.FindColl.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72347$$, $else__5326__auto__$$) {
  switch($k72347$$ instanceof $APP.cljs.core.Keyword ? $k72347$$.fqn : null) {
    case "element":
      return this.element;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72347$$, $else__5326__auto__$$);
  }
};
datascript.parser.FindColl.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72355_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72355_v__5348__auto__$$, 0, null);
    $p__72355_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72355_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72355_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72355_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.FindColl.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.FindColl{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2091$element, this.element], null)], null), this.__extmap));
};
datascript.parser.FindColl.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72346$$) {
  return new $APP.cljs.core.RecordIter(0, this, 1, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2091$element], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.FindColl.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.FindColl.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.FindColl(this.element, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.FindColl.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 1 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.FindColl.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$168_h__5134__auto____$1$jscomp$168_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$168_h__5134__auto____$1$jscomp$168_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$168_h__5134__auto____$1$jscomp$168_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$168_h__5134__auto____$1$jscomp$168_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$168_h__5134__auto____$1$jscomp$168_this__5319__auto__$$ = 124241361 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.FindColl.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72348$$, $other72349$$) {
  return $other72349$$ != null && this.constructor === $other72349$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.element, $other72349$$.element) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72349$$.__extmap);
};
datascript.parser.FindColl.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$2091$element, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.FindColl(this.element, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, 
  $k__5334__auto__$$)), null);
};
datascript.parser.FindColl.prototype.datascript$parser$IFindElements$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.FindColl.prototype.datascript$parser$IFindElements$find_elements$arity$1 = function($_$$) {
  return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [this.element], null);
};
datascript.parser.FindColl.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72347$$) {
  switch($k72347$$ instanceof $APP.cljs.core.Keyword ? $k72347$$.fqn : null) {
    case "element":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72347$$);
  }
};
datascript.parser.FindColl.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72362_this__5331__auto__$$, $k__5332__auto__$$, $G__72346$$) {
  $pred__72362_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72362_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72362_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2091$element, $k__5332__auto__$$) : $pred__72362_this__5331__auto__$$.call(null, $APP.cljs$cst$2091$element, $k__5332__auto__$$)) ? new datascript.parser.FindColl($G__72346$$, this.__meta, this.__extmap, null) : new datascript.parser.FindColl(this.element, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, 
  $k__5332__auto__$$, $G__72346$$), null);
};
datascript.parser.FindColl.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$2091$element, this.element, null)], null), this.__extmap));
};
datascript.parser.FindColl.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72346$$) {
  return new datascript.parser.FindColl(this.element, $G__72346$$, this.__extmap, this.__hash);
};
datascript.parser.FindColl.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.FindColl.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.FindColl.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$15_this__70593__auto__$$, $f72343_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$15_this__70593__auto__$$ = new datascript.parser.FindColl(datascript.parser.postwalk(this.element, $f72343_temp__5823__auto__$$), null, null, null);
  $f72343_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f72343_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$15_this__70593__auto__$$, $f72343_temp__5823__auto__$$) : $new__70594__auto__$jscomp$15_this__70593__auto__$$;
};
datascript.parser.FindColl.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred72344$$, $acc72345$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72344$$, this.element, $acc72345$$);
};
datascript.parser.FindColl.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($___70597__auto__$$, $acc72345$$) {
  return datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($acc72345$$, this.element) : datascript.parser.collect_vars_acc.call(null, $acc72345$$, this.element);
};
datascript.parser.FindColl.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2415$element], null);
};
datascript.parser.FindColl.cljs$lang$type = !0;
datascript.parser.FindColl.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/FindColl", null, 1, null);
};
datascript.parser.FindColl.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/FindColl");
};
datascript.parser.__GT_FindColl = function($element$$) {
  return new datascript.parser.FindColl($element$$, null, null, null);
};
datascript.parser.map__GT_FindColl = function($G__72350$$) {
  var $G__72365$jscomp$inline_6928_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($G__72350$$, $APP.cljs$cst$2091$element);
  $G__72365$jscomp$inline_6928_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72350$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72365$jscomp$inline_6928_extmap__5365__auto__$$) : $G__72365$jscomp$inline_6928_extmap__5365__auto__$$;
  return new datascript.parser.FindColl($APP.cljs$cst$2091$element.cljs$core$IFn$_invoke$arity$1($G__72350$$), null, $APP.cljs.core.not_empty($G__72365$jscomp$inline_6928_extmap__5365__auto__$$), null);
};
datascript.parser.FindScalar = function($element$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.element = $element$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.FindScalar.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.FindScalar.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72370$$, $else__5326__auto__$$) {
  switch($k72370$$ instanceof $APP.cljs.core.Keyword ? $k72370$$.fqn : null) {
    case "element":
      return this.element;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72370$$, $else__5326__auto__$$);
  }
};
datascript.parser.FindScalar.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72375_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72375_v__5348__auto__$$, 0, null);
    $p__72375_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72375_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72375_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72375_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.FindScalar.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.FindScalar{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2091$element, this.element], null)], null), this.__extmap));
};
datascript.parser.FindScalar.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72369$$) {
  return new $APP.cljs.core.RecordIter(0, this, 1, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2091$element], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.FindScalar.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.FindScalar.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.FindScalar(this.element, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.FindScalar.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 1 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.FindScalar.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$169_h__5134__auto____$1$jscomp$169_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$169_h__5134__auto____$1$jscomp$169_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$169_h__5134__auto____$1$jscomp$169_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$169_h__5134__auto____$1$jscomp$169_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$169_h__5134__auto____$1$jscomp$169_this__5319__auto__$$ = -661542332 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.FindScalar.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72371$$, $other72372$$) {
  return $other72372$$ != null && this.constructor === $other72372$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.element, $other72372$$.element) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72372$$.__extmap);
};
datascript.parser.FindScalar.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$2091$element, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.FindScalar(this.element, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, 
  $k__5334__auto__$$)), null);
};
datascript.parser.FindScalar.prototype.datascript$parser$IFindElements$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.FindScalar.prototype.datascript$parser$IFindElements$find_elements$arity$1 = function($_$$) {
  return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [this.element], null);
};
datascript.parser.FindScalar.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72370$$) {
  switch($k72370$$ instanceof $APP.cljs.core.Keyword ? $k72370$$.fqn : null) {
    case "element":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72370$$);
  }
};
datascript.parser.FindScalar.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72380_this__5331__auto__$$, $k__5332__auto__$$, $G__72369$$) {
  $pred__72380_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72380_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72380_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2091$element, $k__5332__auto__$$) : $pred__72380_this__5331__auto__$$.call(null, $APP.cljs$cst$2091$element, $k__5332__auto__$$)) ? new datascript.parser.FindScalar($G__72369$$, this.__meta, this.__extmap, null) : new datascript.parser.FindScalar(this.element, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, 
  $k__5332__auto__$$, $G__72369$$), null);
};
datascript.parser.FindScalar.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$2091$element, this.element, null)], null), this.__extmap));
};
datascript.parser.FindScalar.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72369$$) {
  return new datascript.parser.FindScalar(this.element, $G__72369$$, this.__extmap, this.__hash);
};
datascript.parser.FindScalar.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.FindScalar.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.FindScalar.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$16_this__70593__auto__$$, $f72366_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$16_this__70593__auto__$$ = new datascript.parser.FindScalar(datascript.parser.postwalk(this.element, $f72366_temp__5823__auto__$$), null, null, null);
  $f72366_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f72366_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$16_this__70593__auto__$$, $f72366_temp__5823__auto__$$) : $new__70594__auto__$jscomp$16_this__70593__auto__$$;
};
datascript.parser.FindScalar.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred72367$$, $acc72368$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72367$$, this.element, $acc72368$$);
};
datascript.parser.FindScalar.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($___70597__auto__$$, $acc72368$$) {
  return datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($acc72368$$, this.element) : datascript.parser.collect_vars_acc.call(null, $acc72368$$, this.element);
};
datascript.parser.FindScalar.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2415$element], null);
};
datascript.parser.FindScalar.cljs$lang$type = !0;
datascript.parser.FindScalar.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/FindScalar", null, 1, null);
};
datascript.parser.FindScalar.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/FindScalar");
};
datascript.parser.__GT_FindScalar = function($element$$) {
  return new datascript.parser.FindScalar($element$$, null, null, null);
};
datascript.parser.map__GT_FindScalar = function($G__72373$$) {
  var $G__72383$jscomp$inline_6930_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($G__72373$$, $APP.cljs$cst$2091$element);
  $G__72383$jscomp$inline_6930_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72373$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72383$jscomp$inline_6930_extmap__5365__auto__$$) : $G__72383$jscomp$inline_6930_extmap__5365__auto__$$;
  return new datascript.parser.FindScalar($APP.cljs$cst$2091$element.cljs$core$IFn$_invoke$arity$1($G__72373$$), null, $APP.cljs.core.not_empty($G__72383$jscomp$inline_6930_extmap__5365__auto__$$), null);
};
datascript.parser.FindTuple = function($elements$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.elements = $elements$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.FindTuple.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.FindTuple.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72388$$, $else__5326__auto__$$) {
  switch($k72388$$ instanceof $APP.cljs.core.Keyword ? $k72388$$.fqn : null) {
    case "elements":
      return this.elements;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72388$$, $else__5326__auto__$$);
  }
};
datascript.parser.FindTuple.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72393_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72393_v__5348__auto__$$, 0, null);
    $p__72393_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72393_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72393_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72393_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.FindTuple.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.FindTuple{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1422$elements, this.elements], null)], null), this.__extmap));
};
datascript.parser.FindTuple.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72387$$) {
  return new $APP.cljs.core.RecordIter(0, this, 1, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1422$elements], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.FindTuple.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.FindTuple.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.FindTuple(this.elements, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.FindTuple.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 1 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.FindTuple.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$170_h__5134__auto____$1$jscomp$170_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$170_h__5134__auto____$1$jscomp$170_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$170_h__5134__auto____$1$jscomp$170_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$170_h__5134__auto____$1$jscomp$170_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$170_h__5134__auto____$1$jscomp$170_this__5319__auto__$$ = 681530371 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.FindTuple.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72389$$, $other72390$$) {
  return $other72390$$ != null && this.constructor === $other72390$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.elements, $other72390$$.elements) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72390$$.__extmap);
};
datascript.parser.FindTuple.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$1422$elements, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.FindTuple(this.elements, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, 
  $k__5334__auto__$$)), null);
};
datascript.parser.FindTuple.prototype.datascript$parser$IFindElements$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.FindTuple.prototype.datascript$parser$IFindElements$find_elements$arity$1 = function($_$$) {
  return this.elements;
};
datascript.parser.FindTuple.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72388$$) {
  switch($k72388$$ instanceof $APP.cljs.core.Keyword ? $k72388$$.fqn : null) {
    case "elements":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72388$$);
  }
};
datascript.parser.FindTuple.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72398_this__5331__auto__$$, $k__5332__auto__$$, $G__72387$$) {
  $pred__72398_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72398_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72398_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$1422$elements, $k__5332__auto__$$) : $pred__72398_this__5331__auto__$$.call(null, $APP.cljs$cst$1422$elements, $k__5332__auto__$$)) ? new datascript.parser.FindTuple($G__72387$$, this.__meta, this.__extmap, null) : new datascript.parser.FindTuple(this.elements, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, 
  $k__5332__auto__$$, $G__72387$$), null);
};
datascript.parser.FindTuple.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$1422$elements, this.elements, null)], null), this.__extmap));
};
datascript.parser.FindTuple.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72387$$) {
  return new datascript.parser.FindTuple(this.elements, $G__72387$$, this.__extmap, this.__hash);
};
datascript.parser.FindTuple.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.FindTuple.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.FindTuple.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$17_this__70593__auto__$$, $f72384_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$17_this__70593__auto__$$ = new datascript.parser.FindTuple(datascript.parser.postwalk(this.elements, $f72384_temp__5823__auto__$$), null, null, null);
  $f72384_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f72384_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$17_this__70593__auto__$$, $f72384_temp__5823__auto__$$) : $new__70594__auto__$jscomp$17_this__70593__auto__$$;
};
datascript.parser.FindTuple.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred72385$$, $acc72386$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72385$$, this.elements, $acc72386$$);
};
datascript.parser.FindTuple.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($___70597__auto__$$, $acc72386$$) {
  return datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($acc72386$$, this.elements) : datascript.parser.collect_vars_acc.call(null, $acc72386$$, this.elements);
};
datascript.parser.FindTuple.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1425$elements], null);
};
datascript.parser.FindTuple.cljs$lang$type = !0;
datascript.parser.FindTuple.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/FindTuple", null, 1, null);
};
datascript.parser.FindTuple.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/FindTuple");
};
datascript.parser.__GT_FindTuple = function($elements$$) {
  return new datascript.parser.FindTuple($elements$$, null, null, null);
};
datascript.parser.map__GT_FindTuple = function($G__72391$$) {
  var $G__72401$jscomp$inline_6932_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($G__72391$$, $APP.cljs$cst$1422$elements);
  $G__72401$jscomp$inline_6932_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72391$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72401$jscomp$inline_6932_extmap__5365__auto__$$) : $G__72401$jscomp$inline_6932_extmap__5365__auto__$$;
  return new datascript.parser.FindTuple($APP.cljs$cst$1422$elements.cljs$core$IFn$_invoke$arity$1($G__72391$$), null, $APP.cljs.core.not_empty($G__72401$jscomp$inline_6932_extmap__5365__auto__$$), null);
};
datascript.parser.find_vars = function($find$$) {
  return $APP.cljs.core.mapcat.cljs$core$IFn$_invoke$arity$variadic(datascript.parser._find_vars, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([datascript.parser.find_elements($find$$)], 0));
};
datascript.parser.aggregate_QMARK_ = function($element$$) {
  return $element$$ instanceof datascript.parser.Aggregate;
};
datascript.parser.pull_QMARK_ = function($element$$) {
  return $element$$ instanceof datascript.parser.Pull;
};
datascript.parser.parse_aggregate = function($first__72404_fn_STAR__form$$) {
  if ($APP.cljs.core.sequential_QMARK_($first__72404_fn_STAR__form$$) && $APP.cljs.core.count($first__72404_fn_STAR__form$$) >= 2) {
    var $args$jscomp$296_args_STAR_$$ = $APP.cljs.core.seq($first__72404_fn_STAR__form$$);
    $first__72404_fn_STAR__form$$ = $APP.cljs.core.first($args$jscomp$296_args_STAR_$$);
    $args$jscomp$296_args_STAR_$$ = $APP.cljs.core.next($args$jscomp$296_args_STAR_$$);
    $first__72404_fn_STAR__form$$ = datascript.parser.parse_plain_symbol($first__72404_fn_STAR__form$$);
    $args$jscomp$296_args_STAR_$$ = datascript.parser.parse_seq(datascript.parser.parse_fn_arg, $args$jscomp$296_args_STAR_$$);
    var $JSCompiler_temp_const$$ = $APP.cljs.core, $JSCompiler_temp_const$jscomp$0$$ = $JSCompiler_temp_const$$.truth_;
    var $JSCompiler_inline_result$$ = $APP.cljs.core.truth_($first__72404_fn_STAR__form$$) ? $args$jscomp$296_args_STAR_$$ : $first__72404_fn_STAR__form$$;
    return $JSCompiler_temp_const$jscomp$0$$.call($JSCompiler_temp_const$$, $JSCompiler_inline_result$$) ? new datascript.parser.Aggregate($first__72404_fn_STAR__form$$, $args$jscomp$296_args_STAR_$$, null, null, null) : null;
  }
  return null;
};
datascript.parser.parse_aggregate_custom = function($form$$) {
  if ($APP.cljs.core.sequential_QMARK_($form$$) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.first($form$$), cljs$cst$4589$aggregate)) {
    if ($APP.cljs.core.count($form$$) >= 3) {
      var $first__72407__$1_fn_STAR_$$ = $APP.cljs.core.seq($form$$);
      $APP.cljs.core.first($first__72407__$1_fn_STAR_$$);
      var $args$jscomp$297_args_STAR_$$ = $APP.cljs.core.next($first__72407__$1_fn_STAR_$$);
      $first__72407__$1_fn_STAR_$$ = $APP.cljs.core.first($args$jscomp$297_args_STAR_$$);
      $args$jscomp$297_args_STAR_$$ = $APP.cljs.core.next($args$jscomp$297_args_STAR_$$);
      $first__72407__$1_fn_STAR_$$ = datascript.parser.parse_variable($first__72407__$1_fn_STAR_$$);
      $args$jscomp$297_args_STAR_$$ = datascript.parser.parse_seq(datascript.parser.parse_fn_arg, $args$jscomp$297_args_STAR_$$);
      var $JSCompiler_temp_const$$ = $APP.cljs.core, $JSCompiler_temp_const$jscomp$0$$ = $JSCompiler_temp_const$$.truth_;
      var $JSCompiler_inline_result$$ = $APP.cljs.core.truth_($first__72407__$1_fn_STAR_$$) ? $args$jscomp$297_args_STAR_$$ : $first__72407__$1_fn_STAR_$$;
      if ($JSCompiler_temp_const$jscomp$0$$.call($JSCompiler_temp_const$$, $JSCompiler_inline_result$$)) {
        return new datascript.parser.Aggregate($first__72407__$1_fn_STAR_$$, $args$jscomp$297_args_STAR_$$, null, null, null);
      }
    }
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Cannot parse custom aggregate call, expect ['aggregate' variable fn-arg+]", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4590$parser_SLASH_find, cljs$cst$4559$fragment, $form$$], null));
  }
  return null;
};
datascript.parser.parse_pull_expr = function($form$$) {
  if ($APP.cljs.core.sequential_QMARK_($form$$) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.first($form$$), cljs$cst$4591$pull)) {
    if (3 <= $APP.cljs.core.count($form$$) && $APP.cljs.core.count($form$$) <= 4) {
      var $long_QMARK__pattern$$ = $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.count($form$$), 4), $src$$ = $long_QMARK__pattern$$ ? $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2($form$$, 1) : $APP.cljs$cst$2393$$;
      $long_QMARK__pattern$$ = $long_QMARK__pattern$$ ? $APP.cljs.core.nnext($form$$) : $APP.cljs.core.next($form$$);
      var $var$$jscomp$11_var_STAR_$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($long_QMARK__pattern$$, 0, null);
      $long_QMARK__pattern$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($long_QMARK__pattern$$, 1, null);
      $src$$ = datascript.parser.parse_src_var($src$$);
      $var$$jscomp$11_var_STAR_$$ = datascript.parser.parse_variable($var$$jscomp$11_var_STAR_$$);
      var $or__5025__auto__$jscomp$inline_10392_or__5025__auto____$1$$ = datascript.parser.parse_variable($long_QMARK__pattern$$);
      $APP.cljs.core.truth_($or__5025__auto__$jscomp$inline_10392_or__5025__auto____$1$$) ? $long_QMARK__pattern$$ = $or__5025__auto__$jscomp$inline_10392_or__5025__auto____$1$$ : ($or__5025__auto__$jscomp$inline_10392_or__5025__auto____$1$$ = datascript.parser.parse_plain_variable($long_QMARK__pattern$$), $long_QMARK__pattern$$ = $APP.cljs.core.truth_($or__5025__auto__$jscomp$inline_10392_or__5025__auto____$1$$) ? $or__5025__auto__$jscomp$inline_10392_or__5025__auto____$1$$ : datascript.parser.parse_constant($long_QMARK__pattern$$));
      if ($APP.cljs.core.truth_($APP.cljs.core.truth_($src$$) ? $APP.cljs.core.truth_($var$$jscomp$11_var_STAR_$$) ? $long_QMARK__pattern$$ : $var$$jscomp$11_var_STAR_$$ : $src$$)) {
        return new datascript.parser.Pull($src$$, $var$$jscomp$11_var_STAR_$$, $long_QMARK__pattern$$, null, null, null);
      }
    }
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Cannot parse pull expression, expect ['pull' src-var? variable (constant | variable | plain-symbol)]", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4590$parser_SLASH_find, cljs$cst$4559$fragment, $form$$], null));
  }
  return null;
};
datascript.parser.parse_find_elem = function($form$$) {
  var $or__5025__auto__$jscomp$484_or__5025__auto____$1$jscomp$78_or__5025__auto____$2$$ = datascript.parser.parse_variable($form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$484_or__5025__auto____$1$jscomp$78_or__5025__auto____$2$$)) {
    return $or__5025__auto__$jscomp$484_or__5025__auto____$1$jscomp$78_or__5025__auto____$2$$;
  }
  $or__5025__auto__$jscomp$484_or__5025__auto____$1$jscomp$78_or__5025__auto____$2$$ = datascript.parser.parse_pull_expr($form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$484_or__5025__auto____$1$jscomp$78_or__5025__auto____$2$$)) {
    return $or__5025__auto__$jscomp$484_or__5025__auto____$1$jscomp$78_or__5025__auto____$2$$;
  }
  $or__5025__auto__$jscomp$484_or__5025__auto____$1$jscomp$78_or__5025__auto____$2$$ = datascript.parser.parse_aggregate_custom($form$$);
  return $APP.cljs.core.truth_($or__5025__auto__$jscomp$484_or__5025__auto____$1$jscomp$78_or__5025__auto____$2$$) ? $or__5025__auto__$jscomp$484_or__5025__auto____$1$jscomp$78_or__5025__auto____$2$$ : datascript.parser.parse_aggregate($form$$);
};
datascript.parser.parse_find_rel = function($G__72411_form$$) {
  $G__72411_form$$ = datascript.parser.parse_seq(datascript.parser.parse_find_elem, $G__72411_form$$);
  return $G__72411_form$$ == null ? null : new datascript.parser.FindRel($G__72411_form$$, null, null, null);
};
datascript.parser.parse_find_coll = function($G__72412_form$jscomp$142_inner$$) {
  return $APP.cljs.core.sequential_QMARK_($G__72412_form$jscomp$142_inner$$) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.count($G__72412_form$jscomp$142_inner$$), 1) && ($G__72412_form$jscomp$142_inner$$ = $APP.cljs.core.first($G__72412_form$jscomp$142_inner$$), $APP.cljs.core.sequential_QMARK_($G__72412_form$jscomp$142_inner$$) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.count($G__72412_form$jscomp$142_inner$$), 2) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.second($G__72412_form$jscomp$142_inner$$), 
  $APP.cljs$cst$1481$_DOT__DOT__DOT_)) ? ($G__72412_form$jscomp$142_inner$$ = datascript.parser.parse_find_elem($APP.cljs.core.first($G__72412_form$jscomp$142_inner$$)), $G__72412_form$jscomp$142_inner$$ == null ? null : new datascript.parser.FindColl($G__72412_form$jscomp$142_inner$$, null, null, null)) : null;
};
datascript.parser.parse_find_scalar = function($G__72413_form$$) {
  return $APP.cljs.core.sequential_QMARK_($G__72413_form$$) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.count($G__72413_form$$), 2) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.second($G__72413_form$$), $APP.cljs$cst$165$_DOT_) ? ($G__72413_form$$ = datascript.parser.parse_find_elem($APP.cljs.core.first($G__72413_form$$)), $G__72413_form$$ == null ? null : new datascript.parser.FindScalar($G__72413_form$$, null, null, null)) : null;
};
datascript.parser.parse_find_tuple = function($G__72414_form$jscomp$144_inner$$) {
  return $APP.cljs.core.sequential_QMARK_($G__72414_form$jscomp$144_inner$$) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.count($G__72414_form$jscomp$144_inner$$), 1) ? ($G__72414_form$jscomp$144_inner$$ = $APP.cljs.core.first($G__72414_form$jscomp$144_inner$$), $G__72414_form$jscomp$144_inner$$ = datascript.parser.parse_seq(datascript.parser.parse_find_elem, $G__72414_form$jscomp$144_inner$$), $G__72414_form$jscomp$144_inner$$ == null ? null : new datascript.parser.FindTuple($G__72414_form$jscomp$144_inner$$, 
  null, null, null)) : null;
};
datascript.parser.parse_find = function($form$$) {
  var $or__5025__auto__$jscomp$485_or__5025__auto____$1$jscomp$79_or__5025__auto____$2$jscomp$23_or__5025__auto____$3$$ = datascript.parser.parse_find_rel($form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$485_or__5025__auto____$1$jscomp$79_or__5025__auto____$2$jscomp$23_or__5025__auto____$3$$)) {
    return $or__5025__auto__$jscomp$485_or__5025__auto____$1$jscomp$79_or__5025__auto____$2$jscomp$23_or__5025__auto____$3$$;
  }
  $or__5025__auto__$jscomp$485_or__5025__auto____$1$jscomp$79_or__5025__auto____$2$jscomp$23_or__5025__auto____$3$$ = datascript.parser.parse_find_coll($form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$485_or__5025__auto____$1$jscomp$79_or__5025__auto____$2$jscomp$23_or__5025__auto____$3$$)) {
    return $or__5025__auto__$jscomp$485_or__5025__auto____$1$jscomp$79_or__5025__auto____$2$jscomp$23_or__5025__auto____$3$$;
  }
  $or__5025__auto__$jscomp$485_or__5025__auto____$1$jscomp$79_or__5025__auto____$2$jscomp$23_or__5025__auto____$3$$ = datascript.parser.parse_find_scalar($form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$485_or__5025__auto____$1$jscomp$79_or__5025__auto____$2$jscomp$23_or__5025__auto____$3$$)) {
    return $or__5025__auto__$jscomp$485_or__5025__auto____$1$jscomp$79_or__5025__auto____$2$jscomp$23_or__5025__auto____$3$$;
  }
  $or__5025__auto__$jscomp$485_or__5025__auto____$1$jscomp$79_or__5025__auto____$2$jscomp$23_or__5025__auto____$3$$ = datascript.parser.parse_find_tuple($form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$485_or__5025__auto____$1$jscomp$79_or__5025__auto____$2$jscomp$23_or__5025__auto____$3$$)) {
    return $or__5025__auto__$jscomp$485_or__5025__auto____$1$jscomp$79_or__5025__auto____$2$jscomp$23_or__5025__auto____$3$$;
  }
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Cannot parse :find, expected: (find-rel | find-coll | find-tuple | find-scalar)", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4590$parser_SLASH_find, cljs$cst$4559$fragment, $form$$], null));
};
datascript.parser.ReturnMap = function($type$$, $symbols$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.type = $type$$;
  this.symbols = $symbols$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.ReturnMap.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.ReturnMap.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72419$$, $else__5326__auto__$$) {
  switch($k72419$$ instanceof $APP.cljs.core.Keyword ? $k72419$$.fqn : null) {
    case "type":
      return this.type;
    case "symbols":
      return this.symbols;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72419$$, $else__5326__auto__$$);
  }
};
datascript.parser.ReturnMap.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72424_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72424_v__5348__auto__$$, 0, null);
    $p__72424_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72424_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72424_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72424_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.ReturnMap.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.ReturnMap{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$139$type, this.type], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$4592$symbols, this.symbols], null)], null), 
  this.__extmap));
};
datascript.parser.ReturnMap.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72418$$) {
  return new $APP.cljs.core.RecordIter(0, this, 2, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$139$type, $APP.cljs$cst$4592$symbols], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.ReturnMap.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.ReturnMap.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.ReturnMap(this.type, this.symbols, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.ReturnMap.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 2 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.ReturnMap.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$171_h__5134__auto____$1$jscomp$171_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$171_h__5134__auto____$1$jscomp$171_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$171_h__5134__auto____$1$jscomp$171_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$171_h__5134__auto____$1$jscomp$171_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$171_h__5134__auto____$1$jscomp$171_this__5319__auto__$$ = -2025547471 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.ReturnMap.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72420$$, $other72421$$) {
  return $other72421$$ != null && this.constructor === $other72421$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.type, $other72421$$.type) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.symbols, $other72421$$.symbols) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72421$$.__extmap);
};
datascript.parser.ReturnMap.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$139$type, null, $APP.cljs$cst$4592$symbols, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.ReturnMap(this.type, this.symbols, 
  this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.parser.ReturnMap.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72419$$) {
  switch($k72419$$ instanceof $APP.cljs.core.Keyword ? $k72419$$.fqn : null) {
    case "type":
    case "symbols":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72419$$);
  }
};
datascript.parser.ReturnMap.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72429_this__5331__auto__$$, $k__5332__auto__$$, $G__72418$$) {
  $pred__72429_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72429_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72429_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$139$type, $k__5332__auto__$$) : $pred__72429_this__5331__auto__$$.call(null, $APP.cljs$cst$139$type, $k__5332__auto__$$)) ? new datascript.parser.ReturnMap($G__72418$$, this.symbols, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72429_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72429_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4592$symbols, 
  $k__5332__auto__$$) : $pred__72429_this__5331__auto__$$.call(null, $APP.cljs$cst$4592$symbols, $k__5332__auto__$$)) ? new datascript.parser.ReturnMap(this.type, $G__72418$$, this.__meta, this.__extmap, null) : new datascript.parser.ReturnMap(this.type, this.symbols, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__72418$$), null);
};
datascript.parser.ReturnMap.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$139$type, this.type, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$4592$symbols, this.symbols, null)], null), this.__extmap));
};
datascript.parser.ReturnMap.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72418$$) {
  return new datascript.parser.ReturnMap(this.type, this.symbols, $G__72418$$, this.__extmap, this.__hash);
};
datascript.parser.ReturnMap.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.ReturnMap.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.ReturnMap.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$18_this__70593__auto__$$, $f72415_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$18_this__70593__auto__$$ = new datascript.parser.ReturnMap(datascript.parser.postwalk(this.type, $f72415_temp__5823__auto__$$), datascript.parser.postwalk(this.symbols, $f72415_temp__5823__auto__$$), null, null, null);
  $f72415_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f72415_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$18_this__70593__auto__$$, $f72415_temp__5823__auto__$$) : $new__70594__auto__$jscomp$18_this__70593__auto__$$;
};
datascript.parser.ReturnMap.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred72416$$, $acc72417$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72416$$, this.symbols, datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72416$$, this.type, $acc72417$$));
};
datascript.parser.ReturnMap.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($G__72432____70597__auto__$$, $G__72433_acc72417$$) {
  $G__72432____70597__auto__$$ = datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72433_acc72417$$, this.type) : datascript.parser.collect_vars_acc.call(null, $G__72433_acc72417$$, this.type);
  $G__72433_acc72417$$ = this.symbols;
  return datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72432____70597__auto__$$, $G__72433_acc72417$$) : datascript.parser.collect_vars_acc.call(null, $G__72432____70597__auto__$$, $G__72433_acc72417$$);
};
datascript.parser.ReturnMap.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$420$type, $APP.cljs$cst$4593$symbols], null);
};
datascript.parser.ReturnMap.cljs$lang$type = !0;
datascript.parser.ReturnMap.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/ReturnMap", null, 1, null);
};
datascript.parser.ReturnMap.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/ReturnMap");
};
datascript.parser.__GT_ReturnMap = function($type$$, $symbols$$) {
  return new datascript.parser.ReturnMap($type$$, $symbols$$, null, null, null);
};
datascript.parser.map__GT_ReturnMap = function($G__72422$$) {
  var $G__72434$jscomp$inline_6938_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__72422$$, $APP.cljs$cst$139$type, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$4592$symbols], 0));
  $G__72434$jscomp$inline_6938_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72422$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72434$jscomp$inline_6938_extmap__5365__auto__$$) : $G__72434$jscomp$inline_6938_extmap__5365__auto__$$;
  return new datascript.parser.ReturnMap($APP.cljs$cst$139$type.cljs$core$IFn$_invoke$arity$1($G__72422$$), $APP.cljs$cst$4592$symbols.cljs$core$IFn$_invoke$arity$1($G__72422$$), null, $APP.cljs.core.not_empty($G__72434$jscomp$inline_6938_extmap__5365__auto__$$), null);
};
datascript.parser.parse_return_map = function($type$$, $form$$) {
  if (!$APP.cljs.core.empty_QMARK_($form$$) && $APP.cljs.core.every_QMARK_($APP.cljs.core.symbol_QMARK_, $form$$)) {
    switch($type$$ instanceof $APP.cljs.core.Keyword ? $type$$.fqn : null) {
      case "keys":
        return new datascript.parser.ReturnMap($type$$, $APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.keyword, $form$$), null, null, null);
      case "syms":
        return new datascript.parser.ReturnMap($type$$, $APP.cljs.core.vec($form$$), null, null, null);
      case "strs":
        return new datascript.parser.ReturnMap($type$$, $APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.str, $form$$), null, null, null);
      default:
        return null;
    }
  } else {
    return null;
  }
};
datascript.parser.parse_with = function($form$$) {
  var $or__5025__auto__$$ = datascript.parser.parse_seq(datascript.parser.parse_variable, $form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$$)) {
    return $or__5025__auto__$$;
  }
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Cannot parse :with clause, expected [ variable+ ]", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4594$parser_SLASH_with, $APP.cljs$cst$179$form, $form$$], null));
};
datascript.parser.parse_in_binding = function($form$$) {
  var $or__5025__auto__$jscomp$inline_9840_or__5025__auto____$1$jscomp$inline_9841_temp__5823__auto__$$ = datascript.parser.parse_src_var($form$$);
  $APP.cljs.core.truth_($or__5025__auto__$jscomp$inline_9840_or__5025__auto____$1$jscomp$inline_9841_temp__5823__auto__$$) || ($or__5025__auto__$jscomp$inline_9840_or__5025__auto____$1$jscomp$inline_9841_temp__5823__auto__$$ = datascript.parser.parse_rules_var($form$$), $or__5025__auto__$jscomp$inline_9840_or__5025__auto____$1$jscomp$inline_9841_temp__5823__auto__$$ = $APP.cljs.core.truth_($or__5025__auto__$jscomp$inline_9840_or__5025__auto____$1$jscomp$inline_9841_temp__5823__auto__$$) ? $or__5025__auto__$jscomp$inline_9840_or__5025__auto____$1$jscomp$inline_9841_temp__5823__auto__$$ : 
  datascript.parser.parse_plain_variable($form$$));
  return $APP.cljs.core.truth_($or__5025__auto__$jscomp$inline_9840_or__5025__auto____$1$jscomp$inline_9841_temp__5823__auto__$$) ? datascript.parser.with_source(new datascript.parser.BindScalar($or__5025__auto__$jscomp$inline_9840_or__5025__auto____$1$jscomp$inline_9841_temp__5823__auto__$$, null, null, null), $form$$) : datascript.parser.parse_binding($form$$);
};
datascript.parser.parse_in = function($form$$) {
  var $or__5025__auto__$$ = datascript.parser.parse_seq(datascript.parser.parse_in_binding, $form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$$)) {
    return $or__5025__auto__$$;
  }
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Cannot parse :in clause, expected (src-var | % | plain-symbol | bind-scalar | bind-tuple | bind-coll | bind-rel)", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4595$parser_SLASH_in, $APP.cljs$cst$179$form, $form$$], null));
};
datascript.parser.Pattern = function($source$$, $pattern$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.source = $source$$;
  this.pattern = $pattern$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.Pattern.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.Pattern.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72440$$, $else__5326__auto__$$) {
  switch($k72440$$ instanceof $APP.cljs.core.Keyword ? $k72440$$.fqn : null) {
    case "source":
      return this.source;
    case "pattern":
      return this.pattern;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72440$$, $else__5326__auto__$$);
  }
};
datascript.parser.Pattern.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72445_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72445_v__5348__auto__$$, 0, null);
    $p__72445_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72445_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72445_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72445_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.Pattern.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.Pattern{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$193$source, this.source], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2381$pattern, this.pattern], null)], null), 
  this.__extmap));
};
datascript.parser.Pattern.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72439$$) {
  return new $APP.cljs.core.RecordIter(0, this, 2, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$193$source, $APP.cljs$cst$2381$pattern], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.Pattern.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.Pattern.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.Pattern(this.source, this.pattern, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.Pattern.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 2 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.Pattern.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$172_h__5134__auto____$1$jscomp$172_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$172_h__5134__auto____$1$jscomp$172_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$172_h__5134__auto____$1$jscomp$172_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$172_h__5134__auto____$1$jscomp$172_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$172_h__5134__auto____$1$jscomp$172_this__5319__auto__$$ = 575220587 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.Pattern.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72441$$, $other72442$$) {
  return $other72442$$ != null && this.constructor === $other72442$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.source, $other72442$$.source) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.pattern, $other72442$$.pattern) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72442$$.__extmap);
};
datascript.parser.Pattern.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$193$source, null, $APP.cljs$cst$2381$pattern, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.Pattern(this.source, this.pattern, 
  this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.parser.Pattern.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72440$$) {
  switch($k72440$$ instanceof $APP.cljs.core.Keyword ? $k72440$$.fqn : null) {
    case "source":
    case "pattern":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72440$$);
  }
};
datascript.parser.Pattern.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72450_this__5331__auto__$$, $k__5332__auto__$$, $G__72439$$) {
  $pred__72450_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72450_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72450_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$193$source, $k__5332__auto__$$) : $pred__72450_this__5331__auto__$$.call(null, $APP.cljs$cst$193$source, $k__5332__auto__$$)) ? new datascript.parser.Pattern($G__72439$$, this.pattern, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72450_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72450_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2381$pattern, 
  $k__5332__auto__$$) : $pred__72450_this__5331__auto__$$.call(null, $APP.cljs$cst$2381$pattern, $k__5332__auto__$$)) ? new datascript.parser.Pattern(this.source, $G__72439$$, this.__meta, this.__extmap, null) : new datascript.parser.Pattern(this.source, this.pattern, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__72439$$), null);
};
datascript.parser.Pattern.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$193$source, this.source, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$2381$pattern, this.pattern, null)], null), this.__extmap));
};
datascript.parser.Pattern.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72439$$) {
  return new datascript.parser.Pattern(this.source, this.pattern, $G__72439$$, this.__extmap, this.__hash);
};
datascript.parser.Pattern.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.Pattern.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.Pattern.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$19_this__70593__auto__$$, $f72436_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$19_this__70593__auto__$$ = new datascript.parser.Pattern(datascript.parser.postwalk(this.source, $f72436_temp__5823__auto__$$), datascript.parser.postwalk(this.pattern, $f72436_temp__5823__auto__$$), null, null, null);
  $f72436_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f72436_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$19_this__70593__auto__$$, $f72436_temp__5823__auto__$$) : $new__70594__auto__$jscomp$19_this__70593__auto__$$;
};
datascript.parser.Pattern.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred72437$$, $acc72438$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72437$$, this.pattern, datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72437$$, this.source, $acc72438$$));
};
datascript.parser.Pattern.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($G__72453____70597__auto__$$, $G__72454_acc72438$$) {
  $G__72453____70597__auto__$$ = datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72454_acc72438$$, this.source) : datascript.parser.collect_vars_acc.call(null, $G__72454_acc72438$$, this.source);
  $G__72454_acc72438$$ = this.pattern;
  return datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72453____70597__auto__$$, $G__72454_acc72438$$) : datascript.parser.collect_vars_acc.call(null, $G__72453____70597__auto__$$, $G__72454_acc72438$$);
};
datascript.parser.Pattern.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$358$source, $APP.cljs$cst$2203$pattern], null);
};
datascript.parser.Pattern.cljs$lang$type = !0;
datascript.parser.Pattern.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/Pattern", null, 1, null);
};
datascript.parser.Pattern.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/Pattern");
};
datascript.parser.__GT_Pattern = function($source$$, $pattern$$) {
  return new datascript.parser.Pattern($source$$, $pattern$$, null, null, null);
};
datascript.parser.map__GT_Pattern = function($G__72443$$) {
  var $G__72455$jscomp$inline_6940_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__72443$$, $APP.cljs$cst$193$source, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$2381$pattern], 0));
  $G__72455$jscomp$inline_6940_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72443$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72455$jscomp$inline_6940_extmap__5365__auto__$$) : $G__72455$jscomp$inline_6940_extmap__5365__auto__$$;
  return new datascript.parser.Pattern($APP.cljs$cst$193$source.cljs$core$IFn$_invoke$arity$1($G__72443$$), $APP.cljs$cst$2381$pattern.cljs$core$IFn$_invoke$arity$1($G__72443$$), null, $APP.cljs.core.not_empty($G__72455$jscomp$inline_6940_extmap__5365__auto__$$), null);
};
datascript.parser.Predicate = function($fn$$, $args$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.fn = $fn$$;
  this.args = $args$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.Predicate.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.Predicate.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72460$$, $else__5326__auto__$$) {
  switch($k72460$$ instanceof $APP.cljs.core.Keyword ? $k72460$$.fqn : null) {
    case "fn":
      return this.fn;
    case "args":
      return this.args;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72460$$, $else__5326__auto__$$);
  }
};
datascript.parser.Predicate.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72465_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72465_v__5348__auto__$$, 0, null);
    $p__72465_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72465_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72465_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72465_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.Predicate.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.Predicate{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$329$fn, this.fn], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$255$args, this.args], null)], null), this.__extmap));
};
datascript.parser.Predicate.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72459$$) {
  return new $APP.cljs.core.RecordIter(0, this, 2, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$329$fn, $APP.cljs$cst$255$args], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.Predicate.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.Predicate.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.Predicate(this.fn, this.args, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.Predicate.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 2 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.Predicate.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$173_h__5134__auto____$1$jscomp$173_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$173_h__5134__auto____$1$jscomp$173_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$173_h__5134__auto____$1$jscomp$173_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$173_h__5134__auto____$1$jscomp$173_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$173_h__5134__auto____$1$jscomp$173_this__5319__auto__$$ = -1523376880 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.Predicate.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72461$$, $other72462$$) {
  return $other72462$$ != null && this.constructor === $other72462$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.fn, $other72462$$.fn) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.args, $other72462$$.args) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72462$$.__extmap);
};
datascript.parser.Predicate.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$255$args, null, $APP.cljs$cst$329$fn, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.Predicate(this.fn, this.args, this.__meta, 
  $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.parser.Predicate.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72460$$) {
  switch($k72460$$ instanceof $APP.cljs.core.Keyword ? $k72460$$.fqn : null) {
    case "fn":
    case "args":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72460$$);
  }
};
datascript.parser.Predicate.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72470_this__5331__auto__$$, $k__5332__auto__$$, $G__72459$$) {
  $pred__72470_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72470_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72470_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$329$fn, $k__5332__auto__$$) : $pred__72470_this__5331__auto__$$.call(null, $APP.cljs$cst$329$fn, $k__5332__auto__$$)) ? new datascript.parser.Predicate($G__72459$$, this.args, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72470_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72470_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$255$args, 
  $k__5332__auto__$$) : $pred__72470_this__5331__auto__$$.call(null, $APP.cljs$cst$255$args, $k__5332__auto__$$)) ? new datascript.parser.Predicate(this.fn, $G__72459$$, this.__meta, this.__extmap, null) : new datascript.parser.Predicate(this.fn, this.args, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__72459$$), null);
};
datascript.parser.Predicate.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$329$fn, this.fn, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$255$args, this.args, null)], null), this.__extmap));
};
datascript.parser.Predicate.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72459$$) {
  return new datascript.parser.Predicate(this.fn, this.args, $G__72459$$, this.__extmap, this.__hash);
};
datascript.parser.Predicate.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.Predicate.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.Predicate.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$20_this__70593__auto__$$, $f72456_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$20_this__70593__auto__$$ = new datascript.parser.Predicate(datascript.parser.postwalk(this.fn, $f72456_temp__5823__auto__$$), datascript.parser.postwalk(this.args, $f72456_temp__5823__auto__$$), null, null, null);
  $f72456_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f72456_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$20_this__70593__auto__$$, $f72456_temp__5823__auto__$$) : $new__70594__auto__$jscomp$20_this__70593__auto__$$;
};
datascript.parser.Predicate.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred72457$$, $acc72458$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72457$$, this.args, datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72457$$, this.fn, $acc72458$$));
};
datascript.parser.Predicate.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($G__72473____70597__auto__$$, $G__72474_acc72458$$) {
  $G__72473____70597__auto__$$ = datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72474_acc72458$$, this.fn) : datascript.parser.collect_vars_acc.call(null, $G__72474_acc72458$$, this.fn);
  $G__72474_acc72458$$ = this.args;
  return datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72473____70597__auto__$$, $G__72474_acc72458$$) : datascript.parser.collect_vars_acc.call(null, $G__72473____70597__auto__$$, $G__72474_acc72458$$);
};
datascript.parser.Predicate.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$28$fn, $APP.cljs$cst$1246$args], null);
};
datascript.parser.Predicate.cljs$lang$type = !0;
datascript.parser.Predicate.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/Predicate", null, 1, null);
};
datascript.parser.Predicate.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/Predicate");
};
datascript.parser.__GT_Predicate = function($fn$$, $args$$) {
  return new datascript.parser.Predicate($fn$$, $args$$, null, null, null);
};
datascript.parser.map__GT_Predicate = function($G__72463$$) {
  var $G__72475$jscomp$inline_6942_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__72463$$, $APP.cljs$cst$329$fn, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$255$args], 0));
  $G__72475$jscomp$inline_6942_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72463$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72475$jscomp$inline_6942_extmap__5365__auto__$$) : $G__72475$jscomp$inline_6942_extmap__5365__auto__$$;
  return new datascript.parser.Predicate($APP.cljs$cst$329$fn.cljs$core$IFn$_invoke$arity$1($G__72463$$), $APP.cljs$cst$255$args.cljs$core$IFn$_invoke$arity$1($G__72463$$), null, $APP.cljs.core.not_empty($G__72475$jscomp$inline_6942_extmap__5365__auto__$$), null);
};
datascript.parser.Function = function($fn$$, $args$$, $binding$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.fn = $fn$$;
  this.args = $args$$;
  this.binding = $binding$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.Function.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.Function.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72480$$, $else__5326__auto__$$) {
  switch($k72480$$ instanceof $APP.cljs.core.Keyword ? $k72480$$.fqn : null) {
    case "fn":
      return this.fn;
    case "args":
      return this.args;
    case "binding":
      return this.binding;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72480$$, $else__5326__auto__$$);
  }
};
datascript.parser.Function.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72485_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72485_v__5348__auto__$$, 0, null);
    $p__72485_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72485_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72485_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72485_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.Function.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.Function{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$329$fn, this.fn], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$255$args, this.args], null), new $APP.cljs.core.PersistentVector(null, 
  2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$4587$binding, this.binding], null)], null), this.__extmap));
};
datascript.parser.Function.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72479$$) {
  return new $APP.cljs.core.RecordIter(0, this, 3, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$329$fn, $APP.cljs$cst$255$args, $APP.cljs$cst$4587$binding], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.Function.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.Function.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.Function(this.fn, this.args, this.binding, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.Function.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 3 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.Function.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$174_h__5134__auto____$1$jscomp$174_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$174_h__5134__auto____$1$jscomp$174_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$174_h__5134__auto____$1$jscomp$174_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$174_h__5134__auto____$1$jscomp$174_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$174_h__5134__auto____$1$jscomp$174_this__5319__auto__$$ = 589494199 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.Function.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72481$$, $other72482$$) {
  return $other72482$$ != null && this.constructor === $other72482$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.fn, $other72482$$.fn) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.args, $other72482$$.args) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.binding, $other72482$$.binding) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72482$$.__extmap);
};
datascript.parser.Function.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$255$args, null, $APP.cljs$cst$329$fn, null, $APP.cljs$cst$4587$binding, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.Function(this.fn, 
  this.args, this.binding, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.parser.Function.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72480$$) {
  switch($k72480$$ instanceof $APP.cljs.core.Keyword ? $k72480$$.fqn : null) {
    case "fn":
    case "args":
    case "binding":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72480$$);
  }
};
datascript.parser.Function.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72490_this__5331__auto__$$, $k__5332__auto__$$, $G__72479$$) {
  $pred__72490_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72490_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72490_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$329$fn, $k__5332__auto__$$) : $pred__72490_this__5331__auto__$$.call(null, $APP.cljs$cst$329$fn, $k__5332__auto__$$)) ? new datascript.parser.Function($G__72479$$, this.args, this.binding, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72490_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72490_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$255$args, 
  $k__5332__auto__$$) : $pred__72490_this__5331__auto__$$.call(null, $APP.cljs$cst$255$args, $k__5332__auto__$$)) ? new datascript.parser.Function(this.fn, $G__72479$$, this.binding, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72490_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72490_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$4587$binding, $k__5332__auto__$$) : $pred__72490_this__5331__auto__$$.call(null, $APP.cljs$cst$4587$binding, $k__5332__auto__$$)) ? 
  new datascript.parser.Function(this.fn, this.args, $G__72479$$, this.__meta, this.__extmap, null) : new datascript.parser.Function(this.fn, this.args, this.binding, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__72479$$), null);
};
datascript.parser.Function.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$329$fn, this.fn, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$255$args, this.args, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$4587$binding, this.binding, null)], null), this.__extmap));
};
datascript.parser.Function.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72479$$) {
  return new datascript.parser.Function(this.fn, this.args, this.binding, $G__72479$$, this.__extmap, this.__hash);
};
datascript.parser.Function.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.Function.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.Function.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$21_this__70593__auto__$$, $f72476_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$21_this__70593__auto__$$ = new datascript.parser.Function(datascript.parser.postwalk(this.fn, $f72476_temp__5823__auto__$$), datascript.parser.postwalk(this.args, $f72476_temp__5823__auto__$$), datascript.parser.postwalk(this.binding, $f72476_temp__5823__auto__$$), null, null, null);
  $f72476_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f72476_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$21_this__70593__auto__$$, $f72476_temp__5823__auto__$$) : $new__70594__auto__$jscomp$21_this__70593__auto__$$;
};
datascript.parser.Function.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred72477$$, $acc72478$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72477$$, this.binding, datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72477$$, this.args, datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72477$$, this.fn, $acc72478$$)));
};
datascript.parser.Function.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($G__72493_G__72495$jscomp$inline_6944____70597__auto__$$, $G__72494_G__72496$jscomp$inline_6945_acc72478$$) {
  $G__72493_G__72495$jscomp$inline_6944____70597__auto__$$ = datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72494_G__72496$jscomp$inline_6945_acc72478$$, this.fn) : datascript.parser.collect_vars_acc.call(null, $G__72494_G__72496$jscomp$inline_6945_acc72478$$, this.fn);
  $G__72494_G__72496$jscomp$inline_6945_acc72478$$ = this.args;
  $G__72493_G__72495$jscomp$inline_6944____70597__auto__$$ = datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72493_G__72495$jscomp$inline_6944____70597__auto__$$, $G__72494_G__72496$jscomp$inline_6945_acc72478$$) : datascript.parser.collect_vars_acc.call(null, $G__72493_G__72495$jscomp$inline_6944____70597__auto__$$, $G__72494_G__72496$jscomp$inline_6945_acc72478$$);
  $G__72494_G__72496$jscomp$inline_6945_acc72478$$ = this.binding;
  return datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72493_G__72495$jscomp$inline_6944____70597__auto__$$, $G__72494_G__72496$jscomp$inline_6945_acc72478$$) : datascript.parser.collect_vars_acc.call(null, $G__72493_G__72495$jscomp$inline_6944____70597__auto__$$, $G__72494_G__72496$jscomp$inline_6945_acc72478$$);
};
datascript.parser.Function.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$28$fn, $APP.cljs$cst$1246$args, $APP.cljs$cst$1183$binding], null);
};
datascript.parser.Function.cljs$lang$type = !0;
datascript.parser.Function.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/Function", null, 1, null);
};
datascript.parser.Function.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/Function");
};
datascript.parser.__GT_Function = function($fn$$, $args$$, $binding$$) {
  return new datascript.parser.Function($fn$$, $args$$, $binding$$, null, null, null);
};
datascript.parser.map__GT_Function = function($G__72483$$) {
  var $G__72497$jscomp$inline_6947_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__72483$$, $APP.cljs$cst$329$fn, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$255$args, $APP.cljs$cst$4587$binding], 0));
  $G__72497$jscomp$inline_6947_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72483$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72497$jscomp$inline_6947_extmap__5365__auto__$$) : $G__72497$jscomp$inline_6947_extmap__5365__auto__$$;
  return new datascript.parser.Function($APP.cljs$cst$329$fn.cljs$core$IFn$_invoke$arity$1($G__72483$$), $APP.cljs$cst$255$args.cljs$core$IFn$_invoke$arity$1($G__72483$$), $APP.cljs$cst$4587$binding.cljs$core$IFn$_invoke$arity$1($G__72483$$), null, $APP.cljs.core.not_empty($G__72497$jscomp$inline_6947_extmap__5365__auto__$$), null);
};
datascript.parser.RuleExpr = function($source$$, $name$$, $args$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.source = $source$$;
  this.name = $name$$;
  this.args = $args$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.RuleExpr.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.RuleExpr.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72502$$, $else__5326__auto__$$) {
  switch($k72502$$ instanceof $APP.cljs.core.Keyword ? $k72502$$.fqn : null) {
    case "source":
      return this.source;
    case "name":
      return this.name;
    case "args":
      return this.args;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72502$$, $else__5326__auto__$$);
  }
};
datascript.parser.RuleExpr.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72507_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72507_v__5348__auto__$$, 0, null);
    $p__72507_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72507_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72507_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72507_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.RuleExpr.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.RuleExpr{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$193$source, this.source], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$272$name, this.name], null), new $APP.cljs.core.PersistentVector(null, 
  2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$255$args, this.args], null)], null), this.__extmap));
};
datascript.parser.RuleExpr.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72501$$) {
  return new $APP.cljs.core.RecordIter(0, this, 3, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$193$source, $APP.cljs$cst$272$name, $APP.cljs$cst$255$args], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.RuleExpr.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.RuleExpr.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.RuleExpr(this.source, this.name, this.args, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.RuleExpr.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 3 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.RuleExpr.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$175_h__5134__auto____$1$jscomp$175_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$175_h__5134__auto____$1$jscomp$175_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$175_h__5134__auto____$1$jscomp$175_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$175_h__5134__auto____$1$jscomp$175_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$175_h__5134__auto____$1$jscomp$175_this__5319__auto__$$ = -444662011 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.RuleExpr.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72503$$, $other72504$$) {
  return $other72504$$ != null && this.constructor === $other72504$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.source, $other72504$$.source) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.name, $other72504$$.name) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.args, $other72504$$.args) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72504$$.__extmap);
};
datascript.parser.RuleExpr.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$255$args, null, $APP.cljs$cst$272$name, null, $APP.cljs$cst$193$source, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.RuleExpr(this.source, 
  this.name, this.args, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.parser.RuleExpr.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72502$$) {
  switch($k72502$$ instanceof $APP.cljs.core.Keyword ? $k72502$$.fqn : null) {
    case "source":
    case "name":
    case "args":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72502$$);
  }
};
datascript.parser.RuleExpr.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72512_this__5331__auto__$$, $k__5332__auto__$$, $G__72501$$) {
  $pred__72512_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72512_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72512_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$193$source, $k__5332__auto__$$) : $pred__72512_this__5331__auto__$$.call(null, $APP.cljs$cst$193$source, $k__5332__auto__$$)) ? new datascript.parser.RuleExpr($G__72501$$, this.name, this.args, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72512_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72512_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$272$name, 
  $k__5332__auto__$$) : $pred__72512_this__5331__auto__$$.call(null, $APP.cljs$cst$272$name, $k__5332__auto__$$)) ? new datascript.parser.RuleExpr(this.source, $G__72501$$, this.args, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72512_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72512_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$255$args, $k__5332__auto__$$) : $pred__72512_this__5331__auto__$$.call(null, $APP.cljs$cst$255$args, $k__5332__auto__$$)) ? 
  new datascript.parser.RuleExpr(this.source, this.name, $G__72501$$, this.__meta, this.__extmap, null) : new datascript.parser.RuleExpr(this.source, this.name, this.args, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__72501$$), null);
};
datascript.parser.RuleExpr.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$193$source, this.source, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$272$name, this.name, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$255$args, this.args, null)], null), this.__extmap));
};
datascript.parser.RuleExpr.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72501$$) {
  return new datascript.parser.RuleExpr(this.source, this.name, this.args, $G__72501$$, this.__extmap, this.__hash);
};
datascript.parser.RuleExpr.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.RuleExpr.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.RuleExpr.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$22_this__70593__auto__$$, $f72498_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$22_this__70593__auto__$$ = new datascript.parser.RuleExpr(datascript.parser.postwalk(this.source, $f72498_temp__5823__auto__$$), datascript.parser.postwalk(this.name, $f72498_temp__5823__auto__$$), datascript.parser.postwalk(this.args, $f72498_temp__5823__auto__$$), null, null, null);
  $f72498_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f72498_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$22_this__70593__auto__$$, $f72498_temp__5823__auto__$$) : $new__70594__auto__$jscomp$22_this__70593__auto__$$;
};
datascript.parser.RuleExpr.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred72499$$, $acc72500$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72499$$, this.args, datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72499$$, this.name, datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72499$$, this.source, $acc72500$$)));
};
datascript.parser.RuleExpr.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($G__72515_G__72517$jscomp$inline_6949____70597__auto__$$, $G__72516_G__72518$jscomp$inline_6950_acc72500$$) {
  $G__72515_G__72517$jscomp$inline_6949____70597__auto__$$ = datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72516_G__72518$jscomp$inline_6950_acc72500$$, this.source) : datascript.parser.collect_vars_acc.call(null, $G__72516_G__72518$jscomp$inline_6950_acc72500$$, this.source);
  $G__72516_G__72518$jscomp$inline_6950_acc72500$$ = this.name;
  $G__72515_G__72517$jscomp$inline_6949____70597__auto__$$ = datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72515_G__72517$jscomp$inline_6949____70597__auto__$$, $G__72516_G__72518$jscomp$inline_6950_acc72500$$) : datascript.parser.collect_vars_acc.call(null, $G__72515_G__72517$jscomp$inline_6949____70597__auto__$$, $G__72516_G__72518$jscomp$inline_6950_acc72500$$);
  $G__72516_G__72518$jscomp$inline_6950_acc72500$$ = this.args;
  return datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72515_G__72517$jscomp$inline_6949____70597__auto__$$, $G__72516_G__72518$jscomp$inline_6950_acc72500$$) : datascript.parser.collect_vars_acc.call(null, $G__72515_G__72517$jscomp$inline_6949____70597__auto__$$, $G__72516_G__72518$jscomp$inline_6950_acc72500$$);
};
datascript.parser.RuleExpr.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$358$source, $APP.cljs$cst$7$name, $APP.cljs$cst$1246$args], null);
};
datascript.parser.RuleExpr.cljs$lang$type = !0;
datascript.parser.RuleExpr.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/RuleExpr", null, 1, null);
};
datascript.parser.RuleExpr.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/RuleExpr");
};
datascript.parser.__GT_RuleExpr = function($source$$, $name$$, $args$$) {
  return new datascript.parser.RuleExpr($source$$, $name$$, $args$$, null, null, null);
};
datascript.parser.map__GT_RuleExpr = function($G__72505$$) {
  var $G__72519$jscomp$inline_6952_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__72505$$, $APP.cljs$cst$193$source, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$272$name, $APP.cljs$cst$255$args], 0));
  $G__72519$jscomp$inline_6952_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72505$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72519$jscomp$inline_6952_extmap__5365__auto__$$) : $G__72519$jscomp$inline_6952_extmap__5365__auto__$$;
  return new datascript.parser.RuleExpr($APP.cljs$cst$193$source.cljs$core$IFn$_invoke$arity$1($G__72505$$), $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($G__72505$$), $APP.cljs$cst$255$args.cljs$core$IFn$_invoke$arity$1($G__72505$$), null, $APP.cljs.core.not_empty($G__72519$jscomp$inline_6952_extmap__5365__auto__$$), null);
};
datascript.parser.Not = function($source$$, $vars$$, $clauses$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.source = $source$$;
  this.vars = $vars$$;
  this.clauses = $clauses$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.Not.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.Not.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72524$$, $else__5326__auto__$$) {
  switch($k72524$$ instanceof $APP.cljs.core.Keyword ? $k72524$$.fqn : null) {
    case "source":
      return this.source;
    case "vars":
      return this.vars;
    case "clauses":
      return this.clauses;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72524$$, $else__5326__auto__$$);
  }
};
datascript.parser.Not.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72529_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72529_v__5348__auto__$$, 0, null);
    $p__72529_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72529_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72529_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72529_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.Not.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.Not{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$193$source, this.source], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2382$vars, this.vars], null), new $APP.cljs.core.PersistentVector(null, 
  2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1632$clauses, this.clauses], null)], null), this.__extmap));
};
datascript.parser.Not.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72523$$) {
  return new $APP.cljs.core.RecordIter(0, this, 3, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$193$source, $APP.cljs$cst$2382$vars, $APP.cljs$cst$1632$clauses], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.Not.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.Not.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.Not(this.source, this.vars, this.clauses, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.Not.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 3 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.Not.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$176_h__5134__auto____$1$jscomp$176_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$176_h__5134__auto____$1$jscomp$176_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$176_h__5134__auto____$1$jscomp$176_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$176_h__5134__auto____$1$jscomp$176_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$176_h__5134__auto____$1$jscomp$176_this__5319__auto__$$ = 1394671061 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.Not.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72525$$, $other72526$$) {
  return $other72526$$ != null && this.constructor === $other72526$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.source, $other72526$$.source) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.vars, $other72526$$.vars) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.clauses, $other72526$$.clauses) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72526$$.__extmap);
};
datascript.parser.Not.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$193$source, null, $APP.cljs$cst$1632$clauses, null, $APP.cljs$cst$2382$vars, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.Not(this.source, 
  this.vars, this.clauses, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.parser.Not.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72524$$) {
  switch($k72524$$ instanceof $APP.cljs.core.Keyword ? $k72524$$.fqn : null) {
    case "source":
    case "vars":
    case "clauses":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72524$$);
  }
};
datascript.parser.Not.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72534_this__5331__auto__$$, $k__5332__auto__$$, $G__72523$$) {
  $pred__72534_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72534_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72534_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$193$source, $k__5332__auto__$$) : $pred__72534_this__5331__auto__$$.call(null, $APP.cljs$cst$193$source, $k__5332__auto__$$)) ? new datascript.parser.Not($G__72523$$, this.vars, this.clauses, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72534_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72534_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2382$vars, 
  $k__5332__auto__$$) : $pred__72534_this__5331__auto__$$.call(null, $APP.cljs$cst$2382$vars, $k__5332__auto__$$)) ? new datascript.parser.Not(this.source, $G__72523$$, this.clauses, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72534_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72534_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$1632$clauses, $k__5332__auto__$$) : $pred__72534_this__5331__auto__$$.call(null, $APP.cljs$cst$1632$clauses, $k__5332__auto__$$)) ? 
  new datascript.parser.Not(this.source, this.vars, $G__72523$$, this.__meta, this.__extmap, null) : new datascript.parser.Not(this.source, this.vars, this.clauses, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__72523$$), null);
};
datascript.parser.Not.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$193$source, this.source, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$2382$vars, this.vars, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$1632$clauses, this.clauses, null)], null), this.__extmap));
};
datascript.parser.Not.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72523$$) {
  return new datascript.parser.Not(this.source, this.vars, this.clauses, $G__72523$$, this.__extmap, this.__hash);
};
datascript.parser.Not.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.Not.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.Not.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$23_this__70593__auto__$$, $f72520_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$23_this__70593__auto__$$ = new datascript.parser.Not(datascript.parser.postwalk(this.source, $f72520_temp__5823__auto__$$), datascript.parser.postwalk(this.vars, $f72520_temp__5823__auto__$$), datascript.parser.postwalk(this.clauses, $f72520_temp__5823__auto__$$), null, null, null);
  $f72520_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f72520_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$23_this__70593__auto__$$, $f72520_temp__5823__auto__$$) : $new__70594__auto__$jscomp$23_this__70593__auto__$$;
};
datascript.parser.Not.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred72521$$, $acc72522$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72521$$, this.clauses, datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72521$$, this.vars, datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72521$$, this.source, $acc72522$$)));
};
datascript.parser.Not.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($G__72537_G__72539$jscomp$inline_6954____70597__auto__$$, $G__72538_G__72540$jscomp$inline_6955_acc72522$$) {
  $G__72537_G__72539$jscomp$inline_6954____70597__auto__$$ = datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72538_G__72540$jscomp$inline_6955_acc72522$$, this.source) : datascript.parser.collect_vars_acc.call(null, $G__72538_G__72540$jscomp$inline_6955_acc72522$$, this.source);
  $G__72538_G__72540$jscomp$inline_6955_acc72522$$ = this.vars;
  $G__72537_G__72539$jscomp$inline_6954____70597__auto__$$ = datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72537_G__72539$jscomp$inline_6954____70597__auto__$$, $G__72538_G__72540$jscomp$inline_6955_acc72522$$) : datascript.parser.collect_vars_acc.call(null, $G__72537_G__72539$jscomp$inline_6954____70597__auto__$$, $G__72538_G__72540$jscomp$inline_6955_acc72522$$);
  $G__72538_G__72540$jscomp$inline_6955_acc72522$$ = this.clauses;
  return datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72537_G__72539$jscomp$inline_6954____70597__auto__$$, $G__72538_G__72540$jscomp$inline_6955_acc72522$$) : datascript.parser.collect_vars_acc.call(null, $G__72537_G__72539$jscomp$inline_6954____70597__auto__$$, $G__72538_G__72540$jscomp$inline_6955_acc72522$$);
};
datascript.parser.Not.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$358$source, $APP.cljs$cst$2385$vars, $APP.cljs$cst$1243$clauses], null);
};
datascript.parser.Not.cljs$lang$type = !0;
datascript.parser.Not.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/Not", null, 1, null);
};
datascript.parser.Not.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/Not");
};
datascript.parser.__GT_Not = function($source$$, $vars$$, $clauses$$) {
  return new datascript.parser.Not($source$$, $vars$$, $clauses$$, null, null, null);
};
datascript.parser.map__GT_Not = function($G__72527$$) {
  var $G__72541$jscomp$inline_6957_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__72527$$, $APP.cljs$cst$193$source, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$2382$vars, $APP.cljs$cst$1632$clauses], 0));
  $G__72541$jscomp$inline_6957_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72527$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72541$jscomp$inline_6957_extmap__5365__auto__$$) : $G__72541$jscomp$inline_6957_extmap__5365__auto__$$;
  return new datascript.parser.Not($APP.cljs$cst$193$source.cljs$core$IFn$_invoke$arity$1($G__72527$$), $APP.cljs$cst$2382$vars.cljs$core$IFn$_invoke$arity$1($G__72527$$), $APP.cljs$cst$1632$clauses.cljs$core$IFn$_invoke$arity$1($G__72527$$), null, $APP.cljs.core.not_empty($G__72541$jscomp$inline_6957_extmap__5365__auto__$$), null);
};
datascript.parser.Or = function($source$$, $rule_vars$$, $clauses$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.source = $source$$;
  this.rule_vars = $rule_vars$$;
  this.clauses = $clauses$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.Or.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.Or.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72546$$, $else__5326__auto__$$) {
  switch($k72546$$ instanceof $APP.cljs.core.Keyword ? $k72546$$.fqn : null) {
    case "source":
      return this.source;
    case "rule-vars":
      return this.rule_vars;
    case "clauses":
      return this.clauses;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72546$$, $else__5326__auto__$$);
  }
};
datascript.parser.Or.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72551_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72551_v__5348__auto__$$, 0, null);
    $p__72551_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72551_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72551_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72551_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.Or.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.Or{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$193$source, this.source], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4596$rule_vars, this.rule_vars], null), new $APP.cljs.core.PersistentVector(null, 
  2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1632$clauses, this.clauses], null)], null), this.__extmap));
};
datascript.parser.Or.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72545$$) {
  return new $APP.cljs.core.RecordIter(0, this, 3, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$193$source, cljs$cst$4596$rule_vars, $APP.cljs$cst$1632$clauses], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.Or.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.Or.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.Or(this.source, this.rule_vars, this.clauses, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.Or.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 3 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.Or.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$177_h__5134__auto____$1$jscomp$177_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$177_h__5134__auto____$1$jscomp$177_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$177_h__5134__auto____$1$jscomp$177_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$177_h__5134__auto____$1$jscomp$177_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$177_h__5134__auto____$1$jscomp$177_this__5319__auto__$$ = 1461934571 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.Or.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72547$$, $other72548$$) {
  return $other72548$$ != null && this.constructor === $other72548$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.source, $other72548$$.source) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.rule_vars, $other72548$$.rule_vars) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.clauses, $other72548$$.clauses) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72548$$.__extmap);
};
datascript.parser.Or.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 3, [cljs$cst$4596$rule_vars, null, $APP.cljs$cst$193$source, null, $APP.cljs$cst$1632$clauses, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.Or(this.source, 
  this.rule_vars, this.clauses, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.parser.Or.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72546$$) {
  switch($k72546$$ instanceof $APP.cljs.core.Keyword ? $k72546$$.fqn : null) {
    case "source":
    case "rule-vars":
    case "clauses":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72546$$);
  }
};
datascript.parser.Or.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72556_this__5331__auto__$$, $k__5332__auto__$$, $G__72545$$) {
  $pred__72556_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72556_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72556_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$193$source, $k__5332__auto__$$) : $pred__72556_this__5331__auto__$$.call(null, $APP.cljs$cst$193$source, $k__5332__auto__$$)) ? new datascript.parser.Or($G__72545$$, this.rule_vars, this.clauses, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72556_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72556_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4596$rule_vars, 
  $k__5332__auto__$$) : $pred__72556_this__5331__auto__$$.call(null, cljs$cst$4596$rule_vars, $k__5332__auto__$$)) ? new datascript.parser.Or(this.source, $G__72545$$, this.clauses, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72556_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72556_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$1632$clauses, $k__5332__auto__$$) : $pred__72556_this__5331__auto__$$.call(null, $APP.cljs$cst$1632$clauses, $k__5332__auto__$$)) ? 
  new datascript.parser.Or(this.source, this.rule_vars, $G__72545$$, this.__meta, this.__extmap, null) : new datascript.parser.Or(this.source, this.rule_vars, this.clauses, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__72545$$), null);
};
datascript.parser.Or.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$193$source, this.source, null), new $APP.cljs.core.MapEntry(cljs$cst$4596$rule_vars, this.rule_vars, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$1632$clauses, this.clauses, null)], null), this.__extmap));
};
datascript.parser.Or.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72545$$) {
  return new datascript.parser.Or(this.source, this.rule_vars, this.clauses, $G__72545$$, this.__extmap, this.__hash);
};
datascript.parser.Or.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.Or.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.Or.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$24_this__70593__auto__$$, $f72542_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$24_this__70593__auto__$$ = new datascript.parser.Or(datascript.parser.postwalk(this.source, $f72542_temp__5823__auto__$$), datascript.parser.postwalk(this.rule_vars, $f72542_temp__5823__auto__$$), datascript.parser.postwalk(this.clauses, $f72542_temp__5823__auto__$$), null, null, null);
  $f72542_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f72542_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$24_this__70593__auto__$$, $f72542_temp__5823__auto__$$) : $new__70594__auto__$jscomp$24_this__70593__auto__$$;
};
datascript.parser.Or.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred72543$$, $acc72544$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72543$$, this.clauses, datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72543$$, this.rule_vars, datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72543$$, this.source, $acc72544$$)));
};
datascript.parser.Or.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($G__72559_G__72561$jscomp$inline_6959____70597__auto__$$, $G__72560_G__72562$jscomp$inline_6960_acc72544$$) {
  $G__72559_G__72561$jscomp$inline_6959____70597__auto__$$ = datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72560_G__72562$jscomp$inline_6960_acc72544$$, this.source) : datascript.parser.collect_vars_acc.call(null, $G__72560_G__72562$jscomp$inline_6960_acc72544$$, this.source);
  $G__72560_G__72562$jscomp$inline_6960_acc72544$$ = this.rule_vars;
  $G__72559_G__72561$jscomp$inline_6959____70597__auto__$$ = datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72559_G__72561$jscomp$inline_6959____70597__auto__$$, $G__72560_G__72562$jscomp$inline_6960_acc72544$$) : datascript.parser.collect_vars_acc.call(null, $G__72559_G__72561$jscomp$inline_6959____70597__auto__$$, $G__72560_G__72562$jscomp$inline_6960_acc72544$$);
  $G__72560_G__72562$jscomp$inline_6960_acc72544$$ = this.clauses;
  return datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($G__72559_G__72561$jscomp$inline_6959____70597__auto__$$, $G__72560_G__72562$jscomp$inline_6960_acc72544$$) : datascript.parser.collect_vars_acc.call(null, $G__72559_G__72561$jscomp$inline_6959____70597__auto__$$, $G__72560_G__72562$jscomp$inline_6960_acc72544$$);
};
datascript.parser.Or.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$358$source, cljs$cst$4597$rule_vars, $APP.cljs$cst$1243$clauses], null);
};
datascript.parser.Or.cljs$lang$type = !0;
datascript.parser.Or.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/Or", null, 1, null);
};
datascript.parser.Or.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/Or");
};
datascript.parser.__GT_Or = function($source$$, $rule_vars$$, $clauses$$) {
  return new datascript.parser.Or($source$$, $rule_vars$$, $clauses$$, null, null, null);
};
datascript.parser.map__GT_Or = function($G__72549$$) {
  var $G__72563$jscomp$inline_6962_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__72549$$, $APP.cljs$cst$193$source, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$4596$rule_vars, $APP.cljs$cst$1632$clauses], 0));
  $G__72563$jscomp$inline_6962_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72549$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72563$jscomp$inline_6962_extmap__5365__auto__$$) : $G__72563$jscomp$inline_6962_extmap__5365__auto__$$;
  return new datascript.parser.Or($APP.cljs$cst$193$source.cljs$core$IFn$_invoke$arity$1($G__72549$$), cljs$cst$4596$rule_vars.cljs$core$IFn$_invoke$arity$1($G__72549$$), $APP.cljs$cst$1632$clauses.cljs$core$IFn$_invoke$arity$1($G__72549$$), null, $APP.cljs.core.not_empty($G__72563$jscomp$inline_6962_extmap__5365__auto__$$), null);
};
datascript.parser.And = function($clauses$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.clauses = $clauses$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.And.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.And.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72568$$, $else__5326__auto__$$) {
  switch($k72568$$ instanceof $APP.cljs.core.Keyword ? $k72568$$.fqn : null) {
    case "clauses":
      return this.clauses;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72568$$, $else__5326__auto__$$);
  }
};
datascript.parser.And.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72573_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72573_v__5348__auto__$$, 0, null);
    $p__72573_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72573_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72573_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72573_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.And.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.And{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1632$clauses, this.clauses], null)], null), this.__extmap));
};
datascript.parser.And.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72567$$) {
  return new $APP.cljs.core.RecordIter(0, this, 1, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1632$clauses], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.And.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.And.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.And(this.clauses, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.And.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 1 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.And.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$178_h__5134__auto____$1$jscomp$178_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$178_h__5134__auto____$1$jscomp$178_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$178_h__5134__auto____$1$jscomp$178_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$178_h__5134__auto____$1$jscomp$178_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$178_h__5134__auto____$1$jscomp$178_this__5319__auto__$$ = -131856804 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.And.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72569$$, $other72570$$) {
  return $other72570$$ != null && this.constructor === $other72570$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.clauses, $other72570$$.clauses) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72570$$.__extmap);
};
datascript.parser.And.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$1632$clauses, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.And(this.clauses, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, 
  $k__5334__auto__$$)), null);
};
datascript.parser.And.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72568$$) {
  switch($k72568$$ instanceof $APP.cljs.core.Keyword ? $k72568$$.fqn : null) {
    case "clauses":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72568$$);
  }
};
datascript.parser.And.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72578_this__5331__auto__$$, $k__5332__auto__$$, $G__72567$$) {
  $pred__72578_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72578_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72578_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$1632$clauses, $k__5332__auto__$$) : $pred__72578_this__5331__auto__$$.call(null, $APP.cljs$cst$1632$clauses, $k__5332__auto__$$)) ? new datascript.parser.And($G__72567$$, this.__meta, this.__extmap, null) : new datascript.parser.And(this.clauses, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, 
  $k__5332__auto__$$, $G__72567$$), null);
};
datascript.parser.And.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$1632$clauses, this.clauses, null)], null), this.__extmap));
};
datascript.parser.And.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72567$$) {
  return new datascript.parser.And(this.clauses, $G__72567$$, this.__extmap, this.__hash);
};
datascript.parser.And.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.And.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.And.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$25_this__70593__auto__$$, $f72564_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$25_this__70593__auto__$$ = new datascript.parser.And(datascript.parser.postwalk(this.clauses, $f72564_temp__5823__auto__$$), null, null, null);
  $f72564_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f72564_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$25_this__70593__auto__$$, $f72564_temp__5823__auto__$$) : $new__70594__auto__$jscomp$25_this__70593__auto__$$;
};
datascript.parser.And.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred72565$$, $acc72566$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72565$$, this.clauses, $acc72566$$);
};
datascript.parser.And.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($___70597__auto__$$, $acc72566$$) {
  return datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($acc72566$$, this.clauses) : datascript.parser.collect_vars_acc.call(null, $acc72566$$, this.clauses);
};
datascript.parser.And.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1243$clauses], null);
};
datascript.parser.And.cljs$lang$type = !0;
datascript.parser.And.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/And", null, 1, null);
};
datascript.parser.And.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/And");
};
datascript.parser.__GT_And = function($clauses$$) {
  return new datascript.parser.And($clauses$$, null, null, null);
};
datascript.parser.map__GT_And = function($G__72571$$) {
  var $G__72581$jscomp$inline_6964_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($G__72571$$, $APP.cljs$cst$1632$clauses);
  $G__72581$jscomp$inline_6964_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72571$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72581$jscomp$inline_6964_extmap__5365__auto__$$) : $G__72581$jscomp$inline_6964_extmap__5365__auto__$$;
  return new datascript.parser.And($APP.cljs$cst$1632$clauses.cljs$core$IFn$_invoke$arity$1($G__72571$$), null, $APP.cljs.core.not_empty($G__72581$jscomp$inline_6964_extmap__5365__auto__$$), null);
};
datascript.parser.parse_pattern_el = function($form$$) {
  var $or__5025__auto__$jscomp$489_or__5025__auto____$1$$ = datascript.parser.parse_placeholder($form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$489_or__5025__auto____$1$$)) {
    return $or__5025__auto__$jscomp$489_or__5025__auto____$1$$;
  }
  $or__5025__auto__$jscomp$489_or__5025__auto____$1$$ = datascript.parser.parse_variable($form$$);
  return $APP.cljs.core.truth_($or__5025__auto__$jscomp$489_or__5025__auto____$1$$) ? $or__5025__auto__$jscomp$489_or__5025__auto____$1$$ : datascript.parser.parse_constant($form$$);
};
datascript.parser.take_source = function($form$$) {
  if ($APP.cljs.core.sequential_QMARK_($form$$)) {
    var $temp__5823__auto__$$ = datascript.parser.parse_src_var($APP.cljs.core.first($form$$));
    return $APP.cljs.core.truth_($temp__5823__auto__$$) ? new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$temp__5823__auto__$$, $APP.cljs.core.next($form$$)], null) : new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new datascript.parser.DefaultSrc(null, null, null), $form$$], null);
  }
  return null;
};
datascript.parser.parse_pattern = function($form$$) {
  var $next_form_temp__5825__auto__$jscomp$930_temp__5825__auto____$1$$ = datascript.parser.take_source($form$$);
  if ($APP.cljs.core.truth_($next_form_temp__5825__auto__$jscomp$930_temp__5825__auto____$1$$)) {
    var $source_STAR_$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($next_form_temp__5825__auto__$jscomp$930_temp__5825__auto____$1$$, 0, null);
    $next_form_temp__5825__auto__$jscomp$930_temp__5825__auto____$1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($next_form_temp__5825__auto__$jscomp$930_temp__5825__auto____$1$$, 1, null);
    $next_form_temp__5825__auto__$jscomp$930_temp__5825__auto____$1$$ = datascript.parser.parse_seq(datascript.parser.parse_pattern_el, $next_form_temp__5825__auto__$jscomp$930_temp__5825__auto____$1$$);
    if ($APP.cljs.core.truth_($next_form_temp__5825__auto__$jscomp$930_temp__5825__auto____$1$$)) {
      if ($APP.cljs.core.empty_QMARK_($next_form_temp__5825__auto__$jscomp$930_temp__5825__auto____$1$$)) {
        throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Pattern could not be empty", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4598$parser_SLASH_where, $APP.cljs$cst$179$form, $form$$], null));
      }
      return datascript.parser.with_source(new datascript.parser.Pattern($source_STAR_$$, $next_form_temp__5825__auto__$jscomp$930_temp__5825__auto____$1$$, null, null, null), $form$$);
    }
  }
  return null;
};
datascript.parser.parse_call = function($first__72587_fn_STAR_$jscomp$2_form$$) {
  if ($APP.cljs.core.sequential_QMARK_($first__72587_fn_STAR_$jscomp$2_form$$)) {
    var $args_STAR_$jscomp$4_args__$1$$ = $APP.cljs.core.seq($first__72587_fn_STAR_$jscomp$2_form$$);
    $first__72587_fn_STAR_$jscomp$2_form$$ = $APP.cljs.core.first($args_STAR_$jscomp$4_args__$1$$);
    $args_STAR_$jscomp$4_args__$1$$ = $APP.cljs.core.next($args_STAR_$jscomp$4_args__$1$$);
    $args_STAR_$jscomp$4_args__$1$$ = $args_STAR_$jscomp$4_args__$1$$ == null ? $APP.cljs.core.PersistentVector.EMPTY : $args_STAR_$jscomp$4_args__$1$$;
    var $or__5025__auto__$$ = datascript.parser.parse_plain_symbol($first__72587_fn_STAR_$jscomp$2_form$$);
    $first__72587_fn_STAR_$jscomp$2_form$$ = $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : datascript.parser.parse_variable($first__72587_fn_STAR_$jscomp$2_form$$);
    $args_STAR_$jscomp$4_args__$1$$ = datascript.parser.parse_seq(datascript.parser.parse_fn_arg, $args_STAR_$jscomp$4_args__$1$$);
    return $APP.cljs.core.truth_($APP.cljs.core.truth_($first__72587_fn_STAR_$jscomp$2_form$$) ? $args_STAR_$jscomp$4_args__$1$$ : $first__72587_fn_STAR_$jscomp$2_form$$) ? new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$first__72587_fn_STAR_$jscomp$2_form$$, $args_STAR_$jscomp$4_args__$1$$], null) : null;
  }
  return null;
};
datascript.parser.parse_pred = function($form$$) {
  if (datascript.parser.of_size_QMARK_($form$$, 1)) {
    var $args_STAR_$jscomp$5_temp__5825__auto__$$ = datascript.parser.parse_call($APP.cljs.core.first($form$$));
    if ($APP.cljs.core.truth_($args_STAR_$jscomp$5_temp__5825__auto__$$)) {
      var $fn_STAR_$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($args_STAR_$jscomp$5_temp__5825__auto__$$, 0, null);
      $args_STAR_$jscomp$5_temp__5825__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($args_STAR_$jscomp$5_temp__5825__auto__$$, 1, null);
      return datascript.parser.with_source(new datascript.parser.Predicate($fn_STAR_$$, $args_STAR_$jscomp$5_temp__5825__auto__$$, null, null, null), $form$$);
    }
  }
  return null;
};
datascript.parser.parse_fn = function($form$$) {
  if (datascript.parser.of_size_QMARK_($form$$, 2)) {
    var $call_fn_STAR_$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($form$$, 0, null), $binding$jscomp$5_temp__5825__auto____$1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($form$$, 1, null), $args_STAR_$jscomp$6_temp__5825__auto__$$ = datascript.parser.parse_call($call_fn_STAR_$$);
    if ($APP.cljs.core.truth_($args_STAR_$jscomp$6_temp__5825__auto__$$)) {
      return $call_fn_STAR_$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($args_STAR_$jscomp$6_temp__5825__auto__$$, 0, null), $args_STAR_$jscomp$6_temp__5825__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($args_STAR_$jscomp$6_temp__5825__auto__$$, 1, null), $binding$jscomp$5_temp__5825__auto____$1$$ = datascript.parser.parse_binding($binding$jscomp$5_temp__5825__auto____$1$$), $APP.cljs.core.truth_($binding$jscomp$5_temp__5825__auto____$1$$) ? datascript.parser.with_source(new datascript.parser.Function($call_fn_STAR_$$, 
      $args_STAR_$jscomp$6_temp__5825__auto__$$, $binding$jscomp$5_temp__5825__auto____$1$$, null, null, null), $form$$) : null;
    }
  }
  return null;
};
datascript.parser.parse_rule_expr = function($form$$) {
  var $args$jscomp$305_next_form$jscomp$1_seq__72601_temp__5825__auto__$$ = datascript.parser.take_source($form$$);
  if ($APP.cljs.core.truth_($args$jscomp$305_next_form$jscomp$1_seq__72601_temp__5825__auto__$$)) {
    var $source_STAR_$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($args$jscomp$305_next_form$jscomp$1_seq__72601_temp__5825__auto__$$, 0, null);
    $args$jscomp$305_next_form$jscomp$1_seq__72601_temp__5825__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($args$jscomp$305_next_form$jscomp$1_seq__72601_temp__5825__auto__$$, 1, null);
    $args$jscomp$305_next_form$jscomp$1_seq__72601_temp__5825__auto__$$ = $APP.cljs.core.seq($args$jscomp$305_next_form$jscomp$1_seq__72601_temp__5825__auto__$$);
    var $first__72602_name_STAR_$$ = $APP.cljs.core.first($args$jscomp$305_next_form$jscomp$1_seq__72601_temp__5825__auto__$$);
    $args$jscomp$305_next_form$jscomp$1_seq__72601_temp__5825__auto__$$ = $APP.cljs.core.next($args$jscomp$305_next_form$jscomp$1_seq__72601_temp__5825__auto__$$);
    $first__72602_name_STAR_$$ = datascript.parser.parse_plain_symbol($first__72602_name_STAR_$$);
    var $args_STAR_$$ = datascript.parser.parse_seq(datascript.parser.parse_pattern_el, $args$jscomp$305_next_form$jscomp$1_seq__72601_temp__5825__auto__$$);
    if ($APP.cljs.core.truth_($first__72602_name_STAR_$$)) {
      if ($APP.cljs.core.empty_QMARK_($args$jscomp$305_next_form$jscomp$1_seq__72601_temp__5825__auto__$$)) {
        throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("rule-expr requires at least one argument", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4598$parser_SLASH_where, $APP.cljs$cst$179$form, $form$$], null));
      }
      if ($args_STAR_$$ == null) {
        throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Cannot parse rule-expr arguments, expected [ (variable | constant | '_')+ ]", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4598$parser_SLASH_where, $APP.cljs$cst$179$form, $form$$], null));
      }
      return new datascript.parser.RuleExpr($source_STAR_$$, $first__72602_name_STAR_$$, $args_STAR_$$, null, null, null);
    }
  }
  return null;
};
datascript.parser.collect_vars_acc = function($acc$$, $G__72604_form$$) {
  return $G__72604_form$$ instanceof datascript.parser.Variable ? $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($acc$$, $G__72604_form$$) : $G__72604_form$$ instanceof datascript.parser.Not ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($acc$$, $G__72604_form$$.vars) : $G__72604_form$$ instanceof datascript.parser.Or ? ($G__72604_form$$ = $G__72604_form$$.rule_vars, datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2 ? datascript.parser.collect_vars_acc.cljs$core$IFn$_invoke$arity$2($acc$$, 
  $G__72604_form$$) : datascript.parser.collect_vars_acc.call(null, $acc$$, $G__72604_form$$)) : ($G__72604_form$$ != null ? $APP.cljs.core.PROTOCOL_SENTINEL === $G__72604_form$$.datascript$parser$ITraversable$ || ($G__72604_form$$.cljs$lang$protocol_mask$partition$ ? 0 : $APP.cljs.core.native_satisfies_QMARK_(datascript.parser.ITraversable, $G__72604_form$$)) : $APP.cljs.core.native_satisfies_QMARK_(datascript.parser.ITraversable, $G__72604_form$$)) ? datascript.parser._collect_vars($G__72604_form$$, 
  $acc$$) : $APP.cljs.core.sequential_QMARK_($G__72604_form$$) ? $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(datascript.parser.collect_vars_acc, $acc$$, $G__72604_form$$) : $acc$$;
};
datascript.parser.collect_vars = function($form$$) {
  return datascript.parser.collect_vars_acc($APP.cljs.core.PersistentVector.EMPTY, $form$$);
};
datascript.parser.collect_vars_distinct = function($form$$) {
  return $APP.cljs.core.vec($APP.cljs.core.distinct.cljs$core$IFn$_invoke$arity$1(datascript.parser.collect_vars($form$$)));
};
datascript.parser.validate_join_vars = function($required$$, $free$$, $form$$) {
  if ($APP.cljs.core.empty_QMARK_($required$$) && $APP.cljs.core.empty_QMARK_($free$$)) {
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Join variables should not be empty", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4598$parser_SLASH_where, $APP.cljs$cst$179$form, $form$$], null));
  }
  return null;
};
datascript.parser.validate_not = function($clause$$, $form$$) {
  datascript.parser.validate_join_vars(null, $APP.cljs$cst$2382$vars.cljs$core$IFn$_invoke$arity$1($clause$$), $form$$);
  return $clause$$;
};
datascript.parser.parse_not = function($form$$) {
  var $first__72611_next_form$jscomp$2_temp__5823__auto__$jscomp$272_temp__5825__auto__$$ = datascript.parser.take_source($form$$);
  if ($APP.cljs.core.truth_($first__72611_next_form$jscomp$2_temp__5823__auto__$jscomp$272_temp__5825__auto__$$)) {
    var $source_STAR_$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($first__72611_next_form$jscomp$2_temp__5823__auto__$jscomp$272_temp__5825__auto__$$, 0, null);
    $first__72611_next_form$jscomp$2_temp__5823__auto__$jscomp$272_temp__5825__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($first__72611_next_form$jscomp$2_temp__5823__auto__$jscomp$272_temp__5825__auto__$$, 1, null);
    var $clauses$$ = $APP.cljs.core.seq($first__72611_next_form$jscomp$2_temp__5823__auto__$jscomp$272_temp__5825__auto__$$);
    $first__72611_next_form$jscomp$2_temp__5823__auto__$jscomp$272_temp__5825__auto__$$ = $APP.cljs.core.first($clauses$$);
    $clauses$$ = $APP.cljs.core.next($clauses$$);
    if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$946$not, $first__72611_next_form$jscomp$2_temp__5823__auto__$jscomp$272_temp__5825__auto__$$)) {
      $first__72611_next_form$jscomp$2_temp__5823__auto__$jscomp$272_temp__5825__auto__$$ = datascript.parser.parse_clauses.cljs$core$IFn$_invoke$arity$1 ? datascript.parser.parse_clauses.cljs$core$IFn$_invoke$arity$1($clauses$$) : datascript.parser.parse_clauses.call(null, $clauses$$);
      if ($APP.cljs.core.truth_($first__72611_next_form$jscomp$2_temp__5823__auto__$jscomp$272_temp__5825__auto__$$)) {
        return datascript.parser.validate_not(datascript.parser.with_source(new datascript.parser.Not($source_STAR_$$, datascript.parser.collect_vars_distinct($first__72611_next_form$jscomp$2_temp__5823__auto__$jscomp$272_temp__5825__auto__$$), $first__72611_next_form$jscomp$2_temp__5823__auto__$jscomp$272_temp__5825__auto__$$, null, null, null), $form$$), $form$$);
      }
      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Cannot parse 'not' clause, expected [ src-var? 'not' clause+ ]", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4598$parser_SLASH_where, $APP.cljs$cst$179$form, $form$$], null));
    }
  }
  return null;
};
datascript.parser.parse_not_join = function($form$$) {
  var $first__72617_next_form$jscomp$3_temp__5825__auto__$$ = datascript.parser.take_source($form$$);
  if ($APP.cljs.core.truth_($first__72617_next_form$jscomp$3_temp__5825__auto__$$)) {
    var $source_STAR_$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($first__72617_next_form$jscomp$3_temp__5825__auto__$$, 0, null);
    $first__72617_next_form$jscomp$3_temp__5825__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($first__72617_next_form$jscomp$3_temp__5825__auto__$$, 1, null);
    var $clauses_STAR_$$ = $APP.cljs.core.seq($first__72617_next_form$jscomp$3_temp__5825__auto__$$);
    $first__72617_next_form$jscomp$3_temp__5825__auto__$$ = $APP.cljs.core.first($clauses_STAR_$$);
    var $JSCompiler_temp_const$$ = $APP.cljs.core.next($clauses_STAR_$$);
    $clauses_STAR_$$ = $APP.cljs.core.first($JSCompiler_temp_const$$);
    $JSCompiler_temp_const$$ = $APP.cljs.core.next($JSCompiler_temp_const$$);
    if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$4599$not_join, $first__72617_next_form$jscomp$3_temp__5825__auto__$$)) {
      $first__72617_next_form$jscomp$3_temp__5825__auto__$$ = datascript.parser.parse_seq(datascript.parser.parse_variable, $clauses_STAR_$$);
      $clauses_STAR_$$ = datascript.parser.parse_clauses.cljs$core$IFn$_invoke$arity$1 ? datascript.parser.parse_clauses.cljs$core$IFn$_invoke$arity$1($JSCompiler_temp_const$$) : datascript.parser.parse_clauses.call(null, $JSCompiler_temp_const$$);
      $JSCompiler_temp_const$$ = $APP.cljs.core;
      var $JSCompiler_temp_const$jscomp$0$$ = $JSCompiler_temp_const$$.truth_;
      var $JSCompiler_inline_result$$ = $APP.cljs.core.truth_($first__72617_next_form$jscomp$3_temp__5825__auto__$$) ? $clauses_STAR_$$ : $first__72617_next_form$jscomp$3_temp__5825__auto__$$;
      if ($JSCompiler_temp_const$jscomp$0$$.call($JSCompiler_temp_const$$, $JSCompiler_inline_result$$)) {
        return datascript.parser.validate_not(datascript.parser.with_source(new datascript.parser.Not($source_STAR_$$, $first__72617_next_form$jscomp$3_temp__5825__auto__$$, $clauses_STAR_$$, null, null, null), $form$$), $form$$);
      }
      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Cannot parse 'not-join' clause, expected [ src-var? 'not-join' [variable+] clause+ ]", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4598$parser_SLASH_where, $APP.cljs$cst$179$form, $form$$], null));
    }
  }
  return null;
};
datascript.parser.validate_or = function($clause$$, $form$$) {
  var $map__72618__$1_map__72619_required$$ = $APP.cljs.core.__destructure_map($clause$$);
  $map__72618__$1_map__72619_required$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__72618__$1_map__72619_required$$, cljs$cst$4596$rule_vars);
  var $free$$ = $APP.cljs.core.__destructure_map($map__72618__$1_map__72619_required$$);
  $map__72618__$1_map__72619_required$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($free$$, cljs$cst$4580$required);
  $free$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($free$$, cljs$cst$4581$free);
  datascript.parser.validate_join_vars($map__72618__$1_map__72619_required$$, $free$$, $form$$);
  return $clause$$;
};
datascript.parser.parse_and = function($form$$) {
  if ($APP.cljs.core.sequential_QMARK_($form$$) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$408$and, $APP.cljs.core.first($form$$))) {
    var $G__72620$jscomp$inline_6968_clauses_STAR_$$ = $APP.cljs.core.next($form$$);
    $G__72620$jscomp$inline_6968_clauses_STAR_$$ = datascript.parser.parse_clauses.cljs$core$IFn$_invoke$arity$1 ? datascript.parser.parse_clauses.cljs$core$IFn$_invoke$arity$1($G__72620$jscomp$inline_6968_clauses_STAR_$$) : datascript.parser.parse_clauses.call(null, $G__72620$jscomp$inline_6968_clauses_STAR_$$);
    if ($APP.cljs.core.truth_($APP.cljs.core.not_empty($G__72620$jscomp$inline_6968_clauses_STAR_$$))) {
      return new datascript.parser.And($G__72620$jscomp$inline_6968_clauses_STAR_$$, null, null, null);
    }
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Cannot parse 'and' clause, expected [ 'and' clause+ ]", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4598$parser_SLASH_where, $APP.cljs$cst$179$form, $form$$], null));
  }
  return null;
};
datascript.parser.parse_or = function($form$$) {
  var $first__72626_next_form$jscomp$4_temp__5823__auto__$jscomp$273_temp__5825__auto__$$ = datascript.parser.take_source($form$$);
  if ($APP.cljs.core.truth_($first__72626_next_form$jscomp$4_temp__5823__auto__$jscomp$273_temp__5825__auto__$$)) {
    var $source_STAR_$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($first__72626_next_form$jscomp$4_temp__5823__auto__$jscomp$273_temp__5825__auto__$$, 0, null);
    $first__72626_next_form$jscomp$4_temp__5823__auto__$jscomp$273_temp__5825__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($first__72626_next_form$jscomp$4_temp__5823__auto__$jscomp$273_temp__5825__auto__$$, 1, null);
    var $clauses$$ = $APP.cljs.core.seq($first__72626_next_form$jscomp$4_temp__5823__auto__$jscomp$273_temp__5825__auto__$$);
    $first__72626_next_form$jscomp$4_temp__5823__auto__$jscomp$273_temp__5825__auto__$$ = $APP.cljs.core.first($clauses$$);
    $clauses$$ = $APP.cljs.core.next($clauses$$);
    if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$403$or, $first__72626_next_form$jscomp$4_temp__5823__auto__$jscomp$273_temp__5825__auto__$$)) {
      $first__72626_next_form$jscomp$4_temp__5823__auto__$jscomp$273_temp__5825__auto__$$ = datascript.parser.parse_seq($APP.cljs.core.some_fn.cljs$core$IFn$_invoke$arity$2(datascript.parser.parse_and, datascript.parser.parse_clause), $clauses$$);
      if ($APP.cljs.core.truth_($first__72626_next_form$jscomp$4_temp__5823__auto__$jscomp$273_temp__5825__auto__$$)) {
        return datascript.parser.validate_or(datascript.parser.with_source(new datascript.parser.Or($source_STAR_$$, new datascript.parser.RuleVars(null, datascript.parser.collect_vars_distinct($first__72626_next_form$jscomp$4_temp__5823__auto__$jscomp$273_temp__5825__auto__$$), null, null, null), $first__72626_next_form$jscomp$4_temp__5823__auto__$jscomp$273_temp__5825__auto__$$, null, null, null), $form$$), $form$$);
      }
      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Cannot parse 'or' clause, expected [ src-var? 'or' clause+ ]", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4598$parser_SLASH_where, $APP.cljs$cst$179$form, $form$$], null));
    }
  }
  return null;
};
datascript.parser.parse_or_join = function($form$$) {
  var $first__72632_next_form$jscomp$5_temp__5825__auto__$jscomp$937_vars_STAR_$$ = datascript.parser.take_source($form$$);
  if ($APP.cljs.core.truth_($first__72632_next_form$jscomp$5_temp__5825__auto__$jscomp$937_vars_STAR_$$)) {
    var $source_STAR_$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($first__72632_next_form$jscomp$5_temp__5825__auto__$jscomp$937_vars_STAR_$$, 0, null);
    $first__72632_next_form$jscomp$5_temp__5825__auto__$jscomp$937_vars_STAR_$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($first__72632_next_form$jscomp$5_temp__5825__auto__$jscomp$937_vars_STAR_$$, 1, null);
    var $clauses_STAR_$$ = $APP.cljs.core.seq($first__72632_next_form$jscomp$5_temp__5825__auto__$jscomp$937_vars_STAR_$$);
    $first__72632_next_form$jscomp$5_temp__5825__auto__$jscomp$937_vars_STAR_$$ = $APP.cljs.core.first($clauses_STAR_$$);
    var $JSCompiler_temp_const$$ = $APP.cljs.core.next($clauses_STAR_$$);
    $clauses_STAR_$$ = $APP.cljs.core.first($JSCompiler_temp_const$$);
    $JSCompiler_temp_const$$ = $APP.cljs.core.next($JSCompiler_temp_const$$);
    if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs$cst$4600$or_join, $first__72632_next_form$jscomp$5_temp__5825__auto__$jscomp$937_vars_STAR_$$)) {
      $first__72632_next_form$jscomp$5_temp__5825__auto__$jscomp$937_vars_STAR_$$ = datascript.parser.parse_rule_vars($clauses_STAR_$$);
      $clauses_STAR_$$ = datascript.parser.parse_seq($APP.cljs.core.some_fn.cljs$core$IFn$_invoke$arity$2(datascript.parser.parse_and, datascript.parser.parse_clause), $JSCompiler_temp_const$$);
      $JSCompiler_temp_const$$ = $APP.cljs.core;
      var $JSCompiler_temp_const$jscomp$0$$ = $JSCompiler_temp_const$$.truth_;
      var $JSCompiler_inline_result$$ = $APP.cljs.core.truth_($first__72632_next_form$jscomp$5_temp__5825__auto__$jscomp$937_vars_STAR_$$) ? $clauses_STAR_$$ : $first__72632_next_form$jscomp$5_temp__5825__auto__$jscomp$937_vars_STAR_$$;
      if ($JSCompiler_temp_const$jscomp$0$$.call($JSCompiler_temp_const$$, $JSCompiler_inline_result$$)) {
        return datascript.parser.validate_or(datascript.parser.with_source(new datascript.parser.Or($source_STAR_$$, $first__72632_next_form$jscomp$5_temp__5825__auto__$jscomp$937_vars_STAR_$$, $clauses_STAR_$$, null, null, null), $form$$), $form$$);
      }
      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Cannot parse 'or-join' clause, expected [ src-var? 'or-join' [variable+] clause+ ]", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4598$parser_SLASH_where, $APP.cljs$cst$179$form, $form$$], null));
    }
  }
  return null;
};
datascript.parser.parse_clause = function($form$$) {
  var $or__5025__auto__$jscomp$491_or__5025__auto____$1$jscomp$82_or__5025__auto____$2$jscomp$24_or__5025__auto____$3$jscomp$9_or__5025__auto____$4$jscomp$5_or__5025__auto____$5$jscomp$1_or__5025__auto____$6$jscomp$1_or__5025__auto____$7$$ = datascript.parser.parse_not($form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$491_or__5025__auto____$1$jscomp$82_or__5025__auto____$2$jscomp$24_or__5025__auto____$3$jscomp$9_or__5025__auto____$4$jscomp$5_or__5025__auto____$5$jscomp$1_or__5025__auto____$6$jscomp$1_or__5025__auto____$7$$)) {
    return $or__5025__auto__$jscomp$491_or__5025__auto____$1$jscomp$82_or__5025__auto____$2$jscomp$24_or__5025__auto____$3$jscomp$9_or__5025__auto____$4$jscomp$5_or__5025__auto____$5$jscomp$1_or__5025__auto____$6$jscomp$1_or__5025__auto____$7$$;
  }
  $or__5025__auto__$jscomp$491_or__5025__auto____$1$jscomp$82_or__5025__auto____$2$jscomp$24_or__5025__auto____$3$jscomp$9_or__5025__auto____$4$jscomp$5_or__5025__auto____$5$jscomp$1_or__5025__auto____$6$jscomp$1_or__5025__auto____$7$$ = datascript.parser.parse_not_join($form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$491_or__5025__auto____$1$jscomp$82_or__5025__auto____$2$jscomp$24_or__5025__auto____$3$jscomp$9_or__5025__auto____$4$jscomp$5_or__5025__auto____$5$jscomp$1_or__5025__auto____$6$jscomp$1_or__5025__auto____$7$$)) {
    return $or__5025__auto__$jscomp$491_or__5025__auto____$1$jscomp$82_or__5025__auto____$2$jscomp$24_or__5025__auto____$3$jscomp$9_or__5025__auto____$4$jscomp$5_or__5025__auto____$5$jscomp$1_or__5025__auto____$6$jscomp$1_or__5025__auto____$7$$;
  }
  $or__5025__auto__$jscomp$491_or__5025__auto____$1$jscomp$82_or__5025__auto____$2$jscomp$24_or__5025__auto____$3$jscomp$9_or__5025__auto____$4$jscomp$5_or__5025__auto____$5$jscomp$1_or__5025__auto____$6$jscomp$1_or__5025__auto____$7$$ = datascript.parser.parse_or($form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$491_or__5025__auto____$1$jscomp$82_or__5025__auto____$2$jscomp$24_or__5025__auto____$3$jscomp$9_or__5025__auto____$4$jscomp$5_or__5025__auto____$5$jscomp$1_or__5025__auto____$6$jscomp$1_or__5025__auto____$7$$)) {
    return $or__5025__auto__$jscomp$491_or__5025__auto____$1$jscomp$82_or__5025__auto____$2$jscomp$24_or__5025__auto____$3$jscomp$9_or__5025__auto____$4$jscomp$5_or__5025__auto____$5$jscomp$1_or__5025__auto____$6$jscomp$1_or__5025__auto____$7$$;
  }
  $or__5025__auto__$jscomp$491_or__5025__auto____$1$jscomp$82_or__5025__auto____$2$jscomp$24_or__5025__auto____$3$jscomp$9_or__5025__auto____$4$jscomp$5_or__5025__auto____$5$jscomp$1_or__5025__auto____$6$jscomp$1_or__5025__auto____$7$$ = datascript.parser.parse_or_join($form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$491_or__5025__auto____$1$jscomp$82_or__5025__auto____$2$jscomp$24_or__5025__auto____$3$jscomp$9_or__5025__auto____$4$jscomp$5_or__5025__auto____$5$jscomp$1_or__5025__auto____$6$jscomp$1_or__5025__auto____$7$$)) {
    return $or__5025__auto__$jscomp$491_or__5025__auto____$1$jscomp$82_or__5025__auto____$2$jscomp$24_or__5025__auto____$3$jscomp$9_or__5025__auto____$4$jscomp$5_or__5025__auto____$5$jscomp$1_or__5025__auto____$6$jscomp$1_or__5025__auto____$7$$;
  }
  $or__5025__auto__$jscomp$491_or__5025__auto____$1$jscomp$82_or__5025__auto____$2$jscomp$24_or__5025__auto____$3$jscomp$9_or__5025__auto____$4$jscomp$5_or__5025__auto____$5$jscomp$1_or__5025__auto____$6$jscomp$1_or__5025__auto____$7$$ = datascript.parser.parse_pred($form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$491_or__5025__auto____$1$jscomp$82_or__5025__auto____$2$jscomp$24_or__5025__auto____$3$jscomp$9_or__5025__auto____$4$jscomp$5_or__5025__auto____$5$jscomp$1_or__5025__auto____$6$jscomp$1_or__5025__auto____$7$$)) {
    return $or__5025__auto__$jscomp$491_or__5025__auto____$1$jscomp$82_or__5025__auto____$2$jscomp$24_or__5025__auto____$3$jscomp$9_or__5025__auto____$4$jscomp$5_or__5025__auto____$5$jscomp$1_or__5025__auto____$6$jscomp$1_or__5025__auto____$7$$;
  }
  $or__5025__auto__$jscomp$491_or__5025__auto____$1$jscomp$82_or__5025__auto____$2$jscomp$24_or__5025__auto____$3$jscomp$9_or__5025__auto____$4$jscomp$5_or__5025__auto____$5$jscomp$1_or__5025__auto____$6$jscomp$1_or__5025__auto____$7$$ = datascript.parser.parse_fn($form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$491_or__5025__auto____$1$jscomp$82_or__5025__auto____$2$jscomp$24_or__5025__auto____$3$jscomp$9_or__5025__auto____$4$jscomp$5_or__5025__auto____$5$jscomp$1_or__5025__auto____$6$jscomp$1_or__5025__auto____$7$$)) {
    return $or__5025__auto__$jscomp$491_or__5025__auto____$1$jscomp$82_or__5025__auto____$2$jscomp$24_or__5025__auto____$3$jscomp$9_or__5025__auto____$4$jscomp$5_or__5025__auto____$5$jscomp$1_or__5025__auto____$6$jscomp$1_or__5025__auto____$7$$;
  }
  $or__5025__auto__$jscomp$491_or__5025__auto____$1$jscomp$82_or__5025__auto____$2$jscomp$24_or__5025__auto____$3$jscomp$9_or__5025__auto____$4$jscomp$5_or__5025__auto____$5$jscomp$1_or__5025__auto____$6$jscomp$1_or__5025__auto____$7$$ = datascript.parser.parse_rule_expr($form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$491_or__5025__auto____$1$jscomp$82_or__5025__auto____$2$jscomp$24_or__5025__auto____$3$jscomp$9_or__5025__auto____$4$jscomp$5_or__5025__auto____$5$jscomp$1_or__5025__auto____$6$jscomp$1_or__5025__auto____$7$$)) {
    return $or__5025__auto__$jscomp$491_or__5025__auto____$1$jscomp$82_or__5025__auto____$2$jscomp$24_or__5025__auto____$3$jscomp$9_or__5025__auto____$4$jscomp$5_or__5025__auto____$5$jscomp$1_or__5025__auto____$6$jscomp$1_or__5025__auto____$7$$;
  }
  $or__5025__auto__$jscomp$491_or__5025__auto____$1$jscomp$82_or__5025__auto____$2$jscomp$24_or__5025__auto____$3$jscomp$9_or__5025__auto____$4$jscomp$5_or__5025__auto____$5$jscomp$1_or__5025__auto____$6$jscomp$1_or__5025__auto____$7$$ = datascript.parser.parse_pattern($form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$491_or__5025__auto____$1$jscomp$82_or__5025__auto____$2$jscomp$24_or__5025__auto____$3$jscomp$9_or__5025__auto____$4$jscomp$5_or__5025__auto____$5$jscomp$1_or__5025__auto____$6$jscomp$1_or__5025__auto____$7$$)) {
    return $or__5025__auto__$jscomp$491_or__5025__auto____$1$jscomp$82_or__5025__auto____$2$jscomp$24_or__5025__auto____$3$jscomp$9_or__5025__auto____$4$jscomp$5_or__5025__auto____$5$jscomp$1_or__5025__auto____$6$jscomp$1_or__5025__auto____$7$$;
  }
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Cannot parse clause, expected (data-pattern | pred-expr | fn-expr | rule-expr | not-clause | not-join-clause | or-clause | or-join-clause)", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4598$parser_SLASH_where, $APP.cljs$cst$179$form, $form$$], null));
};
datascript.parser.parse_clauses = function($clauses$$) {
  return datascript.parser.parse_seq(datascript.parser.parse_clause, $clauses$$);
};
datascript.parser.parse_where = function($form$$) {
  var $or__5025__auto__$$ = datascript.parser.parse_clauses($form$$);
  if ($APP.cljs.core.truth_($or__5025__auto__$$)) {
    return $or__5025__auto__$$;
  }
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Cannot parse :where clause, expected [clause+]", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4598$parser_SLASH_where, $APP.cljs$cst$179$form, $form$$], null));
};
datascript.parser.RuleBranch = function($vars$$, $clauses$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.vars = $vars$$;
  this.clauses = $clauses$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.RuleBranch.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.RuleBranch.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72638$$, $else__5326__auto__$$) {
  switch($k72638$$ instanceof $APP.cljs.core.Keyword ? $k72638$$.fqn : null) {
    case "vars":
      return this.vars;
    case "clauses":
      return this.clauses;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72638$$, $else__5326__auto__$$);
  }
};
datascript.parser.RuleBranch.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72643_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72643_v__5348__auto__$$, 0, null);
    $p__72643_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72643_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72643_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72643_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.RuleBranch.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.RuleBranch{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2382$vars, this.vars], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1632$clauses, this.clauses], null)], null), 
  this.__extmap));
};
datascript.parser.RuleBranch.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72637$$) {
  return new $APP.cljs.core.RecordIter(0, this, 2, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2382$vars, $APP.cljs$cst$1632$clauses], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.RuleBranch.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.RuleBranch.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.RuleBranch(this.vars, this.clauses, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.RuleBranch.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 2 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.RuleBranch.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$179_h__5134__auto____$1$jscomp$179_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$179_h__5134__auto____$1$jscomp$179_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$179_h__5134__auto____$1$jscomp$179_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$179_h__5134__auto____$1$jscomp$179_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$179_h__5134__auto____$1$jscomp$179_this__5319__auto__$$ = 1024755006 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.RuleBranch.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72639$$, $other72640$$) {
  return $other72640$$ != null && this.constructor === $other72640$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.vars, $other72640$$.vars) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.clauses, $other72640$$.clauses) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72640$$.__extmap);
};
datascript.parser.RuleBranch.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1632$clauses, null, $APP.cljs$cst$2382$vars, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.RuleBranch(this.vars, this.clauses, 
  this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.parser.RuleBranch.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72638$$) {
  switch($k72638$$ instanceof $APP.cljs.core.Keyword ? $k72638$$.fqn : null) {
    case "vars":
    case "clauses":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72638$$);
  }
};
datascript.parser.RuleBranch.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72648_this__5331__auto__$$, $k__5332__auto__$$, $G__72637$$) {
  $pred__72648_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72648_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72648_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2382$vars, $k__5332__auto__$$) : $pred__72648_this__5331__auto__$$.call(null, $APP.cljs$cst$2382$vars, $k__5332__auto__$$)) ? new datascript.parser.RuleBranch($G__72637$$, this.clauses, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72648_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72648_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$1632$clauses, 
  $k__5332__auto__$$) : $pred__72648_this__5331__auto__$$.call(null, $APP.cljs$cst$1632$clauses, $k__5332__auto__$$)) ? new datascript.parser.RuleBranch(this.vars, $G__72637$$, this.__meta, this.__extmap, null) : new datascript.parser.RuleBranch(this.vars, this.clauses, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__72637$$), null);
};
datascript.parser.RuleBranch.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$2382$vars, this.vars, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$1632$clauses, this.clauses, null)], null), this.__extmap));
};
datascript.parser.RuleBranch.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72637$$) {
  return new datascript.parser.RuleBranch(this.vars, this.clauses, $G__72637$$, this.__extmap, this.__hash);
};
datascript.parser.RuleBranch.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.RuleBranch.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.RuleBranch.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$26_this__70593__auto__$$, $f72634_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$26_this__70593__auto__$$ = new datascript.parser.RuleBranch(datascript.parser.postwalk(this.vars, $f72634_temp__5823__auto__$$), datascript.parser.postwalk(this.clauses, $f72634_temp__5823__auto__$$), null, null, null);
  $f72634_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f72634_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$26_this__70593__auto__$$, $f72634_temp__5823__auto__$$) : $new__70594__auto__$jscomp$26_this__70593__auto__$$;
};
datascript.parser.RuleBranch.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred72635$$, $acc72636$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72635$$, this.clauses, datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72635$$, this.vars, $acc72636$$));
};
datascript.parser.RuleBranch.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($___70597__auto__$$, $acc72636$$) {
  return datascript.parser.collect_vars_acc(datascript.parser.collect_vars_acc($acc72636$$, this.vars), this.clauses);
};
datascript.parser.RuleBranch.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2385$vars, $APP.cljs$cst$1243$clauses], null);
};
datascript.parser.RuleBranch.cljs$lang$type = !0;
datascript.parser.RuleBranch.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/RuleBranch", null, 1, null);
};
datascript.parser.RuleBranch.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/RuleBranch");
};
datascript.parser.__GT_RuleBranch = function($vars$$, $clauses$$) {
  return new datascript.parser.RuleBranch($vars$$, $clauses$$, null, null, null);
};
datascript.parser.map__GT_RuleBranch = function($G__72641$$) {
  var $G__72651$jscomp$inline_6972_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__72641$$, $APP.cljs$cst$2382$vars, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$1632$clauses], 0));
  $G__72651$jscomp$inline_6972_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72641$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72651$jscomp$inline_6972_extmap__5365__auto__$$) : $G__72651$jscomp$inline_6972_extmap__5365__auto__$$;
  return new datascript.parser.RuleBranch($APP.cljs$cst$2382$vars.cljs$core$IFn$_invoke$arity$1($G__72641$$), $APP.cljs$cst$1632$clauses.cljs$core$IFn$_invoke$arity$1($G__72641$$), null, $APP.cljs.core.not_empty($G__72651$jscomp$inline_6972_extmap__5365__auto__$$), null);
};
datascript.parser.Rule = function($name$$, $branches$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.name = $name$$;
  this.branches = $branches$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.Rule.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.Rule.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72656$$, $else__5326__auto__$$) {
  switch($k72656$$ instanceof $APP.cljs.core.Keyword ? $k72656$$.fqn : null) {
    case "name":
      return this.name;
    case "branches":
      return this.branches;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72656$$, $else__5326__auto__$$);
  }
};
datascript.parser.Rule.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72661_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72661_v__5348__auto__$$, 0, null);
    $p__72661_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72661_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72661_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72661_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.Rule.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.Rule{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$272$name, this.name], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4601$branches, this.branches], null)], null), this.__extmap));
};
datascript.parser.Rule.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72655$$) {
  return new $APP.cljs.core.RecordIter(0, this, 2, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$272$name, cljs$cst$4601$branches], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.Rule.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.Rule.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.Rule(this.name, this.branches, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.Rule.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 2 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.Rule.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$180_h__5134__auto____$1$jscomp$180_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$180_h__5134__auto____$1$jscomp$180_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$180_h__5134__auto____$1$jscomp$180_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$180_h__5134__auto____$1$jscomp$180_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$180_h__5134__auto____$1$jscomp$180_this__5319__auto__$$ = -900273052 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.Rule.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72657$$, $other72658$$) {
  return $other72658$$ != null && this.constructor === $other72658$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.name, $other72658$$.name) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.branches, $other72658$$.branches) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72658$$.__extmap);
};
datascript.parser.Rule.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$272$name, null, cljs$cst$4601$branches, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.parser.Rule(this.name, this.branches, this.__meta, 
  $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.parser.Rule.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72656$$) {
  switch($k72656$$ instanceof $APP.cljs.core.Keyword ? $k72656$$.fqn : null) {
    case "name":
    case "branches":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72656$$);
  }
};
datascript.parser.Rule.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72666_this__5331__auto__$$, $k__5332__auto__$$, $G__72655$$) {
  $pred__72666_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72666_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72666_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$272$name, $k__5332__auto__$$) : $pred__72666_this__5331__auto__$$.call(null, $APP.cljs$cst$272$name, $k__5332__auto__$$)) ? new datascript.parser.Rule($G__72655$$, this.branches, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72666_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72666_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4601$branches, 
  $k__5332__auto__$$) : $pred__72666_this__5331__auto__$$.call(null, cljs$cst$4601$branches, $k__5332__auto__$$)) ? new datascript.parser.Rule(this.name, $G__72655$$, this.__meta, this.__extmap, null) : new datascript.parser.Rule(this.name, this.branches, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__72655$$), null);
};
datascript.parser.Rule.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$272$name, this.name, null), new $APP.cljs.core.MapEntry(cljs$cst$4601$branches, this.branches, null)], null), this.__extmap));
};
datascript.parser.Rule.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72655$$) {
  return new datascript.parser.Rule(this.name, this.branches, $G__72655$$, this.__extmap, this.__hash);
};
datascript.parser.Rule.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.Rule.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.Rule.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$27_this__70593__auto__$$, $f72652_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$27_this__70593__auto__$$ = new datascript.parser.Rule(datascript.parser.postwalk(this.name, $f72652_temp__5823__auto__$$), datascript.parser.postwalk(this.branches, $f72652_temp__5823__auto__$$), null, null, null);
  $f72652_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f72652_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$27_this__70593__auto__$$, $f72652_temp__5823__auto__$$) : $new__70594__auto__$jscomp$27_this__70593__auto__$$;
};
datascript.parser.Rule.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred72653$$, $acc72654$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72653$$, this.branches, datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72653$$, this.name, $acc72654$$));
};
datascript.parser.Rule.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($___70597__auto__$$, $acc72654$$) {
  return datascript.parser.collect_vars_acc(datascript.parser.collect_vars_acc($acc72654$$, this.name), this.branches);
};
datascript.parser.Rule.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$7$name, cljs$cst$4602$branches], null);
};
datascript.parser.Rule.cljs$lang$type = !0;
datascript.parser.Rule.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/Rule", null, 1, null);
};
datascript.parser.Rule.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/Rule");
};
datascript.parser.__GT_Rule = function($name$$, $branches$$) {
  return new datascript.parser.Rule($name$$, $branches$$, null, null, null);
};
datascript.parser.map__GT_Rule = function($G__72659$$) {
  var $G__72669$jscomp$inline_6974_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__72659$$, $APP.cljs$cst$272$name, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$4601$branches], 0));
  $G__72669$jscomp$inline_6974_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72659$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72669$jscomp$inline_6974_extmap__5365__auto__$$) : $G__72669$jscomp$inline_6974_extmap__5365__auto__$$;
  return new datascript.parser.Rule($APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($G__72659$$), cljs$cst$4601$branches.cljs$core$IFn$_invoke$arity$1($G__72659$$), null, $APP.cljs.core.not_empty($G__72669$jscomp$inline_6974_extmap__5365__auto__$$), null);
};
datascript.parser.parse_rule = function($form$$) {
  if ($APP.cljs.core.sequential_QMARK_($form$$)) {
    var $name_STAR_$$ = $APP.cljs.core.seq($form$$), $first__72672_seq__72674__$1_vars_STAR_$$ = $APP.cljs.core.first($name_STAR_$$), $seq__72671__$1$$ = $APP.cljs.core.next($name_STAR_$$);
    if ($APP.cljs.core.sequential_QMARK_($first__72672_seq__72674__$1_vars_STAR_$$)) {
      $name_STAR_$$ = $APP.cljs.core.seq($first__72672_seq__72674__$1_vars_STAR_$$);
      var $first__72675$$ = $APP.cljs.core.first($name_STAR_$$);
      $first__72672_seq__72674__$1_vars_STAR_$$ = $APP.cljs.core.next($name_STAR_$$);
      $name_STAR_$$ = function() {
        var $or__5025__auto__$$ = datascript.parser.parse_plain_symbol($first__72675$$);
        if ($APP.cljs.core.truth_($or__5025__auto__$$)) {
          return $or__5025__auto__$$;
        }
        throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Cannot parse rule name, expected plain-symbol", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4603$parser_SLASH_rule, $APP.cljs$cst$179$form, $form$$], null));
      }();
      $first__72672_seq__72674__$1_vars_STAR_$$ = datascript.parser.parse_rule_vars($first__72672_seq__72674__$1_vars_STAR_$$);
      var $clauses_STAR_$$ = function() {
        var $or__5025__auto__$$ = $APP.cljs.core.not_empty(datascript.parser.parse_clauses($seq__72671__$1$$));
        if ($APP.cljs.core.truth_($or__5025__auto__$$)) {
          return $or__5025__auto__$$;
        }
        throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Rule branch should have clauses", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4603$parser_SLASH_rule, $APP.cljs$cst$179$form, $form$$], null));
      }();
      return new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$272$name, $name_STAR_$$, $APP.cljs$cst$2382$vars, $first__72672_seq__72674__$1_vars_STAR_$$, $APP.cljs$cst$1632$clauses, $clauses_STAR_$$], null);
    }
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Cannot parse rule head, expected [rule-name rule-vars], got: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$first__72672_seq__72674__$1_vars_STAR_$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4603$parser_SLASH_rule, $APP.cljs$cst$179$form, $form$$], null));
  }
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Cannot parse rule, expected [rule-head clause+]", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4603$parser_SLASH_rule, $APP.cljs$cst$179$form, $form$$], null));
};
datascript.parser.validate_arity = function($name$$, $G__73092_branches$jscomp$2_seq__72676_seq__72676__$1_temp__5825__auto__$$) {
  var $vars0$$ = $APP.cljs$cst$2382$vars.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first($G__73092_branches$jscomp$2_seq__72676_seq__72676__$1_temp__5825__auto__$$)), $arity0$$ = datascript.parser.rule_vars_arity($vars0$$);
  $G__73092_branches$jscomp$2_seq__72676_seq__72676__$1_temp__5825__auto__$$ = $APP.cljs.core.seq($APP.cljs.core.next($G__73092_branches$jscomp$2_seq__72676_seq__72676__$1_temp__5825__auto__$$));
  for (var $G__73093_chunk__72678_vars_73096$$ = null, $G__73094_c__5548__auto__$$ = 0, $i__72680$$ = 0;;) {
    if ($i__72680$$ < $G__73094_c__5548__auto__$$) {
      var $b$$ = $G__73093_chunk__72678_vars_73096$$.cljs$core$IIndexed$_nth$arity$2(null, $i__72680$$);
      $b$$ = $APP.cljs$cst$2382$vars.cljs$core$IFn$_invoke$arity$1($b$$);
      if ($APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($arity0$$, datascript.parser.rule_vars_arity($b$$))) {
        throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Arity mismatch for rule '", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$219$symbol.cljs$core$IFn$_invoke$arity$1($name$$)], 0)), "': ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([datascript.parser.flatten_rule_vars($vars0$$)], 0)), " vs. ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([datascript.parser.flatten_rule_vars($b$$)], 
        0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4603$parser_SLASH_rule, $APP.cljs$cst$2058$rule, $name$$], null));
      }
      $i__72680$$ += 1;
    } else {
      if ($G__73092_branches$jscomp$2_seq__72676_seq__72676__$1_temp__5825__auto__$$ = $APP.cljs.core.seq($G__73092_branches$jscomp$2_seq__72676_seq__72676__$1_temp__5825__auto__$$)) {
        if ($APP.cljs.core.chunked_seq_QMARK_($G__73092_branches$jscomp$2_seq__72676_seq__72676__$1_temp__5825__auto__$$)) {
          $G__73094_c__5548__auto__$$ = $APP.cljs.core.chunk_first($G__73092_branches$jscomp$2_seq__72676_seq__72676__$1_temp__5825__auto__$$), $G__73092_branches$jscomp$2_seq__72676_seq__72676__$1_temp__5825__auto__$$ = $APP.cljs.core.chunk_rest($G__73092_branches$jscomp$2_seq__72676_seq__72676__$1_temp__5825__auto__$$), $G__73093_chunk__72678_vars_73096$$ = $G__73094_c__5548__auto__$$, $G__73094_c__5548__auto__$$ = $APP.cljs.core.count($G__73094_c__5548__auto__$$);
        } else {
          $b$$ = $APP.cljs.core.first($G__73092_branches$jscomp$2_seq__72676_seq__72676__$1_temp__5825__auto__$$);
          $G__73093_chunk__72678_vars_73096$$ = $APP.cljs$cst$2382$vars.cljs$core$IFn$_invoke$arity$1($b$$);
          if ($APP.cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2($arity0$$, datascript.parser.rule_vars_arity($G__73093_chunk__72678_vars_73096$$))) {
            throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Arity mismatch for rule '", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$219$symbol.cljs$core$IFn$_invoke$arity$1($name$$)], 0)), "': ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([datascript.parser.flatten_rule_vars($vars0$$)], 0)), " vs. ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([datascript.parser.flatten_rule_vars($G__73093_chunk__72678_vars_73096$$)], 
            0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4603$parser_SLASH_rule, $APP.cljs$cst$2058$rule, $name$$], null));
          }
          $G__73092_branches$jscomp$2_seq__72676_seq__72676__$1_temp__5825__auto__$$ = $APP.cljs.core.next($G__73092_branches$jscomp$2_seq__72676_seq__72676__$1_temp__5825__auto__$$);
          $G__73093_chunk__72678_vars_73096$$ = null;
          $G__73094_c__5548__auto__$$ = 0;
        }
        $i__72680$$ = 0;
      } else {
        return null;
      }
    }
  }
};
datascript.parser.parse_rules = function($form$$) {
  return $APP.cljs.core.vec(function() {
    return function $datascript$parser$parse_rules_$_iter__72683$$($s__72684$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (;;) {
          var $temp__5825__auto__$$ = $APP.cljs.core.seq($s__72684$$);
          if ($temp__5825__auto__$$) {
            var $s__72684__$2$$ = $temp__5825__auto__$$;
            if ($APP.cljs.core.chunked_seq_QMARK_($s__72684__$2$$)) {
              var $c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__72684__$2$$), $size__5502__auto__$$ = $APP.cljs.core.count($c__5501__auto__$$), $b__72686$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
              return function() {
                for (var $i__72685$$ = 0;;) {
                  if ($i__72685$$ < $size__5502__auto__$$) {
                    var $JSCompiler_temp_const$$ = $APP.cljs.core._nth($c__5501__auto__$$, $i__72685$$), $JSCompiler_inline_result$jscomp$1553_name$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_temp_const$$, 0, null), $JSCompiler_temp_const$jscomp$1551_branches$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_temp_const$$, 1, null), $branches__$1$$ = $APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2(function($i__72685$$, $vec__72687$$, $name$$, $branches$$, $c__5501__auto__$$, 
                    $size__5502__auto__$$, $b__72686$$, $s__72684__$2$$, $temp__5825__auto__$$) {
                      return function($p1__72682_SHARP_$$) {
                        return new datascript.parser.RuleBranch($APP.cljs$cst$2382$vars.cljs$core$IFn$_invoke$arity$1($p1__72682_SHARP_$$), $APP.cljs$cst$1632$clauses.cljs$core$IFn$_invoke$arity$1($p1__72682_SHARP_$$), null, null, null);
                      };
                    }($i__72685$$, $JSCompiler_temp_const$$, $JSCompiler_inline_result$jscomp$1553_name$$, $JSCompiler_temp_const$jscomp$1551_branches$$, $c__5501__auto__$$, $size__5502__auto__$$, $b__72686$$, $s__72684__$2$$, $temp__5825__auto__$$), $JSCompiler_temp_const$jscomp$1551_branches$$);
                    $JSCompiler_temp_const$$ = $APP.cljs.core;
                    $JSCompiler_temp_const$jscomp$1551_branches$$ = $JSCompiler_temp_const$$.chunk_append;
                    var $JSCompiler_temp_const$jscomp$0$$ = $b__72686$$;
                    datascript.parser.validate_arity($JSCompiler_inline_result$jscomp$1553_name$$, $branches__$1$$);
                    $JSCompiler_inline_result$jscomp$1553_name$$ = new datascript.parser.Rule($JSCompiler_inline_result$jscomp$1553_name$$, $branches__$1$$, null, null, null);
                    $JSCompiler_temp_const$jscomp$1551_branches$$.call($JSCompiler_temp_const$$, $JSCompiler_temp_const$jscomp$0$$, $JSCompiler_inline_result$jscomp$1553_name$$);
                    $i__72685$$ += 1;
                  } else {
                    return !0;
                  }
                }
              }() ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__72686$$), $datascript$parser$parse_rules_$_iter__72683$$($APP.cljs.core.chunk_rest($s__72684__$2$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__72686$$), null);
            }
            var $JSCompiler_temp_const$$ = $APP.cljs.core.first($s__72684__$2$$), $JSCompiler_inline_result$jscomp$1556_name$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_temp_const$$, 0, null), $JSCompiler_temp_const$jscomp$1554_branches$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_temp_const$$, 1, null), $branches__$1$$ = $APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2(function($vec__72690$$, $name$$, $branches$$, $s__72684__$2$$, $temp__5825__auto__$$) {
              return function($p1__72682_SHARP_$$) {
                return new datascript.parser.RuleBranch($APP.cljs$cst$2382$vars.cljs$core$IFn$_invoke$arity$1($p1__72682_SHARP_$$), $APP.cljs$cst$1632$clauses.cljs$core$IFn$_invoke$arity$1($p1__72682_SHARP_$$), null, null, null);
              };
            }($JSCompiler_temp_const$$, $JSCompiler_inline_result$jscomp$1556_name$$, $JSCompiler_temp_const$jscomp$1554_branches$$, $s__72684__$2$$, $temp__5825__auto__$$), $JSCompiler_temp_const$jscomp$1554_branches$$);
            $JSCompiler_temp_const$$ = $APP.cljs.core;
            $JSCompiler_temp_const$jscomp$1554_branches$$ = $JSCompiler_temp_const$$.cons;
            datascript.parser.validate_arity($JSCompiler_inline_result$jscomp$1556_name$$, $branches__$1$$);
            $JSCompiler_inline_result$jscomp$1556_name$$ = new datascript.parser.Rule($JSCompiler_inline_result$jscomp$1556_name$$, $branches__$1$$, null, null, null);
            return $JSCompiler_temp_const$jscomp$1554_branches$$.call($JSCompiler_temp_const$$, $JSCompiler_inline_result$jscomp$1556_name$$, $datascript$parser$parse_rules_$_iter__72683$$($APP.cljs.core.rest($s__72684__$2$$)));
          }
          return null;
        }
      }, null, null);
    }($APP.cljs.core.group_by($APP.cljs$cst$272$name, datascript.parser.parse_seq(datascript.parser.parse_rule, $form$$)));
  }());
};
datascript.parser.Query = function($qfind$$, $qwith$$, $qreturn_map$$, $qin$$, $qwhere$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.qfind = $qfind$$;
  this.qwith = $qwith$$;
  this.qreturn_map = $qreturn_map$$;
  this.qin = $qin$$;
  this.qwhere = $qwhere$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.parser.Query.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.parser.Query.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72697$$, $else__5326__auto__$$) {
  switch($k72697$$ instanceof $APP.cljs.core.Keyword ? $k72697$$.fqn : null) {
    case "qfind":
      return this.qfind;
    case "qwith":
      return this.qwith;
    case "qreturn-map":
      return this.qreturn_map;
    case "qin":
      return this.qin;
    case "qwhere":
      return this.qwhere;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72697$$, $else__5326__auto__$$);
  }
};
datascript.parser.Query.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72702_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72702_v__5348__auto__$$, 0, null);
    $p__72702_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72702_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72702_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72702_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.parser.Query.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.parser.Query{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4604$qfind, this.qfind], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4605$qwith, this.qwith], null), new $APP.cljs.core.PersistentVector(null, 
  2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4606$qreturn_map, this.qreturn_map], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4607$qin, this.qin], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4608$qwhere, this.qwhere], null)], null), this.__extmap));
};
datascript.parser.Query.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72696$$) {
  return new $APP.cljs.core.RecordIter(0, this, 5, new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4604$qfind, cljs$cst$4605$qwith, cljs$cst$4606$qreturn_map, cljs$cst$4607$qin, cljs$cst$4608$qwhere], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.parser.Query.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.parser.Query.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.parser.Query(this.qfind, this.qwith, this.qreturn_map, this.qin, this.qwhere, this.__meta, this.__extmap, this.__hash);
};
datascript.parser.Query.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 5 + $APP.cljs.core.count(this.__extmap);
};
datascript.parser.Query.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$181_h__5134__auto____$1$jscomp$181_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$181_h__5134__auto____$1$jscomp$181_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$181_h__5134__auto____$1$jscomp$181_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$181_h__5134__auto____$1$jscomp$181_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$181_h__5134__auto____$1$jscomp$181_this__5319__auto__$$ = 181307977 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.parser.Query.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72698$$, $other72699$$) {
  return $other72699$$ != null && this.constructor === $other72699$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.qfind, $other72699$$.qfind) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.qwith, $other72699$$.qwith) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.qreturn_map, $other72699$$.qreturn_map) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.qin, $other72699$$.qin) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.qwhere, $other72699$$.qwhere) && 
  $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72699$$.__extmap);
};
datascript.parser.Query.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 5, [cljs$cst$4604$qfind, null, cljs$cst$4608$qwhere, null, cljs$cst$4607$qin, null, cljs$cst$4605$qwith, null, cljs$cst$4606$qreturn_map, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : 
  new datascript.parser.Query(this.qfind, this.qwith, this.qreturn_map, this.qin, this.qwhere, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.parser.Query.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72697$$) {
  switch($k72697$$ instanceof $APP.cljs.core.Keyword ? $k72697$$.fqn : null) {
    case "qfind":
    case "qwith":
    case "qreturn-map":
    case "qin":
    case "qwhere":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72697$$);
  }
};
datascript.parser.Query.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72707_this__5331__auto__$$, $k__5332__auto__$$, $G__72696$$) {
  $pred__72707_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72707_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72707_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4604$qfind, $k__5332__auto__$$) : $pred__72707_this__5331__auto__$$.call(null, cljs$cst$4604$qfind, $k__5332__auto__$$)) ? new datascript.parser.Query($G__72696$$, this.qwith, this.qreturn_map, this.qin, this.qwhere, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72707_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? 
  $pred__72707_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4605$qwith, $k__5332__auto__$$) : $pred__72707_this__5331__auto__$$.call(null, cljs$cst$4605$qwith, $k__5332__auto__$$)) ? new datascript.parser.Query(this.qfind, $G__72696$$, this.qreturn_map, this.qin, this.qwhere, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72707_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72707_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4606$qreturn_map, 
  $k__5332__auto__$$) : $pred__72707_this__5331__auto__$$.call(null, cljs$cst$4606$qreturn_map, $k__5332__auto__$$)) ? new datascript.parser.Query(this.qfind, this.qwith, $G__72696$$, this.qin, this.qwhere, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72707_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72707_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4607$qin, $k__5332__auto__$$) : $pred__72707_this__5331__auto__$$.call(null, cljs$cst$4607$qin, $k__5332__auto__$$)) ? 
  new datascript.parser.Query(this.qfind, this.qwith, this.qreturn_map, $G__72696$$, this.qwhere, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72707_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72707_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4608$qwhere, $k__5332__auto__$$) : $pred__72707_this__5331__auto__$$.call(null, cljs$cst$4608$qwhere, $k__5332__auto__$$)) ? new datascript.parser.Query(this.qfind, this.qwith, this.qreturn_map, this.qin, $G__72696$$, 
  this.__meta, this.__extmap, null) : new datascript.parser.Query(this.qfind, this.qwith, this.qreturn_map, this.qin, this.qwhere, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__72696$$), null);
};
datascript.parser.Query.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry(cljs$cst$4604$qfind, this.qfind, null), new $APP.cljs.core.MapEntry(cljs$cst$4605$qwith, this.qwith, null), new $APP.cljs.core.MapEntry(cljs$cst$4606$qreturn_map, this.qreturn_map, null), new $APP.cljs.core.MapEntry(cljs$cst$4607$qin, this.qin, null), new $APP.cljs.core.MapEntry(cljs$cst$4608$qwhere, 
  this.qwhere, null)], null), this.__extmap));
};
datascript.parser.Query.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72696$$) {
  return new datascript.parser.Query(this.qfind, this.qwith, this.qreturn_map, this.qin, this.qwhere, $G__72696$$, this.__extmap, this.__hash);
};
datascript.parser.Query.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.parser.Query.prototype.datascript$parser$ITraversable$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.Query.prototype.datascript$parser$ITraversable$_postwalk$arity$2 = function($new__70594__auto__$jscomp$28_this__70593__auto__$$, $f72693_temp__5823__auto__$$) {
  $new__70594__auto__$jscomp$28_this__70593__auto__$$ = new datascript.parser.Query(datascript.parser.postwalk(this.qfind, $f72693_temp__5823__auto__$$), datascript.parser.postwalk(this.qwith, $f72693_temp__5823__auto__$$), datascript.parser.postwalk(this.qreturn_map, $f72693_temp__5823__auto__$$), datascript.parser.postwalk(this.qin, $f72693_temp__5823__auto__$$), datascript.parser.postwalk(this.qwhere, $f72693_temp__5823__auto__$$), null, null, null);
  $f72693_temp__5823__auto__$$ = $APP.cljs.core.meta(this);
  return $APP.cljs.core.truth_($f72693_temp__5823__auto__$$) ? $APP.cljs.core.with_meta($new__70594__auto__$jscomp$28_this__70593__auto__$$, $f72693_temp__5823__auto__$$) : $new__70594__auto__$jscomp$28_this__70593__auto__$$;
};
datascript.parser.Query.prototype.datascript$parser$ITraversable$_collect$arity$3 = function($___70597__auto__$$, $pred72694$$, $acc72695$$) {
  return datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72694$$, this.qwhere, datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72694$$, this.qin, datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72694$$, this.qreturn_map, datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72694$$, this.qwith, datascript.parser.collect.cljs$core$IFn$_invoke$arity$3($pred72694$$, this.qfind, $acc72695$$)))));
};
datascript.parser.Query.prototype.datascript$parser$ITraversable$_collect_vars$arity$2 = function($___70597__auto__$$, $acc72695$$) {
  return datascript.parser.collect_vars_acc(datascript.parser.collect_vars_acc(datascript.parser.collect_vars_acc(datascript.parser.collect_vars_acc(datascript.parser.collect_vars_acc($acc72695$$, this.qfind), this.qwith), this.qreturn_map), this.qin), this.qwhere);
};
datascript.parser.Query.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4609$qfind, cljs$cst$4610$qwith, cljs$cst$4611$qreturn_map, cljs$cst$4612$qin, cljs$cst$4613$qwhere], null);
};
datascript.parser.Query.cljs$lang$type = !0;
datascript.parser.Query.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.parser/Query", null, 1, null);
};
datascript.parser.Query.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.parser/Query");
};
datascript.parser.__GT_Query = function($qfind$$, $qwith$$, $qreturn_map$$, $qin$$, $qwhere$$) {
  return new datascript.parser.Query($qfind$$, $qwith$$, $qreturn_map$$, $qin$$, $qwhere$$, null, null, null);
};
datascript.parser.map__GT_Query = function($G__72700$$) {
  var $G__72710$jscomp$inline_6978_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__72700$$, cljs$cst$4604$qfind, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$4605$qwith, cljs$cst$4606$qreturn_map, cljs$cst$4607$qin, cljs$cst$4608$qwhere], 0));
  $G__72710$jscomp$inline_6978_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72700$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72710$jscomp$inline_6978_extmap__5365__auto__$$) : $G__72710$jscomp$inline_6978_extmap__5365__auto__$$;
  return new datascript.parser.Query(cljs$cst$4604$qfind.cljs$core$IFn$_invoke$arity$1($G__72700$$), cljs$cst$4605$qwith.cljs$core$IFn$_invoke$arity$1($G__72700$$), cljs$cst$4606$qreturn_map.cljs$core$IFn$_invoke$arity$1($G__72700$$), cljs$cst$4607$qin.cljs$core$IFn$_invoke$arity$1($G__72700$$), cljs$cst$4608$qwhere.cljs$core$IFn$_invoke$arity$1($G__72700$$), null, $APP.cljs.core.not_empty($G__72710$jscomp$inline_6978_extmap__5365__auto__$$), null);
};
datascript.parser.query__GT_map = function($G__73118_G__73121_qs_query$$) {
  for (var $G__73116_G__73119_parsed$$ = $APP.cljs.core.PersistentArrayMap.EMPTY, $G__73117_G__73120_key$$ = null;;) {
    var $q$jscomp$65_temp__5823__auto__$$ = $APP.cljs.core.first($G__73118_G__73121_qs_query$$);
    if ($APP.cljs.core.truth_($q$jscomp$65_temp__5823__auto__$$)) {
      $q$jscomp$65_temp__5823__auto__$$ instanceof $APP.cljs.core.Keyword ? ($G__73117_G__73120_key$$ = $q$jscomp$65_temp__5823__auto__$$, $G__73118_G__73121_qs_query$$ = $APP.cljs.core.next($G__73118_G__73121_qs_query$$)) : ($G__73116_G__73119_parsed$$ = $APP.cljs.core.update_in.cljs$core$IFn$_invoke$arity$4($G__73116_G__73119_parsed$$, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$G__73117_G__73120_key$$], null), $APP.cljs.core.fnil.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.conj, 
      $APP.cljs.core.PersistentVector.EMPTY), $q$jscomp$65_temp__5823__auto__$$), $G__73118_G__73121_qs_query$$ = $APP.cljs.core.next($G__73118_G__73121_qs_query$$));
    } else {
      return $G__73116_G__73119_parsed$$;
    }
  }
};
datascript.parser.explicit_input = function($parsed$$) {
  var $source$$ = $APP.cljs$cst$193$source.cljs$core$IFn$_invoke$arity$1($parsed$$);
  return $parsed$$ instanceof datascript.parser.Pattern ? $source$$ : $source$$ != null ? $source$$ instanceof datascript.parser.DefaultSrc ? null : $source$$ : null;
};
datascript.parser.default_in = function($qwhere$$) {
  return $APP.cljs.core.empty_QMARK_(datascript.parser.collect.cljs$core$IFn$_invoke$arity$2(datascript.parser.explicit_input, $qwhere$$)) ? $APP.cljs.core.PersistentVector.EMPTY : new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2393$$], null);
};
datascript.parser.validate_query = function($q$$, $form$$, $form_map_in_sources_73142_rule_exprs_unknown_73144_with_vars_73141$$) {
  var $find_vars_73123_shared_73128_temp__5829__auto___73131_temp__5829__auto___73134_where_sources_73143$$ = $APP.cljs.core.set(datascript.parser.collect_vars(cljs$cst$4604$qfind.cljs$core$IFn$_invoke$arity$1($q$$))), $find_elements_73136_with_vars_73124$$ = $APP.cljs.core.set(cljs$cst$4605$qwith.cljs$core$IFn$_invoke$arity$1($q$$)), $in_vars_73125_unknown_73127$$ = $APP.cljs.core.set(datascript.parser.collect_vars(cljs$cst$4607$qin.cljs$core$IFn$_invoke$arity$1($q$$))), $where_vars_73126$$ = $APP.cljs.core.set(datascript.parser.collect_vars(cljs$cst$4608$qwhere.cljs$core$IFn$_invoke$arity$1($q$$)));
  $in_vars_73125_unknown_73127$$ = $APP.clojure.set.difference.cljs$core$IFn$_invoke$arity$2($APP.clojure.set.union.cljs$core$IFn$_invoke$arity$2($find_vars_73123_shared_73128_temp__5829__auto___73131_temp__5829__auto___73134_where_sources_73143$$, $find_elements_73136_with_vars_73124$$), $APP.clojure.set.union.cljs$core$IFn$_invoke$arity$2($where_vars_73126$$, $in_vars_73125_unknown_73127$$));
  $find_vars_73123_shared_73128_temp__5829__auto___73131_temp__5829__auto___73134_where_sources_73143$$ = $APP.clojure.set.intersection.cljs$core$IFn$_invoke$arity$2($find_vars_73123_shared_73128_temp__5829__auto___73131_temp__5829__auto___73134_where_sources_73143$$, $find_elements_73136_with_vars_73124$$);
  if (!$APP.cljs.core.empty_QMARK_($in_vars_73125_unknown_73127$$)) {
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Query for unknown vars: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$219$symbol, $in_vars_73125_unknown_73127$$)], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4614$parser_SLASH_query, $APP.cljs$cst$2382$vars, $in_vars_73125_unknown_73127$$, $APP.cljs$cst$179$form, 
    $form$$], null));
  }
  if (!$APP.cljs.core.empty_QMARK_($find_vars_73123_shared_73128_temp__5829__auto___73131_temp__5829__auto___73134_where_sources_73143$$)) {
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([":find and :with should not use same variables: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$219$symbol, $find_vars_73123_shared_73128_temp__5829__auto___73131_temp__5829__auto___73134_where_sources_73143$$)], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4614$parser_SLASH_query, 
    $APP.cljs$cst$2382$vars, $find_vars_73123_shared_73128_temp__5829__auto___73131_temp__5829__auto___73134_where_sources_73143$$, $APP.cljs$cst$179$form, $form$$], null));
  }
  $find_vars_73123_shared_73128_temp__5829__auto___73131_temp__5829__auto___73134_where_sources_73143$$ = cljs$cst$4606$qreturn_map.cljs$core$IFn$_invoke$arity$1($q$$);
  if ($find_vars_73123_shared_73128_temp__5829__auto___73131_temp__5829__auto___73134_where_sources_73143$$ != null) {
    if (cljs$cst$4604$qfind.cljs$core$IFn$_invoke$arity$1($q$$) instanceof datascript.parser.FindScalar) {
      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$139$type.cljs$core$IFn$_invoke$arity$1($find_vars_73123_shared_73128_temp__5829__auto___73131_temp__5829__auto___73134_where_sources_73143$$)], 0)), " does not work with single-scalar :find"].join(""), new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4614$parser_SLASH_query, 
      $APP.cljs$cst$179$form, $form$$], null));
    }
    if (cljs$cst$4604$qfind.cljs$core$IFn$_invoke$arity$1($q$$) instanceof datascript.parser.FindColl) {
      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$139$type.cljs$core$IFn$_invoke$arity$1($find_vars_73123_shared_73128_temp__5829__auto___73131_temp__5829__auto___73134_where_sources_73143$$)], 0)), " does not work with collection :find"].join(""), new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4614$parser_SLASH_query, 
      $APP.cljs$cst$179$form, $form$$], null));
    }
  }
  $find_vars_73123_shared_73128_temp__5829__auto___73131_temp__5829__auto___73134_where_sources_73143$$ = $APP.cljs$cst$4592$symbols.cljs$core$IFn$_invoke$arity$1(cljs$cst$4606$qreturn_map.cljs$core$IFn$_invoke$arity$1($q$$));
  if ($find_vars_73123_shared_73128_temp__5829__auto___73131_temp__5829__auto___73134_where_sources_73143$$ != null && ($find_elements_73136_with_vars_73124$$ = datascript.parser.find_elements(cljs$cst$4604$qfind.cljs$core$IFn$_invoke$arity$1($q$$)), !$APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.count($find_vars_73123_shared_73128_temp__5829__auto___73131_temp__5829__auto___73134_where_sources_73143$$), $APP.cljs.core.count($find_elements_73136_with_vars_73124$$)))) {
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Count of ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$139$type.cljs$core$IFn$_invoke$arity$1(cljs$cst$4606$qreturn_map.cljs$core$IFn$_invoke$arity$1($q$$))], 0)), " must match count of :find"].join(""), new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$1404$error, cljs$cst$4614$parser_SLASH_query, cljs$cst$4615$return_map, $APP.cljs.core.cons($APP.cljs$cst$139$type.cljs$core$IFn$_invoke$arity$1(cljs$cst$4606$qreturn_map.cljs$core$IFn$_invoke$arity$1($q$$)), 
    $find_vars_73123_shared_73128_temp__5829__auto___73131_temp__5829__auto___73134_where_sources_73143$$), $APP.cljs$cst$2408$find, $find_elements_73136_with_vars_73124$$, $APP.cljs$cst$179$form, $form$$], null));
  }
  if (1 < $APP.cljs.core.count($APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.some_QMARK_, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1383$keys.cljs$core$IFn$_invoke$arity$1($form_map_in_sources_73142_rule_exprs_unknown_73144_with_vars_73141$$), $APP.cljs$cst$543$syms.cljs$core$IFn$_invoke$arity$1($form_map_in_sources_73142_rule_exprs_unknown_73144_with_vars_73141$$), cljs$cst$4616$strs.cljs$core$IFn$_invoke$arity$1($form_map_in_sources_73142_rule_exprs_unknown_73144_with_vars_73141$$)], 
  null)))) {
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Only one of :keys/:syms/:strs must be present", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4614$parser_SLASH_query, $APP.cljs$cst$179$form, $form$$], null));
  }
  var $in_vars_73138$$ = datascript.parser.collect_vars(cljs$cst$4607$qin.cljs$core$IFn$_invoke$arity$1($q$$)), $in_sources_73139$$ = datascript.parser.collect.cljs$core$IFn$_invoke$arity$2(function($p1__72711_SHARP_$$) {
    return $p1__72711_SHARP_$$ instanceof datascript.parser.SrcVar;
  }, cljs$cst$4607$qin.cljs$core$IFn$_invoke$arity$1($q$$)), $in_rules_73140$$ = datascript.parser.collect.cljs$core$IFn$_invoke$arity$2(function($p1__72712_SHARP_$$) {
    return $p1__72712_SHARP_$$ instanceof datascript.parser.RulesVar;
  }, cljs$cst$4607$qin.cljs$core$IFn$_invoke$arity$1($q$$));
  if (!$APP.cljs.core.truth_(function() {
    var $and__5023__auto__$jscomp$262_and__5023__auto____$1$$ = datascript.parser.distinct_QMARK_($in_vars_73138$$);
    return $APP.cljs.core.truth_($and__5023__auto__$jscomp$262_and__5023__auto____$1$$) ? ($and__5023__auto__$jscomp$262_and__5023__auto____$1$$ = datascript.parser.distinct_QMARK_($in_sources_73139$$), $APP.cljs.core.truth_($and__5023__auto__$jscomp$262_and__5023__auto____$1$$) ? datascript.parser.distinct_QMARK_($in_rules_73140$$) : $and__5023__auto__$jscomp$262_and__5023__auto____$1$$) : $and__5023__auto__$jscomp$262_and__5023__auto____$1$$;
  }())) {
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Vars used in :in should be distinct", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4614$parser_SLASH_query, $APP.cljs$cst$179$form, $form$$], null));
  }
  $form_map_in_sources_73142_rule_exprs_unknown_73144_with_vars_73141$$ = datascript.parser.collect_vars(cljs$cst$4605$qwith.cljs$core$IFn$_invoke$arity$1($q$$));
  if (!$APP.cljs.core.truth_(datascript.parser.distinct_QMARK_($form_map_in_sources_73142_rule_exprs_unknown_73144_with_vars_73141$$))) {
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Vars used in :with should be distinct", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4614$parser_SLASH_query, $APP.cljs$cst$179$form, $form$$], null));
  }
  $form_map_in_sources_73142_rule_exprs_unknown_73144_with_vars_73141$$ = datascript.parser.collect.cljs$core$IFn$_invoke$arity$3(function($p1__72713_SHARP_$$) {
    return $p1__72713_SHARP_$$ instanceof datascript.parser.SrcVar;
  }, cljs$cst$4607$qin.cljs$core$IFn$_invoke$arity$1($q$$), $APP.cljs.core.PersistentHashSet.EMPTY);
  $find_vars_73123_shared_73128_temp__5829__auto___73131_temp__5829__auto___73134_where_sources_73143$$ = datascript.parser.collect.cljs$core$IFn$_invoke$arity$3(function($p1__72714_SHARP_$$) {
    return $p1__72714_SHARP_$$ instanceof datascript.parser.SrcVar;
  }, cljs$cst$4608$qwhere.cljs$core$IFn$_invoke$arity$1($q$$), $APP.cljs.core.PersistentHashSet.EMPTY);
  $form_map_in_sources_73142_rule_exprs_unknown_73144_with_vars_73141$$ = $APP.clojure.set.difference.cljs$core$IFn$_invoke$arity$2($find_vars_73123_shared_73128_temp__5829__auto___73131_temp__5829__auto___73134_where_sources_73143$$, $form_map_in_sources_73142_rule_exprs_unknown_73144_with_vars_73141$$);
  if (!$APP.cljs.core.empty_QMARK_($form_map_in_sources_73142_rule_exprs_unknown_73144_with_vars_73141$$)) {
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Where uses unknown source vars: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$219$symbol, $form_map_in_sources_73142_rule_exprs_unknown_73144_with_vars_73141$$)], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4614$parser_SLASH_query, $APP.cljs$cst$2382$vars, 
    $form_map_in_sources_73142_rule_exprs_unknown_73144_with_vars_73141$$, $APP.cljs$cst$179$form, $form$$], null));
  }
  $form_map_in_sources_73142_rule_exprs_unknown_73144_with_vars_73141$$ = datascript.parser.collect.cljs$core$IFn$_invoke$arity$2(function($p1__72715_SHARP_$$) {
    return $p1__72715_SHARP_$$ instanceof datascript.parser.RuleExpr;
  }, cljs$cst$4608$qwhere.cljs$core$IFn$_invoke$arity$1($q$$));
  $q$$ = datascript.parser.collect.cljs$core$IFn$_invoke$arity$2(function($p1__72716_SHARP_$$) {
    return $p1__72716_SHARP_$$ instanceof datascript.parser.RulesVar;
  }, cljs$cst$4607$qin.cljs$core$IFn$_invoke$arity$1($q$$));
  if (!$APP.cljs.core.empty_QMARK_($form_map_in_sources_73142_rule_exprs_unknown_73144_with_vars_73141$$) && $APP.cljs.core.empty_QMARK_($q$$)) {
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Missing rules var '%' in :in", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4614$parser_SLASH_query, $APP.cljs$cst$179$form, $form$$], null));
  }
  return null;
};
datascript.parser.parse_query = function($q$$) {
  if ($APP.cljs.core.map_QMARK_($q$$)) {
    var $JSCompiler_temp$jscomp$1557_JSCompiler_temp$jscomp$1558_res$$ = $q$$;
  } else {
    if ($APP.cljs.core.sequential_QMARK_($q$$)) {
      $JSCompiler_temp$jscomp$1557_JSCompiler_temp$jscomp$1558_res$$ = datascript.parser.query__GT_map($q$$);
    } else {
      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Query should be a vector or a map", new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4614$parser_SLASH_query, $APP.cljs$cst$179$form, $q$$], null));
    }
  }
  var $qm$$ = $JSCompiler_temp$jscomp$1557_JSCompiler_temp$jscomp$1558_res$$, $qwhere$$ = datascript.parser.parse_where($APP.cljs$cst$2409$where.cljs$core$IFn$_invoke$arity$2($qm$$, $APP.cljs.core.PersistentVector.EMPTY));
  $JSCompiler_temp$jscomp$1557_JSCompiler_temp$jscomp$1558_res$$ = datascript.parser.map__GT_Query(new $APP.cljs.core.PersistentArrayMap(null, 5, [cljs$cst$4604$qfind, datascript.parser.parse_find($APP.cljs$cst$2408$find.cljs$core$IFn$_invoke$arity$1($qm$$)), cljs$cst$4605$qwith, function() {
    var $temp__5825__auto__$$ = $APP.cljs$cst$2410$with.cljs$core$IFn$_invoke$arity$1($qm$$);
    return $APP.cljs.core.truth_($temp__5825__auto__$$) ? datascript.parser.parse_with($temp__5825__auto__$$) : null;
  }(), cljs$cst$4606$qreturn_map, function() {
    var $or__5025__auto__$jscomp$495_or__5025__auto____$1$$ = datascript.parser.parse_return_map($APP.cljs$cst$1383$keys, $APP.cljs$cst$1383$keys.cljs$core$IFn$_invoke$arity$1($qm$$));
    if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$495_or__5025__auto____$1$$)) {
      return $or__5025__auto__$jscomp$495_or__5025__auto____$1$$;
    }
    $or__5025__auto__$jscomp$495_or__5025__auto____$1$$ = datascript.parser.parse_return_map($APP.cljs$cst$543$syms, $APP.cljs$cst$543$syms.cljs$core$IFn$_invoke$arity$1($qm$$));
    return $APP.cljs.core.truth_($or__5025__auto__$jscomp$495_or__5025__auto____$1$$) ? $or__5025__auto__$jscomp$495_or__5025__auto____$1$$ : datascript.parser.parse_return_map(cljs$cst$4616$strs, cljs$cst$4616$strs.cljs$core$IFn$_invoke$arity$1($qm$$));
  }(), cljs$cst$4607$qin, datascript.parser.parse_in(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$1825$in.cljs$core$IFn$_invoke$arity$1($qm$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : datascript.parser.default_in($qwhere$$);
  }()), cljs$cst$4608$qwhere, $qwhere$$], null));
  datascript.parser.validate_query($JSCompiler_temp$jscomp$1557_JSCompiler_temp$jscomp$1558_res$$, $q$$, $qm$$);
  return $JSCompiler_temp$jscomp$1557_JSCompiler_temp$jscomp$1558_res$$;
};
datascript.query = {};
datascript.query._STAR_query_cache_STAR_ = datascript.lru.cache(100);
datascript.query.Context = function($rels$$, $sources$$, $rules$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.rels = $rels$$;
  this.sources = $sources$$;
  this.rules = $rules$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.query.Context.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.query.Context.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72718$$, $else__5326__auto__$$) {
  switch($k72718$$ instanceof $APP.cljs.core.Keyword ? $k72718$$.fqn : null) {
    case "rels":
      return this.rels;
    case "sources":
      return this.sources;
    case "rules":
      return this.rules;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72718$$, $else__5326__auto__$$);
  }
};
datascript.query.Context.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72724_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72724_v__5348__auto__$$, 0, null);
    $p__72724_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72724_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72724_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72724_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.query.Context.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.query.Context{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4617$rels, this.rels], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2403$sources, this.sources], null), new $APP.cljs.core.PersistentVector(null, 
  2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2061$rules, this.rules], null)], null), this.__extmap));
};
datascript.query.Context.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72717$$) {
  return new $APP.cljs.core.RecordIter(0, this, 3, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4617$rels, $APP.cljs$cst$2403$sources, $APP.cljs$cst$2061$rules], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.query.Context.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.query.Context.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.query.Context(this.rels, this.sources, this.rules, this.__meta, this.__extmap, this.__hash);
};
datascript.query.Context.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 3 + $APP.cljs.core.count(this.__extmap);
};
datascript.query.Context.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$182_h__5134__auto____$1$jscomp$182_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$182_h__5134__auto____$1$jscomp$182_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$182_h__5134__auto____$1$jscomp$182_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$182_h__5134__auto____$1$jscomp$182_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$182_h__5134__auto____$1$jscomp$182_this__5319__auto__$$ = 1014232958 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.query.Context.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72719$$, $other72720$$) {
  return $other72720$$ != null && this.constructor === $other72720$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.rels, $other72720$$.rels) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.sources, $other72720$$.sources) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.rules, $other72720$$.rules) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72720$$.__extmap);
};
datascript.query.Context.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$2403$sources, null, $APP.cljs$cst$2061$rules, null, cljs$cst$4617$rels, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.query.Context(this.rels, 
  this.sources, this.rules, this.__meta, $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.query.Context.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72718$$) {
  switch($k72718$$ instanceof $APP.cljs.core.Keyword ? $k72718$$.fqn : null) {
    case "rels":
    case "sources":
    case "rules":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72718$$);
  }
};
datascript.query.Context.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72733_this__5331__auto__$$, $k__5332__auto__$$, $G__72717$$) {
  $pred__72733_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72733_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72733_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4617$rels, $k__5332__auto__$$) : $pred__72733_this__5331__auto__$$.call(null, cljs$cst$4617$rels, $k__5332__auto__$$)) ? new datascript.query.Context($G__72717$$, this.sources, this.rules, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72733_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72733_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2403$sources, 
  $k__5332__auto__$$) : $pred__72733_this__5331__auto__$$.call(null, $APP.cljs$cst$2403$sources, $k__5332__auto__$$)) ? new datascript.query.Context(this.rels, $G__72717$$, this.rules, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72733_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72733_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2061$rules, $k__5332__auto__$$) : $pred__72733_this__5331__auto__$$.call(null, $APP.cljs$cst$2061$rules, $k__5332__auto__$$)) ? 
  new datascript.query.Context(this.rels, this.sources, $G__72717$$, this.__meta, this.__extmap, null) : new datascript.query.Context(this.rels, this.sources, this.rules, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__72717$$), null);
};
datascript.query.Context.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry(cljs$cst$4617$rels, this.rels, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$2403$sources, this.sources, null), new $APP.cljs.core.MapEntry($APP.cljs$cst$2061$rules, this.rules, null)], null), this.__extmap));
};
datascript.query.Context.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72717$$) {
  return new datascript.query.Context(this.rels, this.sources, this.rules, $G__72717$$, this.__extmap, this.__hash);
};
datascript.query.Context.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.query.Context.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4618$rels, $APP.cljs$cst$4619$sources, cljs$cst$4620$rules], null);
};
datascript.query.Context.cljs$lang$type = !0;
datascript.query.Context.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.query/Context", null, 1, null);
};
datascript.query.Context.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.query/Context");
};
datascript.query.__GT_Context = function($rels$$, $sources$$, $rules$$) {
  return new datascript.query.Context($rels$$, $sources$$, $rules$$, null, null, null);
};
datascript.query.map__GT_Context = function($G__72721$$) {
  var $G__72737$jscomp$inline_6981_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__72721$$, cljs$cst$4617$rels, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs$cst$2403$sources, $APP.cljs$cst$2061$rules], 0));
  $G__72737$jscomp$inline_6981_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72721$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72737$jscomp$inline_6981_extmap__5365__auto__$$) : $G__72737$jscomp$inline_6981_extmap__5365__auto__$$;
  return new datascript.query.Context(cljs$cst$4617$rels.cljs$core$IFn$_invoke$arity$1($G__72721$$), $APP.cljs$cst$2403$sources.cljs$core$IFn$_invoke$arity$1($G__72721$$), $APP.cljs$cst$2061$rules.cljs$core$IFn$_invoke$arity$1($G__72721$$), null, $APP.cljs.core.not_empty($G__72737$jscomp$inline_6981_extmap__5365__auto__$$), null);
};
datascript.query.Relation = function($attrs$$, $tuples$$, $__meta$$, $__extmap$$, $__hash$$) {
  this.attrs = $attrs$$;
  this.tuples = $tuples$$;
  this.__meta = $__meta$$;
  this.__extmap = $__extmap$$;
  this.__hash = $__hash$$;
  this.cljs$lang$protocol_mask$partition0$ = 2230716170;
  this.cljs$lang$protocol_mask$partition1$ = 139264;
};
datascript.query.Relation.prototype.cljs$core$ILookup$_lookup$arity$2 = function($this__5323__auto__$$, $k__5324__auto__$$) {
  return this.cljs$core$ILookup$_lookup$arity$3(null, $k__5324__auto__$$, null);
};
datascript.query.Relation.prototype.cljs$core$ILookup$_lookup$arity$3 = function($this__5325__auto__$$, $k72739$$, $else__5326__auto__$$) {
  switch($k72739$$ instanceof $APP.cljs.core.Keyword ? $k72739$$.fqn : null) {
    case "attrs":
      return this.attrs;
    case "tuples":
      return this.tuples;
    default:
      return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k72739$$, $else__5326__auto__$$);
  }
};
datascript.query.Relation.prototype.cljs$core$IKVReduce$_kv_reduce$arity$3 = function($this__5343__auto__$$, $f__5344__auto__$$, $init__5345__auto__$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret__5346__auto__$$, $p__72745_v__5348__auto__$$) {
    var $k__5347__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72745_v__5348__auto__$$, 0, null);
    $p__72745_v__5348__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72745_v__5348__auto__$$, 1, null);
    return $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $f__5344__auto__$$.cljs$core$IFn$_invoke$arity$3($ret__5346__auto__$$, $k__5347__auto__$$, $p__72745_v__5348__auto__$$) : $f__5344__auto__$$.call(null, $ret__5346__auto__$$, $k__5347__auto__$$, $p__72745_v__5348__auto__$$);
  }, $init__5345__auto__$$, this);
};
datascript.query.Relation.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3 = function($this__5338__auto__$$, $writer__5339__auto__$$, $opts__5340__auto__$$) {
  return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, function($keyval__5342__auto__$$) {
    return $APP.cljs.core.pr_sequential_writer($writer__5339__auto__$$, $APP.cljs.core.pr_writer, "", " ", "", $opts__5340__auto__$$, $keyval__5342__auto__$$);
  }, "#datascript.query.Relation{", ", ", "}", $opts__5340__auto__$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2743$attrs, this.attrs], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4621$tuples, this.tuples], null)], null), this.__extmap));
};
datascript.query.Relation.prototype.cljs$core$IIterable$_iterator$arity$1 = function($G__72738$$) {
  return new $APP.cljs.core.RecordIter(0, this, 2, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2743$attrs, cljs$cst$4621$tuples], null), $APP.cljs.core.truth_(this.__extmap) ? $APP.cljs.core._iterator(this.__extmap) : $APP.cljs.core.nil_iter());
};
datascript.query.Relation.prototype.cljs$core$IMeta$_meta$arity$1 = function($this__5321__auto__$$) {
  return this.__meta;
};
datascript.query.Relation.prototype.cljs$core$ICloneable$_clone$arity$1 = function($this__5318__auto__$$) {
  return new datascript.query.Relation(this.attrs, this.tuples, this.__meta, this.__extmap, this.__hash);
};
datascript.query.Relation.prototype.cljs$core$ICounted$_count$arity$1 = function($this__5327__auto__$$) {
  return 2 + $APP.cljs.core.count(this.__extmap);
};
datascript.query.Relation.prototype.cljs$core$IHash$_hash$arity$1 = function($h__5134__auto__$jscomp$183_h__5134__auto____$1$jscomp$183_this__5319__auto__$$) {
  $h__5134__auto__$jscomp$183_h__5134__auto____$1$jscomp$183_this__5319__auto__$$ = this.__hash;
  return $h__5134__auto__$jscomp$183_h__5134__auto____$1$jscomp$183_this__5319__auto__$$ != null ? $h__5134__auto__$jscomp$183_h__5134__auto____$1$jscomp$183_this__5319__auto__$$ : this.__hash = $h__5134__auto__$jscomp$183_h__5134__auto____$1$jscomp$183_this__5319__auto__$$ = 1107093117 ^ $APP.cljs.core.hash_unordered_coll(this);
};
datascript.query.Relation.prototype.cljs$core$IEquiv$_equiv$arity$2 = function($this72740$$, $other72741$$) {
  return $other72741$$ != null && this.constructor === $other72741$$.constructor && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.attrs, $other72741$$.attrs) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.tuples, $other72741$$.tuples) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(this.__extmap, $other72741$$.__extmap);
};
datascript.query.Relation.prototype.cljs$core$IMap$_dissoc$arity$2 = function($this__5333__auto__$$, $k__5334__auto__$$) {
  return $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 2, [cljs$cst$4621$tuples, null, $APP.cljs$cst$2743$attrs, null], null), null), $k__5334__auto__$$) ? $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._with_meta($APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, this), this.__meta), $k__5334__auto__$$) : new datascript.query.Relation(this.attrs, this.tuples, this.__meta, 
  $APP.cljs.core.not_empty($APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(this.__extmap, $k__5334__auto__$$)), null);
};
datascript.query.Relation.prototype.cljs$core$IAssociative$_contains_key_QMARK_$arity$2 = function($this__5330__auto__$$, $k72739$$) {
  switch($k72739$$ instanceof $APP.cljs.core.Keyword ? $k72739$$.fqn : null) {
    case "attrs":
    case "tuples":
      return !0;
    default:
      return $APP.cljs.core.contains_QMARK_(this.__extmap, $k72739$$);
  }
};
datascript.query.Relation.prototype.cljs$core$IAssociative$_assoc$arity$3 = function($pred__72754_this__5331__auto__$$, $k__5332__auto__$$, $G__72738$$) {
  $pred__72754_this__5331__auto__$$ = $APP.cljs.core.keyword_identical_QMARK_;
  return $APP.cljs.core.truth_($pred__72754_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72754_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2743$attrs, $k__5332__auto__$$) : $pred__72754_this__5331__auto__$$.call(null, $APP.cljs$cst$2743$attrs, $k__5332__auto__$$)) ? new datascript.query.Relation($G__72738$$, this.tuples, this.__meta, this.__extmap, null) : $APP.cljs.core.truth_($pred__72754_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72754_this__5331__auto__$$.cljs$core$IFn$_invoke$arity$2(cljs$cst$4621$tuples, 
  $k__5332__auto__$$) : $pred__72754_this__5331__auto__$$.call(null, cljs$cst$4621$tuples, $k__5332__auto__$$)) ? new datascript.query.Relation(this.attrs, $G__72738$$, this.__meta, this.__extmap, null) : new datascript.query.Relation(this.attrs, this.tuples, this.__meta, $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(this.__extmap, $k__5332__auto__$$, $G__72738$$), null);
};
datascript.query.Relation.prototype.cljs$core$ISeqable$_seq$arity$1 = function($this__5336__auto__$$) {
  return $APP.cljs.core.seq($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.MapEntry($APP.cljs$cst$2743$attrs, this.attrs, null), new $APP.cljs.core.MapEntry(cljs$cst$4621$tuples, this.tuples, null)], null), this.__extmap));
};
datascript.query.Relation.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($this__5322__auto__$$, $G__72738$$) {
  return new datascript.query.Relation(this.attrs, this.tuples, $G__72738$$, this.__extmap, this.__hash);
};
datascript.query.Relation.prototype.cljs$core$ICollection$_conj$arity$2 = function($this__5328__auto__$$, $entry__5329__auto__$$) {
  return $APP.cljs.core.vector_QMARK_($entry__5329__auto__$$) ? this.cljs$core$IAssociative$_assoc$arity$3(null, $APP.cljs.core._nth($entry__5329__auto__$$, 0), $APP.cljs.core._nth($entry__5329__auto__$$, 1)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3($APP.cljs.core._conj, this, $entry__5329__auto__$$);
};
datascript.query.Relation.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$3017$attrs, cljs$cst$4622$tuples], null);
};
datascript.query.Relation.cljs$lang$type = !0;
datascript.query.Relation.cljs$lang$ctorPrSeq = function($this__5369__auto__$$) {
  return new $APP.cljs.core.List(null, "datascript.query/Relation", null, 1, null);
};
datascript.query.Relation.cljs$lang$ctorPrWriter = function($this__5369__auto__$$, $writer__5370__auto__$$) {
  return $APP.cljs.core._write($writer__5370__auto__$$, "datascript.query/Relation");
};
datascript.query.__GT_Relation = function($attrs$$, $tuples$$) {
  return new datascript.query.Relation($attrs$$, $tuples$$, null, null, null);
};
datascript.query.map__GT_Relation = function($G__72742$$) {
  var $G__72757$jscomp$inline_6983_extmap__5365__auto__$$ = $APP.cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic($G__72742$$, $APP.cljs$cst$2743$attrs, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$4621$tuples], 0));
  $G__72757$jscomp$inline_6983_extmap__5365__auto__$$ = $APP.cljs.core.record_QMARK_($G__72742$$) ? $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $G__72757$jscomp$inline_6983_extmap__5365__auto__$$) : $G__72757$jscomp$inline_6983_extmap__5365__auto__$$;
  return new datascript.query.Relation($APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($G__72742$$), cljs$cst$4621$tuples.cljs$core$IFn$_invoke$arity$1($G__72742$$), null, $APP.cljs.core.not_empty($G__72757$jscomp$inline_6983_extmap__5365__auto__$$), null);
};
datascript.query.intersect_keys = function($attrs1$$, $attrs2$$) {
  return $APP.clojure.set.intersection.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.set($APP.cljs.core.keys($attrs1$$)), $APP.cljs.core.set($APP.cljs.core.keys($attrs2$$)));
};
datascript.query.same_keys_QMARK_ = function($a$$, $b$$) {
  return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.count($a$$), $APP.cljs.core.count($b$$)) && $APP.cljs.core.every_QMARK_(function($p1__72759_SHARP_$$) {
    return $APP.cljs.core.contains_QMARK_($b$$, $p1__72759_SHARP_$$);
  }, $APP.cljs.core.keys($a$$)) && $APP.cljs.core.every_QMARK_(function($p1__72760_SHARP_$$) {
    return $APP.cljs.core.contains_QMARK_($a$$, $p1__72760_SHARP_$$);
  }, $APP.cljs.core.keys($b$$));
};
datascript.query.looks_like_QMARK_ = function($pattern$$, $form$$) {
  return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$312$_, $pattern$$) ? !0 : $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$650$_STAR_], null), $pattern$$) ? $APP.cljs.core.sequential_QMARK_($form$$) : $pattern$$ instanceof $APP.cljs.core.Symbol ? $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($form$$, $pattern$$) : $APP.cljs.core.sequential_QMARK_($pattern$$) ? $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.last($pattern$$), 
  $APP.cljs$cst$650$_STAR_) ? $APP.cljs.core.sequential_QMARK_($form$$) && $APP.cljs.core.every_QMARK_(function($form_el_p__72762$$) {
    var $pattern_el$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($form_el_p__72762$$, 0, null);
    $form_el_p__72762$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($form_el_p__72762$$, 1, null);
    return datascript.query.looks_like_QMARK_.cljs$core$IFn$_invoke$arity$2 ? datascript.query.looks_like_QMARK_.cljs$core$IFn$_invoke$arity$2($pattern_el$$, $form_el_p__72762$$) : datascript.query.looks_like_QMARK_.call(null, $pattern_el$$, $form_el_p__72762$$);
  }, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.vector, $APP.cljs.core.butlast($pattern$$), $form$$)) : $APP.cljs.core.sequential_QMARK_($form$$) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.count($form$$), $APP.cljs.core.count($pattern$$)) && $APP.cljs.core.every_QMARK_(function($form_el$$) {
    var $pattern_el$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($form_el$$, 0, null);
    $form_el$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($form_el$$, 1, null);
    return datascript.query.looks_like_QMARK_.cljs$core$IFn$_invoke$arity$2 ? datascript.query.looks_like_QMARK_.cljs$core$IFn$_invoke$arity$2($pattern_el$$, $form_el$$) : datascript.query.looks_like_QMARK_.call(null, $pattern_el$$, $form_el$$);
  }, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.vector, $pattern$$, $form$$)) : $pattern$$.cljs$core$IFn$_invoke$arity$1 ? $pattern$$.cljs$core$IFn$_invoke$arity$1($form$$) : $pattern$$.call(null, $form$$);
};
datascript.query.source_QMARK_ = function($sym$$) {
  return $sym$$ instanceof $APP.cljs.core.Symbol && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2("$", $APP.cljs.core.first($APP.cljs.core.name($sym$$)));
};
datascript.query.free_var_QMARK_ = function($sym$$) {
  return $sym$$ instanceof $APP.cljs.core.Symbol && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2("?", $APP.cljs.core.first($APP.cljs.core.name($sym$$)));
};
datascript.query.attr_QMARK_ = function($form$$) {
  return $form$$ instanceof $APP.cljs.core.Keyword || typeof $form$$ === "string";
};
datascript.query.lookup_ref_QMARK_ = function($form$$) {
  return ($APP.cljs.core.sequential_QMARK_($form$$) || $APP.me.tonsky.persistent_sorted_set.arrays.array_QMARK_($form$$)) && $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(2, $APP.cljs.core.count($form$$)) && datascript.query.attr_QMARK_($APP.cljs.core.first($form$$));
};
datascript.query.join_tuples = function($i_73151_t1$$, $idxs1$$, $t2$$, $idxs2$$) {
  for (var $l1$$ = $idxs1$$.length, $l2$$ = $idxs2$$.length, $res$$ = $APP.me.tonsky.persistent_sorted_set.arrays.make_array($l1$$ + $l2$$), $i_73148$$ = 0;;) {
    if ($i_73148$$ < $l1$$) {
      $res$$[$i_73148$$] = $i_73151_t1$$[$idxs1$$[$i_73148$$]], $i_73148$$ += 1;
    } else {
      break;
    }
  }
  for ($i_73151_t1$$ = 0;;) {
    if ($i_73151_t1$$ < $l2$$) {
      $res$$[$l1$$ + $i_73151_t1$$] = $t2$$[$idxs2$$[$i_73151_t1$$]], $i_73151_t1$$ += 1;
    } else {
      break;
    }
  }
  return $res$$;
};
datascript.query.sum_rel_STAR_ = function($attrs_a$$, $tuples_SINGLEQUOTE__tuples_a$$, $attrs_b$$, $tuples_b$$) {
  var $idxb__GT_idxa$$ = $APP.cljs.core.vec(function() {
    return function $datascript$query$sum_rel_STAR__$_iter__72772$$($s__72773$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (;;) {
          var $s__72773__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__72773$$);
          if ($s__72773__$2_temp__5825__auto__$$) {
            if ($APP.cljs.core.chunked_seq_QMARK_($s__72773__$2_temp__5825__auto__$$)) {
              var $JSCompiler_inline_result$jscomp$1559_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__72773__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1559_c__5501__auto__$$), $b__72775_sym$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
              a: {
                for (var $i__72774$$ = 0;;) {
                  if ($i__72774$$ < $size__5502__auto__$$) {
                    var $idx_b$jscomp$inline_6988_vec__72777$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1559_c__5501__auto__$$, $i__72774$$), $sym$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($idx_b$jscomp$inline_6988_vec__72777$$, 0, null);
                    $idx_b$jscomp$inline_6988_vec__72777$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($idx_b$jscomp$inline_6988_vec__72777$$, 1, null);
                    $APP.cljs.core.chunk_append($b__72775_sym$$, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$idx_b$jscomp$inline_6988_vec__72777$$, $attrs_a$$.cljs$core$IFn$_invoke$arity$1 ? $attrs_a$$.cljs$core$IFn$_invoke$arity$1($sym$$) : $attrs_a$$.call(null, $sym$$)], null));
                    $i__72774$$ += 1;
                  } else {
                    $JSCompiler_inline_result$jscomp$1559_c__5501__auto__$$ = !0;
                    break a;
                  }
                }
                $JSCompiler_inline_result$jscomp$1559_c__5501__auto__$$ = void 0;
              }
              return $JSCompiler_inline_result$jscomp$1559_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__72775_sym$$), $datascript$query$sum_rel_STAR__$_iter__72772$$($APP.cljs.core.chunk_rest($s__72773__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__72775_sym$$), null);
            }
            $JSCompiler_inline_result$jscomp$1559_c__5501__auto__$$ = $APP.cljs.core.first($s__72773__$2_temp__5825__auto__$$);
            $b__72775_sym$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_inline_result$jscomp$1559_c__5501__auto__$$, 0, null);
            $JSCompiler_inline_result$jscomp$1559_c__5501__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_inline_result$jscomp$1559_c__5501__auto__$$, 1, null);
            return $APP.cljs.core.cons(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$JSCompiler_inline_result$jscomp$1559_c__5501__auto__$$, $attrs_a$$.cljs$core$IFn$_invoke$arity$1 ? $attrs_a$$.cljs$core$IFn$_invoke$arity$1($b__72775_sym$$) : $attrs_a$$.call(null, $b__72775_sym$$)], null), $datascript$query$sum_rel_STAR__$_iter__72772$$($APP.cljs.core.rest($s__72773__$2_temp__5825__auto__$$)));
          }
          return null;
        }
      }, null, null);
    }($attrs_b$$);
  }()), $tlen$$ = $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.max, $APP.cljs.core.vals($attrs_a$$)) + 1;
  $tuples_SINGLEQUOTE__tuples_a$$ = $APP.cljs.core.persistent_BANG_($APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($acc$$, $tuple_b$$) {
    for (var $tuple_SINGLEQUOTE_$$ = $APP.me.tonsky.persistent_sorted_set.arrays.make_array($tlen$$), $G__73168_seq__72783_73154_seq__72783_73166__$1_temp__5825__auto___73165$$ = $APP.cljs.core.seq($idxb__GT_idxa$$), $G__73169_chunk__72784_73155_idx_b_73173$$ = null, $G__73170_c__5548__auto___73167_count__72785_73156_idx_a_73174_vec__72797_73172$$ = 0, $i__72786_73157$$ = 0;;) {
      if ($i__72786_73157$$ < $G__73170_c__5548__auto___73167_count__72785_73156_idx_a_73174_vec__72797_73172$$) {
        var $idx_a_73160_vec__72794_73158$$ = $G__73169_chunk__72784_73155_idx_b_73173$$.cljs$core$IIndexed$_nth$arity$2(null, $i__72786_73157$$), $idx_b_73159$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($idx_a_73160_vec__72794_73158$$, 0, null);
        $idx_a_73160_vec__72794_73158$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($idx_a_73160_vec__72794_73158$$, 1, null);
        $tuple_SINGLEQUOTE_$$[$idx_a_73160_vec__72794_73158$$] = $tuple_b$$[$idx_b_73159$$];
        $i__72786_73157$$ += 1;
      } else {
        if ($G__73168_seq__72783_73154_seq__72783_73166__$1_temp__5825__auto___73165$$ = $APP.cljs.core.seq($G__73168_seq__72783_73154_seq__72783_73166__$1_temp__5825__auto___73165$$)) {
          $APP.cljs.core.chunked_seq_QMARK_($G__73168_seq__72783_73154_seq__72783_73166__$1_temp__5825__auto___73165$$) ? ($G__73170_c__5548__auto___73167_count__72785_73156_idx_a_73174_vec__72797_73172$$ = $APP.cljs.core.chunk_first($G__73168_seq__72783_73154_seq__72783_73166__$1_temp__5825__auto___73165$$), $G__73168_seq__72783_73154_seq__72783_73166__$1_temp__5825__auto___73165$$ = $APP.cljs.core.chunk_rest($G__73168_seq__72783_73154_seq__72783_73166__$1_temp__5825__auto___73165$$), $G__73169_chunk__72784_73155_idx_b_73173$$ = 
          $G__73170_c__5548__auto___73167_count__72785_73156_idx_a_73174_vec__72797_73172$$, $G__73170_c__5548__auto___73167_count__72785_73156_idx_a_73174_vec__72797_73172$$ = $APP.cljs.core.count($G__73170_c__5548__auto___73167_count__72785_73156_idx_a_73174_vec__72797_73172$$)) : ($G__73170_c__5548__auto___73167_count__72785_73156_idx_a_73174_vec__72797_73172$$ = $APP.cljs.core.first($G__73168_seq__72783_73154_seq__72783_73166__$1_temp__5825__auto___73165$$), $G__73169_chunk__72784_73155_idx_b_73173$$ = 
          $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__73170_c__5548__auto___73167_count__72785_73156_idx_a_73174_vec__72797_73172$$, 0, null), $G__73170_c__5548__auto___73167_count__72785_73156_idx_a_73174_vec__72797_73172$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($G__73170_c__5548__auto___73167_count__72785_73156_idx_a_73174_vec__72797_73172$$, 1, null), $tuple_SINGLEQUOTE_$$[$G__73170_c__5548__auto___73167_count__72785_73156_idx_a_73174_vec__72797_73172$$] = $tuple_b$$[$G__73169_chunk__72784_73155_idx_b_73173$$], 
          $G__73168_seq__72783_73154_seq__72783_73166__$1_temp__5825__auto___73165$$ = $APP.cljs.core.next($G__73168_seq__72783_73154_seq__72783_73166__$1_temp__5825__auto___73165$$), $G__73169_chunk__72784_73155_idx_b_73173$$ = null, $G__73170_c__5548__auto___73167_count__72785_73156_idx_a_73174_vec__72797_73172$$ = 0), $i__72786_73157$$ = 0;
        } else {
          break;
        }
      }
    }
    return $APP.cljs.core.conj_BANG_.cljs$core$IFn$_invoke$arity$2($acc$$, $tuple_SINGLEQUOTE_$$);
  }, $APP.cljs.core.transient$($APP.cljs.core.vec($tuples_SINGLEQUOTE__tuples_a$$)), $tuples_b$$));
  return new datascript.query.Relation($attrs_a$$, $tuples_SINGLEQUOTE__tuples_a$$, null, null, null);
};
datascript.query.sum_rel = function($a$$, $b$$) {
  var $map__72800__$1_tuples_a$$ = $APP.cljs.core.__destructure_map($a$$), $G__72802_attrs_a$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__72800__$1_tuples_a$$, $APP.cljs$cst$2743$attrs);
  $map__72800__$1_tuples_a$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__72800__$1_tuples_a$$, cljs$cst$4621$tuples);
  var $map__72801__$1_tuples_b$$ = $APP.cljs.core.__destructure_map($b$$), $attrs_b$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__72801__$1_tuples_b$$, $APP.cljs$cst$2743$attrs);
  $map__72801__$1_tuples_b$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__72801__$1_tuples_b$$, cljs$cst$4621$tuples);
  if ($APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($G__72802_attrs_a$$, $attrs_b$$)) {
    return new datascript.query.Relation($G__72802_attrs_a$$, $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.vec($map__72800__$1_tuples_a$$), $map__72801__$1_tuples_b$$), null, null, null);
  }
  if ($APP.cljs.core.empty_QMARK_($map__72800__$1_tuples_a$$)) {
    return $b$$;
  }
  if ($APP.cljs.core.empty_QMARK_($map__72801__$1_tuples_b$$)) {
    return $a$$;
  }
  if (datascript.query.same_keys_QMARK_($G__72802_attrs_a$$, $attrs_b$$)) {
    if ($APP.cljs.core.every_QMARK_($APP.cljs.core.number_QMARK_, $APP.cljs.core.vals($G__72802_attrs_a$$))) {
      return datascript.query.sum_rel_STAR_($G__72802_attrs_a$$, $map__72800__$1_tuples_a$$, $attrs_b$$, $map__72801__$1_tuples_b$$);
    }
    $a$$ = $APP.cljs.core.zipmap($APP.cljs.core.keys($G__72802_attrs_a$$), $APP.cljs.core.range.cljs$core$IFn$_invoke$arity$0());
    $G__72802_attrs_a$$ = datascript.query.sum_rel_STAR_($a$$, $APP.cljs.core.PersistentVector.EMPTY, $G__72802_attrs_a$$, $map__72800__$1_tuples_a$$);
    return datascript.query.sum_rel.cljs$core$IFn$_invoke$arity$2 ? datascript.query.sum_rel.cljs$core$IFn$_invoke$arity$2($G__72802_attrs_a$$, $b$$) : datascript.query.sum_rel.call(null, $G__72802_attrs_a$$, $b$$);
  }
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Can’t sum relations with different attrs: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__72802_attrs_a$$], 0)), " and ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$attrs_b$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$1404$error, cljs$cst$4524$query_SLASH_where], 
  null));
};
datascript.query.prod_rel = function($var_args$$) {
  switch(arguments.length) {
    case 0:
      return datascript.query.prod_rel.cljs$core$IFn$_invoke$arity$0();
    case 2:
      return datascript.query.prod_rel.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.query.prod_rel.cljs$core$IFn$_invoke$arity$0 = function() {
  return new datascript.query.Relation($APP.cljs.core.PersistentArrayMap.EMPTY, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.me.tonsky.persistent_sorted_set.arrays.make_array(0)], null), null, null, null);
};
datascript.query.prod_rel.cljs$core$IFn$_invoke$arity$2 = function($rel1$$, $rel2$$) {
  var $attrs1$$ = $APP.cljs.core.keys($APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($rel1$$)), $attrs2$$ = $APP.cljs.core.keys($APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($rel2$$)), $idxs1$$ = $APP.cljs.core.to_array($APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($rel1$$), $attrs1$$)), $idxs2$$ = $APP.cljs.core.to_array($APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($rel2$$), 
  $attrs2$$));
  return new datascript.query.Relation($APP.cljs.core.zipmap($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($attrs1$$, $attrs2$$), $APP.cljs.core.range.cljs$core$IFn$_invoke$arity$0()), $APP.cljs.core.persistent_BANG_($APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($acc$$, $t1$$) {
    return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($acc__$1$$, $t2$$) {
      return $APP.cljs.core.conj_BANG_.cljs$core$IFn$_invoke$arity$2($acc__$1$$, datascript.query.join_tuples($t1$$, $idxs1$$, $t2$$, $idxs2$$));
    }, $acc$$, cljs$cst$4621$tuples.cljs$core$IFn$_invoke$arity$1($rel2$$));
  }, $APP.cljs.core.transient$($APP.cljs.core.PersistentVector.EMPTY), cljs$cst$4621$tuples.cljs$core$IFn$_invoke$arity$1($rel1$$))), null, null, null);
};
datascript.query.prod_rel.cljs$lang$maxFixedArity = 2;
datascript.query.parse_rules = function($rules$$) {
  $rules$$ = typeof $rules$$ === "string" ? $APP.cljs.reader.read_string.cljs$core$IFn$_invoke$arity$1($rules$$) : $rules$$;
  datascript.parser.parse_rules($rules$$);
  return $APP.cljs.core.group_by($APP.cljs.core.ffirst, $rules$$);
};
datascript.query.empty_rel = function($binding$jscomp$6_vars$$) {
  $binding$jscomp$6_vars$$ = $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$219$symbol, datascript.parser.collect_vars_distinct($binding$jscomp$6_vars$$));
  return new datascript.query.Relation($APP.cljs.core.zipmap($binding$jscomp$6_vars$$, $APP.cljs.core.range.cljs$core$IFn$_invoke$arity$0()), $APP.cljs.core.PersistentVector.EMPTY, null, null, null);
};
datascript.query.IBinding = function() {
};
var datascript$query$IBinding$in__GT_rel$dyn_73180 = function($binding$$, $value$$) {
  var $m__5372__auto__$jscomp$711_m__5374__auto__$$ = datascript.query.in__GT_rel[$APP.goog.typeOf($binding$$ == null ? null : $binding$$)];
  if ($m__5372__auto__$jscomp$711_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$711_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$711_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($binding$$, $value$$) : $m__5372__auto__$jscomp$711_m__5374__auto__$$.call(null, $binding$$, $value$$);
  }
  $m__5372__auto__$jscomp$711_m__5374__auto__$$ = datascript.query.in__GT_rel._;
  if ($m__5372__auto__$jscomp$711_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$711_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$711_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($binding$$, $value$$) : $m__5372__auto__$jscomp$711_m__5374__auto__$$.call(null, $binding$$, $value$$);
  }
  throw $APP.cljs.core.missing_protocol("IBinding.in-\x3erel", $binding$$);
};
datascript.query.in__GT_rel = function($binding$$, $value$$) {
  return $binding$$ != null && $binding$$.datascript$query$IBinding$in__GT_rel$arity$2 != null ? $binding$$.datascript$query$IBinding$in__GT_rel$arity$2($binding$$, $value$$) : datascript$query$IBinding$in__GT_rel$dyn_73180($binding$$, $value$$);
};
datascript.parser.BindIgnore.prototype.datascript$query$IBinding$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.BindIgnore.prototype.datascript$query$IBinding$in__GT_rel$arity$2 = function($_$$, $___$1$$) {
  return datascript.query.prod_rel.cljs$core$IFn$_invoke$arity$0();
};
datascript.parser.BindScalar.prototype.datascript$query$IBinding$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.BindScalar.prototype.datascript$query$IBinding$in__GT_rel$arity$2 = function($binding$$, $value$$) {
  return new datascript.query.Relation($APP.cljs.core.PersistentArrayMap.createAsIfByAssoc([$APP.cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(this, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4585$variable, $APP.cljs$cst$219$symbol], null)), 0]), new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.into_array.cljs$core$IFn$_invoke$arity$1(new $APP.cljs.core.PersistentVector(null, 1, 
  5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$value$$], null))], null), null, null, null);
};
datascript.parser.BindColl.prototype.datascript$query$IBinding$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.BindColl.prototype.datascript$query$IBinding$in__GT_rel$arity$2 = function($binding$$, $coll$$) {
  var $binding__$1$$ = this;
  if (datascript.db.seqable_QMARK_($coll$$)) {
    return $APP.cljs.core.empty_QMARK_($coll$$) ? datascript.query.empty_rel($binding__$1$$) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$2(datascript.query.sum_rel, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(function($p1__72809_SHARP_$$) {
      return datascript.query.in__GT_rel($binding__$1$$.binding, $p1__72809_SHARP_$$);
    }, $coll$$));
  }
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Cannot bind value ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$coll$$], 0)), " to collection ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([datascript.parser.source($binding__$1$$)], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4623$query_SLASH_binding, 
  $APP.cljs$cst$1429$value, $coll$$, $APP.cljs$cst$4587$binding, datascript.parser.source($binding__$1$$)], null));
};
datascript.parser.BindTuple.prototype.datascript$query$IBinding$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.BindTuple.prototype.datascript$query$IBinding$in__GT_rel$arity$2 = function($binding$$, $coll$$) {
  if (datascript.db.seqable_QMARK_($coll$$)) {
    if ($APP.cljs.core.count($coll$$) < $APP.cljs.core.count(this.bindings)) {
      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Not enough elements in a collection ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$coll$$], 0)), " to bind tuple ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([datascript.parser.source(this)], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4623$query_SLASH_binding, 
      $APP.cljs$cst$1429$value, $coll$$, $APP.cljs$cst$4587$binding, datascript.parser.source(this)], null));
    }
    return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$2(datascript.query.prod_rel, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$3(function($p1__72810_SHARP_$$, $p2__72811_SHARP_$$) {
      return datascript.query.in__GT_rel($p1__72810_SHARP_$$, $p2__72811_SHARP_$$);
    }, this.bindings, $coll$$));
  }
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Cannot bind value ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$coll$$], 0)), " to tuple ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([datascript.parser.source(this)], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4623$query_SLASH_binding, $APP.cljs$cst$1429$value, 
  $coll$$, $APP.cljs$cst$4587$binding, datascript.parser.source(this)], null));
};
datascript.query.resolve_in = function($context$$, $p__72814_value$$) {
  var $binding$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72814_value$$, 0, null);
  $p__72814_value$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72814_value$$, 1, null);
  return $binding$$ instanceof datascript.parser.BindScalar && cljs$cst$4585$variable.cljs$core$IFn$_invoke$arity$1($binding$$) instanceof datascript.parser.SrcVar ? $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$5($context$$, $APP.cljs$cst$2403$sources, $APP.cljs.core.assoc, $APP.cljs.core.get_in.cljs$core$IFn$_invoke$arity$2($binding$$, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4585$variable, $APP.cljs$cst$219$symbol], null)), $p__72814_value$$) : 
  $binding$$ instanceof datascript.parser.BindScalar && cljs$cst$4585$variable.cljs$core$IFn$_invoke$arity$1($binding$$) instanceof datascript.parser.RulesVar ? $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($context$$, $APP.cljs$cst$2061$rules, datascript.query.parse_rules($p__72814_value$$)) : $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$4($context$$, cljs$cst$4617$rels, $APP.cljs.core.conj, datascript.query.in__GT_rel($binding$$, $p__72814_value$$));
};
datascript.query.resolve_ins = function($context$$, $bindings$$, $values$$) {
  var $cb$$ = $APP.cljs.core.count($bindings$$), $cv$$ = $APP.cljs.core.count($values$$);
  if ($cb$$ < $cv$$) {
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Extra inputs passed, expected: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2(function($p1__72819_SHARP_$$) {
      return $APP.cljs$cst$193$source.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.meta($p1__72819_SHARP_$$));
    }, $bindings$$)], 0)), ", got: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$cv$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4624$query_SLASH_inputs, cljs$cst$4516$expected, $bindings$$, cljs$cst$4625$got, $values$$], null));
  }
  if ($cb$$ > $cv$$) {
    throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Too few inputs passed, expected: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2(function($p1__72820_SHARP_$$) {
      return $APP.cljs$cst$193$source.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.meta($p1__72820_SHARP_$$));
    }, $bindings$$)], 0)), ", got: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$cv$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4624$query_SLASH_inputs, cljs$cst$4516$expected, $bindings$$, cljs$cst$4625$got, $values$$], null));
  }
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(datascript.query.resolve_in, $context$$, $APP.cljs.core.zipmap($bindings$$, $values$$));
};
datascript.query._STAR_lookup_attrs_STAR_ = null;
datascript.query._STAR_implicit_source_STAR_ = null;
datascript.query.getter_fn = function($attrs$$, $attr$$) {
  var $idx$$ = $attrs$$.cljs$core$IFn$_invoke$arity$1 ? $attrs$$.cljs$core$IFn$_invoke$arity$1($attr$$) : $attrs$$.call(null, $attr$$);
  if ($APP.cljs.core.contains_QMARK_(datascript.query._STAR_lookup_attrs_STAR_, $attr$$)) {
    if ($APP.cljs.core.int_QMARK_($idx$$)) {
      var $idx__$1$$ = $idx$$ | 0;
      return function($eid$jscomp$29_tuple$$) {
        $eid$jscomp$29_tuple$$ = $eid$jscomp$29_tuple$$[$idx__$1$$];
        return typeof $eid$jscomp$29_tuple$$ === "number" ? $eid$jscomp$29_tuple$$ : $APP.cljs.core.sequential_QMARK_($eid$jscomp$29_tuple$$) ? datascript.db.entid(datascript.query._STAR_implicit_source_STAR_, $eid$jscomp$29_tuple$$) : $APP.me.tonsky.persistent_sorted_set.arrays.array_QMARK_($eid$jscomp$29_tuple$$) ? datascript.db.entid(datascript.query._STAR_implicit_source_STAR_, $eid$jscomp$29_tuple$$) : $eid$jscomp$29_tuple$$;
      };
    }
    return function($eid$jscomp$30_tuple$$) {
      $eid$jscomp$30_tuple$$ = $eid$jscomp$30_tuple$$[$idx$$];
      return typeof $eid$jscomp$30_tuple$$ === "number" ? $eid$jscomp$30_tuple$$ : $APP.cljs.core.sequential_QMARK_($eid$jscomp$30_tuple$$) ? datascript.db.entid(datascript.query._STAR_implicit_source_STAR_, $eid$jscomp$30_tuple$$) : $APP.me.tonsky.persistent_sorted_set.arrays.array_QMARK_($eid$jscomp$30_tuple$$) ? datascript.db.entid(datascript.query._STAR_implicit_source_STAR_, $eid$jscomp$30_tuple$$) : $eid$jscomp$30_tuple$$;
    };
  }
  return $APP.cljs.core.int_QMARK_($idx$$) ? ($idx__$1$$ = $idx$$ | 0, function($tuple$$) {
    return $tuple$$[$idx__$1$$];
  }) : function($tuple$$) {
    return $tuple$$[$idx$$];
  };
};
datascript.query.tuple_key_fn = function($attrs$$, $common_attrs_getters_arr$$) {
  var $n$$ = $APP.cljs.core.count($common_attrs_getters_arr$$);
  if ($n$$ === 1) {
    return datascript.query.getter_fn($attrs$$, $APP.cljs.core.first($common_attrs_getters_arr$$));
  }
  $common_attrs_getters_arr$$ = $APP.cljs.core.into_array.cljs$core$IFn$_invoke$arity$1($common_attrs_getters_arr$$);
  for (var $i$$ = 0;;) {
    if ($i$$ < $n$$) {
      $common_attrs_getters_arr$$[$i$$] = datascript.query.getter_fn($attrs$$, $common_attrs_getters_arr$$[$i$$]), $i$$ += 1;
    } else {
      return function($i$$, $getters_arr$$, $n$$) {
        return function($tuple$$) {
          return $APP.cljs.core.list_STAR_.cljs$core$IFn$_invoke$arity$1($getters_arr$$.map(function($i$$, $getters_arr$$, $n$$) {
            return function($p1__72822_SHARP_$$) {
              return $p1__72822_SHARP_$$.cljs$core$IFn$_invoke$arity$1 ? $p1__72822_SHARP_$$.cljs$core$IFn$_invoke$arity$1($tuple$$) : $p1__72822_SHARP_$$.call(null, $tuple$$);
            };
          }($i$$, $getters_arr$$, $n$$)));
        };
      }($i$$, $common_attrs_getters_arr$$, $n$$);
    }
  }
};
datascript.query._group_by = function($f$$, $init$$, $coll$$) {
  return $APP.cljs.core.persistent_BANG_($APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($ret$$, $x$$) {
    var $k$$ = $f$$.cljs$core$IFn$_invoke$arity$1 ? $f$$.cljs$core$IFn$_invoke$arity$1($x$$) : $f$$.call(null, $x$$);
    return $APP.cljs.core.assoc_BANG_.cljs$core$IFn$_invoke$arity$3($ret$$, $k$$, $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3($ret$$, $k$$, $init$$), $x$$));
  }, $APP.cljs.core.transient$($APP.cljs.core.PersistentArrayMap.EMPTY), $coll$$));
};
datascript.query.hash_attrs = function($key_fn$$, $tuples$$) {
  return datascript.query._group_by($key_fn$$, $APP.cljs.core.List.EMPTY, $tuples$$);
};
datascript.query.hash_join = function($keep_attrs1_rel1$$, $keep_attrs2_rel2$$) {
  var $new_tuples_tuples1$$ = cljs$cst$4621$tuples.cljs$core$IFn$_invoke$arity$1($keep_attrs1_rel1$$), $tuples2$$ = cljs$cst$4621$tuples.cljs$core$IFn$_invoke$arity$1($keep_attrs2_rel2$$), $attrs1$$ = $APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($keep_attrs1_rel1$$), $attrs2$$ = $APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($keep_attrs2_rel2$$), $common_attrs$$ = $APP.cljs.core.vec(datascript.query.intersect_keys($APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($keep_attrs1_rel1$$), 
  $APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($keep_attrs2_rel2$$)));
  $keep_attrs1_rel1$$ = $APP.cljs.core.keys($attrs1$$);
  $keep_attrs2_rel2$$ = $APP.cljs.core.persistent_BANG_($APP.cljs.core.reduce_kv(function($vec$$, $k$$, $_$$) {
    return $APP.cljs.core.truth_($attrs1$$.cljs$core$IFn$_invoke$arity$1 ? $attrs1$$.cljs$core$IFn$_invoke$arity$1($k$$) : $attrs1$$.call(null, $k$$)) ? $vec$$ : $APP.cljs.core.conj_BANG_.cljs$core$IFn$_invoke$arity$2($vec$$, $k$$);
  }, $APP.cljs.core.transient$($APP.cljs.core.PersistentVector.EMPTY), $attrs2$$));
  var $keep_idxs1$$ = $APP.cljs.core.to_array($APP.cljs.core.vals($attrs1$$)), $keep_idxs2$$ = $APP.cljs.core.to_array($APP.cljs.core.__GT_Eduction($APP.cljs.core.map.cljs$core$IFn$_invoke$arity$1($attrs2$$), $keep_attrs2_rel2$$)), $key_fn1$$ = datascript.query.tuple_key_fn($attrs1$$, $common_attrs$$), $key_fn2$$ = datascript.query.tuple_key_fn($attrs2$$, $common_attrs$$), $hash$$ = datascript.query.hash_attrs($key_fn1$$, $new_tuples_tuples1$$);
  $new_tuples_tuples1$$ = $APP.cljs.core.persistent_BANG_($APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($acc$$, $tuple2$$) {
    var $key$jscomp$281_temp__5827__auto__$$ = $key_fn2$$($tuple2$$);
    $key$jscomp$281_temp__5827__auto__$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($hash$$, $key$jscomp$281_temp__5827__auto__$$);
    return $key$jscomp$281_temp__5827__auto__$$ == null ? $acc$$ : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($acc__$1$$, $tuple1$$) {
      return $APP.cljs.core.conj_BANG_.cljs$core$IFn$_invoke$arity$2($acc__$1$$, datascript.query.join_tuples($tuple1$$, $keep_idxs1$$, $tuple2$$, $keep_idxs2$$));
    }, $acc$$, $key$jscomp$281_temp__5827__auto__$$);
  }, $APP.cljs.core.transient$($APP.cljs.core.PersistentVector.EMPTY), $tuples2$$));
  return new datascript.query.Relation($APP.cljs.core.zipmap($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($keep_attrs1_rel1$$, $keep_attrs2_rel2$$), $APP.cljs.core.range.cljs$core$IFn$_invoke$arity$0()), $new_tuples_tuples1$$, null, null, null);
};
datascript.query.subtract_rel = function($a$$, $attrs_b$jscomp$2_b$$) {
  var $map__72827__$1_tuples_a$$ = $APP.cljs.core.__destructure_map($a$$), $attrs_a$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__72827__$1_tuples_a$$, $APP.cljs$cst$2743$attrs);
  $map__72827__$1_tuples_a$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__72827__$1_tuples_a$$, cljs$cst$4621$tuples);
  var $map__72828__$1_tuples_b$$ = $APP.cljs.core.__destructure_map($attrs_b$jscomp$2_b$$);
  $attrs_b$jscomp$2_b$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__72828__$1_tuples_b$$, $APP.cljs$cst$2743$attrs);
  $map__72828__$1_tuples_b$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($map__72828__$1_tuples_b$$, cljs$cst$4621$tuples);
  var $attrs$$ = $APP.cljs.core.vec(datascript.query.intersect_keys($attrs_a$$, $attrs_b$jscomp$2_b$$));
  $attrs_b$jscomp$2_b$$ = datascript.query.tuple_key_fn($attrs_b$jscomp$2_b$$, $attrs$$);
  var $hash$$ = datascript.query.hash_attrs($attrs_b$jscomp$2_b$$, $map__72828__$1_tuples_b$$), $key_fn_a$$ = datascript.query.tuple_key_fn($attrs_a$$, $attrs$$);
  return $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($a$$, cljs$cst$4621$tuples, $APP.cljs.core.filterv(function($G__72830$$) {
    $G__72830$$ = $key_fn_a$$($G__72830$$);
    return ($hash$$.cljs$core$IFn$_invoke$arity$1 ? $hash$$.cljs$core$IFn$_invoke$arity$1($G__72830$$) : $hash$$.call(null, $G__72830$$)) == null;
  }, $map__72827__$1_tuples_a$$));
};
datascript.query.rel_with_attr = function($context$$, $sym$$) {
  return $APP.cljs.core.some(function($p1__72831_SHARP_$$) {
    return $APP.cljs.core.contains_QMARK_($APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($p1__72831_SHARP_$$), $sym$$) ? $p1__72831_SHARP_$$ : null;
  }, cljs$cst$4617$rels.cljs$core$IFn$_invoke$arity$1($context$$));
};
datascript.query.substitute_constant = function($context$$, $idx$jscomp$228_pattern_el$$) {
  if (datascript.query.free_var_QMARK_($idx$jscomp$228_pattern_el$$)) {
    var $temp__5829__auto__$$ = datascript.query.rel_with_attr($context$$, $idx$jscomp$228_pattern_el$$);
    if ($temp__5829__auto__$$ == null) {
      return null;
    }
    $context$$ = $APP.cljs.core.first(cljs$cst$4621$tuples.cljs$core$IFn$_invoke$arity$1($temp__5829__auto__$$));
    if ($context$$ == null) {
      return null;
    }
    if ($APP.cljs.core.fnext(cljs$cst$4621$tuples.cljs$core$IFn$_invoke$arity$1($temp__5829__auto__$$)) == null) {
      return $idx$jscomp$228_pattern_el$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($temp__5829__auto__$$), $idx$jscomp$228_pattern_el$$), $context$$[$idx$jscomp$228_pattern_el$$];
    }
  }
  return null;
};
datascript.query.substitute_constants = function($context$$, $pattern$$) {
  return $APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2(function($p1__72833_SHARP_$$) {
    var $or__5025__auto__$$ = datascript.query.substitute_constant($context$$, $p1__72833_SHARP_$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $p1__72833_SHARP_$$;
  }, $pattern$$);
};
datascript.query.resolve_pattern_lookup_refs = function($source$$, $pattern$$) {
  if ($source$$ != null ? $APP.cljs.core.PROTOCOL_SENTINEL === $source$$.datascript$db$IDB$ || ($source$$.cljs$lang$protocol_mask$partition$ ? 0 : $APP.cljs.core.native_satisfies_QMARK_(datascript.db.IDB, $source$$)) : $APP.cljs.core.native_satisfies_QMARK_(datascript.db.IDB, $source$$)) {
    var $e$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($pattern$$, 0, null), $a$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($pattern$$, 1, null), $v$jscomp$721_v_SINGLEQUOTE_$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($pattern$$, 2, null), $tx$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($pattern$$, 3, null);
    $e$$ = datascript.query.lookup_ref_QMARK_($e$$) || datascript.query.attr_QMARK_($e$$) ? datascript.db.entid_strict($source$$, $e$$) : $e$$;
    var $JSCompiler_temp_const$$ = $APP.cljs.core, $JSCompiler_temp_const$jscomp$0$$ = $JSCompiler_temp_const$$.truth_;
    var $JSCompiler_inline_result$$ = $APP.cljs.core.truth_($v$jscomp$721_v_SINGLEQUOTE_$$) ? datascript.query.attr_QMARK_($a$$) && datascript.db.ref_QMARK_($source$$, $a$$) && (datascript.query.lookup_ref_QMARK_($v$jscomp$721_v_SINGLEQUOTE_$$) || datascript.query.attr_QMARK_($v$jscomp$721_v_SINGLEQUOTE_$$)) : $v$jscomp$721_v_SINGLEQUOTE_$$;
    $v$jscomp$721_v_SINGLEQUOTE_$$ = $JSCompiler_temp_const$jscomp$0$$.call($JSCompiler_temp_const$$, $JSCompiler_inline_result$$) ? datascript.db.entid_strict($source$$, $v$jscomp$721_v_SINGLEQUOTE_$$) : $v$jscomp$721_v_SINGLEQUOTE_$$;
    $source$$ = datascript.query.lookup_ref_QMARK_($tx$$) ? datascript.db.entid_strict($source$$, $tx$$) : $tx$$;
    return $APP.cljs.core.subvec.cljs$core$IFn$_invoke$arity$3(new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$e$$, $a$$, $v$jscomp$721_v_SINGLEQUOTE_$$, $source$$], null), 0, $APP.cljs.core.count($pattern$$));
  }
  return $pattern$$;
};
datascript.query.lookup_pattern_db = function($context$$, $datoms$jscomp$23_db$$, $attr__GT_prop_pattern$$) {
  $context$$ = $APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2(function($p1__72840_SHARP_$$) {
    return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($p1__72840_SHARP_$$, $APP.cljs$cst$312$_) || datascript.query.free_var_QMARK_($p1__72840_SHARP_$$) ? null : $p1__72840_SHARP_$$;
  }, datascript.query.resolve_pattern_lookup_refs($datoms$jscomp$23_db$$, datascript.query.substitute_constants($context$$, $attr__GT_prop_pattern$$)));
  $datoms$jscomp$23_db$$ = datascript.db._search($datoms$jscomp$23_db$$, $context$$);
  $attr__GT_prop_pattern$$ = $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2(function($p__72842$$) {
    var $s$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72842$$, 0, null);
    $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72842$$, 1, null);
    return datascript.query.free_var_QMARK_($s$$);
  }, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.vector, $attr__GT_prop_pattern$$, new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, ["e", "a", "v", "tx"], null))));
  return new datascript.query.Relation($attr__GT_prop_pattern$$, $datoms$jscomp$23_db$$, null, null, null);
};
datascript.query.matches_pattern_QMARK_ = function($G__73189_pattern$jscomp$66_pattern__$1$$, $G__73188_tuple$$) {
  for (;;) {
    var $JSCompiler_temp_const$jscomp$1565_t$$ = $APP.cljs.core, $JSCompiler_temp_const$jscomp$1564_p$$ = $JSCompiler_temp_const$jscomp$1565_t$$.truth_;
    var $JSCompiler_inline_result$jscomp$1566_and__5023__auto__$$ = $G__73188_tuple$$;
    $JSCompiler_inline_result$jscomp$1566_and__5023__auto__$$ = $APP.cljs.core.truth_($JSCompiler_inline_result$jscomp$1566_and__5023__auto__$$) ? $G__73189_pattern$jscomp$66_pattern__$1$$ : $JSCompiler_inline_result$jscomp$1566_and__5023__auto__$$;
    if ($JSCompiler_temp_const$jscomp$1564_p$$.call($JSCompiler_temp_const$jscomp$1565_t$$, $JSCompiler_inline_result$jscomp$1566_and__5023__auto__$$)) {
      if ($JSCompiler_temp_const$jscomp$1565_t$$ = $APP.cljs.core.first($G__73188_tuple$$), $JSCompiler_temp_const$jscomp$1564_p$$ = $APP.cljs.core.first($G__73189_pattern$jscomp$66_pattern__$1$$), $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($JSCompiler_temp_const$jscomp$1564_p$$, $APP.cljs$cst$312$_) || datascript.query.free_var_QMARK_($JSCompiler_temp_const$jscomp$1564_p$$) || $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($JSCompiler_temp_const$jscomp$1565_t$$, $JSCompiler_temp_const$jscomp$1564_p$$)) {
        $G__73188_tuple$$ = $APP.cljs.core.next($G__73188_tuple$$);
        $G__73189_pattern$jscomp$66_pattern__$1$$ = $APP.cljs.core.next($G__73189_pattern$jscomp$66_pattern__$1$$);
        continue;
      } else {
        return !1;
      }
    } else {
      return !0;
    }
    break;
  }
};
datascript.query.lookup_pattern_coll = function($context$jscomp$32_data$$, $attr__GT_idx_coll$$, $pattern$$) {
  $context$jscomp$32_data$$ = $APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2(function($p1__72847_SHARP_$$) {
    return datascript.query.matches_pattern_QMARK_($pattern$$, $p1__72847_SHARP_$$);
  }, $attr__GT_idx_coll$$);
  $attr__GT_idx_coll$$ = $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentArrayMap.EMPTY, $APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2(function($p__72848$$) {
    var $s$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72848$$, 0, null);
    $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72848$$, 1, null);
    return datascript.query.free_var_QMARK_($s$$);
  }, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.vector, $pattern$$, $APP.cljs.core.range.cljs$core$IFn$_invoke$arity$0())));
  return new datascript.query.Relation($attr__GT_idx_coll$$, $APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.to_array, $context$jscomp$32_data$$), null, null, null);
};
datascript.query.normalize_pattern_clause = function($clause$$) {
  return datascript.query.source_QMARK_($APP.cljs.core.first($clause$$)) ? $clause$$ : $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2393$$], null), $clause$$);
};
datascript.query.lookup_pattern = function($context$$, $source$$, $pattern$$) {
  return ($source$$ != null ? $APP.cljs.core.PROTOCOL_SENTINEL === $source$$.datascript$db$ISearch$ || ($source$$.cljs$lang$protocol_mask$partition$ ? 0 : $APP.cljs.core.native_satisfies_QMARK_(datascript.db.ISearch, $source$$)) : $APP.cljs.core.native_satisfies_QMARK_(datascript.db.ISearch, $source$$)) ? datascript.query.lookup_pattern_db($context$$, $source$$, $pattern$$) : datascript.query.lookup_pattern_coll($context$$, $source$$, $pattern$$);
};
datascript.query.collapse_rels = function($G__73190_G__73193_rels$$, $G__73191_G__73194_new_rel_new_rel__$1$$) {
  for (var $G__73192_G__73195_acc$$ = $APP.cljs.core.PersistentVector.EMPTY;;) {
    var $rel$jscomp$3_temp__5827__auto__$$ = $APP.cljs.core.first($G__73190_G__73193_rels$$);
    if ($rel$jscomp$3_temp__5827__auto__$$ == null) {
      return $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($G__73192_G__73195_acc$$, $G__73191_G__73194_new_rel_new_rel__$1$$);
    }
    $APP.cljs.core.truth_($APP.cljs.core.not_empty(datascript.query.intersect_keys($APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($G__73191_G__73194_new_rel_new_rel__$1$$), $APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($rel$jscomp$3_temp__5827__auto__$$)))) ? ($G__73190_G__73193_rels$$ = $APP.cljs.core.next($G__73190_G__73193_rels$$), $G__73191_G__73194_new_rel_new_rel__$1$$ = datascript.query.hash_join($rel$jscomp$3_temp__5827__auto__$$, $G__73191_G__73194_new_rel_new_rel__$1$$)) : 
    ($G__73190_G__73193_rels$$ = $APP.cljs.core.next($G__73190_G__73193_rels$$), $G__73192_G__73195_acc$$ = $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($G__73192_G__73195_acc$$, $rel$jscomp$3_temp__5827__auto__$$));
  }
};
datascript.query.context_resolve_val = function($context$jscomp$34_temp__5829__auto____$1$$, $JSCompiler_inline_result$jscomp$1567_sym$$) {
  var $fexpr__72856$jscomp$inline_6997_temp__5829__auto__$$ = datascript.query.rel_with_attr($context$jscomp$34_temp__5829__auto____$1$$, $JSCompiler_inline_result$jscomp$1567_sym$$);
  if ($fexpr__72856$jscomp$inline_6997_temp__5829__auto__$$ == null) {
    return null;
  }
  $context$jscomp$34_temp__5829__auto____$1$$ = $APP.cljs.core.first(cljs$cst$4621$tuples.cljs$core$IFn$_invoke$arity$1($fexpr__72856$jscomp$inline_6997_temp__5829__auto__$$));
  if ($context$jscomp$34_temp__5829__auto____$1$$ == null) {
    return null;
  }
  $fexpr__72856$jscomp$inline_6997_temp__5829__auto__$$ = $APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($fexpr__72856$jscomp$inline_6997_temp__5829__auto__$$);
  $JSCompiler_inline_result$jscomp$1567_sym$$ = $fexpr__72856$jscomp$inline_6997_temp__5829__auto__$$.cljs$core$IFn$_invoke$arity$1 ? $fexpr__72856$jscomp$inline_6997_temp__5829__auto__$$.cljs$core$IFn$_invoke$arity$1($JSCompiler_inline_result$jscomp$1567_sym$$) : $fexpr__72856$jscomp$inline_6997_temp__5829__auto__$$.call(null, $JSCompiler_inline_result$jscomp$1567_sym$$);
  return $context$jscomp$34_temp__5829__auto____$1$$[$JSCompiler_inline_result$jscomp$1567_sym$$];
};
datascript.query.rel_contains_attrs_QMARK_ = function($rel$$, $attrs$$) {
  return $APP.cljs.core.some(function($p1__72857_SHARP_$$) {
    return $APP.cljs.core.contains_QMARK_($APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($rel$$), $p1__72857_SHARP_$$);
  }, $attrs$$);
};
datascript.query.rel_prod_by_attrs = function($context$$, $attrs$$) {
  var $rels$$ = $APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2(function($p1__72858_SHARP_$$) {
    return datascript.query.rel_contains_attrs_QMARK_($p1__72858_SHARP_$$, $attrs$$);
  }, cljs$cst$4617$rels.cljs$core$IFn$_invoke$arity$1($context$$)), $production$$ = $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$2(datascript.query.prod_rel, $rels$$);
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.update.cljs$core$IFn$_invoke$arity$3($context$$, cljs$cst$4617$rels, function($p1__72859_SHARP_$$) {
    return $APP.cljs.core.remove.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.set($rels$$), $p1__72859_SHARP_$$);
  }), $production$$], null);
};
datascript.query._call_fn = function($context$jscomp$36_sources$$, $attrs$jscomp$30_rel$$, $f$$, $args$$) {
  $context$jscomp$36_sources$$ = $APP.cljs$cst$2403$sources.cljs$core$IFn$_invoke$arity$1($context$jscomp$36_sources$$);
  $attrs$jscomp$30_rel$$ = $APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($attrs$jscomp$30_rel$$);
  for (var $len$$ = $APP.cljs.core.count($args$$), $static_args$$ = $APP.me.tonsky.persistent_sorted_set.arrays.make_array($len$$), $tuples_args$$ = $APP.me.tonsky.persistent_sorted_set.arrays.make_array($len$$), $i_73197$$ = 0;;) {
    if ($i_73197$$ < $len$$) {
      var $arg_73198$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2($args$$, $i_73197$$);
      if ($arg_73198$$ instanceof $APP.cljs.core.Symbol) {
        var $temp__5827__auto___73199$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($context$jscomp$36_sources$$, $arg_73198$$);
        $temp__5827__auto___73199$$ == null ? $tuples_args$$[$i_73197$$] = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($attrs$jscomp$30_rel$$, $arg_73198$$) : $static_args$$[$i_73197$$] = $temp__5827__auto___73199$$;
      } else {
        $static_args$$[$i_73197$$] = $arg_73198$$;
      }
      $i_73197$$ += 1;
    } else {
      break;
    }
  }
  return $f$$ === $APP.cljs.core.vector ? function($tuple$$) {
    for (var $args__$1$$ = $APP.me.tonsky.persistent_sorted_set.arrays.aclone($static_args$$), $i_73203$$ = 0;;) {
      if ($i_73203$$ < $len$$) {
        var $temp__5829__auto___73204$$ = $tuples_args$$[$i_73203$$];
        $temp__5829__auto___73204$$ != null && ($args__$1$$[$i_73203$$] = $tuple$$[$temp__5829__auto___73204$$]);
        $i_73203$$ += 1;
      } else {
        break;
      }
    }
    return $APP.cljs.core.apply.cljs$core$IFn$_invoke$arity$2($f$$, $args__$1$$);
  } : function($tuple$$) {
    for (var $i_73209$$ = 0;;) {
      if ($i_73209$$ < $len$$) {
        var $temp__5829__auto___73210$$ = $tuples_args$$[$i_73209$$];
        $temp__5829__auto___73210$$ != null && ($static_args$$[$i_73209$$] = $tuple$$[$temp__5829__auto___73210$$]);
        $i_73209$$ += 1;
      } else {
        break;
      }
    }
    return $APP.cljs.core.apply.cljs$core$IFn$_invoke$arity$2($f$$, $static_args$$);
  };
};
datascript.query.resolve_sym = function($sym$$) {
  return null;
};
datascript.query.filter_by_pred = function($context$$, $clause$$) {
  var $new_rel$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($clause$$, 0, null);
  $new_rel$$ = $APP.cljs.core.seq($new_rel$$);
  var $first__72867$$ = $APP.cljs.core.first($new_rel$$), $seq__72866__$1$$ = $APP.cljs.core.next($new_rel$$), $pred$$ = function() {
    var $or__5025__auto__$jscomp$498_or__5025__auto____$1$jscomp$84_or__5025__auto____$2$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2(datascript.built_ins.query_fns, $first__72867$$);
    if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$498_or__5025__auto____$1$jscomp$84_or__5025__auto____$2$$)) {
      return $or__5025__auto__$jscomp$498_or__5025__auto____$1$jscomp$84_or__5025__auto____$2$$;
    }
    $or__5025__auto__$jscomp$498_or__5025__auto____$1$jscomp$84_or__5025__auto____$2$$ = datascript.query.context_resolve_val($context$$, $first__72867$$);
    if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$498_or__5025__auto____$1$jscomp$84_or__5025__auto____$2$$)) {
      return $or__5025__auto__$jscomp$498_or__5025__auto____$1$jscomp$84_or__5025__auto____$2$$;
    }
    $or__5025__auto__$jscomp$498_or__5025__auto____$1$jscomp$84_or__5025__auto____$2$$ = datascript.query.resolve_sym($first__72867$$);
    if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$498_or__5025__auto____$1$jscomp$84_or__5025__auto____$2$$)) {
      return $or__5025__auto__$jscomp$498_or__5025__auto____$1$jscomp$84_or__5025__auto____$2$$;
    }
    if (datascript.query.rel_with_attr($context$$, $first__72867$$) == null) {
      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Unknown predicate '", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$first__72867$$], 0)), " in ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$clause$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4524$query_SLASH_where, $APP.cljs$cst$179$form, 
      $clause$$, $APP.cljs$cst$328$var, $first__72867$$], null));
    }
    return null;
  }();
  $new_rel$$ = datascript.query.rel_prod_by_attrs($context$$, $APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.symbol_QMARK_, $seq__72866__$1$$));
  var $context__$1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($new_rel$$, 0, null), $production$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($new_rel$$, 1, null);
  $new_rel$$ = $APP.cljs.core.truth_($pred$$) ? function() {
    var $tuple_pred$$ = datascript.query._call_fn($context__$1$$, $production$$, $pred$$, $seq__72866__$1$$);
    return $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$3($production$$, cljs$cst$4621$tuples, function($p1__72861_SHARP_$$) {
      return $APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2($tuple_pred$$, $p1__72861_SHARP_$$);
    });
  }() : $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($production$$, cljs$cst$4621$tuples, $APP.cljs.core.PersistentVector.EMPTY);
  return $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$4($context__$1$$, cljs$cst$4617$rels, $APP.cljs.core.conj, $new_rel$$);
};
datascript.query.bind_by_fn = function($context$$, $clause$$) {
  var $new_rel$jscomp$2_out$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($clause$$, 0, null);
  $new_rel$jscomp$2_out$$ = $APP.cljs.core.seq($new_rel$jscomp$2_out$$);
  var $first__72877$$ = $APP.cljs.core.first($new_rel$jscomp$2_out$$), $seq__72876__$1$$ = $APP.cljs.core.next($new_rel$jscomp$2_out$$);
  $new_rel$jscomp$2_out$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($clause$$, 1, null);
  var $binding$$ = datascript.parser.parse_binding($new_rel$jscomp$2_out$$), $fun$$ = function() {
    var $or__5025__auto__$jscomp$499_or__5025__auto____$1$jscomp$85_or__5025__auto____$2$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2(datascript.built_ins.query_fns, $first__72877$$);
    if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$499_or__5025__auto____$1$jscomp$85_or__5025__auto____$2$$)) {
      return $or__5025__auto__$jscomp$499_or__5025__auto____$1$jscomp$85_or__5025__auto____$2$$;
    }
    $or__5025__auto__$jscomp$499_or__5025__auto____$1$jscomp$85_or__5025__auto____$2$$ = datascript.query.context_resolve_val($context$$, $first__72877$$);
    if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$499_or__5025__auto____$1$jscomp$85_or__5025__auto____$2$$)) {
      return $or__5025__auto__$jscomp$499_or__5025__auto____$1$jscomp$85_or__5025__auto____$2$$;
    }
    $or__5025__auto__$jscomp$499_or__5025__auto____$1$jscomp$85_or__5025__auto____$2$$ = datascript.query.resolve_sym($first__72877$$);
    if ($APP.cljs.core.truth_($or__5025__auto__$jscomp$499_or__5025__auto____$1$jscomp$85_or__5025__auto____$2$$)) {
      return $or__5025__auto__$jscomp$499_or__5025__auto____$1$jscomp$85_or__5025__auto____$2$$;
    }
    if (datascript.query.rel_with_attr($context$$, $first__72877$$) == null) {
      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Unknown function '", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$first__72877$$], 0)), " in ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$clause$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4524$query_SLASH_where, $APP.cljs$cst$179$form, 
      $clause$$, $APP.cljs$cst$328$var, $first__72877$$], null));
    }
    return null;
  }();
  $new_rel$jscomp$2_out$$ = datascript.query.rel_prod_by_attrs($context$$, $APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.symbol_QMARK_, $seq__72876__$1$$));
  var $context__$1$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($new_rel$jscomp$2_out$$, 0, null), $production$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($new_rel$jscomp$2_out$$, 1, null);
  $new_rel$jscomp$2_out$$ = $APP.cljs.core.truth_($fun$$) ? function() {
    var $tuple_fn$$ = datascript.query._call_fn($context__$1$$, $production$$, $fun$$, $seq__72876__$1$$), $rels$$ = function() {
      return function $datascript$query$bind_by_fn_$_iter__72881$$($s__72882$$) {
        return new $APP.cljs.core.LazySeq(null, function() {
          for (var $s__72882__$1_s__72882__$2_temp__5825__auto__$$ = $s__72882$$;;) {
            if ($s__72882__$1_s__72882__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__72882__$1_s__72882__$2_temp__5825__auto__$$)) {
              if ($APP.cljs.core.chunked_seq_QMARK_($s__72882__$1_s__72882__$2_temp__5825__auto__$$)) {
                var $JSCompiler_inline_result$jscomp$1568_c__5501__auto__$jscomp$257_val$$ = $APP.cljs.core.chunk_first($s__72882__$1_s__72882__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1568_c__5501__auto__$jscomp$257_val$$), $b__72884_tuple$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
                a: {
                  for (var $i__72883$$ = 0;;) {
                    if ($i__72883$$ < $size__5502__auto__$$) {
                      var $tuple$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1568_c__5501__auto__$jscomp$257_val$$, $i__72883$$), $val$$ = $tuple_fn$$($tuple$$);
                      $val$$ != null && $APP.cljs.core.chunk_append($b__72884_tuple$$, datascript.query.prod_rel.cljs$core$IFn$_invoke$arity$2(new datascript.query.Relation($APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($production$$), new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$tuple$$], null), null, null, null), datascript.query.in__GT_rel($binding$$, $val$$)));
                      $i__72883$$ += 1;
                    } else {
                      $JSCompiler_inline_result$jscomp$1568_c__5501__auto__$jscomp$257_val$$ = !0;
                      break a;
                    }
                  }
                  $JSCompiler_inline_result$jscomp$1568_c__5501__auto__$jscomp$257_val$$ = void 0;
                }
                return $JSCompiler_inline_result$jscomp$1568_c__5501__auto__$jscomp$257_val$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__72884_tuple$$), $datascript$query$bind_by_fn_$_iter__72881$$($APP.cljs.core.chunk_rest($s__72882__$1_s__72882__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__72884_tuple$$), null);
              }
              $b__72884_tuple$$ = $APP.cljs.core.first($s__72882__$1_s__72882__$2_temp__5825__auto__$$);
              $JSCompiler_inline_result$jscomp$1568_c__5501__auto__$jscomp$257_val$$ = $tuple_fn$$($b__72884_tuple$$);
              if ($JSCompiler_inline_result$jscomp$1568_c__5501__auto__$jscomp$257_val$$ != null) {
                return $APP.cljs.core.cons(datascript.query.prod_rel.cljs$core$IFn$_invoke$arity$2(new datascript.query.Relation($APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($production$$), new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$b__72884_tuple$$], null), null, null, null), datascript.query.in__GT_rel($binding$$, $JSCompiler_inline_result$jscomp$1568_c__5501__auto__$jscomp$257_val$$)), $datascript$query$bind_by_fn_$_iter__72881$$($APP.cljs.core.rest($s__72882__$1_s__72882__$2_temp__5825__auto__$$)));
              }
              $s__72882__$1_s__72882__$2_temp__5825__auto__$$ = $APP.cljs.core.rest($s__72882__$1_s__72882__$2_temp__5825__auto__$$);
            } else {
              return null;
            }
          }
        }, null, null);
      }(cljs$cst$4621$tuples.cljs$core$IFn$_invoke$arity$1($production$$));
    }();
    return $APP.cljs.core.empty_QMARK_($rels$$) ? datascript.query.prod_rel.cljs$core$IFn$_invoke$arity$2($production$$, datascript.query.empty_rel($binding$$)) : $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$2(datascript.query.sum_rel, $rels$$);
  }() : datascript.query.prod_rel.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($production$$, cljs$cst$4621$tuples, $APP.cljs.core.PersistentVector.EMPTY), datascript.query.empty_rel($binding$$));
  return $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$4($context__$1$$, cljs$cst$4617$rels, datascript.query.collapse_rels, $new_rel$jscomp$2_out$$);
};
datascript.query.rule_QMARK_ = function($context$$, $clause$$) {
  if ($APP.cljs.core.sequential_QMARK_($clause$$)) {
    var $head$$ = datascript.query.source_QMARK_($APP.cljs.core.first($clause$$)) ? $APP.cljs.core.second($clause$$) : $APP.cljs.core.first($clause$$);
    if ($head$$ instanceof $APP.cljs.core.Symbol) {
      if (datascript.query.free_var_QMARK_($head$$) || $APP.cljs.core.contains_QMARK_(new $APP.cljs.core.PersistentHashSet(null, new $APP.cljs.core.PersistentArrayMap(null, 6, [$APP.cljs$cst$408$and, null, $APP.cljs$cst$946$not, null, cljs$cst$4599$not_join, null, cljs$cst$4600$or_join, null, $APP.cljs$cst$403$or, null, $APP.cljs$cst$312$_, null], null), null), $head$$)) {
        return !1;
      }
      if ($APP.cljs.core.contains_QMARK_($APP.cljs$cst$2061$rules.cljs$core$IFn$_invoke$arity$1($context$$), $head$$)) {
        return !0;
      }
      throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Unknown rule '", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$head$$], 0)), " in ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$clause$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4524$query_SLASH_where, $APP.cljs$cst$179$form, $clause$$], 
      null));
    }
  }
  return !1;
};
datascript.query.rule_seqid = $APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1(0);
datascript.query.expand_rule = function($clause$$, $context$$, $used_args$$) {
  var $seq__72889$$ = $APP.cljs.core.seq($clause$$), $first__72890$$ = $APP.cljs.core.first($seq__72889$$), $seq__72889__$1$$ = $APP.cljs.core.next($seq__72889$$), $seqid$$ = $APP.cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$2(datascript.query.rule_seqid, $APP.cljs.core.inc), $branches$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2061$rules.cljs$core$IFn$_invoke$arity$1($context$$), $first__72890$$);
  return function $datascript$query$expand_rule_$_iter__72891$$($s__72892$$) {
    return new $APP.cljs.core.LazySeq(null, function() {
      for (;;) {
        var $temp__5825__auto__$$ = $APP.cljs.core.seq($s__72892$$);
        if ($temp__5825__auto__$$) {
          var $s__72892__$2$$ = $temp__5825__auto__$$;
          if ($APP.cljs.core.chunked_seq_QMARK_($s__72892__$2$$)) {
            var $c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__72892__$2$$), $size__5502__auto__$$ = $APP.cljs.core.count($c__5501__auto__$$), $b__72894$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
            return function() {
              for (var $i__72893$$ = 0;;) {
                if ($i__72893$$ < $size__5502__auto__$$) {
                  var $branch$$ = $APP.cljs.core._nth($c__5501__auto__$$, $i__72893$$), $vec__72896$$ = $branch$$, $seq__72897$$ = $APP.cljs.core.seq($vec__72896$$), $first__72898$$ = $APP.cljs.core.first($seq__72897$$), $seq__72897__$1$$ = $APP.cljs.core.next($seq__72897$$), $vec__72899$$ = $first__72898$$, $seq__72900$$ = $APP.cljs.core.seq($vec__72899$$), $first__72901$$ = $APP.cljs.core.first($seq__72900$$), $seq__72900__$1$$ = $APP.cljs.core.next($seq__72900$$), $_$$ = $first__72901$$, $rule_args$$ = 
                  $seq__72900__$1$$, $clauses$$ = $seq__72897__$1$$, $replacements$$ = $APP.cljs.core.zipmap($rule_args$$, $seq__72889__$1$$);
                  $APP.cljs.core.chunk_append($b__72894$$, $APP.clojure.walk.postwalk(function($i__72893$$, $vec__72896$$, $seq__72897$$, $first__72898$$, $seq__72897__$1$$, $vec__72899$$, $seq__72900$$, $first__72901$$, $seq__72900__$1$$, $_$$, $rule_args$$, $clauses$$, $replacements$$, $branch$$, $c__5501__auto__$$, $size__5502__auto__$$, $b__72894$$, $s__72892__$2$$, $temp__5825__auto__$$, $vec__72888$$, $seq__72889$$, $first__72890$$, $seq__72889__$1$$, $rule$$, $call_args$$, $seqid$$, $branches$$) {
                    return function($p1__72887_SHARP_$$) {
                      if (datascript.query.free_var_QMARK_($p1__72887_SHARP_$$)) {
                        var $x__66936__auto__$$ = $replacements$$.cljs$core$IFn$_invoke$arity$1 ? $replacements$$.cljs$core$IFn$_invoke$arity$1($p1__72887_SHARP_$$) : $replacements$$.call(null, $p1__72887_SHARP_$$);
                        return $x__66936__auto__$$ == null ? $APP.cljs.core.symbol.cljs$core$IFn$_invoke$arity$1([$APP.cljs.core.name($p1__72887_SHARP_$$), "__auto__", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($seqid$$)].join("")) : $x__66936__auto__$$;
                      }
                      return $p1__72887_SHARP_$$;
                    };
                  }($i__72893$$, $vec__72896$$, $seq__72897$$, $first__72898$$, $seq__72897__$1$$, $vec__72899$$, $seq__72900$$, $first__72901$$, $seq__72900__$1$$, $_$$, $rule_args$$, $clauses$$, $replacements$$, $branch$$, $c__5501__auto__$$, $size__5502__auto__$$, $b__72894$$, $s__72892__$2$$, $temp__5825__auto__$$, $clause$$, $seq__72889$$, $first__72890$$, $seq__72889__$1$$, $first__72890$$, $seq__72889__$1$$, $seqid$$, $branches$$), $clauses$$));
                  $i__72893$$ += 1;
                } else {
                  return !0;
                }
              }
            }() ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__72894$$), $datascript$query$expand_rule_$_iter__72891$$($APP.cljs.core.chunk_rest($s__72892__$2$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__72894$$), null);
          }
          var $branch$$ = $APP.cljs.core.first($s__72892__$2$$), $vec__72903$$ = $branch$$, $seq__72904$$ = $APP.cljs.core.seq($vec__72903$$), $first__72905$$ = $APP.cljs.core.first($seq__72904$$), $seq__72904__$1$$ = $APP.cljs.core.next($seq__72904$$), $vec__72906$$ = $first__72905$$, $seq__72907$$ = $APP.cljs.core.seq($vec__72906$$), $first__72908$$ = $APP.cljs.core.first($seq__72907$$), $seq__72907__$1$$ = $APP.cljs.core.next($seq__72907$$), $_$$ = $first__72908$$, $rule_args$$ = $seq__72907__$1$$, 
          $clauses$$ = $seq__72904__$1$$, $replacements$$ = $APP.cljs.core.zipmap($rule_args$$, $seq__72889__$1$$);
          return $APP.cljs.core.cons($APP.clojure.walk.postwalk(function($vec__72903$$, $seq__72904$$, $first__72905$$, $seq__72904__$1$$, $vec__72906$$, $seq__72907$$, $first__72908$$, $seq__72907__$1$$, $_$$, $rule_args$$, $clauses$$, $replacements$$, $branch$$, $s__72892__$2$$, $temp__5825__auto__$$, $vec__72888$$, $seq__72889$$, $first__72890$$, $seq__72889__$1$$, $rule$$, $call_args$$, $seqid$$, $branches$$) {
            return function($p1__72887_SHARP_$$) {
              if (datascript.query.free_var_QMARK_($p1__72887_SHARP_$$)) {
                var $x__66936__auto__$$ = $replacements$$.cljs$core$IFn$_invoke$arity$1 ? $replacements$$.cljs$core$IFn$_invoke$arity$1($p1__72887_SHARP_$$) : $replacements$$.call(null, $p1__72887_SHARP_$$);
                return $x__66936__auto__$$ == null ? $APP.cljs.core.symbol.cljs$core$IFn$_invoke$arity$1([$APP.cljs.core.name($p1__72887_SHARP_$$), "__auto__", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($seqid$$)].join("")) : $x__66936__auto__$$;
              }
              return $p1__72887_SHARP_$$;
            };
          }($vec__72903$$, $seq__72904$$, $first__72905$$, $seq__72904__$1$$, $vec__72906$$, $seq__72907$$, $first__72908$$, $seq__72907__$1$$, $_$$, $rule_args$$, $clauses$$, $replacements$$, $branch$$, $s__72892__$2$$, $temp__5825__auto__$$, $clause$$, $seq__72889$$, $first__72890$$, $seq__72889__$1$$, $first__72890$$, $seq__72889__$1$$, $seqid$$, $branches$$), $clauses$$), $datascript$query$expand_rule_$_iter__72891$$($APP.cljs.core.rest($s__72892__$2$$)));
        }
        return null;
      }
    }, null, null);
  }($branches$$);
};
datascript.query.remove_pairs = function($pairs$jscomp$10_xs$$, $ys$$) {
  $pairs$jscomp$10_xs$$ = $APP.cljs.core.remove.cljs$core$IFn$_invoke$arity$2(function($p__72910_y$$) {
    var $x$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72910_y$$, 0, null);
    $p__72910_y$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72910_y$$, 1, null);
    return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($x$$, $p__72910_y$$);
  }, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.vector, $pairs$jscomp$10_xs$$, $ys$$));
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.first, $pairs$jscomp$10_xs$$), $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.second, $pairs$jscomp$10_xs$$)], null);
};
datascript.query.rule_gen_guards = function($rule_clause_seq__72916$$, $used_args$$) {
  $rule_clause_seq__72916$$ = $APP.cljs.core.seq($rule_clause_seq__72916$$);
  var $first__72917$$ = $APP.cljs.core.first($rule_clause_seq__72916$$), $call_args$$ = $APP.cljs.core.next($rule_clause_seq__72916$$);
  return function $datascript$query$rule_gen_guards_$_iter__72918$$($s__72919$$) {
    return new $APP.cljs.core.LazySeq(null, function() {
      for (;;) {
        var $s__72919__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__72919$$);
        if ($s__72919__$2_temp__5825__auto__$$) {
          if ($APP.cljs.core.chunked_seq_QMARK_($s__72919__$2_temp__5825__auto__$$)) {
            var $JSCompiler_inline_result$jscomp$1569_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__72919__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1569_c__5501__auto__$$), $b__72921_call_args__$1_prev_args$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
            a: {
              for (var $i__72920$$ = 0;;) {
                if ($i__72920$$ < $size__5502__auto__$$) {
                  var $call_args__$1$jscomp$inline_7008_prev_args$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1569_c__5501__auto__$$, $i__72920$$), $prev_args__$1$jscomp$inline_7009_vec__72922$$ = datascript.query.remove_pairs($call_args$$, $call_args__$1$jscomp$inline_7008_prev_args$$);
                  $call_args__$1$jscomp$inline_7008_prev_args$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($prev_args__$1$jscomp$inline_7009_vec__72922$$, 0, null);
                  $prev_args__$1$jscomp$inline_7009_vec__72922$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($prev_args__$1$jscomp$inline_7009_vec__72922$$, 1, null);
                  $APP.cljs.core.chunk_append($b__72921_call_args__$1_prev_args$$, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$variadic(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4528$_differ_QMARK_], null), $call_args__$1$jscomp$inline_7008_prev_args$$, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$prev_args__$1$jscomp$inline_7009_vec__72922$$], 
                  0))], null));
                  $i__72920$$ += 1;
                } else {
                  $JSCompiler_inline_result$jscomp$1569_c__5501__auto__$$ = !0;
                  break a;
                }
              }
              $JSCompiler_inline_result$jscomp$1569_c__5501__auto__$$ = void 0;
            }
            return $JSCompiler_inline_result$jscomp$1569_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__72921_call_args__$1_prev_args$$), $datascript$query$rule_gen_guards_$_iter__72918$$($APP.cljs.core.chunk_rest($s__72919__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__72921_call_args__$1_prev_args$$), null);
          }
          $b__72921_call_args__$1_prev_args$$ = $APP.cljs.core.first($s__72919__$2_temp__5825__auto__$$);
          $JSCompiler_inline_result$jscomp$1569_c__5501__auto__$$ = datascript.query.remove_pairs($call_args$$, $b__72921_call_args__$1_prev_args$$);
          $b__72921_call_args__$1_prev_args$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_inline_result$jscomp$1569_c__5501__auto__$$, 0, null);
          $JSCompiler_inline_result$jscomp$1569_c__5501__auto__$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($JSCompiler_inline_result$jscomp$1569_c__5501__auto__$$, 1, null);
          return $APP.cljs.core.cons(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$variadic(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4528$_differ_QMARK_], null), $b__72921_call_args__$1_prev_args$$, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$JSCompiler_inline_result$jscomp$1569_c__5501__auto__$$], 0))], null), $datascript$query$rule_gen_guards_$_iter__72918$$($APP.cljs.core.rest($s__72919__$2_temp__5825__auto__$$)));
        }
        return null;
      }
    }, null, null);
  }($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($used_args$$, $first__72917$$));
};
datascript.query.walk_collect = function($form$$, $pred$$) {
  var $res$$ = $APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.PersistentVector.EMPTY);
  $APP.clojure.walk.postwalk(function($p1__72929_SHARP_$$) {
    $APP.cljs.core.truth_($pred$$.cljs$core$IFn$_invoke$arity$1 ? $pred$$.cljs$core$IFn$_invoke$arity$1($p1__72929_SHARP_$$) : $pred$$.call(null, $p1__72929_SHARP_$$)) && $APP.cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$3($res$$, $APP.cljs.core.conj, $p1__72929_SHARP_$$);
    return $p1__72929_SHARP_$$;
  }, $form$$);
  return $APP.cljs.core.deref($res$$);
};
datascript.query.collect_vars = function($clause$$) {
  return $APP.cljs.core.set(datascript.query.walk_collect($clause$$, datascript.query.free_var_QMARK_));
};
datascript.query.split_guards = function($clauses$jscomp$30_pred$$, $guards$$) {
  var $bound_vars$$ = datascript.query.collect_vars($clauses$jscomp$30_pred$$);
  $clauses$jscomp$30_pred$$ = function($p__72930_seq__72935_seq__72935__$1_vec__72934$$) {
    $p__72930_seq__72935_seq__72935__$1_vec__72934$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($p__72930_seq__72935_seq__72935__$1_vec__72934$$, 0, null);
    $p__72930_seq__72935_seq__72935__$1_vec__72934$$ = $APP.cljs.core.seq($p__72930_seq__72935_seq__72935__$1_vec__72934$$);
    $APP.cljs.core.first($p__72930_seq__72935_seq__72935__$1_vec__72934$$);
    $p__72930_seq__72935_seq__72935__$1_vec__72934$$ = $APP.cljs.core.next($p__72930_seq__72935_seq__72935__$1_vec__72934$$);
    return $APP.cljs.core.every_QMARK_($bound_vars$$, $p__72930_seq__72935_seq__72935__$1_vec__72934$$);
  };
  return new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2($clauses$jscomp$30_pred$$, $guards$$), $APP.cljs.core.remove.cljs$core$IFn$_invoke$arity$2($clauses$jscomp$30_pred$$, $guards$$)], null);
};
datascript.query.solve_rule = function($context$$, $G__73231_G__73236_G__73238_G__73240_clause$jscomp$19_context__$1$jscomp$2_tuples$$) {
  for (var $final_attrs$$ = $APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2(datascript.query.free_var_QMARK_, $G__73231_G__73236_G__73238_G__73240_clause$jscomp$19_context__$1$jscomp$2_tuples$$), $final_attrs_map$$ = $APP.cljs.core.zipmap($final_attrs$$, $APP.cljs.core.range.cljs$core$IFn$_invoke$arity$0()), $solve$$ = function($prefix_context$$, $clauses$$) {
    return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(datascript.query._resolve_clause, $prefix_context$$, $clauses$$);
  }, $empty_rels_QMARK_$$ = function($context__$1$$) {
    return $APP.cljs.core.some(function($p1__72938_SHARP_$$) {
      return $APP.cljs.core.empty_QMARK_(cljs$cst$4621$tuples.cljs$core$IFn$_invoke$arity$1($p1__72938_SHARP_$$));
    }, cljs$cst$4617$rels.cljs$core$IFn$_invoke$arity$1($context__$1$$));
  }, $stack$$ = new $APP.cljs.core.List(null, new $APP.cljs.core.PersistentArrayMap(null, 5, [cljs$cst$4626$prefix_clauses, $APP.cljs.core.PersistentVector.EMPTY, cljs$cst$4627$prefix_context, $context$$, $APP.cljs$cst$1632$clauses, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$G__73231_G__73236_G__73238_G__73240_clause$jscomp$19_context__$1$jscomp$2_tuples$$], null), cljs$cst$4628$used_args, $APP.cljs.core.PersistentArrayMap.EMPTY, cljs$cst$4629$pending_guards, 
  $APP.cljs.core.PersistentArrayMap.EMPTY], null), null, 1, null), $rel$$ = new datascript.query.Relation($final_attrs_map$$, $APP.cljs.core.PersistentVector.EMPTY, null, null, null);;) {
    var $temp__5827__auto__$$ = $APP.cljs.core.first($stack$$);
    if ($temp__5827__auto__$$ == null) {
      return $rel$$;
    }
    var $frame$$ = $temp__5827__auto__$$, $vec__72960$$ = $APP.cljs.core.split_with(function($stack$$, $rel$$, $frame$$, $temp__5827__auto__$$, $final_attrs$$, $final_attrs_map$$, $solve$$, $empty_rels_QMARK_$$) {
      return function($p1__72939_SHARP_$$) {
        return !datascript.query.rule_QMARK_($context$$, $p1__72939_SHARP_$$);
      };
    }($stack$$, $rel$$, $frame$$, $temp__5827__auto__$$, $final_attrs$$, $final_attrs_map$$, $solve$$, $empty_rels_QMARK_$$), $APP.cljs$cst$1632$clauses.cljs$core$IFn$_invoke$arity$1($frame$$)), $clauses$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__72960$$, 0, null), $vec__72963$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__72960$$, 1, null), $seq__72964$$ = $APP.cljs.core.seq($vec__72963$$), $first__72965$$ = $APP.cljs.core.first($seq__72964$$), $seq__72964__$1$$ = $APP.cljs.core.next($seq__72964$$), 
    $rule_clause$$ = $first__72965$$, $next_clauses$$ = $seq__72964__$1$$;
    if ($rule_clause$$ == null) {
      $G__73231_G__73236_G__73238_G__73240_clause$jscomp$19_context__$1$jscomp$2_tuples$$ = $solve$$(cljs$cst$4627$prefix_context.cljs$core$IFn$_invoke$arity$1($frame$$), $clauses$$);
      $G__73231_G__73236_G__73238_G__73240_clause$jscomp$19_context__$1$jscomp$2_tuples$$ = datascript.util.distinct_by($APP.cljs.core.vec, datascript.query._collect.cljs$core$IFn$_invoke$arity$2 ? datascript.query._collect.cljs$core$IFn$_invoke$arity$2($G__73231_G__73236_G__73238_G__73240_clause$jscomp$19_context__$1$jscomp$2_tuples$$, $final_attrs$$) : datascript.query._collect.call(null, $G__73231_G__73236_G__73238_G__73240_clause$jscomp$19_context__$1$jscomp$2_tuples$$, $final_attrs$$));
      var $G__73232_G__73237_G__73239_G__73241_new_rel$$ = new datascript.query.Relation($final_attrs_map$$, $G__73231_G__73236_G__73238_G__73240_clause$jscomp$19_context__$1$jscomp$2_tuples$$, null, null, null);
      $G__73231_G__73236_G__73238_G__73240_clause$jscomp$19_context__$1$jscomp$2_tuples$$ = $APP.cljs.core.next($stack$$);
      $G__73232_G__73237_G__73239_G__73241_new_rel$$ = datascript.query.sum_rel($rel$$, $G__73232_G__73237_G__73239_G__73241_new_rel$$);
      $stack$$ = $G__73231_G__73236_G__73238_G__73240_clause$jscomp$19_context__$1$jscomp$2_tuples$$;
      $rel$$ = $G__73232_G__73237_G__73239_G__73241_new_rel$$;
    } else {
      var $vec__72966$$ = $rule_clause$$, $seq__72967$$ = $APP.cljs.core.seq($vec__72966$$), $first__72968$$ = $APP.cljs.core.first($seq__72967$$), $seq__72967__$1$$ = $APP.cljs.core.next($seq__72967$$), $rule$$ = $first__72968$$, $call_args$$ = $seq__72967__$1$$, $guards$$ = datascript.query.rule_gen_guards($rule_clause$$, cljs$cst$4628$used_args.cljs$core$IFn$_invoke$arity$1($frame$$)), $vec__72969$$ = datascript.query.split_guards($APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(cljs$cst$4626$prefix_clauses.cljs$core$IFn$_invoke$arity$1($frame$$), 
      $clauses$$), $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($guards$$, cljs$cst$4629$pending_guards.cljs$core$IFn$_invoke$arity$1($frame$$))), $active_gs$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__72969$$, 0, null), $pending_gs$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($vec__72969$$, 1, null);
      if ($APP.cljs.core.truth_($APP.cljs.core.some(function($stack$$, $rel$$, $vec__72966$$, $seq__72967$$, $first__72968$$, $seq__72967__$1$$, $rule$$, $call_args$$, $guards$$, $vec__72969$$, $active_gs$$, $pending_gs$$, $vec__72960$$, $clauses$$, $vec__72963$$, $seq__72964$$, $first__72965$$, $seq__72964__$1$$, $rule_clause$$, $next_clauses$$, $frame$$, $temp__5827__auto__$$, $final_attrs$$, $final_attrs_map$$, $solve$$, $empty_rels_QMARK_$$) {
        return function($p1__72940_SHARP_$$) {
          return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($p1__72940_SHARP_$$, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.list(cljs$cst$4528$_differ_QMARK_)], null));
        };
      }($stack$$, $rel$$, $vec__72966$$, $seq__72967$$, $first__72968$$, $seq__72967__$1$$, $rule$$, $call_args$$, $guards$$, $vec__72969$$, $active_gs$$, $pending_gs$$, $vec__72960$$, $clauses$$, $vec__72963$$, $seq__72964$$, $first__72965$$, $seq__72964__$1$$, $rule_clause$$, $next_clauses$$, $frame$$, $temp__5827__auto__$$, $final_attrs$$, $final_attrs_map$$, $solve$$, $empty_rels_QMARK_$$), $active_gs$$))) {
        $G__73231_G__73236_G__73238_G__73240_clause$jscomp$19_context__$1$jscomp$2_tuples$$ = $APP.cljs.core.next($stack$$), $G__73232_G__73237_G__73239_G__73241_new_rel$$ = $rel$$, $stack$$ = $G__73231_G__73236_G__73238_G__73240_clause$jscomp$19_context__$1$jscomp$2_tuples$$, $rel$$ = $G__73232_G__73237_G__73239_G__73241_new_rel$$;
      } else {
        var $prefix_clauses$$ = $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($clauses$$, $active_gs$$), $prefix_context$$ = $solve$$(cljs$cst$4627$prefix_context.cljs$core$IFn$_invoke$arity$1($frame$$), $prefix_clauses$$);
        if ($APP.cljs.core.truth_($empty_rels_QMARK_$$($prefix_context$$))) {
          $G__73231_G__73236_G__73238_G__73240_clause$jscomp$19_context__$1$jscomp$2_tuples$$ = $APP.cljs.core.next($stack$$), $G__73232_G__73237_G__73239_G__73241_new_rel$$ = $rel$$, $stack$$ = $G__73231_G__73236_G__73238_G__73240_clause$jscomp$19_context__$1$jscomp$2_tuples$$, $rel$$ = $G__73232_G__73237_G__73239_G__73241_new_rel$$;
        } else {
          var $used_args$$ = $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(cljs$cst$4628$used_args.cljs$core$IFn$_invoke$arity$1($frame$$), $rule$$, $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.get.cljs$core$IFn$_invoke$arity$3(cljs$cst$4628$used_args.cljs$core$IFn$_invoke$arity$1($frame$$), $rule$$, $APP.cljs.core.PersistentVector.EMPTY), $call_args$$)), $branches$$ = datascript.query.expand_rule($rule_clause$$, $context$$, $used_args$$);
          $G__73231_G__73236_G__73238_G__73240_clause$jscomp$19_context__$1$jscomp$2_tuples$$ = $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2(function() {
            return function($stack$$, $rel$$, $used_args$$, $branches$$, $prefix_clauses$$, $prefix_context$$, $vec__72966$$, $seq__72967$$, $first__72968$$, $seq__72967__$1$$, $rule$$, $call_args$$, $guards$$, $vec__72969$$, $active_gs$$, $pending_gs$$, $vec__72960$$, $clauses$$, $vec__72963$$, $seq__72964$$, $first__72965$$, $seq__72964__$1$$, $rule_clause$$, $next_clauses$$, $frame$$, $temp__5827__auto__$$, $final_attrs$$, $final_attrs_map$$, $solve$$, $empty_rels_QMARK_$$) {
              return function $datascript$query$solve_rule_$_iter__72973$$($s__72974$$) {
                return new $APP.cljs.core.LazySeq(null, function($stack$$, $rel$$, $used_args$$, $branches$$, $prefix_clauses$$, $prefix_context$$, $vec__72966$$, $seq__72967$$, $first__72968$$, $seq__72967__$1$$, $rule$$, $call_args$$, $guards$$, $vec__72969$$, $active_gs$$, $pending_gs$$, $vec__72960$$, $clauses$$, $vec__72963$$, $seq__72964$$, $first__72965$$, $seq__72964__$1$$, $rule_clause$$, $next_clauses$$, $frame$$, $temp__5827__auto__$$, $final_attrs$$, $final_attrs_map$$, $solve$$, $empty_rels_QMARK_$$) {
                  return function() {
                    for (;;) {
                      var $s__72974__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__72974$$);
                      if ($s__72974__$2_temp__5825__auto__$$) {
                        if ($APP.cljs.core.chunked_seq_QMARK_($s__72974__$2_temp__5825__auto__$$)) {
                          var $JSCompiler_inline_result$jscomp$1570_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__72974__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1570_c__5501__auto__$$), $b__72976_branch$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
                          a: {
                            for (var $i__72975$$ = 0;;) {
                              if ($i__72975$$ < $size__5502__auto__$$) {
                                var $branch$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1570_c__5501__auto__$$, $i__72975$$);
                                $APP.cljs.core.chunk_append($b__72976_branch$$, new $APP.cljs.core.PersistentArrayMap(null, 5, [cljs$cst$4626$prefix_clauses, $prefix_clauses$$, cljs$cst$4627$prefix_context, $prefix_context$$, $APP.cljs$cst$1632$clauses, datascript.util.concatv.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$branch$$, $next_clauses$$], 0)), cljs$cst$4628$used_args, $used_args$$, cljs$cst$4629$pending_guards, $pending_gs$$], null));
                                $i__72975$$ += 1;
                              } else {
                                $JSCompiler_inline_result$jscomp$1570_c__5501__auto__$$ = !0;
                                break a;
                              }
                            }
                            $JSCompiler_inline_result$jscomp$1570_c__5501__auto__$$ = void 0;
                          }
                          return $JSCompiler_inline_result$jscomp$1570_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__72976_branch$$), $datascript$query$solve_rule_$_iter__72973$$($APP.cljs.core.chunk_rest($s__72974__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__72976_branch$$), null);
                        }
                        $b__72976_branch$$ = $APP.cljs.core.first($s__72974__$2_temp__5825__auto__$$);
                        return $APP.cljs.core.cons(new $APP.cljs.core.PersistentArrayMap(null, 5, [cljs$cst$4626$prefix_clauses, $prefix_clauses$$, cljs$cst$4627$prefix_context, $prefix_context$$, $APP.cljs$cst$1632$clauses, datascript.util.concatv.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$b__72976_branch$$, $next_clauses$$], 0)), cljs$cst$4628$used_args, $used_args$$, cljs$cst$4629$pending_guards, $pending_gs$$], null), $datascript$query$solve_rule_$_iter__72973$$($APP.cljs.core.rest($s__72974__$2_temp__5825__auto__$$)));
                      }
                      return null;
                    }
                  };
                }($stack$$, $rel$$, $used_args$$, $branches$$, $prefix_clauses$$, $prefix_context$$, $vec__72966$$, $seq__72967$$, $first__72968$$, $seq__72967__$1$$, $rule$$, $call_args$$, $guards$$, $vec__72969$$, $active_gs$$, $pending_gs$$, $vec__72960$$, $clauses$$, $vec__72963$$, $seq__72964$$, $first__72965$$, $seq__72964__$1$$, $rule_clause$$, $next_clauses$$, $frame$$, $temp__5827__auto__$$, $final_attrs$$, $final_attrs_map$$, $solve$$, $empty_rels_QMARK_$$), null, null);
              };
            }($stack$$, $rel$$, $used_args$$, $branches$$, $prefix_clauses$$, $prefix_context$$, $vec__72966$$, $seq__72967$$, $first__72968$$, $seq__72967__$1$$, $rule$$, $call_args$$, $guards$$, $vec__72969$$, $active_gs$$, $pending_gs$$, $vec__72960$$, $clauses$$, $vec__72963$$, $seq__72964$$, $first__72965$$, $seq__72964__$1$$, $rule_clause$$, $next_clauses$$, $frame$$, $temp__5827__auto__$$, $final_attrs$$, $final_attrs_map$$, $solve$$, $empty_rels_QMARK_$$)($branches$$);
          }(), $APP.cljs.core.next($stack$$));
          $G__73232_G__73237_G__73239_G__73241_new_rel$$ = $rel$$;
          $stack$$ = $G__73231_G__73236_G__73238_G__73240_clause$jscomp$19_context__$1$jscomp$2_tuples$$;
          $rel$$ = $G__73232_G__73237_G__73239_G__73241_new_rel$$;
        }
      }
    }
  }
};
datascript.query.dynamic_lookup_attrs = function($source$$, $pattern$jscomp$69_tx$$) {
  var $G__72981__$1_G__72981__$2_e$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($pattern$jscomp$69_tx$$, 0, null), $a$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($pattern$jscomp$69_tx$$, 1, null), $v$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($pattern$jscomp$69_tx$$, 2, null);
  $pattern$jscomp$69_tx$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($pattern$jscomp$69_tx$$, 3, null);
  var $G__72981$$ = $APP.cljs.core.PersistentHashSet.EMPTY;
  $G__72981__$1_G__72981__$2_e$$ = datascript.query.free_var_QMARK_($G__72981__$1_G__72981__$2_e$$) ? $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($G__72981$$, $G__72981__$1_G__72981__$2_e$$) : $G__72981$$;
  $G__72981__$1_G__72981__$2_e$$ = datascript.query.free_var_QMARK_($pattern$jscomp$69_tx$$) ? $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($G__72981__$1_G__72981__$2_e$$, $pattern$jscomp$69_tx$$) : $G__72981__$1_G__72981__$2_e$$;
  return datascript.query.free_var_QMARK_($v$$) && !datascript.query.free_var_QMARK_($a$$) && datascript.db.ref_QMARK_($source$$, $a$$) ? $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($G__72981__$1_G__72981__$2_e$$, $v$$) : $G__72981__$1_G__72981__$2_e$$;
};
datascript.query.limit_rel = function($rel$$, $temp__5829__auto__$jscomp$15_vars$$) {
  $temp__5829__auto__$jscomp$15_vars$$ = $APP.cljs.core.not_empty($APP.cljs.core.select_keys($APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($rel$$), $temp__5829__auto__$jscomp$15_vars$$));
  return $temp__5829__auto__$jscomp$15_vars$$ == null ? null : $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($rel$$, $APP.cljs$cst$2743$attrs, $temp__5829__auto__$jscomp$15_vars$$);
};
datascript.query.limit_context = function($context$$, $vars$$) {
  return $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($context$$, cljs$cst$4617$rels, $APP.cljs.core.keep.cljs$core$IFn$_invoke$arity$2(function($p1__72982_SHARP_$$) {
    return datascript.query.limit_rel($p1__72982_SHARP_$$, $vars$$);
  }, cljs$cst$4617$rels.cljs$core$IFn$_invoke$arity$1($context$$)));
};
datascript.query.bound_vars = function($context$$) {
  return $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.PersistentHashSet.EMPTY, $APP.cljs.core.mapcat.cljs$core$IFn$_invoke$arity$variadic(function($p1__72984_SHARP_$$) {
    return $APP.cljs.core.keys($APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($p1__72984_SHARP_$$));
  }, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$4617$rels.cljs$core$IFn$_invoke$arity$1($context$$)], 0)));
};
datascript.query.check_bound = function($bound$jscomp$10_missing$$, $vars$$, $form$$) {
  if ($APP.clojure.set.subset_QMARK_($vars$$, $bound$jscomp$10_missing$$)) {
    return null;
  }
  $bound$jscomp$10_missing$$ = $APP.clojure.set.difference.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.set($vars$$), $bound$jscomp$10_missing$$);
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Insufficient bindings: ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$bound$jscomp$10_missing$$], 0)), " not bound in ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$form$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4524$query_SLASH_where, 
  $APP.cljs$cst$179$form, $form$$, $APP.cljs$cst$2382$vars, $bound$jscomp$10_missing$$], null));
};
datascript.query.check_free_same = function($bound$$, $branches$jscomp$13_free$$, $form$$) {
  $branches$jscomp$13_free$$ = $APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2(function($p1__72985_SHARP_$$) {
    return $APP.clojure.set.difference.cljs$core$IFn$_invoke$arity$2(datascript.query.collect_vars($p1__72985_SHARP_$$), $bound$$);
  }, $branches$jscomp$13_free$$);
  if ($APP.cljs.core.truth_($APP.cljs.core.apply.cljs$core$IFn$_invoke$arity$2($APP.cljs.core._EQ_, $branches$jscomp$13_free$$))) {
    return null;
  }
  throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["All clauses in 'or' must use same set of free vars, had ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$branches$jscomp$13_free$$], 0)), " in ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$form$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4524$query_SLASH_where, 
  $APP.cljs$cst$179$form, $form$$, $APP.cljs$cst$2382$vars, $branches$jscomp$13_free$$], null));
};
datascript.query.check_free_subset = function($bound$$, $vars$$, $G__73255_branch$jscomp$6_branches$jscomp$14_temp__5825__auto__$$) {
  for (var $free$$ = $APP.cljs.core.set($APP.cljs.core.remove.cljs$core$IFn$_invoke$arity$2($bound$$, $vars$$)), $G__73254_missing_73249_missing_73259_seq__72987_seq__72987__$1$$ = $APP.cljs.core.seq($G__73255_branch$jscomp$6_branches$jscomp$14_temp__5825__auto__$$), $c__5548__auto__$$ = null, $G__73256_count__72989$$ = 0, $i__72990$$ = 0;;) {
    if ($i__72990$$ < $G__73256_count__72989$$) {
      $G__73255_branch$jscomp$6_branches$jscomp$14_temp__5825__auto__$$ = $c__5548__auto__$$.cljs$core$IIndexed$_nth$arity$2(null, $i__72990$$);
      var $temp__5829__auto___73248$$ = $APP.cljs.core.not_empty($APP.clojure.set.difference.cljs$core$IFn$_invoke$arity$2($free$$, datascript.query.collect_vars($G__73255_branch$jscomp$6_branches$jscomp$14_temp__5825__auto__$$)));
      if ($temp__5829__auto___73248$$ != null) {
        throw $G__73254_missing_73249_missing_73259_seq__72987_seq__72987__$1$$ = $temp__5829__auto___73248$$, $APP.cljs.core.prn.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__73255_branch$jscomp$6_branches$jscomp$14_temp__5825__auto__$$, $bound$$, $vars$$, $free$$], 0)), $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["All clauses in 'or' must use same set of free vars, had ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__73254_missing_73249_missing_73259_seq__72987_seq__72987__$1$$], 
        0)), " not bound in ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__73255_branch$jscomp$6_branches$jscomp$14_temp__5825__auto__$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4524$query_SLASH_where, $APP.cljs$cst$179$form, $G__73255_branch$jscomp$6_branches$jscomp$14_temp__5825__auto__$$, $APP.cljs$cst$2382$vars, $G__73254_missing_73249_missing_73259_seq__72987_seq__72987__$1$$], 
        null));
      }
      $i__72990$$ += 1;
    } else {
      if ($G__73255_branch$jscomp$6_branches$jscomp$14_temp__5825__auto__$$ = $APP.cljs.core.seq($G__73254_missing_73249_missing_73259_seq__72987_seq__72987__$1$$)) {
        $G__73254_missing_73249_missing_73259_seq__72987_seq__72987__$1$$ = $G__73255_branch$jscomp$6_branches$jscomp$14_temp__5825__auto__$$;
        if ($APP.cljs.core.chunked_seq_QMARK_($G__73254_missing_73249_missing_73259_seq__72987_seq__72987__$1$$)) {
          $c__5548__auto__$$ = $APP.cljs.core.chunk_first($G__73254_missing_73249_missing_73259_seq__72987_seq__72987__$1$$), $G__73254_missing_73249_missing_73259_seq__72987_seq__72987__$1$$ = $APP.cljs.core.chunk_rest($G__73254_missing_73249_missing_73259_seq__72987_seq__72987__$1$$), $G__73255_branch$jscomp$6_branches$jscomp$14_temp__5825__auto__$$ = $c__5548__auto__$$, $G__73256_count__72989$$ = $APP.cljs.core.count($c__5548__auto__$$), $c__5548__auto__$$ = $G__73255_branch$jscomp$6_branches$jscomp$14_temp__5825__auto__$$;
        } else {
          $G__73255_branch$jscomp$6_branches$jscomp$14_temp__5825__auto__$$ = $APP.cljs.core.first($G__73254_missing_73249_missing_73259_seq__72987_seq__72987__$1$$);
          $c__5548__auto__$$ = $APP.cljs.core.not_empty($APP.clojure.set.difference.cljs$core$IFn$_invoke$arity$2($free$$, datascript.query.collect_vars($G__73255_branch$jscomp$6_branches$jscomp$14_temp__5825__auto__$$)));
          if ($c__5548__auto__$$ != null) {
            throw $G__73254_missing_73249_missing_73259_seq__72987_seq__72987__$1$$ = $c__5548__auto__$$, $APP.cljs.core.prn.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__73255_branch$jscomp$6_branches$jscomp$14_temp__5825__auto__$$, $bound$$, $vars$$, $free$$], 0)), $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["All clauses in 'or' must use same set of free vars, had ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__73254_missing_73249_missing_73259_seq__72987_seq__72987__$1$$], 
            0)), " not bound in ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__73255_branch$jscomp$6_branches$jscomp$14_temp__5825__auto__$$], 0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 3, [$APP.cljs$cst$1404$error, cljs$cst$4524$query_SLASH_where, $APP.cljs$cst$179$form, $G__73255_branch$jscomp$6_branches$jscomp$14_temp__5825__auto__$$, $APP.cljs$cst$2382$vars, $G__73254_missing_73249_missing_73259_seq__72987_seq__72987__$1$$], 
            null));
          }
          $G__73254_missing_73249_missing_73259_seq__72987_seq__72987__$1$$ = $APP.cljs.core.next($G__73254_missing_73249_missing_73259_seq__72987_seq__72987__$1$$);
          $c__5548__auto__$$ = null;
          $G__73256_count__72989$$ = 0;
        }
        $i__72990$$ = 0;
      } else {
        return null;
      }
    }
  }
};
datascript.query._resolve_clause = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return datascript.query._resolve_clause.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return datascript.query._resolve_clause.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.query._resolve_clause.cljs$core$IFn$_invoke$arity$2 = function($context$$, $clause$$) {
  return datascript.query._resolve_clause.cljs$core$IFn$_invoke$arity$3($context$$, $clause$$, $clause$$);
};
datascript.query._resolve_clause.cljs$core$IFn$_invoke$arity$3 = function($G__73270_context$$, $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$, $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$) {
  for (;;) {
    var $pred__72999$$ = datascript.query.looks_like_QMARK_, $expr__73000$$ = $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$;
    if ($APP.cljs.core.truth_(function() {
      var $G__73002$$ = new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.symbol_QMARK_, $APP.cljs$cst$650$_STAR_], null)], null), $G__73003$$ = $expr__73000$$;
      return $pred__72999$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72999$$.cljs$core$IFn$_invoke$arity$2($G__73002$$, $G__73003$$) : $pred__72999$$.call(null, $G__73002$$, $G__73003$$);
    }())) {
      return datascript.query.check_bound(datascript.query.bound_vars($G__73270_context$$), $APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2(datascript.query.free_var_QMARK_, $APP.cljs.core.nfirst($clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$)), $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$), datascript.query.filter_by_pred($G__73270_context$$, $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$);
    }
    if ($APP.cljs.core.truth_(function() {
      var $G__73004$$ = new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.symbol_QMARK_, $APP.cljs$cst$650$_STAR_], null), $APP.cljs$cst$312$_], null), $G__73005$$ = $expr__73000$$;
      return $pred__72999$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72999$$.cljs$core$IFn$_invoke$arity$2($G__73004$$, $G__73005$$) : $pred__72999$$.call(null, $G__73004$$, $G__73005$$);
    }())) {
      return datascript.query.check_bound(datascript.query.bound_vars($G__73270_context$$), $APP.cljs.core.filter.cljs$core$IFn$_invoke$arity$2(datascript.query.free_var_QMARK_, $APP.cljs.core.nfirst($clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$)), $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$), datascript.query.bind_by_fn($G__73270_context$$, $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$);
    }
    if ($APP.cljs.core.truth_(function() {
      var $G__73006$$ = new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [datascript.query.source_QMARK_, $APP.cljs$cst$650$_STAR_], null), $G__73007$$ = $expr__73000$$;
      return $pred__72999$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72999$$.cljs$core$IFn$_invoke$arity$2($G__73006$$, $G__73007$$) : $pred__72999$$.call(null, $G__73006$$, $G__73007$$);
    }())) {
      var $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$ = $APP.cljs.core.seq($clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$);
      $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$ = $APP.cljs.core.first($G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$);
      $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$ = $APP.cljs.core.next($G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$);
      var $_STAR_implicit_source_STAR__orig_val__73011_branches$$ = datascript.query._STAR_implicit_source_STAR_;
      $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2403$sources.cljs$core$IFn$_invoke$arity$1($G__73270_context$$), $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$);
      datascript.query._STAR_implicit_source_STAR_ = $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$;
      try {
        return datascript.query._resolve_clause.cljs$core$IFn$_invoke$arity$3($G__73270_context$$, $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$, $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$);
      } finally {
        datascript.query._STAR_implicit_source_STAR_ = $_STAR_implicit_source_STAR__orig_val__73011_branches$$;
      }
    } else {
      if ($APP.cljs.core.truth_(function() {
        var $G__73013$$ = new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$403$or, $APP.cljs$cst$650$_STAR_], null), $G__73014$$ = $expr__73000$$;
        return $pred__72999$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72999$$.cljs$core$IFn$_invoke$arity$2($G__73013$$, $G__73014$$) : $pred__72999$$.call(null, $G__73013$$, $G__73014$$);
      }())) {
        var $first__73022__$1_seq__73024_seq__73024__$1_vars$$ = $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$, $join_context_seq__73016$$ = $APP.cljs.core.seq($first__73022__$1_seq__73024_seq__73024__$1_vars$$), $first__73017_vec__73028$$ = $APP.cljs.core.first($join_context_seq__73016$$), $seq__73016__$1_seq__73029$$ = $APP.cljs.core.next($join_context_seq__73016$$);
        $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$ = $first__73017_vec__73028$$;
        $_STAR_implicit_source_STAR__orig_val__73011_branches$$ = $seq__73016__$1_seq__73029$$;
        var $___$1$$ = datascript.query.check_free_same(datascript.query.bound_vars($G__73270_context$$), $_STAR_implicit_source_STAR__orig_val__73011_branches$$, $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$), $contexts$$ = $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(function($context$$, $clause$$, $orig_clause$$, $vec__73015$$, $seq__73016$$, $first__73017$$, $seq__73016__$1$$, $_$$, $branches$$, $___$1$$, $pred__72999$$, $expr__73000$$) {
          return function($p1__72993_SHARP_$$) {
            return datascript.query.resolve_clause.cljs$core$IFn$_invoke$arity$2 ? datascript.query.resolve_clause.cljs$core$IFn$_invoke$arity$2($context$$, $p1__72993_SHARP_$$) : datascript.query.resolve_clause.call(null, $context$$, $p1__72993_SHARP_$$);
          };
        }($G__73270_context$$, $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$, $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$, $first__73022__$1_seq__73024_seq__73024__$1_vars$$, $join_context_seq__73016$$, $first__73017_vec__73028$$, $seq__73016__$1_seq__73029$$, $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$, 
        $_STAR_implicit_source_STAR__orig_val__73011_branches$$, $___$1$$, $pred__72999$$, $expr__73000$$), $_STAR_implicit_source_STAR__orig_val__73011_branches$$);
        $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$ = $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(function($context$$, $clause$$, $orig_clause$$, $vec__73015$$, $seq__73016$$, $first__73017$$, $seq__73016__$1$$, $_$$, $branches$$, $___$1$$, $contexts$$, $pred__72999$$, $expr__73000$$) {
          return function($p1__72994_SHARP_$$) {
            return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$2(datascript.query.hash_join, cljs$cst$4617$rels.cljs$core$IFn$_invoke$arity$1($p1__72994_SHARP_$$));
          };
        }($G__73270_context$$, $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$, $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$, $first__73022__$1_seq__73024_seq__73024__$1_vars$$, $join_context_seq__73016$$, $first__73017_vec__73028$$, $seq__73016__$1_seq__73029$$, $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$, 
        $_STAR_implicit_source_STAR__orig_val__73011_branches$$, $___$1$$, $contexts$$, $pred__72999$$, $expr__73000$$), $contexts$$);
        return $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.first($contexts$$), cljs$cst$4617$rels, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$2(datascript.query.sum_rel, $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$)], null));
      }
      if ($APP.cljs.core.truth_(function() {
        var $G__73018$$ = new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4600$or_join, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$650$_STAR_], null), $APP.cljs$cst$650$_STAR_], null), $APP.cljs$cst$650$_STAR_], null), $G__73019$$ = $expr__73000$$;
        return $pred__72999$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72999$$.cljs$core$IFn$_invoke$arity$2($G__73018$$, $G__73019$$) : $pred__72999$$.call(null, $G__73018$$, $G__73019$$);
      }())) {
        $_STAR_implicit_source_STAR__orig_val__73011_branches$$ = $APP.cljs.core.seq($clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$);
        $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$ = $APP.cljs.core.first($_STAR_implicit_source_STAR__orig_val__73011_branches$$);
        $_STAR_implicit_source_STAR__orig_val__73011_branches$$ = $APP.cljs.core.next($_STAR_implicit_source_STAR__orig_val__73011_branches$$);
        $first__73022__$1_seq__73024_seq__73024__$1_vars$$ = $APP.cljs.core.first($_STAR_implicit_source_STAR__orig_val__73011_branches$$);
        $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$ = $APP.cljs.core.next($_STAR_implicit_source_STAR__orig_val__73011_branches$$);
        $first__73022__$1_seq__73024_seq__73024__$1_vars$$ = $APP.cljs.core.seq($first__73022__$1_seq__73024_seq__73024__$1_vars$$);
        $_STAR_implicit_source_STAR__orig_val__73011_branches$$ = $APP.cljs.core.first($first__73022__$1_seq__73024_seq__73024__$1_vars$$);
        $first__73022__$1_seq__73024_seq__73024__$1_vars$$ = $APP.cljs.core.next($first__73022__$1_seq__73024_seq__73024__$1_vars$$);
        $___$1$$ = $_STAR_implicit_source_STAR__orig_val__73011_branches$$;
        $_STAR_implicit_source_STAR__orig_val__73011_branches$$ = $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$;
        $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$ = datascript.query.bound_vars($G__73270_context$$);
        datascript.query.check_bound($G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$, $___$1$$, $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$);
        datascript.query.check_free_subset($G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$, $first__73022__$1_seq__73024_seq__73024__$1_vars$$, $_STAR_implicit_source_STAR__orig_val__73011_branches$$);
        $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$ = $APP.cljs.core.list_STAR_.cljs$core$IFn$_invoke$arity$3(cljs$cst$4600$or_join, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($___$1$$, $first__73022__$1_seq__73024_seq__73024__$1_vars$$), $_STAR_implicit_source_STAR__orig_val__73011_branches$$);
        $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$ = $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$;
        $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$ = $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$;
        $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$ = $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$;
        continue;
      } else {
        if ($APP.cljs.core.truth_(function() {
          var $G__73026$$ = new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4600$or_join, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$650$_STAR_], null), $APP.cljs$cst$650$_STAR_], null), $G__73027$$ = $expr__73000$$;
          return $pred__72999$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72999$$.cljs$core$IFn$_invoke$arity$2($G__73026$$, $G__73027$$) : $pred__72999$$.call(null, $G__73026$$, $G__73027$$);
        }())) {
          $first__73017_vec__73028$$ = $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$;
          $seq__73016__$1_seq__73029$$ = $APP.cljs.core.seq($first__73017_vec__73028$$);
          var $first__73030$$ = $APP.cljs.core.first($seq__73016__$1_seq__73029$$), $seq__73029__$1$$ = $APP.cljs.core.next($seq__73016__$1_seq__73029$$);
          $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$ = $first__73030$$;
          var $first__73030__$1$$ = $APP.cljs.core.first($seq__73029__$1$$), $seq__73029__$2$$ = $APP.cljs.core.next($seq__73029__$1$$);
          $first__73022__$1_seq__73024_seq__73024__$1_vars$$ = $first__73030__$1$$;
          $_STAR_implicit_source_STAR__orig_val__73011_branches$$ = $seq__73029__$2$$;
          var $vars__$1$$ = $APP.cljs.core.set($first__73022__$1_seq__73024_seq__73024__$1_vars$$);
          $___$1$$ = datascript.query.check_free_subset(datascript.query.bound_vars($G__73270_context$$), $vars__$1$$, $_STAR_implicit_source_STAR__orig_val__73011_branches$$);
          $join_context_seq__73016$$ = datascript.query.limit_context($G__73270_context$$, $vars__$1$$);
          $contexts$$ = $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(function($context$$, $clause$$, $orig_clause$$, $vec__73028$$, $seq__73029$$, $first__73030$$, $seq__73029__$1$$, $_$$, $first__73030__$1$$, $seq__73029__$2$$, $vars$$, $branches$$, $vars__$1$$, $___$1$$, $join_context$$, $pred__72999$$, $expr__73000$$) {
            return function($p1__72995_SHARP_$$) {
              return datascript.query.limit_context(datascript.query.resolve_clause.cljs$core$IFn$_invoke$arity$2 ? datascript.query.resolve_clause.cljs$core$IFn$_invoke$arity$2($join_context$$, $p1__72995_SHARP_$$) : datascript.query.resolve_clause.call(null, $join_context$$, $p1__72995_SHARP_$$), $vars__$1$$);
            };
          }($G__73270_context$$, $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$, $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$, $first__73017_vec__73028$$, $seq__73016__$1_seq__73029$$, $first__73030$$, $seq__73029__$1$$, $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$, 
          $first__73030__$1$$, $seq__73029__$2$$, $first__73022__$1_seq__73024_seq__73024__$1_vars$$, $_STAR_implicit_source_STAR__orig_val__73011_branches$$, $vars__$1$$, $___$1$$, $join_context_seq__73016$$, $pred__72999$$, $expr__73000$$), $_STAR_implicit_source_STAR__orig_val__73011_branches$$);
          $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$ = $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(function($context$$, $clause$$, $orig_clause$$, $vec__73028$$, $seq__73029$$, $first__73030$$, $seq__73029__$1$$, $_$$, $first__73030__$1$$, $seq__73029__$2$$, $vars$$, $branches$$, $vars__$1$$, $___$1$$, $join_context$$, $contexts$$, $pred__72999$$, $expr__73000$$) {
            return function($p1__72996_SHARP_$$) {
              return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$2(datascript.query.hash_join, cljs$cst$4617$rels.cljs$core$IFn$_invoke$arity$1($p1__72996_SHARP_$$));
            };
          }($G__73270_context$$, $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$, $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$, $first__73017_vec__73028$$, $seq__73016__$1_seq__73029$$, $first__73030$$, $seq__73029__$1$$, $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$, 
          $first__73030__$1$$, $seq__73029__$2$$, $first__73022__$1_seq__73024_seq__73024__$1_vars$$, $_STAR_implicit_source_STAR__orig_val__73011_branches$$, $vars__$1$$, $___$1$$, $join_context_seq__73016$$, $contexts$$, $pred__72999$$, $expr__73000$$), $contexts$$);
          $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$ = $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$2(datascript.query.sum_rel, $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$);
          return $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$4($G__73270_context$$, cljs$cst$4617$rels, datascript.query.collapse_rels, $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$);
        }
        if ($APP.cljs.core.truth_(function() {
          var $G__73031$$ = new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$408$and, $APP.cljs$cst$650$_STAR_], null), $G__73032$$ = $expr__73000$$;
          return $pred__72999$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72999$$.cljs$core$IFn$_invoke$arity$2($G__73031$$, $G__73032$$) : $pred__72999$$.call(null, $G__73031$$, $G__73032$$);
        }())) {
          return $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$ = $APP.cljs.core.seq($clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$), $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$ = $APP.cljs.core.first($G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$), 
          $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$ = $APP.cljs.core.next($G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$), $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$ = $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$, 
          $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$ = $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$, $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(datascript.query.resolve_clause, $G__73270_context$$, $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$);
        }
        if ($APP.cljs.core.truth_(function() {
          var $G__73036$$ = new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$946$not, $APP.cljs$cst$650$_STAR_], null), $G__73037$$ = $expr__73000$$;
          return $pred__72999$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72999$$.cljs$core$IFn$_invoke$arity$2($G__73036$$, $G__73037$$) : $pred__72999$$.call(null, $G__73036$$, $G__73037$$);
        }())) {
          $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$ = $APP.cljs.core.seq($clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$);
          $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$ = $APP.cljs.core.first($G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$);
          $_STAR_implicit_source_STAR__orig_val__73011_branches$$ = $APP.cljs.core.next($G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$);
          $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$ = $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$;
          $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$ = $_STAR_implicit_source_STAR__orig_val__73011_branches$$;
          $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$ = datascript.query.bound_vars($G__73270_context$$);
          $_STAR_implicit_source_STAR__orig_val__73011_branches$$ = datascript.query.collect_vars($clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$);
          if ($APP.cljs.core.empty_QMARK_($APP.clojure.set.intersection.cljs$core$IFn$_invoke$arity$2($G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$, $_STAR_implicit_source_STAR__orig_val__73011_branches$$))) {
            throw $APP.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(["Insufficient bindings: none of ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$_STAR_implicit_source_STAR__orig_val__73011_branches$$], 0)), " is bound in ", $APP.cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic($APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([$G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$], 
            0))].join(""), new $APP.cljs.core.PersistentArrayMap(null, 2, [$APP.cljs$cst$1404$error, cljs$cst$4524$query_SLASH_where, $APP.cljs$cst$179$form, $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$], null));
          }
          $___$1$$ = null;
          $G__73270_context$$ = $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($G__73270_context$$, cljs$cst$4617$rels, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$2(datascript.query.hash_join, cljs$cst$4617$rels.cljs$core$IFn$_invoke$arity$1($G__73270_context$$))], null));
          $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$ = $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(datascript.query.resolve_clause, $G__73270_context$$, $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$);
          $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$ = datascript.query.subtract_rel(datascript.util.single(cljs$cst$4617$rels.cljs$core$IFn$_invoke$arity$1($G__73270_context$$)), $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$2(datascript.query.hash_join, cljs$cst$4617$rels.cljs$core$IFn$_invoke$arity$1($clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$)));
          return $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($G__73270_context$$, cljs$cst$4617$rels, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$], null));
        }
        if ($APP.cljs.core.truth_(function() {
          var $G__73041$$ = new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4599$not_join, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$650$_STAR_], null), $APP.cljs$cst$650$_STAR_], null), $G__73042$$ = $expr__73000$$;
          return $pred__72999$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72999$$.cljs$core$IFn$_invoke$arity$2($G__73041$$, $G__73042$$) : $pred__72999$$.call(null, $G__73041$$, $G__73042$$);
        }())) {
          return $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$ = $APP.cljs.core.seq($clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$), $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$ = $APP.cljs.core.first($clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$), 
          $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$ = $APP.cljs.core.next($clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$), $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$ = $APP.cljs.core.first($clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$), 
          $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$ = $APP.cljs.core.next($clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$), $first__73022__$1_seq__73024_seq__73024__$1_vars$$ = $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$, $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$ = 
          datascript.query.bound_vars($G__73270_context$$), $___$1$$ = datascript.query.check_bound($G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$, $first__73022__$1_seq__73024_seq__73024__$1_vars$$, $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$), $G__73270_context$$ = $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($G__73270_context$$, 
          cljs$cst$4617$rels, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$2(datascript.query.hash_join, cljs$cst$4617$rels.cljs$core$IFn$_invoke$arity$1($G__73270_context$$))], null)), $join_context_seq__73016$$ = datascript.query.limit_context($G__73270_context$$, $first__73022__$1_seq__73024_seq__73024__$1_vars$$), $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$ = 
          datascript.query.limit_context($APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(datascript.query.resolve_clause, $join_context_seq__73016$$, $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$), $first__73022__$1_seq__73024_seq__73024__$1_vars$$), $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$ = datascript.query.subtract_rel(datascript.util.single(cljs$cst$4617$rels.cljs$core$IFn$_invoke$arity$1($G__73270_context$$)), 
          $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$2(datascript.query.hash_join, cljs$cst$4617$rels.cljs$core$IFn$_invoke$arity$1($clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$))), $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($G__73270_context$$, cljs$cst$4617$rels, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$], 
          null));
        }
        if ($APP.cljs.core.truth_(function() {
          var $G__73046$$ = new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$650$_STAR_], null), $G__73047$$ = $expr__73000$$;
          return $pred__72999$$.cljs$core$IFn$_invoke$arity$2 ? $pred__72999$$.cljs$core$IFn$_invoke$arity$2($G__73046$$, $G__73047$$) : $pred__72999$$.call(null, $G__73046$$, $G__73047$$);
        }())) {
          $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$ = datascript.query._STAR_implicit_source_STAR_;
          $_STAR_implicit_source_STAR__orig_val__73011_branches$$ = datascript.query.resolve_pattern_lookup_refs($G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$, $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$);
          $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$ = datascript.query.lookup_pattern($G__73270_context$$, $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$, $_STAR_implicit_source_STAR__orig_val__73011_branches$$);
          $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$ = datascript.query._STAR_lookup_attrs_STAR_;
          $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$ = ($G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$ != null ? $APP.cljs.core.PROTOCOL_SENTINEL === $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$.datascript$db$IDB$ || 
          ($G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$.cljs$lang$protocol_mask$partition$ ? 0 : $APP.cljs.core.native_satisfies_QMARK_(datascript.db.IDB, $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$)) : $APP.cljs.core.native_satisfies_QMARK_(datascript.db.IDB, $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$)) ? 
          datascript.query.dynamic_lookup_attrs($G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$, $_STAR_implicit_source_STAR__orig_val__73011_branches$$) : datascript.query._STAR_lookup_attrs_STAR_;
          datascript.query._STAR_lookup_attrs_STAR_ = $G__73271__STAR_implicit_source_STAR__temp_val__73012__STAR_lookup_attrs_STAR__temp_val__73049_first__73010_orig_clause_seq__73034_seq__73034__$1_source$$;
          try {
            return $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$4($G__73270_context$$, cljs$cst$4617$rels, datascript.query.collapse_rels, $clause$jscomp$21_clauses$jscomp$36_first__73035_first__73040_negation_negation_context_relation_rels$$);
          } finally {
            datascript.query._STAR_lookup_attrs_STAR_ = $G__73272__$jscomp$1939__STAR_lookup_attrs_STAR__orig_val__73048_bound$jscomp$13_first__73022_first__73045_first__73045__$1_rest$$;
          }
        } else {
          throw Error(["No matching clause: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1($expr__73000$$)].join(""));
        }
      }
    }
    break;
  }
};
datascript.query._resolve_clause.cljs$lang$maxFixedArity = 3;
datascript.query.short_circuit_empty_rel = function($context$$) {
  return $APP.cljs.core.truth_($APP.cljs.core.some(function($p1__73051_SHARP_$$) {
    return $APP.cljs.core.empty_QMARK_(cljs$cst$4621$tuples.cljs$core$IFn$_invoke$arity$1($p1__73051_SHARP_$$));
  }, cljs$cst$4617$rels.cljs$core$IFn$_invoke$arity$1($context$$))) ? $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($context$$, cljs$cst$4617$rels, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new datascript.query.Relation($APP.cljs.core.zipmap($APP.cljs.core.mapcat.cljs$core$IFn$_invoke$arity$variadic(function($p1__73052_SHARP_$$) {
    return $APP.cljs.core.keys($APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($p1__73052_SHARP_$$));
  }, $APP.cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs$cst$4617$rels.cljs$core$IFn$_invoke$arity$1($context$$)], 0)), $APP.cljs.core.range.cljs$core$IFn$_invoke$arity$0()), $APP.cljs.core.PersistentVector.EMPTY, null, null, null)], null)) : $context$$;
};
datascript.query.resolve_clause = function($JSCompiler_temp$jscomp$1574_context$$, $clause$$) {
  if ($APP.cljs.core.truth_($APP.cljs.core.some($APP.cljs.core.comp.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.empty_QMARK_, cljs$cst$4621$tuples), cljs$cst$4617$rels.cljs$core$IFn$_invoke$arity$1($JSCompiler_temp$jscomp$1574_context$$)))) {
    return $JSCompiler_temp$jscomp$1574_context$$;
  }
  var $JSCompiler_temp_const$$ = datascript.query, $JSCompiler_temp_const$jscomp$0$$ = $JSCompiler_temp_const$$.short_circuit_empty_rel;
  if (datascript.query.rule_QMARK_($JSCompiler_temp$jscomp$1574_context$$, $clause$$)) {
    if (datascript.query.source_QMARK_($APP.cljs.core.first($clause$$))) {
      var $_STAR_implicit_source_STAR__orig_val__73053$$ = datascript.query._STAR_implicit_source_STAR_, $_STAR_implicit_source_STAR__temp_val__73054$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2403$sources.cljs$core$IFn$_invoke$arity$1($JSCompiler_temp$jscomp$1574_context$$), $APP.cljs.core.first($clause$$));
      datascript.query._STAR_implicit_source_STAR_ = $_STAR_implicit_source_STAR__temp_val__73054$$;
      try {
        var $G__73056$$ = $APP.cljs.core.next($clause$$);
        var $JSCompiler_temp$$ = datascript.query.resolve_clause.cljs$core$IFn$_invoke$arity$2 ? datascript.query.resolve_clause.cljs$core$IFn$_invoke$arity$2($JSCompiler_temp$jscomp$1574_context$$, $G__73056$$) : datascript.query.resolve_clause.call(null, $JSCompiler_temp$jscomp$1574_context$$, $G__73056$$);
      } finally {
        datascript.query._STAR_implicit_source_STAR_ = $_STAR_implicit_source_STAR__orig_val__73053$$;
      }
    } else {
      $JSCompiler_temp$$ = $APP.cljs.core.update.cljs$core$IFn$_invoke$arity$4($JSCompiler_temp$jscomp$1574_context$$, cljs$cst$4617$rels, datascript.query.collapse_rels, datascript.query.solve_rule($JSCompiler_temp$jscomp$1574_context$$, $clause$$));
    }
    $JSCompiler_temp$jscomp$1574_context$$ = $JSCompiler_temp$$;
  } else {
    $JSCompiler_temp$jscomp$1574_context$$ = datascript.query._resolve_clause.cljs$core$IFn$_invoke$arity$2($JSCompiler_temp$jscomp$1574_context$$, $clause$$);
  }
  return $JSCompiler_temp_const$jscomp$0$$.call($JSCompiler_temp_const$$, $JSCompiler_temp$jscomp$1574_context$$);
};
datascript.query._q = function($context$$, $clauses$$) {
  var $_STAR_implicit_source_STAR__orig_val__73057$$ = datascript.query._STAR_implicit_source_STAR_, $_STAR_implicit_source_STAR__temp_val__73058$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$2403$sources.cljs$core$IFn$_invoke$arity$1($context$$), $APP.cljs$cst$2393$$);
  datascript.query._STAR_implicit_source_STAR_ = $_STAR_implicit_source_STAR__temp_val__73058$$;
  try {
    return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(datascript.query.resolve_clause, $context$$, $clauses$$);
  } finally {
    datascript.query._STAR_implicit_source_STAR_ = $_STAR_implicit_source_STAR__orig_val__73057$$;
  }
};
datascript.query._collect_tuples = function($acc$$, $rel$$, $len$$, $copy_map$$) {
  return $APP.cljs.core.__GT_Eduction($APP.cljs.core.comp.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.map.cljs$core$IFn$_invoke$arity$1(function($t1$$) {
    return $APP.cljs.core.__GT_Eduction($APP.cljs.core.map.cljs$core$IFn$_invoke$arity$1(function($t2$$) {
      for (var $res$$ = $APP.cljs.core.aclone($t1$$), $i_73274$$ = 0;;) {
        if ($i_73274$$ < $len$$) {
          var $temp__5829__auto___73275$$ = $copy_map$$[$i_73274$$];
          $temp__5829__auto___73275$$ != null && ($res$$[$i_73274$$] = $t2$$[$temp__5829__auto___73275$$]);
          $i_73274$$ += 1;
        } else {
          break;
        }
      }
      return $res$$;
    }), cljs$cst$4621$tuples.cljs$core$IFn$_invoke$arity$1($rel$$));
  }), $APP.cljs.core.cat), $acc$$);
};
datascript.query._collect = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return datascript.query._collect.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return datascript.query._collect.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.query._collect.cljs$core$IFn$_invoke$arity$2 = function($context$jscomp$53_rels$$, $symbols$$) {
  $context$jscomp$53_rels$$ = cljs$cst$4617$rels.cljs$core$IFn$_invoke$arity$1($context$jscomp$53_rels$$);
  return datascript.query._collect.cljs$core$IFn$_invoke$arity$3(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.me.tonsky.persistent_sorted_set.arrays.make_array($APP.cljs.core.count($symbols$$))], null), $context$jscomp$53_rels$$, $symbols$$);
};
datascript.query._collect.cljs$core$IFn$_invoke$arity$3 = function($G__73282_G__73285_acc$$, $G__73283_G__73286_rels$$, $G__73284_G__73287_symbols$$) {
  for (;;) {
    var $rel$$ = $APP.cljs.core.first($G__73283_G__73286_rels$$);
    if ($rel$$ == null) {
      return $G__73282_G__73285_acc$$;
    }
    if ($APP.cljs.core.empty_QMARK_(cljs$cst$4621$tuples.cljs$core$IFn$_invoke$arity$1($rel$$))) {
      return $APP.cljs.core.PersistentVector.EMPTY;
    }
    var $copy_map$$ = $APP.cljs.core.select_keys($APP.cljs$cst$2743$attrs.cljs$core$IFn$_invoke$arity$1($rel$$), $G__73284_G__73287_symbols$$);
    if ($APP.cljs.core.empty_QMARK_($copy_map$$)) {
      $G__73283_G__73286_rels$$ = $APP.cljs.core.next($G__73283_G__73286_rels$$);
    } else {
      $copy_map$$ = $APP.cljs.core.to_array($APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(function($acc$$, $rels$$, $symbols$$, $keep_attrs$$, $rel$$) {
        return function($p1__73060_SHARP_$$) {
          return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($keep_attrs$$, $p1__73060_SHARP_$$);
        };
      }($G__73282_G__73285_acc$$, $G__73283_G__73286_rels$$, $G__73284_G__73287_symbols$$, $copy_map$$, $rel$$), $G__73284_G__73287_symbols$$));
      var $len$$ = $APP.cljs.core.count($G__73284_G__73287_symbols$$);
      $G__73282_G__73285_acc$$ = datascript.query._collect_tuples($G__73282_G__73285_acc$$, $rel$$, $len$$, $copy_map$$);
      $G__73283_G__73286_rels$$ = $APP.cljs.core.next($G__73283_G__73286_rels$$);
    }
  }
};
datascript.query._collect.cljs$lang$maxFixedArity = 3;
datascript.query.collect = function($context$$, $symbols$$) {
  return $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.PersistentHashSet.EMPTY, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.vec), datascript.query._collect.cljs$core$IFn$_invoke$arity$2($context$$, $symbols$$));
};
datascript.query.IContextResolve = function() {
};
var datascript$query$IContextResolve$_context_resolve$dyn_73288 = function($var$$$, $context$$) {
  var $m__5372__auto__$jscomp$712_m__5374__auto__$$ = datascript.query._context_resolve[$APP.goog.typeOf($var$$$ == null ? null : $var$$$)];
  if ($m__5372__auto__$jscomp$712_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$712_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$712_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($var$$$, $context$$) : $m__5372__auto__$jscomp$712_m__5374__auto__$$.call(null, $var$$$, $context$$);
  }
  $m__5372__auto__$jscomp$712_m__5374__auto__$$ = datascript.query._context_resolve._;
  if ($m__5372__auto__$jscomp$712_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$712_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2 ? $m__5372__auto__$jscomp$712_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$2($var$$$, $context$$) : $m__5372__auto__$jscomp$712_m__5374__auto__$$.call(null, $var$$$, $context$$);
  }
  throw $APP.cljs.core.missing_protocol("IContextResolve.-context-resolve", $var$$$);
};
datascript.query._context_resolve = function($var$$$, $context$$) {
  return $var$$$ != null && $var$$$.datascript$query$IContextResolve$_context_resolve$arity$2 != null ? $var$$$.datascript$query$IContextResolve$_context_resolve$arity$2($var$$$, $context$$) : datascript$query$IContextResolve$_context_resolve$dyn_73288($var$$$, $context$$);
};
datascript.parser.Variable.prototype.datascript$query$IContextResolve$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.Variable.prototype.datascript$query$IContextResolve$_context_resolve$arity$2 = function($var$$$, $context$$) {
  return datascript.query.context_resolve_val($context$$, this.symbol);
};
datascript.parser.SrcVar.prototype.datascript$query$IContextResolve$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.SrcVar.prototype.datascript$query$IContextResolve$_context_resolve$arity$2 = function($var$$$, $context$$) {
  return $APP.cljs.core.get_in.cljs$core$IFn$_invoke$arity$2($context$$, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2403$sources, this.symbol], null));
};
datascript.parser.PlainSymbol.prototype.datascript$query$IContextResolve$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.PlainSymbol.prototype.datascript$query$IContextResolve$_context_resolve$arity$2 = function($or__5025__auto__$jscomp$500_var$$$, $_$$) {
  $or__5025__auto__$jscomp$500_var$$$ = $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2(datascript.built_ins.aggregates, this.symbol);
  return $APP.cljs.core.truth_($or__5025__auto__$jscomp$500_var$$$) ? $or__5025__auto__$jscomp$500_var$$$ : datascript.query.resolve_sym(this.symbol);
};
datascript.parser.Constant.prototype.datascript$query$IContextResolve$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.Constant.prototype.datascript$query$IContextResolve$_context_resolve$arity$2 = function($var$$$, $_$$) {
  return this.value;
};
datascript.query._aggregate = function($find_elements$$, $context$$, $tuples$$) {
  return $APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$4(function($args$jscomp$309_element$$, $f$$, $i$$) {
    if (datascript.parser.aggregate_QMARK_($args$jscomp$309_element$$)) {
      $f$$ = datascript.query._context_resolve($APP.cljs$cst$329$fn.cljs$core$IFn$_invoke$arity$1($args$jscomp$309_element$$), $context$$);
      $args$jscomp$309_element$$ = $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(function($p1__73064_SHARP_$$) {
        return datascript.query._context_resolve($p1__73064_SHARP_$$, $context$$);
      }, $APP.cljs.core.butlast($APP.cljs$cst$255$args.cljs$core$IFn$_invoke$arity$1($args$jscomp$309_element$$)));
      var $vals$$ = $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(function($p1__73065_SHARP_$$) {
        return $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2($p1__73065_SHARP_$$, $i$$);
      }, $tuples$$);
      return $APP.cljs.core.apply.cljs$core$IFn$_invoke$arity$2($f$$, $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($args$jscomp$309_element$$, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$vals$$], null)));
    }
    return $f$$;
  }, $find_elements$$, $APP.cljs.core.first($tuples$$), $APP.cljs.core.range.cljs$core$IFn$_invoke$arity$0());
};
datascript.query.idxs_of = function($pred$$, $coll$$) {
  return $APP.cljs.core.remove.cljs$core$IFn$_invoke$arity$2($APP.cljs.core.nil_QMARK_, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$3(function($p1__73067_SHARP_$$, $p2__73068_SHARP_$$) {
    return $APP.cljs.core.truth_($pred$$.cljs$core$IFn$_invoke$arity$1 ? $pred$$.cljs$core$IFn$_invoke$arity$1($p1__73067_SHARP_$$) : $pred$$.call(null, $p1__73067_SHARP_$$)) ? $p2__73068_SHARP_$$ : null;
  }, $coll$$, $APP.cljs.core.range.cljs$core$IFn$_invoke$arity$0()));
};
datascript.query.aggregate = function($find_elements$$, $context$$, $resultset$$) {
  var $group_idxs$$ = datascript.query.idxs_of($APP.cljs.core.complement(datascript.parser.aggregate_QMARK_), $find_elements$$);
  return function $datascript$query$aggregate_$_iter__73070$$($s__73071$$) {
    return new $APP.cljs.core.LazySeq(null, function() {
      for (;;) {
        var $s__73071__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__73071$$);
        if ($s__73071__$2_temp__5825__auto__$$) {
          if ($APP.cljs.core.chunked_seq_QMARK_($s__73071__$2_temp__5825__auto__$$)) {
            var $JSCompiler_inline_result$jscomp$1576_c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__73071__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($JSCompiler_inline_result$jscomp$1576_c__5501__auto__$$), $b__73073_tuples$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
            a: {
              for (var $i__73072$$ = 0;;) {
                if ($i__73072$$ < $size__5502__auto__$$) {
                  var $tuples$jscomp$inline_7025_vec__73074$$ = $APP.cljs.core._nth($JSCompiler_inline_result$jscomp$1576_c__5501__auto__$$, $i__73072$$);
                  $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($tuples$jscomp$inline_7025_vec__73074$$, 0, null);
                  $tuples$jscomp$inline_7025_vec__73074$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($tuples$jscomp$inline_7025_vec__73074$$, 1, null);
                  $APP.cljs.core.chunk_append($b__73073_tuples$$, datascript.query._aggregate($find_elements$$, $context$$, $tuples$jscomp$inline_7025_vec__73074$$));
                  $i__73072$$ += 1;
                } else {
                  $JSCompiler_inline_result$jscomp$1576_c__5501__auto__$$ = !0;
                  break a;
                }
              }
              $JSCompiler_inline_result$jscomp$1576_c__5501__auto__$$ = void 0;
            }
            return $JSCompiler_inline_result$jscomp$1576_c__5501__auto__$$ ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__73073_tuples$$), $datascript$query$aggregate_$_iter__73070$$($APP.cljs.core.chunk_rest($s__73071__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__73073_tuples$$), null);
          }
          $b__73073_tuples$$ = $APP.cljs.core.first($s__73071__$2_temp__5825__auto__$$);
          $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($b__73073_tuples$$, 0, null);
          $b__73073_tuples$$ = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3($b__73073_tuples$$, 1, null);
          return $APP.cljs.core.cons(datascript.query._aggregate($find_elements$$, $context$$, $b__73073_tuples$$), $datascript$query$aggregate_$_iter__73070$$($APP.cljs.core.rest($s__73071__$2_temp__5825__auto__$$)));
        }
        return null;
      }
    }, null, null);
  }($APP.cljs.core.group_by(function($tuple$$) {
    return $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2(function($p1__73069_SHARP_$$) {
      return $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2($tuple$$, $p1__73069_SHARP_$$);
    }, $group_idxs$$);
  }, $resultset$$));
};
datascript.query.map_STAR_ = function($f$$, $xs$$) {
  return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($p1__73080_SHARP_$$, $p2__73081_SHARP_$$) {
    return $APP.cljs.core.conj.cljs$core$IFn$_invoke$arity$2($p1__73080_SHARP_$$, $f$$.cljs$core$IFn$_invoke$arity$1 ? $f$$.cljs$core$IFn$_invoke$arity$1($p2__73081_SHARP_$$) : $f$$.call(null, $p2__73081_SHARP_$$));
  }, $APP.cljs.core.empty($xs$$), $xs$$);
};
datascript.query.tuples__GT_return_map = function($return_map$$, $tuples$$) {
  var $symbols$$ = $APP.cljs$cst$4592$symbols.cljs$core$IFn$_invoke$arity$1($return_map$$), $idxs$$ = $APP.cljs.core.range.cljs$core$IFn$_invoke$arity$2(0, $APP.cljs.core.count($symbols$$));
  return datascript.query.map_STAR_(function($tuple$$) {
    return $APP.cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(function($m$$, $i$$) {
      return $APP.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3($m$$, $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2($symbols$$, $i$$), $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$2($tuple$$, $i$$));
    }, $APP.cljs.core.PersistentArrayMap.EMPTY, $idxs$$);
  }, $tuples$$);
};
datascript.query.IPostProcess = function() {
};
var datascript$query$IPostProcess$_post_process$dyn_73290 = function($find$$, $return_map$$, $tuples$$) {
  var $m__5372__auto__$jscomp$713_m__5374__auto__$$ = datascript.query._post_process[$APP.goog.typeOf($find$$ == null ? null : $find$$)];
  if ($m__5372__auto__$jscomp$713_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$713_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$713_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($find$$, $return_map$$, $tuples$$) : $m__5372__auto__$jscomp$713_m__5374__auto__$$.call(null, $find$$, $return_map$$, $tuples$$);
  }
  $m__5372__auto__$jscomp$713_m__5374__auto__$$ = datascript.query._post_process._;
  if ($m__5372__auto__$jscomp$713_m__5374__auto__$$ != null) {
    return $m__5372__auto__$jscomp$713_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3 ? $m__5372__auto__$jscomp$713_m__5374__auto__$$.cljs$core$IFn$_invoke$arity$3($find$$, $return_map$$, $tuples$$) : $m__5372__auto__$jscomp$713_m__5374__auto__$$.call(null, $find$$, $return_map$$, $tuples$$);
  }
  throw $APP.cljs.core.missing_protocol("IPostProcess.-post-process", $find$$);
};
datascript.query._post_process = function($find$$, $return_map$$, $tuples$$) {
  return $find$$ != null && $find$$.datascript$query$IPostProcess$_post_process$arity$3 != null ? $find$$.datascript$query$IPostProcess$_post_process$arity$3($find$$, $return_map$$, $tuples$$) : datascript$query$IPostProcess$_post_process$dyn_73290($find$$, $return_map$$, $tuples$$);
};
datascript.parser.FindRel.prototype.datascript$query$IPostProcess$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.FindRel.prototype.datascript$query$IPostProcess$_post_process$arity$3 = function($_$$, $return_map$$, $tuples$$) {
  return $return_map$$ == null ? $tuples$$ : datascript.query.tuples__GT_return_map($return_map$$, $tuples$$);
};
datascript.parser.FindColl.prototype.datascript$query$IPostProcess$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.FindColl.prototype.datascript$query$IPostProcess$_post_process$arity$3 = function($_$$, $return_map$$, $tuples$$) {
  return $APP.cljs.core.into.cljs$core$IFn$_invoke$arity$3($APP.cljs.core.PersistentVector.EMPTY, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$1($APP.cljs.core.first), $tuples$$);
};
datascript.parser.FindScalar.prototype.datascript$query$IPostProcess$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.FindScalar.prototype.datascript$query$IPostProcess$_post_process$arity$3 = function($_$$, $return_map$$, $tuples$$) {
  return $APP.cljs.core.ffirst($tuples$$);
};
datascript.parser.FindTuple.prototype.datascript$query$IPostProcess$ = $APP.cljs.core.PROTOCOL_SENTINEL;
datascript.parser.FindTuple.prototype.datascript$query$IPostProcess$_post_process$arity$3 = function($_$$, $return_map$$, $tuples$$) {
  return $return_map$$ != null ? $APP.cljs.core.first(datascript.query.tuples__GT_return_map($return_map$$, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.first($tuples$$)], null))) : $APP.cljs.core.first($tuples$$);
};
datascript.query.pull = function($find_elements$$, $context$$, $resultset$$) {
  var $resolved$$ = function() {
    return function $datascript$query$pull_$_iter__73084$$($s__73085$$) {
      return new $APP.cljs.core.LazySeq(null, function() {
        for (;;) {
          var $s__73085__$2_temp__5825__auto__$$ = $APP.cljs.core.seq($s__73085$$);
          if ($s__73085__$2_temp__5825__auto__$$) {
            if ($APP.cljs.core.chunked_seq_QMARK_($s__73085__$2_temp__5825__auto__$$)) {
              var $c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__73085__$2_temp__5825__auto__$$), $size__5502__auto__$$ = $APP.cljs.core.count($c__5501__auto__$$), $b__73087$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
              return function() {
                for (var $i__73086$$ = 0;;) {
                  if ($i__73086$$ < $size__5502__auto__$$) {
                    var $find$jscomp$8_pattern$$ = $APP.cljs.core._nth($c__5501__auto__$$, $i__73086$$), $JSCompiler_temp_const$$ = $APP.cljs.core, $JSCompiler_temp_const$jscomp$0$$ = $JSCompiler_temp_const$$.chunk_append, $JSCompiler_temp_const$jscomp$1$$ = $b__73087$$;
                    if (datascript.parser.pull_QMARK_($find$jscomp$8_pattern$$)) {
                      var $JSCompiler_temp$jscomp$1580_db$$ = datascript.query._context_resolve($APP.cljs$cst$193$source.cljs$core$IFn$_invoke$arity$1($find$jscomp$8_pattern$$), $context$$);
                      $find$jscomp$8_pattern$$ = datascript.query._context_resolve($APP.cljs$cst$2381$pattern.cljs$core$IFn$_invoke$arity$1($find$jscomp$8_pattern$$), $context$$);
                      $JSCompiler_temp$jscomp$1580_db$$ = datascript.pull_api.parse_opts.cljs$core$IFn$_invoke$arity$2($JSCompiler_temp$jscomp$1580_db$$, $find$jscomp$8_pattern$$);
                    } else {
                      $JSCompiler_temp$jscomp$1580_db$$ = null;
                    }
                    $JSCompiler_temp_const$jscomp$0$$.call($JSCompiler_temp_const$$, $JSCompiler_temp_const$jscomp$1$$, $JSCompiler_temp$jscomp$1580_db$$);
                    $i__73086$$ += 1;
                  } else {
                    return !0;
                  }
                }
              }() ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__73087$$), $datascript$query$pull_$_iter__73084$$($APP.cljs.core.chunk_rest($s__73085__$2_temp__5825__auto__$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__73087$$), null);
            }
            var $find$$ = $APP.cljs.core.first($s__73085__$2_temp__5825__auto__$$);
            return $APP.cljs.core.cons(datascript.parser.pull_QMARK_($find$$) ? function() {
              var $db$$ = datascript.query._context_resolve($APP.cljs$cst$193$source.cljs$core$IFn$_invoke$arity$1($find$$), $context$$), $pattern$$ = datascript.query._context_resolve($APP.cljs$cst$2381$pattern.cljs$core$IFn$_invoke$arity$1($find$$), $context$$);
              return datascript.pull_api.parse_opts.cljs$core$IFn$_invoke$arity$2($db$$, $pattern$$);
            }() : null, $datascript$query$pull_$_iter__73084$$($APP.cljs.core.rest($s__73085__$2_temp__5825__auto__$$)));
          }
          return null;
        }
      }, null, null);
    }($find_elements$$);
  }();
  return function $datascript$query$pull_$_iter__73101$$($s__73102$$) {
    return new $APP.cljs.core.LazySeq(null, function() {
      for (;;) {
        var $temp__5825__auto__$$ = $APP.cljs.core.seq($s__73102$$);
        if ($temp__5825__auto__$$) {
          var $s__73102__$2$$ = $temp__5825__auto__$$;
          if ($APP.cljs.core.chunked_seq_QMARK_($s__73102__$2$$)) {
            var $c__5501__auto__$$ = $APP.cljs.core.chunk_first($s__73102__$2$$), $size__5502__auto__$$ = $APP.cljs.core.count($c__5501__auto__$$), $b__73104$$ = $APP.cljs.core.chunk_buffer($size__5502__auto__$$);
            return function() {
              for (var $i__73103$$ = 0;;) {
                if ($i__73103$$ < $size__5502__auto__$$) {
                  var $tuple$$ = $APP.cljs.core._nth($c__5501__auto__$$, $i__73103$$);
                  $APP.cljs.core.chunk_append($b__73104$$, $APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$3(function($i__73103$$, $tuple$$, $c__5501__auto__$$, $size__5502__auto__$$, $b__73104$$, $s__73102__$2$$, $temp__5825__auto__$$, $resolved$$) {
                    return function($parsed_opts$$, $el$$) {
                      return $APP.cljs.core.truth_($parsed_opts$$) ? datascript.pull_api.pull_impl($parsed_opts$$, $el$$) : $el$$;
                    };
                  }($i__73103$$, $tuple$$, $c__5501__auto__$$, $size__5502__auto__$$, $b__73104$$, $s__73102__$2$$, $temp__5825__auto__$$, $resolved$$), $resolved$$, $tuple$$));
                  $i__73103$$ += 1;
                } else {
                  return !0;
                }
              }
            }() ? $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__73104$$), $datascript$query$pull_$_iter__73101$$($APP.cljs.core.chunk_rest($s__73102__$2$$))) : $APP.cljs.core.chunk_cons($APP.cljs.core.chunk($b__73104$$), null);
          }
          var $tuple$$ = $APP.cljs.core.first($s__73102__$2$$);
          return $APP.cljs.core.cons($APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$3(function($tuple$$, $s__73102__$2$$, $temp__5825__auto__$$, $resolved$$) {
            return function($parsed_opts$$, $el$$) {
              return $APP.cljs.core.truth_($parsed_opts$$) ? datascript.pull_api.pull_impl($parsed_opts$$, $el$$) : $el$$;
            };
          }($tuple$$, $s__73102__$2$$, $temp__5825__auto__$$, $resolved$$), $resolved$$, $tuple$$), $datascript$query$pull_$_iter__73101$$($APP.cljs.core.rest($s__73102__$2$$)));
        }
        return null;
      }
    }, null, null);
  }($resultset$$);
};
datascript.query.q = function($var_args$$) {
  for (var $args__5755__auto__$jscomp$280_argseq__5756__auto__$$ = [], $len__5749__auto___73295$$ = arguments.length, $i__5750__auto___73296$$ = 0;;) {
    if ($i__5750__auto___73296$$ < $len__5749__auto___73295$$) {
      $args__5755__auto__$jscomp$280_argseq__5756__auto__$$.push(arguments[$i__5750__auto___73296$$]), $i__5750__auto___73296$$ += 1;
    } else {
      break;
    }
  }
  $args__5755__auto__$jscomp$280_argseq__5756__auto__$$ = 1 < $args__5755__auto__$jscomp$280_argseq__5756__auto__$$.length ? new $APP.cljs.core.IndexedSeq($args__5755__auto__$jscomp$280_argseq__5756__auto__$$.slice(1), 0, null) : null;
  return datascript.query.q.cljs$core$IFn$_invoke$arity$variadic(arguments[0], $args__5755__auto__$jscomp$280_argseq__5756__auto__$$);
};
datascript.query.q.cljs$core$IFn$_invoke$arity$variadic = function($q$$, $context$jscomp$62_inputs$$) {
  var $parsed_q$$ = datascript.lru._get(datascript.query._STAR_query_cache_STAR_, $q$$, function() {
    return datascript.parser.parse_query($q$$);
  }), $find$$ = cljs$cst$4604$qfind.cljs$core$IFn$_invoke$arity$1($parsed_q$$), $G__73111__$3_find_elements$$ = datascript.parser.find_elements($find$$), $G__73111__$1_G__73111__$2_find_vars$jscomp$1_q__$1$$ = datascript.parser.find_vars($find$$), $result_arity$$ = $APP.cljs.core.count($G__73111__$3_find_elements$$), $G__73111_all_vars_with$$$ = cljs$cst$4605$qwith.cljs$core$IFn$_invoke$arity$1($parsed_q$$);
  $G__73111_all_vars_with$$$ = $APP.cljs.core.concat.cljs$core$IFn$_invoke$arity$2($G__73111__$1_G__73111__$2_find_vars$jscomp$1_q__$1$$, $APP.cljs.core.map.cljs$core$IFn$_invoke$arity$2($APP.cljs$cst$219$symbol, $G__73111_all_vars_with$$$));
  $G__73111__$1_G__73111__$2_find_vars$jscomp$1_q__$1$$ = $APP.cljs.core.sequential_QMARK_($q$$) ? datascript.parser.query__GT_map($q$$) : $q$$;
  var $wheres$$ = $APP.cljs$cst$2409$where.cljs$core$IFn$_invoke$arity$1($G__73111__$1_G__73111__$2_find_vars$jscomp$1_q__$1$$);
  $context$jscomp$62_inputs$$ = datascript.query.resolve_ins(new datascript.query.Context($APP.cljs.core.PersistentVector.EMPTY, $APP.cljs.core.PersistentArrayMap.EMPTY, $APP.cljs.core.PersistentArrayMap.EMPTY, null, null, null), cljs$cst$4607$qin.cljs$core$IFn$_invoke$arity$1($parsed_q$$), $context$jscomp$62_inputs$$);
  $G__73111_all_vars_with$$$ = datascript.query.collect(datascript.query._q($context$jscomp$62_inputs$$, $wheres$$), $G__73111_all_vars_with$$$);
  $G__73111__$1_G__73111__$2_find_vars$jscomp$1_q__$1$$ = $APP.cljs.core.truth_($APP.cljs$cst$2410$with.cljs$core$IFn$_invoke$arity$1($G__73111__$1_G__73111__$2_find_vars$jscomp$1_q__$1$$)) ? $APP.cljs.core.mapv.cljs$core$IFn$_invoke$arity$2(function($p1__73106_SHARP_$$) {
    return $APP.cljs.core.vec($APP.cljs.core.subvec.cljs$core$IFn$_invoke$arity$3($p1__73106_SHARP_$$, 0, $result_arity$$));
  }, $G__73111_all_vars_with$$$) : $G__73111_all_vars_with$$$;
  $G__73111__$1_G__73111__$2_find_vars$jscomp$1_q__$1$$ = $APP.cljs.core.truth_($APP.cljs.core.some(datascript.parser.aggregate_QMARK_, $G__73111__$3_find_elements$$)) ? datascript.query.aggregate($G__73111__$3_find_elements$$, $context$jscomp$62_inputs$$, $G__73111__$1_G__73111__$2_find_vars$jscomp$1_q__$1$$) : $G__73111__$1_G__73111__$2_find_vars$jscomp$1_q__$1$$;
  $G__73111__$3_find_elements$$ = $APP.cljs.core.truth_($APP.cljs.core.some(datascript.parser.pull_QMARK_, $G__73111__$3_find_elements$$)) ? datascript.query.pull($G__73111__$3_find_elements$$, $context$jscomp$62_inputs$$, $G__73111__$1_G__73111__$2_find_vars$jscomp$1_q__$1$$) : $G__73111__$1_G__73111__$2_find_vars$jscomp$1_q__$1$$;
  return datascript.query._post_process($find$$, cljs$cst$4606$qreturn_map.cljs$core$IFn$_invoke$arity$1($parsed_q$$), $G__73111__$3_find_elements$$);
};
datascript.query.q.cljs$lang$maxFixedArity = 1;
datascript.query.q.cljs$lang$applyTo = function($seq73107_seq73107__$1$$) {
  var $G__73108$$ = $APP.cljs.core.first($seq73107_seq73107__$1$$);
  $seq73107_seq73107__$1$$ = $APP.cljs.core.next($seq73107_seq73107__$1$$);
  return this.cljs$core$IFn$_invoke$arity$variadic($G__73108$$, $seq73107_seq73107__$1$$);
};
datascript.core = {};
datascript.core.tx0 = 536870912;
datascript.core.entity = datascript.impl.entity.entity;
datascript.core.entid = datascript.db.entid;
datascript.core.entity_db = function($entity$$) {
  return $entity$$.db;
};
datascript.core.touch = datascript.impl.entity.touch;
datascript.core.pull = datascript.pull_api.pull;
datascript.core.pull_many = datascript.pull_api.pull_many;
datascript.core.q = datascript.query.q;
datascript.core.empty_db = function($var_args$$) {
  switch(arguments.length) {
    case 0:
      return datascript.core.empty_db.cljs$core$IFn$_invoke$arity$0();
    case 1:
      return datascript.core.empty_db.cljs$core$IFn$_invoke$arity$1(arguments[0]);
    case 2:
      return datascript.core.empty_db.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.core.empty_db.cljs$core$IFn$_invoke$arity$0 = function() {
  return datascript.db.empty_db(null, $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.core.empty_db.cljs$core$IFn$_invoke$arity$1 = function($schema__$1$$) {
  return datascript.db.empty_db($schema__$1$$, $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.core.empty_db.cljs$core$IFn$_invoke$arity$2 = function($schema__$1$$, $opts$$) {
  return datascript.db.empty_db($schema__$1$$, datascript.storage.maybe_adapt_storage($opts$$));
};
datascript.core.empty_db.cljs$lang$maxFixedArity = 2;
datascript.core.db_QMARK_ = datascript.db.db_QMARK_;
datascript.core.datom = datascript.db.datom;
datascript.core.datom_QMARK_ = datascript.db.datom_QMARK_;
datascript.core.init_db = function($var_args$$) {
  switch(arguments.length) {
    case 1:
      return datascript.core.init_db.cljs$core$IFn$_invoke$arity$1(arguments[0]);
    case 2:
      return datascript.core.init_db.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return datascript.core.init_db.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.core.init_db.cljs$core$IFn$_invoke$arity$1 = function($datoms$$) {
  return datascript.db.init_db($datoms$$, null, $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.core.init_db.cljs$core$IFn$_invoke$arity$2 = function($datoms$$, $schema__$1$$) {
  return datascript.db.init_db($datoms$$, $schema__$1$$, $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.core.init_db.cljs$core$IFn$_invoke$arity$3 = function($datoms$$, $schema__$1$$, $opts$$) {
  return datascript.db.init_db($datoms$$, $schema__$1$$, datascript.storage.maybe_adapt_storage($opts$$));
};
datascript.core.init_db.cljs$lang$maxFixedArity = 3;
datascript.core.serializable = datascript.serialize.serializable;
datascript.core.from_serializable = datascript.serialize.from_serializable;
datascript.core.schema = datascript.db._schema;
datascript.core.is_filtered = function($x$$) {
  return $x$$ instanceof datascript.db.FilteredDB;
};
datascript.core.filter = function($db$$, $pred$$) {
  if (datascript.core.is_filtered($db$$)) {
    var $orig_pred$$ = $db$$.pred, $orig_db$$ = $db$$.unfiltered_db;
    return new datascript.db.FilteredDB($orig_db$$, function($p1__73145_SHARP_$$) {
      var $and__5023__auto__$$ = $orig_pred$$.cljs$core$IFn$_invoke$arity$1 ? $orig_pred$$.cljs$core$IFn$_invoke$arity$1($p1__73145_SHARP_$$) : $orig_pred$$.call(null, $p1__73145_SHARP_$$);
      return $APP.cljs.core.truth_($and__5023__auto__$$) ? $pred$$.cljs$core$IFn$_invoke$arity$2 ? $pred$$.cljs$core$IFn$_invoke$arity$2($orig_db$$, $p1__73145_SHARP_$$) : $pred$$.call(null, $orig_db$$, $p1__73145_SHARP_$$) : $and__5023__auto__$$;
    }, $APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1(0), null, null, null);
  }
  return new datascript.db.FilteredDB($db$$, function($p1__73146_SHARP_$$) {
    return $pred$$.cljs$core$IFn$_invoke$arity$2 ? $pred$$.cljs$core$IFn$_invoke$arity$2($db$$, $p1__73146_SHARP_$$) : $pred$$.call(null, $db$$, $p1__73146_SHARP_$$);
  }, $APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1(0), null, null, null);
};
datascript.core.with$ = datascript.conn.with$;
datascript.core.db_with = datascript.conn.db_with;
datascript.core.with_schema = function($db$$, $schema__$1$$) {
  return datascript.db.with_schema($db$$, $schema__$1$$);
};
datascript.core.datoms = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return datascript.core.datoms.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return datascript.core.datoms.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    case 4:
      return datascript.core.datoms.cljs$core$IFn$_invoke$arity$4(arguments[0], arguments[1], arguments[2], arguments[3]);
    case 5:
      return datascript.core.datoms.cljs$core$IFn$_invoke$arity$5(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4]);
    case 6:
      return datascript.core.datoms.cljs$core$IFn$_invoke$arity$6(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.core.datoms.cljs$core$IFn$_invoke$arity$2 = function($db$$, $index$$) {
  return datascript.db._datoms($db$$, $index$$, null, null, null, null);
};
datascript.core.datoms.cljs$core$IFn$_invoke$arity$3 = function($db$$, $index$$, $c0$$) {
  return datascript.db._datoms($db$$, $index$$, $c0$$, null, null, null);
};
datascript.core.datoms.cljs$core$IFn$_invoke$arity$4 = function($db$$, $index$$, $c0$$, $c1$$) {
  return datascript.db._datoms($db$$, $index$$, $c0$$, $c1$$, null, null);
};
datascript.core.datoms.cljs$core$IFn$_invoke$arity$5 = function($db$$, $index$$, $c0$$, $c1$$, $c2$$) {
  return datascript.db._datoms($db$$, $index$$, $c0$$, $c1$$, $c2$$, null);
};
datascript.core.datoms.cljs$core$IFn$_invoke$arity$6 = function($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) {
  return datascript.db._datoms($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$);
};
datascript.core.datoms.cljs$lang$maxFixedArity = 6;
datascript.core.find_datom = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return datascript.core.find_datom.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return datascript.core.find_datom.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    case 4:
      return datascript.core.find_datom.cljs$core$IFn$_invoke$arity$4(arguments[0], arguments[1], arguments[2], arguments[3]);
    case 5:
      return datascript.core.find_datom.cljs$core$IFn$_invoke$arity$5(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4]);
    case 6:
      return datascript.core.find_datom.cljs$core$IFn$_invoke$arity$6(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.core.find_datom.cljs$core$IFn$_invoke$arity$2 = function($db$$, $index$$) {
  return datascript.db.find_datom($db$$, $index$$, null, null, null, null);
};
datascript.core.find_datom.cljs$core$IFn$_invoke$arity$3 = function($db$$, $index$$, $c0$$) {
  return datascript.db.find_datom($db$$, $index$$, $c0$$, null, null, null);
};
datascript.core.find_datom.cljs$core$IFn$_invoke$arity$4 = function($db$$, $index$$, $c0$$, $c1$$) {
  return datascript.db.find_datom($db$$, $index$$, $c0$$, $c1$$, null, null);
};
datascript.core.find_datom.cljs$core$IFn$_invoke$arity$5 = function($db$$, $index$$, $c0$$, $c1$$, $c2$$) {
  return datascript.db.find_datom($db$$, $index$$, $c0$$, $c1$$, $c2$$, null);
};
datascript.core.find_datom.cljs$core$IFn$_invoke$arity$6 = function($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) {
  return datascript.db.find_datom($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$);
};
datascript.core.find_datom.cljs$lang$maxFixedArity = 6;
datascript.core.seek_datoms = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return datascript.core.seek_datoms.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return datascript.core.seek_datoms.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    case 4:
      return datascript.core.seek_datoms.cljs$core$IFn$_invoke$arity$4(arguments[0], arguments[1], arguments[2], arguments[3]);
    case 5:
      return datascript.core.seek_datoms.cljs$core$IFn$_invoke$arity$5(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4]);
    case 6:
      return datascript.core.seek_datoms.cljs$core$IFn$_invoke$arity$6(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.core.seek_datoms.cljs$core$IFn$_invoke$arity$2 = function($db$$, $index$$) {
  return datascript.db._seek_datoms($db$$, $index$$, null, null, null, null);
};
datascript.core.seek_datoms.cljs$core$IFn$_invoke$arity$3 = function($db$$, $index$$, $c0$$) {
  return datascript.db._seek_datoms($db$$, $index$$, $c0$$, null, null, null);
};
datascript.core.seek_datoms.cljs$core$IFn$_invoke$arity$4 = function($db$$, $index$$, $c0$$, $c1$$) {
  return datascript.db._seek_datoms($db$$, $index$$, $c0$$, $c1$$, null, null);
};
datascript.core.seek_datoms.cljs$core$IFn$_invoke$arity$5 = function($db$$, $index$$, $c0$$, $c1$$, $c2$$) {
  return datascript.db._seek_datoms($db$$, $index$$, $c0$$, $c1$$, $c2$$, null);
};
datascript.core.seek_datoms.cljs$core$IFn$_invoke$arity$6 = function($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) {
  return datascript.db._seek_datoms($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$);
};
datascript.core.seek_datoms.cljs$lang$maxFixedArity = 6;
datascript.core.rseek_datoms = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return datascript.core.rseek_datoms.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return datascript.core.rseek_datoms.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    case 4:
      return datascript.core.rseek_datoms.cljs$core$IFn$_invoke$arity$4(arguments[0], arguments[1], arguments[2], arguments[3]);
    case 5:
      return datascript.core.rseek_datoms.cljs$core$IFn$_invoke$arity$5(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4]);
    case 6:
      return datascript.core.rseek_datoms.cljs$core$IFn$_invoke$arity$6(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.core.rseek_datoms.cljs$core$IFn$_invoke$arity$2 = function($db$$, $index$$) {
  return datascript.db._rseek_datoms($db$$, $index$$, null, null, null, null);
};
datascript.core.rseek_datoms.cljs$core$IFn$_invoke$arity$3 = function($db$$, $index$$, $c0$$) {
  return datascript.db._rseek_datoms($db$$, $index$$, $c0$$, null, null, null);
};
datascript.core.rseek_datoms.cljs$core$IFn$_invoke$arity$4 = function($db$$, $index$$, $c0$$, $c1$$) {
  return datascript.db._rseek_datoms($db$$, $index$$, $c0$$, $c1$$, null, null);
};
datascript.core.rseek_datoms.cljs$core$IFn$_invoke$arity$5 = function($db$$, $index$$, $c0$$, $c1$$, $c2$$) {
  return datascript.db._rseek_datoms($db$$, $index$$, $c0$$, $c1$$, $c2$$, null);
};
datascript.core.rseek_datoms.cljs$core$IFn$_invoke$arity$6 = function($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$) {
  return datascript.db._rseek_datoms($db$$, $index$$, $c0$$, $c1$$, $c2$$, $c3$$);
};
datascript.core.rseek_datoms.cljs$lang$maxFixedArity = 6;
datascript.core.index_range = function($db$$, $attr$$, $start$$, $end$$) {
  return datascript.db._index_range($db$$, $attr$$, $start$$, $end$$);
};
datascript.core.conn_QMARK_ = datascript.conn.conn_QMARK_;
datascript.core.conn_from_db = datascript.conn.conn_from_db;
datascript.core.conn_from_datoms = datascript.conn.conn_from_datoms;
datascript.core.create_conn = datascript.conn.create_conn;
datascript.core.transact_BANG_ = datascript.conn.transact_BANG_;
datascript.core.reset_conn_BANG_ = datascript.conn.reset_conn_BANG_;
datascript.core.reset_schema_BANG_ = datascript.conn.reset_schema_BANG_;
datascript.core.listen_BANG_ = datascript.conn.listen_BANG_;
datascript.core.unlisten_BANG_ = datascript.conn.unlisten_BANG_;
datascript.core.data_readers = new $APP.cljs.core.PersistentArrayMap(null, 2, [cljs$cst$4630$datascript_SLASH_Datom, datascript.db.datom_from_reader, cljs$cst$4631$datascript_SLASH_DB, datascript.db.db_from_reader], null);
for (var seq__73221_73304 = $APP.cljs.core.seq(datascript.core.data_readers), chunk__73222_73305 = null, count__73223_73306 = 0, i__73224_73307 = 0;;) {
  if (i__73224_73307 < count__73223_73306) {
    var vec__73233_73308 = chunk__73222_73305.cljs$core$IIndexed$_nth$arity$2(null, i__73224_73307), tag_73309 = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__73233_73308, 0, null), cb_73310 = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__73233_73308, 1, null);
    $APP.cljs.reader.register_tag_parser_BANG_(tag_73309, cb_73310);
    var G__73311 = seq__73221_73304, G__73312 = chunk__73222_73305, G__73313 = count__73223_73306, G__73314 = i__73224_73307 + 1;
    seq__73221_73304 = G__73311;
    chunk__73222_73305 = G__73312;
    count__73223_73306 = G__73313;
    i__73224_73307 = G__73314;
  } else {
    var temp__5825__auto___73315 = $APP.cljs.core.seq(seq__73221_73304);
    if (temp__5825__auto___73315) {
      var seq__73221_73316__$1 = temp__5825__auto___73315;
      if ($APP.cljs.core.chunked_seq_QMARK_(seq__73221_73316__$1)) {
        var c__5548__auto___73317 = $APP.cljs.core.chunk_first(seq__73221_73316__$1), G__73318 = $APP.cljs.core.chunk_rest(seq__73221_73316__$1), G__73319 = c__5548__auto___73317, G__73320 = $APP.cljs.core.count(c__5548__auto___73317), G__73321 = 0;
        seq__73221_73304 = G__73318;
        chunk__73222_73305 = G__73319;
        count__73223_73306 = G__73320;
        i__73224_73307 = G__73321;
      } else {
        var vec__73242_73322 = $APP.cljs.core.first(seq__73221_73316__$1), tag_73323 = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__73242_73322, 0, null), cb_73324 = $APP.cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__73242_73322, 1, null);
        $APP.cljs.reader.register_tag_parser_BANG_(tag_73323, cb_73324);
        var G__73325 = $APP.cljs.core.next(seq__73221_73316__$1), G__73326 = null, G__73327 = 0, G__73328 = 0;
        seq__73221_73304 = G__73325;
        chunk__73222_73305 = G__73326;
        count__73223_73306 = G__73327;
        i__73224_73307 = G__73328;
      }
    } else {
      break;
    }
  }
}
datascript.core.last_tempid = $APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1(-1000000);
datascript.core.tempid = function($var_args$$) {
  switch(arguments.length) {
    case 1:
      return datascript.core.tempid.cljs$core$IFn$_invoke$arity$1(arguments[0]);
    case 2:
      return datascript.core.tempid.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.core.tempid.cljs$core$IFn$_invoke$arity$1 = function($part$$) {
  return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($part$$, cljs$cst$4632$db_DOT_part_SLASH_tx) ? cljs$cst$4495$db_SLASH_current_tx : $APP.cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$2(datascript.core.last_tempid, $APP.cljs.core.dec);
};
datascript.core.tempid.cljs$core$IFn$_invoke$arity$2 = function($part$$, $x$$) {
  return $APP.cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2($part$$, cljs$cst$4632$db_DOT_part_SLASH_tx) ? cljs$cst$4495$db_SLASH_current_tx : $x$$;
};
datascript.core.tempid.cljs$lang$maxFixedArity = 2;
datascript.core.resolve_tempid = function($_db$$, $tempids$$, $tempid$$) {
  return $APP.cljs.core.get.cljs$core$IFn$_invoke$arity$2($tempids$$, $tempid$$);
};
datascript.core.db = function($conn$$) {
  return $APP.cljs.core.deref($conn$$);
};
datascript.core.t_datascript$core73267 = function($conn$$, $tx_data$$, $tx_meta$$, $res$$, $meta73268$$) {
  this.conn = $conn$$;
  this.tx_data = $tx_data$$;
  this.tx_meta = $tx_meta$$;
  this.res = $res$$;
  this.meta73268 = $meta73268$$;
  this.cljs$lang$protocol_mask$partition0$ = 491520;
  this.cljs$lang$protocol_mask$partition1$ = 1;
};
datascript.core.t_datascript$core73267.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($_73269$$, $meta73268__$1$$) {
  return new datascript.core.t_datascript$core73267(this.conn, this.tx_data, this.tx_meta, this.res, $meta73268__$1$$);
};
datascript.core.t_datascript$core73267.prototype.cljs$core$IMeta$_meta$arity$1 = function($_73269$$) {
  return this.meta73268;
};
datascript.core.t_datascript$core73267.prototype.cljs$core$IDeref$_deref$arity$1 = function($_$$) {
  return this.res;
};
datascript.core.t_datascript$core73267.prototype.cljs$core$IDerefWithTimeout$_deref_with_timeout$arity$3 = function($_$$, $___$1$$, $___$2$$) {
  return this.res;
};
datascript.core.t_datascript$core73267.prototype.cljs$core$IPending$_realized_QMARK_$arity$1 = function($_$$) {
  return !0;
};
datascript.core.t_datascript$core73267.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2464$conn, cljs$cst$4485$tx_data, cljs$cst$4487$tx_meta, $APP.cljs$cst$3549$res, cljs$cst$4633$meta73268], null);
};
datascript.core.t_datascript$core73267.cljs$lang$type = !0;
datascript.core.t_datascript$core73267.cljs$lang$ctorStr = "datascript.core/t_datascript$core73267";
datascript.core.t_datascript$core73267.cljs$lang$ctorPrWriter = function($this__5310__auto__$$, $writer__5311__auto__$$, $opt__5312__auto__$$) {
  return $APP.cljs.core._write($writer__5311__auto__$$, "datascript.core/t_datascript$core73267");
};
datascript.core.__GT_t_datascript$core73267 = function($conn$$, $tx_data$$, $tx_meta$$, $res$$, $meta73268$$) {
  return new datascript.core.t_datascript$core73267($conn$$, $tx_data$$, $tx_meta$$, $res$$, $meta73268$$);
};
datascript.core.transact = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return datascript.core.transact.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return datascript.core.transact.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.core.transact.cljs$core$IFn$_invoke$arity$2 = function($conn$$, $tx_data$$) {
  return datascript.core.transact.cljs$core$IFn$_invoke$arity$3($conn$$, $tx_data$$, null);
};
datascript.core.transact.cljs$core$IFn$_invoke$arity$3 = function($conn$$, $tx_data$$, $tx_meta$$) {
  var $res$$ = datascript.core.transact_BANG_.cljs$core$IFn$_invoke$arity$3 ? datascript.core.transact_BANG_.cljs$core$IFn$_invoke$arity$3($conn$$, $tx_data$$, $tx_meta$$) : datascript.core.transact_BANG_.call(null, $conn$$, $tx_data$$, $tx_meta$$);
  return new datascript.core.t_datascript$core73267($conn$$, $tx_data$$, $tx_meta$$, $res$$, $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.core.transact.cljs$lang$maxFixedArity = 3;
datascript.core.t_datascript$core73278 = function($f$$, $res$$, $realized$$, $meta73279$$) {
  this.f = $f$$;
  this.res = $res$$;
  this.realized = $realized$$;
  this.meta73279 = $meta73279$$;
  this.cljs$lang$protocol_mask$partition0$ = 491520;
  this.cljs$lang$protocol_mask$partition1$ = 1;
};
datascript.core.t_datascript$core73278.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = function($_73280$$, $meta73279__$1$$) {
  return new datascript.core.t_datascript$core73278(this.f, this.res, this.realized, $meta73279__$1$$);
};
datascript.core.t_datascript$core73278.prototype.cljs$core$IMeta$_meta$arity$1 = function($_73280$$) {
  return this.meta73279;
};
datascript.core.t_datascript$core73278.prototype.cljs$core$IDeref$_deref$arity$1 = function($_$$) {
  return $APP.cljs.core.deref(this.res);
};
datascript.core.t_datascript$core73278.prototype.cljs$core$IDerefWithTimeout$_deref_with_timeout$arity$3 = function($_$$, $___$1$$, $timeout_val$$) {
  return $APP.cljs.core.truth_($APP.cljs.core.deref(this.realized)) ? $APP.cljs.core.deref(this.res) : $timeout_val$$;
};
datascript.core.t_datascript$core73278.prototype.cljs$core$IPending$_realized_QMARK_$arity$1 = function($_$$) {
  return $APP.cljs.core.deref(this.realized);
};
datascript.core.t_datascript$core73278.getBasis = function() {
  return new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$52$f, $APP.cljs$cst$3549$res, cljs$cst$4634$realized, cljs$cst$4635$meta73279], null);
};
datascript.core.t_datascript$core73278.cljs$lang$type = !0;
datascript.core.t_datascript$core73278.cljs$lang$ctorStr = "datascript.core/t_datascript$core73278";
datascript.core.t_datascript$core73278.cljs$lang$ctorPrWriter = function($this__5310__auto__$$, $writer__5311__auto__$$, $opt__5312__auto__$$) {
  return $APP.cljs.core._write($writer__5311__auto__$$, "datascript.core/t_datascript$core73278");
};
datascript.core.__GT_t_datascript$core73278 = function($f$$, $res$$, $realized$$, $meta73279$$) {
  return new datascript.core.t_datascript$core73278($f$$, $res$$, $realized$$, $meta73279$$);
};
datascript.core.future_call = function($f$$) {
  var $res$$ = $APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1(null), $realized$$ = $APP.cljs.core.atom.cljs$core$IFn$_invoke$arity$1(!1);
  setTimeout(function() {
    $APP.cljs.core.reset_BANG_($res$$, $f$$.cljs$core$IFn$_invoke$arity$0 ? $f$$.cljs$core$IFn$_invoke$arity$0() : $f$$.call(null));
    return $APP.cljs.core.reset_BANG_($realized$$, !0);
  }, 0);
  return new datascript.core.t_datascript$core73278($f$$, $res$$, $realized$$, $APP.cljs.core.PersistentArrayMap.EMPTY);
};
datascript.core.transact_async = function($var_args$$) {
  switch(arguments.length) {
    case 2:
      return datascript.core.transact_async.cljs$core$IFn$_invoke$arity$2(arguments[0], arguments[1]);
    case 3:
      return datascript.core.transact_async.cljs$core$IFn$_invoke$arity$3(arguments[0], arguments[1], arguments[2]);
    default:
      throw Error(["Invalid arity: ", $APP.cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(""));
  }
};
datascript.core.transact_async.cljs$core$IFn$_invoke$arity$2 = function($conn$$, $tx_data$$) {
  return datascript.core.transact_async.cljs$core$IFn$_invoke$arity$3($conn$$, $tx_data$$, null);
};
datascript.core.transact_async.cljs$core$IFn$_invoke$arity$3 = function($conn$$, $tx_data$$, $tx_meta$$) {
  return datascript.core.future_call(function() {
    return datascript.core.transact_BANG_.cljs$core$IFn$_invoke$arity$3 ? datascript.core.transact_BANG_.cljs$core$IFn$_invoke$arity$3($conn$$, $tx_data$$, $tx_meta$$) : datascript.core.transact_BANG_.call(null, $conn$$, $tx_data$$, $tx_meta$$);
  });
};
datascript.core.transact_async.cljs$lang$maxFixedArity = 3;
datascript.core.squuid = datascript.util.squuid;
datascript.core.squuid_time_millis = datascript.util.squuid_time_millis;
datascript.core.settings = function($db$$) {
  return $APP.me.tonsky.persistent_sorted_set.settings($APP.cljs$cst$4444$eavt.cljs$core$IFn$_invoke$arity$1($db$$));
};
$APP.sci.configs.tonsky = {};
$APP.sci.configs.tonsky.datascript = {};
$APP.sci.configs.tonsky.datascript.core_ns = $APP.sci.core.create_ns.cljs$core$IFn$_invoke$arity$2(cljs$cst$4636$datascript_DOT_core, null);
$APP.sci.configs.tonsky.datascript.db_ns = $APP.sci.core.create_ns.cljs$core$IFn$_invoke$arity$2(cljs$cst$4576$datascript_DOT_db, null);
$APP.sci.configs.tonsky.datascript.core_namespace = $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$2418$with, cljs$cst$4637$pull_many, $APP.cljs$cst$2429$entity, $APP.cljs$cst$2523$q, cljs$cst$4638$listen_BANG_, $APP.cljs$cst$4639$datom, cljs$cst$4640$db_with, cljs$cst$4641$index_range, cljs$cst$4642$conn_from_db, cljs$cst$4643$reset_conn_BANG_, cljs$cst$4644$transact_BANG_, cljs$cst$4645$squuid, $APP.cljs$cst$2542$db, cljs$cst$4646$serializable, cljs$cst$4647$conn_from_datoms, cljs$cst$4648$from_serializable, 
cljs$cst$4649$empty_db, cljs$cst$4650$init_db, cljs$cst$4651$touch, cljs$cst$4652$tx0, $APP.cljs$cst$1193$filter, cljs$cst$4562$datoms, cljs$cst$4591$pull, cljs$cst$4653$create_conn], [function() {
  var $new_m__32782__auto__$jscomp$19_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.core_ns, $name__32781__auto__$jscomp$19_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.core.with$;
  }, cljs$cst$4654$datascript_DOT_core_SLASH_with, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4636$datascript_DOT_core, $APP.cljs$cst$2418$with, "datascript/core.cljc", 60, 1, 268, 268, $APP.cljs.core.List.EMPTY, "Same as [[transact!]], but applies to an immutable database value. Returns transaction report (see [[transact!]]).", 
  $APP.cljs.core.truth_(datascript.core.with$) ? datascript.core.with$.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$19_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$19_var__32778__auto__$$);
  $name__32781__auto__$jscomp$19_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$19_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$19_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$19_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$19_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$19_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$19_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$19_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$19_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$19_ns__32777__auto__$$);
}(), function() {
  var $new_m__32782__auto__$jscomp$20_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.core_ns, $name__32781__auto__$jscomp$20_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.core.pull_many;
  }, cljs$cst$4655$datascript_DOT_core_SLASH_pull_many, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4636$datascript_DOT_core, cljs$cst$4637$pull_many, "datascript/core.cljc", 12, 1, 120, 130, $APP.cljs.core.List.EMPTY, 'Same as [[pull]], but accepts sequence of ids and returns sequence of maps.\n\n             Usage:\n\n             ```\n             (pull-many db [:db/id :name] [1 2])\n             ; \x3d\x3e [{:db/id 1, :name "Ivan"}\n             ;     {:db/id 2, :name "Oleg"}]\n             ```', 
  $APP.cljs.core.truth_(datascript.core.pull_many) ? datascript.core.pull_many.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$20_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$20_var__32778__auto__$$);
  $name__32781__auto__$jscomp$20_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$20_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$20_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$20_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$20_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$20_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$20_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$20_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$20_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$20_ns__32777__auto__$$);
}(), function() {
  var $new_m__32782__auto__$jscomp$21_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.core_ns, $name__32781__auto__$jscomp$21_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.core.entity;
  }, cljs$cst$4656$datascript_DOT_core_SLASH_entity, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$78$tag, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4636$datascript_DOT_core, $APP.cljs$cst$2429$entity, "datascript/core.cljc", 9, 1, 27, 77, cljs$cst$4657$Entity, $APP.cljs.core.List.EMPTY, 
  "Retrieves an entity by its id from database. Entities are lazy map-like structures to navigate DataScript database content.\n\n             For `eid` pass entity id or lookup attr:\n             \n                 (entity db 1)\n                 (entity db [:unique-attr :value])\n            \n             If entity does not exist, `nil` is returned:\n\n                 (entity db 100500) ; \x3d\x3e nil\n\n             Creating an entity by id is very cheap, almost no-op, as attr access is on-demand:\n\n                 (entity db 1) ; \x3d\x3e {:db/id 1}\n\n             Entity attributes can be lazily accessed through key lookups:\n             \n                 (:attr (entity db 1)) ; \x3d\x3e :value\n                 (get (entity db 1) :attr) ; \x3d\x3e :value\n\n             Cardinality many attributes are returned sequences:\n\n                 (:attrs (entity db 1)) ; \x3d\x3e [:v1 :v2 :v3]\n\n             Reference attributes are returned as another entities:\n\n                 (:ref (entity db 1)) ; \x3d\x3e {:db/id 2}\n                 (:ns/ref (entity db 1)) ; \x3d\x3e {:db/id 2}\n\n             References can be walked backwards by prepending `_` to name part of an attribute:\n\n                 (:_ref (entity db 2)) ; \x3d\x3e [{:db/id 1}]\n                 (:ns/_ref (entity db 2)) ; \x3d\x3e [{:db/id 1}]\n             \n             Reverse reference lookup returns sequence of entities unless attribute is marked as `:db/isComponent`:\n\n                 (:_component-ref (entity db 2)) ; \x3d\x3e {:db/id 1}\n\n             Entity gotchas:\n               \n             - Entities print as map, but are not exactly maps (they have compatible get interface though).\n             - Entities are effectively immutable “views” into a particular version of a database.\n             - Entities retain reference to the whole database.\n             - You can’t change database through entities, only read.\n             - Creating an entity by id is very cheap, almost no-op (attributes are looked up on demand).\n             - Comparing entities just compares their ids. Be careful when comparing entities taken from different dbs or from different versions of the same db.\n             - Accessed entity attributes are cached on entity itself (except backward references).\n             - When printing, only cached attributes (the ones you have accessed before) are printed. See [[touch]].", 
  $APP.cljs.core.truth_(datascript.core.entity) ? datascript.core.entity.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$21_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$21_var__32778__auto__$$);
  $name__32781__auto__$jscomp$21_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$21_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$21_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$21_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$21_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$21_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$21_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$21_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$21_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$21_ns__32777__auto__$$);
}(), function() {
  var $new_m__32782__auto__$jscomp$22_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.core_ns, $name__32781__auto__$jscomp$22_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.core.q;
  }, cljs$cst$4658$datascript_DOT_core_SLASH_q, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4636$datascript_DOT_core, $APP.cljs$cst$2523$q, "datascript/core.cljc", 4, 1, 134, 146, $APP.cljs.core.List.EMPTY, 'Executes a datalog query. See [docs.datomic.com/on-prem/query.html](https://docs.datomic.com/on-prem/query.html).\n\n          Usage:\n          \n          ```\n          (q \'[:find ?value\n               :where [_ :likes ?value]]\n             db)\n          ; \x3d\x3e #{["fries"] ["candy"] ["pie"] ["pizza"]}\n          ```', 
  $APP.cljs.core.truth_(datascript.core.q) ? datascript.core.q.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$22_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$22_var__32778__auto__$$);
  $name__32781__auto__$jscomp$22_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$22_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$22_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$22_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$22_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$22_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$22_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$22_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$22_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$22_ns__32777__auto__$$);
}(), function() {
  var $new_m__32782__auto__$jscomp$23_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.core_ns, $name__32781__auto__$jscomp$23_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.core.listen_BANG_;
  }, cljs$cst$4659$datascript_DOT_core_SLASH_listen_BANG_, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4636$datascript_DOT_core, cljs$cst$4638$listen_BANG_, "datascript/core.cljc", 65, 1, 567, 567, $APP.cljs.core.List.EMPTY, "Listen for changes on the given connection. Whenever a transaction is applied to the database via [[transact!]], the callback is called\n   with the transaction report. `key` is any opaque unique value.\n   \n   Idempotent. Calling [[listen!]] with the same key twice will override old callback with the new value.\n   \n   Returns the key under which this listener is registered. See also [[unlisten!]].", 
  $APP.cljs.core.truth_(datascript.core.listen_BANG_) ? datascript.core.listen_BANG_.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$23_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$23_var__32778__auto__$$);
  $name__32781__auto__$jscomp$23_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$23_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$23_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$23_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$23_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$23_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$23_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$23_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$23_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$23_ns__32777__auto__$$);
}(), function() {
  var $new_m__32782__auto__$jscomp$24_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.core_ns, $name__32781__auto__$jscomp$24_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.core.datom;
  }, cljs$cst$4660$datascript_DOT_core_SLASH_datom, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$78$tag, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4636$datascript_DOT_core, $APP.cljs$cst$4639$datom, "datascript/core.cljc", 8, 1, 182, 189, cljs$cst$4661$Datom, $APP.cljs.core.List.EMPTY, 
  "Low-level fn to create raw datoms.\n\n             Optionally with transaction id (number) and `added` flag (`true` for addition, `false` for retraction).\n\n             See also [[init-db]].", $APP.cljs.core.truth_(datascript.core.datom) ? datascript.core.datom.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$24_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$24_var__32778__auto__$$);
  $name__32781__auto__$jscomp$24_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$24_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$24_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$24_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$24_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$24_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$24_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$24_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$24_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$24_ns__32777__auto__$$);
}(), function() {
  var $new_m__32782__auto__$jscomp$25_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.core_ns, $name__32781__auto__$jscomp$25_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.core.db_with;
  }, cljs$cst$4662$datascript_DOT_core_SLASH_db_with, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$78$tag, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4636$datascript_DOT_core, cljs$cst$4640$db_with, "datascript/core.cljc", 50, 1, 272, 272, cljs$cst$4663$DB, $APP.cljs.core.List.EMPTY, 
  "Applies transaction to an immutable db value, returning new immutable db value. Same as `(:db-after (with db tx-data))`.", $APP.cljs.core.truth_(datascript.core.db_with) ? datascript.core.db_with.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$25_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$25_var__32778__auto__$$);
  $name__32781__auto__$jscomp$25_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$25_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$25_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$25_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$25_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$25_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$25_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$25_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$25_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$25_ns__32777__auto__$$);
}(), function() {
  var $new_m__32782__auto__$jscomp$26_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.core_ns, $name__32781__auto__$jscomp$26_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.core.index_range;
  }, cljs$cst$4664$datascript_DOT_core_SLASH_index_range, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4636$datascript_DOT_core, cljs$cst$4641$index_range, "datascript/core.cljc", 18, 1, 413, 413, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 
  4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2542$db, $APP.cljs$cst$3012$attr, $APP.cljs$cst$58$start, $APP.cljs$cst$30$end], null)), 'Returns part of `:avet` index between `[_ attr start]` and `[_ attr end]` in AVET sort order.\n  \n   Same properties as [[datoms]].\n   \n   `attr` must be a reference, unique attribute or marked as `:db/index true`.\n   \n   Usage:\n\n       (index-range db :likes "a" "zzzzzzzzz")\n       ; \x3d\x3e (#datascript/Datom [2 :likes "candy"]\n       ;     #datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [2 :likes "pie"]\n       ;     #datascript/Datom [1 :likes "pizza"]\n       ;     #datascript/Datom [2 :likes "pizza"])\n        \n       (index-range db :likes "egg" "pineapple")\n       ; \x3d\x3e (#datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [2 :likes "pie"])\n           \n   Useful patterns:\n     \n       ; find all entities with age in a specific range (inclusive)\n       (-\x3e\x3e (index-range db :age 18 60) (map :e))', 
  $APP.cljs.core.truth_(datascript.core.index_range) ? datascript.core.index_range.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$26_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$26_var__32778__auto__$$);
  $name__32781__auto__$jscomp$26_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$26_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$26_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$26_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$26_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$26_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$26_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$26_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$26_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$26_ns__32777__auto__$$);
}(), function() {
  var $new_m__32782__auto__$jscomp$27_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.core_ns, $name__32781__auto__$jscomp$27_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.core.conn_from_db;
  }, cljs$cst$4665$datascript_DOT_core_SLASH_conn_from_db, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4636$datascript_DOT_core, cljs$cst$4642$conn_from_db, "datascript/core.cljc", 39, 1, 447, 447, $APP.cljs.core.List.EMPTY, "Creates a mutable reference to a given immutable database. See [[create-conn]].", 
  $APP.cljs.core.truth_(datascript.core.conn_from_db) ? datascript.core.conn_from_db.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$27_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$27_var__32778__auto__$$);
  $name__32781__auto__$jscomp$27_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$27_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$27_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$27_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$27_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$27_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$27_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$27_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$27_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$27_ns__32777__auto__$$);
}(), function() {
  var $new_m__32782__auto__$jscomp$28_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.core_ns, $name__32781__auto__$jscomp$28_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.core.reset_conn_BANG_;
  }, cljs$cst$4666$datascript_DOT_core_SLASH_reset_conn_BANG_, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4636$datascript_DOT_core, cljs$cst$4643$reset_conn_BANG_, "datascript/core.cljc", 61, 1, 560, 560, $APP.cljs.core.List.EMPTY, "Forces underlying `conn` value to become `db`. Will generate a tx-report that will remove everything from old value and insert everything from the new one.", 
  $APP.cljs.core.truth_(datascript.core.reset_conn_BANG_) ? datascript.core.reset_conn_BANG_.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$28_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$28_var__32778__auto__$$);
  $name__32781__auto__$jscomp$28_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$28_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$28_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$28_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$28_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$28_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$28_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$28_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$28_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$28_ns__32777__auto__$$);
}(), function() {
  var $new_m__32782__auto__$jscomp$29_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.core_ns, $name__32781__auto__$jscomp$29_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.core.transact_BANG_;
  }, cljs$cst$4667$datascript_DOT_core_SLASH_transact_BANG_, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4636$datascript_DOT_core, cljs$cst$4644$transact_BANG_, "datascript/core.cljc", 69, 1, 473, 473, $APP.cljs.core.List.EMPTY, 'Applies transaction the underlying database value and atomically updates connection reference to point to the result of that transaction, new db value.\n  \n   Returns transaction report, a map:\n\n       {:db-before ...      ; db value before transaction\n        :db-after  ...      ; db value after transaction\n        :tx-data   [...]    ; plain datoms that were added/retracted from db-before\n        :tempids   {...}    ; map of tempid from tx-data \x3d\x3e assigned entid in db-after\n        :tx-meta   tx-meta} ; the exact value you passed as `tx-meta`\n\n  Note! `conn` will be updated in-place and is not returned from [[transact!]].\n  \n  Usage:\n\n      ; add a single datom to an existing entity (1)\n      (transact! conn [[:db/add 1 :name "Ivan"]])\n  \n      ; retract a single datom\n      (transact! conn [[:db/retract 1 :name "Ivan"]])\n  \n      ; retract single entity attribute\n      (transact! conn [[:db.fn/retractAttribute 1 :name]])\n  \n      ; ... or equivalently (since Datomic changed its API to support this):\n      (transact! conn [[:db/retract 1 :name]])\n      \n      ; retract all entity attributes (effectively deletes entity)\n      (transact! conn [[:db.fn/retractEntity 1]])\n  \n      ; create a new entity (`-1`, as any other negative value, is a tempid\n      ; that will be replaced with DataScript to a next unused eid)\n      (transact! conn [[:db/add -1 :name "Ivan"]])\n  \n      ; check assigned id (here `*1` is a result returned from previous `transact!` call)\n      (def report *1)\n      (:tempids report) ; \x3d\x3e {-1 296}\n  \n      ; check actual datoms inserted\n      (:tx-data report) ; \x3d\x3e [#datascript/Datom [296 :name "Ivan"]]\n  \n      ; tempid can also be a string\n      (transact! conn [[:db/add "ivan" :name "Ivan"]])\n      (:tempids *1) ; \x3d\x3e {"ivan" 297}\n  \n      ; reference another entity (must exist)\n      (transact! conn [[:db/add -1 :friend 296]])\n  \n      ; create an entity and set multiple attributes (in a single transaction\n      ; equal tempids will be replaced with the same yet unused entid)\n      (transact! conn [[:db/add -1 :name "Ivan"]\n                       [:db/add -1 :likes "fries"]\n                       [:db/add -1 :likes "pizza"]\n                       [:db/add -1 :friend 296]])\n  \n      ; create an entity and set multiple attributes (alternative map form)\n      (transact! conn [{:db/id  -1\n                        :name   "Ivan"\n                        :likes  ["fries" "pizza"]\n                        :friend 296}])\n      \n      ; update an entity (alternative map form). Can’t retract attributes in\n      ; map form. For cardinality many attrs, value (fish in this example)\n      ; will be added to the list of existing values\n      (transact! conn [{:db/id  296\n                        :name   "Oleg"\n                        :likes  ["fish"]}])\n\n      ; ref attributes can be specified as nested map, that will create nested entity as well\n      (transact! conn [{:db/id  -1\n                        :name   "Oleg"\n                        :friend {:db/id -2\n                                 :name "Sergey"}}])\n                                 \n      ; reverse attribute name can be used if you want created entity to become\n      ; a value in another entity reference\n      (transact! conn [{:db/id  -1\n                        :name   "Oleg"\n                        :_friend 296}])\n      ; equivalent to\n      (transact! conn [{:db/id  -1, :name   "Oleg"}\n                       {:db/id 296, :friend -1}])\n      ; equivalent to\n      (transact! conn [[:db/add  -1 :name   "Oleg"]\n                       [:db/add 296 :friend -1]])', 
  $APP.cljs.core.truth_(datascript.core.transact_BANG_) ? datascript.core.transact_BANG_.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$29_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$29_var__32778__auto__$$);
  $name__32781__auto__$jscomp$29_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$29_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$29_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$29_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$29_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$29_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$29_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$29_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$29_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$29_ns__32777__auto__$$);
}(), function() {
  var $new_m__32782__auto__$jscomp$30_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.core_ns, $name__32781__auto__$jscomp$30_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.core.squuid;
  }, cljs$cst$4668$datascript_DOT_core_SLASH_squuid, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4636$datascript_DOT_core, cljs$cst$4645$squuid, "datascript/core.cljc", 38, 1, 679, 679, $APP.cljs.core.List.EMPTY, "Generates a UUID that grow with time. Such UUIDs will always go to the end  of the index and that will minimize insertions in the middle.\n  \n   Consist of 64 bits of current UNIX timestamp (in seconds) and 64 random bits (2^64 different unique values per second).", 
  $APP.cljs.core.truth_(datascript.core.squuid) ? datascript.core.squuid.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$30_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$30_var__32778__auto__$$);
  $name__32781__auto__$jscomp$30_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$30_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$30_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$30_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$30_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$30_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$30_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$30_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$30_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$30_ns__32777__auto__$$);
}(), function() {
  var $new_m__32782__auto__$jscomp$31_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.core_ns, $name__32781__auto__$jscomp$31_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.core.db;
  }, cljs$cst$4669$datascript_DOT_core_SLASH_db, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$78$tag, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4636$datascript_DOT_core, $APP.cljs$cst$2542$db, "datascript/core.cljc", 13, 1, 619, 619, cljs$cst$4663$DB, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 
  1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2464$conn], null)), "Returns the underlying immutable database value from a connection.\n   \n   Exists for Datomic API compatibility. Prefer using `@conn` directly if possible.", $APP.cljs.core.truth_(datascript.core.db) ? datascript.core.db.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$31_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$31_var__32778__auto__$$);
  $name__32781__auto__$jscomp$31_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$31_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$31_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$31_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$31_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$31_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$31_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$31_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$31_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$31_ns__32777__auto__$$);
}(), function() {
  var $new_m__32782__auto__$jscomp$32_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.core_ns, $name__32781__auto__$jscomp$32_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.core.serializable;
  }, cljs$cst$4670$datascript_DOT_core_SLASH_serializable, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4636$datascript_DOT_core, cljs$cst$4646$serializable, "datascript/core.cljc", 15, 1, 207, 219, $APP.cljs.core.List.EMPTY, "Converts db into a data structure (not string!) that can be fed to serializer\n             of your choice (e.g. `js/JSON.stringify` in CLJS, `cheshire.core/generate-string`\n             or `jsonista.core/write-value-as-string` in CLJ).\n\n             On JVM, `serializable` holds a global lock that prevents any two serializations\n             to run in parallel (an implementation constraint, be aware).\n\n             Options:\n\n             `:freeze-fn` Non-primitive values will be serialized using this. Optional.\n             `pr-str` by default.", 
  $APP.cljs.core.truth_(datascript.core.serializable) ? datascript.core.serializable.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$32_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$32_var__32778__auto__$$);
  $name__32781__auto__$jscomp$32_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$32_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$32_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$32_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$32_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$32_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$32_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$32_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$32_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$32_ns__32777__auto__$$);
}(), function() {
  var $new_m__32782__auto__$jscomp$33_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.core_ns, $name__32781__auto__$jscomp$33_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.core.conn_from_datoms;
  }, cljs$cst$4671$datascript_DOT_core_SLASH_conn_from_datoms, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4636$datascript_DOT_core, cljs$cst$4647$conn_from_datoms, "datascript/core.cljc", 84, 1, 451, 451, $APP.cljs.core.List.EMPTY, "Creates an empty DB and a mutable reference to it. See [[create-conn]].", 
  $APP.cljs.core.truth_(datascript.core.conn_from_datoms) ? datascript.core.conn_from_datoms.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$33_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$33_var__32778__auto__$$);
  $name__32781__auto__$jscomp$33_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$33_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$33_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$33_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$33_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$33_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$33_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$33_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$33_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$33_ns__32777__auto__$$);
}(), function() {
  var $new_m__32782__auto__$jscomp$34_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.core_ns, $name__32781__auto__$jscomp$34_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.core.from_serializable;
  }, cljs$cst$4672$datascript_DOT_core_SLASH_from_serializable, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$78$tag, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4636$datascript_DOT_core, cljs$cst$4648$from_serializable, "datascript/core.cljc", 20, 1, 221, 230, cljs$cst$4663$DB, 
  $APP.cljs.core.List.EMPTY, "Creates db from a data structure (not string!) produced by serializable.\n\n             Opts:\n\n             `:thaw-fn` Non-primitive values will be deserialized using this.\n             Must match :freeze-fn from serializable. Optional. `clojure.edn/read-string`\n             by default.", $APP.cljs.core.truth_(datascript.core.from_serializable) ? datascript.core.from_serializable.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$34_var__32778__auto__$$), 
  $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$34_var__32778__auto__$$);
  $name__32781__auto__$jscomp$34_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$34_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$34_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$34_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$34_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$34_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$34_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$34_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$34_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$34_ns__32777__auto__$$);
}(), function() {
  var $new_m__32782__auto__$jscomp$35_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.core_ns, $name__32781__auto__$jscomp$35_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.core.empty_db;
  }, cljs$cst$4673$datascript_DOT_core_SLASH_empty_db, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$1377$top_fn, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$78$tag, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4636$datascript_DOT_core, cljs$cst$4649$empty_db, "datascript/core.cljc", 19, new $APP.cljs.core.PersistentArrayMap(null, 
  6, [$APP.cljs$cst$1378$variadic_QMARK_, !1, $APP.cljs$cst$553$fixed_arity, 2, $APP.cljs$cst$1379$max_fixed_arity, 2, $APP.cljs$cst$1380$method_params, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs.core.PersistentVector.EMPTY, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1399$schema], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
  [$APP.cljs$cst$1399$schema, $APP.cljs$cst$309$opts], null)], null), $APP.cljs$cst$273$arglists, $APP.cljs.core.list($APP.cljs.core.PersistentVector.EMPTY, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1399$schema], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1399$schema, $APP.cljs$cst$309$opts], null)), $APP.cljs$cst$1381$arglists_meta, $APP.cljs.core.list(null, null, 
  null)], null), 1, 151, 151, cljs$cst$4663$DB, $APP.cljs.core.list($APP.cljs.core.PersistentVector.EMPTY, new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1399$schema], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1399$schema, $APP.cljs$cst$309$opts], null)), "Creates an empty database with an optional schema.\n\n   Usage:\n   \n   ```\n   (empty-db) ; \x3d\x3e #datascript/DB {:schema {}, :datoms []}\n\n   (empty-db {:likes {:db/cardinality :db.cardinality/many}})\n   ; \x3d\x3e #datascript/DB {:schema {:likes {:db/cardinality :db.cardinality/many}}\n   ;                    :datoms []}\n   ```\n   \n   Options are:\n   \n   :branching-factor \x3cint\x3e, default 512. B-tree max node length\n   :ref-type         :strong | :soft | :weak, default :soft. How will nodes that are already\n                     stored on disk be referenced. Soft or weak means they might be unloaded\n                     from memory under memory pressure and later fetched from storage again.\n   :storage          \x3cIStorage\x3e. Will be used to store this db later with `(d/store db)`", 
  $APP.cljs.core.truth_(datascript.core.empty_db) ? datascript.core.empty_db.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$35_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$35_var__32778__auto__$$);
  $name__32781__auto__$jscomp$35_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$35_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$35_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$35_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$35_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$35_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$35_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$35_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$35_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$35_ns__32777__auto__$$);
}(), function() {
  var $new_m__32782__auto__$jscomp$36_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.core_ns, $name__32781__auto__$jscomp$36_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.core.init_db;
  }, cljs$cst$4674$datascript_DOT_core_SLASH_init_db, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$1377$top_fn, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$78$tag, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4636$datascript_DOT_core, cljs$cst$4650$init_db, "datascript/core.cljc", 18, new $APP.cljs.core.PersistentArrayMap(null, 
  6, [$APP.cljs$cst$1378$variadic_QMARK_, !1, $APP.cljs$cst$553$fixed_arity, 3, $APP.cljs$cst$1379$max_fixed_arity, 3, $APP.cljs$cst$1380$method_params, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4562$datoms], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4562$datoms, $APP.cljs$cst$1399$schema], 
  null), new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4562$datoms, $APP.cljs$cst$1399$schema, $APP.cljs$cst$309$opts], null)], null), $APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4562$datoms], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4562$datoms, $APP.cljs$cst$1399$schema], 
  null), new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4562$datoms, $APP.cljs$cst$1399$schema, $APP.cljs$cst$309$opts], null)), $APP.cljs$cst$1381$arglists_meta, $APP.cljs.core.list(null, null, null)], null), 1, 195, 195, cljs$cst$4663$DB, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4562$datoms], null), new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
  [cljs$cst$4562$datoms, $APP.cljs$cst$1399$schema], null), new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [cljs$cst$4562$datoms, $APP.cljs$cst$1399$schema, $APP.cljs$cst$309$opts], null)), "Low-level fn for creating database quickly from a trusted sequence of datoms.\n   Does no validation on inputs, so `datoms` must be well-formed and match schema.\n   Used internally in db (de)serialization. See also [[datom]].\n   For options, see [[empty-db]]", $APP.cljs.core.truth_(datascript.core.init_db) ? 
  datascript.core.init_db.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$36_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$36_var__32778__auto__$$);
  $name__32781__auto__$jscomp$36_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$36_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$36_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$36_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$36_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$36_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$36_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$36_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$36_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$36_ns__32777__auto__$$);
}(), function() {
  var $new_m__32782__auto__$jscomp$37_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.core_ns, $name__32781__auto__$jscomp$37_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.core.touch;
  }, cljs$cst$4675$datascript_DOT_core_SLASH_touch, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$78$tag, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4636$datascript_DOT_core, cljs$cst$4651$touch, "datascript/core.cljc", 8, 1, 91, 101, cljs$cst$4657$Entity, $APP.cljs.core.List.EMPTY, 
  "Forces all entity attributes to be eagerly fetched and cached. Only usable for debug output.\n\n             Usage:\n\n             ```\n             (entity db 1) ; \x3d\x3e {:db/id 1}\n             (touch (entity db 1)) ; \x3d\x3e {:db/id 1, :dislikes [:pie], :likes [:pizza]}\n             ```", $APP.cljs.core.truth_(datascript.core.touch) ? datascript.core.touch.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$37_var__32778__auto__$$), $m__32780__auto__$$ = 
  $APP.cljs.core.meta($name__32781__auto__$jscomp$37_var__32778__auto__$$);
  $name__32781__auto__$jscomp$37_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$37_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$37_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$37_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$37_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$37_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$37_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$37_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$37_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$37_ns__32777__auto__$$);
}(), function() {
  var $new_m__32782__auto__$jscomp$38_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.core_ns, $name__32781__auto__$jscomp$38_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.core.tx0;
  }, cljs$cst$4676$datascript_DOT_core_SLASH_tx0, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$1349$no_doc, $APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$618$const, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [!0, cljs$cst$4636$datascript_DOT_core, cljs$cst$4652$tx0, "datascript/core.cljc", 26, 1, !0, 21, 21, 
  $APP.cljs.core.List.EMPTY, null, $APP.cljs.core.truth_(datascript.core.tx0) ? datascript.core.tx0.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$38_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$38_var__32778__auto__$$);
  $name__32781__auto__$jscomp$38_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$38_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$38_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$38_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$38_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$38_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$38_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$38_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$38_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$38_ns__32777__auto__$$);
}(), function() {
  var $new_m__32782__auto__$jscomp$39_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.core_ns, $name__32781__auto__$jscomp$39_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.core.filter;
  }, cljs$cst$4677$datascript_DOT_core_SLASH_filter, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4636$datascript_DOT_core, $APP.cljs$cst$1193$filter, "datascript/core.cljc", 13, 1, 247, 247, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 
  2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2542$db, $APP.cljs$cst$1244$pred], null)), "Returns a view over database that has same interface but only includes datoms for which the `(pred db datom)` is true. Can be applied multiple times.\n   \n   Filtered DB gotchas:\n\n   - All operations on filtered database are proxied to original DB, then filter pred is applied.\n   - Not cached. You pay filter penalty every time.\n   - Supports entities, pull, queries, index access.\n   - Does not support [[with]] and [[db-with]].", 
  $APP.cljs.core.truth_(datascript.core.filter) ? datascript.core.filter.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$39_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$39_var__32778__auto__$$);
  $name__32781__auto__$jscomp$39_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$39_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$39_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$39_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$39_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$39_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$39_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$39_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$39_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$39_ns__32777__auto__$$);
}(), function() {
  var $new_m__32782__auto__$jscomp$40_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.core_ns, $name__32781__auto__$jscomp$40_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.core.datoms;
  }, cljs$cst$4678$datascript_DOT_core_SLASH_datoms, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$1377$top_fn, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4636$datascript_DOT_core, cljs$cst$4562$datoms, "datascript/core.cljc", 13, new $APP.cljs.core.PersistentArrayMap(null, 
  6, [$APP.cljs$cst$1378$variadic_QMARK_, !1, $APP.cljs$cst$553$fixed_arity, 6, $APP.cljs$cst$1379$max_fixed_arity, 6, $APP.cljs$cst$1380$method_params, new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2542$db, $APP.cljs$cst$1336$index], null), new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2542$db, 
  $APP.cljs$cst$1336$index, cljs$cst$4679$c0], null), new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2542$db, $APP.cljs$cst$1336$index, cljs$cst$4679$c0, $APP.cljs$cst$4192$c1], null), new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2542$db, $APP.cljs$cst$1336$index, cljs$cst$4679$c0, $APP.cljs$cst$4192$c1, $APP.cljs$cst$4193$c2], null), new $APP.cljs.core.PersistentVector(null, 
  6, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2542$db, $APP.cljs$cst$1336$index, cljs$cst$4679$c0, $APP.cljs$cst$4192$c1, $APP.cljs$cst$4193$c2, $APP.cljs$cst$4680$c3], null)], null), $APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2542$db, $APP.cljs$cst$1336$index], null), new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2542$db, 
  $APP.cljs$cst$1336$index, cljs$cst$4679$c0], null), new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2542$db, $APP.cljs$cst$1336$index, cljs$cst$4679$c0, $APP.cljs$cst$4192$c1], null), new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2542$db, $APP.cljs$cst$1336$index, cljs$cst$4679$c0, $APP.cljs$cst$4192$c1, $APP.cljs$cst$4193$c2], null), new $APP.cljs.core.PersistentVector(null, 
  6, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2542$db, $APP.cljs$cst$1336$index, cljs$cst$4679$c0, $APP.cljs$cst$4192$c1, $APP.cljs$cst$4193$c2, $APP.cljs$cst$4680$c3], null)), $APP.cljs$cst$1381$arglists_meta, $APP.cljs.core.list(null, null, null, null, null)], null), 1, 283, 283, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2542$db, $APP.cljs$cst$1336$index], null), new $APP.cljs.core.PersistentVector(null, 
  3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2542$db, $APP.cljs$cst$1336$index, cljs$cst$4679$c0], null), new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2542$db, $APP.cljs$cst$1336$index, cljs$cst$4679$c0, $APP.cljs$cst$4192$c1], null), new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2542$db, $APP.cljs$cst$1336$index, cljs$cst$4679$c0, $APP.cljs$cst$4192$c1, 
  $APP.cljs$cst$4193$c2], null), new $APP.cljs.core.PersistentVector(null, 6, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2542$db, $APP.cljs$cst$1336$index, cljs$cst$4679$c0, $APP.cljs$cst$4192$c1, $APP.cljs$cst$4193$c2, $APP.cljs$cst$4680$c3], null)), 'Index lookup. Returns a sequence of datoms (lazy iterator over actual DB index) which components (e, a, v) match passed arguments.\n\n   Datoms are sorted in index sort order. Possible `index` values are: `:eavt`, `:aevt`, `:avet`.\n\n   Usage:\n\n       ; find all datoms for entity id \x3d\x3d 1 (any attrs and values)\n       ; sort by attribute, then value\n       (datoms db :eavt 1)\n       ; \x3d\x3e (#datascript/Datom [1 :friends 2]\n       ;     #datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [1 :likes "pizza"]\n       ;     #datascript/Datom [1 :name "Ivan"])\n  \n       ; find all datoms for entity id \x3d\x3d 1 and attribute \x3d\x3d :likes (any values)\n       ; sorted by value\n       (datoms db :eavt 1 :likes)\n       ; \x3d\x3e (#datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [1 :likes "pizza"])\n       \n       ; find all datoms for entity id \x3d\x3d 1, attribute \x3d\x3d :likes and value \x3d\x3d "pizza"\n       (datoms db :eavt 1 :likes "pizza")\n       ; \x3d\x3e (#datascript/Datom [1 :likes "pizza"])\n  \n       ; find all datoms for attribute \x3d\x3d :likes (any entity ids and values)\n       ; sorted by entity id, then value\n       (datoms db :aevt :likes)\n       ; \x3d\x3e (#datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [1 :likes "pizza"]\n       ;     #datascript/Datom [2 :likes "candy"]\n       ;     #datascript/Datom [2 :likes "pie"]\n       ;     #datascript/Datom [2 :likes "pizza"])\n  \n       ; find all datoms that have attribute \x3d\x3d `:likes` and value \x3d\x3d `"pizza"` (any entity id)\n       ; `:likes` must be a unique attr, reference or marked as `:db/index true`\n       (datoms db :avet :likes "pizza")\n       ; \x3d\x3e (#datascript/Datom [1 :likes "pizza"]\n       ;     #datascript/Datom [2 :likes "pizza"])\n  \n       ; find all datoms sorted by entity id, then attribute, then value\n       (datoms db :eavt) ; \x3d\x3e (...)\n\n   Useful patterns:\n\n       ; get all values of :db.cardinality/many attribute\n       (-\x3e\x3e (datoms db :eavt eid attr) (map :v))\n  \n       ; lookup entity ids by attribute value\n       (-\x3e\x3e (datoms db :avet attr value) (map :e))\n  \n       ; find all entities with a specific attribute\n       (-\x3e\x3e (datoms db :aevt attr) (map :e))\n  \n       ; find “singleton” entity by its attr\n       (-\x3e\x3e (datoms db :aevt attr) first :e)\n  \n       ; find N entities with lowest attr value (e.g. 10 earliest posts)\n       (-\x3e\x3e (datoms db :avet attr) (take N))\n  \n       ; find N entities with highest attr value (e.g. 10 latest posts)\n       (-\x3e\x3e (datoms db :avet attr) (reverse) (take N))\n\n   Gotchas:\n   \n   - Index lookup is usually more efficient than doing a query with a single clause.\n   - Resulting iterator is calculated in constant time and small constant memory overhead.\n   - Iterator supports efficient `first`, `next`, `reverse`, `seq` and is itself a sequence.\n   - Will not return datoms that are not part of the index (e.g. attributes with no `:db/index` in schema when querying `:avet` index).\n     - `:eavt` and `:aevt` contain all datoms.\n     - `:avet` only contains datoms for references, `:db/unique` and `:db/index` attributes.', 
  $APP.cljs.core.truth_(datascript.core.datoms) ? datascript.core.datoms.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$40_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$40_var__32778__auto__$$);
  $name__32781__auto__$jscomp$40_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$40_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$40_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$40_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$40_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$40_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$40_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$40_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$40_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$40_ns__32777__auto__$$);
}(), function() {
  var $new_m__32782__auto__$jscomp$41_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.core_ns, $name__32781__auto__$jscomp$41_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.core.pull;
  }, cljs$cst$4681$datascript_DOT_core_SLASH_pull, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4636$datascript_DOT_core, cljs$cst$4591$pull, "datascript/core.cljc", 7, 1, 106, 118, $APP.cljs.core.List.EMPTY, 'Fetches data from database using recursive declarative description. See [docs.datomic.com/on-prem/pull.html](https://docs.datomic.com/on-prem/pull.html).\n\n             Unlike [[entity]], returns plain Clojure map (not lazy).\n\n             Usage:\n\n                 (pull db [:db/id, :name, :likes, {:friends [:db/id :name]}] 1)\n                 ; \x3d\x3e {:db/id   1,\n                 ;     :name    "Ivan"\n                 ;     :likes   [:pizza]\n                 ;     :friends [{:db/id 2, :name "Oleg"}]}', 
  $APP.cljs.core.truth_(datascript.core.pull) ? datascript.core.pull.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$41_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$41_var__32778__auto__$$);
  $name__32781__auto__$jscomp$41_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$41_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$41_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$41_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$41_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$41_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$41_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$41_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$41_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$41_ns__32777__auto__$$);
}(), function() {
  var $new_m__32782__auto__$jscomp$42_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.core_ns, $name__32781__auto__$jscomp$42_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.core.create_conn;
  }, cljs$cst$4682$datascript_DOT_core_SLASH_create_conn, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4636$datascript_DOT_core, cljs$cst$4653$create_conn, "datascript/core.cljc", 59, 1, 455, 455, $APP.cljs.core.List.EMPTY, "Creates a mutable reference (a “connection”) to an empty immutable database.\n\n   Connections are lightweight in-memory structures (~atoms) with direct support of transaction listeners ([[listen!]], [[unlisten!]]) and other handy DataScript APIs ([[transact!]], [[reset-conn!]], [[db]]).\n\n   To access underlying immutable DB value, deref: `@conn`.\n   \n   For list of options, see [[empty-db]].\n   \n   If you specify `:storage` option, conn will be stored automatically after each transaction", 
  $APP.cljs.core.truth_(datascript.core.create_conn) ? datascript.core.create_conn.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$42_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$42_var__32778__auto__$$);
  $name__32781__auto__$jscomp$42_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$42_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$42_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$42_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$42_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$42_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$42_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$42_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$42_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$42_ns__32777__auto__$$);
}()]);
$APP.sci.configs.tonsky.datascript.db_namespace = new $APP.cljs.core.PersistentArrayMap(null, 7, [cljs$cst$4683$db_from_reader, function() {
  var $new_m__32782__auto__$jscomp$43_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.db_ns, $name__32781__auto__$jscomp$43_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.db.db_from_reader;
  }, cljs$cst$4684$datascript_DOT_db_SLASH_db_from_reader, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4576$datascript_DOT_db, cljs$cst$4683$db_from_reader, "datascript/db.cljc", 21, 1, 1120, 1120, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 
  1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$1383$keys, new $APP.cljs.core.PersistentVector(null, 2, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1399$schema, cljs$cst$4562$datoms], null)], null)], null)), null, $APP.cljs.core.truth_(datascript.db.db_from_reader) ? datascript.db.db_from_reader.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$43_var__32778__auto__$$), 
  $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$43_var__32778__auto__$$);
  $name__32781__auto__$jscomp$43_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$43_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$43_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$43_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$43_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$43_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$43_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$43_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$43_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$43_ns__32777__auto__$$);
}(), cljs$cst$4685$datom_from_reader, function() {
  var $new_m__32782__auto__$jscomp$44_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.db_ns, $name__32781__auto__$jscomp$44_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.db.datom_from_reader;
  }, cljs$cst$4686$datascript_DOT_db_SLASH_datom_from_reader, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$78$tag, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4576$datascript_DOT_db, cljs$cst$4685$datom_from_reader, "datascript/db.cljc", 31, 1, 332, 332, cljs$cst$4661$Datom, 
  $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$63$vec], null)), null, $APP.cljs.core.truth_(datascript.db.datom_from_reader) ? datascript.db.datom_from_reader.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$44_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$44_var__32778__auto__$$);
  $name__32781__auto__$jscomp$44_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$44_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$44_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$44_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$44_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$44_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$44_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$44_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$44_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$44_ns__32777__auto__$$);
}(), cljs$cst$4687$datom_added, function() {
  var $new_m__32782__auto__$jscomp$45_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.db_ns, $name__32781__auto__$jscomp$45_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.db.datom_added;
  }, cljs$cst$4688$datascript_DOT_db_SLASH_datom_added, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$466$protocol, $APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4689$datascript_DOT_db_SLASH_IDatom, cljs$cst$4576$datascript_DOT_db, cljs$cst$4687$datom_added, "datascript/db.cljc", 
  15, 1, 178, 180, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2673$this], null)), null, $APP.cljs.core.truth_(datascript.db.datom_added) ? datascript.db.datom_added.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$45_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$45_var__32778__auto__$$);
  $name__32781__auto__$jscomp$45_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$45_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$45_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$45_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$45_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$45_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$45_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$45_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$45_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$45_ns__32777__auto__$$);
}(), cljs$cst$4690$datom_tx, function() {
  var $new_m__32782__auto__$jscomp$46_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.db_ns, $name__32781__auto__$jscomp$46_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.db.datom_tx;
  }, cljs$cst$4691$datascript_DOT_db_SLASH_datom_tx, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$466$protocol, $APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4689$datascript_DOT_db_SLASH_IDatom, cljs$cst$4576$datascript_DOT_db, cljs$cst$4690$datom_tx, "datascript/db.cljc", 
  12, 1, 178, 179, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 1, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$2673$this], null)), null, $APP.cljs.core.truth_(datascript.db.datom_tx) ? datascript.db.datom_tx.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$46_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$46_var__32778__auto__$$);
  $name__32781__auto__$jscomp$46_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$46_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$46_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$46_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$46_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$46_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$46_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$46_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$46_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$46_ns__32777__auto__$$);
}(), $APP.cljs$cst$4639$datom, function() {
  var $new_m__32782__auto__$jscomp$47_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.db_ns, $name__32781__auto__$jscomp$47_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.db.datom;
  }, cljs$cst$4692$datascript_DOT_db_SLASH_datom, $APP.cljs.core.PersistentHashMap.fromArrays([$APP.cljs$cst$176$ns, $APP.cljs$cst$272$name, $APP.cljs$cst$208$file, $APP.cljs$cst$218$end_column, $APP.cljs$cst$1377$top_fn, $APP.cljs$cst$216$column, $APP.cljs$cst$209$line, $APP.cljs$cst$217$end_line, $APP.cljs$cst$78$tag, $APP.cljs$cst$273$arglists, $APP.cljs$cst$256$doc, $APP.cljs$cst$171$test], [cljs$cst$4576$datascript_DOT_db, $APP.cljs$cst$4639$datom, "datascript/db.cljc", 19, new $APP.cljs.core.PersistentArrayMap(null, 
  6, [$APP.cljs$cst$1378$variadic_QMARK_, !1, $APP.cljs$cst$553$fixed_arity, 5, $APP.cljs$cst$1379$max_fixed_arity, 5, $APP.cljs$cst$1380$method_params, new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1242$e, $APP.cljs$cst$1255$a, $APP.cljs$cst$57$v], null), new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
  [$APP.cljs$cst$1242$e, $APP.cljs$cst$1255$a, $APP.cljs$cst$57$v, $APP.cljs$cst$2201$tx], null), new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1242$e, $APP.cljs$cst$1255$a, $APP.cljs$cst$57$v, $APP.cljs$cst$2201$tx, $APP.cljs$cst$2202$added], null)], null), $APP.cljs$cst$273$arglists, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1242$e, $APP.cljs$cst$1255$a, 
  $APP.cljs$cst$57$v], null), new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1242$e, $APP.cljs$cst$1255$a, $APP.cljs$cst$57$v, $APP.cljs$cst$2201$tx], null), new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1242$e, $APP.cljs$cst$1255$a, $APP.cljs$cst$57$v, $APP.cljs$cst$2201$tx, $APP.cljs$cst$2202$added], null)), $APP.cljs$cst$1381$arglists_meta, $APP.cljs.core.list(null, null, null)], 
  null), 1, 256, 256, cljs$cst$4661$Datom, $APP.cljs.core.list(new $APP.cljs.core.PersistentVector(null, 3, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1242$e, $APP.cljs$cst$1255$a, $APP.cljs$cst$57$v], null), new $APP.cljs.core.PersistentVector(null, 4, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, [$APP.cljs$cst$1242$e, $APP.cljs$cst$1255$a, $APP.cljs$cst$57$v, $APP.cljs$cst$2201$tx], null), new $APP.cljs.core.PersistentVector(null, 5, 5, $APP.cljs.core.PersistentVector.EMPTY_NODE, 
  [$APP.cljs$cst$1242$e, $APP.cljs$cst$1255$a, $APP.cljs$cst$57$v, $APP.cljs$cst$2201$tx, $APP.cljs$cst$2202$added], null)), null, $APP.cljs.core.truth_(datascript.db.datom) ? datascript.db.datom.cljs$lang$test : null])), $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$47_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$47_var__32778__auto__$$);
  $name__32781__auto__$jscomp$47_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$47_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$47_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$47_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$47_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$47_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$47_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$47_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$47_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$47_ns__32777__auto__$$);
}(), cljs$cst$4663$DB, function() {
  var $new_m__32782__auto__$jscomp$48_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.db_ns, $name__32781__auto__$jscomp$48_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.db.DB;
  }, cljs$cst$4693$datascript_DOT_db_SLASH_DB, new $APP.cljs.core.PersistentArrayMap(null, 8, [$APP.cljs$cst$176$ns, cljs$cst$4576$datascript_DOT_db, $APP.cljs$cst$256$doc, null, $APP.cljs$cst$208$file, "datascript/db.cljc", $APP.cljs$cst$209$line, 671, $APP.cljs$cst$216$column, 22, $APP.cljs$cst$272$name, cljs$cst$4663$DB, $APP.cljs$cst$171$test, $APP.cljs.core.truth_(datascript.db.DB) ? datascript.db.DB.cljs$lang$test : null, $APP.cljs$cst$273$arglists, $APP.cljs.core.List.EMPTY], null)), $val__32779__auto__$$ = 
  $APP.cljs.core.deref($name__32781__auto__$jscomp$48_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$48_var__32778__auto__$$);
  $name__32781__auto__$jscomp$48_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$48_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$48_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$48_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$48_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$48_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$48_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$48_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$48_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$48_ns__32777__auto__$$);
}(), cljs$cst$4661$Datom, function() {
  var $new_m__32782__auto__$jscomp$49_ns__32777__auto__$$ = $APP.sci.configs.tonsky.datascript.db_ns, $name__32781__auto__$jscomp$49_var__32778__auto__$$ = new $APP.cljs.core.Var(function() {
    return datascript.db.Datom;
  }, cljs$cst$4694$datascript_DOT_db_SLASH_Datom, new $APP.cljs.core.PersistentArrayMap(null, 8, [$APP.cljs$cst$176$ns, cljs$cst$4576$datascript_DOT_db, $APP.cljs$cst$256$doc, null, $APP.cljs$cst$208$file, "datascript/db.cljc", $APP.cljs$cst$209$line, 184, $APP.cljs$cst$216$column, 10, $APP.cljs$cst$272$name, cljs$cst$4661$Datom, $APP.cljs$cst$171$test, $APP.cljs.core.truth_(datascript.db.Datom) ? datascript.db.Datom.cljs$lang$test : null, $APP.cljs$cst$273$arglists, $APP.cljs.core.List.EMPTY], null)), 
  $val__32779__auto__$$ = $APP.cljs.core.deref($name__32781__auto__$jscomp$49_var__32778__auto__$$), $m__32780__auto__$$ = $APP.cljs.core.meta($name__32781__auto__$jscomp$49_var__32778__auto__$$);
  $name__32781__auto__$jscomp$49_var__32778__auto__$$ = $APP.cljs.core.truth_(null) ? null : $APP.cljs$cst$272$name.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  $new_m__32782__auto__$jscomp$49_ns__32777__auto__$$ = new $APP.cljs.core.PersistentArrayMap(null, 4, [$APP.cljs$cst$176$ns, $new_m__32782__auto__$jscomp$49_ns__32777__auto__$$, $APP.cljs$cst$272$name, $name__32781__auto__$jscomp$49_var__32778__auto__$$, $APP.cljs$cst$273$arglists, $APP.cljs$cst$273$arglists.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$), $APP.cljs$cst$256$doc, $APP.cljs$cst$256$doc.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)], null);
  return $APP.cljs.core.truth_($APP.cljs$cst$383$dynamic.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$)) ? $APP.sci.core.new_dynamic_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$49_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$49_ns__32777__auto__$$) : $APP.cljs.core.truth_(function() {
    var $or__5025__auto__$$ = $APP.cljs$cst$384$macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
    return $APP.cljs.core.truth_($or__5025__auto__$$) ? $or__5025__auto__$$ : $APP.cljs$cst$385$sci_SLASH_macro.cljs$core$IFn$_invoke$arity$1($m__32780__auto__$$);
  }()) ? $APP.sci.core.new_macro_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$49_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$49_ns__32777__auto__$$) : $APP.sci.core.new_var.cljs$core$IFn$_invoke$arity$3($name__32781__auto__$jscomp$49_var__32778__auto__$$, $val__32779__auto__$$, $new_m__32782__auto__$jscomp$49_ns__32777__auto__$$);
}()], null);
$APP.sci.configs.tonsky.datascript.namespaces = new $APP.cljs.core.PersistentArrayMap(null, 2, [cljs$cst$4636$datascript_DOT_core, $APP.sci.configs.tonsky.datascript.core_namespace, cljs$cst$4576$datascript_DOT_db, $APP.sci.configs.tonsky.datascript.db_namespace], null);
$APP.sci.configs.tonsky.datascript.config = new $APP.cljs.core.PersistentArrayMap(null, 1, [$APP.cljs$cst$398$namespaces, $APP.sci.configs.tonsky.datascript.namespaces], null);
$APP.scittle.datascript = {};
$APP.scittle.datascript.init = function() {
  return $APP.scittle.core.register_plugin_BANG_(cljs$cst$4695$scittle_DOT_datascript_SLASH_datascript, $APP.sci.configs.tonsky.datascript.config);
};
$APP.scittle.datascript.init();

}).call(this);